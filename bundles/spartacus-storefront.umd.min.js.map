{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/storefrontlib/src/layout/launch-dialog/config/launch-config.ts","../../../projects/storefrontlib/src/layout/config/layout-config.ts","../../../projects/storefrontlib/src/layout/launch-dialog/services/launch-render.strategy.ts","../../../projects/storefrontlib/src/layout/launch-dialog/services/inline-render.strategy.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet.model.ts","../../../projects/storefrontlib/src/layout/launch-dialog/services/launch-dialog.service.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet.service.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet-ref/outlet-ref.directive.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet-ref/outlet-ref.module.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet-renderer.service.ts","../../../projects/storefrontlib/src/layout/loading/intersection.service.ts","../../../projects/storefrontlib/src/layout/loading/defer-loader.service.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet.directive.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet.providers.ts","../../../projects/storefrontlib/src/cms-structure/outlet/outlet.module.ts","../../../projects/storefrontlib/src/layout/launch-dialog/services/outlet-render.strategy.ts","../../../projects/storefrontlib/src/layout/launch-dialog/services/routing-render.strategy.ts","../../../projects/storefrontlib/src/layout/launch-dialog/launch-dialog.module.ts","../../../projects/storefrontlib/src/cms-components/anonymous-consent-management/anonymous-consent-launch-dialog.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/keyboard-focus.model.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/base/base-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/base/base-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/visible/visible-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/block/block-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/persist/persist-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/persist/persist-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/services/select-focus.util.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/escape/escape-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/escape/escape-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/autofocus/auto-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/autofocus/auto-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/tab/tab-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/tab/tab-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/trap/trap-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/trap/trap-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/lock/lock-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/lock/lock-focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/services/keyboard-focus.service.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/focus.directive.ts","../../../projects/storefrontlib/src/layout/a11y/keyboard-focus/keyboard-focus.module.ts","../../../projects/storefrontlib/src/cms-components/misc/icon/icon.model.ts","../../../projects/storefrontlib/src/cms-components/anonymous-consent-management/banner/anonymous-consent-management-banner.component.ts","../../../projects/storefrontlib/src/layout/direction/config/direction.model.ts","../../../projects/storefrontlib/src/cms-components/misc/icon/fontawesome-icon.config.ts","../../../projects/storefrontlib/src/cms-components/misc/icon/icon-loader.service.ts","../../../projects/storefrontlib/src/cms-components/misc/icon/icon.component.ts","../../../projects/storefrontlib/src/cms-components/misc/icon/default-icon.config.ts","../../../projects/storefrontlib/src/cms-components/misc/icon/icon.module.ts","../../../projects/storefrontlib/src/shared/components/anonymous-consents-dialog/anonymous-consent-dialog.component.ts","../../../projects/storefrontlib/src/cms-components/anonymous-consent-management/default-anonymous-consent-layout.config.ts","../../../projects/storefrontlib/src/cms-components/anonymous-consent-management/open-dialog/anonymous-consent-open-dialog.component.ts","../../../projects/storefrontlib/src/cms-components/anonymous-consent-management/anonymous-consent-management.module.ts","../../../projects/storefrontlib/src/shared/components/spinner/spinner.component.ts","../../../projects/storefrontlib/src/shared/components/spinner/spinner.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/consent-management/components/consent-form/consent-management-form.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/consent-management/components/consent-management.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/consent-management/consent-management.module.ts","../../../projects/storefrontlib/src/shared/components/anonymous-consents-dialog/anonymous-consents-dialog.module.ts","../../../projects/storefrontlib/src/shared/components/card/card.component.ts","../../../projects/storefrontlib/src/shared/components/card/card.module.ts","../../../projects/storefrontlib/src/shared/components/carousel/carousel.service.ts","../../../projects/storefrontlib/src/shared/components/media/media.model.ts","../../../projects/storefrontlib/src/shared/components/carousel/carousel.component.ts","../../../projects/storefrontlib/src/layout/breakpoint/breakpoint.service.ts","../../../projects/storefrontlib/src/shared/components/media/media.service.ts","../../../projects/storefrontlib/src/shared/components/media/media.component.ts","../../../projects/storefrontlib/src/shared/components/media/media.module.ts","../../../projects/storefrontlib/src/shared/components/carousel/carousel.module.ts","../../../projects/storefrontlib/src/shared/components/form/date-picker/date-picker.service.ts","../../../projects/storefrontlib/src/shared/components/form/date-picker/date-picker.component.ts","../../../projects/storefrontlib/src/shared/components/form/form-errors/form-errors.component.ts","../../../projects/storefrontlib/src/shared/components/form/form-errors/form-errors.module.ts","../../../projects/storefrontlib/src/shared/components/form/date-picker/date-picker.module.ts","../../../projects/storefrontlib/src/shared/components/generic-link/generic-link.component.ts","../../../projects/storefrontlib/src/shared/components/generic-link/generic-link.module.ts","../../../projects/storefrontlib/src/shared/components/item-counter/item-counter.component.ts","../../../projects/storefrontlib/src/shared/components/item-counter/item-counter.module.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/pagination/pagination.model.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/pagination/config/default-pagination.config.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/pagination/config/pagination.config.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/pagination/pagination.builder.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/pagination/pagination.component.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/pagination/pagination.module.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/sorting/sorting.component.ts","../../../projects/storefrontlib/src/shared/components/list-navigation/list-navigation.module.ts","../../../projects/storefrontlib/src/shared/components/media/media.config.ts","../../../projects/storefrontlib/src/shared/components/modal/modal-ref.ts","../../../projects/storefrontlib/src/shared/components/modal/modal.directive.ts","../../../projects/storefrontlib/src/shared/components/modal/modal.module.ts","../../../projects/storefrontlib/src/shared/components/modal/modal.service.ts","../../../projects/storefrontlib/src/shared/components/order-overview/order-overview.component.ts","../../../projects/storefrontlib/src/shared/components/order-overview/order-overview.module.ts","../../../projects/storefrontlib/src/shared/components/replenishment-order-cancellation-dialog/replenishment-order-cancellation-dialog.component.ts","../../../projects/storefrontlib/src/shared/components/replenishment-order-cancellation-dialog/replenishment-order-cancellation-dialog.module.ts","../../../projects/storefrontlib/src/shared/components/split-view/split-view.service.ts","../../../projects/storefrontlib/src/shared/components/split-view/split/split-view.component.ts","../../../projects/storefrontlib/src/shared/components/split-view/view/view.component.ts","../../../projects/storefrontlib/src/shared/components/split-view/split-view.module.ts","../../../projects/storefrontlib/src/cms-components/misc/global-message/global-message.component.ts","../../../projects/storefrontlib/src/cms-components/misc/global-message/global-message.module.ts","../../../projects/storefrontlib/src/cms-components/misc/qualtrics/config/qualtrics-config.ts","../../../projects/storefrontlib/src/cms-components/misc/qualtrics/qualtrics-loader.service.ts","../../../projects/storefrontlib/src/cms-components/misc/qualtrics/qualtrics.component.ts","../../../projects/storefrontlib/src/cms-components/misc/qualtrics/config/default-qualtrics-config.ts","../../../projects/storefrontlib/src/cms-components/misc/qualtrics/qualtrics.module.ts","../../../projects/storefrontlib/src/cms-components/misc/site-context-selector/language-currency.component.ts","../../../projects/storefrontlib/src/cms-structure/page/model/cms-component-data.ts","../../../projects/storefrontlib/src/cms-components/misc/site-context-selector/site-context-component.service.ts","../../../projects/storefrontlib/src/cms-components/misc/site-context-selector/site-context-selector.component.ts","../../../projects/storefrontlib/src/cms-components/misc/site-context-selector/site-context.model.ts","../../../projects/storefrontlib/src/cms-components/misc/site-context-selector/site-context-selector.module.ts","../../../projects/storefrontlib/src/shared/components/star-rating/star-rating.component.ts","../../../projects/storefrontlib/src/shared/components/star-rating/star-rating.module.ts","../../../projects/storefrontlib/src/shared/components/table/table-data-cell/table-data-cell.component.ts","../../../projects/storefrontlib/src/shared/components/table/table-header-cell/table-header-cell.component.ts","../../../projects/storefrontlib/src/shared/components/table/config/default-table.config.ts","../../../projects/storefrontlib/src/shared/components/table/config/table.config.ts","../../../projects/storefrontlib/src/shared/components/table/table-data-cell/table-data-cell.module.ts","../../../projects/storefrontlib/src/shared/components/table/table-header-cell/table-header-cell.module.ts","../../../projects/storefrontlib/src/shared/components/table/table.model.ts","../../../projects/storefrontlib/src/shared/components/table/table-renderer.service.ts","../../../projects/storefrontlib/src/shared/components/table/table.component.ts","../../../projects/storefrontlib/src/shared/components/table/table.module.ts","../../../projects/storefrontlib/src/shared/components/table/table.service.ts","../../../projects/storefrontlib/src/shared/config/view-config.ts","../../../projects/storefrontlib/src/shared/config/view-config.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-details.service.ts","../../../projects/storefrontlib/src/shared/services/promotion/promotion.service.ts","../../../projects/storefrontlib/src/shared/utils/validators/custom-form-validators.ts","../../../projects/storefrontlib/src/shared/utils/forms/title-utils.ts","../../../projects/storefrontlib/src/cms-structure/services/feature-modules.service.ts","../../../projects/storefrontlib/src/cms-structure/services/cms-components.service.ts","../../../projects/storefrontlib/src/cms-structure/page/component/services/component-data.provider.ts","../../../projects/storefrontlib/src/cms-structure/page/component/services/cms-injector.service.ts","../../../projects/storefrontlib/src/cms-structure/page/component/handlers/component-handler.ts","../../../projects/storefrontlib/src/cms-structure/page/component/services/component-handler.service.ts","../../../projects/storefrontlib/src/cms-structure/page/component/component-wrapper.directive.ts","../../../projects/storefrontlib/src/cms-structure/page/component/handlers/default-component.handler.ts","../../../projects/storefrontlib/src/cms-structure/page/component/handlers/lazy-component.handler.ts","../../../projects/storefrontlib/src/cms-structure/page/component/page-component.module.ts","../../../projects/storefrontlib/src/cms-components/asm/asm-constants.ts","../../../projects/storefrontlib/src/cms-components/asm/services/asm-enabler.service.ts","../../../projects/storefrontlib/src/cms-components/asm/asm-loader.module.ts","../../../projects/storefrontlib/src/cms-components/asm/services/asm-component.service.ts","../../../projects/storefrontlib/src/cms-components/asm/asm-main-ui/asm-main-ui.component.ts","../../../projects/storefrontlib/src/cms-components/asm/asm-session-timer/asm-session-timer.component.ts","../../../projects/storefrontlib/src/cms-components/asm/asm-session-timer/format-timer.pipe.ts","../../../projects/storefrontlib/src/cms-components/asm/asm-toggle-ui/asm-toggle-ui.component.ts","../../../projects/storefrontlib/src/cms-components/asm/csagent-login-form/csagent-login-form.component.ts","../../../projects/storefrontlib/src/cms-components/asm/customer-emulation/customer-emulation.component.ts","../../../projects/storefrontlib/src/cms-components/asm/customer-selection/customer-selection.component.ts","../../../projects/storefrontlib/src/cms-components/asm/default-asm-layout.config.ts","../../../projects/storefrontlib/src/cms-components/asm/asm.module.ts","../../../projects/storefrontlib/src/cms-components/product/current-product.service.ts","../../../projects/storefrontlib/src/cms-components/cart/add-to-cart/added-to-cart-dialog/added-to-cart-dialog.component.ts","../../../projects/storefrontlib/src/cms-components/cart/add-to-cart/add-to-cart.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/promotions/promotions.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/promotions/promotions.module.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-coupon/applied-coupons/applied-coupons.component.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-coupon/cart-coupon.component.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-coupon/cart-coupon.module.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-shared/cart-item-list/cart-item-list.component.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-shared/cart-item/cart-item.component.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-shared/order-summary/order-summary.component.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-shared/cart-shared.module.ts","../../../projects/storefrontlib/src/cms-components/cart/add-to-cart/add-to-cart.module.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-details/cart-details.component.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-details/cart-details.module.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-not-empty.guard.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-page-layout-handler.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-totals/cart-totals.component.ts","../../../projects/storefrontlib/src/cms-components/cart/cart-totals/cart-totals.module.ts","../../../projects/storefrontlib/src/cms-structure/page/page-layout/page-layout-handler.ts","../../../projects/storefrontlib/src/cms-components/cart/mini-cart/mini-cart.component.ts","../../../projects/storefrontlib/src/cms-components/cart/mini-cart/mini-cart.module.ts","../../../projects/storefrontlib/src/cms-components/cart/add-to-wishlist/add-to-wish-list.component.ts","../../../projects/storefrontlib/src/cms-components/cart/add-to-wishlist/add-to-wish-list.module.ts","../../../projects/storefrontlib/src/cms-components/cart/save-for-later/save-for-later.component.ts","../../../projects/storefrontlib/src/cms-components/cart/save-for-later/save-for-later.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/model/checkout-step.model.ts","../../../projects/storefrontlib/src/cms-components/cart/cart.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/config/checkout-config.ts","../../../projects/storefrontlib/src/cms-components/checkout/config/default-checkout-config.ts","../../../projects/storefrontlib/src/cms-components/checkout/services/checkout-config.service.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/checkout-auth.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/services/checkout-step.service.ts","../../../projects/storefrontlib/src/cms-components/checkout/services/checkout-details.service.ts","../../../projects/storefrontlib/src/cms-components/checkout/services/express-checkout.service.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/checkout.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-orchestrator/checkout-orchestrator.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-orchestrator/checkout-orchestrator.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-order-summary/checkout-order-summary.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-order-summary/checkout-order-summary.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-progress/checkout-progress-mobile-bottom/checkout-progress-mobile-bottom.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/checkout-steps-set.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-progress/checkout-progress-mobile-bottom/checkout-progress-mobile-bottom.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-progress/checkout-progress-mobile-top/checkout-progress-mobile-top.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-progress/checkout-progress-mobile-top/checkout-progress-mobile-top.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-progress/checkout-progress.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-progress/multiline-titles.pipe.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/checkout-progress/checkout-progress.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/checkout-details-loaded.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/not-checkout-auth.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/delivery-mode-set.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/payment-details-set.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/guards/shipping-address-set.guard.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/cost-center/cost-center.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/cost-center/cost-center.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/delivery-mode/delivery-mode.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/delivery-mode/delivery-mode.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/shipping-address/address-form/suggested-addresses-dialog/suggested-addresses-dialog.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/payment-method/payment-form/payment-form.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/payment-method/payment-form/payment-form.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/payment-method/payment-method.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/payment-method/payment-method.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/payment-type/payment-type.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/payment-type/payment-type.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/place-order/default-place-order-spinner-layout.config.ts","../../../projects/storefrontlib/src/cms-components/checkout/services/checkout-replenishment-form-service.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/place-order/place-order.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/place-order/place-order.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/review-submit/review-submit.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/review-submit/review-submit.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/schedule-replenishment-order/schedule-replenishment-order.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/schedule-replenishment-order/schedule-replenishment-order.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/shipping-address/address-form/address-form.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/shipping-address/address-form/address-form.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/shipping-address/shipping-address.component.ts","../../../projects/storefrontlib/src/cms-components/checkout/components/shipping-address/shipping-address.module.ts","../../../projects/storefrontlib/src/cms-components/checkout/checkout.module.ts","../../../projects/storefrontlib/src/layout/a11y/skip-link/config/skip-link.config.ts","../../../projects/storefrontlib/src/layout/a11y/skip-link/service/skip-link.service.ts","../../../projects/storefrontlib/src/layout/a11y/skip-link/component/skip-link.component.ts","../../../projects/storefrontlib/src/layout/a11y/skip-link/config/default-skip-link.config.ts","../../../projects/storefrontlib/src/layout/a11y/skip-link/directive/skip-link.directive.ts","../../../projects/storefrontlib/src/layout/a11y/skip-link/skip-link.module.ts","../../../projects/storefrontlib/src/layout/config/default-layout.config.ts","../../../projects/storefrontlib/src/layout/direction/config/direction.config.ts","../../../projects/storefrontlib/src/layout/direction/config/default-direction.config.ts","../../../projects/storefrontlib/src/layout/direction/direction.service.ts","../../../projects/storefrontlib/src/layout/direction/direction.module.ts","../../../projects/storefrontlib/src/layout/header/hamburger-menu/hamburger-menu.service.ts","../../../projects/storefrontlib/src/layout/header/hamburger-menu/hamburger-menu.component.ts","../../../projects/storefrontlib/src/layout/header/hamburger-menu/hamburger-menu.module.ts","../../../projects/storefrontlib/src/layout/layout.module.ts","../../../projects/storefrontlib/src/cms-structure/page/slot/page-slot.service.ts","../../../projects/storefrontlib/src/cms-structure/page/slot/page-slot.component.ts","../../../projects/storefrontlib/src/cms-structure/page/slot/page-slot.module.ts","../../../projects/storefrontlib/src/cms-structure/page/page-layout/page-layout.service.ts","../../../projects/storefrontlib/src/cms-structure/page/page-layout/page-layout.component.ts","../../../projects/storefrontlib/src/cms-structure/page/page-layout/page-template.directive.ts","../../../projects/storefrontlib/src/cms-structure/page/page-layout/page-layout.module.ts","../../../projects/storefrontlib/src/cms-structure/pwa/pwa.module-config.ts","../../../projects/storefrontlib/src/cms-structure/pwa/services/add-to-home-screen.service.ts","../../../projects/storefrontlib/src/cms-structure/pwa/components/add-to-home-screen.component.ts","../../../projects/storefrontlib/src/cms-structure/pwa/components/add-to-home-screen-banner/add-to-home-screen-banner.component.ts","../../../projects/storefrontlib/src/cms-structure/pwa/components/add-to-home-screen-btn/add-to-home-screen-btn.component.ts","../../../projects/storefrontlib/src/cms-structure/pwa/pwa.module.ts","../../../projects/storefrontlib/src/cms-structure/seo/config/default-seo.config.ts","../../../projects/storefrontlib/src/cms-structure/seo/config/seo.config.ts","../../../projects/storefrontlib/src/cms-structure/seo/html-lang-provider.ts","../../../projects/storefrontlib/src/cms-structure/seo/seo-meta.service.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/json-ld-script.factory.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/json-ld.directive.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/builders/tokens.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/structured-data.factory.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/structured-data.module.ts","../../../projects/storefrontlib/src/cms-structure/seo/seo.module.ts","../../../projects/storefrontlib/src/layout/main/storefront.component.ts","../../../projects/storefrontlib/src/layout/main/main.module.ts","../../../projects/storefrontlib/src/cms-structure/services/cms-guards.service.ts","../../../projects/storefrontlib/src/cms-structure/services/cms-i18n.service.ts","../../../projects/storefrontlib/src/cms-structure/services/cms-routes-impl.service.ts","../../../projects/storefrontlib/src/cms-structure/services/cms-routes.service.ts","../../../projects/storefrontlib/src/cms-structure/guards/cms-page-guard.service.ts","../../../projects/storefrontlib/src/cms-structure/guards/cms-page.guard.ts","../../../projects/storefrontlib/src/cms-structure/routing/cms-route/add-cms-route.ts","../../../projects/storefrontlib/src/cms-structure/routing/cms-route/cms-route.module.ts","../../../projects/storefrontlib/src/cms-structure/routing/default-routing-config.ts","../../../projects/storefrontlib/src/cms-structure/routing/routing.module.ts","../../../projects/storefrontlib/src/cms-structure/routing/suffix-routes/suffix-url-matcher.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/builders/breadcrumb/breadcrumb-schema.builder.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/builders/product/jsonld-base-product.builder.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/builders/product/jsonld-product-offer.builder.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/builders/product/jsonld-product-review.builder.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/builders/product/product-schema.builder.ts","../../../projects/storefrontlib/src/cms-structure/utils/cms-structure.model.ts","../../../projects/storefrontlib/src/cms-structure/seo/structured-data/builders/json-ld-builder.module.ts","../../../projects/storefrontlib/src/cms-structure/utils/cms-structure.util.ts","../../../projects/storefrontlib/src/cms-components/content/banner-carousel/banner-carousel.component.ts","../../../projects/storefrontlib/src/cms-components/content/banner-carousel/banner-carousel.module.ts","../../../projects/storefrontlib/src/cms-components/content/banner/banner.component.ts","../../../projects/storefrontlib/src/cms-components/content/banner/banner.module.ts","../../../projects/storefrontlib/src/cms-components/content/link/link.component.ts","../../../projects/storefrontlib/src/cms-components/content/link/link.module.ts","../../../projects/storefrontlib/src/cms-components/content/paragraph/paragraph.component.ts","../../../projects/storefrontlib/src/cms-components/content/paragraph/paragraph.module.ts","../../../projects/storefrontlib/src/cms-components/content/tab-paragraph-container/tab-paragraph-container.component.ts","../../../projects/storefrontlib/src/cms-components/content/tab-paragraph-container/tab-paragraph-container.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/address-book/address-book.component.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/address-book/address-book.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/address-book/address-book.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/close-account/components/close-account-modal/close-account-modal.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/close-account/components/close-account/close-account.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/close-account/close-account.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/forgot-password/forgot-password.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/forgot-password/forgot-password.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/amend-order-actions/amend-order-actions.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/amend-order.model.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/amend-order-actions/amend-order-actions.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/amend-order.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/amend-order-items/amend-order-items.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/amend-order-items/amend-order-items.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/cancellations/cancel-order-confirmation/cancel-order-confirmation.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/cancellations/order-cancellation.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/cancellations/order-cancellation.guard.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/cancellations/cancel-order-confirmation/cancel-order-confirmation.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/cancellations/cancel-order/cancel-order.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/cancellations/cancel-order/cancel-order.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/cancellations/order-cancellation.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/returns/order-return.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/returns/order-return.guard.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/returns/return-order-confirmation/return-order-confirmation.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/returns/return-order-confirmation/return-order-confirmation.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/returns/return-order/return-order.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/returns/return-order/return-order.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/amend-order/returns/order-return.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-actions/order-detail-actions.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-items/order-consigned-entries/order-consigned-entries.model.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-items/order-detail-items.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/tracking-events/tracking-events.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/consignment-tracking.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-items/order-consigned-entries/order-consigned-entries.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-shipping/order-detail-shipping.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-detail-totals/order-detail-totals.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-details/order-details.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-history/order-history.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order-history/order-history.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/replenishment-order-details/default-replenishment-order-cancellation-layout.config.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/replenishment-order-details/replenishment-order-cancellation/replenishment-order-cancellation-launch-dialog.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/replenishment-order-details/replenishment-order-cancellation/replenishment-order-cancellation.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/replenishment-order-details/replenishment-order-details.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/replenishment-order-details/replenishment-order-details.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/replenishment-order-history/replenishment-order-history.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/replenishment-order-history/replenishment-order-history.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/return-request-detail/return-request.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/return-request-detail/return-request-overview/return-request-overview.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/return-request-detail/return-request-items/return-request-items.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/return-request-detail/return-request-totals/return-request-totals.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/return-request-detail/return-request-detail.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/return-request-list/order-return-request-list.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/return-request-list/order-return-request-list.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/order/order.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/payment-methods/payment-methods.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/payment-methods/payment-methods.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/reset-password/reset-password-form.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/reset-password/reset-password.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-email/update-email-form/update-email-form.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-email/update-email.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-email/update-email.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-password/components/update-password-form/update-password-form.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-password/components/update-password/update-password.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-password/update-password.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-profile/components/update-profile-form.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-profile/update-profile.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/update-profile/update-profile.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-coupons/my-coupons.component.service.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-coupons/my-coupons.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-coupons/coupon-card/coupon-dialog/coupon-dialog.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-coupons/coupon-card/coupon-card.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-coupons/coupon-claim/coupon-claim.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-coupons/my-coupons.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/notification-preference/notification-preference.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/notification-preference/notification-preference.module.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-interests/my-interests.component.ts","../../../projects/storefrontlib/src/cms-components/myaccount/my-interests/my-interests.module.ts","../../../projects/storefrontlib/src/cms-components/navigation/breadcrumb/breadcrumb.component.ts","../../../projects/storefrontlib/src/cms-components/navigation/breadcrumb/breadcrumb.module.ts","../../../projects/storefrontlib/src/cms-components/navigation/navigation/navigation.service.ts","../../../projects/storefrontlib/src/cms-components/navigation/category-navigation/category-navigation.component.ts","../../../projects/storefrontlib/src/cms-components/navigation/navigation/navigation-ui.component.ts","../../../projects/storefrontlib/src/cms-components/navigation/navigation/navigation.component.ts","../../../projects/storefrontlib/src/cms-components/navigation/navigation/navigation.module.ts","../../../projects/storefrontlib/src/cms-components/navigation/category-navigation/category-navigation.module.ts","../../../projects/storefrontlib/src/cms-components/navigation/footer-navigation/footer-navigation.component.ts","../../../projects/storefrontlib/src/cms-components/navigation/footer-navigation/footer-navigation.module.ts","../../../projects/storefrontlib/src/cms-components/navigation/search-box/search-box-component.service.ts","../../../projects/storefrontlib/src/cms-components/navigation/search-box/search-box.component.ts","../../../projects/storefrontlib/src/cms-components/navigation/search-box/highlight.pipe.ts","../../../projects/storefrontlib/src/cms-components/navigation/search-box/search-box.module.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/components/order-confirmation-items/order-confirmation-items.component.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/components/order-confirmation-overview/order-confirmation-overview.component.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/components/order-confirmation-thank-you-message/order-confirmation-thank-you-message.component.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/components/order-confirmation-totals/order-confirmation-totals.component.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/components/guest-register-form/guest-register-form.component.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/guards/order-confirmation.guard.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/order-confirmation.module.ts","../../../projects/storefrontlib/src/cms-components/order-confirmation/replenishment-order-confirmation.module.ts","../../../projects/storefrontlib/src/cms-components/product/carousel/product-carousel.service.ts","../../../projects/storefrontlib/src/cms-components/product/carousel/product-carousel/product-carousel.component.ts","../../../projects/storefrontlib/src/cms-components/product/carousel/product-carousel/product-carousel.module.ts","../../../projects/storefrontlib/src/cms-components/product/carousel/product-references/product-references.component.ts","../../../projects/storefrontlib/src/cms-components/product/carousel/product-references/product-references.module.ts","../../../projects/storefrontlib/src/cms-components/product/config/default-scroll-config.ts","../../../projects/storefrontlib/src/cms-components/product/product-images/product-images.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-images/product-images.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-intro/product-intro.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-intro/product-intro.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-view/product-view.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/container/product-list-component.service.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/container/product-list.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/facet.model.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/container/product-scroll/product-scroll.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/services/product-facet.service.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/services/facet.service.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/active-facets/active-facets.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/active-facets/active-facets.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/facet-list/facet-list.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/facet/facet.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/facet/facet.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/facet-list/facet-list.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/product-facet-navigation.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-facet-navigation/product-facet-navigation.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-grid-item/product-grid-item.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-list-item/product-list-item.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/product-variants.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-style-selector/variant-style-selector.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-style-selector/variant-style-selector.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-size-selector/variant-size-selector.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-size-selector/variant-size-selector.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-color-selector/variant-color-selector.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-color-selector/variant-color-selector.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-style-icons/variant-style-icons.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/variant-style-icons/variant-style-icons.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/guards/product-variant.guard.ts","../../../projects/storefrontlib/src/cms-components/product/product-variants/product-variants.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-outlets.model.ts","../../../projects/storefrontlib/src/cms-components/product/product-list/product-list.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-summary/product-summary.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-summary/product-summary.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-tabs/product-attributes/product-attributes.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-tabs/product-attributes/product-attributes.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-tabs/product-details-tab/product-details-tab.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-tabs/product-details-tab/product-details-tab.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-tabs/product-reviews/product-reviews.component.ts","../../../projects/storefrontlib/src/cms-components/product/product-tabs/product-reviews/product-reviews.module.ts","../../../projects/storefrontlib/src/cms-components/product/product-tabs/product-tabs.module.ts","../../../projects/storefrontlib/src/cms-components/product/stock-notification/stock-notification-dialog/stock-notification-dialog.component.ts","../../../projects/storefrontlib/src/cms-components/product/stock-notification/stock-notification.component.ts","../../../projects/storefrontlib/src/cms-components/product/stock-notification/stock-notification.module.ts","../../../projects/storefrontlib/src/cms-components/user/checkout-login/checkout-login.component.ts","../../../projects/storefrontlib/src/cms-components/user/checkout-login/checkout-login.module.ts","../../../projects/storefrontlib/src/cms-components/user/login-form/login-form.component.ts","../../../projects/storefrontlib/src/cms-components/user/login-form/login-form.module.ts","../../../projects/storefrontlib/src/cms-components/user/login-register/login-register.component.ts","../../../projects/storefrontlib/src/cms-components/user/login-register/login-register.module.ts","../../../projects/storefrontlib/src/cms-components/user/login-route/login.guard.ts","../../../projects/storefrontlib/src/cms-components/user/login-route/login-route.module.ts","../../../projects/storefrontlib/src/cms-components/user/login/login.component.ts","../../../projects/storefrontlib/src/cms-components/user/login/login.module.ts","../../../projects/storefrontlib/src/cms-components/user/logout/logout.guard.ts","../../../projects/storefrontlib/src/cms-components/user/logout/logout.module.ts","../../../projects/storefrontlib/src/cms-components/user/register/register.component.ts","../../../projects/storefrontlib/src/cms-components/user/register/register.module.ts","../../../projects/storefrontlib/src/cms-components/user/user.module.ts","../../../projects/storefrontlib/src/cms-components/wish-list/components/wish-list-item/wish-list-item.component.ts","../../../projects/storefrontlib/src/cms-components/wish-list/components/wish-list/wish-list.component.ts","../../../projects/storefrontlib/src/cms-components/wish-list/wish-list.module.ts","../../../projects/storefrontlib/src/cms-components/cms-lib.module.ts","../../../projects/storefrontlib/src/cms-pages/product-details-page/product-details-url-matcher.ts","../../../projects/storefrontlib/src/cms-pages/product-details-page/product-details-page.module.ts","../../../projects/storefrontlib/src/cms-pages/product-listing-page/product-listing-url-matcher.ts","../../../projects/storefrontlib/src/cms-pages/product-listing-page/product-listing-page.module.ts","../../../projects/storefrontlib/src/events/page/page.events.ts","../../../projects/storefrontlib/src/events/cart/cart-page.events.ts","../../../projects/storefrontlib/src/events/cart/cart-page-event.builder.ts","../../../projects/storefrontlib/src/events/cart/cart-page-event.module.ts","../../../projects/storefrontlib/src/events/page/page-event.builder.ts","../../../projects/storefrontlib/src/events/page/page-event.module.ts","../../../projects/storefrontlib/src/events/product/product-page.events.ts","../../../projects/storefrontlib/src/events/product/product-page-event.builder.ts","../../../projects/storefrontlib/src/events/product/product-page-event.module.ts","../../../projects/storefrontlib/src/recipes/config/default-media.config.ts","../../../projects/storefrontlib/src/recipes/config/layout-config.ts","../../../projects/storefrontlib/src/recipes/config/static-cms-structure.ts","../../../projects/storefrontlib/src/events/events.module.ts","../../../projects/storefrontlib/src/recipes/storefront-foundation.module.ts","../../../projects/storefrontlib/src/recipes/storefront.module.ts","../../../projects/storefrontlib/src/recipes/b2c-storefront.module.ts","../../../projects/storefrontlib/src/utils/form-utils.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__values","o","s","m","i","__read","r","ar","error","__spread","arguments","concat","DIALOG_TYPE","LAUNCH_CALLER","BREAKPOINT","Injectable","args","providedIn","useExisting","Config","LaunchRenderStrategy","document","rendererFactory","renderedCallers","dialogClasses","popoverClasses","popoverCenterClasses","popoverCenterBackdropClasses","sidebarEndClasses","sidebarStartClasses","renderer","createRenderer","shouldRender","caller","config","Boolean","component","some","el","multi","applyClasses","dialogType","classes","DIALOG","addClass","POPOVER","POPOVER_CENTER","POPOVER_CENTER_BACKDROP","SIDEBAR_END","SIDEBAR_START","classes_1","classes_1_1","newClass","location","nativeElement","remove","filter","_a","removeClass","getPriority","Inject","DOCUMENT","RendererFactory2","InlineRenderStrategy","componentFactoryResolver","_this","_super","render","vcr","template","resolveComponentFactory","createComponent","element","of","isDevMode","console","warn","hasMatch","inline","ComponentFactoryResolver","OutletPosition","LaunchDialogService","renderStrategies","layoutConfig","_dialogClose","BehaviorSubject","undefined","_dataSubject","defineProperty","asObservable","launch","data","findConfiguration","getStrategy","clear","closeDialog","reason","resolveApplicable","LayoutConfig","OutletService","templatesRefs","BEFORE","Map","REPLACE","AFTER","add","outlet","templateOrFactory","position","store","newValue","get","set","stacked","templateRef","removeValueOrAll","has","delete","existing","val","OutletRefDirective","tpl","outletService","ngOnInit","cxOutletRef","cxOutletPos","ngOnDestroy","Directive","selector","TemplateRef","Input","NgModule","imports","CommonModule","declarations","exports","OutletRendererService","outletRefs","size","register","cxOutlet","context","getOutletRef","pipe","map","IntersectionService","isIntersected","options","intersects","first","Observable","observer","intersectOptions","rootMargin","getRootMargin","threshold","intersectionObserver","IntersectionObserver","entries","observe","disconnect","flatMap","entry","isIntersecting","distinctUntilChanged","deferredLoading","intersectionMargin","DeferLoaderService","platformId","intersectionService","globalLoadStrategy","strategy","DeferLoadingStrategy","INSTANT","load","shouldLoadInstantly","deferLoading","elementLoadingStrategy","isPlatformServer","DEFER","decorators","type","PLATFORM_ID","OutletDirective","deferLoaderService","outletRendererService","renderedTemplate","renderedComponents","outletContext$","ReplaySubject","loaded","EventEmitter","subscription","Subscription","unsubscribe","cxOutletDefer","build","ngOnChanges","changes","cxOutletContext","emit","hostElement","getHostElement","subscribe","buildOutlet","templates","includes","isArray","components","forEach","obj","tmplOrFactory","ComponentFactory","getComponentInjector","view","createEmbeddedView","$implicit","markForCheck","contextData","reference","context$","Injector","providers","provide","OutletContextData","useValue","parent","injector","HTMLElement","parentNode","complete","ViewContainerRef","Output","PROVIDE_OUTLET_OPTIONS","InjectionToken","registerOutletsFactory","providedOutletOptions","factory","id","OutletModule","forRoot","ngModule","APP_INITIALIZER","useFactory","deps","Optional","OutletRenderStrategy","template_1","outletDirective","reverse","find","componentType","tap","RoutingRenderStrategy","routingService","_caller","go","cxRoute","RoutingService","LaunchDialogModule","AnonymousConsentLaunchDialogService","launchDialogService","openDialog","openElement","ANONYMOUS_CONSENT","combineLatest","dialogClose","close","comp","focus","destroy","TrapFocus","FOCUS_ATTR","FOCUS_GROUP_ATTR","BaseFocusDirective","elementRef","service","defaultConfig","setDefaultConfiguration","requiredTabindex","tabindex","requiresExplicitTabIndex","indexOf","host","tagName","toLowerCase","hasAttribute","ElementRef","BaseFocusService","HostBinding","VisibleFocusDirective","disableMouseFocus","mouseFocus","handleMousedown","shouldFocusVisible","handleKeydown","event","isNavigating","metaKey","code","target","HostListener","BlockFocusDirective","block","GLOBAL_GROUP","PersistFocusService","group","key","getPersistenceGroup","getAttribute","PersistFocusDirective","handleFocus","preventDefault","stopPropagation","attr","ngAfterViewInit","isPersisted","preventScroll","SelectFocusUtility","focusableSelectors","focusableSelectorSuffix","query","from","querySelectorAll","findFirstFocusable","autofocus","isHidden","findFocusable","locked","invisible","suffix","join","offsetParent","EscapeFocusService","selectFocusUtil","shouldFocus","focusOnEscape","handleEscape","focusOnDoubleEscape","EscapeFocusDirective","esc","AutoFocusService","hasPersistedFocus","getPersisted","focussed","AutoFocusDirective","shouldAutofocus","firstFocusable","TabFocusService","moveTab","increment","tab","findNextScrollable","findNext","active","getActiveChild","virtualSlideCount","Math","round","scrollWidth","clientWidth","nextVirtualSlide","offsetLeft","getChildren","childs","activeIndex","findIndex","c","persisted","children","index","isActive","child","activeElement","TabFocusDirective","handleNextTab","handlePreviousTab","TrapFocusService","hasFocusableChildren","moveFocus","focusable","getTrapStart","trap","getTrapEnd","start","end","TrapFocusDirective","handleTrapDown","handleTrapUp","LockFocusService","LockFocusDirective","lock","unlock","handleEnter","shouldLock","unlockFocus","handleClick","isLocked","lockFocus","addTabindexToChildren","setTimeout","_b","setAttribute","shouldUnlockAfterAutofocus","toString","Renderer2","KeyboardFocusService","FocusDirective","directives","ICON_TYPE","AnonymousConsentManagementBannerComponent","anonymousConsentsService","anonymousConsentLaunchDialogService","subscriptions","bannerVisible$","isBannerVisible","viewDetails","hideBanner","dialog","allowAll","giveAllConsents","toggleBannerDismissed","Component","AnonymousConsentsService","IconResourceType","DirectionMode","fontawesomeIconConfig","icon","symbols","SEARCH","CART","INFO","STAR","GRID","LIST","CARET_DOWN","CARET_RIGHT","CARET_LEFT","ERROR","WARNING","SUCCESS","CLOSE","VISA","MASTER_CARD","AMEX","DINERS_CLUB","CREDIT_CARD","COLLAPSE","EXPAND","RESET","CIRCLE","HEART","EMPTY_HEART","FILTER","PENCIL","CLOCK","TRASH","ACTIVE","ON","OFF","LINK_OUT","SORT_DOWN","SORT","resources","LINK","url","IconLoaderService","winRef","iconConfig","sanitizer","loadedResources","getHtml","isResourceType","SVG","bypassSecurityTrustHtml","getSvgPath","TEXT","getSymbol","getFlipDirection","flipDirection","getStyleClasses","iconType","resourceType","res","types","svgResource","addLinkResource","resource","findResource","head","getElementsByTagName","link","createElement","rel","href","appendChild","WindowRef","IconConfig","DomSanitizer","IconComponent","iconLoader","setIcon","addStyleClasses","flipIcon","iconDirection","flipAtLtr","LTR","flipAtRtl","RTL","styleClasses","cls","split","_c","defaultIconConfig","provideDefaultConfig","AnonymousConsentDialogComponent","role","modal","showLegalDescription","iconTypes","requiredConsents","focusConfig","anonymousConsents","showLegalDescriptionInDialog","templates$","getTemplates","consents$","getConsents","loading$","getLoadTemplatesLoading","rejectAll","take","consents","consent","getCorrespondingConsent","isConsentGiven","isRequiredConsent","withdrawConsent","consentState","isConsentWithdrawn","giveConsent","onConsentChange","given","consents_1","consents_1_1","templateCode","AnonymousConsentsConfig","defaultAnonymousConsentLayoutConfig","AnonymousConsentOpenDialogComponent","ViewChild","I18nModule","FeaturesConfigModule","KeyboardFocusModule","provideConfig","cmsComponents","entryComponents","SpinnerComponent","ConsentManagementFormComponent","consentGiven","consentChanged","ANONYMOUS_CONSENT_STATUS","GIVEN","consentTemplate","currentConsent","consentWithdrawnDate","consentGivenDate","isRequired","templateId","ConsentManagementComponent","userConsentService","globalMessageService","anonymousConsentsConfig","authService","allConsentsLoading","getConsentsResultLoading","getGiveConsentResultLoading","getWithdrawConsentResultLoading","isUserLoggedIn","consentLoading","giveConsentLoading","withdrawConsentLoading","consentListInit","giveConsentInit","withdrawConsentInit","templateList$","withLatestFrom","templateList","consentsExists","loadConsents","anonymousTemplates","consentManagementPage","hideAnonymousConsents","hideTemplateIds","showAnonymousConsents","hideConsents","filterConsentTemplates","resetGiveConsentProcessState","getGiveConsentResultSuccess","success","onConsentGivenSuccess","resetWithdrawConsentProcessState","skipWhile","getWithdrawConsentResultSuccess","withdrawalSuccess","onConsentWithdrawnSuccess","version","GlobalMessageType","MSG_TYPE_CONFIRMATION","consentsToWithdraw","setupWithdrawalStream","_timesLoaded","loading","scan","acc","_value","timesLoaded","consentsToGive","setupGiveStream","UserConsentService","GlobalMessageService","AuthService","FormsModule","ReactiveFormsModule","SpinnerModule","IconModule","guards","AuthGuard","ConsentManagementModule","CardComponent","deleteCard","setDefaultCard","sendCard","editCard","cancelCard","border","editMode","isDefault","fitToContainer","setEditMode","cancelEdit","setDefault","send","edit","CarouselService","getItemsPerSlide","itemWidth","resize$","totalWidth","calculateItems","availableWidth","calculatedItems","endsWith","substring","floor","ImageLoadingStrategy","CarouselComponent","hideIndicators","indicatorIcon","previousIcon","nextIcon","inputItems","items","activeSlide","size$","changeDetection","ChangeDetectionStrategy","OnPush","BreakpointService","platform","breakpoint$","isPlatformBrowser","getBreakpoint","innerWidth","fallbackBreakpoint","_breakpoints","resolveBreakpointsFromConfig","getSize","breakpoint","getMaxSize","getMinSize","breakpoints","isDown","br","slice","isUp","isEqual","keys","sort","prev","max","breakpointConfig","min","windowWidth","MediaService","breakpointService","getMedia","mediaContainer","format","alt","mainMedia","resolveMedia","src","resolveAbsoluteUrl","altText","srcset","resolveSrcSet","imageLoadingStrategy","EAGER","_sortedFormats","mediaFormats","a","width","_reversedFormats","sortedFormats","media","resolveFormat","resolveBestFormat","reversedFormats","maxFormat","formats","reduce","startsWith","getBaseUrl","_f","backend","baseUrl","_e","_d","occ","MediaComponent","mediaService","isInitialized","isLoading","isMissing","container","handleMissing","loadHandler","loadingStrategy","LAZY","errorHandler","MediaModule","RouterModule","UrlModule","DatePickerService","placeholder","replace","isValidFormat","date","pattern","RegExp","test","getDate","delimiter","substr","dateParts","placeholderParts","Date","Number","DatePickerComponent","update","change","FormErrorsComponent","prefix","_control","control","errors$","statusChanges","startWith","errors","invalid","dirty","touched","FormErrorsModule","GenericLinkComponent","router","PROTOCOL_REGEX","URL_SPLIT","routeParts","isExternalUrl","setUrlParts","currentValue","path","queryParams","fragment","getAbsoluteUrl","splitUrl","parseUrl","match","Router","ItemCounterComponent","allowZero","readonly","input","sub","valueChanges","setValue","getValidCount","emitEvent","markAsDirty","decrement","PaginationItemType","PaginationNavigationPosition","defaultPaginationConfig","pagination","addStart","addEnd","FALLBACK_PAGINATION_OPTIONS","rangeCount","dotsLabel","startLabel","previousLabel","nextLabel","endLabel","PaginationBuilder","paginationConfig","paginate","pageCount","current","pages","addPages","addDots","addFirstLast","addNavigation","getStartOfRange","number","String","PAGE","unshift","firstItemNumber","gapNumber","addFirst","isGap","substituteDotsForSingularPage","isSubstituted","GAP","FIRST","assign","addFirstGap","nextPageNumber","last","addLast","LAST","addLastGap","before","getBeforeLinks","after","getAfterLinks","pos","navigationPosition","ASIDE","list","START","addPrevious","PREVIOUS","addNext","NEXT","END","count","delta","minStart","maxStart","PaginationConfig","PaginationComponent","paginationBuilder","activatedRoute","viewPageEvent","_pagination","totalPages","currentPage","isCurrent","item","isInactive","getQueryParams","snapshot","queryParam","defaultPage","pageChange","page","ActivatedRoute","SortingComponent","sortListEvent","sortList","sortCode","NgSelectModule","PaginationModule","ModalRef","NgbModalRef","ModalDirectiveService","onClick","activeModal","dismiss","ModalDirective","routerLink","routerLinkWithHref","getUrl","serializeUrl","urlTree","cxModal","cxModalReason","NgbActiveModal","RouterLink","RouterLinkWithHref","ModalService","ngbModalService","modals","open","content","handleModalRemoveEvents","finally","getActiveModal","dismissActiveModal","closeActiveModal","NgbModal","OrderOverviewComponent","translation","order","getReplenishmentCodeCardContent","orderCode","translate","textTitle","title","text","getReplenishmentActiveCardContent","textActive","textCancelled","getReplenishmentStartOnCardContent","isoDate","getReplenishmentFrequencyCardContent","frequency","getReplenishmentNextDateCardContent","getOrderCodeCardContent","getOrderCurrentDateCardContent","getOrderStatusCardContent","status","getPurchaseOrderNumber","poNumber","noneTextTitle","getMethodOfPaymentCardContent","hasPaymentInfo","textAccount","textCard","getCostCenterCardContent","costCenter","textBold","name","unit","getAddressCardContent","deliveryAddress","firstName","lastName","formattedAddress","country","getDeliveryModeCardContent","deliveryMode","description","deliveryCost","formattedValue","getPaymentInfoCardContent","payment","month","expiryMonth","year","expiryYear","textExpires","accountHolderName","cardNumber","getBillingAddressCardContent","billingAddress","givenDate","toDateString","TranslationService","CardModule","ReplenishmentOrderCancellationDialogComponent","userReplenishmentOrderService","getReplenishmentOrderDetails","data$","replenishmentOrder","replenishmentOrderCode","getCancelReplenishmentOrderSuccess","onSuccess","params","clearCancelReplenishmentOrderProcessState","cancelReplenishment","cancelReplenishmentOrder","UserReplenishmentOrderService","SplitViewService","defaultHideMode","splitViewCount","_views$","initialState","state","hidden","views","updateState","updateSplitView","getActiveView","getActive","getViewState","activePosition","splice","toggle","forceHide","hide","lastVisible","l","SplitViewComponent","splitService","lastVisibleView","mode","getComputedStyle","getPropertyValue","ViewComponent","cd","disappeared","hiddenChange","_hidden","viewPosition","delayWhen","timer","duration","force","nextPosition","trim","ChangeDetectorRef","GlobalMessageComponent","messageType","messages$","QUALTRICS_EVENT_NAME","QualtricsLoaderService","qsiLoaded$","nativeWindow","fromEvent","qsi$","switchMap","isDataLoaded","api","qsi","qsiApi","initialize","run","reload","API","unload","log","addScript","scriptSource","hasScript","script","defer","source","querySelector","qualtricsLoader","qualtrics","QualtricsConfig","defaultQualtricsConfig","QualtricsComponent","LABELS","LANGUAGE_CONTEXT_ID","CURRENCY_CONTEXT_ID","SiteContextComponentService","componentData","contextServiceMap","getItems","getService","getAll","getContext","ctx","itemsCopy","items_1","items_1_1","getOptionLabel","getActiveItem","getLabel","setActive","getInjectedService","nativeName","symbol","isocode","CmsComponentData","ContextServiceMap","SiteContextSelectorComponent","componentService","SiteContextType","SiteContextModule","CMSSiteContextComponent","useClass","LanguageCurrencyComponent","StarRatingComponent","initialRate","disabled","rating","setRate","reset","saveRate","TableDataCellComponent","model","field","_field","TableHeaderCellComponent","fieldOptions","i18nKey","i18nRoot","_options","cells","_type","_i18nRoot","defaultTableConfig","tableOptions","headerComponent","dataComponent","TableLayout","TableRendererService","structure","thRenderer","getHeaderRenderer","ref","getHeaderOutletRef","tdRenderer","getDataRenderer","getDataOutletRef","outletRef","getHeaderOutletContext","getDataOutletContext","TableConfig","TableComponent","rendererService","_structure","init","verticalLayout","layout","VERTICAL","verticalStackedLayout","VERTICAL_STACKED","horizontalLayout","HORIZONTAL","addTableDebugInfo","launchItem","isCurrentItem","currentItem","property","trackData","_i","JSON","stringify","tableType","TableHeaderCellModule","TableDataCellModule","TableService","buildStructure","defaultStructure","hasTableConfig","buildStructureFromConfig","buildRandomStructure","getTableConfig","table","relevant","findRelevantBreakpoints","closestBreakpoint","buildStructureFromData","logWarning","message","ViewConfigModule","OrderDetailsService","userOrderService","orderCode$","getRouterState","routingData","orderLoad$","loadOrderDetails","clearOrderDetails","shareReplay","bufferSize","refCount","getOrderDetails","UserOrderService","PromotionService","orderDetailsService","checkoutService","activeCartService","getOrderPromotions","promotionLocation","PromotionLocation","ActiveCart","getOrderPromotionsFromCart","Checkout","getOrderPromotionsFromCheckout","Order","getOrderPromotionsFromOrder","cart","getOrderPromotionsFromCartHelper","potentialPromotions","potentialOrderPromotions","appliedPromotions","appliedOrderPromotions","getOrderPromotionsFromOrderHelper","getProductPromotionForEntry","getProductPromotion","appliedProductPromotions","promotions","entryPromotions","promotions_1","promotions_1_1","promotion","consumedEntries","e_2","consumedEntry","isConsumedByEntry","consumedEntryNumber","orderEntryNumber","entryNumber","CheckoutService","ActiveCartService","CustomFormValidators","emailValidator","email","EMAIL_PATTERN","cxInvalidEmail","passwordValidator","password","PASSWORD_PATTERN","cxInvalidPassword","starRatingEmpty","cxStarRatingEmpty","passwordsMustMatch","passwordConfirmation","formGroup","controlsMustMatch","emailsMustMatch","emailConfirmation","mustBePositive","cxNegativeAmount","noSpecialCharacters","str","char","cxContainsSpecialCharacters","patternValidation","dateRange","startDateKey","endDateKey","startDateControl","controls","endDateControl","startDate","endDate","setErrors","firstControlName","secondControlName","errorName","firstControl","secondControl","titleScores","mr","mrs","miss","ms","dr","rev","sortTitles","title1","title2","FeatureModulesService","configInitializer","lazyModules","componentFeatureMap","features","initFeatureMap","getStable","featureModulesConfig","featureModules","_g","featureName","featureConfig","module","_h","_j","hasFeatureFor","getCmsMapping","feature","resolveFeature","featureInstance","componentsMappings","getModule","moduleRef","featureConfig_1","Error","depsResolve","dependencies","forkJoin","depModuleFunc","resolveDependencyModuleInstance","resolveFeatureModule","dependencyModuleRefs","resolveModuleInstance","resolvedConfiguration","resolveFeatureConfiguration","featureInjector","featureConfigChunks","ConfigChunk","InjectFlags","Self","featureDefaultConfigChunks","DefaultConfigChunk","deepMerge","merge","values","ConfigInitializerService","LazyModulesService","CmsComponentsService","missingComponents","mappings","mappingResolvers","determineMappings","componentTypes","featureResolvers","componentTypes_1","componentTypes_1_1","staticConfig","getFeatureMappingResolver","mapTo","mappingResolver$","featureComponentMapping","share","getMapping","componentConfig","disableSSR","getDeferLoadingStrategy","getChildRoutes","configs","componentTypes_2","componentTypes_2_1","childRoutes","standardizeChildRoutes","getStaticData","childRoutesConfigs","getGuards","Set","componentTypes_3","componentTypes_3_1","guard","getI18nKeys","i18nKeys","componentTypes_4","componentTypes_4_1","CmsConfig","ComponentDataProvider","componentsService","cmsService","uid","staticComponentData","getComponentData","CmsService","CmsInjectorService","cmsComponentsService","getInjector","parentInjector","configProviders","dataProvider","ComponentHandlerService","handlers","invalidMappings","componentMapping","handler","getLauncher","viewContainerRef","elementInjector","launcher","ComponentHandler","ComponentWrapperDirective","dynamicAttributeService","componentHandler","cmsInjector","cxComponentWrapper","flexType","launchComponent","launcherResource","componentRef","cmpRef","decorate","addDynamicAttributes","DynamicAttributeService","DefaultComponentHandler","subscriber","getComponentFactory","LazyComponentHandler","defaultHandler","isNotClass","signature","ASM_ENABLED_LOCAL_STORAGE_KEY","AsmEnablerService","isEnabled","addUi","isLaunched","isUsedBefore","localStorage","setItem","getItem","ASM","Location","asmFactory","asmEnablerService","PageComponentModule","AsmComponentService","csAgentAuthService","logoutCustomerSupportAgentAndCustomer","logoutCustomerSupportAgent","logoutCustomer","logout","isCustomerEmulationSessionInProgress","isCustomerEmulated","removeItem","CsAgentAuthService","AsmMainUiComponent","userService","asmComponentService","asmService","startingCustomerSession","customerSupportAgentLoggedIn$","isCustomerSupportAgentLoggedIn","csAgentTokenLoading$","getCustomerSupportAgentTokenLoading","customer$","isLoggedIn","handleCustomerSessionStartRedirection","isCollapsed$","getAsmUiState","uiState","collapsed","MSG_TYPE_ERROR","loginCustomerSupportAgent","userId","authorizeCustomerSupportAgent","startCustomerEmulationSession","customerId","hideUi","encapsulation","ViewEncapsulation","None","UserService","AsmService","AsmSessionTimerComponent","changeDetectorRef","userIdService","maxStartDelayInSeconds","timeLeft","getTimerStartDelayInSeconds","interval","setInterval","clearInterval","resetOnNavigate","resetOnCustomerSessionChange","resetTimer","getUserId","asm","agentSessionTimer","startingDelayInSeconds","AsmConfig","UserIdService","FormatTimerPipe","transform","totalSeconds","minutes","seconds","Pipe","AsmToggleUiComponent","isCollapsed","toggleUi","updateAsmUiState","CSAgentLoginFormComponent","fb","csAgentTokenLoading","submitEvent","csAgentLoginForm","Validators","required","onSubmit","valid","markAllAsTouched","FormBuilder","CustomerEmulationComponent","user","customer","isCustomerEmulationSessionInProgress$","CustomerSelectionComponent","customerSelectionForm","searchTerm","customerSearchReset","searchResultsLoading$","getCustomerSearchResultsLoading","searchResults","getCustomerSearchResults","debounceTime","searchTermValue","handleSearchTerm","selectedCustomer","customerSearch","pageSize","maxResults","selectCustomerFromList","onDocumentClick","resultList","contains","closeResults","(document:click)","defaultAsmLayoutConfig","AsmCoreModule","AsmLoaderModule","CurrentProductService","productService","DEFAULT_PRODUCT_SCOPE","ProductScope","DETAILS","getProduct","scopes","productCode","product","ProductService","AddedToCartDialogComponent","modalService","cartService","promotionService","quantity","modalIsOpen","form","FormGroup","getQuantityControl","quantityControl$","entry$","getFormControl","valueChange","updateEntry","dismissModal","markAsPristine","orderPromotions$","addedEntryWasMerged$","loaded$","switchMapTo","getEntries","numberOfEntriesBeforeAdd","FormControl","updateOn","addControl","read","AddToCartComponent","currentProductService","showQuantity","hasStock","addToCartForm","setStockInfo","stock","stockLevelStatus","stockLevel","maxQuantity","updateCount","addToCart","openModal","addEntry","modalInstance","modalRef","centered","componentInstance","getLastEntry","cart$","isStable","PromotionsComponent","AppliedCouponsComponent","cartVoucherService","cartIsLoading","isReadOnly","vouchers","localeCompare","removeVoucher","voucherId","CartVoucherService","CartCouponComponent","formBuilder","customerCouponService","MAX_CUSTOMER_COUPON_PAGE","ignoreCloseEvent","couponBoxIsActive","loadCustomerCoupons","getActiveCartId","getCustomerCoupons","activeCardId","customerCoupons","cartId","getApplicableCustomerCoupons","coupons","cartIsLoading$","resetAddVoucherProcessingState","couponForm","couponCode","getAddVoucherResultSuccess","getAddVoucherResultError","onError","applicableCoupons","appliedVouchers","appliedVoucher","coupon","couponId","applyVoucher","addVoucher","applyCustomerCoupon","blur","disableClose","CustomerCouponService","CartApplyCouponComponent","CartItemListComponent","selectiveCartService","hasHeader","isSaveForLater","optionalBtn","_items","resolveItems","createForm","disable","enable","every","consignmentEntry","orderEntry","controlName","getControlName","updateable","removeEntry","getControl","SelectiveCartService","CartItemComponent","compact","appliedProductPromotions$","isProductOutOfStock","quantityControl","CartCouponModule","NgbModule","PromotionsModule","ItemCounterModule","ModalModule","OrderSummaryComponent","CartSharedModule","ProductAddToCartComponent","CartDetailsComponent","loggedIn","promotions$","entries$","selectiveCartEnabled","cartLoaded$","getLoaded","cartLoaded","sflLoaded","saveForLater","CartComponent","CartNotEmptyGuard","semanticPathService","canActivate","isEmpty","totalItems","SemanticPathService","CartPageLayoutHandler","handle","slots$","pageTemplate","section","getCart","getLoading","slots","selectiveCart","loadingCart","exclude","arr","arg","CartTotalsComponent","PAGE_LAYOUT_HANDLER","quantity$","deliveryItemsQuantity","total$","totalPrice","MiniCartComponent","AddToWishListComponent","wishListService","product$","wishListEntries$","getWishList","wishlist","wishList","userLoggedIn$","getWishListLoading","getProductInWishList","WishListService","SaveForLaterComponent","isCartEmpty$","saveForLater$","moveToCart","CheckoutStepType","CartDetailsModule","CartTotalsModule","SaveForLaterModule","AddToWishListModule","AddToCartModule","MiniCartModule","CartModule","DeliveryModePreferences","checkoutShippingSteps","SHIPPING_ADDRESS","DELIVERY_MODE","checkoutPaymentSteps","PAYMENT_DETAILS","PAYMENT_TYPE","defaultCheckoutConfig","checkout","steps","routeName","REVIEW_ORDER","express","defaultDeliveryMode","FREE","guest","CheckoutConfigService","checkoutConfig","compareDeliveryCost","deliveryMode1","deliveryMode2","findMatchingDeliveryMode","deliveryModes","LEAST_EXPENSIVE","leastExpensiveFound","MOST_EXPENSIVE","codeFound","getPreferredDeliveryMode","isExpressCheckout","isGuestCheckout","CheckoutConfig","CheckoutAuthGuard","authRedirectService","checkoutConfigService","getAssignedUser","cartUser","roles","B2BUserRole","CUSTOMER","MSG_TYPE_WARNING","isGuestCart","reportAuthGuard","createUrlTree","forced","AuthRedirectService","CheckoutStepService","routingConfigService","steps$","activeStepIndex$","activeStepUrl","getRouteConfig","paths","resetSteps","back","previousUrl","getPreviousCheckoutStepUrl","nextUrl","getNextCheckoutStepUrl","goToStepWithIndex","stepIndex","getStepUrlFromStepRoute","allSteps","getBackBntText","x","disableEnableStep","currentStepType","currentStep","getCheckoutStep","getCheckoutStepIndex","getCheckoutStepRoute","getFirstCheckoutStepRoute","getCurrentStepIndex","nextStep","previousStep","currentStepUrl","getStepUrlFromActivatedRoute","stepRoute","RoutingConfigService","CheckoutDetailsService","checkoutDeliveryService","checkoutPaymentService","cartId$","cartData","OCC_USER_ID_ANONYMOUS","guid","getCheckoutDetailsLoaded$","loadCheckoutDetails","getCheckoutDetailsLoaded","getDeliveryAddress","getSelectedDeliveryModeCode","getPaymentDetails","CheckoutDeliveryService","CheckoutPaymentService","ExpressCheckoutService","userAddressService","userPaymentService","checkoutDetailsService","setShippingAddress","setDeliveryMode","setPaymentMethod","shippingAddressSet$","getAddresses","getAddressesLoadedSuccess","getSetDeliveryAddressProcess","loadAddresses","addresses","setDeliveryAddressProcess","defaultAddress","address","setDeliveryAddress","setDeliveryAddressProcessState","paymentMethodSet$","getPaymentMethods","getPaymentMethodsLoadedSuccess","getSetPaymentDetailsResultProcess","loadPaymentMethods","payments","setPaymentDetailsProcess","defaultPayment","setPaymentDetails","setPaymentDetailsProcessState","deliveryModeSet$","getSupportedDeliveryModes","getSetDeliveryModeProcess","getLoadSupportedDeliveryModeProcess","addressSet","supportedDeliveryModes","setDeliveryModeStatusFlag","loadSupportedDeliveryModeStatus","setDeliveryModeStatus","preferredDeliveryMode","deliveryModeLoadingStatus","resetCheckoutProcesses","resetSetDeliveryAddressProcess","resetSetPaymentDetailsProcess","resetSetDeliveryModeProcess","trySetDefaultCheckoutDetails","deliveryModeSet","paymentMethodSet","UserAddressService","UserPaymentService","CheckoutGuard","expressCheckoutService","checkoutStepService","firstStep$","expressCheckoutPossible","CheckoutOrchestrator","CheckoutOrchestratorComponent","CheckoutOrderSummary","CheckoutOrderSummaryComponent","CheckoutProgressMobileBottomComponent","_steps$","activeStepIndex","CheckoutStepsSetGuard","paymentTypeService","checkoutCostCenterService","route","currentIndex","currentRouteUrl","isAccountPayment","isAccount","isStepSet","isPaymentTypeSet","isShippingAddressAndCostCenterSet","isDeliveryModeSet","isPaymentDetailsSet","getSelectedPaymentType","paymentType","getCostCenter","paymentDetails","PaymentTypeService","CheckoutCostCenterService","CheckoutProgressMobileBottom","CheckoutProgressMobileTopComponent","CheckoutProgressMobileTop","CheckoutProgressComponent","getTabIndex","isDisabled","MultiLinePipe","lastIndex","lastIndexOf","CheckoutProgress","CheckoutDetailsLoadedGuard","NotCheckoutAuthGuard","DeliveryModeSetGuard","checkoutStep","PaymentDetailsSetGuard","ShippingAddressSetGuard","CostCenterComponent","userCostCenterService","getActiveCostCenters","costCenters","cartCostCenter","costCenterId","setCostCenter","selectCostCenter","UserCostCenterService","ConfigModule","withConfig","CheckoutCostCenterComponent","DeliveryModeComponent","continueButtonPressed","backBtnText","deliveryModeId","supportedDeliveryModes$","previous","takeWhile","loadSupportedDeliveryModes","deliveryModeSub","getSelectedDeliveryMode","changeMode","CheckoutDeliveryMode","SuggestedAddressDialogComponent","selectedAddress","suggestedAddresses","enteredAddress","closeModal","PaymentFormComponent","months","years","sameAsShippingAddress","selectedCountry$","goBack","closeForm","paymentForm","cardType","cvn","billingAddressForm","line1","line2","town","region","isocodeShort","postalCode","expMonthAndYear","countries$","getAllBillingCountries","countries","loadBillingCountries","cardTypes$","getCardTypes","cardTypes","loadSupportedCardTypes","shippingAddress$","showSameAsShippingAddressCheckbox$","shouldShowCheckbox","addressVerifySub","getAddressVerificationResults","results","decision","clearAddressVerificationResults","openSuggestedAddress","regions$","getRegions","regions","regionControl","getFullYear","j","toggleDefaultPaymentMethod","toggleSameAsShippingAddress","phone","suggestedAddressModalRef","catch","verifyAddress","countrySelected","PaymentMethodComponent","newPaymentFormManuallyOpened","shouldRedirect","isLoading$","getPaymentMethodsLoading","existingPaymentMethods$","selectedMethod$","paymentInfo","sendPaymentMethodFailGlobalMessage","clearCheckoutStep","cards$","methods","method","expiryTranslation","paymentMethods","selectedMethod","textUseThisPayment","textDefaultPaymentMethod","textSelected","defaultPaymentMethod","paymentMethod","createCard","selectPaymentMethod","showNewPaymentForm","hideNewPaymentForm","details","createPaymentDetails","paymentProcessSuccess","getCardIcon","cardLabels","selected","img","actions","header","PaymentFormModule","CheckoutPaymentDetails","PaymentTypeComponent","paymentTypes$","getPaymentTypes","typeSelected$","typeSelected","B2BPaymentTypeEnum","ACCOUNT_PAYMENT","cartPoNumber$","getPoNumber","po","cartPoNumber","changeType","setPaymentType","poNumInput","_poNumberInput","static","CheckoutPaymentType","defaultPlaceOrderSpinnerLayoutConfig","PLACE_ORDER_SPINNER","CheckoutReplenishmentFormService","defaultFormData","daysOfWeek","DaysOfWeek","MONDAY","nthDayOfMonth","numberOfDays","numberOfWeeks","recurrencePeriod","DAILY","replenishmentStartDate","toISOString","scheduleReplenishmentFormData$","getScheduleReplenishmentFormData","setScheduleReplenishmentFormData","formData","resetScheduleReplenishmentFormData","PlaceOrderComponent","checkoutReplenishmentFormService","daysOfWeekNotChecked$","checkoutSubmitForm","termsAndConditions","requiredTrue","submitForm","currentOrderType","ORDER_TYPE","PLACE_ORDER","placeOrder","SCHEDULE_REPLENISHMENT_ORDER","scheduleReplenishmentOrder","scheduleReplenishmentFormData","getPlaceOrderLoading","getPlaceOrderSuccess","getPlaceOrderError","orderLoading","orderSuccess","orderError","placedOrder","clearPlaceOrderState","getCurrentOrderType","orderType","WEEKLY","CheckoutPlaceOrder","ReviewSubmitComponent","checkoutStepType","deliveryAddress$","getCountry","loadDeliveryCountries","cc","getShippingAddressCard","countryName","_m","getCostCenterCard","getDeliveryModeCard","getPaymentMethodCard","_o","paragraphs","_k","_l","getPoNumberCard","getPaymentTypeCard","getCheckoutStepUrl","stepType","shippingSteps","paymentSteps","CheckoutReviewOrder","ScheduleReplenishmentOrderComponent","orderTypes","recurrencePeriodType","selectedOrderType$","isMonthly","isWeekly","currentDaysOfWeek","initConfig","changeOrderType","setOrderType","changeNumberOfDays","nDays","changeNumberOfWeeks","nWeeks","changeRecurrencePeriodType","MONTHLY","createNumberStringArray","changeDayOfTheMonth","dayOfMonth","changeReplenishmentStartDate","changeRepeatDays","day","isChecked","foundDay","hasDaysOfWeekChecked","currentDate","fill","CheckoutScheduleReplenishmentOrder","AddressFormComponent","setAsDefaultField","showCancelBtn","submitAddress","backToAddress","addressForm","titleCode","getDeliveryCountries","titles$","getTitles","titles","subject","addressData","patchValue","regionSelected","addresses$","toggleDefaultAddress","regionsSub","ShippingAddressComponent","addressFormOpened","forceLoader","doneAutoSelect","getAddressesLoading","getSupportedAddresses","selectedAddress$","selectDefaultAddress","textDefault","textShipTo","card","getCardContent","getCostCenterAddresses","selectAddress","textDefaultShippingAddress","textShipToThisAddress","addAddress","createAndSetAddress","showNewAddressForm","hideNewAddressForm","goPrevious","AddressFormModule","CheckoutShippingAddress","CheckoutOrchestratorModule","CheckoutOrderSummaryModule","CheckoutProgressModule","CheckoutProgressMobileTopModule","CheckoutProgressMobileBottomModule","PaymentTypeModule","DeliveryModeModule","PaymentMethodModule","PlaceOrderModule","ScheduleReplenishmentOrderModule","ReviewSubmitModule","ShippingAddressModule","CostCenterModule","SkipLinkScrollPosition","SkipLinkService","keyboardFocusService","skipLinks$","getSkipLinks","found","skipLinks","skipLink","getSkipLinkIndexInArray","scrollToTarget","parentElement","hasTabindex","removeAttribute","this_1","SkipLinkConfig","SkipLinkComponent","skipLinkService","defaultSkipLinkConfig","SkipLinkDirective","cxSkipLink","skipLinkFactory","defaultLayoutConfig","xs","sm","md","lg","xl","defaultDirectionConfig","direction","detect","default","rtlLanguages","DirectionService","configInit","languageService","startsDetecting","getStableConfig","setDirection","documentElement","isoCode","getDirection","language","ltrLanguages","initHtmlDirAttribute","directionService","featureConfigService","isLevel","LanguageService","FeatureConfigService","HamburgerMenuService","isExpanded","events","NavigationStart","forceCollapse","HamburgerMenuComponent","hamburgerMenuService","OutletRefModule","DirectionModule","PageSlotService","resolvePrerenderedSlots","prerenderedSlots","getBoundingClientRect","top","clientHeight","shouldNotDefer","slot","getComponentDeferOptions","PageSlotComponent","pageSlotService","isPageFold","isPending","hasComponents","position$","slot$","getContentSlot","isDistinct","components$","pendingComponentCount","class","lastPosition","pending","addSmartEditSlotClass","isLoaded","loadState","old","slotData","_pageSlot","PageLayoutService","cms","warnLogMessages","logSlots","getSlots","page$","resolveSlots","getPageFoldSlot","layoutSlots","pageTemplateConfig","getResponsiveSlotConfig","pageFold","getSlotConfig","pageSlots_1","logMissingLayoutConfig","getCurrentPage","templateUid","configAttribute","getSlotConfigForSection","sectionConfig","responsiveConfig","layoutSlotConfig","slotConfig","all","info","cacheKey","PageLayoutComponent","pageLayoutService","section$","templateName$","layoutName$","pageFoldSlot$","templateName","PageTemplateDirective","useTemplateFromInput","addStyleClass","currentTemplate","classList","PageSlotModule","defaultPWAModuleConfig","pwa","enabled","addToHomeScreen","AddToHomeScreenService","canPrompt","canPrompt$","addEventListener","deferredEvent","enableAddToHomeScreen","disableAddToHomeScreen","firePrompt","prompt","PWAModuleConfig","AddToHomeScreenComponent","addToHomeScreenService","AddToHomeScreenBannerComponent","AddToHomeScreenBtnComponent","pwaConfigurationFactory","pwaConfig","pwaFactory","ServiceWorkerModule","SwRegistrationOptions","defaultSeoConfig","seo","structuredData","disableInDevMode","htmlLangProvider","setHtmlLangAttribute","lang","SeoMetaService","ngTitle","ngMeta","pageMetaService","getMeta","meta","image","robots","PageRobotsMeta","INDEX","FOLLOW","setTitle","addTag","imageUrl","updateTag","Title","Meta","PageMetaService","JsonLdScriptFactory","schema","isJsonLdRequired","getJsonLdScriptElement","innerHTML","sanitize","scriptElement","getElementById","_key","SecurityContext","HTML","SeoConfig","JsonLdDirective","jsonLdScriptFactory","jsonLD","generateJsonLdScript","html","SCHEMA_BUILDER","JSONLD_PRODUCT_BUILDER","StructuredDataFactory","scriptBuilder","builders","collectSchemas","builder","getStructuredDataFactory","initSeoService","StructuredDataModule","StorefrontComponent","isExpanded$","keyboardFocusConfig","navigateSubscription","startNavigating","stopNavigating","collapseMenuIfClickOutside","nodeName","className","collapseMenu","GlobalMessageComponentModule","PwaModule","PageLayoutModule","SeoModule","AnonymousConsentsDialogModule","SkipLinkModule","CmsGuardsService","cmsPageCanActivate","canActivateObservables","guardClass","isCanActivate","isObservable","wrapIntoObservable","endWith","CmsI18nService","translationChunk","loadForComponents","i18nChunks","i18nKeys_1","i18nKeys_1_1","getChunkNameForKey","loadChunks","TranslationChunkService","CmsRoutesImplService","cmsRouteExists","isCmsDrivenRoute","routePath","cxCmsRouteContext","handleCmsRoutesInGuard","pageContext","currentUrl","currentPageLabel","childRoutesConfig","updateRouting","navigateByUrl","pageLabel","PageType","CONTENT_PAGE","newRoute","resetConfig","CmsPageGuardService","cmsRoutes","cmsI18n","cmsGuards","routing","canActivatePage","pageData","getPageComponentTypes","canActivateNotFoundPage","notFoundCmsPageContext","getPage","notFoundPage","getPageIndex","notFoundIndex","setPageFailIndex","changeNextPageContext","CmsRoutesService","CmsPageGuard","protectedRoutesGuard","routingConfig","getNextPageContext","shouldReload","getLoadStrategy","guardName","ProtectedRoutesGuard","cmsRoute","addCmsRoute","ɵ0","defaultStorefrontRoutesConfig","home","notFound","login","protected","forgotPassword","resetPassword","checkoutLogin","checkoutPaymentType","checkoutShippingAddress","checkoutDeliveryMode","checkoutPaymentDetails","checkoutReviewOrder","orderConfirmation","replenishmentConfirmation","search","category","paramsMapping","categoryCode","brand","orders","orderDetails","orderGuest","orderReturn","orderReturnConfirmation","orderCancel","orderCancelConfirmation","returnRequestDetails","returnCode","couponClaim","replenishmentOrders","replenishmentDetails","defaultRoutingConfig","routes","RoutingModule","getSuffixUrlMatcher","marker","paramName","precedingParamName","matcher","segments","markerIndex","elements","predicate","findLastIndex","isMarkerLastSegment","paramIndex","posParams","consumed","CoreRoutingModule","CmsRouteModule","BreadcrumbSchemaBuilder","pageMeta","collect","breadcrumbs","crumbs","crumb","@type","@id","@context","itemListElement","JsonLdBaseProductBuilder","getProductBase","getProductBrand","getProductImage","sku","summary","images","PRIMARY","manufacturer","JsonLdProductOfferBuilder","price","currencyIso","priceCurrency","availability","offers","JsonLdProductReviewBuilder","reviewService","getByProductCode","reviews","aggregateRating","buildAggregatedReviews","review","buildReviews","aggregated","averageRating","ratingValue","ratingCount","reviewCount","comment","reviewSchema","principal","author","datePublished","getMonth","headline","reviewRating","ProductReviewService","ProductSchemaBuilder","currentProduct","PageSection","provideCmsStructure","componentId","pageSlotPosition","cmsStructure","typeCode","componentIds","buildCmsStructure","pageTemplateSlots","sectionSlots","buildLayoutConfig","BannerCarouselComponent","componentData$","theme","effect","items$","banners","codes","CarouselModule","RotatingImagesComponent","BannerComponent","getTarget","external","GenericLinkModule","SimpleResponsiveBannerComponent","SimpleBannerComponent","LinkComponent","CMSLinkComponent","CMSParagraphComponent","ParagraphComponent","CMSTabParagraphComponent","TabParagraphContainerComponent","activeTabNum","tabTitleParams","select","tabNum","scrollTo","offsetTop","history","activeTab","getTitleParams","tabComps","instance","tabTitleParam$","ViewChildren","CMSTabParagraphContainer","AddressBookComponentService","getAddressesStateLoading","addUserAddress","updateUserAddress","addressId","clearCheckoutDeliveryDetails","AddressBookComponent","showAddAddressForm","showEditAddressForm","addressesStateLoading$","addAddressButtonHandle","editAddressButtonHandle","currentAddress","addAddressSubmit","addAddressCancel","editAddressSubmit","editAddressCancel","defaultText","setAsDefaultText","textDelete","textEdit","textVerifyDeleteMsg","deleteMsg","setAddressAsDefault","deleteAddress","deleteUserAddress","setEdit","AccountAddressBookComponent","CloseAccountModalComponent","translationService","isLoggedIn$","resetRemoveUserProcessState","getRemoveUserResultSuccess","getRemoveUserResultError","getRemoveUserResultLoading","closeAccount","CloseAccountComponent","ForgotPasswordComponent","authConfigService","forgotPasswordForm","userEmail","requestForgotPasswordEmail","getOAuthFlow","OAuthFlow","ResourceOwnerPasswordFlow","AuthConfigService","NotAuthGuard","AmendOrderActionsComponent","styles","continue","amendOrderForm","forwardRoute","AmendOrderType","ValidateQuantityToCancel","cxNoSelectedItemToCancel","OrderAmendService","getAmendedEntries","getForm","getOrder","buildForm","entryGroup","validators","getMaxAmendQuantity","getAmendedPrice","amendedQuantity","amendedPrice","basePrice","formatCurrency","getCurrencySymbol","isCancellation","cancellableQuantity","returnableQuantity","amendType","CANCEL","CancelOrReturnItemsComponent","orderAmendService","isConfirmation","form$","setAll","getItemPrice","CancelOrderConfirmationComponent","submit","save","OrderCancellationService","inputs","cancelOrder","cancellationRequestEntryInputs","getCancelOrderSuccess","afterSave","resetCancelOrderProcessState","OrderCancellationGuard","forChild","ɵ0$1","AmendOrderItemsModule","AmendOrderActionsModule","CancelOrderComponent","CancelOrderModule","CancelOrderConfirmationModule","OrderReturnService","returnRequestService","RETURN","createOrderReturnRequest","returnRequestEntryInputs","getReturnRequestSuccess","getOrderReturnRequest","returnRequest","rma","OrderReturnRequestService","OrderReturnGuard","ReturnOrderConfirmationComponent","ReturnOrderComponent","ReturnOrderModule","ReturnOrderConfirmationModule","order$","completedValues","cancelledValues","OrderDetailItemsComponent","others$","getOtherStatus","completed$","getExactStatus","cancel$","consignmentStatus","consignments","consignment","TrackingEventsComponent","clearConsignmentTracking","ConsignmentTrackingComponent","consignmentTracking$","getConsignmentTracking","openTrackingDialog","loadConsignmentTracking","tracking$","shipDate","statusDate","consignmentCode","OrderConsignedEntriesComponent","getConsignmentProducts","products","OrderDetailShippingComponent","OrderDetailTotalsComponent","moduleComponents","OrderDetailActionsComponent","ɵ1","OrderOverviewModule","AccountOrderDetailsActionsComponent","AccountOrderDetailsItemsComponent","AccountOrderDetailsTotalsComponent","AccountOrderDetailsShippingComponent","consignmentTracking","OrderHistoryComponent","PAGE_SIZE","orders$","getOrderHistoryList","sortType","hasReplenishmentOrder$","isLoaded$","getOrderHistoryListLoaded","totalResults","clearOrderList","changeSortCode","fetchOrders","goToOrderDetail","getSortLabels","byDate","byOrderNumber","loadOrderList","ListNavigationModule","AccountOrderHistoryComponent","defaultReplenishmentOrderCancellationLayoutConfig","REPLENISHMENT_ORDER","ReplenishmentOrderCancellationLaunchDialogService","ReplenishmentOrderCancellationComponent","replenishmentOrderCancellationLaunchDialogService","replenishmentOrder$","clearReplenishmentOrderDetails","ReplenishmentOrderDetailsService","replenishmentOrderCode$","replenishmentOrderLoad$","loadReplenishmentOrderDetails","ReplenishmentOrderCancellationDialogModule","ReplenishmentDetailItemsComponent","ReplenishmentDetailTotalsComponent","ReplenishmentDetailShippingComponent","ReplenishmentDetailActionsComponent","ReplenishmentDetailOrderHistoryComponent","ReplenishmentOrderHistoryComponent","replenishmentOrders$","getReplenishmentOrderHistoryList","getReplenishmentOrderHistoryListSuccess","fetchReplenishmentOrders","byReplenishmentNumber","byNextOrderDate","loadReplenishmentOrderList","clearReplenishmentOrderList","AccountReplenishmentHistoryComponent","ReturnRequestService","getCancelReturnRequestLoading","getCancelReturnRequestSuccess","getReturnRequest","getReturnRequestLoading","routingState","loadOrderReturnRequestDetail","clearReturnRequest","clearOrderReturnRequestDetail","cancelReturnRequest","returnRequestCode","cancelOrderReturnRequest","cancelSuccess","resetCancelReturnRequestProcessState","backToList","ReturnRequestOverviewComponent","returnRequest$","isCancelling$","isCancelSuccess$","cancelReturn","ReturnRequestTotalsComponent","ReturnRequestItemsComponent","OrderReturnRequestListComponent","returnRequests$","getOrderReturnRequestList","requestList","returnRequests","clearOrderReturnRequestList","fetchReturnRequests","byRMA","loadOrderReturnRequestList","OrderHistoryModule","OrderDetailsModule","ReplenishmentOrderDetailsModule","OrderCancellationModule","OrderReturnModule","ReplenishmentOrderHistoryModule","ReturnRequestListModule","ReturnRequestDetailModule","PaymentMethodsComponent","paymentMethods$","paymentDetail","setDefaultPaymentMethod","textSetAsDefault","textDeleteConfirmation","deletePaymentMethod","setPaymentMethodAsDefault","AccountPaymentDetailsComponent","ResetPasswordFormComponent","resetPasswordForm","repassword","token","isPasswordReset","ResetPasswordComponent","UpdateEmailFormComponent","saveEmail","cancelEmail","updateEmailForm","confirmEmail","newUid","onCancel","UpdateEmailComponent","resetUpdateEmailResultState","getUpdateEmailResultSuccess","getUpdateEmailResultLoading","updateEmail","coreLogout","UpdatePasswordFormComponent","submitted","cancelled","updatePasswordForm","oldPassword","newPassword","newPasswordConfirm","UpdatePasswordComponent","resetUpdatePasswordProcessState","getUpdatePasswordResultLoading","getUpdatePasswordResultSuccess","updatePassword","UpdateProfileFormComponent","updateProfileForm","userUpdates","UpdateProfileComponent","resetUpdatePersonalDetailsProcessingState","user$","getUpdatePersonalDetailsResultLoading","getUpdatePersonalDetailsResultSuccess","updatePersonalDetails","MyCouponsComponentService","RELEVANCE","CUSTOMER_COUPON_CODE","launchSearchPage","buildSearchParam","couponcode","allProductsApplicable","byStartDateAsc","byStartDateDesc","byEndDateAsc","byEndDateDesc","MyCouponsComponent","couponService","myCouponsComponentService","sortMapping","sortOptions","couponResult$","totalCount","couponsLoading$","getCustomerCouponsLoading","couponSubscriptionLoading$","getSubscribeCustomerCouponResultLoading","getUnsubscribeCustomerCouponResultLoading","subscribing","unsubscribing","sortLabels","getSubscribeCustomerCouponResultError","subscriptionFail","getUnsubscribeCustomerCouponResultError","sortChange","notificationChange","notification","subscribeCustomerCoupon","unsubscribeCustomerCoupon","CouponDialogComponent","CouponCardComponent","notificationChanged","onSubscriptionChange","notificationOn","readMore","findProducts","CouponClaimComponent","messageService","k","claimCustomerCoupon","getClaimCustomerCouponResultSuccess","NotificationPreferenceComponent","notificationPreferenceService","preferences","resetNotificationPreferences","preferences$","getPreferences","loadPreferences","getPreferencesLoading","getUpdatePreferencesResultLoading","prefsLoading","updateLoading","updatePreference","preference","updatedPreferences","channel","updatePreferences","UserNotificationPreferenceService","MyInterestsComponent","productInterestService","DEFAULT_PAGE_SIZE","byNameAsc","byNameDesc","interests$","getAndLoadProductInterests","interests","interest","getInterestsloading$","getProdutInterestsLoading","isRemoveDisabled$","getRemoveProdutInterestLoading","removeLoading","removeInterest","relation","removeProdutInterest","productInterestEntry","loadProductInterests","clearProductInterests","resetRemoveInterestState","UserInterestsService","BreadcrumbComponent","setCrumbs","title$","heading","crumbs$","textHome","CmsPageTitleModule","NavigationService","createNavigation","getNavigationNode","nav","navigation","navigationNode","getNavigationEntryItems","loadNavigationEntryItems","expectedItems","existingItems_1","missingItems","it","loadNavigationItems","populateNavigationNode","nodeData","root","itemsList","superType","itemSuperType","itemId","node","styleAttributes","populateLink","itemType","linkName","getLink","contentPageLabelOrId","node$","NavigationUIComponent","elemRef","flyout","isOpen","openNodes","resize","NavigationEnd","alignWrappersToRightIfStickOut","onResize","toggleOpen","currentTarget","updateClasses","stopImmediatePropagation","onMouseEnter","alignWrapperToRightIfStickOut","focusAfterPreviousClicked","getTotalDepth","depth","getColumnCount","wrapAfter","relatedTarget","ownerDocument","matches","wrapper","closest","removeStyle","offsetWidth","setStyle","navs","childNodes","styleClass$","styleClass","NavigationComponent","NavigationModule","CategoryNavigationComponent","FooterNavigationComponent","HAS_SEARCH_RESULT_CLASS","SearchBoxComponentService","searchService","minCharactersBeforeRequest","displayProducts","maxProducts","displaySuggestions","searchSuggestions","maxSuggestions","clearResults","getResults","getProductResults","getProductSuggestions","getSearchMessage","productResults","suggestions","toggleBodyClass","hasResults","hasBodyClass","getSuggestionResults","suggestion","getExactSuggestion","productResult","fetchTranslation","term","freeTextSearch","translationKey","SearchboxService","DEFAULT_SEARCH_BOX_CONFIG","displayProductImages","SearchBoxComponent","searchBoxComponentService","config$","isBool","prop","results$","isSearchBoxFocused","blurSearchBox","getResultElements","getFocusedElement","avoidReopen","getFocusedIndex","focusPreviousChild","focusedIndex","focusNextChild","launchSearchResult","HighlightPipe","OrderConfirmationItemsComponent","clearCheckoutData","OrderConfirmationOverviewComponent","OrderConfirmationThankYouMessageComponent","isGuestCustomer","guestCustomer","orderGuid","isReplenishmentOrderType$","OrderConfirmationTotalsComponent","GuestRegisterFormComponent","guestRegisterForm","passwordconf","registerGuest","OrderConfirmationGuard","orderConfirmationComponents","OrderConfirmationThankMessageComponent","ReplenishmentConfirmationMessageComponent","ReplenishmentConfirmationOverviewComponent","ReplenishmentConfirmationItemsComponent","ReplenishmentConfirmationTotalsComponent","ProductCarouselService","loadProduct","convertProduct","displayTitle","displayProductPrices","PRODUCT_SCOPE","productCodes","ProductCarouselComponent","ProductReferencesComponent","cmsComponentData","productReferenceService","productCode$","loadProductReferences","productReferenceTypes","getProductReferences","cleanReferences","referenceType","references","ProductReferenceService","defaultScrollConfig","infiniteScroll","productLimit","showMoreButton","ProductImagesComponent","mainMediaContainer","thumbs$","createThumbs","mainImage$","openImage","thumbnail","zoom","thumbs","GALLERY","ProductIntroComponent","reviewsTabAvailable","ngAfterContentChecked","getReviewsComponent","showReviews","reviewsTabLabel","tabsComponent","getTabsComponent","reviewsTab","getTabByLabel","reviewsComponent","clickTabIfInactive","scrollIntoView","behavior","click","tabElements","buttonElement","StarRatingModule","ViewModes","ProductListComponentService","productSearchService","currencyService","defaultPageSize","RELEVANCE_ALLCATEGORIES","searchResults$","searchResult","searchByRouting$","siteContext","routerState","criteria","getCriteriaFromRoute","model$","using","routeParams","getQueryFromRouteParams","brandCode","getPageItems","pageNumber","routeCriteria","navigate","queryParamsHandling","relativeTo","ProductSearchService","CurrencyService","ProductViewComponent","modeChange","viewMode","newMode","Grid","List","ProductListComponent","productListComponentService","scrollConfig","viewMode$","isInfiniteScroll","setViewMode","ViewConfig","FacetGroupCollapsedState","ProductScrollComponent","appendProducts","resetList","isMaxProducts","isLastPage","inputConfig","setComponentConfigurations","inputModel","infiniteScrollOperations","inputViewMode","resetListOnViewModeChange","scrollPage","loadNextPage","scrollToTop","window","scroll","isButton","configProductLimit","setConditions","ProductFacetService","routeState$","pluck","searchResult$","filterForPage","mapResults","facetList$","facets","activeFacets","CATEGORY_PAGE","currentQuery","filterBreadcrumbs","breadcrumb","hasBreadcrumb","facetCode","facetValueCode","FacetService","productFacetService","facetState","facetList","facet","getState","getStateSnapshot","toggledState","toggled","COLLAPSED","EXPANDED","maxVisible","topVisible","increaseVisibleValues","decreaseVisibleValues","topValueCount","topFacets","hasState","getLinkParams","HttpUrlEncodingCodec","decodeValue","ActiveFacetsComponent","facetService","closeIcon","removeQuery","getFocusKey","facetValueName","Default","FacetListComponent","closeList","dialogFocusConfig","_isDialog","expandFacetGroup","FacetComponent","expandIcon","collapseIcon","_facet","isMultiSelect","multiSelect","state$","toggleGroup","keyboardFocus","openLink","FacetModule","ProductFacetNavigationComponent","CLOSE_DELAY","open$","isOpen$","observeOn","asapScheduler","hasTrigger","launched","isActive$","trigger","FacetListModule","ActiveFacetsModule","ProductRefinementComponent","ProductVariantsComponent","variants","variantType","VariantType","baseOptions","option","VariantStyleSelectorComponent","variantQualifier","VariantQualifier","getVariantOptionValue","qualifiers","q","qualifier","STYLE","getVariantThumbnailUrl","variantOptionQualifiers","changeStyle","OccConfig","VariantSizeSelectorComponent","changeSize","SIZE","VariantColorSelectorComponent","changeColor","COLOR","VariantStyleIconsComponent","variantNames","variant","getVariantName","THUMBNAIL","rollupProperty","ROLLUP_PROPERTY","ProductVariantGuard","VARIANTS","purchasable","findVariant","variantOptions","_product","VariantStyleSelectorModule","VariantSizeSelectorModule","VariantColorSelectorModule","VariantStyleIconsModule","ProductVariantSelectorComponent","ProductDetailOutlets","InfiniteScrollModule","ProductVariantsModule","CMSProductListComponent","ProductGridComponent","SearchResultsListComponent","ProductListItemComponent","ProductGridItemComponent","outlets","ProductSummaryComponent","ATTRIBUTES","ProductSpecsTabComponent","ProductAttributesComponent","ProductDetailsTabComponent","ProductReviewsComponent","isWritingReview","initialMaxListItems","reviews$","resetReviewForm","maxListItems","initiateWriteReview","detectChanges","titleInput","cancelWriteReview","writeReviewButton","setRating","reviewForm","submitReview","addReview","reviewFormControls","alias","reviewerName","ProductReviewsTabComponent","ProductAttributesModule","ProductDetailsTabModule","ProductReviewsModule","StockNotificationDialogComponent","interestsService","enabledPrefs","subscribeSuccess$","resetAddInterestState","StockNotificationComponent","notificationPrefService","anonymous","outOfStock$","NotificationType","BACK_IN_STOCK","hasProductInterests$","getProductInterests","getAddProductInterestSuccess","isRemoveInterestLoading$","prefsEnabled$","getEnabledPreferences","prefs","getAddProductInterestError","onInterestAddingError","getRemoveProdutInterestSuccess","onInterestRemovingSuccess","addProductInterest","interestType","MSG_TYPE_INFO","clearPreferences","CheckoutLoginComponent","checkoutLoginForm","addEmail","redirect","GuestCheckoutLoginComponent","LoginFormComponent","auth","routeState","prefilledEmail","loginForm","loginUser","loginWithCredentials","ReturningCustomerLoginComponent","LoginRegisterComponent","loginAsGuest","CheckoutModule","ReturningCustomerRegisterComponent","LoginGuard","cmsPageGuard","reportNotAuthGuard","loginWithRedirect","EMPTY","LoginComponent","LogoutGuard","protectedRoutes","hasPage","getRedirectUrl","shouldProtect","ProtectedRoutesService","RegisterComponent","registerForm","newsletter","isConsentRequired","termsandconditions","getRegisterUserResultLoading","registerUserProcessInit","messages","globalMessageEntities","registerConsent","anonymousConsent$","getConsent","getTemplate","toggleAnonymousConsent","registerUser","collectDataFromRegisterForm","titleSelected","onRegisterUserSuccess","resetRegisterUserProcessState","getRegisterUserResultSuccess","LoginModule","RegisterCustomerComponent","LoginFormModule","LoginRegisterModule","LogoutModule","LoginRouteModule","CheckoutLoginModule","RegisterComponentModule","WishListItemComponent","WishListComponent","wishList$","AnonymousConsentManagementBannerModule","AsmModule","HamburgerMenuModule","CmsParagraphModule","LinkModule","BannerModule","CategoryNavigationModule","FooterNavigationModule","BreadcrumbModule","SearchBoxModule","SiteContextSelectorModule","QualtricsModule","AddressBookModule","ProductListModule","ProductFacetNavigationModule","ProductTabsModule","ProductCarouselModule","ProductReferencesModule","PaymentMethodsModule","UpdateEmailModule","UpdatePasswordModule","UpdateProfileModule","CloseAccountModule","CartComponentModule","TabParagraphContainerModule","OrderConfirmationModule","ProductImagesModule","ProductSummaryModule","ProductIntroModule","CheckoutComponentModule","ForgotPasswordModule","ResetPasswordModule","BannerCarouselModule","UserComponentModule","MyCouponsModule","WishListModule","NotificationPreferenceModule","MyInterestsModule","StockNotificationModule","ReplenishmentOrderConfirmationModule","PRODUCT_DETAILS_URL_MATCHER","inject","UrlMatcherService","defaultMatcherFactory","DEFAULT_URL_MATCHER","defaultMatcher","suffixPDPMatcher","getCombined","matchers","PRODUCT_LISTING_URL_MATCHER","suffixPLPMatcher","ɵ2","HomePageEvent","PageEvent","CartPageEvent","CartPageEventBuilder","eventService","buildCartPageEvent","pageEvent","semanticRoute","createFrom","ActionsSubject","EventService","_cartPageEventBuilder","PageEventBuilder","buildPageEvent","buildHomePageEvent","getNavigatedEvent","ofType","ROUTER_NAVIGATED","payload","_pageEventBuilder","ProductDetailsPageEvent","CategoryPageResultsEvent","SearchPageResultsEvent","ProductPageEventBuilder","buildSearchPageResultsEvent","buildProductDetailsPageEvent","buildCategoryResultsPageEvent","categories","skip","numberOfResults","categoryName","categoryPage","searchPage","_productPageEventBuilder","mediaConfig","mobile","tablet","desktop","widescreen","cartIcon","footer","LandingPage2Template","ContentPage1Template","CategoryPageTemplate","ProductListPageTemplate","ProductGridPageTemplate","SearchResultsListPageTemplate","SearchResultsGridPageTemplate","ProductDetailsPageTemplate","CartPageTemplate","AccountPageTemplate","LoginPageTemplate","ErrorPageTemplate","OrderConfirmationPageTemplate","MultiStepCheckoutSummaryPageTemplate","CheckoutLoginPageTemplate","b2cLayoutConfig","defaultCmsContentProviders","CartPageEventModule","PageEventModule","ProductPageEventModule","StateModule","AuthModule","AnonymousConsentsModule","ConfigInitializerModule","ConfigValidatorModule","CmsModule","GlobalMessageModule","ProcessModule","UserModule","ProductModule","LayoutModule","EventsModule","provideConfigFromMetaTags","StorefrontModule","anchorScrolling","relativeLinkResolution","initialNavigation","StoreModule","EffectsModule","StorefrontFoundationModule","MainModule","SmartEditModule","PersonalizationModule","OccModule","ProductDetailsPageModule","ProductListingPageModule","ExternalRoutesModule","B2cStorefrontModule","HttpClientModule","CmsLibModule","FormUtils","deepUpdateValueAndValidity","FormArray","childControl","updateValueAndValidity","onlySelf"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { OutletPosition } from '../../../cms-structure/outlet/outlet.model';\n\nexport interface LaunchConfig {\n  [key: string]: LaunchOptions;\n}\n\nexport type LaunchOptions =\n  | LaunchOutletDialog\n  | LaunchInlineDialog\n  | LaunchRoute;\n\n/**\n * Parent type for configurations that render components\n */\nexport interface LaunchDialog {\n  component: any;\n  /**\n   * Can the element be rendered multiple times\n   */\n  multi?: boolean;\n  /**\n   * Dialog type is used to apply CSS classes\n   */\n  dialogType?: DIALOG_TYPE;\n}\n\n/**\n * Configuration type to render a component in an outlet\n */\nexport interface LaunchOutletDialog extends LaunchDialog {\n  /**\n   * The outlet to render the element in\n   */\n  outlet: string;\n  /**\n   * Default: OutletPosition.BEFORE\n   */\n  position?: OutletPosition;\n}\n\n/**\n * Configuration type to render a component inline (next to the trigger)\n */\nexport interface LaunchInlineDialog extends LaunchDialog {\n  inline: boolean;\n}\n\n/**\n * Configuration type to render as link\n */\nexport interface LaunchRoute {\n  /**\n   * The route for the url\n   */\n  cxRoute: string;\n  /**\n   * The parameters for the route\n   */\n  params?: { [param: string]: any };\n}\n\n/**\n * Types of dialog openings supported\n */\nexport enum DIALOG_TYPE {\n  POPOVER = 'POPOVER',\n  POPOVER_CENTER = 'POPOVER_CENTER',\n  POPOVER_CENTER_BACKDROP = 'POPOVER_CENTER_BACKDROP',\n  DIALOG = 'DIALOG',\n  SIDEBAR_START = 'SIDEBAR_START',\n  SIDEBAR_END = 'SIDEBAR_END',\n}\n\n/**\n * List of available callers\n */\nexport enum LAUNCH_CALLER {\n  ASM = 'ASM',\n  SKIP_LINKS = 'SKIP_LINKS',\n  ANONYMOUS_CONSENT = 'ANONYMOUS_CONSENT',\n  REPLENISHMENT_ORDER = 'REPLENISHMENT_ORDER',\n  PLACE_ORDER_SPINNER = 'PLACE_ORDER_SPINNER',\n}\n","import { Injectable } from '@angular/core';\nimport { Config, DeferLoadingStrategy } from '@spartacus/core';\nimport { LaunchConfig } from '../launch-dialog/index';\n\n/**\n * The `BREAKPOINT` typing defaults to five default screen names:\n * xs, sm, md, lg, xl.\n *\n * The type can be extended to allow for custom screens, such as XLL or `tablet`.\n *\n * While the screen names are fully configurable, other features might have\n * pre-configured layout settings per screen. Page layouts or table configurations,\n * for example, are driven by screen size. In case you change the screen size or\n * introduce new screen names, you might loose out on these configurations.\n */\nexport enum BREAKPOINT {\n  xs = 'xs',\n  sm = 'sm',\n  md = 'md',\n  lg = 'lg',\n  xl = 'xl',\n}\n\nexport type LayoutSections =\n  | 'header'\n  | 'footer'\n  | 'LandingPage2Template'\n  | string;\n\nexport type SlotConfig = {\n  /** The cms page slots are mapped by the `slot.position`. */\n  slots?: string[];\n\n  /**\n   * The page fold identifies the last expected page slot above-the-fold.\n   * It's perfectly fine to specify this by indication, but keep in mind that\n   * a more precise indication will gain a more positive impact on performance.\n   */\n  pageFold?: string;\n};\n\nexport type SlotGroup = {\n  /** The page slot configuration for large screens */\n  [BREAKPOINT.lg]?: SlotConfig;\n  /** The page slot configuration for medium screens */\n  [BREAKPOINT.md]?: SlotConfig;\n  /** The page slot configuration for small screens */\n  [BREAKPOINT.sm]?: SlotConfig;\n  /** The page slot configuration for extra small screens */\n  [BREAKPOINT.xs]?: SlotConfig;\n};\n\nexport type LayoutSlotConfig = {\n  [section in LayoutSections]: SlotConfig | SlotGroup | LayoutSlotConfig;\n};\n\nexport interface BreakPoint {\n  /**\n   * The minimum screen width.\n   */\n  min?: number;\n\n  /**\n   * The minimum screen width.\n   */\n  max?: number;\n}\n\n/**\n * The `LayoutBreakPoints` can be used to configure the size of a specific screen. The screen\n * are defined by breakpoints, with a min and/or max value. The breakpoint size is in pixels,\n * hence a numeric value is expected.\n */\nexport type LayoutBreakPoints = {\n  [t in BREAKPOINT]?: number | BreakPoint;\n};\n\n/**\n * The LayoutConfig supports the configuration of page slots by page templates\n * or page sections, such as headers and footers. The configuration also supports\n * adaptive design per breakpoint (not per device type), so that the DOM is (re)rendered\n * por a given breakpoint.\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class LayoutConfig {\n  /**\n   * The breakpoint configuration is used to defined various screens. A specific screen name can\n   * be used to further configure certain features, such as the overall layout or specific\n   * component configurations.\n   */\n  breakpoints?: LayoutBreakPoints;\n\n  layoutSlots?: LayoutSlotConfig;\n\n  /**\n   * Deferred loading is a technique to hold of with the loading / creation\n   * of DOM elements which are not not in the initial view port.\n   * This technique wil increase performance.\n   */\n  deferredLoading?: {\n    /**\n     * The global strategy will be used as a fallback strategy for all DOM creation,\n     * but can be overridden by local configuration, i.e. for cms components.\n     */\n    strategy?: DeferLoadingStrategy;\n    /**\n     * The intersection margin contains the offset used by the Intersection Observer\n     * to observe elements outside the view port.\n     *\n     * See https://developer.mozilla.org/en-US/docs/Web/API/IntersectionObserver/rootMargin\n     */\n    intersectionMargin?: string;\n  };\n\n  launch?: LaunchConfig;\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ComponentRef,\n  Inject,\n  Renderer2,\n  RendererFactory2,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Applicable, Priority } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  DIALOG_TYPE,\n  LaunchDialog,\n  LaunchOptions,\n  LAUNCH_CALLER,\n} from '../config';\n\nexport abstract class LaunchRenderStrategy implements Applicable {\n  // List of called references; only used for rendered elements\n  protected renderedCallers: Array<{\n    caller: LAUNCH_CALLER | string;\n    element?: any;\n    component?: ComponentRef<any>;\n  }> = [];\n\n  /**\n   * Classes to apply to the component when the dialog is a DIALOG\n   */\n  protected dialogClasses = ['d-block', 'fade', 'modal', 'show'];\n  /**\n   * Classes to apply to the component when the dialog is a POPOVER\n   */\n  protected popoverClasses = ['cx-dialog-popover'];\n  /**\n   * Classes to apply to the component when the dialog is a POPOVER_CENTER\n   */\n  protected popoverCenterClasses = ['cx-dialog-popover-center'];\n  /**\n   * Classes to apply to the component when the dialog is a POPOVER_CENTER with a backdrop\n   */\n  protected popoverCenterBackdropClasses = [\n    'cx-dialog-popover-center-backdrop',\n  ];\n  /**\n   * Classes to apply to the component when the dialog is a SIDEBAR_END\n   */\n  protected sidebarEndClasses = ['cx-sidebar-end'];\n  /**\n   * Classes to apply to the component when the dialog is a SIDEBAR_START\n   */\n  protected sidebarStartClasses = ['cx-sidebar-start'];\n\n  protected renderer: Renderer2;\n\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2\n  ) {\n    this.renderer = rendererFactory.createRenderer(null, null);\n  }\n\n  /**\n   * Render method to implement based on the strategy\n   *\n   * @param config Launch configuration\n   */\n  abstract render(\n    config: LaunchOptions,\n    caller: LAUNCH_CALLER | string,\n    vcr?: ViewContainerRef\n  ): void | Observable<ComponentRef<any>>;\n\n  /**\n   * Determines if the strategy is the right one for the provided configuration\n   *\n   * @param config\n   */\n  abstract hasMatch(config: LaunchOptions): boolean;\n\n  /**\n   * Determines if element should render\n   *\n   * @param caller\n   * @param config\n   */\n  protected shouldRender(\n    caller: LAUNCH_CALLER | string,\n    config: LaunchDialog\n  ): boolean {\n    return (\n      Boolean(config.component) &&\n      (this.renderedCallers.some((el) => el.caller === caller)\n        ? !!config.multi\n        : true)\n    );\n  }\n\n  protected applyClasses(\n    component: ComponentRef<any>,\n    dialogType: DIALOG_TYPE\n  ): void {\n    let classes = [];\n\n    // TODO: make classes configurable\n    switch (dialogType) {\n      case DIALOG_TYPE.DIALOG:\n        classes = this.dialogClasses;\n        this.renderer.addClass(this.document.body, 'modal-open');\n        break;\n      case DIALOG_TYPE.POPOVER:\n        classes = this.popoverClasses;\n        break;\n      case DIALOG_TYPE.POPOVER_CENTER:\n        classes = this.popoverCenterClasses;\n        break;\n      case DIALOG_TYPE.POPOVER_CENTER_BACKDROP:\n        classes = this.popoverCenterBackdropClasses;\n        break;\n      case DIALOG_TYPE.SIDEBAR_END:\n        classes = this.sidebarEndClasses;\n        break;\n      case DIALOG_TYPE.SIDEBAR_START:\n        classes = this.sidebarStartClasses;\n        break;\n    }\n\n    for (const newClass of classes) {\n      this.renderer.addClass(component.location.nativeElement, newClass);\n    }\n  }\n\n  /**\n   * Method to call when rendered element is destroyed\n   * The element will be removed from the list of rendered elements\n   *\n   * @param caller\n   * @param _config optional parameters used in children strategies\n   */\n  public remove(caller: LAUNCH_CALLER | string, config: LaunchOptions): void {\n    this.renderedCallers = this.renderedCallers.filter(\n      (el) => el.caller !== caller\n    );\n\n    if ((config as LaunchDialog)?.dialogType === DIALOG_TYPE.DIALOG) {\n      this.renderer.removeClass(this.document.body, 'modal-open');\n    }\n  }\n\n  getPriority(): Priority {\n    return Priority.LOW; // low, as it's a default matcher\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ComponentFactoryResolver,\n  ComponentRef,\n  Inject,\n  Injectable,\n  isDevMode,\n  RendererFactory2,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { LaunchInlineDialog, LAUNCH_CALLER } from '../config/index';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class InlineRenderStrategy extends LaunchRenderStrategy {\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2,\n    protected componentFactoryResolver: ComponentFactoryResolver\n  ) {\n    super(document, rendererFactory);\n  }\n\n  /**\n   * Renders the component from the configuration in the view container ref\n   *\n   * @param config\n   * @param caller\n   * @param vcr\n   */\n  render(\n    config: LaunchInlineDialog,\n    caller: LAUNCH_CALLER | string,\n    vcr: ViewContainerRef\n  ): Observable<ComponentRef<any>> {\n    // Only render if a ViewContainerRef is provided\n    if (vcr && this.shouldRender(caller, config)) {\n      const template = this.componentFactoryResolver.resolveComponentFactory(\n        config.component\n      );\n\n      const component = vcr.createComponent(template);\n\n      if (config?.dialogType) {\n        this.applyClasses(component, config?.dialogType);\n      }\n\n      this.renderedCallers.push({ caller, element: vcr.element, component });\n\n      return of(component);\n    } else if (isDevMode()) {\n      if (!vcr) {\n        console.warn(`No view container ref provided for ${caller}`);\n      } else {\n        console.warn(\n          `Element for ${caller} already rendered. To allow multi rendering add property multi: true.`\n        );\n      }\n    }\n  }\n\n  hasMatch(config: LaunchInlineDialog) {\n    return Boolean(config.inline);\n  }\n}\n","import { Observable } from 'rxjs';\n\nexport enum OutletPosition {\n  REPLACE = 'replace',\n  BEFORE = 'before',\n  AFTER = 'after',\n}\n\nexport const AVOID_STACKED_OUTLETS = false;\nexport const USE_STACKED_OUTLETS = true;\n\n/**\n * Token for injecting outlet related context to the component rendered in the outlet\n */\nexport abstract class OutletContextData<T = any> {\n  /**\n   * Provides reference of the outlet where component is rendered in\n   */\n  reference: string;\n  /**\n   * Provides position of the outlet\n   */\n  position: OutletPosition;\n  /**\n   * Provides outlet context\n   *\n   * WARNING: Avoid using it if you need to read the latest value of the context. This property\n   *          is only the initial context value and won't be updated when the new context appears.\n   *          Use `context$` observable instead.\n   *\n   * @deprecated since 3.0 - use `context$` observable instead\n   */\n  context: T;\n  /**\n   * Provides outlet context as an observable\n   */\n  context$: Observable<T>;\n}\n","import {\n  ComponentRef,\n  Inject,\n  Injectable,\n  isDevMode,\n  ViewContainerRef,\n} from '@angular/core';\nimport { resolveApplicable } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { LayoutConfig } from '../../config/layout-config';\nimport { LaunchOptions, LAUNCH_CALLER } from '../config/launch-config';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class LaunchDialogService {\n  private _dialogClose = new BehaviorSubject<string>(undefined);\n  private _dataSubject = new BehaviorSubject<any>(undefined);\n\n  get data$(): Observable<any> {\n    return this._dataSubject.asObservable();\n  }\n\n  constructor(\n    @Inject(LaunchRenderStrategy)\n    protected renderStrategies: LaunchRenderStrategy[],\n    protected layoutConfig: LayoutConfig\n  ) {\n    this.renderStrategies = this.renderStrategies || [];\n  }\n\n  /**\n   * Render the element based on the strategy from the launch configuration\n   *\n   * @param caller LAUNCH_CALLER\n   * @param vcr View Container Ref of the container for inline rendering\n   */\n  launch(\n    caller: LAUNCH_CALLER | string,\n    vcr?: ViewContainerRef,\n    data?: any\n  ): void | Observable<ComponentRef<any>> {\n    const config = this.findConfiguration(caller);\n    if (config) {\n      const renderer = this.getStrategy(config);\n\n      // Render if the strategy exists\n      if (renderer) {\n        this._dialogClose.next(undefined);\n        this._dataSubject.next(data);\n\n        return renderer.render(config, caller, vcr);\n      }\n    } else if (isDevMode()) {\n      console.warn('No configuration provided for caller ' + caller);\n    }\n  }\n\n  /**\n   * Util method to remove element from rendered elements list\n   *\n   * @param caller LAUNCH_CALLER\n   */\n  clear(caller: LAUNCH_CALLER | string): void {\n    const config = this.findConfiguration(caller);\n    const renderer = this.getStrategy(config);\n\n    // Render if the strategy exists\n    if (renderer) {\n      renderer.remove(caller, config);\n    }\n  }\n\n  get dialogClose(): Observable<string> {\n    return this._dialogClose.asObservable();\n  }\n\n  closeDialog(reason: string) {\n    this._dialogClose.next(reason);\n  }\n\n  /**\n   * Returns the configuration for the caller\n   *\n   * @param caller LAUNCH_CALLER\n   */\n  protected findConfiguration(caller: LAUNCH_CALLER | string): LaunchOptions {\n    if (this.layoutConfig?.launch) {\n      return this.layoutConfig.launch[caller];\n    }\n    return undefined;\n  }\n\n  /**\n   * Returns the render strategy based on the configuration\n   *\n   * @param config Configuration for launch\n   */\n  protected getStrategy(config: LaunchOptions): LaunchRenderStrategy {\n    return resolveApplicable(this.renderStrategies, [config]);\n  }\n}\n","import { ComponentFactory, Injectable, TemplateRef } from '@angular/core';\nimport { AVOID_STACKED_OUTLETS, OutletPosition } from './outlet.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OutletService<T = TemplateRef<any> | ComponentFactory<any>> {\n  private templatesRefs = {\n    [OutletPosition.BEFORE]: new Map<string, T[]>(),\n    [OutletPosition.REPLACE]: new Map<string, T[]>(),\n    [OutletPosition.AFTER]: new Map<string, T[]>(),\n  };\n\n  /**\n   * Adds a template or ComponentFactory, so that UI outlets can be replaced dynamically.\n   * The UI position where this template or ComponentFactory is inserted is given by a\n   * string reference (called `outlet`) and optional `OutletPosition`. The `OutletPosition`\n   * is either before or after, or replaces the entire UI.\n   *\n   * @param outlet the UI location represented by a string\n   * @param template the `TemplateRef` that will be used to insert UI\n   * @param position the `OutletPosition` in the UI\n   */\n  add(outlet: string, template: T, position?: OutletPosition): void;\n  /**\n   * @param factory The `ComponentFactory` that will be dynamically added to the outlet UI\n   */\n  add(\n    outlet: string,\n    // tslint:disable-next-line: unified-signatures\n    factory: T,\n    position?: OutletPosition\n  ): void;\n  /**\n   * @param templateOrFactory A `ComponentFactory` that inserts a component dynamically.\n   */\n  add(\n    outlet: string,\n    templateOrFactory: T,\n    position: OutletPosition = OutletPosition.REPLACE\n  ): void {\n    const store = this.templatesRefs[position];\n    if (store) {\n      const existing = store.get(outlet) || [];\n      const newValue: T[] = existing.concat([templateOrFactory]);\n      store.set(outlet, newValue);\n    }\n  }\n\n  /**\n   *\n   * Returns a single object or multiple objects for the given outlet reference,\n   * depending on the `stacked` argument.\n   *\n   * @param outlet The outlet reference\n   * @param position the outlet position, `OutletPosition.before`, `OutletPosition.AFTER` or `OutletPosition.REPLACE`\n   * @param stacked Indicates whether an array of outlet components is returned\n   */\n  get(\n    outlet: string,\n    position: OutletPosition = OutletPosition.REPLACE,\n    stacked = AVOID_STACKED_OUTLETS\n  ): T[] | T {\n    const store =\n      this.templatesRefs[position] ||\n      this.templatesRefs[OutletPosition.REPLACE];\n\n    const templateRef: T[] = store.get(outlet);\n    if (templateRef && !stacked) {\n      return templateRef[0];\n    }\n    return templateRef;\n  }\n\n  remove(\n    outlet: string,\n    position: OutletPosition = OutletPosition.REPLACE,\n    value?: T\n  ): void {\n    const store =\n      this.templatesRefs[position] ||\n      this.templatesRefs[OutletPosition.REPLACE];\n\n    this.removeValueOrAll(store, outlet, value);\n  }\n\n  protected removeValueOrAll(\n    store: Map<string, T[]>,\n    outlet: string,\n    value?: T\n  ): void {\n    if (!value && store.has(outlet)) {\n      store.delete(outlet);\n    } else if (value && store.has(outlet)) {\n      let existing = store.get(outlet);\n\n      existing = existing.filter((val) => val !== value);\n\n      store.set(outlet, existing);\n    }\n  }\n}\n","import {\n  Directive,\n  Input,\n  OnDestroy,\n  OnInit,\n  TemplateRef,\n} from '@angular/core';\nimport { OutletPosition } from '../outlet.model';\nimport { OutletService } from '../outlet.service';\n\n@Directive({\n  selector: '[cxOutletRef]',\n})\nexport class OutletRefDirective implements OnInit, OnDestroy {\n  @Input()\n  cxOutletRef: string;\n  @Input()\n  cxOutletPos: OutletPosition;\n\n  constructor(\n    private tpl: TemplateRef<any>,\n    private outletService: OutletService\n  ) {}\n\n  ngOnInit() {\n    this.outletService.add(this.cxOutletRef, this.tpl, this.cxOutletPos);\n  }\n\n  ngOnDestroy() {\n    this.outletService.remove(this.cxOutletRef, this.cxOutletPos, this.tpl);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { OutletRefDirective } from './outlet-ref.directive';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [OutletRefDirective],\n  exports: [OutletRefDirective],\n})\nexport class OutletRefModule {}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { OutletDirective } from './outlet.directive';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OutletRendererService {\n  private outletRefs = new BehaviorSubject(new Map<string, OutletDirective>());\n\n  /**\n   * Dynamically render the templates in the specified array\n   *\n   * @param outlet\n   */\n  render(outlet: string): void {\n    if (this.outletRefs.value.size !== 0) {\n      this.outletRefs.value.get(outlet).render();\n    }\n  }\n\n  /**\n   * Register outlet to be available to render dynamically\n   *\n   * @param cxOutlet\n   * @param context\n   */\n  register(cxOutlet: string, context: OutletDirective): void {\n    this.outletRefs.next(this.outletRefs.value.set(cxOutlet, context));\n  }\n  /**\n   * Returns map of outlets\n   *\n   */\n  getOutletRef(outlet: string): Observable<OutletDirective> {\n    return this.outletRefs.asObservable().pipe(\n      map((val) => val.get(outlet)),\n      filter((val) => Boolean(val))\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { distinctUntilChanged, first, flatMap, map } from 'rxjs/operators';\nimport { LayoutConfig } from '../config/layout-config';\nimport { IntersectionOptions } from './intersection.model';\n\n/**\n * The IntersectionService uses the native IntersectionObserver (v2), which\n * can be used to implement pre-loading and deferred loading of DOM content.\n *\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class IntersectionService {\n  constructor(protected config: LayoutConfig) {}\n\n  /**\n   * Returns an Observable that emits only once a boolean value whenever\n   * the given element has shown in the view port.\n   *\n   * The returned observable will only emit the first value. The\n   * observable must be cleaned up either way, since the value might never emit; it\n   *  depends on whether the element appears in the view port.\n   */\n  isIntersected(\n    element: HTMLElement,\n    options?: IntersectionOptions\n  ): Observable<boolean> {\n    return this.intersects(element, options).pipe(first((v) => v === true));\n  }\n\n  /**\n   * Indicates whenever the element intersects the view port. An optional margin\n   * is used to intersects before the element shows up in the viewport.\n   * A value is emitted each time the element intersects.\n   *\n   * This is private for now, but could be exposed as a public API\n   * to introduce additional (css) render effects to the UI.\n   */\n  private intersects(\n    element: HTMLElement,\n    options: IntersectionOptions = {}\n  ): Observable<boolean> {\n    const elementVisible$ = new Observable((observer) => {\n      const rootMargin = this.getRootMargin(options);\n      const intersectOptions = { rootMargin, threshold: options.threshold };\n      const intersectionObserver = new IntersectionObserver((entries) => {\n        observer.next(entries);\n      }, intersectOptions);\n      intersectionObserver.observe(element);\n      return () => {\n        intersectionObserver.disconnect();\n      };\n    }).pipe(\n      flatMap((entries: IntersectionObserverEntry[]) => entries),\n      map((entry: IntersectionObserverEntry) => entry.isIntersecting),\n      distinctUntilChanged()\n    );\n\n    return elementVisible$;\n  }\n\n  private getRootMargin(options: IntersectionOptions = {}): string {\n    if (options.rootMargin) {\n      return options.rootMargin;\n    }\n    const layoutConfig = this.config as LayoutConfig;\n    if (\n      layoutConfig.deferredLoading &&\n      layoutConfig.deferredLoading.intersectionMargin\n    ) {\n      return layoutConfig.deferredLoading.intersectionMargin;\n    }\n  }\n}\n","import { isPlatformServer } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { DeferLoadingStrategy } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { LayoutConfig } from '../config/layout-config';\nimport { IntersectionOptions } from './intersection.model';\nimport { IntersectionService } from './intersection.service';\n\n/**\n * The defer loading serivce is used to defer loading of DOM elements\n * until the elements are required for the user experience.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DeferLoaderService {\n  globalLoadStrategy: DeferLoadingStrategy;\n\n  constructor(\n    @Inject(PLATFORM_ID) private platformId: Object,\n    protected config: LayoutConfig,\n    protected intersectionService: IntersectionService\n  ) {\n    this.globalLoadStrategy = config.deferredLoading\n      ? config.deferredLoading.strategy\n      : DeferLoadingStrategy.INSTANT;\n  }\n\n  /**\n   * Defer loading till the element intersects the viewport.\n   *\n   * We evaluate whether we instantly load the element for different reasons:\n   * - we run in SSR mode\n   * - there's no global strategy given\n   * - the global loading strategy is set to INSTANT loading,\n   *   and the loading strategy in the given is not set to DEFER\n   * - the loading strategy in the given options is set to INSTANT\n   */\n  load(\n    element: HTMLElement,\n    options?: IntersectionOptions\n  ): Observable<boolean> {\n    if (this.shouldLoadInstantly((options || {}).deferLoading)) {\n      return of(true);\n    } else {\n      return this.intersectionService.isIntersected(element, options);\n    }\n  }\n\n  private shouldLoadInstantly(\n    elementLoadingStrategy: DeferLoadingStrategy\n  ): boolean {\n    return (\n      isPlatformServer(this.platformId) ||\n      elementLoadingStrategy === DeferLoadingStrategy.INSTANT ||\n      (elementLoadingStrategy !== DeferLoadingStrategy.DEFER &&\n        this.globalLoadStrategy === DeferLoadingStrategy.INSTANT)\n    );\n  }\n}\n","import {\n  ComponentFactory,\n  ComponentRef,\n  Directive,\n  EmbeddedViewRef,\n  EventEmitter,\n  Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { ReplaySubject, Subscription } from 'rxjs';\nimport { DeferLoaderService } from '../../layout/loading/defer-loader.service';\nimport { IntersectionOptions } from '../../layout/loading/intersection.model';\nimport { OutletRendererService } from './outlet-renderer.service';\nimport {\n  OutletContextData,\n  OutletPosition,\n  USE_STACKED_OUTLETS,\n} from './outlet.model';\nimport { OutletService } from './outlet.service';\n\n@Directive({\n  selector: '[cxOutlet]',\n})\nexport class OutletDirective<T = any> implements OnDestroy, OnChanges {\n  private renderedTemplate = [];\n  public renderedComponents = new Map<\n    OutletPosition,\n    Array<ComponentRef<any> | EmbeddedViewRef<any>>\n  >();\n\n  @Input() cxOutlet: string;\n\n  /**\n   * Context data to be provided to child view of the outlet\n   */\n  @Input() cxOutletContext: T;\n\n  /**\n   * Observable with current outlet context\n   */\n  private readonly outletContext$ = new ReplaySubject<T>(1);\n\n  /**\n   * Defers loading options for the the templates of this outlet.\n   */\n  @Input() cxOutletDefer: IntersectionOptions;\n\n  @Output() loaded: EventEmitter<Boolean> = new EventEmitter<Boolean>(true);\n\n  subscription = new Subscription();\n\n  constructor(\n    private vcr: ViewContainerRef,\n    private templateRef: TemplateRef<any>,\n    private outletService: OutletService,\n    private deferLoaderService: DeferLoaderService,\n    private outletRendererService: OutletRendererService\n  ) {}\n\n  /**\n   * Renders view for outlet or defers it, depending on the input `cxOutletDefer`\n   */\n  public render(): void {\n    this.vcr.clear();\n    this.renderedTemplate = [];\n    this.renderedComponents.clear();\n    this.subscription.unsubscribe();\n    this.subscription = new Subscription();\n\n    if (this.cxOutletDefer) {\n      this.deferLoading();\n    } else {\n      this.build();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.cxOutlet) {\n      this.render();\n      this.outletRendererService.register(this.cxOutlet, this);\n    }\n    if (changes.cxOutletContext) {\n      this.outletContext$.next(this.cxOutletContext);\n    }\n  }\n\n  private deferLoading(): void {\n    this.loaded.emit(false);\n    const hostElement = this.getHostElement(this.vcr.element.nativeElement);\n    // Although the deferLoaderService might emit only once, as long as the hostElement\n    // isn't being loaded, there's no value being emitted. Therefore we need to clean up\n    // the subscription on destroy.\n    this.subscription.add(\n      this.deferLoaderService\n        .load(hostElement, this.cxOutletDefer)\n        .subscribe(() => {\n          this.build();\n          this.loaded.emit(true);\n        })\n    );\n  }\n\n  /**\n   * Renders view for outlet\n   */\n  private build() {\n    this.buildOutlet(OutletPosition.BEFORE);\n    this.buildOutlet(OutletPosition.REPLACE);\n    this.buildOutlet(OutletPosition.AFTER);\n  }\n\n  /**\n   * Renders view in a given position for outlet\n   */\n  private buildOutlet(position: OutletPosition): void {\n    let templates: any[] = <any[]>(\n      this.outletService.get(this.cxOutlet, position, USE_STACKED_OUTLETS)\n    );\n\n    templates = templates?.filter((el) => !this.renderedTemplate.includes(el));\n\n    if (!templates && position === OutletPosition.REPLACE) {\n      templates = [this.templateRef];\n    }\n\n    // Just in case someone extended the `OutletService` and\n    // returns a singular object.\n    if (!Array.isArray(templates)) {\n      templates = [templates];\n    }\n\n    const components = [];\n    templates.forEach((obj) => {\n      const component = this.create(obj, position);\n      components.push(component);\n    });\n\n    this.renderedComponents.set(position, components);\n  }\n\n  /**\n   * Renders view based on the given template or component factory\n   */\n  private create(\n    tmplOrFactory: any,\n    position: OutletPosition\n  ): ComponentRef<any> | EmbeddedViewRef<any> {\n    this.renderedTemplate.push(tmplOrFactory);\n\n    if (tmplOrFactory instanceof ComponentFactory) {\n      const component = this.vcr.createComponent(\n        tmplOrFactory,\n        undefined,\n        this.getComponentInjector(position)\n      );\n      return component;\n    } else if (tmplOrFactory instanceof TemplateRef) {\n      const view = this.vcr.createEmbeddedView(\n        <TemplateRef<any>>tmplOrFactory,\n        {\n          $implicit: this.cxOutletContext,\n        }\n      );\n\n      // we do not know if content is created dynamically or not\n      // so we apply change detection anyway\n      view.markForCheck();\n      return view;\n    }\n  }\n\n  /**\n   * Returns injector with OutletContextData that can be injected to the component\n   * rendered in the outlet\n   */\n  private getComponentInjector(position: OutletPosition): Injector {\n    const contextData: OutletContextData<T> = {\n      reference: this.cxOutlet,\n      position,\n      context: this.cxOutletContext,\n      context$: this.outletContext$.asObservable(),\n    };\n\n    return Injector.create({\n      providers: [\n        {\n          provide: OutletContextData,\n          useValue: contextData,\n        },\n      ],\n      parent: this.vcr.injector,\n    });\n  }\n\n  /**\n   * Returns the closest `HtmlElement`, by iterating over the\n   * parent nodes of the given element.\n   *\n   * We avoid traversing the parent _elements_, as this is blocking\n   * ie11 implementations. One of the spare exclusions we make to not\n   * supporting ie11.\n   *\n   * @param element\n   */\n  private getHostElement(element: Node): HTMLElement {\n    if (element instanceof HTMLElement) {\n      return element;\n    }\n    return this.getHostElement(element.parentNode);\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.outletContext$.complete();\n  }\n}\n","import { InjectionToken, StaticProvider, Type } from '@angular/core';\nimport { OutletPosition } from './outlet.model';\n\n/**\n * @private We plan to drive the outlets by standard configuration\n */\nexport const PROVIDE_OUTLET_OPTIONS = new InjectionToken<ProvideOutletOptions>(\n  'PROVIDE_OUTLET_OPTIONS'\n);\n\nexport interface ProvideOutletOptions {\n  /**\n   *  Unique id of the outlet\n   */\n  id: string;\n\n  /**\n   * Component to be registered for the outlet\n   */\n  component: Type<any>;\n\n  /**\n   * Component's position in the outlet\n   */\n  position?: OutletPosition;\n}\n\n/**\n * Helper function to register a component for an outlet.\n *\n * @param options.id unique id of the outlet\n * @param options.component Component to be registered for the outlet\n * @param options.position Component's position in the outlet (default: `OutletPosition.AFTER`)\n */\nexport function provideOutlet(options: ProvideOutletOptions): StaticProvider {\n  return {\n    provide: PROVIDE_OUTLET_OPTIONS,\n    useValue: options,\n    multi: true,\n  };\n}\n","import { CommonModule } from '@angular/common';\nimport {\n  APP_INITIALIZER,\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ModuleWithProviders,\n  NgModule,\n  Optional,\n  Type,\n} from '@angular/core';\nimport { OutletDirective } from './outlet.directive';\nimport { OutletPosition } from './outlet.model';\nimport {\n  PROVIDE_OUTLET_OPTIONS,\n  ProvideOutletOptions,\n} from './outlet.providers';\nimport { OutletService } from './outlet.service';\n\n/**\n * @private\n */\nexport function registerOutletsFactory(\n  providedOutletOptions: ProvideOutletOptions[],\n  componentFactoryResolver: ComponentFactoryResolver,\n  outletService: OutletService<ComponentFactory<Type<any>>>\n) {\n  const result = () => {\n    (providedOutletOptions ?? []).forEach((options) => {\n      const factory = componentFactoryResolver.resolveComponentFactory(\n        options.component\n      );\n      outletService.add(\n        options.id,\n        factory,\n        options.position ?? OutletPosition.AFTER\n      );\n    });\n  };\n  return result;\n}\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [OutletDirective],\n  exports: [OutletDirective],\n})\nexport class OutletModule {\n  static forRoot(): ModuleWithProviders<OutletModule> {\n    return {\n      ngModule: OutletModule,\n      providers: [\n        {\n          provide: APP_INITIALIZER,\n          useFactory: registerOutletsFactory,\n          deps: [\n            [new Optional(), PROVIDE_OUTLET_OPTIONS],\n            ComponentFactoryResolver,\n            OutletService,\n          ],\n          multi: true,\n        },\n      ],\n    };\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ComponentFactory,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Inject,\n  Injectable,\n  RendererFactory2,\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport {\n  OutletPosition,\n  OutletService,\n} from '../../../cms-structure/outlet/index';\nimport { OutletRendererService } from '../../../cms-structure/outlet/outlet-renderer.service';\nimport { LaunchOutletDialog, LAUNCH_CALLER } from '../config/index';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class OutletRenderStrategy extends LaunchRenderStrategy {\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2,\n    protected outletService: OutletService<ComponentFactory<any>>,\n    protected componentFactoryResolver: ComponentFactoryResolver,\n    protected outletRendererService: OutletRendererService\n  ) {\n    super(document, rendererFactory);\n  }\n\n  /**\n   * Renders the element in the configured outlet\n   *\n   * @param config\n   * @param caller\n   * @param vcr\n   */\n  render(\n    config: LaunchOutletDialog,\n    caller: LAUNCH_CALLER | string\n  ): Observable<ComponentRef<any>> {\n    if (this.shouldRender(caller, config)) {\n      const template = this.componentFactoryResolver.resolveComponentFactory(\n        config.component\n      );\n      this.outletService.add(\n        config.outlet,\n        template,\n        config.position ? config.position : OutletPosition.BEFORE\n      );\n      this.outletRendererService.render(config.outlet);\n      this.renderedCallers.push({ caller });\n\n      return this.outletRendererService.getOutletRef(config.outlet).pipe(\n        map((outletDirective) => {\n          const components = outletDirective.renderedComponents.get(\n            config.position ? config.position : OutletPosition.BEFORE\n          ) as ComponentRef<any>[];\n\n          return components\n            .reverse()\n            .find(\n              (component) => component.componentType === template.componentType\n            );\n        }),\n        tap((component) => {\n          if (config?.dialogType) {\n            this.applyClasses(component, config?.dialogType);\n          }\n        })\n      );\n    }\n  }\n\n  hasMatch(config: LaunchOutletDialog) {\n    return Boolean(config.outlet);\n  }\n\n  remove(caller: LAUNCH_CALLER | string, config: LaunchOutletDialog): void {\n    const template = this.componentFactoryResolver.resolveComponentFactory(\n      config.component\n    );\n\n    this.outletService.remove(\n      config.outlet,\n      config.position ? config.position : OutletPosition.BEFORE,\n      template\n    );\n\n    super.remove(caller, config);\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable, RendererFactory2 } from '@angular/core';\nimport { RoutingService } from '@spartacus/core';\nimport { LaunchRoute, LAUNCH_CALLER } from '../config/index';\nimport { LaunchRenderStrategy } from './launch-render.strategy';\n\n@Injectable({ providedIn: 'root' })\nexport class RoutingRenderStrategy extends LaunchRenderStrategy {\n  constructor(\n    @Inject(DOCUMENT) protected document: any,\n    protected rendererFactory: RendererFactory2,\n    protected routingService: RoutingService\n  ) {\n    super(document, rendererFactory);\n  }\n  /**\n   * Navigates to the route configured for the caller\n   */\n  render(config: LaunchRoute, _caller: LAUNCH_CALLER | string) {\n    this.routingService.go(config);\n  }\n\n  hasMatch(config: LaunchRoute) {\n    return Boolean(config.cxRoute);\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { LayoutConfig } from '../config/layout-config';\nimport {\n  InlineRenderStrategy,\n  LaunchRenderStrategy,\n  OutletRenderStrategy,\n  RoutingRenderStrategy,\n} from './services/index';\n\n@NgModule({\n  providers: [\n    {\n      provide: LaunchRenderStrategy,\n      useExisting: OutletRenderStrategy,\n      multi: true,\n    },\n    {\n      provide: LaunchRenderStrategy,\n      useExisting: InlineRenderStrategy,\n      multi: true,\n    },\n    {\n      provide: LaunchRenderStrategy,\n      useExisting: RoutingRenderStrategy,\n      multi: true,\n    },\n  ],\n})\nexport class LaunchDialogModule {\n  static forRoot(): ModuleWithProviders<LaunchDialogModule> {\n    return {\n      ngModule: LaunchDialogModule,\n      providers: [{ provide: LayoutConfig, useExisting: Config }],\n    };\n  }\n}\n","import { ElementRef, Injectable, ViewContainerRef } from '@angular/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport {\n  LaunchDialogService,\n  LAUNCH_CALLER,\n} from '../../layout/launch-dialog/index';\n\n@Injectable({ providedIn: 'root' })\nexport class AnonymousConsentLaunchDialogService {\n  constructor(protected launchDialogService: LaunchDialogService) {}\n\n  openDialog(\n    openElement?: ElementRef,\n    vcr?: ViewContainerRef\n  ): Observable<any> | undefined {\n    const component = this.launchDialogService.launch(\n      LAUNCH_CALLER.ANONYMOUS_CONSENT,\n      vcr\n    );\n\n    if (component) {\n      return combineLatest([\n        component,\n        this.launchDialogService.dialogClose,\n      ]).pipe(\n        filter(([, close]) => close && close !== undefined),\n        tap(([comp]) => {\n          openElement?.nativeElement.focus();\n          this.launchDialogService.clear(LAUNCH_CALLER.ANONYMOUS_CONSENT);\n          comp.destroy();\n        }),\n        map(([comp]) => comp)\n      );\n    }\n  }\n}\n","/** The element attribute used to store the focus state */\nexport const FOCUS_ATTR = 'data-cx-focus';\n/** The element attribute used to store the focus group state */\nexport const FOCUS_GROUP_ATTR = 'data-cx-focus-group';\n\nexport const enum MOVE_FOCUS {\n  NEXT = 1,\n  PREV = -1,\n}\n\n// tslint:disable-next-line: no-empty-interface\nexport interface BaseFocusConfig {}\n\nexport interface VisibleFocusConfig {\n  /**\n   * When set to true, the `mouse-focus` class is added to the host element,\n   * indicating that the element focus should not be made visible.\n   */\n  disableMouseFocus?: boolean;\n}\n\nexport interface BlockFocusConfig extends VisibleFocusConfig {\n  block?: boolean;\n}\n\nexport interface PersistFocusConfig extends BlockFocusConfig {\n  /**\n   * A key to maintain the focus of an element in case the component is\n   * recreated (which often is the case when an `*ngIf` or `*ngFor` is used).\n   */\n  key?: string;\n\n  /**\n   * Optional group identifier that can be used to persist the focus. This allows\n   * to have separate persisted focus available when the DOM is partially rebuild.\n   */\n  group?: string;\n}\n\nexport interface EscapeFocusConfig extends PersistFocusConfig {\n  focusOnEscape?: boolean;\n  /**\n   * Force an autofocus in case of double-escape\n   */\n  focusOnDoubleEscape?: boolean;\n}\n\nexport interface AutoFocusConfig extends EscapeFocusConfig {\n  /**\n   * Autofocus is enabled by default, and will try to focus an _autofocus_ element.\n   * In case the focus is explicitly set to `true`, the first accessible element\n   * is focussed in case there is no _autofocus_ element found.\n   * If the focus is set to false, autofocus will be disabled completely.\n   *\n   * If a string value is given, the autofocus will be restored based on the persisted\n   * focus group, which is driven by `PersistFocusConfig.key` and `PersistFocusConfig.group`.\n   *\n   * Defaults to `true`.\n   */\n  autofocus?: boolean | string;\n}\n\nexport interface TabFocusConfig extends AutoFocusConfig {\n  tab?: boolean | 'scroll' | string;\n}\n\nexport enum TrapFocus {\n  /**\n   * Will trap the focus at the start of the focus group.\n   */\n  start = 'start',\n  /**\n   * Will trap the focus only at the end of the focus group.\n   */\n  end = 'end',\n  /**\n   * Will not trap the focus in both directions. This is actually not are\n   * a great example of focus trap, but it will give the benefit of keyboard\n   * tabbing by arrows.\n   */\n  both = 'both',\n}\n\nexport type TrapFocusType =\n  | boolean\n  | TrapFocus.start\n  | TrapFocus.end\n  | TrapFocus.both;\n\n/**\n * The keyboard navigation (tab, shift-tab and up down keys) is _trapped_\n * for the nested focusable elements. This means that the focus can not\n * \"leave\" the elements. If the last element is focused, the keyboard will\n * navigate to the first element and visa versa.\n */\nexport interface TrapFocusConfig extends TabFocusConfig {\n  /** traps the focus */\n  trap?: TrapFocusType;\n}\n\nexport interface LockFocusConfig extends TrapFocusConfig {\n  /**\n   * Indicates that the nested DOM is locked for keyboarding (`TAB`).\n   */\n  lock?: boolean;\n}\n\n// tslint:disable-next-line: no-empty-interface\nexport interface FocusConfig extends LockFocusConfig {}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport abstract class BaseFocusService {}\n","import {\n  Directive,\n  ElementRef,\n  HostBinding,\n  Input,\n  OnInit,\n} from '@angular/core';\nimport { BaseFocusConfig } from '../keyboard-focus.model';\nimport { BaseFocusService } from './base-focus.service';\n\n/**\n * Abstract directive that provides a common interface for all focus directives:\n * - Block Focus\n * - Persist Focus\n * - Escape Focus\n * - Auto Focus\n * - Tab Focus\n * - Trap Focus\n * - Lock Focus\n */\n@Directive()\nexport abstract class BaseFocusDirective implements OnInit {\n  /**\n   * Optional configuration for the focus directive drives the behaviour of the keyboard\n   * focus directive.\n   */\n  protected config: BaseFocusConfig;\n\n  /**\n   * A default config can be provided for each directive if a specific focus directive\n   * is used directly. i.e. `<div cxAutoFocus></div>`\n   */\n  protected defaultConfig: BaseFocusConfig = {};\n\n  @Input() @HostBinding('attr.tabindex') tabindex: number;\n\n  constructor(\n    protected elementRef: ElementRef<HTMLElement>,\n    protected service: BaseFocusService\n  ) {}\n\n  ngOnInit() {\n    this.setDefaultConfiguration();\n    this.requiredTabindex = -1;\n  }\n\n  /**\n   * Override the (input) config if it undefined or an empty string, with the\n   * `defaultConfig`. The `defaultConfig` might be specified for each directive\n   * differently. If a specific directive is used (i.e. `cxAutoFocus`), the\n   * specific (inherited) defaultConfig will be used.\n   */\n  protected setDefaultConfiguration(): void {\n    if ((!this.config || this.config === '') && this.defaultConfig) {\n      this.config = this.defaultConfig;\n    }\n  }\n\n  /**\n   * Helper method to return the host element for the directive\n   * given by the `elementRef`.\n   */\n  protected get host(): HTMLElement {\n    return this.elementRef.nativeElement;\n  }\n\n  /**\n   * Force a tabindex on the host element if it is _requried_ to make the element\n   * focusable. If the element is focusable by nature or by a given tabindex, the\n   * `tabindex` is not applied.\n   *\n   * Buttons, active links, etc. do no need an explicit tabindex to receive focus.\n   */\n  protected set requiredTabindex(tabindex: number) {\n    if (this.requiresExplicitTabIndex) {\n      this.tabindex = tabindex;\n    }\n  }\n\n  /**\n   * Returns true if the host element does not have a tabindex defined\n   * and it also doesn't get focus by browsers nature (i.e. button or\n   * active link).\n   */\n  protected get requiresExplicitTabIndex(): boolean {\n    return (\n      this.tabindex === undefined &&\n      ['button', 'input', 'select', 'textarea'].indexOf(\n        this.host.tagName.toLowerCase()\n      ) === -1 &&\n      !(\n        this.host.tagName === 'A' &&\n        (this.host.hasAttribute('href') || this.host.hasAttribute('routerlink'))\n      )\n    );\n  }\n}\n","import { Directive, HostBinding, HostListener } from '@angular/core';\nimport { BaseFocusDirective } from '../base/base-focus.directive';\nimport { VisibleFocusConfig } from '../keyboard-focus.model';\n\n/**\n * Directive implementation that adds a CSS class to the host element\n * when the moused is used to focus an element. As soon as the keyboard\n * is used, the class is removed.\n *\n * This feature must be explicitly enabled with the `disableMouseFocus` config.\n *\n * The appearance of the visual focus depends on the CSS implementation to\n * begin with. Spartacus styles add a blue border around each focusable element.\n * This can be considered annoying by keyboard users, as they won't need such a\n * strong indication of the selected element.\n */\n@Directive() // selector: '[cxVisibleFocus]'\nexport class VisibleFocusDirective extends BaseFocusDirective {\n  protected defaultConfig: VisibleFocusConfig = {\n    disableMouseFocus: true,\n  };\n\n  // @Input('cxVisibleFocus')\n  protected config: VisibleFocusConfig;\n\n  /** Controls a css class to hide focus visible CSS rules */\n  @HostBinding('class.mouse-focus') mouseFocus = false;\n\n  @HostListener('mousedown') handleMousedown() {\n    if (this.shouldFocusVisible) {\n      this.mouseFocus = true;\n    }\n  }\n\n  @HostListener('keydown', ['$event']) handleKeydown(event: KeyboardEvent) {\n    if (this.shouldFocusVisible) {\n      this.mouseFocus = !this.isNavigating(event);\n    }\n  }\n\n  /**\n   * Indicates whether the configurations setup to disable visual focus.\n   */\n  protected get shouldFocusVisible(): boolean {\n    return this.config?.disableMouseFocus;\n  }\n\n  /**\n   * Indicates whether the event is used to navigate the storefront. Some keyboard events\n   * are used by mouse users to fill a form or interact with the OS or browser.\n   */\n  protected isNavigating(event: KeyboardEvent): boolean {\n    // when the cmd or ctrl keys are used, the user doesn't navigate the storefront\n    if (event.metaKey) {\n      return false;\n    }\n    // when the tab key is used, users are for navigating away from the current (form) element\n    if (event.code === 'Tab') {\n      return true;\n    }\n    // If the user fill in a form, we don't considering it part of storefront navigation.\n    if (['INPUT', 'TEXTAREA'].includes((event.target as HTMLElement).tagName)) {\n      return false;\n    }\n    return true;\n  }\n}\n","import { Directive, ElementRef, OnInit } from '@angular/core';\nimport { BaseFocusService } from '../base/base-focus.service';\nimport { BlockFocusConfig } from '../keyboard-focus.model';\nimport { VisibleFocusDirective } from '../visible/visible-focus.directive';\n\n@Directive()\n// { selector: '[cxBlockFocus]' }\nexport class BlockFocusDirective\n  extends VisibleFocusDirective\n  implements OnInit {\n  protected defaultConfig: BlockFocusConfig = { block: true };\n\n  // @Input('cxBlockFocus')\n  protected config: BlockFocusConfig = {};\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: BaseFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    if (this.config.block) {\n      this.tabindex = -1;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { BaseFocusService } from '../base/base-focus.service';\nimport { FOCUS_GROUP_ATTR, PersistFocusConfig } from '../keyboard-focus.model';\n\nconst GLOBAL_GROUP = '_g_';\n\n/**\n * Shared service to persist the focus for an element or a group\n * of elements. The persisted element focus can be used to persist\n * the focus for a DOM tree, so that the focus remains after a repaint\n * or reoccurs when a DOM tree is \"unlocked\".\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class PersistFocusService extends BaseFocusService {\n  // this is going to fail as we have sub services. They will al have their own map.\n  // We must bring this to a singleton map.\n  protected focus = new Map<string, string>();\n\n  get(group?: string): string {\n    return this.focus.get(group || GLOBAL_GROUP);\n  }\n\n  /**\n   * Persist the keyboard focus state for the given key. The focus is stored globally\n   * or for the given group.\n   */\n  set(key: string, group?: string) {\n    if (key) {\n      this.focus.set(group || GLOBAL_GROUP, key);\n    }\n  }\n\n  /**\n   * Clears the persisted keyboard focus state globally or for the given group.\n   */\n  clear(group?: string) {\n    this.focus.delete(group || GLOBAL_GROUP);\n  }\n\n  /**\n   * Returns the group for the host element based on the configured group or\n   * by the `data-cx-focus-group` attribute stored on the host.\n   */\n  getPersistenceGroup(host: HTMLElement, config?: PersistFocusConfig): string {\n    return config?.group ? config.group : host.getAttribute(FOCUS_GROUP_ATTR);\n  }\n}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  OnInit,\n} from '@angular/core';\nimport { BlockFocusDirective } from '../block/block-focus.directive';\nimport { FOCUS_ATTR, PersistFocusConfig } from '../keyboard-focus.model';\nimport { PersistFocusService } from './persist-focus.service';\n\n/**\n * Directive that provides persistence of the focused state. This is useful\n * when a group of focusable elements got refocused or even recreated. That\n * happens often when the DOM is constructed with an `*ngIf` or `*ngFor`.\n *\n * The focus state is based on a configured _key_, which can be passed in the\n * config input, either by using a string primitive or `PersistFocusConfig.key`:\n *\n * ```html\n * <button cxPersistFocus=\"myKey\"></button>\n * <button cxFocus=\"myKey\"></button>\n * <button [cxFocus]=\"{{key:'myKey'}\"></button>\n * ```\n *\n * The focus state can be part of a focus _group_, so that the state is shared\n * and remember for the given group. In order to detect the persistence for a\n * given element, we store the persistence key as a data attribute (`data-cx-focus`):\n *\n * ```html\n * <button data-cx-focus=\"myKey\"></button>\n * ```\n *\n * Other keyboard focus directives can read the key to understand whether the element\n * should retrieve focus.\n *\n */\n@Directive() // selector: '[cxPersistFocus]',\nexport class PersistFocusDirective\n  extends BlockFocusDirective\n  implements OnInit, AfterViewInit {\n  protected defaultConfig: PersistFocusConfig = {};\n\n  /**\n   * The persistence key can be passed directly or through the `FocusConfig.key`.\n   * While this could be considered a global key, the likeliness of conflicts\n   * is very small since the key is cleared when the focus is changed.\n   */\n  // @Input('cxPersistFocus')\n  protected config: PersistFocusConfig = {};\n\n  /**\n   * The persistence key is maintained in an element attribute for other\n   * implementations. This is needed to ensure that we can resolve the focus\n   * state in case of a repaint.\n   */\n  @HostBinding(`attr.${FOCUS_ATTR}`) attr: string;\n\n  @HostListener('focus', ['$event'])\n  handleFocus(event?: KeyboardEvent) {\n    this.service.set(this.key, this.group);\n\n    event?.preventDefault();\n    event?.stopPropagation();\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: PersistFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.attr = this.key ? this.key : undefined;\n  }\n\n  protected setDefaultConfiguration() {\n    if (typeof this.config === 'string' && this.config !== '') {\n      this.config = { key: this.config };\n    }\n    super.setDefaultConfiguration();\n  }\n\n  /**\n   * Focus the element explicitly if it was focused before.\n   */\n  ngAfterViewInit() {\n    if (this.isPersisted) {\n      this.host.focus({ preventScroll: true });\n    }\n  }\n\n  protected get isPersisted(): boolean {\n    return !!this.key && this.service.get(this.group) === this.key;\n  }\n\n  /**\n   * Returns the key for the host element, which is used to persist the\n   * focus state. This is useful in cases where the DOM is rebuild.\n   */\n  protected get key(): string {\n    return (this.config as PersistFocusConfig)?.key;\n  }\n\n  /**\n   * returns the persistence group (if any) for the focusable elements.\n   */\n  protected get group(): string {\n    return this.service.getPersistenceGroup(\n      this.host,\n      this.config as PersistFocusConfig\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AutoFocusConfig } from '../keyboard-focus.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SelectFocusUtility {\n  /**\n   * Query selectors used to query focusable child elements of the host element.\n   * The selectors are supplemented with `:not([disabled])` and `:not([hidden])`.\n   */\n  protected focusableSelectors: string[] = [\n    'a[href]',\n    'button',\n    '[tabindex]',\n    'input',\n    'select',\n    'textarea',\n  ];\n\n  // like to leave out the following as we don't use it, and make this list exensible.\n  //   `[contentEditable=true]`, // very unlikely to suport as we're not a business tool\n  //   `iframe`, // we really don't like iframes...\n  //   `area[href]`, // very debatable!\n\n  protected focusableSelectorSuffix = ':not([disabled]):not([hidden])';\n\n  query(host: HTMLElement, selector: string): HTMLElement[] {\n    if (!selector || selector === '') {\n      return [];\n    }\n    return Array.from(\n      host.querySelectorAll(selector) as NodeListOf<HTMLElement>\n    );\n  }\n\n  findFirstFocusable(\n    host: HTMLElement,\n    config: AutoFocusConfig = { autofocus: true }\n  ): HTMLElement {\n    const selector =\n      typeof config?.autofocus === 'string' ? config.autofocus : '[autofocus]';\n    // fallback to first focusable\n    return (\n      this.query(host, selector).find((el) => !this.isHidden(el)) ||\n      this.findFocusable(host).find((el) => Boolean(el))\n    );\n  }\n\n  /**\n   * returns all focusable child elements of the host element. The element selectors\n   * are build from the `focusableSelectors`.\n   *\n   * @param host the `HTMLElement` used to query focusable elements\n   * @param locked indicates whether inactive (`tabindex=\"-1\"`) focusable elements should be returned\n   * @param invisible indicates whether hidden focusable elements should be returned\n   */\n  findFocusable(\n    host: HTMLElement,\n    locked = false,\n    invisible = false\n  ): HTMLElement[] {\n    let suffix = this.focusableSelectorSuffix;\n    if (!locked) {\n      suffix += `:not([tabindex='-1'])`;\n    }\n    const selector = this.focusableSelectors\n      .map((s) => (s += suffix))\n      .join(',');\n    return this.query(host, selector).filter((el) =>\n      !invisible ? !this.isHidden(el) : Boolean(el)\n    );\n  }\n\n  /**\n   * Indicates whether the element is hidden by CSS. There are various CSS rules and\n   * HTML structures which can lead to an hidden or invisible element. An `offsetParent`\n   * of null indicates that the element or any of it's decendants is hidden (`display:none`).\n   *\n   * Oother techniques use the visibility (`visibility: hidden`), opacity (`opacity`) or\n   * phyisical location on the element itself or any of it's anchestor elements. Those\n   * technique require to work with the _computed styles_, which will cause a performance\n   * downgrade. We don't do this in the standard implementaton.\n   */\n  protected isHidden(el: HTMLElement): boolean {\n    return el.offsetParent === null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { EscapeFocusConfig } from '../keyboard-focus.model';\nimport { PersistFocusService } from '../persist/persist-focus.service';\nimport { SelectFocusUtility } from '../services/select-focus.util';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class EscapeFocusService extends PersistFocusService {\n  constructor(protected selectFocusUtil: SelectFocusUtility) {\n    super();\n  }\n\n  shouldFocus(config: EscapeFocusConfig): boolean {\n    return !!config?.focusOnEscape;\n  }\n\n  handleEscape(\n    host: HTMLElement,\n    config: EscapeFocusConfig,\n    event: KeyboardEvent\n  ): void {\n    if (this.shouldFocus(config)) {\n      if (host !== event.target) {\n        host.focus({ preventScroll: true });\n        event.preventDefault();\n        event.stopPropagation();\n      } else {\n        if (config?.focusOnDoubleEscape) {\n          this.selectFocusUtil\n            .findFirstFocusable(host, { autofocus: true })\n            ?.focus();\n        }\n      }\n    }\n  }\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { EscapeFocusConfig } from '../keyboard-focus.model';\nimport { PersistFocusDirective } from '../persist/persist-focus.directive';\nimport { EscapeFocusService } from './escape-focus.service';\n\n/**\n * Directive to focus the host element whenever the `escape` key is captured.\n * UiEvents bubble up by nature, which is why the `cxEscGroup` can be used\n * on a tree of elements. Each time the escape key is used, the focus will\n * move up in the DOM tree.\n *\n */\n@Directive() // selector: '[cxEscFocus]',\nexport class EscapeFocusDirective\n  extends PersistFocusDirective\n  implements OnInit {\n  protected defaultConfig: EscapeFocusConfig = { focusOnEscape: true };\n\n  // @Input('cxEscFocus')\n  protected config: EscapeFocusConfig;\n\n  @Output() esc = new EventEmitter<boolean>();\n\n  /**\n   * Handles the escape key event.\n   * @param event the native keyboard event which contains the escape keydown event\n   */\n  @HostListener('keydown.escape', ['$event'])\n  handleEscape(event: KeyboardEvent): void {\n    if (this.service.shouldFocus(this.config)) {\n      this.service.handleEscape(this.host, this.config, event);\n    }\n    this.esc.emit(this.service.shouldFocus(this.config));\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: EscapeFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  ngOnInit() {\n    if (this.service.shouldFocus(this.config)) {\n      this.requiredTabindex = -1;\n    }\n    super.ngOnInit();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { EscapeFocusService } from '../escape/escape-focus.service';\nimport {\n  AutoFocusConfig,\n  FOCUS_ATTR,\n  PersistFocusConfig,\n} from '../keyboard-focus.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AutoFocusService extends EscapeFocusService {\n  /**\n   * Returns the first focusable child element of the host element.\n   */\n  findFirstFocusable(\n    host: HTMLElement,\n    config: AutoFocusConfig = { autofocus: true }\n  ): HTMLElement {\n    if (config?.autofocus === ':host') {\n      return host;\n    } else if (this.hasPersistedFocus(host, config)) {\n      return this.getPersisted(host, this.getPersistenceGroup(host, config));\n    } else {\n      return this.selectFocusUtil.findFirstFocusable(host, config) || host;\n    }\n  }\n\n  /**\n   * Indicates whether any of the focusabe child elements is focused.\n   */\n  hasPersistedFocus(host: HTMLElement, config: PersistFocusConfig): boolean {\n    return !!this.getPersisted(host, this.getPersistenceGroup(host, config));\n  }\n\n  /**\n   * Returns the element that has a persisted focus state.\n   *\n   * @param host the `HTMLElement` used to query for focusable children\n   * @param group the optional group for the persistent state, to separate different focus\n   *   groups and remain the persistence\n   */\n  protected getPersisted(host: HTMLElement, group?: string): HTMLElement {\n    if (!this.get(group)) {\n      return;\n    }\n    const focussed = Array.from(\n      host.querySelectorAll(\n        `[${FOCUS_ATTR}='${this.get(group)}']`\n      ) as NodeListOf<HTMLElement>\n    );\n    return focussed.length > 0 ? focussed[0] : null;\n  }\n}\n","import { AfterViewInit, Directive, ElementRef } from '@angular/core';\nimport { EscapeFocusDirective } from '../escape/escape-focus.directive';\nimport { AutoFocusConfig } from '../keyboard-focus.model';\nimport { AutoFocusService } from './auto-focus.service';\n\n/**\n * Directive that focus the first nested _focusable_ element based on state and configuration:\n *\n * 1. focusable element that was left in a focused state (aka _persisted_ focus)\n * 2. focusable element selected by configured CSS selector (i.e. 'button[type=submit]')\n * 3. focusable element marked with the native HTML5 `autofocus` attribute\n * 4. first focusable element\n * 5. the host element, in case the configured CSS selector is `:host`.\n *\n * Example configurations:\n *\n * `<div cxAutoFocus>[...]</div>`\n *\n * `<div [cxAutoFocus]=\"{autofocus: false}\">[...]</div>`\n *\n * `<div [cxAutoFocus]=\"{autofocus: 'button.active'}\">[...]</div>`\n *\n * `<div [cxAutoFocus]=\"{autofocus: ':host'}\">[...]</div>`\n *\n */\n@Directive() // selector: '[cxAutoFocus]'\nexport class AutoFocusDirective\n  extends EscapeFocusDirective\n  implements AfterViewInit {\n  /** The AutoFocusDirective will be using autofocus by default  */\n  protected defaultConfig: AutoFocusConfig = { autofocus: true };\n\n  // @Input('cxAutoFocus')\n  protected config: AutoFocusConfig;\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: AutoFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  /**\n   * Focus the element explicitly if it was focussed before.\n   */\n  ngAfterViewInit(): void {\n    if (this.shouldAutofocus) {\n      this.handleFocus();\n    }\n    if (!this.shouldAutofocus || this.hasPersistedFocus) {\n      super.ngAfterViewInit();\n    }\n  }\n\n  /**\n   * Mimic the focus without setting the actual focus on the host. The first\n   * focusable child element will be focussed.\n   */\n  handleFocus(event?: KeyboardEvent) {\n    if (this.shouldAutofocus) {\n      if (!event?.target || event.target === this.host) {\n        this.firstFocusable?.focus();\n      } else {\n        (event.target as HTMLElement).focus();\n      }\n    }\n    super.handleFocus(event);\n  }\n\n  /**\n   * Helper function to get the first focusable child element\n   */\n  protected get hasPersistedFocus() {\n    return this.service.hasPersistedFocus(this.host, this.config);\n  }\n\n  /**\n   * Helper function to indicate whether we should use autofocus for the\n   * child elements.\n   */\n  protected get shouldAutofocus(): boolean {\n    return !!this.config?.autofocus;\n  }\n\n  /**\n   * Helper function to get the first focusable child element.\n   *\n   * We keep this private to not polute the API.\n   */\n  private get firstFocusable(): HTMLElement {\n    return this.service.findFirstFocusable(this.host, this.config);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AutoFocusService } from '../autofocus/auto-focus.service';\nimport { MOVE_FOCUS, TabFocusConfig } from '../keyboard-focus.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TabFocusService extends AutoFocusService {\n  /**\n   * Moves to the next (or previous) tab.\n   */\n  moveTab(\n    host: HTMLElement,\n    config: TabFocusConfig,\n    increment: MOVE_FOCUS,\n    event: KeyboardEvent\n  ): void {\n    if (config?.tab) {\n      const next =\n        config.tab === 'scroll'\n          ? this.findNextScrollable(host, config, increment)\n          : this.findNext(host, config, increment);\n\n      next?.focus();\n\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  /**\n   * builds out virtual slides out of the full scrollable area, to allow\n   * for maximum flexibility for the underlying layout without using hardcoded\n   * slide sizes.\n   */\n  protected findNextScrollable(\n    host: HTMLElement,\n    config: TabFocusConfig,\n    increment: MOVE_FOCUS\n  ): HTMLElement {\n    const active = this.getActiveChild(host, config);\n\n    if (!active) {\n      return;\n    }\n    // slide count\n    const virtualSlideCount = Math.round(host.scrollWidth / host.clientWidth);\n\n    // find current virtual slide\n    const currentVirtualSlide = Math.round(\n      active.offsetLeft / (host.scrollWidth / virtualSlideCount)\n    );\n\n    let nextVirtualSlide = currentVirtualSlide + increment;\n    if (\n      increment === MOVE_FOCUS.NEXT &&\n      nextVirtualSlide >= virtualSlideCount\n    ) {\n      nextVirtualSlide = 0;\n    }\n    if (increment === MOVE_FOCUS.PREV && nextVirtualSlide < 0) {\n      nextVirtualSlide = virtualSlideCount - 1;\n    }\n\n    const firstItemOnNextSlide = this.getChildren(host, config)?.find(\n      (tab) =>\n        tab.offsetLeft >=\n        (host.scrollWidth / virtualSlideCount) * nextVirtualSlide\n    );\n\n    return firstItemOnNextSlide;\n  }\n\n  protected findNext(\n    host: HTMLElement,\n    config: TabFocusConfig,\n    increment: MOVE_FOCUS\n  ): HTMLElement {\n    const childs = this.getChildren(host, config);\n    let activeIndex = childs?.findIndex(\n      (c) => c === this.getActiveChild(host, config)\n    );\n\n    if (!activeIndex || activeIndex === -1) {\n      activeIndex = 0;\n    }\n    activeIndex += increment;\n\n    if (increment === MOVE_FOCUS.NEXT && activeIndex >= childs?.length) {\n      activeIndex = childs.length - 1;\n    }\n    if (increment === MOVE_FOCUS.PREV && activeIndex < 0) {\n      activeIndex = 0;\n    }\n    return childs ? childs[activeIndex] : undefined;\n  }\n\n  /**\n   * Returns the active focusable child element. If there's no active\n   * focusable child element, the first focusable child is returned.\n   */\n  protected getActiveChild(\n    host: HTMLElement,\n    config: TabFocusConfig\n  ): HTMLElement {\n    const persisted = this.getPersisted(host, config?.group);\n    if (persisted) {\n      return persisted;\n    }\n    const children = this.getChildren(host, config);\n    let index = children.findIndex((tab) => this.isActive(tab));\n    if (!index || index === -1) {\n      index = 0;\n    }\n    return children[index];\n  }\n\n  protected getChildren(\n    host: HTMLElement,\n    config: TabFocusConfig\n  ): HTMLElement[] {\n    if (typeof config.tab === 'string' && config.tab !== 'scroll') {\n      return this.selectFocusUtil.query(host, config.tab);\n    } else {\n      return this.findFocusable(host, true);\n    }\n  }\n\n  /**\n   * Returns all focusable child elements of the host element.\n   *\n   * @param host The host element is used to query child focusable elements.\n   * @param locked Indicates if locked elements (tabindex=-1) should be returned, defaults to false.\n   * @param invisible Indicates if invisible child elements should be returned, defaults to false.\n   */\n  findFocusable(\n    host: HTMLElement,\n    locked = false,\n    invisible = false\n  ): HTMLElement[] {\n    return this.selectFocusUtil.findFocusable(host, locked, invisible);\n  }\n\n  protected isActive(el: HTMLElement): boolean {\n    const child = document.activeElement;\n    const selector = child.tagName;\n\n    return (\n      el === child ||\n      !!Array.from(el.querySelectorAll(selector)).find((e) => e === child)\n    );\n  }\n}\n","import { Directive, ElementRef, HostListener } from '@angular/core';\nimport { AutoFocusDirective } from '../autofocus/auto-focus.directive';\nimport { MOVE_FOCUS, TabFocusConfig } from '../keyboard-focus.model';\nimport { TabFocusService } from './tab-focus.service';\n\n/**\n * Directive to move the focus of (\"locked\") child elements. This is useful\n * for a nested list of tabs, carousel slides or any group of elements that\n * requires horizontal navigation.\n */\n@Directive() // selector: '[cxTabFocus]'\nexport class TabFocusDirective extends AutoFocusDirective {\n  /** `tab` defaults to true if the directive `cxTabFocus` is used. */\n  protected defaultConfig: TabFocusConfig = { tab: true };\n\n  // @Input('cxTabFocus')\n  protected config: TabFocusConfig = {};\n\n  @HostListener('keydown.arrowRight', ['$event'])\n  handleNextTab(event: KeyboardEvent) {\n    if (this.config?.tab) {\n      this.service.moveTab(this.host, this.config, MOVE_FOCUS.NEXT, event);\n    }\n  }\n\n  @HostListener('keydown.arrowLeft', ['$event'])\n  handlePreviousTab(event: KeyboardEvent) {\n    if (this.config?.tab) {\n      this.service.moveTab(this.host, this.config, MOVE_FOCUS.PREV, event);\n    }\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: TabFocusService\n  ) {\n    super(elementRef, service);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  MOVE_FOCUS,\n  TrapFocus,\n  TrapFocusConfig,\n  TrapFocusType,\n} from '../keyboard-focus.model';\nimport { TabFocusService } from '../tab/tab-focus.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class TrapFocusService extends TabFocusService {\n  /**\n   * Indicates whether any of the child elements of the host are focusable.\n   *\n   * @param host `HTMLElement` that is used to query the focusable elements.\n   */\n  hasFocusableChildren(host: HTMLElement): boolean {\n    return this.findFocusable(host).length > 0;\n  }\n\n  /**\n   * Focus the next or previous element of all available focusable elements.\n   * The focus is _trapped_ in case there's no next or previous available element.\n   * The focus will automatically move the start or end of the list.\n   */\n  moveFocus(\n    host: HTMLElement,\n    config: TrapFocusConfig,\n    increment: MOVE_FOCUS,\n    event: UIEvent\n  ): void {\n    const focusable: HTMLElement[] = this.findFocusable(host);\n\n    let index = focusable.findIndex((v) => v === event.target) + increment;\n\n    const shouldMoveFocus =\n      (index >= 0 && index < focusable.length) ||\n      (index < 0 && this.getTrapStart(config.trap)) ||\n      (index >= focusable.length && this.getTrapEnd(config.trap));\n\n    if (shouldMoveFocus) {\n      if (index >= focusable.length) {\n        index = 0;\n      }\n      if (index < 0) {\n        index = focusable.length - 1;\n      }\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const el = focusable[index];\n\n      el.focus();\n    }\n  }\n\n  protected getTrapStart(trap: TrapFocusType): boolean {\n    return trap === true || trap === TrapFocus.start;\n  }\n\n  protected getTrapEnd(trap: TrapFocusType): boolean {\n    return trap === true || trap === TrapFocus.end;\n  }\n}\n","import { Directive, ElementRef, HostListener, OnInit } from '@angular/core';\nimport { MOVE_FOCUS, TrapFocusConfig } from '../keyboard-focus.model';\nimport { TabFocusDirective } from '../tab/tab-focus.directive';\nimport { TrapFocusService } from './trap-focus.service';\n\n/**\n * Directive that keeps the focus inside the focusable child elements,\n * also known as a _focus trap_.\n */\n@Directive() // selector: '[cxTrapFocus]'\nexport class TrapFocusDirective extends TabFocusDirective implements OnInit {\n  protected defaultConfig: TrapFocusConfig = { trap: true };\n\n  // @Input('cxTrapFocus')\n  protected config: TrapFocusConfig = {};\n\n  @HostListener('keydown.arrowdown', ['$event'])\n  @HostListener('keydown.tab', ['$event'])\n  handleTrapDown = (event: KeyboardEvent) => {\n    if (!!this.config.trap) {\n      this.moveFocus(event, MOVE_FOCUS.NEXT);\n    }\n  };\n\n  @HostListener('keydown.arrowup', ['$event'])\n  @HostListener('keydown.shift.tab', ['$event'])\n  handleTrapUp = (event: KeyboardEvent) => {\n    if (!!this.config.trap) {\n      this.moveFocus(event, MOVE_FOCUS.PREV);\n    }\n  };\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: TrapFocusService\n  ) {\n    super(elementRef, service);\n  }\n\n  /**\n   * Moves the focus of the element reference up or down, depending on the increment.\n   * The focus of the element is trapped to avoid it from going out of the group.\n   *\n   * @param event UIEvent that is used to get the target element. The event is blocked\n   *   from standard execution and further bubbling.\n   * @param increment indicates whether the next or previous is focussed.\n   */\n  protected moveFocus(event: UIEvent, increment: number) {\n    if (this.service.hasFocusableChildren(this.host)) {\n      this.service.moveFocus(\n        this.host,\n        this.config,\n        increment,\n        event as UIEvent\n      );\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TrapFocusService } from '../trap/trap-focus.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LockFocusService extends TrapFocusService {}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  OnInit,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { FOCUS_GROUP_ATTR, LockFocusConfig } from '../keyboard-focus.model';\nimport { TrapFocusDirective } from '../trap/trap-focus.directive';\nimport { LockFocusService } from './lock-focus.service';\n\n/**\n * Focusable elements exclude hidden elements by default, but this contradicts with\n * unlocking (hidden) elements.\n */\nconst UNLOCK_HIDDEN_ELEMENTS = true;\n/**\n * Directive that adds persistence for focussed element in case\n * the elements are being rebuild. This happens often when change\n * detection kicks in because of new data set from the backend.\n */\n@Directive() // selector: '[cxLockFocus]'\nexport class LockFocusDirective\n  extends TrapFocusDirective\n  implements OnInit, AfterViewInit {\n  protected defaultConfig: LockFocusConfig = { lock: true };\n\n  // @Input('cxLockFocus')\n  protected config: LockFocusConfig = {};\n\n  /**\n   * Indicates that the host is configured to use locking. This is available as a\n   * CSS class `focus-lock`.\n   */\n  @HostBinding('class.focus-lock') shouldLock: boolean;\n\n  /**\n   * Indicates that the host is locked. This is available as a CSS class `is-locked`.\n   */\n  @HostBinding('class.is-locked') isLocked: boolean;\n\n  /**\n   * Emits an event when the host is unlocked.\n   */\n  @Output() unlock = new EventEmitter<boolean>();\n\n  /**\n   * When the user selects enter or space, the focusable childs are\n   * unlocked, which means that the tabindex is set to 0.\n   */\n  @HostListener('keydown.enter', ['$event'])\n  @HostListener('keydown.space', ['$event'])\n  handleEnter(event: KeyboardEvent) {\n    if (this.shouldLock && this.host === (event.target as HTMLElement)) {\n      this.unlockFocus(event);\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  /**\n   * In case any of the children elements is touched by the mouse,\n   * we unlock the group to not break the mouse-experience.\n   */\n  @HostListener('click', ['$event'])\n  handleClick(event: UIEvent): void {\n    if (this.shouldLock && this.isLocked) {\n      this.unlockFocus(event);\n      event.stopPropagation();\n    }\n  }\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: LockFocusService,\n    protected renderer: Renderer2\n  ) {\n    super(elementRef, service);\n  }\n\n  protected lockFocus() {\n    this.addTabindexToChildren(-1);\n  }\n\n  protected unlockFocus(event?: UIEvent) {\n    this.unlock.emit(true);\n    this.addTabindexToChildren(0);\n    // we focus the host if the event was triggered from a child\n    if (event?.target === this.host) {\n      // we wait a few milliseconds, mainly because firefox will otherwise apply\n      // the mouse event on the new focused child element\n      setTimeout(() => {\n        super.handleFocus(event as KeyboardEvent);\n      }, 100);\n    }\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.shouldLock = this.config?.lock;\n\n    if (this.shouldLock) {\n      this.tabindex = 0;\n\n      // Locked elements will be set to `autofocus` by default if it's not\n      // been configured. This will ensure that autofocus kicks in upon unlock.\n      if (!this.config.hasOwnProperty('autofocus')) {\n        this.config.autofocus = true;\n      }\n      // Locked elements will be set to `focusOnEscape` by default if it's not\n      // been configured. This will ensure that  the host gets locked again when\n      // `escape` is pressed.\n      if (!this.config.hasOwnProperty('focusOnEscape')) {\n        this.config.focusOnEscape = !(this.config?.focusOnEscape === false);\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    if (this.shouldLock) {\n      /**\n       * If the component hosts a group of focusable children elements,\n       * we persist the group key to the children, so that they can taken this\n       * into account when they persist their focus state.\n       */\n      if (!!this.group) {\n        this.service.findFocusable(this.host).forEach((el) =>\n          // we must do this in after view init as\n          this.renderer.setAttribute(el, FOCUS_GROUP_ATTR, this.group)\n        );\n      }\n\n      if (this.shouldAutofocus) {\n        this.handleFocus();\n      }\n    }\n    super.ngAfterViewInit();\n  }\n\n  handleFocus(event?: KeyboardEvent): void {\n    if (this.shouldLock) {\n      if (this.shouldUnlockAfterAutofocus(event)) {\n        // Delay unlocking in case the host is using `ChangeDetectionStrategy.Default`\n        setTimeout(() => this.unlockFocus(event));\n      } else {\n        setTimeout(() => this.lockFocus());\n        event?.stopPropagation();\n        return;\n      }\n    }\n    super.handleFocus(event);\n  }\n\n  handleEscape(event: KeyboardEvent): void {\n    if (this.shouldLock) {\n      this.service.clear(this.config.group);\n    }\n    super.handleEscape(event);\n  }\n\n  /**\n   * When the handleFocus is called without an actual event, it's coming from Autofocus.\n   * In this case we unlock the focusable children in case there's a focusable child that\n   * was unlocked before.\n   *\n   * We keep this private to not polute the API.\n   */\n  private shouldUnlockAfterAutofocus(event?: KeyboardEvent) {\n    return !event && this.service.hasPersistedFocus(this.host, this.config);\n  }\n\n  /**\n   * Add the tabindex attribute to the focusable children elements\n   */\n  protected addTabindexToChildren(i = 0): void {\n    if (this.shouldLock) {\n      this.isLocked = i === -1;\n      if (!(this.hasFocusableChildren && i === 0) || i === 0) {\n        this.focusable.forEach((el) =>\n          this.renderer.setAttribute(el, 'tabindex', i.toString())\n        );\n      }\n    }\n  }\n\n  /**\n   * Utility method, returns all focusable children for the host element.\n   *\n   * We keep this private to not polute the API.\n   */\n  private get hasFocusableChildren(): boolean {\n    return this.service.hasFocusableChildren(this.host);\n  }\n\n  /**\n   * Returns the focusable children of the host element. If the host element\n   * is configured to be locked, the query is restricted to child elements\n   * with a tabindex !== `-1`.\n   *\n   * We keep this private to not polute the API.\n   */\n  private get focusable(): HTMLElement[] {\n    return this.service.findFocusable(\n      this.host,\n      this.shouldLock,\n      UNLOCK_HIDDEN_ELEMENTS\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { LockFocusService } from '../lock/lock-focus.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class KeyboardFocusService extends LockFocusService {}\n","import { Directive, ElementRef, Input, Renderer2 } from '@angular/core';\nimport { FocusConfig } from './keyboard-focus.model';\nimport { LockFocusDirective } from './lock/lock-focus.directive';\nimport { KeyboardFocusService } from './services/keyboard-focus.service';\n\n@Directive({\n  selector: '[cxFocus]',\n})\nexport class FocusDirective extends LockFocusDirective {\n  protected defaultConfig: FocusConfig = {};\n  // tslint:disable-next-line: no-input-rename\n  @Input('cxFocus') protected config: FocusConfig = {};\n\n  constructor(\n    protected elementRef: ElementRef,\n    protected service: KeyboardFocusService,\n    protected renderer: Renderer2\n  ) {\n    super(elementRef, service, renderer);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FocusDirective } from './focus.directive';\n\nconst directives = [\n  // PersistFocusDirective,\n  // VisibleFocusDirective,\n  // BlockFocusDirective,\n  // AutoFocusDirective,\n  // EscapeFocusDirective,\n  // LockFocusDirective,\n  // TrapFocusDirective,\n  // TabFocusDirective,\n  FocusDirective,\n];\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [...directives],\n  exports: [...directives],\n})\nexport class KeyboardFocusModule {}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { DirectionMode } from '../../../layout/direction/config/direction.model';\n\nexport enum ICON_TYPE {\n  STAR = 'STAR',\n  SEARCH = 'SEARCH',\n  CART = 'CART',\n  INFO = 'INFO',\n  GRID = 'GRID',\n  LIST = 'LIST',\n  CARET_DOWN = 'CARET_DOWN',\n  CARET_LEFT = 'CARET_LEFT',\n  CARET_RIGHT = 'CARET_RIGHT',\n  CLOSE = 'CLOSE',\n  ERROR = 'ERROR',\n  WARNING = 'WARNING',\n  SUCCESS = 'SUCCESS',\n  VISA = 'VISA',\n  MASTER_CARD = 'MASTER_CARD',\n  AMEX = 'AMEX',\n  DINERS_CLUB = 'DINERS_CLUB',\n  CREDIT_CARD = 'CREDIT_CARD',\n  EXPAND = 'EXPAND',\n  COLLAPSE = 'COLLAPSE',\n  RESET = 'RESET',\n  CIRCLE = 'CIRCLE',\n  HEART = 'HEART',\n  EMPTY_HEART = 'EMPTY_HEART',\n  FILTER = 'FILTER',\n  PENCIL = 'PENCIL',\n  CLOCK = 'CLOCK',\n  TRASH = 'TRASH',\n  ACTIVE = 'ACTIVE',\n  SORT_DOWN = 'SORT_DOWN',\n  SORT = 'SORT',\n  ON = 'ON',\n  OFF = 'OFF',\n  LINK_OUT = 'LINK_OUT',\n}\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class IconConfig {\n  icon?: IconOptions;\n}\n\nexport interface IconOptions {\n  /**\n   * Each icon type can be configured with a so-called symbol. The symbol will\n   * be used to map the icon to an SVG `symbol` (id) or to the style classes of\n   * a font based icon. The following configuration would map to a fontawesome\n   * icon:\n   *\n   * icon: {\n   *   symbols: {\n   *     CART: 'fas fa-shopping-cart'\n   *   }\n   * }\n   */\n  symbols?: {\n    [ICON_TYPE: string]: string;\n  };\n\n  /**\n   * Resources are used to map icon types to certain asset, such as an SVG (sprite) image.\n   * The resource type (`IconResourceType`) dictates whether an SVG image is used. The URL\n   * is used for the SVG xlink reference.\n   */\n  resources?: IconConfigResource[];\n\n  /**\n   * Lists icons that should be flipped for a specific direction.\n   */\n  flipDirection?: {\n    [ICON_TYPE: string]: DirectionMode;\n  };\n}\n\nexport interface IconConfigResource {\n  type: IconResourceType | string;\n  url?: string;\n  types?: (ICON_TYPE | string)[];\n}\n\n/**\n * Each ICON type can have an companied resource type, such as SVG, LINK (font) or just TEXT.\n * The resources will be automatically loaded in case they're required for the `ICON_TYPE`.\n */\nexport enum IconResourceType {\n  /**\n   * An svg based icon requires an SVG resource that must be loaded,\n   * this is typically a sprite svg file.\n   */\n  SVG = 'svg',\n\n  /**\n   * A font based ICON might require an additional CSS file to be loaded.\n   */\n  LINK = 'link',\n  /**\n   * Text based icons will simply add the ICON string to the DOM. Text icons do not need an image\n   * or CSS pseudo class (i.e. :before), as the text itself is the icon (i.e. +)\n   */\n  TEXT = 'text',\n}\n","import { Component, OnDestroy, ViewContainerRef } from '@angular/core';\nimport { AnonymousConsentsService } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { AnonymousConsentLaunchDialogService } from '../anonymous-consent-launch-dialog.service';\n\n@Component({\n  selector: 'cx-anonymous-consent-management-banner',\n  templateUrl: './anonymous-consent-management-banner.component.html',\n})\nexport class AnonymousConsentManagementBannerComponent implements OnDestroy {\n  private subscriptions = new Subscription();\n\n  bannerVisible$: Observable<\n    boolean\n  > = this.anonymousConsentsService.isBannerVisible();\n\n  constructor(\n    protected anonymousConsentsService: AnonymousConsentsService,\n    protected anonymousConsentLaunchDialogService: AnonymousConsentLaunchDialogService,\n    protected vcr: ViewContainerRef\n  ) {}\n\n  viewDetails(): void {\n    this.hideBanner();\n    const dialog = this.anonymousConsentLaunchDialogService.openDialog(\n      null,\n      this.vcr\n    );\n    if (dialog) {\n      this.subscriptions.add(dialog.subscribe());\n    }\n  }\n\n  allowAll(): void {\n    this.subscriptions.add(\n      this.anonymousConsentsService\n        .giveAllConsents()\n        .pipe(tap(() => this.hideBanner()))\n        .subscribe()\n    );\n  }\n\n  hideBanner(): void {\n    this.anonymousConsentsService.toggleBannerDismissed(true);\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","/**\n * The ltr and rtl directions can be used to configure the storefront for a certain direction, both statically\n * or dynamically.\n *\n * The HTML5 \"auto\" value is not supported in Spartacus, as it's considered to be too fragile for the global\n * direction.\n */\nexport enum DirectionMode {\n  /**\n   * Indicates Left to Right direction.\n   */\n  LTR = 'ltr',\n  /**\n   * Indicates Right to Left direction.\n   */\n  RTL = 'rtl',\n}\n\n/**\n * Contains the configuration mode for language driven directionality. The detect mode is recommended\n * for a multi-site or multi-lingual setup where the active language should dictate the direction mode.\n */\nexport interface Direction {\n  /**\n   * The default direction mode is used for the direction mode of the overall storefront. The default mode\n   * can be used for all languages, but can be further enhanced dynamically by using the language detect mode.\n   * The default mode will also be used in detect mode for those languages that are not listed in either\n   * `rtlLanguages` or `ltrLanguages`.\n   */\n  default?: DirectionMode;\n\n  /**\n   * If detect is enabled, the direction is driven by the active language. The language is compared to the\n   * list of configured `rtlLanguages` vs `ltrLanguages`. If no language is resolved, the default direction\n   * mode is used.\n   *\n   * If no direction can be resolved, the direction is removed.\n   */\n  detect?: boolean;\n\n  /**\n   * The language isoCodes that are used to detect Right to Left languages.\n   */\n  rtlLanguages?: string[];\n\n  /**\n   * The language isoCodes that are used to detect Left to Right languages.\n   */\n  ltrLanguages?: string[];\n}\n","import { IconConfig, IconResourceType } from './icon.model';\n\nexport const fontawesomeIconConfig: IconConfig = {\n  icon: {\n    symbols: {\n      SEARCH: 'fas fa-search',\n      CART: 'fas fa-shopping-cart',\n      INFO: 'fas fa-info-circle',\n      STAR: 'fas fa-star',\n      GRID: 'fas fa-th-large',\n      LIST: 'fas fa-bars',\n      CARET_DOWN: 'fas fa-angle-down',\n      CARET_RIGHT: 'fas fa-angle-right',\n      CARET_LEFT: 'fas fa-angle-left',\n      ERROR: 'fas fa-exclamation-circle',\n      WARNING: 'fas fa-exclamation-triangle',\n      SUCCESS: 'fas fa-check-circle',\n      CLOSE: 'fas fa-times',\n      VISA: 'fab fa-cc-visa',\n      MASTER_CARD: 'fab fa-cc-mastercard',\n      AMEX: 'fab fa-cc-amex',\n      DINERS_CLUB: 'fab fa-cc-diners-club',\n      CREDIT_CARD: 'fas fa-credit-card',\n      COLLAPSE: 'fas fa-minus',\n      EXPAND: 'fas fa-plus',\n      RESET: 'fas fa-times-circle',\n      CIRCLE: 'fas fa-circle',\n      HEART: 'fas fa-heart',\n      EMPTY_HEART: 'far fa-heart',\n      FILTER: 'fas fa-filter',\n      PENCIL: 'fas fa-pencil-alt',\n      CLOCK: 'far fa-clock',\n      TRASH: 'fas fa-trash',\n      ACTIVE: 'fas fa-check',\n      ON: 'fas fa-toggle-on',\n      OFF: 'fas fa-toggle-off',\n      LINK_OUT: 'fas fa-external-link-alt',\n      SORT_DOWN: 'fas fa-sort-down',\n      SORT: 'fas fa-sort',\n    },\n    resources: [\n      {\n        type: IconResourceType.LINK,\n        url: 'https://use.fontawesome.com/releases/v5.8.1/css/all.css',\n      },\n    ],\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { WindowRef } from '@spartacus/core';\nimport { DirectionMode } from '../../../layout/direction/config/direction.model';\nimport {\n  IconConfig,\n  IconConfigResource,\n  IconOptions,\n  IconResourceType,\n  ICON_TYPE,\n} from './icon.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class IconLoaderService {\n  private loadedResources = [];\n  constructor(\n    protected winRef: WindowRef,\n    protected iconConfig: IconConfig,\n    protected sanitizer: DomSanitizer\n  ) {}\n\n  /**\n   * Returns an html fragment which can be added to the DOM in a safe way.\n   */\n  getHtml(type: ICON_TYPE | string): SafeHtml {\n    if (this.isResourceType(type, IconResourceType.SVG)) {\n      return this.sanitizer.bypassSecurityTrustHtml(\n        `<svg><use xlink:href=\"${this.getSvgPath(type)}\"></use></svg>`\n      );\n    }\n    if (this.isResourceType(type, IconResourceType.TEXT)) {\n      return this.sanitizer.bypassSecurityTrustHtml(this.getSymbol(type));\n    }\n  }\n\n  /**\n   * Return the direction for which the icon should mirror (ltr vs rtl). The icon direction\n   * is configurable, but optional, as only a few icons should be flipped for rtl direction.\n   */\n  getFlipDirection(type: ICON_TYPE | string): DirectionMode {\n    return this.config?.flipDirection?.[type];\n  }\n\n  /**\n   *\n   * Returns the symbol class(es) for the icon type.\n   */\n  getStyleClasses(iconType: ICON_TYPE | string): string {\n    return this.getSymbol(iconType) || '';\n  }\n\n  /**\n   * Indicates whether the given `ICON_TYPE` is configured for\n   * the given `IconResourceType`.\n   */\n  private isResourceType(\n    iconType: ICON_TYPE | string,\n    resourceType: IconResourceType\n  ): boolean {\n    return (\n      this.config.resources &&\n      !!this.config.resources.find(\n        (res) =>\n          res.types && res.type === resourceType && res.types.includes(iconType)\n      )\n    );\n  }\n\n  /**\n   * Returns the path to the svg link. The link supports path names\n   * as well, if the config a[[s been setup to support a svg file path.\n   * Additionally, the icon prefix will be taken into account to prefix the\n   * icon IDs in the SVG.\n   */\n  private getSvgPath(iconType: ICON_TYPE | string): string {\n    const svgResource = this.config.resources.find(\n      (res) =>\n        res.type === IconResourceType.SVG &&\n        res.types &&\n        res.types.includes(iconType)\n    );\n    if (svgResource) {\n      return svgResource.url\n        ? `${svgResource.url}#${this.getSymbol(iconType)}`\n        : `#${this.getSymbol(iconType)}`;\n    }\n  }\n\n  /**\n   * Loads the resource url (if any) for the given icon.\n   * The icon will only be loaded once.\n   *\n   * NOTE: this is not working when the shadow is used as there's\n   * no head element available and the link must be loaded for every\n   * web component.\n   */\n  addLinkResource(iconType: ICON_TYPE | string): void {\n    const resource: IconConfigResource = this.findResource(\n      iconType,\n      IconResourceType.LINK\n    );\n    if (\n      resource &&\n      resource.url &&\n      !this.loadedResources.includes(resource.url)\n    ) {\n      this.loadedResources.push(resource.url);\n      const head = this.winRef.document.getElementsByTagName('head')[0];\n      const link = this.winRef.document.createElement('link');\n      link.rel = 'stylesheet';\n      link.type = 'text/css';\n      link.href = resource.url;\n      head.appendChild(link);\n    }\n  }\n\n  private findResource(\n    iconType: ICON_TYPE | string,\n    resourceType: IconResourceType\n  ): IconConfigResource {\n    if (!this.config.resources) {\n      return;\n    }\n\n    let resource = this.config.resources.find(\n      (res) =>\n        res.type === resourceType && res.types && res.types.includes(iconType)\n    );\n    // no specific resource found, let's try to find a one-size-fits-all resource\n    if (!resource) {\n      resource = this.config.resources.find(\n        (res) => (res.type === resourceType && !res.types) || res.types === []\n      );\n    }\n    return resource;\n  }\n\n  getSymbol(iconType: ICON_TYPE | string) {\n    if (this.config && this.config.symbols && this.config.symbols[iconType]) {\n      return this.config.symbols[iconType];\n    }\n  }\n\n  private get config(): IconOptions {\n    return this.iconConfig.icon;\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  Renderer2,\n} from '@angular/core';\nimport { SafeHtml } from '@angular/platform-browser';\nimport { DirectionMode } from '../../../layout/direction/config/direction.model';\nimport { IconLoaderService } from './icon-loader.service';\nimport { ICON_TYPE } from './icon.model';\n\n/**\n *\n * The icon component can be added in different ways:\n *\n * With the component selector:\n * `<cx-icon type=\"SEARCH\"></cx-icon>`\n *\n * With the attribute selector:\n * `<span cxIcon=\"STAR\"></span>`\n *\n * Additionally, content can be projected to the icon:\n *\n * `<button cxIcon=\"HAPPY\">happy label</button>`\n *\n * The above button would become (based on a TEXT resource type):\n * `<button>😊happy label</button>`\n *\n * While the content is projected, the icon itself doesn't require an\n * additional DOM node which is an advantage over the component selector.\n */\n@Component({\n  selector: 'cx-icon,[cxIcon]',\n  templateUrl: './icon.component.html',\n})\nexport class IconComponent {\n  /**\n   * The cxIcon directive is bound to the icon type. You can feed the `ICON_TYPE` to\n   * accomplish a configurable button in the UI.\n   */\n  @Input() set cxIcon(type: ICON_TYPE) {\n    this.setIcon(type);\n  }\n\n  /**\n   * The type input parameter is bound to the icon type. You can feed the `ICON_TYPE` to\n   * accomplish a configurable button in the UI.\n   */\n  @Input() set type(type: ICON_TYPE) {\n    this.setIcon(type);\n  }\n\n  /**\n   * the icon provides an html fragment that is used to add SVG or text based icons.\n   */\n  icon: SafeHtml;\n\n  /**\n   * The `flip-at-rtl` class is added to the DOM for the style layer to flip the icon in RTL direction.\n   */\n  @HostBinding('class.flip-at-rtl') flipAtRtl: boolean;\n\n  /**\n   * The `flip-at-ltr` class is added to the DOM for the style layer to flip the icon in LTR direction.\n   */\n  @HostBinding('class.flip-at-ltr') flipAtLtr: boolean;\n\n  /**\n   * Maintains the applied style classes so we can remove them when the\n   * icon type changes at run time.\n   */\n  protected styleClasses: string[];\n\n  constructor(\n    protected iconLoader: IconLoaderService,\n    protected elementRef: ElementRef<HTMLElement>,\n    protected renderer: Renderer2\n  ) {}\n\n  protected setIcon(type: ICON_TYPE): void {\n    if (!type || <string>type === '') {\n      return;\n    }\n    this.icon = this.iconLoader.getHtml(type);\n    this.addStyleClasses(type);\n    this.iconLoader.addLinkResource(type);\n    this.flipIcon(type);\n  }\n\n  /**\n   * The icons supports flipping for some icons to support rtl and ltr directions.\n   */\n  protected flipIcon(type: ICON_TYPE) {\n    // TODO: this can be dropped with the next major release.\n    if (!this.iconLoader.getFlipDirection) {\n      return;\n    }\n    const iconDirection = this.iconLoader.getFlipDirection(type);\n    this.flipAtLtr = iconDirection === DirectionMode.LTR;\n    this.flipAtRtl = iconDirection === DirectionMode.RTL;\n  }\n\n  /**\n   * Adds the style classes and the link resource (if available).\n   */\n  protected addStyleClasses(type: ICON_TYPE): void {\n    this.renderer.addClass(this.host, 'cx-icon');\n\n    this.styleClasses?.forEach((cls) =>\n      this.renderer.removeClass(this.host, cls)\n    );\n\n    this.styleClasses = this.iconLoader.getStyleClasses(type)?.split(' ');\n    this.styleClasses?.forEach((cls) => {\n      if (cls !== '') {\n        this.renderer.addClass(this.host, cls);\n      }\n    });\n  }\n\n  protected get host() {\n    return this.elementRef.nativeElement;\n  }\n}\n","import { DirectionMode } from '../../../layout/direction/config/direction.model';\nimport { IconConfig } from './icon.model';\n\nexport const defaultIconConfig: IconConfig = {\n  icon: {\n    flipDirection: {\n      CARET_RIGHT: DirectionMode.RTL,\n      CARET_LEFT: DirectionMode.RTL,\n    },\n  },\n};\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultIconConfig } from './default-icon.config';\nimport { fontawesomeIconConfig } from './fontawesome-icon.config';\nimport { IconComponent } from './icon.component';\n\n@NgModule({\n  declarations: [IconComponent],\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(defaultIconConfig),\n    // TODO: move the opinionated fontawesome config to a recipe\n    provideDefaultConfig(fontawesomeIconConfig),\n  ],\n  exports: [IconComponent],\n})\nexport class IconModule {}\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  AnonymousConsent,\n  AnonymousConsentsConfig,\n  AnonymousConsentsService,\n  ConsentTemplate,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, take, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/index';\nimport { FocusConfig } from '../../../layout/a11y/keyboard-focus/index';\nimport { LaunchDialogService } from '../../../layout/launch-dialog/services/launch-dialog.service';\n\n@Component({\n  selector: 'cx-anonymous-consent-dialog',\n  templateUrl: './anonymous-consent-dialog.component.html',\n})\nexport class AnonymousConsentDialogComponent implements OnInit, OnDestroy {\n  @HostBinding('attr.role') role = 'dialog';\n  @HostBinding('attr.aria-modal') modal = true;\n\n  private subscriptions = new Subscription();\n\n  showLegalDescription = true;\n  iconTypes = ICON_TYPE;\n  requiredConsents: string[] = [];\n\n  loading$: Observable<boolean>;\n  templates$: Observable<ConsentTemplate[]>;\n  consents$: Observable<AnonymousConsent[]>;\n\n  focusConfig: FocusConfig = {\n    trap: true,\n    block: true,\n    autofocus: 'input[type=\"checkbox\"]',\n    focusOnEscape: true,\n  };\n\n  @HostListener('click', ['$event'])\n  handleClick(event: UIEvent): void {\n    // Close on click outside the dialog window\n    if ((event.target as any).tagName === this.el.nativeElement.tagName) {\n      this.close('Cross click');\n    }\n  }\n\n  constructor(\n    protected config: AnonymousConsentsConfig,\n    protected anonymousConsentsService: AnonymousConsentsService,\n    protected el: ElementRef,\n    protected launchDialogService: LaunchDialogService\n  ) {\n    if (Boolean(this.config.anonymousConsents)) {\n      this.showLegalDescription = this.config.anonymousConsents.showLegalDescriptionInDialog;\n      if (Boolean(this.config.anonymousConsents.requiredConsents)) {\n        this.requiredConsents = this.config.anonymousConsents.requiredConsents;\n      }\n    }\n  }\n\n  ngOnInit(): void {\n    this.templates$ = this.anonymousConsentsService.getTemplates();\n    this.consents$ = this.anonymousConsentsService.getConsents();\n    this.loading$ = this.anonymousConsentsService.getLoadTemplatesLoading();\n  }\n\n  close(reason?: any): void {\n    this.launchDialogService.closeDialog(reason);\n  }\n\n  rejectAll(): void {\n    this.subscriptions.add(\n      combineLatest([this.templates$, this.consents$])\n        .pipe(\n          take(1),\n          distinctUntilChanged(),\n          tap(([templates, consents]) =>\n            templates.forEach((template) => {\n              const consent = this.getCorrespondingConsent(template, consents);\n              if (this.anonymousConsentsService.isConsentGiven(consent)) {\n                if (this.isRequiredConsent(template)) {\n                  return;\n                }\n\n                this.anonymousConsentsService.withdrawConsent(template.id);\n              }\n            })\n          )\n        )\n        .subscribe()\n    );\n    this.close('rejectAll');\n  }\n\n  allowAll(): void {\n    this.subscriptions.add(\n      combineLatest([this.templates$, this.consents$])\n        .pipe(\n          take(1),\n          distinctUntilChanged(),\n          tap(([templates, consents]) =>\n            templates.forEach((template) => {\n              const consent = this.getCorrespondingConsent(template, consents);\n              if (\n                (consent && consent.consentState == null) ||\n                this.anonymousConsentsService.isConsentWithdrawn(consent)\n              ) {\n                if (this.isRequiredConsent(template)) {\n                  return;\n                }\n\n                this.anonymousConsentsService.giveConsent(template.id);\n              }\n            })\n          )\n        )\n        .subscribe()\n    );\n    this.close('allowAll');\n  }\n\n  private isRequiredConsent(template: ConsentTemplate): boolean {\n    return (\n      Boolean(this.config.anonymousConsents) &&\n      Boolean(this.config.anonymousConsents.requiredConsents) &&\n      this.config.anonymousConsents.requiredConsents.includes(template.id)\n    );\n  }\n\n  onConsentChange({\n    given,\n    template,\n  }: {\n    given: boolean;\n    template: ConsentTemplate;\n  }): void {\n    if (given) {\n      this.anonymousConsentsService.giveConsent(template.id);\n    } else {\n      this.anonymousConsentsService.withdrawConsent(template.id);\n    }\n  }\n\n  getCorrespondingConsent(\n    template: ConsentTemplate,\n    consents: AnonymousConsent[] = []\n  ): AnonymousConsent {\n    for (const consent of consents) {\n      if (template.id === consent.templateCode) {\n        return consent;\n      }\n    }\n    return null;\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","import { LayoutConfig } from '../../layout/config/layout-config';\nimport { DIALOG_TYPE } from '../../layout/launch-dialog/index';\nimport { AnonymousConsentDialogComponent } from '../../shared/components/anonymous-consents-dialog/anonymous-consent-dialog.component';\n\nexport const defaultAnonymousConsentLayoutConfig: LayoutConfig = {\n  launch: {\n    ANONYMOUS_CONSENT: {\n      inline: true,\n      component: AnonymousConsentDialogComponent,\n      dialogType: DIALOG_TYPE.DIALOG,\n    },\n  },\n};\n","import {\n  Component,\n  ElementRef,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { take } from 'rxjs/operators';\nimport { AnonymousConsentLaunchDialogService } from '../anonymous-consent-launch-dialog.service';\n\n@Component({\n  selector: 'cx-anonymous-consent-open-dialog',\n  templateUrl: './anonymous-consent-open-dialog.component.html',\n})\nexport class AnonymousConsentOpenDialogComponent {\n  @ViewChild('open') openElement: ElementRef;\n\n  constructor(\n    protected vcr: ViewContainerRef,\n    protected anonymousConsentLaunchDialogService: AnonymousConsentLaunchDialogService\n  ) {}\n\n  openDialog(): void {\n    const dialog = this.anonymousConsentLaunchDialogService.openDialog(\n      this.openElement,\n      this.vcr\n    );\n    if (dialog) {\n      dialog.pipe(take(1)).subscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  CmsConfig,\n  DeferLoadingStrategy,\n  FeaturesConfigModule,\n  I18nModule,\n  provideConfig,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { KeyboardFocusModule } from '../../layout/a11y/keyboard-focus/index';\nimport { AnonymousConsentManagementBannerComponent } from './banner/anonymous-consent-management-banner.component';\nimport { defaultAnonymousConsentLayoutConfig } from './default-anonymous-consent-layout.config';\nimport { AnonymousConsentOpenDialogComponent } from './open-dialog/anonymous-consent-open-dialog.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    FeaturesConfigModule,\n    KeyboardFocusModule,\n  ],\n  providers: [\n    provideConfig(defaultAnonymousConsentLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AnonymousConsentManagementBannerComponent: {\n          component: AnonymousConsentManagementBannerComponent,\n          deferLoading: DeferLoadingStrategy.INSTANT,\n        },\n        AnonymousConsentOpenDialogComponent: {\n          component: AnonymousConsentOpenDialogComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [\n    AnonymousConsentManagementBannerComponent,\n    AnonymousConsentOpenDialogComponent,\n  ],\n  exports: [\n    AnonymousConsentManagementBannerComponent,\n    AnonymousConsentOpenDialogComponent,\n  ],\n  entryComponents: [\n    AnonymousConsentManagementBannerComponent,\n    AnonymousConsentOpenDialogComponent,\n  ],\n})\nexport class AnonymousConsentManagementBannerModule {}\n","import { Component } from '@angular/core';\n\n// TODO: Improve a11y with better text appropriate to usage (example: loading cart spinner)\n\n@Component({\n  selector: 'cx-spinner',\n  templateUrl: './spinner.component.html',\n})\nexport class SpinnerComponent {\n  constructor() {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { I18nModule } from '@spartacus/core';\nimport { SpinnerComponent } from './spinner.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  declarations: [SpinnerComponent],\n  exports: [SpinnerComponent],\n})\nexport class SpinnerModule {}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport {\n  AnonymousConsent,\n  ANONYMOUS_CONSENT_STATUS,\n  ConsentTemplate,\n} from '@spartacus/core';\n\n@Component({\n  selector: 'cx-consent-management-form',\n  templateUrl: './consent-management-form.component.html',\n})\nexport class ConsentManagementFormComponent implements OnInit {\n  consentGiven = false;\n\n  @Input()\n  consentTemplate: ConsentTemplate;\n\n  @Input()\n  requiredConsents: string[] = [];\n\n  @Input()\n  consent: AnonymousConsent;\n\n  @Output()\n  consentChanged = new EventEmitter<{\n    given: boolean;\n    template: ConsentTemplate;\n  }>();\n\n  constructor() {}\n\n  ngOnInit(): void {\n    if (this.consent) {\n      this.consentGiven = Boolean(\n        this.consent.consentState === ANONYMOUS_CONSENT_STATUS.GIVEN\n      );\n    } else {\n      if (this.consentTemplate && this.consentTemplate.currentConsent) {\n        if (this.consentTemplate.currentConsent.consentWithdrawnDate) {\n          this.consentGiven = false;\n        } else if (this.consentTemplate.currentConsent.consentGivenDate) {\n          this.consentGiven = true;\n        }\n      }\n    }\n  }\n\n  onConsentChange(): void {\n    this.consentGiven = !this.consentGiven;\n\n    this.consentChanged.emit({\n      given: this.consentGiven,\n      template: this.consentTemplate,\n    });\n  }\n\n  isRequired(templateId: string): boolean {\n    return this.requiredConsents.includes(templateId);\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  AnonymousConsentsConfig,\n  AnonymousConsentsService,\n  AuthService,\n  ConsentTemplate,\n  GlobalMessageService,\n  GlobalMessageType,\n  UserConsentService,\n} from '@spartacus/core';\nimport {\n  BehaviorSubject,\n  combineLatest,\n  concat,\n  Observable,\n  Subscription,\n} from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  scan,\n  skipWhile,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-consent-management',\n  templateUrl: './consent-management.component.html',\n})\nexport class ConsentManagementComponent implements OnInit, OnDestroy {\n  private subscriptions = new Subscription();\n  private allConsentsLoading = new BehaviorSubject<boolean>(false);\n\n  templateList$: Observable<ConsentTemplate[]>;\n  loading$: Observable<boolean>;\n\n  requiredConsents: string[] = [];\n\n  constructor(\n    protected userConsentService: UserConsentService,\n    protected globalMessageService: GlobalMessageService,\n    protected anonymousConsentsConfig: AnonymousConsentsConfig,\n    protected anonymousConsentsService: AnonymousConsentsService,\n    protected authService: AuthService\n  ) {}\n\n  ngOnInit(): void {\n    this.loading$ = combineLatest([\n      this.userConsentService.getConsentsResultLoading(),\n      this.userConsentService.getGiveConsentResultLoading(),\n      this.userConsentService.getWithdrawConsentResultLoading(),\n      this.authService.isUserLoggedIn(),\n      this.allConsentsLoading,\n    ]).pipe(\n      map(\n        ([\n          consentLoading,\n          giveConsentLoading,\n          withdrawConsentLoading,\n          isUserLoggedIn,\n          allConsentsLoading,\n        ]) =>\n          consentLoading ||\n          giveConsentLoading ||\n          withdrawConsentLoading ||\n          !isUserLoggedIn ||\n          allConsentsLoading\n      )\n    );\n    this.consentListInit();\n    this.giveConsentInit();\n    this.withdrawConsentInit();\n  }\n\n  private consentListInit(): void {\n    this.templateList$ = this.userConsentService.getConsents().pipe(\n      withLatestFrom(\n        this.anonymousConsentsService.getTemplates(),\n        this.authService.isUserLoggedIn()\n      ),\n      filter(\n        ([_templateList, _anonymousTemplates, isUserLoggedIn]) => isUserLoggedIn\n      ),\n      tap(([templateList, _anonymousTemplates]) => {\n        if (!this.consentsExists(templateList)) {\n          this.userConsentService.loadConsents();\n        }\n      }),\n      map(([templateList, anonymousTemplates]) => {\n        if (Boolean(this.anonymousConsentsConfig.anonymousConsents)) {\n          if (\n            Boolean(\n              this.anonymousConsentsConfig.anonymousConsents.requiredConsents\n            )\n          ) {\n            this.requiredConsents = this.anonymousConsentsConfig.anonymousConsents.requiredConsents;\n          }\n          if (\n            Boolean(\n              this.anonymousConsentsConfig.anonymousConsents\n                .consentManagementPage\n            )\n          ) {\n            return this.hideAnonymousConsents(templateList, anonymousTemplates);\n          }\n        }\n\n        return templateList;\n      })\n    );\n  }\n\n  private hideAnonymousConsents(\n    templateList: ConsentTemplate[],\n    anonymousTemplates: ConsentTemplate[] = []\n  ): ConsentTemplate[] {\n    let hideTemplateIds: string[] = [];\n\n    if (\n      !this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n        .showAnonymousConsents\n    ) {\n      hideTemplateIds = anonymousTemplates.map((template) => template.id);\n      return this.userConsentService.filterConsentTemplates(\n        templateList,\n        hideTemplateIds\n      );\n    }\n\n    if (\n      Boolean(\n        this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n          .hideConsents\n      ) &&\n      this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n        .hideConsents.length > 0\n    ) {\n      hideTemplateIds = this.anonymousConsentsConfig.anonymousConsents\n        .consentManagementPage.hideConsents;\n    }\n\n    return this.userConsentService.filterConsentTemplates(\n      templateList,\n      hideTemplateIds\n    );\n  }\n\n  private giveConsentInit(): void {\n    this.userConsentService.resetGiveConsentProcessState();\n    this.subscriptions.add(\n      this.userConsentService\n        .getGiveConsentResultSuccess()\n        .subscribe((success) => this.onConsentGivenSuccess(success))\n    );\n  }\n\n  private withdrawConsentInit(): void {\n    this.userConsentService.resetWithdrawConsentProcessState();\n    this.subscriptions.add(\n      this.userConsentService\n        .getWithdrawConsentResultLoading()\n        .pipe(\n          skipWhile(Boolean),\n          withLatestFrom(\n            this.userConsentService.getWithdrawConsentResultSuccess()\n          ),\n          map(([, withdrawalSuccess]) => withdrawalSuccess),\n          tap((withdrawalSuccess) => {\n            if (withdrawalSuccess) {\n              this.userConsentService.loadConsents();\n            }\n          })\n        )\n        .subscribe((withdrawalSuccess) =>\n          this.onConsentWithdrawnSuccess(withdrawalSuccess)\n        )\n    );\n  }\n\n  private consentsExists(templateList: ConsentTemplate[]): boolean {\n    return Boolean(templateList) && templateList.length > 0;\n  }\n\n  onConsentChange({\n    given,\n    template,\n  }: {\n    given: boolean;\n    template: ConsentTemplate;\n  }): void {\n    if (given) {\n      this.userConsentService.giveConsent(template.id, template.version);\n    } else {\n      this.userConsentService.withdrawConsent(template.currentConsent.code);\n    }\n  }\n\n  private onConsentGivenSuccess(success: boolean): void {\n    if (success) {\n      this.userConsentService.resetGiveConsentProcessState();\n      this.globalMessageService.add(\n        { key: 'consentManagementForm.message.success.given' },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n    }\n  }\n\n  private onConsentWithdrawnSuccess(success: boolean): void {\n    if (success) {\n      this.userConsentService.resetWithdrawConsentProcessState();\n      this.globalMessageService.add(\n        { key: 'consentManagementForm.message.success.withdrawn' },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n    }\n  }\n\n  rejectAll(templates: ConsentTemplate[] = []): void {\n    const consentsToWithdraw: ConsentTemplate[] = [];\n    templates.forEach((template) => {\n      if (this.userConsentService.isConsentGiven(template.currentConsent)) {\n        if (this.isRequiredConsent(template)) {\n          return;\n        }\n        consentsToWithdraw.push(template);\n      }\n    });\n\n    this.allConsentsLoading.next(true);\n\n    this.subscriptions.add(\n      this.setupWithdrawalStream(consentsToWithdraw)\n        .pipe(tap((_timesLoaded) => this.allConsentsLoading.next(false)))\n        .subscribe()\n    );\n  }\n\n  private setupWithdrawalStream(\n    consentsToWithdraw: ConsentTemplate[] = []\n  ): Observable<number> {\n    const loading$ = concat(\n      this.userConsentService.getWithdrawConsentResultLoading()\n    ).pipe(\n      distinctUntilChanged(),\n      filter((loading) => !loading)\n    );\n    const count$ = loading$.pipe(scan((acc, _value) => acc + 1, -1));\n    const withdraw$ = count$.pipe(\n      tap((i) => {\n        if (i < consentsToWithdraw.length) {\n          this.userConsentService.withdrawConsent(\n            consentsToWithdraw[i].currentConsent.code\n          );\n        }\n      })\n    );\n    const checkTimesLoaded$ = withdraw$.pipe(\n      filter((timesLoaded) => timesLoaded === consentsToWithdraw.length)\n    );\n\n    return checkTimesLoaded$;\n  }\n\n  allowAll(templates: ConsentTemplate[] = []): void {\n    const consentsToGive: ConsentTemplate[] = [];\n    templates.forEach((template) => {\n      if (this.userConsentService.isConsentWithdrawn(template.currentConsent)) {\n        if (this.isRequiredConsent(template)) {\n          return;\n        }\n      }\n      consentsToGive.push(template);\n    });\n\n    this.allConsentsLoading.next(true);\n\n    this.subscriptions.add(\n      this.setupGiveStream(consentsToGive)\n        .pipe(tap((_timesLoaded) => this.allConsentsLoading.next(false)))\n        .subscribe()\n    );\n  }\n\n  private setupGiveStream(\n    consentsToGive: ConsentTemplate[] = []\n  ): Observable<number> {\n    const loading$ = concat(\n      this.userConsentService.getGiveConsentResultLoading()\n    ).pipe(\n      distinctUntilChanged(),\n      filter((loading) => !loading)\n    );\n    const count$ = loading$.pipe(scan((acc, _value) => acc + 1, -1));\n    const giveConsent$ = count$.pipe(\n      tap((i) => {\n        if (i < consentsToGive.length) {\n          this.userConsentService.giveConsent(\n            consentsToGive[i].id,\n            consentsToGive[i].version\n          );\n        }\n      })\n    );\n    const checkTimesLoaded$ = giveConsent$.pipe(\n      filter((timesLoaded) => timesLoaded === consentsToGive.length)\n    );\n\n    return checkTimesLoaded$;\n  }\n\n  private isRequiredConsent(template: ConsentTemplate): boolean {\n    return (\n      Boolean(this.anonymousConsentsConfig.anonymousConsents) &&\n      Boolean(\n        this.anonymousConsentsConfig.anonymousConsents.requiredConsents\n      ) &&\n      this.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(\n        template.id\n      )\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    this.allConsentsLoading.unsubscribe();\n\n    this.userConsentService.resetGiveConsentProcessState();\n    this.userConsentService.resetWithdrawConsentProcessState();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { ConsentManagementFormComponent } from './components/consent-form/consent-management-form.component';\nimport { ConsentManagementComponent } from './components/consent-management.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SpinnerModule,\n    I18nModule,\n    IconModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ConsentManagementComponent: {\n          component: ConsentManagementComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ConsentManagementComponent, ConsentManagementFormComponent],\n  exports: [ConsentManagementComponent, ConsentManagementFormComponent],\n  entryComponents: [ConsentManagementComponent],\n})\nexport class ConsentManagementModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { ConsentManagementModule } from '../../../cms-components/myaccount/consent-management/consent-management.module';\nimport { KeyboardFocusModule } from '../../../layout/a11y/keyboard-focus/index';\nimport { SpinnerModule } from '../spinner/spinner.module';\nimport { AnonymousConsentDialogComponent } from './anonymous-consent-dialog.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    IconModule,\n    SpinnerModule,\n    ConsentManagementModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [AnonymousConsentDialogComponent],\n  entryComponents: [AnonymousConsentDialogComponent],\n  exports: [AnonymousConsentDialogComponent],\n})\nexport class AnonymousConsentsDialogModule {}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\n\nexport interface CardAction {\n  event: string;\n  name: string;\n}\n\nexport interface CardLinkAction {\n  link: string;\n  name: string;\n}\n\nexport interface Card {\n  header?: string;\n  title?: string;\n  textBold?: string;\n  text?: Array<string>;\n  paragraphs?: Array<{ title?: string; text?: Array<string> }>;\n  img?: string;\n  actions?: Array<CardAction | CardLinkAction>;\n  deleteMsg?: string;\n}\n\n@Component({\n  selector: 'cx-card',\n  templateUrl: './card.component.html',\n})\nexport class CardComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  @Output()\n  deleteCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  setDefaultCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  sendCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  editCard: EventEmitter<number> = new EventEmitter();\n  @Output()\n  cancelCard: EventEmitter<number> = new EventEmitter();\n\n  @Input()\n  border = false;\n\n  @Input()\n  editMode = false;\n\n  @Input()\n  isDefault = false;\n\n  @Input()\n  content: Card;\n  @Input()\n  fitToContainer = false;\n\n  // ACTIONS\n\n  setEditMode(): void {\n    this.editMode = true;\n  }\n\n  cancelEdit(): void {\n    this.editMode = false;\n    this.cancelCard.emit(5);\n  }\n\n  delete(): void {\n    this.deleteCard.emit(1);\n  }\n\n  setDefault(): void {\n    this.isDefault = true;\n    this.setDefaultCard.emit(2);\n  }\n\n  send(): void {\n    this.sendCard.emit(3);\n  }\n\n  edit(): void {\n    this.editCard.emit(4);\n  }\n\n  constructor() {}\n\n  ngOnInit() {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { CardComponent } from './card.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, IconModule],\n  declarations: [CardComponent],\n  exports: [CardComponent],\n})\nexport class CardModule {}\n","import { Injectable } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CarouselService {\n  constructor(private winRef: WindowRef) {}\n\n  /**\n   * The number of items per slide is calculated by the help of\n   * the item width and the available width of the host element.\n   * This appoach makes it possible to place the carousel in different\n   * layouts. Instead of using the page breakpoints, the host size is\n   * taken into account.\n   *\n   * Since there's no element resize API available, we use the\n   * window `resize` event, so that we can adjust the number of items\n   * whenever the window got resized.\n   */\n  getItemsPerSlide(\n    nativeElement: HTMLElement,\n    itemWidth: string\n  ): Observable<number> {\n    return this.winRef.resize$.pipe(\n      map(() => (nativeElement as HTMLElement).clientWidth),\n      map((totalWidth) => this.calculateItems(totalWidth, itemWidth))\n    );\n  }\n\n  /**\n   * Calculates the number of items per given hostSize.  calculated based on the given\n   * intended size in pixels or percentages. The\n   *\n   * @param availableWidth The available width in pixels for the carousel items.\n   * @param itemWidth The width per carousel item, in px or percentage.\n   */\n  private calculateItems(availableWidth: number, itemWidth: string) {\n    let calculatedItems = 0;\n    if (itemWidth.endsWith('px')) {\n      const num = itemWidth.substring(0, itemWidth.length - 2);\n      calculatedItems = availableWidth / <number>(<any>num);\n    }\n\n    if (itemWidth.endsWith('%')) {\n      const perc = itemWidth.substring(0, itemWidth.length - 1);\n      calculatedItems =\n        availableWidth / (availableWidth * (<number>(<any>perc) / 100));\n    }\n\n    return Math.floor(calculatedItems) || 1;\n  }\n}\n","import { Image } from '@spartacus/core';\n\nexport interface Media {\n  /**\n   * Identify the “default” image URL which is used in case the srcset is not specificied.\n   * Browsers withotu srcset support will also fallback to this URl.\n   */\n  src: string;\n\n  /**\n   * The srcset attribute holds a list of image file URLs, along with size descriptions.\n   */\n  srcset?: string;\n\n  /**\n   * Provides alternative information for a media if a user cannot view the visual. It is\n   * also used by web crawlers and screen readers.\n   */\n  alt?: string;\n}\n\n/**\n * Contains multiple media for different formats\n */\nexport interface MediaContainer {\n  [format: string]: Image;\n}\n\n/**\n * Specifies media size information that can be used to generate information for the\n * browser to resolve the right media for the right layout or device.\n */\nexport interface MediaFormatSize {\n  /**\n   * Specifies the width for a given media format. The media format width is used\n   * to align the width of the media with the available size in the layout, so that\n   * different media's can be used in a responsive layout.\n   */\n  width?: number;\n}\n\n/**\n * Indicates how the browser should load the image.\n *\n * While this might not add too much value in some scenarios, as we have other\n * optimizations to defer loading of larger pieces of the DOM, there might be\n * components who haven't implemented other lazy loading techniques. Moreover,\n * a server sides rendered page that lands directly in the browser could benefit\n * enormously from the lazy loading of images.\n */\nexport enum ImageLoadingStrategy {\n  /**\n   * Loads the image immediately, regardless of whether or not the image\n   * is currently within the visible viewport (this is the default value).\n   */\n  EAGER = 'eager',\n  /**\n   * Defers loading the image until it reaches a calculated distance from the viewport,\n   * as defined by the browser. The intent is to avoid the network and storage bandwidth\n   * needed to handle the image until it's reasonably certain that it will be needed.\n   * This generally improves the performance of the content in most typical use cases.\n   */\n  LAZY = 'lazy',\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Input,\n  isDevMode,\n  OnInit,\n  TemplateRef,\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\nimport { CarouselService } from './carousel.service';\n\n/**\n * Generic carousel component that can be used to render any carousel items,\n * such as products, images, banners, or any component. Carousel items are\n * rendered in so-called carousel slides, and the previous/next buttons as well as\n * the indicator-buttons can used to navigate the slides.\n *\n * The component uses an array of Observables (`items$`) as an input, to allow\n * for lazy loading of items.\n *\n * The number of items per slide is calculated with the `itemWidth`, which can given\n * in pixels or percentage.\n *\n * To allow for flexible rendering of items, the rendering is delegated to the\n * given `template`. This allows for maximum flexibility.\n */\n@Component({\n  selector: 'cx-carousel',\n  templateUrl: './carousel.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CarouselComponent implements OnInit {\n  /**\n   * The title is rendered as the carousel heading.\n   */\n  @Input() title: string;\n\n  /**\n   * The items$ represent the carousel items. The items$ are\n   * observables so that the items can be loaded on demand.\n   */\n  items: Observable<any>[];\n  @Input('items')\n  set setItems(inputItems: Observable<any>[]) {\n    this.items = inputItems;\n    //Reset slider when changing products\n    this.activeSlide = 0;\n  }\n\n  /**\n   * The template is rendered for each item, so that the actual\n   * view can be given by the compoent that uses the `CarouselComponent`.\n   */\n  @Input() template: TemplateRef<any>;\n\n  /**\n   * Specifies the minimum size of the carousel item, either in px or %.\n   * This value is used for the calculation of numbers per carousel, so that\n   * the number of carousel items is dynamic. The calculation uses the `itemWidth`\n   * and the host element `clientWidth`, so that the carousel is reusable in\n   * different layouts (for example in a 50% grid).\n   */\n  @Input() itemWidth = '300px';\n\n  /**\n   * Indicates whether the visual indicators are used.\n   */\n  @Input() hideIndicators = false;\n\n  @Input() indicatorIcon = ICON_TYPE.CIRCLE;\n  @Input() previousIcon = ICON_TYPE.CARET_LEFT;\n  @Input() nextIcon = ICON_TYPE.CARET_RIGHT;\n\n  activeSlide: number;\n  size$: Observable<number>;\n\n  constructor(protected el: ElementRef, protected service: CarouselService) {}\n\n  ngOnInit() {\n    if (!this.template && isDevMode()) {\n      console.error(\n        'No template reference provided to render the carousel items for the `cx-carousel`'\n      );\n      return;\n    }\n    this.size$ = this.service\n      .getItemsPerSlide(this.el.nativeElement, this.itemWidth)\n      .pipe(tap(() => (this.activeSlide = 0)));\n  }\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { distinctUntilChanged, map } from 'rxjs/operators';\nimport {\n  BreakPoint,\n  BREAKPOINT,\n  LayoutBreakPoints,\n  LayoutConfig,\n} from '../config/layout-config';\n\n/**\n * The `BreakpointService` resolves the various screen sizes that are used in\n * the storefront. The screen sizes are globally configurable based on your\n * layout requirements. You can adjust the screen sizes by setting the minimum\n * and/or maximum size for a breakpoint, as well as extending the configuration\n * with new screens.\n *\n * By default, the `BreakpointService` is based on the breakpoints from the\n * Bootstrap ui library:\n * - `xs`: < 576px\n * - `sm`: 576px - 767px\n * - `md`: 768px - 991px\n * - `lg`: 992px - 1199px\n * - `xl`: >= 1200px\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class BreakpointService {\n  private _breakpoints: BREAKPOINT[];\n\n  breakpoint$: Observable<BREAKPOINT> = isPlatformBrowser(this.platform)\n    ? this.winRef.resize$.pipe(\n        map((event) => this.getBreakpoint((<Window>event.target).innerWidth)),\n        distinctUntilChanged()\n      )\n    : of(this.fallbackBreakpoint);\n\n  constructor(\n    protected winRef: WindowRef,\n    protected layoutConfig: LayoutConfig,\n    @Inject(PLATFORM_ID) protected platform: any\n  ) {}\n\n  /**\n   * Returns the breakpoints for the storefront layout.\n   *\n   * The breakpoints are driven by the `LayoutConfig.breakpoints` and sorted based on\n   * the given screen size.\n   */\n  get breakpoints(): BREAKPOINT[] {\n    if (!this._breakpoints) {\n      this._breakpoints = this.resolveBreakpointsFromConfig();\n    }\n    return this._breakpoints;\n  }\n\n  /**\n   * Returns the _maximum_ size for the breakpoint, given by the `LayoutConfig.breakpoints`\n   * configuration.\n   */\n  getSize(breakpoint: BREAKPOINT): number {\n    return (\n      this.getMaxSize(breakpoint) ??\n      // if there's no direct max value or explicit max value\n      // we must derive the max value from the previous min\n      this.getMinSize(\n        this.breakpoints?.[this.breakpoints.indexOf(breakpoint) + 1]\n      )\n    );\n  }\n\n  /**\n   * Indicates whether the current screen size is smaller than the maximum size of the\n   * given breakpoint.\n   *\n   * If the given breakpoint is `BREAKPOINT.md`, the method returns `true` when the\n   * window innerWidth is smaller than the configured size of `BREAKPOINT.md`.\n   */\n  isDown(breakpoint: BREAKPOINT): Observable<boolean> {\n    return this.breakpoint$.pipe(\n      map((br) =>\n        this.breakpoints\n          .slice(0, this.breakpoints.indexOf(breakpoint) + 1)\n          .includes(br)\n      )\n    );\n  }\n\n  /**\n   * Indicates whether the current screen size is larger than the minimum size of the\n   * given breakpoint.\n   *\n   * If the given breakpoint is `BREAKPOINT.md`, the method returns `true` when the\n   * window innerWidth is larger than the configured size of `BREAKPOINT.sm`.\n   */\n  isUp(breakpoint: BREAKPOINT): Observable<boolean> {\n    return this.breakpoint$.pipe(\n      map((br) =>\n        this.breakpoints\n          .slice(this.breakpoints.indexOf(breakpoint))\n          .includes(br)\n      )\n    );\n  }\n\n  /**\n   * Indicates whether the given breakpoint fits in the current screen size.\n   */\n  isEqual(breakpoint: BREAKPOINT): Observable<boolean> {\n    return this.breakpoint$.pipe(map((br) => br === breakpoint));\n  }\n\n  /**\n   * Returns the fallback breakpoint in case no breakpoint can be resolved. This is\n   * typically the case when we're on SSR without an actual window.\n   *\n   * Returns the smallest screen size (mobile first).\n   */\n  protected get fallbackBreakpoint(): BREAKPOINT {\n    return this.breakpoints?.[0];\n  }\n\n  /**\n   * Resolves the breakpoints and sorts them according to the configured size.\n   *\n   * The sort order is by small to large screens.\n   */\n  protected resolveBreakpointsFromConfig(): BREAKPOINT[] {\n    const sortByScreenSize = (next: BREAKPOINT, prev: BREAKPOINT): number => {\n      const maxNext = Math.max(\n        this.getMinSize(next) + 1 || 0,\n        this.getMaxSize(next) || 0\n      );\n      const maxPrev = Math.max(\n        this.getMinSize(prev) + 1 || 0,\n        this.getMaxSize(prev) || 0\n      );\n      return maxNext < maxPrev ? -1 : 0;\n    };\n    return (Object.keys(this.config) as BREAKPOINT[]).sort(sortByScreenSize);\n  }\n\n  /**\n   * Returns the _maximum_ size for the breakpoint, given by the\n   * `LayoutConfig.breakpoints` configuration. We will try to resolve the\n   * max size form the current breakpoint, but if this is not available, we\n   * resolve it form the next breakpoint\n   */\n  protected getMaxSize(breakpoint: BREAKPOINT): number {\n    const breakpointConfig = this.config[breakpoint];\n\n    if (!breakpointConfig) {\n      return null;\n    }\n\n    // we treat numbers as the max number by default\n    if (typeof breakpointConfig === 'number') {\n      return breakpointConfig as number;\n    } else if (breakpointConfig.max) {\n      return breakpointConfig.max;\n    } else {\n      return null;\n    }\n  }\n\n  protected getMinSize(breakpoint: BREAKPOINT): number {\n    return (this.config[breakpoint] as BreakPoint)?.min;\n  }\n\n  /**\n   * Returns a `BREAKPOINT` for the given window size.\n   *\n   * This method tries to match the closest breakpoint for the given\n   * window size. We'll fallback to the `largest` size in case the window\n   * is greater than the largest configurable breakpoint.\n   *\n   * The windowWidth should be smaller than the maximum size of any of the\n   * screen sizes defined in the `LayoutConfig.breakpoints`.\n   */\n  protected getBreakpoint(windowWidth: number): BREAKPOINT {\n    return (\n      this.breakpoints.find((br) => windowWidth < this.getSize(br)) ??\n      this.breakpoints?.[this.breakpoints.length - 1]\n    );\n  }\n\n  /**\n   * Helper method to return the breakpoint configuration.\n   */\n  protected get config(): LayoutBreakPoints {\n    return this.layoutConfig?.breakpoints || {};\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { Config, Image, OccConfig } from '@spartacus/core';\nimport { BreakpointService } from '../../../layout/breakpoint/breakpoint.service';\nimport { StorefrontConfig } from '../../../storefront-config';\nimport { MediaConfig } from './media.config';\nimport {\n  ImageLoadingStrategy,\n  Media,\n  MediaContainer,\n  MediaFormatSize,\n} from './media.model';\n\n/**\n * Service which generates media URLs. It leverage the MediaContainer and MediaFormats so\n * that URLs and sizes are generated for the same media. This helps to improve performance\n * across difference devices and layouts.\n *\n * Media formats are optional, but highly recommended. The format will help the browser to\n * identify the right media for the right experience.\n *\n * The MediaService will generate absolute URLs in case relative URLs are provided for the Media.\n * The baseUrl is read from the `occConfig.backend.media.baseUrl` or\n * `occConfig.backend.occ.baseUrl`.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class MediaService {\n  /**\n   * The media formats sorted by size. The media format representing the smallest\n   * size is sorted on top.\n   */\n  private _sortedFormats: { code: string; size: MediaFormatSize }[];\n  private _reversedFormats: { code: string; size: MediaFormatSize }[];\n\n  constructor(\n    @Inject(Config) protected config: StorefrontConfig,\n    /**\n     * The BreakpointService is no longer used in version 2.0 as the different size formats are\n     * driven by configuration only. There's however a change that this service will play a role\n     * in the near future, which is why we keep the constructor as-is.\n     *\n     * @deprecated\n     */\n    protected breakpointService: BreakpointService\n  ) {}\n\n  /**\n   * Returns a `Media` object with the main media (`src`) and various media (`src`)\n   * for specific formats.\n   */\n  getMedia(\n    mediaContainer: MediaContainer | Image,\n    format?: string,\n    alt?: string\n  ): Media {\n    if (!mediaContainer) {\n      return;\n    }\n\n    const mainMedia: Image = mediaContainer.url\n      ? mediaContainer\n      : this.resolveMedia(mediaContainer as MediaContainer, format);\n\n    return {\n      src: this.resolveAbsoluteUrl(mainMedia?.url),\n      alt: alt || mainMedia?.altText,\n      srcset: this.resolveSrcSet(mediaContainer, format),\n    };\n  }\n\n  /**\n   * Reads the loading strategy from the `MediaConfig`.\n   *\n   * Defaults to `ImageLoadingStrategy.EAGER`.\n   */\n  get loadingStrategy(): ImageLoadingStrategy {\n    return (\n      (this.config as MediaConfig)?.imageLoadingStrategy ??\n      ImageLoadingStrategy.EAGER\n    );\n  }\n\n  /**\n   * Creates the media formats in a logical sorted order. The map contains the\n   * format key and the format size information. We do this only once for performance\n   * benefits.\n   */\n  protected get sortedFormats(): { code: string; size: MediaFormatSize }[] {\n    if (!this._sortedFormats && (this.config as MediaConfig)?.mediaFormats) {\n      this._sortedFormats = Object.keys(\n        (this.config as MediaConfig).mediaFormats\n      )\n        .map((key) => ({\n          code: key,\n          size: (this.config as MediaConfig).mediaFormats[key],\n        }))\n        .sort((a, b) => (a.size.width > b.size.width ? 1 : -1));\n    }\n    return this._sortedFormats ?? [];\n  }\n\n  /**\n   * Creates the media formats in a reversed sorted order.\n   */\n  protected get reversedFormats(): { code: string; size: MediaFormatSize }[] {\n    if (!this._reversedFormats) {\n      this._reversedFormats = this.sortedFormats.slice().reverse();\n    }\n    return this._reversedFormats;\n  }\n\n  /**\n   * Resolves the right media for the given format. The fo\n   */\n  protected resolveMedia(media: MediaContainer, format?: string): Image {\n    return media[this.resolveFormat(media, format)];\n  }\n\n  /**\n   * Validates the format against the given mediaContainer. If there is no format available,\n   * or if the mediaContainer doesn't contain a media for the given media, the most optimal\n   * format is resolved. If even that is not possible, the first format is returned.\n   */\n  protected resolveFormat(\n    mediaContainer: MediaContainer,\n    format?: string\n  ): string {\n    if (format && mediaContainer[format]) {\n      return format;\n    }\n    return (\n      this.resolveBestFormat(mediaContainer) || Object.keys(mediaContainer)[0]\n    );\n  }\n\n  /**\n   * Returns the media format code with the best size.\n   */\n  protected resolveBestFormat(media: MediaContainer | Image): string {\n    return this.reversedFormats.find((format) =>\n      media.hasOwnProperty(format.code)\n    )?.code;\n  }\n\n  /**\n   * Returns a set of media for the available media formats. Additionally, the configured media\n   * format width is added to the srcset, so that browsers can select the appropriate media.\n   *\n   * The optional maxFormat indicates that only sources till a certain format should be added\n   * to the srcset.\n   */\n  protected resolveSrcSet(\n    media: MediaContainer | Image,\n    maxFormat?: string\n  ): string {\n    if (!media) {\n      return undefined;\n    }\n\n    // Only create srcset images that are smaller than the given `maxFormat` (if any)\n    let formats = this.sortedFormats;\n    const max: number = formats.findIndex((f) => f.code === maxFormat);\n    if (max > -1) {\n      formats = formats.slice(0, max + 1);\n    }\n\n    const srcset = formats.reduce((set, format) => {\n      if (!!media[format.code]) {\n        if (set) {\n          set += ', ';\n        }\n        set += `${this.resolveAbsoluteUrl(media[format.code].url)} ${\n          format.size.width\n        }w`;\n      }\n      return set;\n    }, '');\n\n    return srcset === '' ? undefined : srcset;\n  }\n\n  /**\n   * Resolves the absolute URL for the given url. In most cases, this URL represents\n   * the relative URL on the backend. In that case, we prefix the url with the baseUrl.\n   */\n  protected resolveAbsoluteUrl(url: string): string {\n    if (!url) {\n      return null;\n    }\n    return url.startsWith('http') ? url : this.getBaseUrl() + url;\n  }\n\n  /**\n   * The base URL is either driven by a specific `backend.media.baseUrl`, or by the\n   * `backend.occ.baseUrl`.\n   *\n   * The `backend.media.baseUrl` can be used to load media from a different location.\n   *\n   * In Commerce Cloud, a different location could mean a different \"aspect\".\n   *\n   * Defaults to empty string in case no config is provided.\n   */\n  protected getBaseUrl(): string {\n    return (\n      (this.config as OccConfig).backend?.media?.baseUrl ??\n      (this.config as OccConfig).backend?.occ?.baseUrl ??\n      ''\n    );\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnChanges,\n  Output,\n} from '@angular/core';\nimport { ImageLoadingStrategy, Media, MediaContainer } from './media.model';\nimport { MediaService } from './media.service';\n\n@Component({\n  selector: 'cx-media',\n  templateUrl: './media.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MediaComponent implements OnChanges {\n  /**\n   * The media container can hold multiple media items, so that\n   * a specific media (by format) can be used or multiple media\n   * can be provided in a `srcset` so the browser will figure out\n   * the best media for the device.\n   */\n  @Input() container: MediaContainer;\n\n  /**\n   * if a media format is given, a media for the given format will be rendered\n   */\n  @Input() format: string;\n\n  /**\n   * A specific alt text for an image, which overrules the alt text\n   * from the container data.\n   */\n  @Input() alt: string;\n\n  /**\n   * Once the media is loaded, we emit an event.\n   */\n  @Output() loaded: EventEmitter<Boolean> = new EventEmitter<Boolean>();\n\n  /**\n   * The media contains the info for the UI to create the image. This media\n   * object might contain more info once other media types (i.e. video) is supported.\n   */\n  media: Media;\n\n  /**\n   * The `cx-media` component has an `is-initialized` class as long as the\n   * media is being initialized.\n   */\n  @HostBinding('class.is-initialized') isInitialized = false;\n\n  /**\n   * The `cx-media` component has a `is-loading` class as long as the\n   * media is loaded. Wehn the media is loaded, the `is-initialized` class\n   * is added.\n   */\n  @HostBinding('class.is-loading') isLoading = true;\n\n  /**\n   * When there's no media provided for the content, or in case an error\n   * happened during loading, we add the `is-missing` class. Visual effects\n   * can be controlled by CSS.\n   */\n  @HostBinding('class.is-missing') isMissing = false;\n\n  constructor(protected mediaService: MediaService) {}\n\n  ngOnChanges(): void {\n    this.create();\n  }\n\n  /**\n   * Creates the `Media` object\n   */\n  protected create(): void {\n    this.media = this.mediaService.getMedia(\n      this.container,\n      this.format,\n      this.alt\n    );\n    if (!this.media?.src) {\n      this.handleMissing();\n    }\n  }\n\n  /**\n   * This handler is called from the UI when the image is loaded.\n   */\n  loadHandler(): void {\n    this.isLoading = false;\n    this.isInitialized = true;\n    this.isMissing = false;\n    this.loaded.emit(true);\n  }\n\n  /**\n   * Indicates whether the browser should lazy load the image.\n   */\n  get loadingStrategy(): string {\n    return this.mediaService.loadingStrategy === ImageLoadingStrategy.LAZY\n      ? 'lazy'\n      : null;\n  }\n\n  /**\n   * Whenever an error happens during load, we mark the component\n   * with css classes to have a missing media.\n   */\n  errorHandler(): void {\n    this.handleMissing();\n  }\n\n  protected handleMissing() {\n    this.isLoading = false;\n    this.isInitialized = true;\n    this.isMissing = true;\n    this.loaded.emit(false);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { MediaComponent } from './media.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [MediaComponent],\n  exports: [MediaComponent],\n})\nexport class MediaModule {\n  static forRoot(): ModuleWithProviders<MediaModule> {\n    return {\n      ngModule: MediaModule,\n    };\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { UrlModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/index';\nimport { MediaModule } from '../media/media.module';\nimport { CarouselComponent } from './carousel.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, IconModule, MediaModule, UrlModule],\n  declarations: [CarouselComponent],\n  exports: [CarouselComponent],\n})\nexport class CarouselModule {}\n","import { Injectable } from '@angular/core';\n\n/**\n * Service that provides the placeholder and input pattern for date pickers. This is\n * used in Spartacus to support browser that won't support the native html5 date picker\n * using `<input type=\"date\">`.\n *\n * While the placeholder is configurable, you should be aware that the placeholder format\n * defaults to `yyyy-mm-dd` to align with Safaris limited support of ISO 8601.\n * Another consideration is the support of date formats in the backend. In case you change\n * this format, you might need to serialize the date to the supported date format in the\n * backend.\n *\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DatePickerService {\n  get placeholder(): string {\n    return 'yyyy-mm-dd';\n  }\n\n  /**\n   * The default date pattern is based on the placeholder string;\n   */\n  get pattern(): string {\n    return this.placeholder\n      .replace('yyyy', '\\\\d{4}')\n      .replace('mm', '\\\\d{1,2}')\n      .replace('dd', '\\\\d{1,2}');\n  }\n\n  /**\n   * Validates if the string based date value is a valid date.\n   */\n  isValidFormat(date: string, pattern?: string): boolean {\n    const patternRegex = new RegExp(`^${pattern ?? this.pattern}$`);\n    return patternRegex.test(date);\n  }\n\n  /**\n   * Since Safari doesn't support proper date formats (ISO 8601), we need to do this\n   * ourselves. We cannot rely on `new Date('2020-1-1')`. This will fail, only\n   * `new Date('2020-01-01')` works.\n   */\n  getDate(value: string): Date {\n    if (!value) {\n      return;\n    }\n\n    const delimiter = this.placeholder\n      .replace('yyyy', '')\n      .replace('mm', '')\n      .replace('dd', '')\n      .substr(0, 1);\n\n    const dateParts = value.split(delimiter);\n\n    const placeholderParts = this.placeholder.split(delimiter);\n\n    const y = placeholderParts.indexOf('yyyy');\n    const m = placeholderParts.indexOf('mm');\n    const d = placeholderParts.indexOf('dd');\n\n    return new Date(\n      Number(dateParts[y]),\n      Number(dateParts[m]) - 1,\n      Number(dateParts[d])\n    );\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { DatePickerService } from './date-picker.service';\n\n/**\n * Component that adds a date control. While the native date picker works in most\n * modern browsers, some browsers need more guidance (placeholder), validation and\n * date conversion.\n *\n * The data picker supports (optional) min and max form controls, so that you can\n * limit the start and/or end date.\n *\n * Most of the implementation is done in the `DatePickerFallbackDirective`.\n */\n@Component({\n  selector: 'cx-date-picker',\n  templateUrl: './date-picker.component.html',\n  // we cannot use onPush change detection as the form state isn't updated without explicit\n  // change detection, see https://github.com/angular/angular/issues/10816\n})\nexport class DatePickerComponent {\n  constructor(protected service: DatePickerService) {}\n  @Input() control: FormControl;\n  @Input() min?: string;\n  @Input() max?: string;\n\n  @Output() update: EventEmitter<void> = new EventEmitter();\n\n  change() {\n    this.update.emit();\n  }\n\n  get placeholder() {\n    return this.service.placeholder;\n  }\n\n  get pattern() {\n    return this.service.pattern;\n  }\n\n  /**\n   * Only returns the date if we have a valid format. We do this to avoid\n   * loads of console errors coming from the datePipe while the user is typing\n   * (in those browsers where the date picker isn't supported).\n   */\n\n  getDate(date: string): string {\n    return this.service.isValidFormat(date) ? date : null;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  HostBinding,\n  Input,\n} from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\n\n/**\n * This component renders form errors.\n */\n@Component({\n  selector: 'cx-form-errors',\n  templateUrl: './form-errors.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FormErrorsComponent {\n  _control: FormControl;\n  errors$: Observable<string[]>;\n\n  @Input() prefix = 'formErrors';\n\n  @Input()\n  translationParams: { [key: string]: string };\n\n  @Input()\n  set control(control: FormControl) {\n    this._control = control;\n\n    this.errors$ = control?.statusChanges.pipe(\n      startWith({}),\n      map(() => control.errors || {}),\n      map((errors) =>\n        Object.entries(errors)\n          .filter((error) => error[1])\n          .map((error) => error[0])\n      )\n    );\n  }\n\n  get control(): FormControl {\n    return this._control;\n  }\n\n  @HostBinding('class.control-invalid') get invalid() {\n    return this.control?.invalid;\n  }\n  @HostBinding('class.control-dirty') get dirty() {\n    return this.control?.dirty;\n  }\n  @HostBinding('class.control-touched') get touched() {\n    return this.control?.touched;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormErrorsComponent } from './form-errors.component';\nimport { I18nModule } from '@spartacus/core';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  declarations: [FormErrorsComponent],\n  exports: [FormErrorsComponent],\n})\nexport class FormErrorsModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { I18nModule } from '@spartacus/core';\nimport { FormErrorsModule } from '../form-errors/form-errors.module';\nimport { DatePickerComponent } from './date-picker.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, FormErrorsModule, I18nModule],\n  declarations: [DatePickerComponent],\n  exports: [DatePickerComponent],\n})\nexport class DatePickerModule {}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { Params, Router } from '@angular/router';\n\n// private\ninterface RouteParts {\n  /** Path in the Angular-like array format */\n  path?: string[];\n\n  /** Query params */\n  queryParams?: Params;\n\n  /** Hash fragment */\n  fragment?: string;\n}\n\n/**\n * This component navigates using [routerLink] attribute when input 'url' is a relative url. Otherwise (when it's absolute), [href] is used.\n */\n@Component({\n  selector: 'cx-generic-link',\n  templateUrl: './generic-link.component.html',\n})\nexport class GenericLinkComponent implements OnChanges {\n  constructor(protected router: Router) {}\n\n  /**\n   * Pattern matching string starting with `http://` or `https://`.\n   */\n  private readonly PROTOCOL_REGEX: RegExp = /^https?:\\/\\//i;\n\n  /**\n   * Used to split url into 2 parts:\n   * 1. the path\n   * 2. query params + hash fragment\n   */\n  private readonly URL_SPLIT = /(^[^#?]*)(.*)/;\n\n  /**\n   * Parsed parts of the @Input `url`, when it's a local URL.\n   * It should not be used when the `url` is external.\n   * @see `url`\n   */\n  private routeParts: RouteParts = {};\n\n  @Input() url: string | any[];\n  @Input() target: string;\n  @Input() id: string;\n  @Input() class: string;\n  @Input() style: string;\n  @Input() title: string;\n\n  /**\n   * Returns true when the @Input `url` is a string starting with `http://` or `https://`.\n   */\n  isExternalUrl(): boolean {\n    return typeof this.url === 'string' && this.PROTOCOL_REGEX.test(this.url);\n  }\n\n  get rel() {\n    return this.target === '_blank' ? 'noopener' : null;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['url']) {\n      this.setUrlParts(changes['url'].currentValue);\n    }\n  }\n\n  /**\n   * The part with the path of the local url.\n   */\n  get routerUrl(): any[] {\n    return this.routeParts.path;\n  }\n\n  /**\n   * The part with the query params of the local url.\n   */\n  get queryParams(): Params {\n    return this.routeParts.queryParams;\n  }\n\n  /**\n   * The part with the hash fragment of the local url.\n   */\n  get fragment(): string {\n    return this.routeParts.fragment;\n  }\n\n  /**\n   * Parses the given url and sets the property `urlParts` accordingly.\n   */\n  private setUrlParts(url: string | any[]) {\n    if (typeof url === 'string') {\n      url = this.getAbsoluteUrl(url); // string links in CMS sometimes don't have the leading slash, so fix it here\n      this.routeParts = this.splitUrl(url as string);\n    } else {\n      this.routeParts = { path: url };\n    }\n  }\n\n  /**\n   * Parses the given string into 3 parts:\n   * - string path (wrapped in an array to be compatible with Angular syntax for the `routerLink`)\n   * - query params (as an object)\n   * - hash fragment (string)\n   */\n  private splitUrl(url: string = ''): RouteParts {\n    const { queryParams, fragment } = this.router.parseUrl(url);\n    const [, path] = url.match(this.URL_SPLIT);\n\n    // wrap path in an array, to have the Angular-like path format\n    return { path: [path], queryParams, fragment };\n  }\n\n  /**\n   * Prepends a leading slash to the given URL string, in case it doesn't have it.\n   */\n  private getAbsoluteUrl(url: string): string {\n    return url.startsWith('/') ? url : '/' + url;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { GenericLinkComponent } from './generic-link.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule],\n  declarations: [GenericLinkComponent],\n  exports: [GenericLinkComponent],\n})\nexport class GenericLinkModule {}\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { startWith } from 'rxjs/operators';\n\n/**\n * Provides a UI to manage the count of the quantity, typically by using\n * increase and decrease functionality. The item counter expects an input `FormControl`\n * so that the state of the control can be managed outside of this component.\n */\n@Component({\n  selector: 'cx-item-counter',\n  templateUrl: './item-counter.component.html',\n  // do not use OnPush change detection strategy as we would not\n  // get updates of other form control state (disabled). We want to have a\n  // disabled state in order to ensure that the control cannot be used while\n  // the cart is updated.\n})\nexport class ItemCounterComponent implements OnInit, OnDestroy {\n  /**\n   * Holds the value of the counter, the state of the `FormControl`\n   * can be managed outside of the item counter.\n   */\n  @Input() control: FormControl;\n\n  /**\n   * This can be used in case an item has a minmum order quantity.\n   * @default 1\n   */\n  @Input() min = 1;\n\n  /**\n   * This can be used in case an item has a maximum order quantity.\n   */\n  @Input() max: number;\n\n  /**\n   * The step is used to increment the count. It is supposed to be a\n   * positive integer or float.\n   * @default 1\n   */\n  @Input() step = 1;\n\n  /**\n   * Indicates that the input can be manually set to zero,\n   * despite the fact that the input controls will be limited to\n   * the minimum. The zero value can be used to remove an item.\n   */\n  @Input() allowZero = false;\n\n  /**\n   * In readonly mode the item counter will only be shown as a label,\n   * the form controls are not rendered.\n   * Please not that readonly is different from the `disabled` form state.\n   * @default false\n   */\n  @HostBinding('class.readonly') @Input() readonly = false;\n\n  @ViewChild('qty') private input: ElementRef<HTMLInputElement>;\n\n  /**\n   * Subscription responsible for auto-correcting control's value when it's invalid.\n   */\n  private sub: Subscription;\n\n  @HostListener('click') handleClick() {\n    this.input.nativeElement.focus();\n  }\n\n  ngOnInit() {\n    this.sub = this.control.valueChanges\n      .pipe(startWith(this.control.value))\n      .subscribe((value) =>\n        this.control.setValue(this.getValidCount(value), { emitEvent: false })\n      );\n  }\n\n  ngOnDestroy() {\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n  }\n\n  increment() {\n    // it's too early to use the `stepUp` and `stepDown` API...\n    // let's wait for FF: https://caniuse.com/#search=stepUp\n    this.control.setValue(this.control.value + this.step);\n    this.control.markAsDirty();\n  }\n\n  decrement() {\n    this.control.setValue(this.control.value - this.step);\n    this.control.markAsDirty();\n  }\n\n  /**\n   * Validate that the given value is in between\n   * the `min` and `max` value. If the value is out\n   * of  the min/max range, it will be altered.\n   * If `allowZero` is set to true, the 0 value is ignored.\n   *\n   */\n  private getValidCount(value: number) {\n    if (value < this.min && !(value === 0 && this.allowZero)) {\n      value = this.min;\n    }\n    if (this.max && value > this.max) {\n      value = this.max;\n    }\n    return value;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { ItemCounterComponent } from './item-counter.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule],\n  declarations: [ItemCounterComponent],\n  exports: [ItemCounterComponent],\n})\nexport class ItemCounterModule {}\n","/**\n * Represents a page item for a pagination system. This is used\n * to store the model of each page.\n */\nexport interface PaginationItem {\n  label?: string;\n  type?: PaginationItemType;\n  /** The number is used when the type is {@link PaginationItemType.PAGE} */\n  number?: number;\n}\n\n/**\n * The item type is used to add semantic structure to the\n * PaginationItem, so that the UI understands the usage.\n */\nexport enum PaginationItemType {\n  GAP = 'gap',\n  FIRST = 'first',\n  LAST = 'last',\n  PREVIOUS = 'previous',\n  NEXT = 'next',\n  START = 'start',\n  END = 'end',\n  PAGE = 'page',\n}\n\nexport interface PaginationOptions {\n  /**\n   * The range of direct accessible pages in the pagination.\n   *\n   * `« 4 (5) 6 »`\n   *\n   * Defaults to 3.\n   */\n  rangeCount?: number;\n\n  /** Adds a link to skip to the start of the pages, defaults to false. */\n  addStart?: boolean;\n  /** A link to skip to the end of the pages, defaults to false. */\n  addEnd?: boolean;\n  /** A link to the previous page, defaults to false. */\n  addPrevious?: boolean;\n  /** A link to the previous page, defaults to false. */\n  addNext?: boolean;\n\n  navigationPosition?: PaginationNavigationPosition;\n\n  /** A link to the first page can be added in case it is not included already, defaults to false. */\n  addFirst?: boolean;\n  /** A link to the last page can be added in case it is not included already, defaults to false. */\n  addLast?: boolean;\n\n  /**\n   * Adds a gap before and after the pages. to visualize hidden pages. Defaults to false.\n   *\n   * `1 ...  4 (5) 6 ... 18`\n   *\n   * Defaults to false.\n   */\n  addDots?: boolean;\n\n  /**\n   * If the page dots only represents a single page, we rather add the page\n   * as this would take the same amount of space. Some UX might want to use\n   * the dots for consistency reasons, which why this option is configurable.\n   *\n   * This typically happens on the 4th page (in case the range is 3):\n   * Instead of having:\n   *\n   *  `1 ...  3 (4) 5`\n   *\n   * we'd have\n   *\n   * `1 2 3 (4) 5`.\n   *\n   * Defaults to false.\n   */\n  substituteDotsForSingularPage?: boolean;\n\n  /** Custom label for the start link, defaults to `«`. */\n  startLabel?: string;\n  /** Custom label for the previous link, defaults to `‹`. */\n  previousLabel?: string;\n  /** Custom label for the next link, defaults to `›`. */\n  nextLabel?: string;\n  /** Custom label for the end link, defaults to `»`. */\n  endLabel?: string;\n  /** Custom label for the dots, defaults to `...`. */\n  dotsLabel?: string;\n}\n\nexport enum PaginationNavigationPosition {\n  ASIDE = 'aside',\n  BEFORE = 'before',\n  AFTER = 'after',\n}\n","import { PaginationConfig } from './pagination.config';\n\nexport const defaultPaginationConfig: PaginationConfig = {\n  pagination: {\n    addStart: true,\n    addEnd: true,\n  },\n};\n","import { PaginationOptions } from '../pagination.model';\nimport { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class PaginationConfig {\n  pagination?: PaginationOptions;\n}\n","import { Injectable } from '@angular/core';\nimport { PaginationConfig } from './config/pagination.config';\nimport {\n  PaginationItem,\n  PaginationItemType,\n  PaginationNavigationPosition,\n  PaginationOptions,\n} from './pagination.model';\n\nconst FALLBACK_PAGINATION_OPTIONS: PaginationOptions = {\n  rangeCount: 3,\n  dotsLabel: '...',\n  startLabel: '«',\n  previousLabel: '‹',\n  nextLabel: '›',\n  endLabel: '»',\n};\n\n/**\n * Builds a pagination structures based on a pageCount and current page number.\n * There are various {@link PaginationConfig} options which can be used to configure\n * the behavior of the build. Alternatively, CSS can be used to further customize\n * the pagination.\n *\n * Examples:\n * The full blown pagination items contain the follow elements:\n *\n * `« ‹ 1 ... 4 (5) 6 ... 9 › »`\n *\n * This includes pagination items to the following pages:\n * - start page\n * - previous page\n * - first page\n * - page range\n * - last page\n * - next page\n * - end page\n *\n * All of those links are configurable, including the size of the page range.\n * The current page will always be centered in the page range to provide direct access\n * to the previous and next page.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class PaginationBuilder {\n  constructor(protected paginationConfig: PaginationConfig) {}\n\n  /**\n   * Builds a list of `PaginationItem`. The give pageCount and current are used\n   * to build out the full pagination. There are various {@link PaginationConfig} options\n   * which can be used to configure the behavior of the build. Alternatively, CSS\n   * can be used to further specialize visibility of the pagination.\n   *\n   * @param pageCount The total number of pages\n   * @param current The current page number, 0-index based\n   * @returns An array of `PaginationItem`\n   */\n  paginate(pageCount: number, current: number): PaginationItem[] {\n    const pages: PaginationItem[] = [];\n    if (!pageCount || pageCount < 2) {\n      return pages;\n    }\n    this.addPages(pages, pageCount, current);\n    this.addDots(pages, pageCount);\n    this.addFirstLast(pages, pageCount);\n    this.addNavigation(pages, pageCount, current);\n\n    return pages;\n  }\n\n  /**\n   * Returns the current page with surrounding pages (based on the `config.rangeCount`).\n   * The current page is always centered to provide direct access to the previous and next page.\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   * @param current The current page number, 0-index based\n   */\n  protected addPages(\n    pages: PaginationItem[],\n    pageCount: number,\n    current: number\n  ): void {\n    const start = this.getStartOfRange(pageCount, current);\n    const max = Math.min(this.config.rangeCount, pageCount);\n    Array.from(Array(max)).forEach((_, i) => {\n      pages.push({\n        number: i + start,\n        label: String(i + start + 1),\n        type: PaginationItemType.PAGE,\n      });\n    });\n  }\n\n  /**\n   * Adds dots before and after the given pages, if configured (defaults to true).\n   * If the dots only represent a single page, the page number is added instead of\n   * the dots, unless the configuration requires dots always.\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   */\n  protected addDots(pages: PaginationItem[], pageCount: number): void {\n    if (!this.config.addDots) {\n      return;\n    }\n\n    const addFirstGap = () => {\n      const firstItemNumber = pages[0].number;\n      const gapNumber = this.config.addFirst ? 1 : 0;\n      if (firstItemNumber > gapNumber) {\n        const isGap =\n          !this.config.substituteDotsForSingularPage ||\n          firstItemNumber !== gapNumber + 1;\n        const isSubstituted =\n          this.config.addFirst &&\n          this.config.substituteDotsForSingularPage &&\n          gapNumber === 0;\n        const type = isGap\n          ? PaginationItemType.GAP\n          : isSubstituted\n          ? PaginationItemType.FIRST\n          : PaginationItemType.PAGE;\n        return [\n          Object.assign(\n            {\n              label: isGap ? this.config.dotsLabel : String(gapNumber + 1),\n              type,\n            },\n            isGap ? null : { number: gapNumber }\n          ),\n        ];\n      } else return [];\n    };\n\n    const addLastGap = () => {\n      const nextPageNumber = pages[pages.length - 1].number + 1;\n      const last = pageCount - (this.config.addLast ? 2 : 1);\n      if (nextPageNumber <= last) {\n        const isSubstituted =\n          this.config.addLast &&\n          this.config.substituteDotsForSingularPage &&\n          nextPageNumber === last;\n        const isGap =\n          nextPageNumber <\n          pageCount -\n            (this.config.substituteDotsForSingularPage ? 1 : 0) -\n            (this.config.addLast ? 1 : 0);\n\n        const type = isGap\n          ? PaginationItemType.GAP\n          : isSubstituted\n          ? PaginationItemType.LAST\n          : PaginationItemType.PAGE;\n        return [\n          Object.assign(\n            {\n              label: isGap ? this.config.dotsLabel : String(nextPageNumber + 1),\n              type,\n            },\n            isGap ? null : { number: nextPageNumber }\n          ),\n        ];\n      } else return [];\n    };\n\n    pages.unshift(...addFirstGap());\n    pages.push(...addLastGap());\n  }\n\n  /**\n   * Add links to the first and last page, if configured to do so.\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   *\n   */\n  protected addFirstLast(pages: PaginationItem[], pageCount: number) {\n    if (this.config.addFirst && pages[0].number !== 0) {\n      pages.unshift({\n        number: 0,\n        label: '1',\n        type: PaginationItemType.FIRST,\n      });\n    }\n    if (\n      this.config.addLast &&\n      pages[pages.length - 1].number !== pageCount - 1\n    ) {\n      pages.push({\n        number: pageCount - 1,\n        label: String(pageCount),\n        type: PaginationItemType.LAST,\n      });\n    }\n  }\n\n  /**\n   * Add links to the start, previous, next and last page, if configured to do so.\n   * The order of the links can be configured by using the {@link PaginationConfig},\n   * using the `PaginationNavigationPosition` (`BEFORE` or `AFTER`).\n   * The `PaginationNavigationPosition` allows for 3 flavours:\n   *\n   * - by default the pagination starts with start and previous and ends with the next and end links\n   * - BEFORE – all navigation links are added in the front of the pagination list\n   * - AFTER – all navigation links are pushed to the end of the pagination list\n   *\n   * @param pages The list of page items that is used to amend\n   * @param pageCount The total number of pages\n   * @param current The current page number, 0-index based\n   *\n   */\n  protected addNavigation(\n    pages: PaginationItem[],\n    pageCount: number,\n    current: number\n  ): void {\n    const before = this.getBeforeLinks(current);\n    const after = this.getAfterLinks(pageCount, current);\n    const pos = this.config.navigationPosition;\n    if (!pos || pos === PaginationNavigationPosition.ASIDE) {\n      pages.unshift(...before);\n      pages.push(...after);\n    } else {\n      if (pos === PaginationNavigationPosition.BEFORE) {\n        pages.unshift(...before, ...after);\n      }\n      if (pos === PaginationNavigationPosition.AFTER) {\n        pages.push(...before, ...after);\n      }\n    }\n  }\n\n  /**\n   * Returns the start and previous links, if applicable.\n   */\n  protected getBeforeLinks(current: number): PaginationItem[] {\n    const list = [];\n\n    if (this.config.addStart) {\n      const start = () => {\n        return Object.assign(\n          {\n            label: this.config.startLabel,\n            type: PaginationItemType.START,\n          },\n          current > 0 ? { number: 0 } : null\n        );\n      };\n      list.push(start());\n    }\n    if (this.config.addPrevious) {\n      const previous = () => {\n        return Object.assign(\n          {\n            label: this.config.previousLabel,\n            type: PaginationItemType.PREVIOUS,\n          },\n          current > 0 ? { number: current - 1 } : null\n        );\n      };\n      list.push(previous());\n    }\n    return list;\n  }\n\n  /**\n   * Returns the next and end links, if applicable.\n   */\n  protected getAfterLinks(\n    pageCount: number,\n    current: number\n  ): PaginationItem[] {\n    const list = [];\n\n    if (this.config.addNext) {\n      const next = () => {\n        return Object.assign(\n          {\n            label: this.config.nextLabel,\n            type: PaginationItemType.NEXT,\n          },\n          current < pageCount - 1 ? { number: current + 1 } : null\n        );\n      };\n      list.push(next());\n    }\n    if (this.config.addEnd) {\n      const end = () => {\n        return Object.assign(\n          {\n            label: this.config.endLabel,\n            type: PaginationItemType.END,\n          },\n          current < pageCount - 1 ? { number: pageCount - 1 } : null\n        );\n      };\n      list.push(end());\n    }\n\n    return list;\n  }\n  /**\n   * Resolves the first page of the range we need to build.\n   * This is the page that is leading up to the range of the\n   * current page.\n   *\n   * @param pageCount The total number of pages.\n   * @param current The current page number, 0-index based.\n   */\n  protected getStartOfRange(pageCount: number, current: number): number {\n    const count = this.config.rangeCount - 1;\n    // the least number of pages before and after the current\n    const delta = Math.round(count / 2);\n\n    // ensure that we start with at least the first page\n    const minStart = Math.max(0, current - delta);\n    // ensures that we start with at least 1 and do not pass the last range\n    const maxStart = Math.max(0, pageCount - count - 1);\n\n    // ensure that we get at least a full range at the end\n    return Math.min(maxStart, minStart);\n  }\n\n  /**\n   * Returns the pagination configuration. The configuration is driven by the\n   * (default) application configuration.\n   *\n   * The default application is limited to adding the start and end link:\n   * ```ts\n   *   addStart: true,\n   *   addEnd: true\n   * ```\n   *\n   * The application configuration is however merged into the following static configuration:\n   * ```ts\n   * {\n   *   rangeCount: 3,\n   *   dotsLabel: '...',\n   *   startLabel: '«',\n   *   previousLabel: '‹',\n   *   nextLabel: '›',\n   *   endLabel: '»'\n   * }\n   * ```\n   */\n  protected get config(): PaginationOptions {\n    return Object.assign(\n      FALLBACK_PAGINATION_OPTIONS,\n      this.paginationConfig.pagination\n    );\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { PaginationModel } from '@spartacus/core';\nimport { PaginationBuilder } from './pagination.builder';\nimport { PaginationItem, PaginationItemType } from './pagination.model';\n\n/**\n * The `PaginationComponent` is a generic component that is used for\n * all lists in Spartacus that require pagination. The component supports\n * all common features, which can be configured or hidden by CSS.\n */\n@Component({\n  selector: 'cx-pagination',\n  templateUrl: './pagination.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaginationComponent {\n  /** The (optional) pageRoute used for the anchor links created in the pagination   */\n  @Input() pageRoute: string;\n\n  /** The (optional) query parameter which is added to the page route.  */\n  @Input() queryParam: string;\n\n  /**\n   * Whenever there's a default page specified, the routing logic\n   * will omit the page number in routeLink or parameters.\n   */\n  @Input() defaultPage;\n\n  private _pagination: PaginationModel;\n  get pagination(): PaginationModel {\n    return this._pagination;\n  }\n  @Input() set pagination(value: PaginationModel) {\n    this._pagination = value;\n    this.render(value);\n  }\n\n  @Output() viewPageEvent: EventEmitter<number> = new EventEmitter<number>();\n\n  pages: PaginationItem[] = [];\n\n  constructor(\n    private paginationBuilder: PaginationBuilder,\n    private activatedRoute: ActivatedRoute\n  ) {}\n\n  protected render(pagination: PaginationModel): void {\n    if (!pagination) {\n      return;\n    }\n    this.pages = this.paginationBuilder.paginate(\n      pagination.totalPages,\n      pagination.currentPage\n    );\n  }\n\n  /**\n   * Indicates whether the given item is the current item.\n   *\n   * @param item PaginationItem\n   * @returns boolean\n   */\n  isCurrent(item: PaginationItem): boolean {\n    return (\n      item.type === PaginationItemType.PAGE &&\n      item.number === this.pagination.currentPage\n    );\n  }\n\n  /**\n   * Indicates whether the pagination item is inactive. This is used\n   * to disabled a link or set the tabindex to `-1`.\n   *\n   * Defaults to true\n   *\n   * @param item PaginationItem\n   * @returns returns -1 in case of a disabled\n   */\n  isInactive(item: PaginationItem): boolean {\n    return (\n      !item.hasOwnProperty('number') ||\n      item.number === this.pagination.currentPage\n    );\n  }\n\n  getQueryParams(item: PaginationItem): Params {\n    const queryParams = Object.assign(\n      {},\n      this.activatedRoute.snapshot.queryParams\n    );\n    if (\n      this.queryParam &&\n      item.number < this.pagination.totalPages &&\n      !this.isCurrent(item)\n    ) {\n      queryParams[this.queryParam] = item.number;\n    }\n    // omit the page number from the query parameters in case it's the default\n    // to clean up the experience and avoid unnecessary polluting of the URL\n    if (queryParams[this.queryParam] === this.defaultPage) {\n      delete queryParams[this.queryParam];\n    }\n    return queryParams;\n  }\n\n  pageChange(page: PaginationItem): void {\n    this.viewPageEvent.emit(page.number);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultPaginationConfig } from './config/index';\nimport { PaginationComponent } from './pagination.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule],\n  providers: [provideDefaultConfig(defaultPaginationConfig)],\n  declarations: [PaginationComponent],\n  exports: [PaginationComponent],\n})\nexport class PaginationModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { SortModel } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-sorting',\n  templateUrl: './sorting.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SortingComponent {\n  @Input()\n  sortOptions: SortModel[];\n  @Input()\n  selectedOption: string;\n  @Input()\n  placeholder: string;\n  @Input()\n  sortLabels: { [code: string]: string };\n\n  @Output()\n  sortListEvent: EventEmitter<string>;\n\n  constructor() {\n    this.sortListEvent = new EventEmitter<string>();\n  }\n\n  sortList(sortCode: string): void {\n    this.sortListEvent.emit(sortCode);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { PaginationComponent, PaginationModule } from './pagination/index';\nimport { SortingComponent } from './sorting/sorting.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    NgSelectModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IconModule,\n    PaginationModule,\n  ],\n  declarations: [SortingComponent],\n  exports: [SortingComponent, PaginationComponent],\n})\nexport class ListNavigationModule {}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { ImageLoadingStrategy, MediaFormatSize } from './media.model';\n\n/**\n * Provides configuration specific to Media, such as images. This is used to optimize\n * rendering of the media, SEO and performance.\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class MediaConfig {\n  /**\n   * Media _format_ configuration holds the size of the media's assigned to\n   * a format.\n   */\n  mediaFormats?: {\n    /**\n     * Represents the media format code, that is the key to distinguish different\n     * media in a container.\n     */\n    [format: string]: MediaFormatSize;\n  };\n\n  /**\n   * Indicates how the browser should load the image. There's only one\n   * global strategy for all media cross media in Spartacus.\n   *\n   * See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img for more\n   * information.\n   *\n   * If the `lazy` strategy is in place, the `loading=\"lazy\"` attribute is added to the\n   * img element.\n   */\n  imageLoadingStrategy?: ImageLoadingStrategy;\n}\n","import { NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\n\n/**\n * A reference to a newly opened modal\n *\n * @todo remove ngb dependency and create our own implementation of ModalRef\n */\nexport class ModalRef extends NgbModalRef {}\n","import {\n  Directive,\n  HostListener,\n  Injectable,\n  Input,\n  Optional,\n} from '@angular/core';\nimport { Router, RouterLink, RouterLinkWithHref } from '@angular/router';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\n\nexport interface ModalDirectiveOptions {\n  /**\n   * Action to perform after click\n   */\n  type: 'dismiss' | 'close';\n\n  /**\n   * Reason for dismissing or closing the modal\n   */\n  reason?: string;\n}\n\n/**\n * Service to control the behavior of the DismissModalDirective\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ModalDirectiveService {\n  /**\n   * Handler for the click event on the directive\n   *\n   * @param options.type    Action to perform after click - close or dismiss\n   * @param options.reason  Reason for dismissing or closing the modal\n   * @param url             url (optional) - exists only when the directive is also a `routerLink`.\n   */\n  onClick(\n    options: ModalDirectiveOptions,\n    activeModal: NgbActiveModal,\n    url?: string\n  ): void {\n    let reason = options.reason;\n\n    if (!reason && url) {\n      reason = `Link click: ${url}`;\n    }\n\n    if (options.type === 'dismiss') {\n      activeModal.dismiss(reason);\n    } else if (options.type === 'close') {\n      activeModal.close(reason);\n    }\n  }\n}\n\n/**\n * Directive to dismiss the modal on click\n */\n@Directive({\n  selector: '[cxModal]',\n})\nexport class ModalDirective {\n  /**\n   * Action to perform, when the directive is clicked - dismiss or close.\n   *\n   * Reason can be given via input `cxModalReason`, which fallbacks to URL of the `routerLink` (if exists on the same element).\n   */\n  @Input() cxModal: ModalDirectiveOptions['type'];\n\n  /**\n   * Reason for closing/dismissing the modal. Fallbacks to URL of the `routerLink` (if exists on the same element).\n   */\n  @Input() cxModalReason: ModalDirectiveOptions['reason'];\n\n  constructor(\n    protected service: ModalDirectiveService,\n    protected router: Router,\n\n    // active modal can be injected only when the directive is projected inside modal\n    @Optional() protected activeModal: NgbActiveModal,\n\n    @Optional() protected routerLink: RouterLink,\n    @Optional() protected routerLinkWithHref: RouterLinkWithHref\n  ) {}\n\n  /**\n   * Returns URL in case when the directive is in the scope of a `routerLink` directive at the same time.\n   */\n  protected getUrl(): string | undefined {\n    const routerLink = this.routerLink ?? this.routerLinkWithHref;\n    return routerLink\n      ? this.router.serializeUrl(routerLink.urlTree)\n      : undefined;\n  }\n\n  @HostListener('click')\n  onClick() {\n    if (this.activeModal) {\n      this.service.onClick(this.options, this.activeModal, this.getUrl());\n    }\n  }\n\n  /**\n   * Converts the directive's inputs to the shape of modal directive options\n   */\n  protected get options(): ModalDirectiveOptions {\n    return { type: this.cxModal, reason: this.cxModalReason };\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ModalDirective } from './modal.directive';\n\n@NgModule({\n  declarations: [ModalDirective],\n  exports: [ModalDirective],\n})\nexport class ModalModule {}\n","import { Injectable } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ModalOptions } from './modal-options';\nimport { ModalRef } from './modal-ref';\n\n/**\n * A service to handle modal\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ModalService {\n  private modals: ModalRef[] = [];\n  constructor(private ngbModalService: NgbModal) {}\n\n  open(content: any, options?: ModalOptions): ModalRef {\n    let activeModal: ModalRef;\n\n    activeModal = this.ngbModalService.open(content, options);\n    this.modals.push(activeModal);\n    this.handleModalRemoveEvents(activeModal);\n\n    return activeModal;\n  }\n\n  protected handleModalRemoveEvents(modal: ModalRef): void {\n    modal.result.finally(() => {\n      this.modals = this.modals.filter((m) => m !== modal);\n    });\n  }\n\n  getActiveModal(): ModalRef {\n    const modal = this.modals[this.modals.length - 1];\n    return modal ? modal : null;\n  }\n\n  dismissActiveModal(reason?: any): void {\n    const modal: ModalRef = this.getActiveModal();\n\n    if (modal) {\n      modal.dismiss(reason);\n    }\n  }\n\n  closeActiveModal(reason?: any): void {\n    const modal: ModalRef = this.getActiveModal();\n\n    if (modal) {\n      modal.close(reason);\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport {\n  Address,\n  CostCenter,\n  DeliveryMode,\n  PaymentDetails,\n  TranslationService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { Card } from '../card/card.component';\n\n@Component({\n  selector: 'cx-order-overview',\n  templateUrl: './order-overview.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderOverviewComponent {\n  order: any;\n\n  @Input('order')\n  set setOrder(order: any) {\n    this.order = order;\n  }\n\n  constructor(protected translation: TranslationService) {}\n\n  getReplenishmentCodeCardContent(orderCode: string): Observable<Card> {\n    return this.translation\n      .translate('checkoutOrderConfirmation.replenishmentNumber')\n      .pipe(\n        filter(() => Boolean(orderCode)),\n        map((textTitle) => ({\n          title: textTitle,\n          text: [orderCode],\n        }))\n      );\n  }\n\n  getReplenishmentActiveCardContent(active: boolean): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutOrderConfirmation.status'),\n      this.translation.translate('checkoutOrderConfirmation.active'),\n      this.translation.translate('checkoutOrderConfirmation.cancelled'),\n    ]).pipe(\n      map(([textTitle, textActive, textCancelled]) => ({\n        title: textTitle,\n        text: [active ? textActive : textCancelled],\n      }))\n    );\n  }\n\n  getReplenishmentStartOnCardContent(isoDate: string): Observable<Card> {\n    return this.translation.translate('checkoutReview.startOn').pipe(\n      filter(() => Boolean(isoDate)),\n      map((textTitle) => {\n        const date = this.getDate(new Date(isoDate));\n\n        return {\n          title: textTitle,\n          text: [date],\n        };\n      })\n    );\n  }\n\n  getReplenishmentFrequencyCardContent(frequency: string): Observable<Card> {\n    return this.translation\n      .translate('checkoutOrderConfirmation.frequency')\n      .pipe(\n        filter(() => Boolean(frequency)),\n        map((textTitle) => ({\n          title: textTitle,\n          text: [frequency],\n        }))\n      );\n  }\n\n  getReplenishmentNextDateCardContent(isoDate: string): Observable<Card> {\n    return this.translation\n      .translate('checkoutOrderConfirmation.nextOrderDate')\n      .pipe(\n        filter(() => Boolean(isoDate)),\n        map((textTitle) => {\n          const date = this.getDate(new Date(isoDate));\n\n          return {\n            title: textTitle,\n            text: [date],\n          };\n        })\n      );\n  }\n\n  getOrderCodeCardContent(orderCode: string): Observable<Card> {\n    return this.translation\n      .translate('checkoutOrderConfirmation.orderNumber')\n      .pipe(\n        filter(() => Boolean(orderCode)),\n        map((textTitle) => ({\n          title: textTitle,\n          text: [orderCode],\n        }))\n      );\n  }\n\n  getOrderCurrentDateCardContent(isoDate?: string): Observable<Card> {\n    return this.translation\n      .translate('checkoutOrderConfirmation.placedOn')\n      .pipe(\n        map((textTitle) => {\n          let date: string;\n\n          if (Boolean(isoDate)) {\n            date = this.getDate(new Date(isoDate));\n          } else {\n            date = this.getDate(new Date());\n          }\n\n          return {\n            title: textTitle,\n            text: [date],\n          };\n        })\n      );\n  }\n\n  getOrderStatusCardContent(status: string): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutOrderConfirmation.status'),\n      this.translation.translate('orderDetails.statusDisplay', {\n        context: status,\n      }),\n    ]).pipe(\n      map(([textTitle, textStatus]) => ({\n        title: textTitle,\n        text: [textStatus],\n      }))\n    );\n  }\n\n  getPurchaseOrderNumber(poNumber: string): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutReview.poNumber'),\n      this.translation.translate('checkoutPO.noPoNumber'),\n    ]).pipe(\n      map(([textTitle, noneTextTitle]) => ({\n        title: textTitle,\n        text: [poNumber ? poNumber : noneTextTitle],\n      }))\n    );\n  }\n\n  getMethodOfPaymentCardContent(\n    hasPaymentInfo: PaymentDetails\n  ): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutProgress.methodOfPayment'),\n      this.translation.translate('paymentTypes.paymentType_ACCOUNT'),\n      this.translation.translate('paymentTypes.paymentType_CARD'),\n    ]).pipe(\n      map(([textTitle, textAccount, textCard]) => ({\n        title: textTitle,\n        text: [Boolean(hasPaymentInfo) ? textCard : textAccount],\n      }))\n    );\n  }\n\n  getCostCenterCardContent(costCenter: CostCenter): Observable<Card> {\n    return this.translation.translate('checkoutPO.costCenter').pipe(\n      filter(() => Boolean(costCenter)),\n      map((textTitle) => ({\n        title: textTitle,\n        textBold: costCenter?.name,\n        text: ['(' + costCenter?.unit?.name + ')'],\n      }))\n    );\n  }\n\n  getAddressCardContent(deliveryAddress: Address): Observable<Card> {\n    return this.translation.translate('addressCard.shipTo').pipe(\n      filter(() => Boolean(deliveryAddress)),\n      map((textTitle) => ({\n        title: textTitle,\n        textBold: `${deliveryAddress.firstName} ${deliveryAddress.lastName}`,\n        text: [deliveryAddress.formattedAddress, deliveryAddress.country.name],\n      }))\n    );\n  }\n\n  getDeliveryModeCardContent(deliveryMode: DeliveryMode): Observable<Card> {\n    return this.translation.translate('checkoutShipping.shippingMethod').pipe(\n      filter(() => Boolean(deliveryMode)),\n      map((textTitle) => ({\n        title: textTitle,\n        textBold: deliveryMode.name,\n        text: [\n          deliveryMode.description,\n          deliveryMode.deliveryCost?.formattedValue\n            ? deliveryMode.deliveryCost?.formattedValue\n            : '',\n        ],\n      }))\n    );\n  }\n\n  getPaymentInfoCardContent(payment: PaymentDetails): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('paymentForm.payment'),\n      this.translation.translate('paymentCard.expires', {\n        month: Boolean(payment) ? payment.expiryMonth : '',\n        year: Boolean(payment) ? payment.expiryYear : '',\n      }),\n    ]).pipe(\n      filter(() => Boolean(payment)),\n      map(([textTitle, textExpires]) => ({\n        title: textTitle,\n        textBold: payment.accountHolderName,\n        text: [payment.cardNumber, textExpires],\n      }))\n    );\n  }\n\n  getBillingAddressCardContent(billingAddress: Address): Observable<Card> {\n    return this.translation.translate('paymentForm.billingAddress').pipe(\n      filter(() => Boolean(billingAddress)),\n      map((textTitle) => ({\n        title: textTitle,\n        textBold: `${billingAddress.firstName} ${billingAddress.lastName}`,\n        text: [billingAddress.formattedAddress, billingAddress.country.name],\n      }))\n    );\n  }\n\n  private getDate(givenDate: Date): string {\n    const date = givenDate.toDateString().split(' ');\n\n    const month = date[1];\n    const day = date[2];\n    const year = date[3];\n\n    return month + ' ' + day + ' ' + year;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { CardModule } from '../card/card.module';\nimport { OrderOverviewComponent } from './order-overview.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, CardModule],\n  declarations: [OrderOverviewComponent],\n  exports: [OrderOverviewComponent],\n})\nexport class OrderOverviewModule {}\n","import {\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { combineLatest, Subscription } from 'rxjs';\nimport { startWith } from 'rxjs/operators';\nimport { FocusConfig } from '../../../layout/a11y/keyboard-focus/keyboard-focus.model';\nimport { LaunchDialogService } from '../../../layout/launch-dialog/services/launch-dialog.service';\n\n@Component({\n  selector: 'cx-replenishment-order-cancellation-dialog',\n  templateUrl: './replenishment-order-cancellation-dialog.component.html',\n})\nexport class ReplenishmentOrderCancellationDialogComponent\n  implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n\n  replenishmentOrderCode: string;\n\n  focusConfig: FocusConfig = {\n    trap: true,\n    block: true,\n    autofocus: 'button',\n    focusOnEscape: true,\n  };\n\n  @HostListener('click', ['$event'])\n  handleClick(event: UIEvent): void {\n    // Close on click outside the dialog window\n    if ((event.target as any).tagName === this.el.nativeElement.tagName) {\n      this.close('Cross click');\n    }\n  }\n\n  constructor(\n    protected userReplenishmentOrderService: UserReplenishmentOrderService,\n    protected globalMessageService: GlobalMessageService,\n    protected launchDialogService: LaunchDialogService,\n    protected el: ElementRef\n  ) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      combineLatest([\n        this.userReplenishmentOrderService\n          .getReplenishmentOrderDetails()\n          .pipe(startWith(null)),\n        this.launchDialogService.data$,\n      ]).subscribe(([replenishmentOrder, code]) => {\n        this.replenishmentOrderCode =\n          code || replenishmentOrder.replenishmentOrderCode;\n      })\n    );\n\n    this.subscription.add(\n      this.userReplenishmentOrderService\n        .getCancelReplenishmentOrderSuccess()\n        .subscribe((value) => this.onSuccess(value))\n    );\n  }\n\n  onSuccess(value: boolean): void {\n    if (value) {\n      this.launchDialogService.closeDialog(\n        'Successffully cancelled replenishment'\n      );\n\n      this.globalMessageService.add(\n        {\n          key: 'orderDetails.cancelReplenishment.cancelSuccess',\n          params: {\n            replenishmentOrderCode: this.replenishmentOrderCode,\n          },\n        },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n    }\n    this.userReplenishmentOrderService.clearCancelReplenishmentOrderProcessState();\n  }\n\n  close(reason: string): void {\n    this.launchDialogService.closeDialog(reason);\n  }\n\n  cancelReplenishment(): void {\n    this.userReplenishmentOrderService.cancelReplenishmentOrder(\n      this.replenishmentOrderCode\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { KeyboardFocusModule } from '../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { ReplenishmentOrderCancellationDialogComponent } from './replenishment-order-cancellation-dialog.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, KeyboardFocusModule],\n  declarations: [ReplenishmentOrderCancellationDialogComponent],\n  entryComponents: [ReplenishmentOrderCancellationDialogComponent],\n  exports: [ReplenishmentOrderCancellationDialogComponent],\n})\nexport class ReplenishmentOrderCancellationDialogModule {}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged, filter, map } from 'rxjs/operators';\nimport { SplitViewState } from './split/split-view.model';\n\n/**\n * Supposed to be injected in the split view component, so that the split view state\n * is maintained for a single split view.\n */\n@Injectable()\nexport class SplitViewService {\n  /**\n   * Newly added views are hidden by default, unless it is the first view of the split view.\n   * The default hide mode can be overridden.\n   */\n  defaultHideMode = true;\n\n  protected splitViewCount = 1;\n\n  protected _views$: BehaviorSubject<any[]> = new BehaviorSubject([]);\n\n  /**\n   * Adds a view to the list of views. The view is initialized with the `SplitViewState`\n   * state. If no state is provided, the state is created with the hidden property. The hidden\n   * property is provided by the `defaultHideMode`, unless it's the first view (position: 0).\n   */\n  add(position: number, initialState?: SplitViewState) {\n    const state: SplitViewState = {\n      ...{ hidden: position === 0 ? false : this.defaultHideMode },\n      ...initialState,\n    };\n    if (!this.views[position]) {\n      this.views[position] = state;\n      this.updateState(position, state.hidden);\n      this._views$.next(this.views);\n    }\n  }\n\n  /**\n   * The split view is based on a number of views that can be used next to each other.\n   * When the number changes (i.e. if the screen goes from wide to small), the visibility state\n   * of the views should be updated.\n   */\n  updateSplitView(splitViewCount: number) {\n    if (splitViewCount !== this.splitViewCount) {\n      this.splitViewCount = splitViewCount;\n      this.updateState();\n    }\n  }\n\n  /**\n   * Returns an observable with the active view number. The active view number\n   * represents the last visible view.\n   */\n  getActiveView(): Observable<number> {\n    return this._views$.pipe(\n      map((views) => this.getActive(views)),\n      distinctUntilChanged()\n    );\n  }\n\n  /**\n   * Returns an observable with the SplitViewState for the given view position.\n   */\n  getViewState(position: number): Observable<SplitViewState> {\n    return this._views$.pipe(\n      map((views) => views[position]),\n      // we must filter here, since outlet driven views will destroyed the view\n      filter((view) => Boolean(view))\n    );\n  }\n\n  /**\n   * Removes a view from the list of views.\n   *\n   * Removing a view is different from hiding a view. Removing a view is typically done\n   * when a component is destroyed.\n   *\n   * When the view is removed, the SplitViewState is updated to reflect that new organization\n   * of views.\n   */\n  remove(position: number) {\n    const activePosition = this.getActive(this.views);\n    this._views$.next(this.views.splice(0, position));\n    if (activePosition >= position) {\n      this.updateState(position);\n    }\n  }\n\n  /**\n   * Returns the next view position. This is useful for views that do not want to be bothered\n   * with controlling view numbers.\n   */\n  get nextPosition(): number {\n    return this.views.length || 0;\n  }\n\n  /**\n   * Toggles the visibility of the views based on the given view position. If the view\n   * is already visible, we close the view and active the former view. Unless the hide flag\n   * is used, to force the view.\n   *\n   * The view state of other views in the split view are updated as well.\n   *\n   * @param position The zero-based position number of the view.\n   * @param forceHide The (optional) hide state for the view position.\n   */\n  toggle(position: number, forceHide?: boolean) {\n    // add the view if it hasn't been added before.\n    if (!this.views[position]) {\n      this.add(position, { hidden: forceHide ?? false });\n    }\n\n    // If the position is already visible, we move to a previous position. Only if the hide\n    // state is forced, we keep the current position.\n    if (\n      this.views[position] &&\n      forceHide === undefined &&\n      !this.views[position].hidden\n    ) {\n      position--;\n    }\n\n    this.updateState(position, forceHide === true);\n  }\n\n  /**\n   * Updates the hidden state of all the views.\n   */\n  protected updateState(position?: number, hide?: boolean) {\n    const views = [...this.views];\n    if (hide !== undefined && views[position]) {\n      views[position].hidden = hide;\n    }\n    let lastVisible =\n      views.length - [...views].reverse().findIndex((view) => !view.hidden) - 1;\n\n    if (lastVisible === views.length) {\n      if (position) {\n        // When there's only 1 view (mobile), we might not find any active\n        // if the user navigates back.\n        lastVisible = position - 1;\n      } else {\n        lastVisible = views.length - 1;\n      }\n    }\n\n    views.forEach((view, pos) => {\n      if (view && pos !== position) {\n        // hide other views that are outside the split view\n        view.hidden =\n          pos > lastVisible || pos < lastVisible - (this.splitViewCount - 1);\n      }\n    });\n\n    this._views$.next(views);\n  }\n\n  /**\n   * Returns the active view count for the list of views.\n   */\n  protected getActive(views: SplitViewState[]): number {\n    // we reverse the list to find the last visible view\n    const l = [...views]\n      .reverse()\n      .findIndex((view: SplitViewState) => !view.hidden);\n    const last = l === -1 ? 0 : views.length - l - 1;\n    return last;\n  }\n\n  /**\n   * Utility method that resolves all views from the subject.\n   */\n  protected get views(): SplitViewState[] {\n    return this._views$.value;\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { BreakpointService } from '../../../../layout/breakpoint/breakpoint.service';\nimport { SplitViewService } from '../split-view.service';\n\n/**\n * The split-view component supports an unlimited number of nested views. The component\n * is a host to those view components and doesn't add any restrictions to it's content;\n * content is projected as-is.\n *\n * ```html\n * <cx-split-view>\n *   <cx-view></cx-view>\n *   <cx-view></cx-view>\n *   <any-wrapper>\n *     <cx-view></cx-view>\n *   </any-wrapper>\n * </cx-split-view>\n * ```\n *\n * The split view component is only concerned with tracking the underlying _visible_\n * view components, so that the `lastVisibleView` can be updated accordingly. The actual\n * visibility of views is controlled by CSS. To allow for maximum flexibility, the CSS\n * implementation is using CSS variables. The `lastVisibleView` is bind to the\n * `--cx-active-view` on the host, so that all descendants views will inherit the\n * property conveniently.\n */\n@Component({\n  selector: 'cx-split-view',\n  templateUrl: './split-view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [SplitViewService],\n})\nexport class SplitViewComponent implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n\n  /**\n   * Sets the default hide mode for views. This mode is useful in case views are dynamically being created,\n   * for example when they are created by router components.\n   *\n   * The mode defaults to true, unless this is the first view; the first view is never hidden.\n   */\n  @Input()\n  set hideMode(mode: boolean) {\n    this.splitService.defaultHideMode = mode;\n  }\n\n  /**\n   * Indicates the last visible view in the range of views that is visible. This\n   * is bind to a css variable `--cx-active-view` so that the experience\n   * can be fully controlled by css.\n   */\n  @HostBinding('style.--cx-active-view')\n  @HostBinding('attr.active-view')\n  lastVisibleView = 1;\n\n  constructor(\n    protected splitService: SplitViewService,\n    protected breakpointService: BreakpointService,\n    protected elementRef: ElementRef\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.splitService\n        .getActiveView()\n        .subscribe(\n          (lastVisible: number) => (this.lastVisibleView = lastVisible + 1)\n        )\n    );\n    this.subscription.add(\n      this.breakpointService.breakpoint$.subscribe(() => {\n        this.splitService.updateSplitView(this.splitViewCount);\n      })\n    );\n  }\n\n  /**\n   * Returns the maximum number of views per split-view. The number is based on the\n   * CSS custom property `--cx-max-views`.\n   */\n  protected get splitViewCount(): number {\n    return Number(\n      getComputedStyle(this.elementRef.nativeElement).getPropertyValue(\n        '--cx-max-views'\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { Subscription, timer } from 'rxjs';\nimport { delayWhen } from 'rxjs/operators';\nimport { SplitViewService } from '../split-view.service';\n\n/**\n * The view component is part of the `SplitViewComponent`. The view\n * contains the navigable content that should be split up. It maintains\n * a view position and allows to show or hide the view.\n *\n * The ViewComponent interacts with the `SplitViewService` for handing over the\n * view state, so that the overarching `SplitViewComponent` can manage the\n * overall experience.\n */\n@Component({\n  selector: 'cx-view',\n  templateUrl: './view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ViewComponent implements OnInit, OnDestroy {\n  protected _hidden;\n\n  @Input()\n  @HostBinding('attr.position')\n  @HostBinding('style.--cx-view-position')\n  position: string;\n\n  /**\n   * The disappeared flag is added to the\n   */\n  @HostBinding('attr.disappeared') disappeared = true;\n\n  /**\n   * The hidden input is used to set the initial visible state of the view.\n   * The hidden state defaults to false.\n   *\n   * The hidden input supports 2-way binding, see `hiddenChange` property.\n   */\n  @Input()\n  set hidden(hidden: boolean) {\n    this._hidden = hidden;\n    this.splitService.toggle(this.viewPosition, hidden);\n  }\n\n  /**\n   * An update of the view visibility is emitted to the hiddenChange output.\n   */\n  @Output()\n  hiddenChange = new EventEmitter();\n\n  protected subscription: Subscription;\n\n  constructor(\n    protected splitService: SplitViewService,\n    protected elementRef: ElementRef,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    const hidden = this._hidden ? { hidden: this._hidden } : {};\n    this.splitService.add(this.viewPosition, hidden);\n\n    this.subscription = this.splitService\n      .getViewState(this.viewPosition)\n      // delay the disappeared state, so that the (CSS driven) animation has time to finish\n      .pipe(delayWhen((view) => timer(view.hidden ? this.duration * 1.25 : 0)))\n      .subscribe((view) => {\n        this.hiddenChange.emit(view.hidden);\n        this._hidden = view.hidden;\n\n        this.disappeared = view.hidden;\n        this.cd.markForCheck();\n      });\n  }\n\n  /**\n   * Toggles the visibility of the view.\n   *\n   * An optional force flag can be used to explicitly show or hide view component.\n   */\n  toggle(force?: boolean) {\n    this.splitService.toggle(this.viewPosition, force);\n  }\n\n  /**\n   * Returns the position for the view.\n   *\n   * The position is either taken from the input `position` or generated by the `SplitService`.\n   */\n  protected get viewPosition(): number {\n    if (!(Number(this.position) >= 0)) {\n      this.position = this.splitService.nextPosition.toString();\n    }\n    return Number(this.position);\n  }\n\n  /**\n   * Returns the duration in milliseconds. The duration is based on the CSS custom property\n   * `--cx-transition-duration`. Defaults to 300 milliseconds.\n   */\n  protected get duration(): number {\n    const duration: string = getComputedStyle(this.elementRef.nativeElement)\n      .getPropertyValue('--cx-transition-duration')\n      .trim();\n\n    if (duration.indexOf('ms') > -1) {\n      return Number(duration.split('ms')[0]);\n    } else if (duration.indexOf('s') > -1) {\n      return Number(duration.split('s')[0]) * 1000;\n    } else {\n      return 300;\n    }\n  }\n\n  /**\n   * The view is removed from the `SplitService` so that the view no longer\n   * plays a role in the overall split view.\n   */\n  ngOnDestroy() {\n    this.splitService.remove(this.viewPosition);\n    this.subscription?.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SplitViewComponent } from './split/split-view.component';\nimport { ViewComponent } from './view/view.component';\n\n/**\n * The split-view component supports an unlimited number of nested views. Nested views are rendered\n * next to each other. The views can be rendered next to each other, but the max number of visible\n * views can be limisted as well. This is configurable in the CSS layer, so that the max number of views\n * per split-view can be different for each component.\n *\n * The basic structure of the split-view component is shown below:\n *\n *\n * ```\n * <cx-split-view>\n * </cx-split-view>\n * ```\n *\n * The UX pattern used for the split-view is driven by an initial view, which gets splitted into\n * more views as soon as the user starts interacting with the initial and subsequantial views.\n * The views can be driven by routes, which means that you can navigate through the splitted views\n * by using the browser history as well as share or bookmark splitted views.\n *\n * The UI is implemented in the style layer, with only a few generic style rules. Most of the split\n * view style is driven by CSS properties, so that alternative split-view styles can be introduced\n * per page or component.\n *\n * The max number of views per split-view on mobile is limited to 1 by default, where as on tablet\n * (and higher) it is set to 2. Spartacus has a pretty narrow layout, which is why 2 is maximum,\n * but customers could alter the layout to bring in more views in the same split-view at the time.\n *\n */\n\n@NgModule({\n  declarations: [SplitViewComponent, ViewComponent],\n  imports: [CommonModule, RouterModule],\n  exports: [SplitViewComponent, ViewComponent],\n})\nexport class SplitViewModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  GlobalMessageEntities,\n  GlobalMessageService,\n  GlobalMessageType,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\n\n@Component({\n  selector: 'cx-global-message',\n  templateUrl: './global-message.component.html',\n})\nexport class GlobalMessageComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  messages$: Observable<GlobalMessageEntities>;\n  messageType: typeof GlobalMessageType = GlobalMessageType;\n\n  constructor(protected globalMessageService: GlobalMessageService) {}\n\n  ngOnInit(): void {\n    this.messages$ = this.globalMessageService.get();\n  }\n\n  clear(type: GlobalMessageType, index: number): void {\n    this.globalMessageService.remove(type, index);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { GlobalMessageComponent } from './global-message.component';\n\n@NgModule({\n  imports: [CommonModule, IconModule, I18nModule],\n  declarations: [GlobalMessageComponent],\n  exports: [GlobalMessageComponent],\n})\nexport class GlobalMessageComponentModule {}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n/**\n * Configuration options for the Qualtrics integration, which allows you to\n * specify the qualtrics project and deployment script.\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class QualtricsConfig {\n  /**\n   * Holds the qualtrics integration options.\n   */\n  qualtrics?: {\n    /**\n     * Deployment script, loaded from a resource, to integrate the deployment of the qualtrics project.\n     * You would typically store the file in the local assets folder.\n     *\n     * Defaults to `assets/qualtricsIntegration.js`\n     */\n    scriptSource?: string;\n  };\n}\n","import {\n  Injectable,\n  isDevMode,\n  Renderer2,\n  RendererFactory2,\n} from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport { fromEvent, Observable, of } from 'rxjs';\nimport { filter, map, switchMap, tap } from 'rxjs/operators';\n\nexport const QUALTRICS_EVENT_NAME = 'qsi_js_loaded';\n\n/**\n * Service to integration Qualtrics.\n *\n * The integration observes the Qualtrics API, and when available, it runs the QSI API\n * to let Qualtrics evaluate the application.\n *\n * The service supports an additional _hook_ (`isDataLoaded()`) that can be used to load application\n * data before pulling the QSI API. This is beneficial in a single page application when additional\n * data is required before the Qualtrics _creatives_ run.\n *\n * This service also supports the creation of the Qualtrics deployment script. This is optional, as\n * the script can be added in alternatives ways.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class QualtricsLoaderService {\n  /**\n   * Reference to the QSI API.\n   */\n  protected qsiApi: any;\n\n  /**\n   * QSI load event that happens when the QSI JS file is loaded.\n   */\n  private qsiLoaded$: Observable<any> = this.winRef?.nativeWindow\n    ? fromEvent(this.winRef.nativeWindow, QUALTRICS_EVENT_NAME)\n    : of();\n\n  /**\n   * Emits the Qualtrics Site Intercept (QSI) JavaScript API whenever available.\n   *\n   * The API is emitted when the JavaScript resource holding this API is fully loaded.\n   * The API is also stored locally in the service, in case it's required later on.\n   */\n  protected qsi$: Observable<any> = this.qsiLoaded$.pipe(\n    switchMap(() => this.isDataLoaded()),\n    map(() => this.winRef?.nativeWindow['QSI']),\n    filter((api) => Boolean(api)),\n    tap((qsi) => (this.qsiApi = qsi))\n  );\n\n  constructor(\n    protected winRef: WindowRef,\n    protected rendererFactory: RendererFactory2\n  ) {\n    this.initialize();\n  }\n\n  /**\n   * Starts observing the Qualtrics integration. The integration is based on a\n   * Qualtrics specific event (`qsi_js_loaded`). As soon as this events happens,\n   * we run the API.\n   */\n  protected initialize() {\n    this.qsi$.subscribe(() => this.run());\n  }\n\n  /**\n   * Evaluates the Qualtrics project code for the application.\n   *\n   * In order to reload the evaluation in Qualtrics, the API requires to unload the API before\n   * running it again. We don't do this by default, but offer a flag to conditionally unload the API.\n   */\n  protected run(reload = false): void {\n    if (!this.qsiApi?.API) {\n      if (isDevMode()) {\n        console.log('The QSI api is not available');\n      }\n      return;\n    }\n\n    if (reload) {\n      // Removes any currently displaying creatives\n      this.qsiApi.API.unload();\n    }\n\n    // Starts the intercept code evaluation right after loading the Site Intercept\n    // code for any defined intercepts or creatives\n    this.qsiApi.API.load().done(this.qsiApi.API.run());\n  }\n\n  /**\n   * Adds the deployment script to the DOM.\n   *\n   * The script will not be added twice if it was loaded before. In that case, we use\n   * the Qualtrics API directly to _unload_ and _run_ the project.\n   */\n  addScript(scriptSource: string): void {\n    if (this.hasScript(scriptSource)) {\n      this.run(true);\n    } else {\n      const script: HTMLScriptElement = this.renderer.createElement('script');\n      script.type = 'text/javascript';\n      script.defer = true;\n      script.src = scriptSource;\n      this.renderer.appendChild(this.winRef.document.body, script);\n    }\n  }\n\n  /**\n   * This logic exist in order to let the client(s) add their own logic to wait for any kind of page data.\n   * You can observe any data in this method.\n   *\n   * Defaults to true.\n   */\n  protected isDataLoaded(): Observable<boolean> {\n    return of(true);\n  }\n\n  /**\n   * Indicates if the script is already added to the DOM.\n   */\n  protected hasScript(source?: string): boolean {\n    return !!this.winRef.document.querySelector(`script[src=\"${source}\"]`);\n  }\n\n  protected get renderer(): Renderer2 {\n    return this.rendererFactory.createRenderer(null, null);\n  }\n}\n","import { Component, isDevMode } from '@angular/core';\nimport { QualtricsConfig } from './config/qualtrics-config';\nimport { QualtricsLoaderService } from './qualtrics-loader.service';\n/**\n * Adds the Qualtrics deployment script whenever the component is loaded. The\n * deployment script is loaded from the global configuration (`qualtrics.scriptSource`).\n */\n@Component({\n  selector: 'cx-qualtrics',\n  template: ``,\n})\nexport class QualtricsComponent {\n  constructor(\n    protected qualtricsLoader: QualtricsLoaderService,\n    protected config: QualtricsConfig\n  ) {\n    if (this.config.qualtrics?.scriptSource) {\n      this.qualtricsLoader.addScript(this.config.qualtrics.scriptSource);\n    } else if (isDevMode()) {\n      console.warn(\n        `We're unable to add the Qualtrics deployment code as there is no script source defined in config.qualtrics.scriptSource.`\n      );\n    }\n  }\n}\n","import { QualtricsConfig } from './qualtrics-config';\n\nexport const defaultQualtricsConfig: QualtricsConfig = {\n  qualtrics: {},\n};\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { defaultQualtricsConfig } from './config/default-qualtrics-config';\nimport { QualtricsComponent } from './qualtrics.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [QualtricsComponent],\n  entryComponents: [QualtricsComponent],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        QualtricsComponent: {\n          component: QualtricsComponent,\n        },\n      },\n    }),\n    provideDefaultConfig(defaultQualtricsConfig),\n  ],\n})\nexport class QualtricsModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\n@Component({\n  selector: 'cx-language-currency-selector',\n  template: `\n    <cx-site-context-selector context=\"language\"></cx-site-context-selector>\n    <cx-site-context-selector context=\"currency\"></cx-site-context-selector>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LanguageCurrencyComponent {}\n","import { Observable } from 'rxjs';\nimport { CmsComponent } from '@spartacus/core';\n\nexport abstract class CmsComponentData<T extends CmsComponent> {\n  uid: string;\n  data$: Observable<T>;\n}\n","import { Injectable, Injector, Optional } from '@angular/core';\nimport {\n  CmsSiteContextSelectorComponent,\n  ContextServiceMap,\n  CURRENCY_CONTEXT_ID,\n  LANGUAGE_CONTEXT_ID,\n  SiteContext,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, switchMap, take } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { SiteContextType } from './site-context.model';\n\nconst LABELS = {\n  [LANGUAGE_CONTEXT_ID]: 'Language',\n  [CURRENCY_CONTEXT_ID]: 'Currency',\n};\n\n@Injectable()\nexport class SiteContextComponentService {\n  constructor(\n    @Optional()\n    protected componentData: CmsComponentData<CmsSiteContextSelectorComponent>,\n    private contextServiceMap: ContextServiceMap,\n    protected injector: Injector\n  ) {}\n\n  getItems(context?: SiteContextType): Observable<any> {\n    return this.getService(context).pipe(\n      switchMap((service: SiteContext<any>) => service.getAll()),\n      switchMap((items) =>\n        this.getContext(context).pipe(\n          switchMap((ctx) => {\n            const itemsCopy = [];\n            for (const item of items) {\n              itemsCopy.push({\n                ...item,\n                label: this.getOptionLabel(item, ctx),\n              });\n            }\n            return of(itemsCopy);\n          })\n        )\n      )\n    );\n  }\n\n  getActiveItem(context?: SiteContextType): Observable<string> {\n    return this.getService(context).pipe(\n      switchMap((service: SiteContext<any>) => service.getActive())\n    );\n  }\n\n  getLabel(context?: SiteContextType): Observable<any> {\n    return this.getContext(context).pipe(\n      map((ctx) => {\n        return LABELS[ctx];\n      })\n    );\n  }\n\n  setActive(value: string, context?: SiteContextType): void {\n    this.getService(context)\n      .pipe(take(1))\n      .subscribe((service) => {\n        service.setActive(value);\n      });\n  }\n\n  protected getService(\n    context?: SiteContextType\n  ): Observable<SiteContext<any>> {\n    return this.getContext(context).pipe(\n      map((ctx: string) => (ctx ? this.getInjectedService(ctx) : undefined)),\n      filter((s) => !!s)\n    );\n  }\n\n  protected getContext(context?: SiteContextType): Observable<string> {\n    if (context) {\n      return of(context);\n    } else if (this.componentData) {\n      return this.componentData.data$.pipe(\n        map((data) => data?.context),\n        map((ctx) => {\n          switch (ctx) {\n            case 'LANGUAGE':\n              return LANGUAGE_CONTEXT_ID;\n            case 'CURRENCY':\n              return CURRENCY_CONTEXT_ID;\n            default:\n              return ctx;\n          }\n        })\n      );\n    }\n  }\n\n  protected getInjectedService(context: string): SiteContext<any> {\n    return this.injector.get<SiteContext<any>>(\n      this.contextServiceMap[context],\n      null\n    );\n  }\n\n  protected getOptionLabel(item: any, context?: string): string {\n    switch (context) {\n      case LANGUAGE_CONTEXT_ID:\n        return item.nativeName;\n      case CURRENCY_CONTEXT_ID:\n        return item.symbol + ' ' + item.isocode;\n      default:\n        return item.isocode;\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { SiteContext } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../icon/icon.model';\nimport { SiteContextComponentService } from './site-context-component.service';\nimport { SiteContextType } from './site-context.model';\n\n@Component({\n  selector: 'cx-site-context-selector',\n  templateUrl: './site-context-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SiteContextSelectorComponent {\n  siteContextService: SiteContext<any>;\n  iconTypes = ICON_TYPE;\n  /**\n   * the context type can be set as an input. If the context is\n   * not given, the context will be loaded from the backend.\n   */\n  @Input() context: SiteContextType;\n\n  constructor(private componentService: SiteContextComponentService) {}\n\n  get items$(): Observable<any> {\n    return this.componentService.getItems(this.context);\n  }\n\n  get activeItem$(): Observable<string> {\n    return this.componentService.getActiveItem(this.context);\n  }\n\n  set active(value: string) {\n    this.componentService.setActive(value, this.context);\n  }\n\n  get label$(): Observable<any> {\n    return this.componentService.getLabel(this.context);\n  }\n}\n","export enum SiteContextType {\n  LANGUAGE = 'LANGUAGE',\n  CURRENCY = 'CURRENCY',\n}\n","import { CommonModule } from '@angular/common';\nimport { Injector, NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  ContextServiceMap,\n  provideDefaultConfig,\n  SiteContextModule,\n} from '@spartacus/core';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { IconModule } from '../icon/index';\nimport { LanguageCurrencyComponent } from './language-currency.component';\nimport { SiteContextComponentService } from './site-context-component.service';\nimport { SiteContextSelectorComponent } from './site-context-selector.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, SiteContextModule, IconModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSSiteContextComponent: {\n          component: SiteContextSelectorComponent,\n          providers: [\n            {\n              provide: SiteContextComponentService,\n              useClass: SiteContextComponentService,\n              deps: [CmsComponentData, ContextServiceMap, Injector],\n            },\n          ],\n        },\n        LanguageCurrencyComponent: {\n          component: LanguageCurrencyComponent,\n        },\n      },\n    }),\n    SiteContextComponentService,\n  ],\n  declarations: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n  entryComponents: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n  exports: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n})\nexport class SiteContextSelectorModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  Output,\n} from '@angular/core';\nimport { ICON_TYPE } from '../../../cms-components/misc/index';\n\n/**\n * Star rating component can be used to view existing ratings as well\n * as create new ratings. The component can be used for any ratings.\n */\n@Component({\n  selector: 'cx-star-rating',\n  templateUrl: './star-rating.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class StarRatingComponent {\n  protected initialRate = 0;\n\n  icon = ICON_TYPE.STAR;\n\n  /**\n   * The rating component can be used in disabled mode,\n   * so that the interaction is not provided.\n   *\n   * Defaults to true.\n   */\n  @Input() @HostBinding('attr.disabled') disabled = true;\n\n  /**\n   * The rating is used to color the rating stars. It can have a\n   * precise number. The rating number is used for a CSS custom property\n   * (AKA css variable) value. The actually coloring is done in CSS.\n   */\n  @Input()\n  @HostBinding('style.--star-fill')\n  rating: number = this.initialRate;\n\n  /**\n   * Emits the given rating when the user clicks on a star.\n   */\n  // tslint:disable-next-line:no-output-native\n  @Output() change = new EventEmitter<number>();\n\n  setRate(value: number): void {\n    if (this.disabled) {\n      return;\n    }\n    this.rating = value;\n  }\n\n  @HostListener('mouseout')\n  reset() {\n    if (this.disabled) {\n      return;\n    }\n    this.rating = this.initialRate ?? 0;\n  }\n\n  saveRate(rating: number): void {\n    if (this.disabled) {\n      return;\n    }\n    this.initialRate = rating;\n    this.setRate(rating);\n    this.change.emit(rating);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IconModule } from '../../../cms-components/misc/index';\nimport { StarRatingComponent } from './star-rating.component';\n\n@NgModule({\n  imports: [CommonModule, IconModule],\n  declarations: [StarRatingComponent],\n  exports: [StarRatingComponent],\n})\nexport class StarRatingModule {}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport { OutletContextData } from '../../../../cms-structure/outlet/outlet.model';\nimport { TableHeaderOutletContext } from '../table.model';\n\n@Component({\n  selector: 'cx-table-data-cell',\n  template: `{{ value }}`,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TableDataCellComponent {\n  constructor(protected outlet: OutletContextData<TableHeaderOutletContext>) {}\n\n  @HostBinding('attr.title')\n  get value(): string {\n    return this.model[this.field];\n  }\n\n  protected get model(): any {\n    return this.outlet?.context;\n  }\n\n  protected get field(): string {\n    return this.outlet?.context?._field;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { OutletContextData } from '../../../../cms-structure/outlet/outlet.model';\nimport {\n  TableFieldOptions,\n  TableHeader,\n  TableHeaderOutletContext,\n} from '../table.model';\n\n@Component({\n  selector: 'cx-table-header-cell',\n  template: `{{ header || (localizedHeader | cxTranslate) }}`,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TableHeaderCellComponent {\n  constructor(protected outlet: OutletContextData<TableHeaderOutletContext>) {}\n\n  /**\n   * Returns the static label for the given field, if available.\n   */\n  get header(): string {\n    if (typeof this.fieldOptions?.label === 'string') {\n      return <string>this.fieldOptions.label;\n    }\n  }\n\n  /**\n   * Returns the localized label for the given field.\n   *\n   * The localized label is either driven by the configured `label.i18nKey`\n   * or concatenated by the table `type` and field `key`:\n   *\n   * `[tableType].[fieldKey]`\n   *\n   * The localized header can be translated with the `cxTranslate` pipe or `TranslationService`.\n   */\n  get localizedHeader(): string {\n    return (\n      (this.fieldOptions?.label as TableHeader)?.i18nKey ||\n      `${this.i18nRoot}.${this.field}`\n    );\n  }\n\n  protected get fieldOptions(): TableFieldOptions {\n    return this.outlet?.context._options?.cells?.[this.field];\n  }\n\n  protected get field(): string {\n    return this.outlet?.context?._field;\n  }\n\n  protected get type(): string {\n    return this.outlet?.context?._type;\n  }\n\n  protected get i18nRoot(): string {\n    return this.outlet?.context?._i18nRoot;\n  }\n}\n","import { TableDataCellComponent } from '../table-data-cell/table-data-cell.component';\nimport { TableHeaderCellComponent } from '../table-header-cell/table-header-cell.component';\nimport { TableConfig } from './table.config';\n\nexport const defaultTableConfig: TableConfig = {\n  tableOptions: {\n    headerComponent: TableHeaderCellComponent,\n    dataComponent: TableDataCellComponent,\n  },\n};\n","import { Injectable, Type } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { BREAKPOINT } from '../../../../layout/config/layout-config';\nimport { TableStructureConfiguration } from '../table.model';\n\n/**\n * The `TableConfig` provides a table configurations for specific table types. You can define\n * an all-screen table structure as well as a breakpoint specific table structure. The various\n * table structures are merged from small to large screen configurations, depending on the users\n * screen size.\n *\n * The `table.type` is used as a key to distinguish the various table configurations in the application.\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class TableConfig {\n  table?: {\n    [tableType: string]: ResponsiveTableConfiguration;\n  };\n  tableOptions?: {\n    /**\n     * Global component to render table header _content_ (`<th>...</th>`). A specific component\n     * can be configured alternatively per table or table field.\n     */\n    headerComponent?: Type<any>;\n\n    /**\n     * Global component to render table cell _content_ (`<td>...</td>`). A specific component per\n     * field can be configured alternatively.\n     *\n     * If no component is available, the table content will render as-is.\n     */\n    dataComponent?: Type<any>;\n  };\n}\n\n/**\n * Helper configuration to introduce breakpoint specific table configuration.\n */\nexport interface ResponsiveTableConfiguration\n  extends TableStructureConfiguration {\n  /** The table configurations for all screens */\n  [BREAKPOINT.xl]?: TableStructureConfiguration;\n  /** The table configurations for large screens and smaller */\n  [BREAKPOINT.lg]?: TableStructureConfiguration;\n  /** The table configurations for medium screens and smaller */\n  [BREAKPOINT.md]?: TableStructureConfiguration;\n  /** The table configurations for small screens and smaller */\n  [BREAKPOINT.sm]?: TableStructureConfiguration;\n  /** The table configurations for extra small screens */\n  [BREAKPOINT.xs]?: TableStructureConfiguration;\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TableDataCellComponent } from './table-data-cell.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [TableDataCellComponent],\n})\nexport class TableDataCellModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { TableHeaderCellComponent } from './table-header-cell.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  declarations: [TableHeaderCellComponent],\n})\nexport class TableHeaderCellModule {}\n","import { Type } from '@angular/core';\nimport { PaginationModel } from '@spartacus/core';\n\n/**\n * Contains the table data and structure for the `TableComponent`.\n */\nexport interface Table<T = any> {\n  /**\n   * The table structure provides details about the headers of the table.\n   */\n  structure: TableStructure;\n\n  /**\n   * The data that is listed in the table component.\n   */\n  data: T[];\n\n  /**\n   * The pagination component is used to paginate through the data.\n   */\n  pagination?: PaginationModel;\n\n  /**\n   * The sort options for the table.\n   */\n  sorts?: any[];\n}\n\nexport interface TableStructureConfiguration {\n  /**\n   * Provide the bare structure of the table.\n   */\n  cells?: string[];\n\n  /**\n   * Global table structure options.\n   */\n  options?: TableOptions;\n}\n\nexport interface TableOptions {\n  /**\n   * Default pagination for the table that is used for the initial load of the table data.\n   */\n  pagination?: PaginationModel;\n\n  /**\n   * The layout for the table component can be used for horizontal, vertical and vertical stacked\n   * table layouts.\n   */\n  layout?: TableLayout;\n\n  /**\n   * Global component to render table header _content_ (`<th>...</th>`). A specific component per\n   * field can be configured alternatively.\n   *\n   * If no component is available, the table component will render a static label or use the\n   * configured i18n label.\n   */\n  headerComponent?: Type<any>;\n\n  /**\n   * Global component to render table cell _content_ (`<td>...</td>`). A specific component per\n   * field can be configured alternatively.\n   *\n   * If no component is available, the table content will render as-is.\n   */\n  dataComponent?: Type<any>;\n\n  // field specific options\n  cells?: {\n    [fieldKey: string]: TableFieldOptions;\n  };\n}\n\n/**\n * Layout orientation for the table configuration.\n */\nexport enum TableLayout {\n  /**\n   * Renders the table vertically, with a heading on top of the table.\n   *\n   * Vertical layout is most common and the default layout.\n   */\n  VERTICAL = 1,\n\n  /**\n   * Stacks items in a tables by generating a `tbody` for each item.\n   */\n  VERTICAL_STACKED,\n\n  /**\n   * Horizontal oriented table layout renders the table headers in the first column of the table.\n   */\n  HORIZONTAL,\n}\n\nexport interface TableFieldOptions {\n  /**\n   * Optional label to add static or localized headers. If the label is not present, the\n   * field key is mapped to a i18n property.\n   */\n  label?: string | TableHeader;\n\n  /**\n   * Indicates wether the cell is linkable.\n   *\n   * If the cells is linkable, an anchor link can be generated in the table data element.\n   */\n  linkable?: boolean;\n\n  /**\n   * Component to render table header _content_ (`<th>...</th>`) for the table field.\n   *\n   * If no component is configured, the global table component for the header will be used\n   * instead.\n   */\n  headerComponent?: Type<any>;\n\n  /**\n   * Component to render table data _content_ (`<td>...</td>`) for the table field.\n   *\n   * If no component is configured, the global table component for the cell data will be used\n   * instead.\n   */\n  dataComponent?: Type<any>;\n}\n\n/**\n * The TableStructure holds the header structure of the table.\n */\nexport interface TableStructure extends TableStructureConfiguration {\n  /**\n   * The table type is a mandatory property. The type is used to identify the table\n   * configuration and is used to generate a unique outlet reference.\n   */\n  type: string;\n}\n\n/**\n * Provides the core table structure, typically being used to render table columns.\n */\nexport interface TableHeader {\n  /**\n   * The header key is used to:\n   * - generate a unique class on each table row\n   * - generate a template for each table header cell and data cell\n   * - translate the key using the translate module\n   *   (fallback in case there is no label available)\n   */\n  i18nKey?: string;\n\n  // deprecated\n  sortCode?: string;\n}\n\nexport interface TableHeaderOutletContext {\n  _type: string;\n  _field: string;\n  _options?: TableOptions;\n  /**\n   * The i18nRoot is used to build localized table headers. The i18nRoot\n   * is used as a prefix for the `_field`. Table header labels wil use the\n   * following locales:\n   *\n   * `[i18nRoot].[_field]`\n   */\n  _i18nRoot?: string;\n}\n\n// tslint:disable-next-line: no-empty-interface\nexport interface TableDataOutletContext extends TableHeaderOutletContext {\n  [property: string]: any;\n}\n","import { ComponentFactoryResolver, Injectable, Type } from '@angular/core';\nimport { OutletService } from '../../../cms-structure/outlet/outlet.service';\nimport { TableConfig } from './config/table.config';\nimport {\n  TableDataOutletContext,\n  TableHeaderOutletContext,\n  TableOptions,\n  TableStructure,\n} from './table.model';\n\n/**\n * The table renderer service adds a component for each table cells (th and td)\n * based on a fine grained configuration. Each table type can configure both global\n * components for headers and cells as well as individual components for field\n * specific cells.\n *\n * The components are added to the outlet slots for the corresponding cells. The table\n * structure and data is added to the outlet context.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class TableRendererService {\n  // keep a list of outletRefs to avoid recreation\n  protected outletRefs = new Map();\n\n  constructor(\n    protected outletService: OutletService,\n    protected componentFactoryResolver: ComponentFactoryResolver,\n    protected config: TableConfig\n  ) {}\n\n  /**\n   * Adds the configured table component for the header and data.\n   */\n  add(structure: TableStructure): void {\n    structure?.cells?.forEach((field) => {\n      const thRenderer = this.getHeaderRenderer(structure, field);\n      if (thRenderer) {\n        const ref = this.getHeaderOutletRef(structure.type, field);\n        this.render(ref, thRenderer);\n      }\n      const tdRenderer = this.getDataRenderer(structure, field);\n      if (tdRenderer) {\n        const ref = this.getDataOutletRef(structure.type, field);\n        this.render(ref, tdRenderer);\n      }\n    });\n  }\n\n  protected render(outletRef: string, renderer: Type<any>) {\n    if (this.outletRefs.has(outletRef)) {\n      return;\n    }\n    this.outletRefs.set(outletRef, true);\n    const template = this.componentFactoryResolver.resolveComponentFactory(\n      renderer\n    );\n    this.outletService.add(outletRef, <any>template);\n  }\n\n  /**\n   * Returns the header render component for the given field.\n   */\n  protected getHeaderRenderer(\n    structure: TableStructure,\n    field: string\n  ): Type<any> {\n    return (\n      structure.options?.cells?.[field]?.headerComponent ||\n      structure.options?.headerComponent ||\n      this.config.tableOptions?.headerComponent\n    );\n  }\n\n  /**\n   * Returns the data render component for the given field.\n   */\n  protected getDataRenderer(\n    structure: TableStructure,\n    field: string\n  ): Type<any> {\n    return (\n      structure.options?.cells?.[field]?.dataComponent ||\n      structure.options?.dataComponent ||\n      this.config.tableOptions?.dataComponent\n    );\n  }\n\n  /**\n   * Returns the header (th) outlet reference for the given field.\n   *\n   * The outlet reference is generated as:\n   * `table.[tableType].header.[field]`\n   */\n  getHeaderOutletRef(type: string, field: string): string {\n    return `table.${type}.header.${field}`;\n  }\n\n  /**\n   * Returns the header (th) outlet context for the given field.\n   */\n  getHeaderOutletContext(\n    type: string,\n    options: TableOptions,\n    i18nRoot: string,\n    field: string\n  ): TableHeaderOutletContext {\n    return {\n      _type: type,\n      _options: options,\n      _field: field,\n      _i18nRoot: i18nRoot,\n    };\n  }\n\n  /**\n   * Returns the data (td) outlet reference for the given field.\n   *\n   * The field is generated as:\n   * `table.[tableType].data.[tableField]`\n   */\n  getDataOutletRef(type: string, field: string): string {\n    return `table.${type}.data.${field}`;\n  }\n\n  /**\n   * Returns the data (td) outlet context for the given field.\n   */\n  getDataOutletContext(\n    type: string,\n    options: TableOptions,\n    i18nRoot: string,\n    field: string,\n    data: any\n  ): TableDataOutletContext {\n    return {\n      ...data,\n      _type: type,\n      _options: options,\n      _field: field,\n      _i18nRoot: i18nRoot,\n    };\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  HostBinding,\n  Input,\n  isDevMode,\n  Output,\n} from '@angular/core';\nimport { TableRendererService } from './table-renderer.service';\nimport {\n  TableDataOutletContext,\n  TableHeaderOutletContext,\n  TableLayout,\n  TableStructure,\n} from './table.model';\n\n/**\n * The table component provides a generic table DOM structure, with 3 layout types:\n * horizontal, vertical and _stacked vertical_ layout. The layout is driven by the\n * table structure.\n *\n * The implementation is fairly \"dumb\" and only renders string based content for TH\n * and TD elements. The actual cell rendering is delegated to a (configurable) cell\n * component. Additionally, each cell is registered as an outlet, so that customizations\n * can be done by both outlet templates and components.\n *\n * The outlet references are concatenated from the table `type` and header `key`. The\n * following snippet shows an outlet generated for a table header, for the table type\n * \"cost-center\" with a header key \"name\":\n *\n * ```\n * <th>\n *   <template cxOutlet=\"table.cost-center.header.name\">\n *   </template>\n * </th>\n * ```\n *\n * Similarly, the data cells (`<td>`) are generated with the outlet template reference\n * `table.cost-center.data.name`.\n */\n@Component({\n  selector: 'cx-table',\n  templateUrl: './table.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TableComponent<T> {\n  @HostBinding('attr.__cx-table-type') tableType: string;\n  @HostBinding('class.horizontal') horizontalLayout: boolean;\n  @HostBinding('class.vertical') verticalLayout: boolean;\n  @HostBinding('class.vertical-stacked') verticalStackedLayout: boolean;\n\n  private _structure: TableStructure;\n  @Input() set structure(structure: TableStructure) {\n    this._structure = structure;\n    this.init();\n  }\n  get structure(): TableStructure {\n    return this._structure;\n  }\n\n  @Input() data: T[];\n\n  /**\n   * The i18nRoot is passed into the table cell context, so that\n   * cell components can concatenate the i18n root and label.\n   */\n  @Input() i18nRoot: string;\n\n  /**\n   * Provides a mechanism to compare a matching value for each item.\n   *\n   * The `property` refers to the dataset.value property, and the value tot the\n   * matching property value.\n   */\n  @Input() currentItem: { value: any; property: string };\n\n  @Output() launch = new EventEmitter();\n\n  constructor(protected rendererService: TableRendererService) {}\n\n  init() {\n    this.verticalLayout = !this.layout || this.layout === TableLayout.VERTICAL;\n    this.verticalStackedLayout = this.layout === TableLayout.VERTICAL_STACKED;\n    this.horizontalLayout = this.layout === TableLayout.HORIZONTAL;\n\n    this.rendererService.add(this.structure);\n\n    this.addTableDebugInfo();\n  }\n\n  launchItem(item: any): void {\n    this.launch.emit(item);\n  }\n\n  /**\n   * Indicates whether the given item is the current item.\n   *\n   * The current item is driven by the `currentItem`, that holds a\n   * property and value to compare.\n   */\n  isCurrentItem(item: any): boolean {\n    if (!this.currentItem || !this.currentItem.value) {\n      return false;\n    }\n    return this.currentItem?.value === item?.[this.currentItem?.property];\n  }\n\n  /**\n   * Returns the header (th) outlet reference for the given field.\n   */\n  getHeaderOutletRef(field: string): string {\n    return this.rendererService.getHeaderOutletRef(this.type, field);\n  }\n\n  /**\n   * Returns the header (th) outlet context for the given field.\n   */\n  getHeaderOutletContext(field: string): TableHeaderOutletContext {\n    return this.rendererService.getHeaderOutletContext(\n      this.type,\n      this.options,\n      this.i18nRoot,\n      field\n    );\n  }\n\n  /**\n   * Returns the data (td) outlet reference for the given field.\n   */\n  getDataOutletRef(field: string): string {\n    return this.rendererService.getDataOutletRef(this.type, field);\n  }\n\n  /**\n   * Returns the data (td) outlet context for the given field.\n   */\n  getDataOutletContext(field: string, data: any): TableDataOutletContext {\n    return this.rendererService.getDataOutletContext(\n      this.type,\n      this.options,\n      this.i18nRoot,\n      field,\n      data\n    );\n  }\n\n  trackData(_i: number, item: any): any {\n    return JSON.stringify(item);\n  }\n\n  /**\n   * Generates the table type into the UI in devMode, so that developers\n   * can easily get the notion of the table type.\n   */\n  protected addTableDebugInfo() {\n    if (isDevMode() && this.type) {\n      this.tableType = this.type;\n    }\n  }\n\n  /**\n   * Helper method to return the deeply nested orientation configuration.\n   */\n  private get layout() {\n    return this.structure?.options?.layout;\n  }\n\n  /**\n   * Helper method to return the deeply nested type.\n   */\n  private get type() {\n    return this.structure?.type;\n  }\n\n  private get options() {\n    return this.structure?.options;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { provideConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { defaultTableConfig } from './config/default-table.config';\nimport { TableDataCellModule } from './table-data-cell/table-data-cell.module';\nimport { TableHeaderCellModule } from './table-header-cell/table-header-cell.module';\nimport { TableComponent } from './table.component';\n\n/**\n * The TableModule provides a table component that is driven by (responsible) configuration.\n */\n@NgModule({\n  imports: [\n    CommonModule,\n    OutletModule,\n    TableHeaderCellModule,\n    TableDataCellModule,\n  ],\n  declarations: [TableComponent],\n  exports: [TableComponent],\n  providers: [provideConfig(defaultTableConfig)],\n})\nexport class TableModule {}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { BreakpointService } from '../../../layout/breakpoint/breakpoint.service';\nimport { BREAKPOINT } from '../../../layout/config/layout-config';\nimport {\n  ResponsiveTableConfiguration,\n  TableConfig,\n} from './config/table.config';\nimport { TableStructure, TableStructureConfiguration } from './table.model';\n\n/**\n * Responsive table service.\n *\n * The `TableService` is used to build a `TableStructure` by configuration. The configuration\n * allows for breakpoint specific configuration, so that the table can differentiate for\n * various screen sizes.\n *\n * While there are some global options, the configuration is mainly driven by the table _type_.\n *\n * If there is no table configuration for the given type found, a table header structure\n * is generated based on the actual data (if available) or randomly by generating 5 random headers.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class TableService {\n  constructor(\n    protected breakpointService: BreakpointService,\n    protected config: TableConfig\n  ) {}\n\n  /**\n   * Builds the table structure.\n   *\n   * @param tableType The table type is used  to find the specific table configuration.\n   * @param defaultStructure (optional) Default table structure that contains fallback options. More specific options are merged with the default structure.\n   * @param data$ (optional) The actual data can be passed in to generate the table structure based on actual data.\n   */\n  buildStructure(\n    tableType: string,\n    defaultStructure?: ResponsiveTableConfiguration\n  ): Observable<TableStructure> {\n    if (this.hasTableConfig(tableType)) {\n      return this.buildStructureFromConfig(tableType, defaultStructure);\n    } else {\n      return this.buildRandomStructure(tableType);\n    }\n  }\n\n  /**\n   * Returns the table structure by configuration. The configuration can be\n   * breakpoint-driven, which means that an alternative header structure can\n   * be created per screen size.\n   *\n   * The breakpoint is resolved by teh `BreakpointService`.\n   */\n  protected buildStructureFromConfig(\n    type: string,\n    defaultStructure?: ResponsiveTableConfiguration\n  ): Observable<TableStructure> {\n    return this.breakpointService.breakpoint$.pipe(\n      map((breakpoint) => ({\n        ...this.getTableConfig(type, breakpoint, defaultStructure),\n        type,\n      }))\n    );\n  }\n\n  /**\n   * Finds all applicable table configuration for the given type and breakpoint.\n   * The default table configuration is merged with all relevant breakpoint\n   * configurations.\n   *\n   * This allows to have some default configurations that apply to all screens, and\n   * add configuration options for some screens.\n   */\n  protected getTableConfig(\n    type: string,\n    breakpoint: BREAKPOINT,\n    defaultStructure?: ResponsiveTableConfiguration\n  ): TableStructureConfiguration {\n    if (!this.config.table?.[type]) {\n      return null;\n    }\n\n    const relevant = this.findRelevantBreakpoints(breakpoint);\n\n    const closestBreakpoint = [...relevant]\n      .reverse()\n      .find((br) => !!this.config.table[type][br]?.cells);\n    const cells =\n      this.config.table[type][closestBreakpoint]?.cells ||\n      this.config.table[type].cells ||\n      defaultStructure?.cells;\n\n    // add all default table configurations\n    let options = {\n      ...defaultStructure?.options,\n      ...this.config.table[type].options,\n    };\n\n    // We merge all table options for smaller breakpoints into the global\n    // options, so we inherit options.\n    relevant.forEach((br) => {\n      options = {\n        ...options,\n        ...defaultStructure?.[br]?.options,\n        ...this.config.table[type]?.[br]?.options,\n      };\n    });\n\n    return { cells, options };\n  }\n\n  /**\n   * Generates the table structure by the help of the first data row.\n   */\n  protected buildStructureFromData(\n    type: string,\n    data$: Observable<any>\n  ): Observable<TableStructure> {\n    this.logWarning(\n      `No table configuration found to render table with type \"${type}\". The table header for \"${type}\" is generated by the help of the first data item`\n    );\n    return data$.pipe(\n      map((data: any[]) => {\n        const cells = Object.keys(data?.[0]).map((key) => key);\n        return { type, cells } as TableStructure;\n      })\n    );\n  }\n\n  /**\n   * As a last resort, the table structure is randomly created. The random structure\n   * contains 5 headers, so that some of the unknown data is visualized.\n   */\n  protected buildRandomStructure(type: string): Observable<TableStructure> {\n    this.logWarning(\n      `No data available for \"${type}\", a random structure is generated (with hidden table headers).`\n    );\n    return of({\n      type,\n      cells: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown'],\n    });\n  }\n\n  /**\n   * Finds all the breakpoints can contribute to the table configuration, from small\n   * to current.\n   *\n   * For example, if the current breakpoint is `MD`, this returns `[XS, SM, MD]`.\n   */\n  protected findRelevantBreakpoints(breakpoint: BREAKPOINT): BREAKPOINT[] {\n    const current = this.breakpointService.breakpoints.indexOf(breakpoint);\n    return this.breakpointService.breakpoints.slice(0, current + 1);\n  }\n\n  /**\n   * Indicates if the there is a configuration for the table available.\n   */\n  protected hasTableConfig(tableType: string): boolean {\n    return !!this.config.table?.[tableType];\n  }\n\n  /**\n   * Logs a message in the console to increase developer experience.\n   *\n   * The message is only logged in dev mode.\n   */\n  private logWarning(message) {\n    if (isDevMode()) {\n      console.warn(message);\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class ViewConfig {\n  view?: {\n    /**\n     * Configurations related to the view of the application\n     */\n    infiniteScroll?: {\n      active?: boolean;\n      productLimit?: number;\n      showMoreButton?: boolean;\n    };\n  };\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\n\n@NgModule({})\nexport class ViewConfigModule {\n  static forRoot(): ModuleWithProviders<ViewConfigModule> {\n    return {\n      ngModule: ViewConfigModule,\n      providers: [\n        provideDefaultConfig({\n          view: {},\n        }),\n      ],\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Order, RoutingService, UserOrderService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  map,\n  shareReplay,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderDetailsService {\n  orderCode$: Observable<string>;\n  orderLoad$: Observable<{}>;\n\n  constructor(\n    private userOrderService: UserOrderService,\n    private routingService: RoutingService\n  ) {\n    this.orderCode$ = this.routingService.getRouterState().pipe(\n      map((routingData) => routingData.state.params.orderCode),\n      distinctUntilChanged()\n    );\n\n    this.orderLoad$ = this.orderCode$.pipe(\n      tap((orderCode) => {\n        if (orderCode) {\n          this.userOrderService.loadOrderDetails(orderCode);\n        } else {\n          this.userOrderService.clearOrderDetails();\n        }\n      }),\n      shareReplay({ bufferSize: 1, refCount: true })\n    );\n  }\n\n  getOrderDetails(): Observable<Order> {\n    return this.orderLoad$.pipe(\n      switchMap(() => this.userOrderService.getOrderDetails())\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  ActiveCartService,\n  Cart,\n  CheckoutService,\n  Order,\n  OrderEntry,\n  PromotionLocation,\n  PromotionResult,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { OrderDetailsService } from '../../../cms-components/myaccount/order/order-details/order-details.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PromotionService {\n  constructor(\n    protected orderDetailsService: OrderDetailsService,\n    protected checkoutService: CheckoutService,\n    protected activeCartService: ActiveCartService\n  ) {}\n\n  getOrderPromotions(\n    promotionLocation: PromotionLocation\n  ): Observable<PromotionResult[]> {\n    switch (promotionLocation) {\n      case PromotionLocation.ActiveCart:\n        return this.getOrderPromotionsFromCart();\n      case PromotionLocation.Checkout:\n        return this.getOrderPromotionsFromCheckout();\n      case PromotionLocation.Order:\n        return this.getOrderPromotionsFromOrder();\n      default:\n        return of([]);\n    }\n  }\n\n  getOrderPromotionsFromCart(): Observable<PromotionResult[]> {\n    return this.activeCartService\n      .getActive()\n      .pipe(map((cart) => this.getOrderPromotionsFromCartHelper(cart)));\n  }\n\n  private getOrderPromotionsFromCartHelper(cart: Cart): PromotionResult[] {\n    const potentialPromotions = [];\n    potentialPromotions.push(...(cart.potentialOrderPromotions || []));\n\n    const appliedPromotions = [];\n    appliedPromotions.push(...(cart.appliedOrderPromotions || []));\n\n    return [...potentialPromotions, ...appliedPromotions];\n  }\n\n  getOrderPromotionsFromCheckout(): Observable<PromotionResult[]> {\n    return this.checkoutService\n      .getOrderDetails()\n      .pipe(map((order) => this.getOrderPromotionsFromOrderHelper(order)));\n  }\n\n  getOrderPromotionsFromOrder(): Observable<PromotionResult[]> {\n    return this.orderDetailsService\n      .getOrderDetails()\n      .pipe(map((order) => this.getOrderPromotionsFromOrderHelper(order)));\n  }\n\n  private getOrderPromotionsFromOrderHelper(order: Order): PromotionResult[] {\n    const appliedOrderPromotions = [];\n    appliedOrderPromotions.push(...(order.appliedOrderPromotions || []));\n\n    return appliedOrderPromotions;\n  }\n\n  getProductPromotionForEntry(\n    item: OrderEntry,\n    promotionLocation: PromotionLocation\n  ): Observable<PromotionResult[]> {\n    switch (promotionLocation) {\n      case PromotionLocation.ActiveCart:\n        return this.activeCartService\n          .getActive()\n          .pipe(\n            map((cart) =>\n              this.getProductPromotion(\n                item,\n                cart.appliedProductPromotions || []\n              )\n            )\n          );\n      case PromotionLocation.Checkout:\n        return this.checkoutService\n          .getOrderDetails()\n          .pipe(\n            map((order) =>\n              this.getProductPromotion(\n                item,\n                order.appliedProductPromotions || []\n              )\n            )\n          );\n      case PromotionLocation.Order:\n        return this.orderDetailsService\n          .getOrderDetails()\n          .pipe(\n            map((order) =>\n              this.getProductPromotion(\n                item,\n                order.appliedProductPromotions || []\n              )\n            )\n          );\n    }\n  }\n\n  private getProductPromotion(\n    item: OrderEntry,\n    promotions: PromotionResult[]\n  ): PromotionResult[] {\n    const entryPromotions: PromotionResult[] = [];\n    if (promotions && promotions.length > 0) {\n      for (const promotion of promotions) {\n        if (\n          promotion.description &&\n          promotion.consumedEntries &&\n          promotion.consumedEntries.length > 0\n        ) {\n          for (const consumedEntry of promotion.consumedEntries) {\n            if (this.isConsumedByEntry(consumedEntry, item)) {\n              entryPromotions.push(promotion);\n            }\n          }\n        }\n      }\n    }\n    return entryPromotions;\n  }\n\n  private isConsumedByEntry(consumedEntry: any, entry: any): boolean {\n    const consumedEntryNumber = consumedEntry.orderEntryNumber;\n    if (entry.entries && entry.entries.length > 0) {\n      for (const subEntry of entry.entries) {\n        if (subEntry.entryNumber === consumedEntryNumber) {\n          return true;\n        }\n      }\n      return false;\n    } else {\n      return consumedEntryNumber === entry.entryNumber;\n    }\n  }\n}\n","import {\n  AbstractControl,\n  FormGroup,\n  ValidationErrors,\n  ValidatorFn,\n} from '@angular/forms';\nimport { EMAIL_PATTERN, PASSWORD_PATTERN } from '@spartacus/core';\n\nexport class CustomFormValidators {\n  /**\n   * Checks control's value with predefined email regexp\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxInvalidEmail' validator error\n   * @memberof CustomFormValidators\n   */\n  static emailValidator(control: AbstractControl): ValidationErrors | null {\n    const email = control.value as string;\n\n    return email && (!email.length || email.match(EMAIL_PATTERN))\n      ? null\n      : { cxInvalidEmail: true };\n  }\n\n  /**\n   * Checks control's value with predefined password regexp\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxInvalidPassword' validator error\n   * @memberof CustomFormValidators\n   */\n  static passwordValidator(control: AbstractControl): ValidationErrors | null {\n    const password = control.value as string;\n\n    return password && (!password.length || password.match(PASSWORD_PATTERN))\n      ? null\n      : { cxInvalidPassword: true };\n  }\n\n  /**\n   * Checks if control's value is between 1 and 5\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxStarRatingEmpty' validator error\n   * @memberof CustomFormValidators\n   */\n  static starRatingEmpty(control: AbstractControl): ValidationErrors | null {\n    const rating = control.value as number;\n\n    return rating >= 1 && rating <= 5 ? null : { cxStarRatingEmpty: true };\n  }\n\n  /**\n   * Checks if two password controls match\n   *\n   * NOTE: Use it as a form validator and pass password control names as parameters\n   *\n   * @static\n   * @param {string} password First password control name\n   * @param {string} passwordConfirmation Second password control name\n   * @returns Uses 'cxPasswordsMustMatch' validator error\n   * @memberof CustomFormValidators\n   */\n  static passwordsMustMatch(\n    password: string,\n    passwordConfirmation: string\n  ): any {\n    const validator = (formGroup: FormGroup) =>\n      controlsMustMatch(\n        formGroup,\n        password,\n        passwordConfirmation,\n        'cxPasswordsMustMatch'\n      );\n\n    return validator;\n  }\n\n  /**\n   * Checks if two email controls match\n   *\n   * NOTE: Use it as a form validator and pass email control names as parameters\n   *\n   * @static\n   * @param {string} email First email control name\n   * @param {string} emailConfirmation Second email control name\n   * @returns Uses 'cxEmailsMustMatch' validator error\n   * @memberof CustomFormValidators\n   */\n  static emailsMustMatch(email: string, emailConfirmation: string): any {\n    const validator = (formGroup: FormGroup) =>\n      controlsMustMatch(\n        formGroup,\n        email,\n        emailConfirmation,\n        'cxEmailsMustMatch'\n      );\n\n    return validator;\n  }\n\n  /**\n   * Checks if control's value is euqal or greater than 0\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxNegativeAmount' validator error\n   * @memberof CustomFormValidators\n   */\n  static mustBePositive(control: AbstractControl): ValidationErrors | null {\n    const amount = control.value as number;\n\n    return amount >= 0 ? null : { cxNegativeAmount: true };\n  }\n\n  /**\n   * Checks if control's value does not contain any special characters\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {AbstractControl} control\n   * @returns {(ValidationErrors | null)} Uses 'cxContainsSpecialCharacters' validator error\n   * @memberof CustomFormValidators\n   */\n  static noSpecialCharacters(\n    control: AbstractControl\n  ): ValidationErrors | null {\n    const forbiddenChars = ['/'];\n    const str = String(control.value);\n    const containsSpecialChars = forbiddenChars.some((char) =>\n      str.includes(char)\n    );\n\n    return !containsSpecialChars ? null : { cxContainsSpecialCharacters: true };\n  }\n\n  /**\n   * Checks if control's value passes pattern\n   *\n   * NOTE: Use it as a control validator\n   *\n   * @static\n   * @param {(date: string) => boolean} isValidFormat Pattern verification function\n   * @returns {(control: AbstractControl): ValidationErrors | null} Uses 'pattern' validator error\n   * @memberof CustomFormValidators\n   */\n  static patternValidation(\n    isValidFormat: (date: string) => boolean\n  ): ValidatorFn {\n    const validator = (control: AbstractControl): ValidationErrors | null => {\n      const errors: ValidationErrors = {};\n      if (\n        control.value &&\n        control.value !== '' &&\n        !isValidFormat(control.value)\n      ) {\n        errors.pattern = true;\n      }\n      return Object.keys(errors).length === 0 ? null : errors;\n    };\n    return validator;\n  }\n\n  /**\n   * Checks if two email controls match\n   *\n   * NOTE: Use it as a form validator and pass dates for range\n   *\n   * @static\n   * @param {string} startDateKey First date control name\n   * @param {string} endDateKey Second date control name\n   * @param {(value: string) => Date} getDate Converting function\n   * @returns Uses 'min' and 'max validator error\n   * @memberof CustomFormValidators\n   */\n  static dateRange(\n    startDateKey: string,\n    endDateKey: string,\n    getDate: (value: string) => Date\n  ): (FormGroup) => any {\n    const validator = (formGroup: FormGroup): ValidationErrors | null => {\n      const startDateControl = formGroup.controls[startDateKey];\n      const endDateControl = formGroup.controls[endDateKey];\n      const startDate = getDate(startDateControl.value);\n      const endDate = getDate(endDateControl.value);\n      if (!startDateControl.errors?.pattern) {\n        if (startDate > endDate) {\n          startDateControl.setErrors({ max: true });\n        }\n      }\n      if (!endDateControl.errors?.pattern) {\n        if (endDate < startDate) {\n          endDateControl.setErrors({ min: true });\n        }\n      }\n      return null;\n    };\n    return validator;\n  }\n}\n\n/**\n * Generic function for validators, which checks if two passed controls match.\n *\n * @param formGroup\n * @param firstControlName First control to check\n * @param secondControlName Second control to check\n * @param errorName Error which will be returned by validator\n */\nexport function controlsMustMatch(\n  formGroup: FormGroup,\n  firstControlName: string,\n  secondControlName: string,\n  errorName: string\n): void {\n  const firstControl = formGroup.controls[firstControlName];\n  const secondControl = formGroup.controls[secondControlName];\n\n  if (secondControl.errors && !secondControl.errors[errorName]) {\n    return;\n  }\n\n  secondControl.setErrors(\n    firstControl.value !== secondControl.value ? { [errorName]: true } : null\n  );\n}\n","import { Title } from '@spartacus/core';\n\nexport const titleScores = {\n  mr: 1,\n  mrs: 2,\n  miss: 3,\n  ms: 4,\n  dr: 5,\n  rev: 6,\n};\n\nexport function sortTitles(title1: Title, title2: Title) {\n  if (!titleScores[title1.code] || !titleScores[title2.code]) {\n    return 1;\n  } else {\n    return titleScores[title1.code] - titleScores[title2.code];\n  }\n}\n","import {\n  Injectable,\n  InjectFlags,\n  Injector,\n  NgModuleRef,\n  OnDestroy,\n} from '@angular/core';\nimport {\n  CMSComponentConfig,\n  CmsComponentMapping,\n  CmsConfig,\n  ConfigChunk,\n  ConfigInitializerService,\n  deepMerge,\n  DefaultConfigChunk,\n  FeatureModuleConfig,\n  LazyModulesService,\n} from '@spartacus/core';\nimport { defer, forkJoin, merge, Observable, of } from 'rxjs';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\n\ninterface FeatureInstance extends FeatureModuleConfig {\n  moduleRef?: NgModuleRef<any>;\n  dependencyModuleRefs?: NgModuleRef<any>[];\n  componentsMappings?: CMSComponentConfig;\n}\n\n/**\n * Service responsible for resolving cms config based feature modules.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class FeatureModulesService implements OnDestroy {\n  // feature modules configuration\n  private featureModulesConfig?: {\n    [featureName: string]: FeatureModuleConfig;\n  };\n\n  // maps componentType to feature\n  private componentFeatureMap: Map<string, string> = new Map();\n\n  /*\n   * Contains either FeatureInstance or FeatureInstance resolver for not yet\n   * resolved feature modules\n   */\n  private features: Map<string, Observable<FeatureInstance>> = new Map();\n\n  constructor(\n    protected configInitializer: ConfigInitializerService,\n    protected lazyModules: LazyModulesService\n  ) {\n    this.initFeatureMap();\n  }\n\n  private initFeatureMap(): void {\n    this.configInitializer.getStable('featureModules').subscribe((config) => {\n      this.featureModulesConfig = config.featureModules ?? {};\n\n      for (const [featureName, featureConfig] of Object.entries(\n        this.featureModulesConfig\n      )) {\n        if (featureConfig?.module && featureConfig?.cmsComponents?.length) {\n          for (const component of featureConfig.cmsComponents) {\n            this.componentFeatureMap.set(component, featureName);\n          }\n        }\n      }\n    });\n  }\n\n  /**\n   * Check if there is feature module configuration that covers specified\n   * component type\n   */\n  hasFeatureFor(componentType: string): boolean {\n    return this.componentFeatureMap.has(componentType);\n  }\n\n  /**\n   * Return full CmsComponent mapping defined in feature module\n   */\n  getCmsMapping(componentType: string): Observable<CmsComponentMapping> {\n    const feature = this.componentFeatureMap.get(componentType);\n\n    return this.resolveFeature(feature).pipe(\n      map(\n        (featureInstance) => featureInstance.componentsMappings[componentType]\n      )\n    );\n  }\n\n  /**\n   * Resolves feature module for provided component type\n   *\n   * @param componentType\n   */\n  getModule(componentType: string): NgModuleRef<any> | undefined {\n    const feature = this.componentFeatureMap.get(componentType);\n    let module;\n\n    // we are returning injectors only for already resolved features\n    this.features\n      .get(feature)\n      ?.subscribe((featureInstance) => {\n        module = featureInstance.moduleRef;\n      })\n      .unsubscribe();\n    return module;\n  }\n\n  /**\n   * Resolve feature based on feature name, if feature was not yet resolved\n   *\n   * It will first resolve all module dependencies if defined\n   */\n  private resolveFeature(featureName: string): Observable<FeatureInstance> {\n    return defer(() => {\n      if (!this.features.has(featureName)) {\n        const featureConfig = this.featureModulesConfig[featureName];\n\n        if (!featureConfig?.module) {\n          throw new Error(\n            'No module defined for Feature Module ' + featureName\n          );\n        }\n\n        // resolve dependencies first (if any)\n        const depsResolve = featureConfig.dependencies?.length\n          ? forkJoin(\n              featureConfig.dependencies.map((depModuleFunc) =>\n                this.lazyModules.resolveDependencyModuleInstance(depModuleFunc)\n              )\n            )\n          : of(undefined);\n\n        this.features.set(\n          featureName,\n          depsResolve.pipe(\n            switchMap((deps) =>\n              this.resolveFeatureModule(featureConfig, deps, featureName)\n            ),\n            shareReplay()\n          )\n        );\n      }\n\n      return this.features.get(featureName);\n    });\n  }\n\n  /**\n   * Initialize feature module by returning feature instance\n   */\n  private resolveFeatureModule(\n    featureConfig: FeatureModuleConfig,\n    dependencyModuleRefs: NgModuleRef<any>[] = [],\n    feature: string\n  ): Observable<FeatureInstance> {\n    return this.lazyModules\n      .resolveModuleInstance(\n        featureConfig?.module,\n        feature,\n        dependencyModuleRefs\n      )\n      .pipe(\n        map((moduleRef) => {\n          const featureInstance: FeatureInstance = {\n            ...featureConfig,\n            moduleRef,\n            dependencyModuleRefs,\n            componentsMappings: {},\n          };\n\n          // resolve configuration for feature module\n          const resolvedConfiguration = this.resolveFeatureConfiguration(\n            moduleRef.injector\n          );\n\n          // extract cms components configuration from feature config\n          for (const componentType of featureInstance.cmsComponents) {\n            featureInstance.componentsMappings[componentType] =\n              resolvedConfiguration.cmsComponents[componentType];\n          }\n          return featureInstance;\n        })\n      );\n  }\n\n  /**\n   * Returns configuration provided in feature module\n   */\n  private resolveFeatureConfiguration(featureInjector: Injector): CmsConfig {\n    // get config chunks from feature lib\n    const featureConfigChunks = featureInjector.get<any[]>(\n      ConfigChunk,\n      [],\n      InjectFlags.Self\n    );\n    // get default config chunks from feature lib\n    const featureDefaultConfigChunks = featureInjector.get<any[]>(\n      DefaultConfigChunk,\n      [],\n      InjectFlags.Self\n    );\n\n    return deepMerge(\n      {},\n      ...(featureDefaultConfigChunks ?? []),\n      ...(featureConfigChunks ?? [])\n    ) as CmsConfig;\n  }\n\n  ngOnDestroy(): void {\n    // clean up all initialized features\n    merge(...Array.from(this.features.values())).subscribe((featureInstance) =>\n      featureInstance.moduleRef?.destroy()\n    );\n  }\n}\n","import { isPlatformServer } from '@angular/common';\nimport {\n  Inject,\n  Injectable,\n  isDevMode,\n  NgModuleRef,\n  PLATFORM_ID,\n} from '@angular/core';\nimport { Route } from '@angular/router';\nimport {\n  CmsComponent,\n  CmsComponentChildRoutesConfig,\n  CmsComponentMapping,\n  CmsConfig,\n  deepMerge,\n  DeferLoadingStrategy,\n} from '@spartacus/core';\nimport { defer, forkJoin, Observable, of } from 'rxjs';\nimport { mapTo, share, tap } from 'rxjs/operators';\nimport { FeatureModulesService } from './feature-modules.service';\n\n/**\n * Service with logic related to resolving component from cms mapping\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsComponentsService {\n  private missingComponents: string[] = [];\n  private mappings: { [componentType: string]: CmsComponentMapping } = {};\n\n  // contains\n  private mappingResolvers: Map<\n    string,\n    Observable<CmsComponentMapping>\n  > = new Map();\n\n  constructor(\n    protected config: CmsConfig,\n    @Inject(PLATFORM_ID) protected platformId: Object,\n    protected featureModules?: FeatureModulesService\n  ) {}\n\n  /**\n   * Should be called to make sure all component mappings are determined,\n   * especially lazy loaded ones.\n   *\n   * It's recommended way to make sure all other methods of CmsComponentService\n   * will be able to work synchronously for asked component types and avoid risk\n   * of potential errors that could be thrown otherwise.\n   */\n  determineMappings(componentTypes: string[]): Observable<string[]> {\n    return defer(() => {\n      // we use defer, to be sure the logic below used to compose final observable\n      // will be executed at subscription time (with up to date state at the time,\n      // when it will be needed)\n      const featureResolvers = [];\n\n      for (const componentType of componentTypes) {\n        if (!this.mappings[componentType]) {\n          const staticConfig = this.config.cmsComponents[componentType];\n\n          // check if this component type is managed by feature module\n          if (this.featureModules.hasFeatureFor(componentType)) {\n            featureResolvers.push(\n              // we delegate populating this.mappings to feature resolver\n              this.getFeatureMappingResolver(componentType, staticConfig)\n            );\n          } else {\n            // simply use only static config\n            this.mappings[componentType] = staticConfig;\n          }\n        }\n      }\n\n      if (featureResolvers.length) {\n        return forkJoin(featureResolvers).pipe(mapTo(componentTypes));\n      } else {\n        return of(componentTypes);\n      }\n    });\n  }\n\n  private getFeatureMappingResolver(\n    componentType: string,\n    staticConfig?: CmsComponentMapping\n  ): Observable<CmsComponentMapping> {\n    if (!this.mappingResolvers.has(componentType)) {\n      const mappingResolver$ = this.featureModules\n        .getCmsMapping(componentType)\n        .pipe(\n          tap((featureComponentMapping) => {\n            // We treat cms mapping configuration from a feature as a default,\n            // that can be overridden by app/static configuration\n            this.mappings[componentType] = deepMerge(\n              {},\n              featureComponentMapping,\n              staticConfig\n            );\n            this.mappingResolvers.delete(componentType);\n          }),\n          share()\n        );\n      this.mappingResolvers.set(componentType, mappingResolver$);\n    }\n    return this.mappingResolvers.get(componentType);\n  }\n\n  /**\n   * Returns the feature module for a cms component.\n   * It will only work for cms components provided by feature modules.\n   *\n   * @param componentType\n   */\n  getModule(componentType: string): NgModuleRef<any> | undefined {\n    return (\n      this.featureModules.hasFeatureFor(componentType) &&\n      this.featureModules.getModule(componentType)\n    );\n  }\n\n  /**\n   * Return collection of component mapping configuration for specified list of\n   * component types.\n   *\n   * If component mapping can't be determined synchronously, for example, lazy\n   * loaded one, it will throw an error.\n   *\n   * To make sure component mapping is available, determineMappings()\n   * should be called and completed first.\n   */\n  getMapping(componentType: string): CmsComponentMapping {\n    const componentConfig =\n      this.mappings[componentType] ??\n      this.config.cmsComponents?.[componentType];\n\n    if (isDevMode() && !componentConfig) {\n      if (!this.missingComponents.includes(componentType)) {\n        this.missingComponents.push(componentType);\n        console.warn(\n          `No component implementation found for the CMS component type '${componentType}'.\\n`,\n          `Make sure you implement a component and register it in the mapper.`\n        );\n      }\n    }\n\n    return componentConfig;\n  }\n\n  /**\n   * Checks, if component should be rendered as some components\n   * could be disabled for server side renderings\n   */\n  shouldRender(componentType: string): boolean {\n    const isSSR = isPlatformServer(this.platformId);\n    return !(isSSR && this.getMapping(componentType)?.disableSSR);\n  }\n\n  /**\n   * Return DeferLoadingStrategy for component type.\n   */\n  getDeferLoadingStrategy(componentType: string): DeferLoadingStrategy {\n    return this.config.cmsComponents?.[componentType]?.deferLoading;\n  }\n\n  /**\n   * Get cms driven child routes for components\n   */\n  getChildRoutes(componentTypes: string[]): CmsComponentChildRoutesConfig {\n    const configs = [];\n    for (const componentType of componentTypes) {\n      if (this.shouldRender(componentType)) {\n        configs.push(this.getMapping(componentType)?.childRoutes ?? []);\n      }\n    }\n\n    return this.standardizeChildRoutes(configs);\n  }\n\n  /**\n   * Returns the static data for the component type.\n   */\n  getStaticData<T extends CmsComponent = CmsComponent>(\n    componentType: string\n  ): T | undefined {\n    return this.getMapping(componentType)?.data as T;\n  }\n\n  /**\n   * Standardizes the format of `childRoutes` config.\n   *\n   * Some `childRoutes` configs are simple arrays of Routes (without the notion of the parent route).\n   * But some configs can be an object with children routes and their parent defined in separate property.\n   */\n  protected standardizeChildRoutes(\n    childRoutesConfigs: (Route[] | CmsComponentChildRoutesConfig)[]\n  ): CmsComponentChildRoutesConfig {\n    const result: CmsComponentChildRoutesConfig = { children: [] };\n\n    (childRoutesConfigs || []).forEach((config) => {\n      if (Array.isArray(config)) {\n        result.children.push(...config);\n      } else {\n        result.children.push(...(config.children || []));\n        if (config.parent) {\n          result.parent = config.parent;\n        }\n      }\n    });\n\n    return result;\n  }\n\n  /**\n   * Get cms driven guards for components\n   */\n  getGuards(componentTypes: string[]): any[] {\n    const guards = new Set<any>();\n    for (const componentType of componentTypes) {\n      this.getMapping(componentType)?.guards?.forEach((guard) =>\n        guards.add(guard)\n      );\n    }\n    return Array.from(guards);\n  }\n\n  /**\n   * Get i18n keys associated with components\n   */\n  getI18nKeys(componentTypes: string[]): string[] {\n    const i18nKeys = new Set<string>();\n    for (const componentType of componentTypes) {\n      if (this.shouldRender(componentType)) {\n        this.getMapping(componentType)?.i18nKeys?.forEach((key) =>\n          i18nKeys.add(key)\n        );\n      }\n    }\n    return Array.from(i18nKeys);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CmsService } from '@spartacus/core';\nimport { defer, Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport { CmsComponentsService } from '../../../services/cms-components.service';\n\n/**\n * Provides data for `CmsComponentData`. This is used while component is injected\n * dynamically, so that the component implementation can access the data.\n *\n * The data is resolved from dynamic data (CMS api) as well as static configured data.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ComponentDataProvider {\n  constructor(\n    protected componentsService: CmsComponentsService,\n    protected cmsService: CmsService\n  ) {}\n\n  /**\n   * Return the component data for a component given by the `uid`.\n   *\n   * If the `type` is provided, static component data (if available) is\n   * merged into the component data. The static data is complemented and\n   * overridden with data retrieved from the cms service.\n   */\n  get<T>(uid: string, type?: string): Observable<T> {\n    return defer(() => {\n      let staticComponentData: T;\n\n      if (type) {\n        staticComponentData = this.componentsService.getStaticData<T>(type);\n      }\n\n      if (staticComponentData) {\n        return this.cmsService.getComponentData<T>(uid).pipe(\n          map((data) => ({\n            ...staticComponentData,\n            ...data,\n          })),\n          startWith(staticComponentData)\n        );\n      } else {\n        return this.cmsService.getComponentData<T>(uid);\n      }\n    });\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { CmsComponentsService } from '../../../services/cms-components.service';\nimport { CmsComponentData } from '../../model/cms-component-data';\nimport { ComponentDataProvider } from './component-data.provider';\n\n/**\n * Used to prepare injector for CMS components.\n *\n * Injector will take into account configured providers and provides CmsComponentData\n * for specified component's uid\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsInjectorService {\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    protected injector: Injector\n  ) {}\n\n  public getInjector(\n    type: string,\n    uid: string,\n    parentInjector?: Injector\n  ): Injector {\n    const configProviders =\n      this.cmsComponentsService.getMapping(type)?.providers ?? [];\n    return Injector.create({\n      providers: [\n        {\n          provide: CmsComponentData,\n          useFactory: (dataProvider: ComponentDataProvider) => ({\n            uid,\n            data$: dataProvider.get(uid, type),\n          }),\n          deps: [ComponentDataProvider],\n        },\n        ...configProviders,\n      ],\n      parent: parentInjector ?? this.injector,\n    });\n  }\n}\n","import {\n  ComponentRef,\n  ElementRef,\n  Injector,\n  NgModuleRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Applicable, CmsComponentMapping, Priority } from '@spartacus/core';\n\n/**\n * ComponentHandler implementations can be used for instantiating and launching\n * different types of CMS mapped components\n */\nexport abstract class ComponentHandler implements Applicable {\n  /**\n   * Returns component resource - an observable stream used to launch and dispose\n   * component.\n   *\n   * Instantiate and launch component by subscribing to launcher.\n   * Successful component launch will be followed by emission of ElementRef\n   * (and in case of native Angular component, also ComponentRef).\n   * Unsubscribing from the launcher will remove and tear down the component.\n   *\n   * @param componentMapping\n   * @param viewContainerRef\n   * @param elementInjector\n   * @param module\n   */\n  abstract launcher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }>;\n\n  abstract hasMatch(componentMapping: CmsComponentMapping): boolean;\n  abstract getPriority?(): Priority;\n}\n","import {\n  ComponentRef,\n  ElementRef,\n  Inject,\n  Injectable,\n  Injector,\n  isDevMode,\n  NgModuleRef,\n  Optional,\n  ViewContainerRef,\n} from '@angular/core';\nimport { CmsComponentMapping, resolveApplicable } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ComponentHandler } from '../handlers/component-handler';\n\n/**\n * Responsible for obtaining component handler for specified component mapping\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ComponentHandlerService {\n  constructor(\n    @Optional()\n    @Inject(ComponentHandler)\n    protected handlers: ComponentHandler[]\n  ) {}\n\n  protected invalidMappings = new Set<CmsComponentMapping<any>>();\n\n  /**\n   * Get best matching component handler\n   *\n   * @param componentMapping\n   */\n  protected resolve(componentMapping: CmsComponentMapping): ComponentHandler {\n    const handler = resolveApplicable(this.handlers, [componentMapping]);\n\n    if (isDevMode() && !handler) {\n      if (!this.invalidMappings.has(componentMapping)) {\n        this.invalidMappings.add(componentMapping);\n        console.warn(\n          \"Can't resolve handler for component mapping: \",\n          componentMapping\n        );\n      }\n    }\n\n    return handler;\n  }\n\n  /**\n   * Get launcher for specified component mapping\n   *\n   * @param componentMapping\n   * @param viewContainerRef\n   * @param elementInjector\n   */\n  getLauncher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }> {\n    return this.resolve(componentMapping)?.launcher(\n      componentMapping,\n      viewContainerRef,\n      elementInjector,\n      module\n    );\n  }\n}\n","import {\n  ChangeDetectorRef,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  Injector,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewContainerRef,\n} from '@angular/core';\nimport {\n  ContentSlotComponentData,\n  DynamicAttributeService,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { CmsComponentsService } from '../../services/cms-components.service';\nimport { CmsInjectorService } from './services/cms-injector.service';\nimport { ComponentHandlerService } from './services/component-handler.service';\n\n/**\n * Directive used to facilitate instantiation of CMS driven dynamic components\n */\n@Directive({\n  selector: '[cxComponentWrapper]',\n})\nexport class ComponentWrapperDirective implements OnInit, OnDestroy {\n  @Input() cxComponentWrapper: ContentSlotComponentData;\n\n  /**\n   * @deprecated since 2.0\n   *\n   * This property in unsafe, i.e.\n   * - cmpRef can be set later because of lazy loading or deferred loading\n   * - cmpRef can be not set at all if for example, web components are used as cms components\n   */\n  cmpRef?: ComponentRef<any>;\n\n  private launcherResource?: Subscription;\n\n  constructor(\n    protected vcr: ViewContainerRef,\n    protected cmsComponentsService: CmsComponentsService,\n    protected injector: Injector,\n    protected dynamicAttributeService: DynamicAttributeService,\n    protected renderer: Renderer2,\n    protected componentHandler: ComponentHandlerService,\n    protected cmsInjector: CmsInjectorService\n  ) {}\n\n  ngOnInit() {\n    this.cmsComponentsService\n      .determineMappings([this.cxComponentWrapper.flexType])\n      .subscribe(() => {\n        if (\n          this.cmsComponentsService.shouldRender(\n            this.cxComponentWrapper.flexType\n          )\n        ) {\n          this.launchComponent();\n        }\n      });\n  }\n\n  private launchComponent() {\n    const componentMapping = this.cmsComponentsService.getMapping(\n      this.cxComponentWrapper.flexType\n    );\n\n    if (!componentMapping) {\n      return;\n    }\n\n    this.launcherResource = this.componentHandler\n      .getLauncher(\n        componentMapping,\n        this.vcr,\n        this.cmsInjector.getInjector(\n          this.cxComponentWrapper.flexType,\n          this.cxComponentWrapper.uid,\n          this.injector\n        ),\n        this.cmsComponentsService.getModule(this.cxComponentWrapper.flexType)\n      )\n      ?.subscribe(({ elementRef, componentRef }) => {\n        this.cmpRef = componentRef;\n        this.decorate(elementRef);\n        this.injector.get(ChangeDetectorRef).markForCheck();\n      });\n  }\n\n  private decorate(elementRef: ElementRef): void {\n    this.dynamicAttributeService.addDynamicAttributes(\n      elementRef.nativeElement,\n      this.renderer,\n      { componentData: this.cxComponentWrapper }\n    );\n  }\n\n  ngOnDestroy() {\n    if (this.launcherResource) {\n      this.launcherResource.unsubscribe();\n    }\n  }\n}\n","import {\n  ComponentFactoryResolver,\n  ComponentRef,\n  ElementRef,\n  Injectable,\n  Injector,\n  NgModuleRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { ComponentHandler } from './component-handler';\nimport { Observable } from 'rxjs';\nimport { CmsComponentMapping, Priority } from '@spartacus/core';\n\n/**\n * Default component handler used for dynamically launching cms components implemented\n * as native Angular components.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DefaultComponentHandler implements ComponentHandler {\n  hasMatch(componentMapping: CmsComponentMapping): boolean {\n    return typeof componentMapping.component === 'function';\n  }\n\n  getPriority(): Priority {\n    return Priority.FALLBACK;\n  }\n\n  launcher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }> {\n    return new Observable<{\n      elementRef: ElementRef;\n      componentRef?: ComponentRef<any>;\n    }>((subscriber) => {\n      let componentRef: ComponentRef<any>;\n\n      const injector = elementInjector ?? viewContainerRef.injector;\n\n      const dispose = () => {\n        if (componentRef) {\n          componentRef.destroy();\n        }\n      };\n\n      const factory = this.getComponentFactory(\n        injector,\n        componentMapping.component\n      );\n\n      if (factory) {\n        componentRef = viewContainerRef.createComponent(\n          factory,\n          undefined,\n          injector,\n          undefined,\n          module\n        );\n        subscriber.next({ elementRef: componentRef.location, componentRef });\n      }\n\n      return dispose;\n    });\n  }\n\n  protected getComponentFactory(injector: Injector, component: any): any {\n    if (!component) {\n      return null;\n    }\n    const factory = injector\n      .get(ComponentFactoryResolver)\n      .resolveComponentFactory(component);\n\n    return factory;\n  }\n}\n","import {\n  ComponentRef,\n  ElementRef,\n  Injectable,\n  Injector,\n  NgModuleRef,\n  ViewContainerRef,\n} from '@angular/core';\nimport { CmsComponentMapping, Priority } from '@spartacus/core';\nimport { from, Observable } from 'rxjs';\nimport { DefaultComponentHandler } from './default-component.handler';\nimport { switchMap } from 'rxjs/operators';\nimport { ComponentHandler } from './component-handler';\n\n/**\n * Lazy component handler used for launching lazy loaded cms components implemented\n * as native Angular components.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LazyComponentHandler implements ComponentHandler {\n  constructor(protected defaultHandler: DefaultComponentHandler) {}\n\n  /**\n   * We want to mach dynamic import signature () => import('')\n   */\n  hasMatch(componentMapping: CmsComponentMapping): boolean {\n    return (\n      typeof componentMapping.component === 'function' &&\n      this.isNotClass(componentMapping.component)\n    );\n  }\n\n  private isNotClass(symbol: any): boolean {\n    const signature = symbol.toString().substr(0, 20).replace(' ', '');\n    return signature.startsWith('function()') || signature.startsWith('()=>');\n  }\n\n  getPriority(): Priority {\n    return Priority.LOW;\n  }\n\n  launcher(\n    componentMapping: CmsComponentMapping,\n    viewContainerRef: ViewContainerRef,\n    elementInjector?: Injector,\n    module?: NgModuleRef<any>\n  ): Observable<{ elementRef: ElementRef; componentRef?: ComponentRef<any> }> {\n    return from(componentMapping.component()).pipe(\n      switchMap((component) =>\n        this.defaultHandler.launcher(\n          { ...componentMapping, component },\n          viewContainerRef,\n          elementInjector,\n          module\n        )\n      )\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ComponentWrapperDirective } from './component-wrapper.directive';\nimport { ComponentHandler } from './handlers/component-handler';\nimport { DefaultComponentHandler } from './handlers/default-component.handler';\nimport { LazyComponentHandler } from './handlers/lazy-component.handler';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    {\n      provide: ComponentHandler,\n      useExisting: DefaultComponentHandler,\n      multi: true,\n    },\n    {\n      provide: ComponentHandler,\n      useExisting: LazyComponentHandler,\n      multi: true,\n    },\n  ],\n  declarations: [ComponentWrapperDirective],\n  exports: [ComponentWrapperDirective],\n})\nexport class PageComponentModule {}\n","export const ASM_ENABLED_LOCAL_STORAGE_KEY = 'asm_enabled';\n","import { Location } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { WindowRef } from '@spartacus/core';\nimport { LAUNCH_CALLER } from '../../../layout/launch-dialog/config/index';\nimport { LaunchDialogService } from '../../../layout/launch-dialog/services/launch-dialog.service';\nimport { ASM_ENABLED_LOCAL_STORAGE_KEY } from '../asm-constants';\n\n/**\n * The AsmEnablerService is used to enable ASM for those scenario's\n * where it's actually used. This service is added to avoid any polution\n * of the UI and runtime performance for the ordinary production user.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class AsmEnablerService {\n  constructor(\n    protected location: Location,\n    protected winRef: WindowRef,\n    protected launchDialogService: LaunchDialogService\n  ) {}\n\n  /**\n   * Loads the ASM UI if needed. The ASM UI will be added based on the\n   * existence of a URL parameter or previous usage given by local storage.\n   */\n  load(): void {\n    if (this.isEnabled()) {\n      this.addUi();\n    }\n  }\n\n  /**\n   * Indicates whether the ASM module is enabled.\n   */\n  isEnabled(): boolean {\n    if (this.isLaunched() && !this.isUsedBefore()) {\n      if (this.winRef.localStorage) {\n        this.winRef.localStorage.setItem(ASM_ENABLED_LOCAL_STORAGE_KEY, 'true');\n      }\n    }\n    return this.isLaunched() || this.isUsedBefore();\n  }\n\n  /**\n   * Indicates whether ASM is launched through the URL,\n   * using the asm flag in the URL.\n   */\n  protected isLaunched(): boolean {\n    const params = this.location.path().split('?')[1];\n    return params && params.split('&').includes('asm=true');\n  }\n\n  /**\n   * Evaluates local storage where we persist the usage of ASM.\n   */\n  protected isUsedBefore(): boolean {\n    return (\n      this.winRef.localStorage &&\n      this.winRef.localStorage.getItem(ASM_ENABLED_LOCAL_STORAGE_KEY) === 'true'\n    );\n  }\n\n  /**\n   * Adds the ASM UI by using the `cx-storefront` outlet.\n   */\n  protected addUi(): void {\n    this.launchDialogService.launch(LAUNCH_CALLER.ASM);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { PageComponentModule } from '../../cms-structure/page/component/page-component.module';\nimport { AsmEnablerService } from './services/asm-enabler.service';\n\n/**\n * The ASM loader module takes care of loading the ASM UI\n * only in case there's a reason to do so.\n */\n@NgModule({\n  imports: [CommonModule, PageComponentModule],\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      useFactory: asmFactory,\n      deps: [AsmEnablerService],\n      multi: true,\n    },\n  ],\n})\nexport class AsmLoaderModule {}\n\n/**\n *\n * We do not like to block the UI, which is why we delgate loading of ASM\n * to a real component; the router and state aren't available in an optimized\n * way during the APP_INITIALIZER.\n */\nexport function asmFactory(asmEnablerService: AsmEnablerService) {\n  const isReady = () => {\n    asmEnablerService.load();\n  };\n  return isReady;\n}\n","import { Injectable } from '@angular/core';\nimport { AuthService, CsAgentAuthService, WindowRef } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ASM_ENABLED_LOCAL_STORAGE_KEY } from '../asm-constants';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AsmComponentService {\n  constructor(\n    protected authService: AuthService,\n    protected csAgentAuthService: CsAgentAuthService,\n    protected winRef: WindowRef\n  ) {}\n\n  logoutCustomerSupportAgentAndCustomer(): void {\n    this.csAgentAuthService.logoutCustomerSupportAgent();\n  }\n\n  logoutCustomer(): void {\n    this.authService.logout();\n  }\n\n  isCustomerEmulationSessionInProgress(): Observable<boolean> {\n    return this.csAgentAuthService.isCustomerEmulated();\n  }\n\n  /**\n   * We're currently only removing the persisted storage in the browser\n   * to ensure the ASM experience isn't loaded on the next visit. There are a few\n   * optimizations we could think of:\n   * - drop the `asm` parameter from the URL, in case it's still there\n   * - remove the generated UI from the DOM (outlets currently do not support this)\n   */\n  unload() {\n    if (this.winRef.localStorage) {\n      this.winRef.localStorage.removeItem(ASM_ENABLED_LOCAL_STORAGE_KEY);\n    }\n  }\n}\n","import {\n  Component,\n  HostBinding,\n  OnInit,\n  ViewEncapsulation,\n} from '@angular/core';\nimport {\n  AsmService,\n  AuthService,\n  CsAgentAuthService,\n  GlobalMessageService,\n  GlobalMessageType,\n  RoutingService,\n  User,\n  UserService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap, take } from 'rxjs/operators';\nimport { AsmComponentService } from '../services/asm-component.service';\n\n@Component({\n  selector: 'cx-asm-main-ui',\n  templateUrl: './asm-main-ui.component.html',\n  styleUrls: ['./asm-main-ui.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class AsmMainUiComponent implements OnInit {\n  customerSupportAgentLoggedIn$: Observable<boolean>;\n  csAgentTokenLoading$: Observable<boolean>;\n  customer$: Observable<User>;\n  isCollapsed$: Observable<boolean>;\n\n  @HostBinding('class.hidden') disabled = false;\n\n  private startingCustomerSession = false;\n\n  constructor(\n    protected authService: AuthService,\n    protected csAgentAuthService: CsAgentAuthService,\n    protected userService: UserService,\n    protected asmComponentService: AsmComponentService,\n    protected globalMessageService: GlobalMessageService,\n    protected routingService: RoutingService,\n    protected asmService: AsmService\n  ) {}\n\n  ngOnInit(): void {\n    this.customerSupportAgentLoggedIn$ = this.csAgentAuthService.isCustomerSupportAgentLoggedIn();\n    this.csAgentTokenLoading$ = this.csAgentAuthService.getCustomerSupportAgentTokenLoading();\n    this.customer$ = this.authService.isUserLoggedIn().pipe(\n      switchMap((isLoggedIn) => {\n        if (isLoggedIn) {\n          this.handleCustomerSessionStartRedirection();\n          return this.userService.get();\n        } else {\n          return of(undefined);\n        }\n      })\n    );\n    this.isCollapsed$ = this.asmService\n      .getAsmUiState()\n      .pipe(map((uiState) => uiState.collapsed));\n  }\n\n  private handleCustomerSessionStartRedirection(): void {\n    this.asmComponentService\n      .isCustomerEmulationSessionInProgress()\n      .pipe(take(1))\n      .subscribe((isCustomerEmulated) => {\n        if (this.startingCustomerSession && isCustomerEmulated) {\n          this.startingCustomerSession = false;\n          this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n          this.routingService.go('/');\n        }\n      });\n  }\n\n  loginCustomerSupportAgent({\n    userId,\n    password,\n  }: {\n    userId: string;\n    password: string;\n  }): void {\n    this.csAgentAuthService.authorizeCustomerSupportAgent(userId, password);\n  }\n\n  logout(): void {\n    this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n  }\n\n  startCustomerEmulationSession({ customerId }: { customerId: string }): void {\n    if (customerId) {\n      this.csAgentAuthService.startCustomerEmulationSession(customerId);\n      this.startingCustomerSession = true;\n    } else {\n      this.globalMessageService.add(\n        { key: 'asm.error.noCustomerId' },\n        GlobalMessageType.MSG_TYPE_ERROR\n      );\n    }\n  }\n\n  hideUi(): void {\n    this.disabled = true;\n    this.asmComponentService.unload();\n  }\n}\n","import {\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { AsmConfig, RoutingService, UserIdService } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { AsmComponentService } from '../services/asm-component.service';\n\n@Component({\n  selector: 'cx-asm-session-timer',\n  templateUrl: './asm-session-timer.component.html',\n  styleUrls: ['./asm-session-timer.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class AsmSessionTimerComponent implements OnInit, OnDestroy {\n  private subscriptions = new Subscription();\n  private interval: any;\n  private maxStartDelayInSeconds = 60000;\n  timeLeft: number;\n\n  constructor(\n    private config: AsmConfig,\n    private asmComponentService: AsmComponentService,\n    private routingService: RoutingService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private userIdService: UserIdService\n  ) {}\n\n  ngOnInit(): void {\n    this.timeLeft = this.getTimerStartDelayInSeconds();\n    this.interval = setInterval(() => {\n      if (this.timeLeft > 0) {\n        this.timeLeft--;\n      } else {\n        clearInterval(this.interval);\n        this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n      }\n      this.changeDetectorRef.markForCheck();\n    }, 1000);\n\n    this.resetOnNavigate();\n    this.resetOnCustomerSessionChange();\n  }\n\n  private resetOnNavigate(): void {\n    this.subscriptions.add(\n      this.routingService.isNavigating().subscribe((isNavigating) => {\n        if (isNavigating) {\n          this.resetTimer();\n        }\n      })\n    );\n  }\n\n  private resetOnCustomerSessionChange(): void {\n    this.subscriptions.add(\n      this.userIdService\n        .getUserId()\n        .pipe(distinctUntilChanged())\n        .subscribe(() => this.resetTimer())\n    );\n  }\n\n  resetTimer(): void {\n    if (this.timeLeft > 0) {\n      this.timeLeft = this.getTimerStartDelayInSeconds();\n    }\n  }\n\n  private getTimerStartDelayInSeconds(): number {\n    if (\n      this.config.asm.agentSessionTimer.startingDelayInSeconds >\n      this.maxStartDelayInSeconds\n    ) {\n      return this.maxStartDelayInSeconds;\n    } else {\n      return this.config.asm.agentSessionTimer.startingDelayInSeconds;\n    }\n  }\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'formatTimer',\n})\nexport class FormatTimerPipe implements PipeTransform {\n  transform(totalSeconds: number): string {\n    if (totalSeconds < 0) {\n      totalSeconds = 0;\n    }\n    const minutes: number = Math.floor(totalSeconds / 60);\n    const seconds: number = totalSeconds % 60;\n    let zeroPaddedMinutes: string;\n    if (minutes < 10) {\n      zeroPaddedMinutes = ('00' + minutes).slice(-2);\n    } else {\n      zeroPaddedMinutes = minutes + '';\n    }\n    const zeroPaddedSeconds: string = ('00' + seconds).slice(-2);\n    return `${zeroPaddedMinutes}:${zeroPaddedSeconds}`;\n  }\n}\n","import { Component, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { AsmService } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'cx-asm-toggle-ui',\n  templateUrl: './asm-toggle-ui.component.html',\n  styleUrls: ['./asm-toggle-ui.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class AsmToggleUiComponent implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n  isCollapsed: boolean;\n\n  constructor(protected asmService: AsmService) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      this.asmService.getAsmUiState().subscribe((uiState) => {\n        this.isCollapsed = uiState.collapsed;\n      })\n    );\n  }\n\n  toggleUi(): void {\n    this.asmService.updateAsmUiState({ collapsed: !this.isCollapsed });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\n\n@Component({\n  selector: 'cx-csagent-login-form',\n  templateUrl: './csagent-login-form.component.html',\n  styleUrls: ['./csagent-login-form.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class CSAgentLoginFormComponent implements OnInit {\n  csAgentLoginForm: FormGroup;\n\n  @Input()\n  csAgentTokenLoading = false;\n\n  @Output()\n  submitEvent = new EventEmitter<{ userId: string; password: string }>();\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit(): void {\n    this.csAgentLoginForm = this.fb.group({\n      userId: ['', [Validators.required]],\n      password: ['', [Validators.required]],\n    });\n  }\n\n  onSubmit(): void {\n    if (this.csAgentLoginForm.valid) {\n      this.submitEvent.emit({\n        userId: this.csAgentLoginForm.get('userId').value,\n        password: this.csAgentLoginForm.get('password').value,\n      });\n    } else {\n      this.csAgentLoginForm.markAllAsTouched();\n    }\n  }\n}\n","import { Component, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { User, UserService } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { AsmComponentService } from '../services/asm-component.service';\n\n@Component({\n  selector: 'cx-customer-emulation',\n  templateUrl: './customer-emulation.component.html',\n  styleUrls: ['./customer-emulation.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class CustomerEmulationComponent implements OnInit, OnDestroy {\n  customer: User;\n  isCustomerEmulationSessionInProgress$: Observable<boolean>;\n  private subscription = new Subscription();\n\n  constructor(\n    protected asmComponentService: AsmComponentService,\n    protected userService: UserService\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.userService.get().subscribe((user) => (this.customer = user))\n    );\n    this.isCustomerEmulationSessionInProgress$ = this.asmComponentService.isCustomerEmulationSessionInProgress();\n  }\n\n  logoutCustomer() {\n    this.asmComponentService.logoutCustomer();\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  AsmConfig,\n  AsmService,\n  CustomerSearchPage,\n  User,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-customer-selection',\n  templateUrl: './customer-selection.component.html',\n  styleUrls: ['./customer-selection.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  // tslint:disable-next-line:no-host-metadata-property\n  host: {\n    '(document:click)': 'onDocumentClick($event)',\n  },\n})\nexport class CustomerSelectionComponent implements OnInit, OnDestroy {\n  customerSelectionForm: FormGroup;\n  private subscription = new Subscription();\n  searchResultsLoading$: Observable<boolean>;\n  searchResults: Observable<CustomerSearchPage>;\n  selectedCustomer: User;\n\n  @Output()\n  submitEvent = new EventEmitter<{ customerId: string }>();\n\n  @ViewChild('resultList') resultList: ElementRef;\n  @ViewChild('searchTerm') searchTerm: ElementRef;\n\n  constructor(\n    private fb: FormBuilder,\n    private asmService: AsmService,\n    private config: AsmConfig\n  ) {}\n\n  ngOnInit(): void {\n    this.customerSelectionForm = this.fb.group({\n      searchTerm: ['', Validators.required],\n    });\n    this.asmService.customerSearchReset();\n    this.searchResultsLoading$ = this.asmService.getCustomerSearchResultsLoading();\n    this.searchResults = this.asmService.getCustomerSearchResults();\n\n    this.subscription.add(\n      this.customerSelectionForm.controls.searchTerm.valueChanges\n        .pipe(debounceTime(300))\n        .subscribe((searchTermValue) => {\n          this.handleSearchTerm(searchTermValue);\n        })\n    );\n  }\n\n  private handleSearchTerm(searchTermValue: string) {\n    if (\n      Boolean(this.selectedCustomer) &&\n      searchTermValue !== this.selectedCustomer.name\n    ) {\n      this.selectedCustomer = undefined;\n    }\n    if (Boolean(this.selectedCustomer)) {\n      return;\n    }\n    this.asmService.customerSearchReset();\n    if (searchTermValue.trim().length >= 3) {\n      this.asmService.customerSearch({\n        query: searchTermValue,\n        pageSize: this.config.asm.customerSearch.maxResults,\n      });\n    }\n  }\n\n  selectCustomerFromList(customer: User) {\n    this.selectedCustomer = customer;\n    this.customerSelectionForm.controls.searchTerm.setValue(\n      this.selectedCustomer.name\n    );\n    this.asmService.customerSearchReset();\n  }\n\n  onSubmit(): void {\n    if (this.customerSelectionForm.valid && Boolean(this.selectedCustomer)) {\n      this.submitEvent.emit({ customerId: this.selectedCustomer.customerId });\n    } else {\n      this.customerSelectionForm.markAllAsTouched();\n    }\n  }\n\n  onDocumentClick(event) {\n    if (Boolean(this.resultList)) {\n      if (\n        this.resultList.nativeElement.contains(event.target) ||\n        this.searchTerm.nativeElement.contains(event.target)\n      ) {\n        return;\n      } else {\n        this.asmService.customerSearchReset();\n      }\n    }\n  }\n\n  closeResults() {\n    this.asmService.customerSearchReset();\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.asmService.customerSearchReset();\n  }\n}\n","import { LayoutConfig } from '../../layout/config/layout-config';\nimport { AsmMainUiComponent } from './asm-main-ui/asm-main-ui.component';\n\nexport const defaultAsmLayoutConfig: LayoutConfig = {\n  launch: {\n    ASM: {\n      outlet: 'cx-storefront',\n      component: AsmMainUiComponent,\n    },\n  },\n};\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  AsmModule as AsmCoreModule,\n  I18nModule,\n  provideConfig,\n} from '@spartacus/core';\nimport { FormErrorsModule } from '../../shared/index';\nimport { AsmLoaderModule } from './asm-loader.module';\nimport { AsmMainUiComponent } from './asm-main-ui/asm-main-ui.component';\nimport { AsmSessionTimerComponent } from './asm-session-timer/asm-session-timer.component';\nimport { FormatTimerPipe } from './asm-session-timer/format-timer.pipe';\nimport { AsmToggleUiComponent } from './asm-toggle-ui/asm-toggle-ui.component';\nimport { CSAgentLoginFormComponent } from './csagent-login-form/csagent-login-form.component';\nimport { CustomerEmulationComponent } from './customer-emulation/customer-emulation.component';\nimport { CustomerSelectionComponent } from './customer-selection/customer-selection.component';\nimport { defaultAsmLayoutConfig } from './default-asm-layout.config';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    I18nModule,\n    AsmCoreModule.forRoot(),\n    AsmLoaderModule,\n    FormErrorsModule,\n  ],\n  declarations: [\n    AsmMainUiComponent,\n    CSAgentLoginFormComponent,\n    CustomerSelectionComponent,\n    AsmSessionTimerComponent,\n    FormatTimerPipe,\n    CustomerEmulationComponent,\n    AsmToggleUiComponent,\n  ],\n  providers: [provideConfig(defaultAsmLayoutConfig)],\n  entryComponents: [AsmMainUiComponent],\n})\nexport class AsmModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  Product,\n  ProductScope,\n  ProductService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CurrentProductService {\n  constructor(\n    private routingService: RoutingService,\n    private productService: ProductService\n  ) {}\n\n  protected readonly DEFAULT_PRODUCT_SCOPE = ProductScope.DETAILS;\n\n  /**\n   * Returns an observable for the current product\n   * @returns Product\n   * @returns null if product can't be found\n   *\n   * @param scopes\n   */\n  getProduct(\n    scopes?: (ProductScope | string)[] | ProductScope | string\n  ): Observable<Product | null> {\n    return this.routingService.getRouterState().pipe(\n      map((state) => state.state.params['productCode']),\n      distinctUntilChanged(),\n      switchMap((productCode: string) => {\n        return productCode\n          ? this.productService.get(\n              productCode,\n              scopes || this.DEFAULT_PRODUCT_SCOPE\n            )\n          : of(null);\n      }),\n      filter((product) => product !== undefined)\n    );\n  }\n}\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport {\n  ActiveCartService,\n  Cart,\n  OrderEntry,\n  PromotionLocation,\n  PromotionResult,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  filter,\n  map,\n  shareReplay,\n  startWith,\n  switchMap,\n  switchMapTo,\n  tap,\n} from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../../cms-components/misc/icon/icon.model';\nimport { ModalService } from '../../../../shared/components/modal/modal.service';\nimport { PromotionService } from '../../../../shared/services/promotion/promotion.service';\n\n@Component({\n  selector: 'cx-added-to-cart-dialog',\n  templateUrl: './added-to-cart-dialog.component.html',\n})\nexport class AddedToCartDialogComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  entry$: Observable<OrderEntry>;\n  cart$: Observable<Cart>;\n  loaded$: Observable<boolean>;\n  addedEntryWasMerged$: Observable<boolean>;\n  /**\n   * @deprecated since 3.0, set numberOfEntriesBeforeAdd instead\n   */\n  increment: boolean;\n  numberOfEntriesBeforeAdd: number;\n  orderPromotions$: Observable<PromotionResult[]>;\n  promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n\n  quantity = 0;\n  modalIsOpen = false;\n\n  @ViewChild('dialog', { read: ElementRef })\n  dialog: ElementRef;\n\n  form: FormGroup = new FormGroup({});\n\n  private quantityControl$: Observable<FormControl>;\n\n  constructor(\n    protected modalService: ModalService,\n    protected cartService: ActiveCartService,\n    protected promotionService: PromotionService\n  ) {}\n  /**\n   * Returns an observable formControl with the quantity of the cartEntry,\n   * but also updates the entry in case of a changed value.\n   * The quantity can be set to zero in order to remove the entry.\n   */\n  getQuantityControl(): Observable<FormControl> {\n    if (!this.quantityControl$) {\n      this.quantityControl$ = this.entry$.pipe(\n        filter((e) => !!e),\n        map((entry) => this.getFormControl(entry)),\n        switchMap(() =>\n          this.form.valueChanges.pipe(\n            // tslint:disable-next-line:deprecation\n            startWith(null),\n            tap((valueChange) => {\n              if (valueChange) {\n                this.cartService.updateEntry(\n                  valueChange.entryNumber,\n                  valueChange.quantity\n                );\n                if (valueChange.quantity === 0) {\n                  this.dismissModal('Removed');\n                }\n              } else {\n                this.form.markAsPristine();\n              }\n            })\n          )\n        ),\n        map(() => <FormControl>this.form.get('quantity')),\n        shareReplay({ bufferSize: 1, refCount: true })\n      );\n    }\n    return this.quantityControl$;\n  }\n\n  ngOnInit() {\n    this.orderPromotions$ = this.promotionService.getOrderPromotions(\n      this.promotionLocation\n    );\n    this.addedEntryWasMerged$ = this.loaded$.pipe(\n      filter((loaded) => loaded),\n      switchMapTo(this.cartService.getEntries()),\n      map((entries) => entries.length === this.numberOfEntriesBeforeAdd)\n    );\n  }\n\n  private getFormControl(entry: OrderEntry): FormControl {\n    if (!this.form.get('quantity')) {\n      const quantity = new FormControl(entry.quantity, { updateOn: 'blur' });\n      this.form.addControl('quantity', quantity);\n\n      const entryNumber = new FormControl(entry.entryNumber);\n      this.form.addControl('entryNumber', entryNumber);\n    }\n    return <FormControl>this.form.get('quantity');\n  }\n\n  dismissModal(reason?: any): void {\n    this.modalService.dismissActiveModal(reason);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { ActiveCartService, Product } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { filter, take } from 'rxjs/operators';\nimport { ModalRef } from '../../../shared/components/modal/modal-ref';\nimport { ModalService } from '../../../shared/components/modal/modal.service';\nimport { CurrentProductService } from '../../product/current-product.service';\nimport { AddedToCartDialogComponent } from './added-to-cart-dialog/added-to-cart-dialog.component';\n\n@Component({\n  selector: 'cx-add-to-cart',\n  templateUrl: './add-to-cart.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddToCartComponent implements OnInit, OnDestroy {\n  @Input() productCode: string;\n  @Input() showQuantity = true;\n\n  /**\n   * As long as we do not support #5026, we require product input, as we need\n   *  a reference to the product model to fetch the stock data.\n   */\n  @Input() product: Product;\n\n  maxQuantity: number;\n  modalRef: ModalRef;\n\n  hasStock = false;\n  quantity = 1;\n  protected numberOfEntriesBeforeAdd = 0;\n\n  subscription: Subscription;\n\n  addToCartForm = new FormGroup({\n    quantity: new FormControl(1),\n  });\n\n  constructor(\n    protected modalService: ModalService,\n    protected currentProductService: CurrentProductService,\n    private cd: ChangeDetectorRef,\n    protected activeCartService: ActiveCartService\n  ) {}\n\n  ngOnInit() {\n    if (this.product) {\n      this.productCode = this.product.code;\n      this.setStockInfo(this.product);\n      this.cd.markForCheck();\n    } else if (this.productCode) {\n      // force hasStock and quantity for the time being, as we do not have more info:\n      this.quantity = 1;\n      this.hasStock = true;\n      this.cd.markForCheck();\n    } else {\n      this.subscription = this.currentProductService\n        .getProduct()\n        .pipe(filter(Boolean))\n        .subscribe((product: Product) => {\n          this.productCode = product.code;\n          this.setStockInfo(product);\n          this.cd.markForCheck();\n        });\n    }\n  }\n\n  private setStockInfo(product: Product): void {\n    this.quantity = 1;\n    this.hasStock =\n      product.stock && product.stock.stockLevelStatus !== 'outOfStock';\n    if (this.hasStock && product.stock.stockLevel) {\n      this.maxQuantity = product.stock.stockLevel;\n    }\n  }\n\n  updateCount(value: number): void {\n    this.quantity = value;\n  }\n\n  addToCart() {\n    const quantity = this.addToCartForm.get('quantity').value;\n    if (!this.productCode || quantity <= 0) {\n      return;\n    }\n    this.activeCartService\n      .getEntries()\n      .pipe(take(1))\n      .subscribe((entries) => {\n        this.numberOfEntriesBeforeAdd = entries.length;\n        this.openModal();\n        this.activeCartService.addEntry(this.productCode, quantity);\n      });\n  }\n\n  private openModal() {\n    let modalInstance: any;\n    this.modalRef = this.modalService.open(AddedToCartDialogComponent, {\n      centered: true,\n      size: 'lg',\n    });\n\n    modalInstance = this.modalRef.componentInstance;\n    // Display last entry for new product code. This always corresponds to\n    // our new item, independently of whether merging occured or not\n    modalInstance.entry$ = this.activeCartService.getLastEntry(\n      this.productCode\n    );\n    modalInstance.cart$ = this.activeCartService.getActive();\n    modalInstance.loaded$ = this.activeCartService.isStable();\n    modalInstance.quantity = this.quantity;\n    modalInstance.numberOfEntriesBeforeAdd = this.numberOfEntriesBeforeAdd;\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { Promotion } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-promotions',\n  templateUrl: './promotions.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PromotionsComponent {\n  @Input()\n  promotions: Promotion[];\n\n  constructor() {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { PromotionsComponent } from './promotions.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [PromotionsComponent],\n  exports: [PromotionsComponent],\n})\nexport class PromotionsModule {}\n","import { Component, Input, ChangeDetectionStrategy } from '@angular/core';\nimport { Voucher, CartVoucherService } from '@spartacus/core';\nimport { ICON_TYPE } from '../../../../cms-components/misc/icon/icon.model';\n\n@Component({\n  selector: 'cx-applied-coupons',\n  templateUrl: './applied-coupons.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AppliedCouponsComponent {\n  @Input()\n  vouchers: Voucher[];\n  @Input()\n  cartIsLoading = false;\n  @Input()\n  isReadOnly = false;\n\n  iconTypes = ICON_TYPE;\n\n  constructor(private cartVoucherService: CartVoucherService) {}\n\n  public get sortedVouchers(): Voucher[] {\n    this.vouchers = this.vouchers || [];\n    return this.vouchers.slice().sort((a, b) => {\n      return a.code.localeCompare(b.code);\n    });\n  }\n\n  removeVoucher(voucherId: string) {\n    this.cartVoucherService.removeVoucher(voucherId);\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  ActiveCartService,\n  Cart,\n  CartVoucherService,\n  CustomerCoupon,\n  CustomerCouponSearchResult,\n  CustomerCouponService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-cart-coupon',\n  templateUrl: './cart-coupon.component.html',\n})\nexport class CartCouponComponent implements OnInit, OnDestroy {\n  MAX_CUSTOMER_COUPON_PAGE = 100;\n  couponForm: FormGroup;\n  cartIsLoading$: Observable<boolean>;\n  cart$: Observable<Cart>;\n  cartId: string;\n  applicableCoupons: CustomerCoupon[];\n\n  private ignoreCloseEvent = false;\n\n  private subscription = new Subscription();\n\n  couponBoxIsActive = false;\n\n  constructor(\n    protected cartVoucherService: CartVoucherService,\n    protected formBuilder: FormBuilder,\n    protected customerCouponService: CustomerCouponService,\n    protected activeCartService: ActiveCartService\n  ) {}\n\n  ngOnInit() {\n    if (this.customerCouponService) {\n      this.customerCouponService.loadCustomerCoupons(\n        this.MAX_CUSTOMER_COUPON_PAGE\n      );\n    }\n\n    this.cart$ = combineLatest([\n      this.activeCartService.getActive(),\n      this.activeCartService.getActiveCartId(),\n      this.customerCouponService.getCustomerCoupons(\n        this.MAX_CUSTOMER_COUPON_PAGE\n      ),\n    ]).pipe(\n      tap(\n        ([cart, activeCardId, customerCoupons]: [\n          Cart,\n          string,\n          CustomerCouponSearchResult\n        ]) => {\n          this.cartId = activeCardId;\n          this.getApplicableCustomerCoupons(cart, customerCoupons.coupons);\n        }\n      ),\n      map(([cart]: [Cart, string, CustomerCouponSearchResult]) => cart)\n    );\n\n    this.cartIsLoading$ = this.activeCartService\n      .isStable()\n      .pipe(map((loaded) => !loaded));\n\n    this.cartVoucherService.resetAddVoucherProcessingState();\n\n    this.couponForm = this.formBuilder.group({\n      couponCode: ['', [Validators.required]],\n    });\n\n    // TODO(#7241): Replace process subscriptions with event listeners and drop process for ADD_VOUCHER\n    this.subscription.add(\n      this.cartVoucherService\n        .getAddVoucherResultSuccess()\n        .subscribe((success) => {\n          this.onSuccess(success);\n        })\n    );\n\n    // TODO(#7241): Replace process subscriptions with event listeners and drop process for ADD_VOUCHER\n    this.subscription.add(\n      this.cartVoucherService.getAddVoucherResultError().subscribe((error) => {\n        this.onError(error);\n      })\n    );\n  }\n\n  protected onError(error: boolean) {\n    if (error) {\n      this.customerCouponService.loadCustomerCoupons(\n        this.MAX_CUSTOMER_COUPON_PAGE\n      );\n      this.cartVoucherService.resetAddVoucherProcessingState();\n    }\n  }\n\n  onSuccess(success: boolean) {\n    if (success) {\n      this.couponForm.reset();\n      this.cartVoucherService.resetAddVoucherProcessingState();\n    }\n  }\n\n  protected getApplicableCustomerCoupons(\n    cart: Cart,\n    coupons: CustomerCoupon[]\n  ): void {\n    this.applicableCoupons = coupons || [];\n    if (cart.appliedVouchers) {\n      cart.appliedVouchers.forEach((appliedVoucher) => {\n        this.applicableCoupons = this.applicableCoupons.filter(\n          (coupon) => coupon.couponId !== appliedVoucher.code\n        );\n      });\n    }\n  }\n\n  applyVoucher(): void {\n    if (this.couponForm.valid) {\n      this.cartVoucherService.addVoucher(\n        this.couponForm.value.couponCode,\n        this.cartId\n      );\n    } else {\n      this.couponForm.markAllAsTouched();\n    }\n  }\n\n  applyCustomerCoupon(couponId: string): void {\n    this.cartVoucherService.addVoucher(couponId, this.cartId);\n    this.couponBoxIsActive = false;\n  }\n\n  close(event: UIEvent): void {\n    if (!this.ignoreCloseEvent) {\n      this.couponBoxIsActive = false;\n      if (event && event.target) {\n        (<HTMLElement>event.target).blur();\n      }\n    }\n    this.ignoreCloseEvent = false;\n  }\n\n  disableClose(): void {\n    this.ignoreCloseEvent = true;\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n    this.cartVoucherService.resetAddVoucherProcessingState();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { AppliedCouponsComponent } from './applied-coupons/applied-coupons.component';\nimport { CartCouponComponent } from './cart-coupon.component';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  declarations: [CartCouponComponent, AppliedCouponsComponent],\n  exports: [CartCouponComponent, AppliedCouponsComponent],\n  imports: [\n    CommonModule,\n    NgSelectModule,\n    FormsModule,\n    ReactiveFormsModule,\n    I18nModule,\n    IconModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CartApplyCouponComponent: {\n          component: CartCouponComponent,\n        },\n      },\n    }),\n  ],\n\n  entryComponents: [CartCouponComponent],\n})\nexport class CartCouponModule {}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport {\n  ActiveCartService,\n  ConsignmentEntry,\n  OrderEntry,\n  PromotionLocation,\n  SelectiveCartService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport { CartItemComponentOptions } from '../cart-item/cart-item.component';\n\n@Component({\n  selector: 'cx-cart-item-list',\n  templateUrl: './cart-item-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartItemListComponent {\n  @Input() readonly = false;\n\n  @Input() hasHeader = true;\n\n  @Input() options: CartItemComponentOptions = {\n    isSaveForLater: false,\n    optionalBtn: null,\n  };\n\n  private _items: OrderEntry[] = [];\n  form: FormGroup;\n\n  @Input('items')\n  // TODO: currently we're getting a new array of items if the cart changes.\n  // pretty annoying as it forces a repaint on the screen,\n  // which is noticable in the UI.\n  set items(items: OrderEntry[]) {\n    this.resolveItems(items);\n    this.createForm();\n  }\n  get items(): OrderEntry[] {\n    return this._items;\n  }\n\n  @Input() promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n\n  @Input('cartIsLoading') set setLoading(value: boolean) {\n    if (!this.readonly) {\n      // Whenver the cart is loading, we disable the complete form\n      // to avoid any user interaction with the cart.\n      value\n        ? this.form.disable({ emitEvent: false })\n        : this.form.enable({ emitEvent: false });\n    }\n  }\n\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected selectiveCartService: SelectiveCartService\n  ) {}\n\n  /**\n   * The items we're getting form the input do not have a consistent model.\n   * In case of a `consignmentEntry`, we need to normalize the data from the orderEntry.\n   */\n  private resolveItems(items: OrderEntry[]): void {\n    if (!items) {\n      this._items = [];\n      return;\n    }\n\n    if (items.every((item) => item.hasOwnProperty('orderEntry'))) {\n      this._items = items.map((consignmentEntry) => {\n        const entry = Object.assign(\n          {},\n          (consignmentEntry as ConsignmentEntry).orderEntry\n        );\n        entry.quantity = consignmentEntry.quantity;\n        return entry;\n      });\n    } else {\n      this._items = items;\n    }\n  }\n\n  private createForm(): void {\n    this.form = new FormGroup({});\n    this._items.forEach((item) => {\n      const controlName = this.getControlName(item);\n      const group = new FormGroup({\n        entryNumber: new FormControl(item.entryNumber),\n        quantity: new FormControl(item.quantity, { updateOn: 'blur' }),\n      });\n      if (!item.updateable || this.readonly) {\n        group.disable();\n      }\n      this.form.addControl(controlName, group);\n    });\n  }\n\n  protected getControlName(item: OrderEntry): string {\n    return item.entryNumber.toString();\n  }\n\n  removeEntry(item: OrderEntry): void {\n    if (this.selectiveCartService && this.options.isSaveForLater) {\n      this.selectiveCartService.removeEntry(item);\n    } else {\n      this.activeCartService.removeEntry(item);\n    }\n    delete this.form.controls[this.getControlName(item)];\n  }\n\n  getControl(item: OrderEntry): Observable<FormGroup> {\n    return this.form.get(this.getControlName(item)).valueChanges.pipe(\n      // tslint:disable-next-line:deprecation\n      startWith(null),\n      map((value) => {\n        if (value && this.selectiveCartService && this.options.isSaveForLater) {\n          this.selectiveCartService.updateEntry(\n            value.entryNumber,\n            value.quantity\n          );\n        } else if (value) {\n          this.activeCartService.updateEntry(value.entryNumber, value.quantity);\n        }\n      }),\n      map(() => <FormGroup>this.form.get(this.getControlName(item)))\n    );\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport {\n  OrderEntry,\n  PromotionLocation,\n  PromotionResult,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { PromotionService } from '../../../../shared/services/promotion/promotion.service';\n\n/**\n * @deprecated since 3.0 - use `OrderEntry` instead\n */\nexport interface Item {\n  entryNumber?: number;\n  product?: any;\n  quantity?: any;\n  basePrice?: any;\n  totalPrice?: any;\n  updateable?: boolean;\n}\n\nexport interface CartItemComponentOptions {\n  isSaveForLater?: boolean;\n  optionalBtn?: any;\n}\n\n@Component({\n  selector: 'cx-cart-item',\n  templateUrl: './cart-item.component.html',\n})\nexport class CartItemComponent implements OnInit {\n  @Input() compact = false;\n  @Input() item: OrderEntry;\n  @Input() readonly = false;\n  @Input() quantityControl: FormControl;\n\n  @Input() promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n\n  // TODO: evaluate whether this is generic enough\n  @Input() options: CartItemComponentOptions = {\n    isSaveForLater: false,\n    optionalBtn: null,\n  };\n\n  appliedProductPromotions$: Observable<PromotionResult[]>;\n\n  constructor(protected promotionService: PromotionService) {}\n\n  ngOnInit() {\n    this.appliedProductPromotions$ = this.promotionService.getProductPromotionForEntry(\n      this.item,\n      this.promotionLocation\n    );\n  }\n\n  isProductOutOfStock(product: any) {\n    // TODO Move stocklevelstatuses across the app to an enum\n    return (\n      product &&\n      product.stock &&\n      product.stock.stockLevelStatus === 'outOfStock'\n    );\n  }\n\n  removeItem() {\n    this.quantityControl.setValue(0);\n    this.quantityControl.markAsDirty();\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { Cart } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-order-summary',\n  templateUrl: './order-summary.component.html',\n})\nexport class OrderSummaryComponent {\n  @Input()\n  cart: Cart;\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { FeaturesConfigModule, I18nModule, UrlModule } from '@spartacus/core';\nimport { ItemCounterModule } from '../../../shared/components/item-counter/item-counter.module';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { ModalModule } from '../../../shared/components/modal/modal.module';\nimport { PromotionsModule } from '../../checkout/components/promotions/promotions.module';\nimport { CartCouponModule } from '../cart-coupon/cart-coupon.module';\nimport { CartItemListComponent } from './cart-item-list/cart-item-list.component';\nimport { CartItemComponent } from './cart-item/cart-item.component';\nimport { OrderSummaryComponent } from './order-summary/order-summary.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    CartCouponModule,\n    ReactiveFormsModule,\n    UrlModule,\n    NgbModule,\n    PromotionsModule,\n    I18nModule,\n    MediaModule,\n    ItemCounterModule,\n    FeaturesConfigModule,\n    ModalModule,\n  ],\n  declarations: [\n    CartItemComponent,\n    OrderSummaryComponent,\n    CartItemListComponent,\n  ],\n  exports: [CartItemComponent, CartItemListComponent, OrderSummaryComponent],\n})\nexport class CartSharedModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { KeyboardFocusModule } from '../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport {\n  ItemCounterModule,\n  ModalModule,\n  SpinnerModule,\n} from '../../../shared/index';\nimport { PromotionsModule } from '../../checkout/components/promotions/promotions.module';\nimport { CartSharedModule } from './../cart-shared/cart-shared.module';\nimport { AddToCartComponent } from './add-to-cart.component';\nimport { AddedToCartDialogComponent } from './added-to-cart-dialog/added-to-cart-dialog.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    CartSharedModule,\n    RouterModule,\n    SpinnerModule,\n    PromotionsModule,\n    FeaturesConfigModule,\n    UrlModule,\n    IconModule,\n    I18nModule,\n    ItemCounterModule,\n    KeyboardFocusModule,\n    ModalModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductAddToCartComponent: {\n          component: AddToCartComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [AddToCartComponent, AddedToCartDialogComponent],\n  entryComponents: [AddToCartComponent, AddedToCartDialogComponent],\n  exports: [AddToCartComponent, AddedToCartDialogComponent],\n})\nexport class AddToCartModule {}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport {\n  ActiveCartService,\n  AuthService,\n  Cart,\n  OrderEntry,\n  PromotionLocation,\n  PromotionResult,\n  RoutingService,\n  SelectiveCartService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport { PromotionService } from '../../../shared/services/promotion/promotion.service';\n\n@Component({\n  selector: 'cx-cart-details',\n  templateUrl: './cart-details.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartDetailsComponent implements OnInit {\n  cart$: Observable<Cart>;\n  entries$: Observable<OrderEntry[]>;\n  cartLoaded$: Observable<boolean>;\n  loggedIn = false;\n  orderPromotions$: Observable<PromotionResult[]>;\n  promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n  promotions$: Observable<PromotionResult[]>;\n  selectiveCartEnabled: boolean;\n\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected promotionService: PromotionService,\n    protected selectiveCartService: SelectiveCartService,\n    protected authService: AuthService,\n    protected routingService: RoutingService\n  ) {}\n\n  ngOnInit() {\n    this.cart$ = this.activeCartService.getActive();\n    this.promotions$ = this.promotionService.getOrderPromotionsFromCart();\n\n    this.entries$ = this.activeCartService\n      .getEntries()\n      .pipe(filter((entries) => entries.length > 0));\n\n    this.selectiveCartEnabled = this.selectiveCartService.isEnabled();\n\n    // TODO(#10547): Switch in 4.0 `selectiveCartService.getLoaded` to `selectiveCartService.isStable` method\n    this.cartLoaded$ = combineLatest([\n      this.activeCartService.isStable(),\n      this.selectiveCartEnabled\n        ? this.selectiveCartService.getLoaded()\n        : of(false),\n      this.authService.isUserLoggedIn(),\n    ]).pipe(\n      tap(([, , loggedIn]) => (this.loggedIn = loggedIn)),\n      map(([cartLoaded, sflLoaded, loggedIn]) =>\n        loggedIn && this.selectiveCartEnabled\n          ? cartLoaded && sflLoaded\n          : cartLoaded\n      )\n    );\n\n    this.orderPromotions$ = this.promotionService.getOrderPromotions(\n      this.promotionLocation\n    );\n  }\n\n  saveForLater(item: OrderEntry) {\n    if (this.loggedIn) {\n      this.activeCartService.removeEntry(item);\n      this.selectiveCartService.addEntry(item.product.code, item.quantity);\n    } else {\n      this.routingService.go({ cxRoute: 'login' });\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { PromotionsModule } from '../../checkout/components/promotions/promotions.module';\nimport { CartSharedModule } from '../cart-shared/cart-shared.module';\nimport { CartCouponModule } from '../cart-coupon/cart-coupon.module';\nimport { CartDetailsComponent } from './cart-details.component';\n\n@NgModule({\n  imports: [\n    CartSharedModule,\n    CommonModule,\n    CartCouponModule,\n    RouterModule,\n    UrlModule,\n    PromotionsModule,\n    FeaturesConfigModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CartComponent: {\n          component: CartDetailsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [CartDetailsComponent],\n  exports: [CartDetailsComponent],\n  entryComponents: [CartDetailsComponent],\n})\nexport class CartDetailsModule {}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { ActiveCartService, Cart, SemanticPathService } from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartNotEmptyGuard implements CanActivate {\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return combineLatest([\n      this.activeCartService.getActive(),\n      this.activeCartService.isStable(),\n    ]).pipe(\n      filter(([_, loaded]) => loaded),\n      map(([cart]) => {\n        if (this.isEmpty(cart)) {\n          return this.router.parseUrl(this.semanticPathService.get('home'));\n        }\n        return true;\n      })\n    );\n  }\n\n  private isEmpty(cart: Cart): boolean {\n    return cart && !cart.totalItems;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActiveCartService, Cart, SelectiveCartService } from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { PageLayoutHandler } from '../../cms-structure/page/page-layout/page-layout-handler';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartPageLayoutHandler implements PageLayoutHandler {\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected selectiveCartService: SelectiveCartService\n  ) {}\n\n  handle(\n    slots$: Observable<string[]>,\n    pageTemplate?: string,\n    section?: string\n  ) {\n    if (pageTemplate === 'CartPageTemplate' && !section) {\n      return combineLatest([\n        slots$,\n        this.activeCartService.getActive(),\n        this.selectiveCartService.isEnabled()\n          ? this.selectiveCartService.getCart()\n          : of({} as Cart),\n        this.activeCartService.getLoading(),\n      ]).pipe(\n        map(([slots, cart, selectiveCart, loadingCart]) => {\n          const exclude = (arr, args) =>\n            arr.filter((item) => args.every((arg) => arg !== item));\n          return Object.keys(cart).length === 0 && loadingCart\n            ? exclude(slots, [\n                'TopContent',\n                'CenterRightContentSlot',\n                'EmptyCartMiddleContent',\n              ])\n            : cart.totalItems\n            ? exclude(slots, ['EmptyCartMiddleContent'])\n            : selectiveCart.totalItems\n            ? exclude(slots, [\n                'EmptyCartMiddleContent',\n                'CenterRightContentSlot',\n              ])\n            : exclude(slots, ['TopContent', 'CenterRightContentSlot']);\n        })\n      );\n    }\n    return slots$;\n  }\n}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { ActiveCartService, Cart, OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-cart-totals',\n  templateUrl: './cart-totals.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CartTotalsComponent implements OnInit {\n  cart$: Observable<Cart>;\n  entries$: Observable<OrderEntry[]>;\n\n  constructor(protected activeCartService: ActiveCartService) {}\n\n  ngOnInit() {\n    this.cart$ = this.activeCartService.getActive();\n    this.entries$ = this.activeCartService\n      .getEntries()\n      .pipe(filter((entries) => entries.length > 0));\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CartCouponModule } from '../cart-coupon/cart-coupon.module';\nimport { CartSharedModule } from '../cart-shared/cart-shared.module';\nimport { CartTotalsComponent } from './cart-totals.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    CartSharedModule,\n    I18nModule,\n    CartCouponModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CartTotalsComponent: {\n          component: CartTotalsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [CartTotalsComponent],\n  exports: [CartTotalsComponent],\n  entryComponents: [CartTotalsComponent],\n})\nexport class CartTotalsModule {}\n","import { InjectionToken } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { BREAKPOINT } from '../../../layout/config/layout-config';\n\nexport const PAGE_LAYOUT_HANDLER = new InjectionToken<PageLayoutHandler[]>(\n  'PageLayoutHandler'\n);\n\nexport interface PageLayoutHandler {\n  handle(\n    slots: Observable<string[]>,\n    pageTemplate?: string,\n    section?: string,\n    breakpoint?: BREAKPOINT\n  ): Observable<string[]>;\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { ActiveCartService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, startWith } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../misc/icon/icon.model';\n\n@Component({\n  selector: 'cx-mini-cart',\n  templateUrl: './mini-cart.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MiniCartComponent {\n  iconTypes = ICON_TYPE;\n\n  quantity$: Observable<number> = this.activeCartService.getActive().pipe(\n    startWith({ deliveryItemsQuantity: 0 }),\n    map((cart) => cart.deliveryItemsQuantity || 0)\n  );\n\n  total$: Observable<string> = this.activeCartService.getActive().pipe(\n    filter((cart) => !!cart.totalPrice),\n    map((cart) => cart.totalPrice.formattedValue)\n  );\n\n  constructor(protected activeCartService: ActiveCartService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { IconModule } from '../../../cms-components/misc/icon/icon.module';\nimport { MiniCartComponent } from './mini-cart.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, IconModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        MiniCartComponent: {\n          component: MiniCartComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [MiniCartComponent],\n  exports: [MiniCartComponent],\n  entryComponents: [MiniCartComponent],\n})\nexport class MiniCartModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  AuthService,\n  OrderEntry,\n  Product,\n  WishListService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/icon.model';\nimport { CurrentProductService } from '../../product/current-product.service';\n\n@Component({\n  selector: 'cx-add-to-wishlist',\n  templateUrl: './add-to-wish-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddToWishListComponent {\n  product$: Observable<Product> = this.currentProductService.getProduct().pipe(\n    filter((product) => Boolean(product)),\n    tap((product) => this.setStockInfo(product))\n  );\n\n  wishListEntries$: Observable<\n    OrderEntry[]\n  > = this.wishListService.getWishList().pipe(\n    filter((wishlist) => Boolean(wishlist)),\n    map((wishList) => wishList.entries)\n  );\n\n  userLoggedIn$: Observable<boolean> = this.authService.isUserLoggedIn();\n  loading$: Observable<boolean> = this.wishListService.getWishListLoading();\n\n  hasStock = false;\n  iconTypes = ICON_TYPE;\n\n  constructor(\n    protected wishListService: WishListService,\n    protected currentProductService: CurrentProductService,\n    protected authService: AuthService\n  ) {}\n\n  add(product: Product): void {\n    this.wishListService.addEntry(product.code);\n  }\n\n  remove(entry: OrderEntry): void {\n    this.wishListService.removeEntry(entry);\n  }\n\n  getProductInWishList(product: Product, entries: OrderEntry[]): OrderEntry {\n    const item = entries.find((entry) => entry.product.code === product.code);\n    return item;\n  }\n\n  private setStockInfo(product: Product): void {\n    this.hasStock =\n      product.stock && product.stock.stockLevelStatus !== 'outOfStock';\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { AddToWishListComponent } from './add-to-wish-list.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, IconModule, RouterModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AddToWishListComponent: {\n          component: AddToWishListComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [AddToWishListComponent],\n  entryComponents: [AddToWishListComponent],\n  exports: [AddToWishListComponent],\n})\nexport class AddToWishListModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  ActiveCartService,\n  Cart,\n  CmsParagraphComponent,\n  CmsService,\n  OrderEntry,\n  SelectiveCartService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-save-for-later',\n  templateUrl: './save-for-later.component.html',\n})\nexport class SaveForLaterComponent implements OnInit {\n  saveForLater$: Observable<Cart>;\n  cart$: Observable<Cart>;\n  entries$: Observable<OrderEntry[]>;\n  cartLoaded$: Observable<boolean>;\n  data$: Observable<CmsParagraphComponent>;\n  isCartEmpty$: Observable<boolean>;\n\n  constructor(\n    protected cmsService: CmsService,\n    protected cartService: ActiveCartService,\n    protected selectiveCartService: SelectiveCartService\n  ) {}\n\n  ngOnInit() {\n    this.isCartEmpty$ = this.cartService\n      .getActive()\n      .pipe(map((cart) => !(cart && cart.totalItems && cart.totalItems > 0)));\n    this.saveForLater$ = this.selectiveCartService.getCart();\n    this.entries$ = this.selectiveCartService\n      .getEntries()\n      .pipe(filter((entries) => entries.length > 0));\n    // TODO(#10547): Switch in 4.0 `selectiveCartService.getLoaded` to `selectiveCartService.isStable` method\n    this.cartLoaded$ = combineLatest([\n      this.cartService.isStable(),\n      this.selectiveCartService.getLoaded(),\n    ]).pipe(map(([cartLoaded, sflLoaded]) => cartLoaded && sflLoaded));\n    this.data$ = this.cmsService.getComponentData(\n      'EmptyCartParagraphComponent'\n    );\n  }\n\n  moveToCart(item: OrderEntry) {\n    this.selectiveCartService.removeEntry(item);\n    this.cartService.addEntry(item.product.code, item.quantity);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  CmsConfig,\n  FeaturesConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { CartSharedModule } from '../cart-shared/cart-shared.module';\nimport { SaveForLaterComponent } from './save-for-later.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, CartSharedModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig | FeaturesConfig>{\n      cmsComponents: {\n        SaveForLaterComponent: {\n          component: SaveForLaterComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [SaveForLaterComponent],\n  exports: [SaveForLaterComponent],\n  entryComponents: [SaveForLaterComponent],\n})\nexport class SaveForLaterModule {}\n","export enum CheckoutStepType {\n  SHIPPING_ADDRESS = 'shippingAddress',\n  DELIVERY_MODE = 'deliveryMode',\n  PAYMENT_DETAILS = 'paymentDetails',\n  REVIEW_ORDER = 'reviewOrder',\n  PAYMENT_TYPE = 'paymentType',\n}\n\nexport const checkoutShippingSteps = [\n  CheckoutStepType.SHIPPING_ADDRESS,\n  CheckoutStepType.DELIVERY_MODE,\n];\n\nexport const checkoutPaymentSteps = [\n  CheckoutStepType.PAYMENT_DETAILS,\n  CheckoutStepType.PAYMENT_TYPE,\n  CheckoutStepType.SHIPPING_ADDRESS,\n];\n\nexport interface CheckoutStep {\n  id: string;\n  name: string;\n  routeName: string;\n  type: Array<CheckoutStepType>;\n  disabled?: boolean;\n}\n","import { NgModule } from '@angular/core';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { CartModule } from '@spartacus/core';\nimport { PAGE_LAYOUT_HANDLER } from '../../cms-structure/page/page-layout/page-layout-handler';\nimport { AddToCartModule } from './add-to-cart/add-to-cart.module';\nimport { CartDetailsModule } from './cart-details/cart-details.module';\nimport { CartPageLayoutHandler } from './cart-page-layout-handler';\nimport { CartSharedModule } from './cart-shared/cart-shared.module';\nimport { CartTotalsModule } from './cart-totals/cart-totals.module';\nimport { MiniCartModule } from './mini-cart/mini-cart.module';\nimport { AddToWishListModule } from './add-to-wishlist/add-to-wish-list.module';\nimport { SaveForLaterModule } from './save-for-later/save-for-later.module';\n@NgModule({\n  imports: [\n    NgbModule,\n    CartDetailsModule,\n    CartTotalsModule,\n    CartSharedModule,\n    SaveForLaterModule,\n  ],\n  exports: [\n    AddToWishListModule,\n    CartDetailsModule,\n    CartTotalsModule,\n    CartSharedModule,\n    AddToCartModule,\n    MiniCartModule,\n    CartModule,\n    SaveForLaterModule,\n  ],\n  declarations: [],\n  providers: [\n    {\n      provide: PAGE_LAYOUT_HANDLER,\n      useExisting: CartPageLayoutHandler,\n      multi: true,\n    },\n  ],\n})\nexport class CartComponentModule {}\n","import { CheckoutStep } from '../model/checkout-step.model';\nimport { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\nexport enum DeliveryModePreferences {\n  FREE = 'FREE',\n  LEAST_EXPENSIVE = 'LEAST_EXPENSIVE', // but not free\n  MOST_EXPENSIVE = 'MOST_EXPENSIVE',\n}\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class CheckoutConfig {\n  checkout?: {\n    /**\n     * Set checkout steps as ordered array of pages.\n     */\n    steps?: Array<CheckoutStep>;\n    /**\n     * Allow for express checkout when default shipping method and payment method are available.\n     */\n    express?: boolean;\n    /**\n     * Default delivery mode for i.a. express checkout. Set preferences in order with general preferences (eg. DeliveryModePreferences.LEAST_EXPENSIVE) or specific delivery codes.\n     */\n    defaultDeliveryMode?: Array<DeliveryModePreferences | string>;\n    /**\n     * Allow for guest checkout.\n     */\n    guest?: boolean;\n  };\n}\n","import { CheckoutStepType } from '../model/checkout-step.model';\nimport { CheckoutConfig, DeliveryModePreferences } from './checkout-config';\n\nexport const defaultCheckoutConfig: CheckoutConfig = {\n  checkout: {\n    steps: [\n      {\n        id: 'shippingAddress',\n        name: 'checkoutProgress.shippingAddress',\n        routeName: 'checkoutShippingAddress',\n        type: [CheckoutStepType.SHIPPING_ADDRESS],\n      },\n      {\n        id: 'deliveryMode',\n        name: 'checkoutProgress.deliveryMode',\n        routeName: 'checkoutDeliveryMode',\n        type: [CheckoutStepType.DELIVERY_MODE],\n      },\n      {\n        id: 'paymentDetails',\n        name: 'checkoutProgress.paymentDetails',\n        routeName: 'checkoutPaymentDetails',\n        type: [CheckoutStepType.PAYMENT_DETAILS],\n      },\n      {\n        id: 'reviewOrder',\n        name: 'checkoutProgress.reviewOrder',\n        routeName: 'checkoutReviewOrder',\n        type: [CheckoutStepType.REVIEW_ORDER],\n      },\n    ],\n    express: false,\n    defaultDeliveryMode: [DeliveryModePreferences.FREE],\n    guest: false,\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { DeliveryMode } from '@spartacus/core';\nimport {\n  CheckoutConfig,\n  DeliveryModePreferences,\n} from '../config/checkout-config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutConfigService {\n  private express: boolean = this.checkoutConfig.checkout.express;\n  private guest: boolean = this.checkoutConfig.checkout.guest;\n  private defaultDeliveryMode: Array<DeliveryModePreferences | string> =\n    this.checkoutConfig.checkout.defaultDeliveryMode || [];\n\n  constructor(private checkoutConfig: CheckoutConfig) {}\n\n  protected compareDeliveryCost(\n    deliveryMode1: DeliveryMode,\n    deliveryMode2: DeliveryMode\n  ): number {\n    if (deliveryMode1.deliveryCost.value > deliveryMode2.deliveryCost.value) {\n      return 1;\n    } else if (\n      deliveryMode1.deliveryCost.value < deliveryMode2.deliveryCost.value\n    ) {\n      return -1;\n    }\n    return 0;\n  }\n\n  protected findMatchingDeliveryMode(\n    deliveryModes: DeliveryMode[],\n    index = 0\n  ): string {\n    switch (this.defaultDeliveryMode[index]) {\n      case DeliveryModePreferences.FREE:\n        if (deliveryModes[0].deliveryCost.value === 0) {\n          return deliveryModes[0].code;\n        }\n        break;\n      case DeliveryModePreferences.LEAST_EXPENSIVE:\n        const leastExpensiveFound = deliveryModes.find(\n          (deliveryMode) => deliveryMode.deliveryCost.value !== 0\n        );\n        if (leastExpensiveFound) {\n          return leastExpensiveFound.code;\n        }\n        break;\n      case DeliveryModePreferences.MOST_EXPENSIVE:\n        return deliveryModes[deliveryModes.length - 1].code;\n      default:\n        const codeFound = deliveryModes.find(\n          (deliveryMode) =>\n            deliveryMode.code === this.defaultDeliveryMode[index]\n        );\n        if (codeFound) {\n          return codeFound.code;\n        }\n    }\n    const lastMode = this.defaultDeliveryMode.length - 1 <= index;\n    return lastMode\n      ? deliveryModes[0].code\n      : this.findMatchingDeliveryMode(deliveryModes, index + 1);\n  }\n\n  getPreferredDeliveryMode(deliveryModes: DeliveryMode[]): string {\n    deliveryModes.sort(this.compareDeliveryCost);\n    return this.findMatchingDeliveryMode(deliveryModes);\n  }\n\n  isExpressCheckout(): boolean {\n    return this.express;\n  }\n\n  isGuestCheckout(): boolean {\n    return this.guest;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport {\n  ActiveCartService,\n  AuthRedirectService,\n  AuthService,\n  B2BUser,\n  B2BUserRole,\n  GlobalMessageService,\n  GlobalMessageType,\n  SemanticPathService,\n  User,\n  UserService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { map, filter } from 'rxjs/operators';\nimport { CheckoutConfigService } from '../services/checkout-config.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutAuthGuard implements CanActivate {\n  constructor(\n    protected authService: AuthService,\n    protected authRedirectService: AuthRedirectService,\n    protected checkoutConfigService: CheckoutConfigService,\n    protected activeCartService: ActiveCartService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router,\n    protected userService: UserService,\n    protected globalMessageService: GlobalMessageService\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return combineLatest([\n      this.authService.isUserLoggedIn(),\n      this.activeCartService.getAssignedUser(),\n      this.userService.get(),\n      this.activeCartService.isStable(),\n    ]).pipe(\n      filter(([, , , isStable]) => Boolean(isStable)),\n      map(\n        ([isLoggedIn, cartUser, user]: [\n          boolean,\n          User,\n          User | B2BUser,\n          boolean\n        ]) => {\n          if (!isLoggedIn) {\n            if (this.activeCartService.isGuestCart()) {\n              return Boolean(cartUser);\n            }\n            this.authRedirectService.reportAuthGuard();\n            if (this.checkoutConfigService.isGuestCheckout()) {\n              return this.router.createUrlTree(\n                [this.semanticPathService.get('login')],\n                { queryParams: { forced: true } }\n              );\n            } else {\n              return this.router.parseUrl(\n                this.semanticPathService.get('login')\n              );\n            }\n          } else if ('roles' in user) {\n            const roles = (<B2BUser>user).roles;\n            if (roles.includes(B2BUserRole.CUSTOMER)) {\n              return true;\n            }\n            this.globalMessageService.add(\n              { key: 'checkout.invalid.accountType' },\n              GlobalMessageType.MSG_TYPE_WARNING\n            );\n            return false;\n          }\n          return isLoggedIn;\n        }\n      )\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { RoutingConfigService, RoutingService } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { CheckoutConfig } from '../config/checkout-config';\nimport { CheckoutStep, CheckoutStepType } from '../model/checkout-step.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutStepService {\n  // initial enabled steps\n  allSteps: CheckoutStep[];\n\n  readonly steps$: BehaviorSubject<CheckoutStep[]> = new BehaviorSubject<\n    CheckoutStep[]\n  >(undefined);\n\n  readonly activeStepIndex$: Observable<\n    number\n  > = this.routingService.getRouterState().pipe(\n    switchMap((router) => {\n      const activeStepUrl = router.state.context.id;\n      return this.steps$.pipe(\n        map((steps) => {\n          let activeIndex;\n          steps.forEach((step, index) => {\n            const routeUrl = `/${\n              this.routingConfigService.getRouteConfig(step.routeName).paths[0]\n            }`;\n            if (routeUrl === activeStepUrl) {\n              activeIndex = index;\n            }\n          });\n          return activeIndex;\n        })\n      );\n    })\n  );\n\n  constructor(\n    protected routingService: RoutingService,\n    protected checkoutConfig: CheckoutConfig,\n    protected routingConfigService: RoutingConfigService\n  ) {\n    this.resetSteps();\n  }\n\n  back(activatedRoute: ActivatedRoute): void {\n    const previousUrl = this.getPreviousCheckoutStepUrl(activatedRoute);\n    this.routingService.go(previousUrl === null ? 'cart' : previousUrl);\n  }\n\n  next(activatedRoute: ActivatedRoute): void {\n    const nextUrl = this.getNextCheckoutStepUrl(activatedRoute);\n    this.routingService.go(nextUrl);\n  }\n\n  goToStepWithIndex(stepIndex: number): void {\n    this.routingService.go(\n      this.getStepUrlFromStepRoute(this.allSteps[stepIndex].routeName)\n    );\n  }\n\n  getBackBntText(activatedRoute: ActivatedRoute): string {\n    if (this.getPreviousCheckoutStepUrl(activatedRoute) === null) {\n      return 'checkout.backToCart';\n    }\n    return 'common.back';\n  }\n\n  resetSteps(): void {\n    this.allSteps = this.checkoutConfig.checkout.steps\n      .filter((step) => !step.disabled)\n      .map((x) => Object.assign({}, x));\n    this.steps$.next(this.allSteps);\n  }\n\n  disableEnableStep(\n    currentStepType: CheckoutStepType,\n    disabled: boolean\n  ): void {\n    const currentStep = this.allSteps.find((step) =>\n      step.type.includes(currentStepType)\n    );\n    if (currentStep && currentStep.disabled !== disabled) {\n      currentStep.disabled = disabled;\n      this.steps$.next(this.allSteps.filter((step) => !step.disabled));\n    }\n  }\n\n  getCheckoutStep(currentStepType: CheckoutStepType): CheckoutStep {\n    return this.allSteps[this.getCheckoutStepIndex('type', currentStepType)];\n  }\n\n  getCheckoutStepRoute(currentStepType: CheckoutStepType): string {\n    return this.getCheckoutStep(currentStepType).routeName;\n  }\n\n  getFirstCheckoutStepRoute(): string {\n    return this.allSteps[0].routeName;\n  }\n\n  getNextCheckoutStepUrl(activatedRoute: ActivatedRoute): string {\n    const stepIndex = this.getCurrentStepIndex(activatedRoute);\n\n    if (stepIndex >= 0) {\n      let i = 1;\n      while (\n        this.allSteps[stepIndex + i] &&\n        this.allSteps[stepIndex + i].disabled\n      ) {\n        i++;\n      }\n      const nextStep = this.allSteps[stepIndex + i];\n      if (nextStep) {\n        return this.getStepUrlFromStepRoute(nextStep.routeName);\n      }\n    }\n    return null;\n  }\n\n  getPreviousCheckoutStepUrl(activatedRoute: ActivatedRoute): string {\n    const stepIndex = this.getCurrentStepIndex(activatedRoute);\n\n    if (stepIndex >= 0) {\n      let i = 1;\n      while (\n        this.allSteps[stepIndex - i] &&\n        this.allSteps[stepIndex - i].disabled\n      ) {\n        i++;\n      }\n      const previousStep = this.allSteps[stepIndex - i];\n      if (previousStep) {\n        return this.getStepUrlFromStepRoute(previousStep.routeName);\n      }\n    }\n    return null;\n  }\n\n  getCurrentStepIndex(activatedRoute: ActivatedRoute): number {\n    const currentStepUrl: string = this.getStepUrlFromActivatedRoute(\n      activatedRoute\n    );\n\n    const stepIndex = this.allSteps.findIndex(\n      (step) =>\n        currentStepUrl === `/${this.getStepUrlFromStepRoute(step.routeName)}`\n    );\n    return stepIndex === -1 ? null : stepIndex;\n  }\n\n  private getStepUrlFromActivatedRoute(\n    activatedRoute: ActivatedRoute\n  ): string | null {\n    return activatedRoute &&\n      activatedRoute.snapshot &&\n      activatedRoute.snapshot.url\n      ? `/${activatedRoute.snapshot.url.join('/')}`\n      : null;\n  }\n\n  private getStepUrlFromStepRoute(stepRoute: string): string {\n    return this.routingConfigService.getRouteConfig(stepRoute).paths[0];\n  }\n\n  private getCheckoutStepIndex(key: string, value: any): number | null {\n    return key && value\n      ? this.allSteps.findIndex((step: CheckoutStep) =>\n          step[key].includes(value)\n        )\n      : null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  ActiveCartService,\n  Address,\n  CheckoutDeliveryService,\n  CheckoutPaymentService,\n  CheckoutService,\n  OCC_USER_ID_ANONYMOUS,\n  PaymentDetails,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  filter,\n  map,\n  shareReplay,\n  skipWhile,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutDetailsService {\n  cartId$: Observable<string>;\n  getCheckoutDetailsLoaded$: Observable<boolean>;\n\n  constructor(\n    protected checkoutService: CheckoutService,\n    protected checkoutDeliveryService: CheckoutDeliveryService,\n    protected checkoutPaymentService: CheckoutPaymentService,\n    protected activeCartService: ActiveCartService\n  ) {\n    this.cartId$ = this.activeCartService.getActive().pipe(\n      map((cartData) => {\n        if (\n          (cartData.user && cartData.user.uid === OCC_USER_ID_ANONYMOUS) ||\n          this.activeCartService.isGuestCart()\n        ) {\n          return cartData.guid;\n        }\n        return cartData.code;\n      }),\n      filter((cartId) => !!cartId)\n    );\n\n    this.getCheckoutDetailsLoaded$ = this.cartId$.pipe(\n      tap((cartId) => this.checkoutService.loadCheckoutDetails(cartId)),\n      shareReplay(1),\n      switchMap(() => this.checkoutService.getCheckoutDetailsLoaded()),\n      skipWhile((loaded) => !loaded)\n    );\n  }\n\n  getDeliveryAddress(): Observable<Address> {\n    return this.getCheckoutDetailsLoaded$.pipe(\n      switchMap(() => this.checkoutDeliveryService.getDeliveryAddress())\n    );\n  }\n\n  getSelectedDeliveryModeCode(): Observable<string> {\n    return this.getCheckoutDetailsLoaded$.pipe(\n      switchMap(() =>\n        this.checkoutDeliveryService.getSelectedDeliveryModeCode()\n      )\n    );\n  }\n\n  getPaymentDetails(): Observable<PaymentDetails> {\n    return this.getCheckoutDetailsLoaded$.pipe(\n      switchMap(() => this.checkoutPaymentService.getPaymentDetails())\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { combineLatest, of, Observable } from 'rxjs';\nimport { filter, map, switchMap, tap, debounceTime } from 'rxjs/operators';\n\nimport {\n  Address,\n  CheckoutDeliveryService,\n  UserAddressService,\n  UserPaymentService,\n  PaymentDetails,\n  DeliveryMode,\n  CheckoutPaymentService,\n  StateUtils,\n} from '@spartacus/core';\nimport { CheckoutConfigService } from './checkout-config.service';\nimport { CheckoutDetailsService } from './checkout-details.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ExpressCheckoutService {\n  private shippingAddressSet$: Observable<boolean>;\n  private deliveryModeSet$: Observable<boolean>;\n  private paymentMethodSet$: Observable<boolean>;\n\n  constructor(\n    protected userAddressService: UserAddressService,\n    protected userPaymentService: UserPaymentService,\n    protected checkoutDeliveryService: CheckoutDeliveryService,\n    protected checkoutPaymentService: CheckoutPaymentService,\n    protected checkoutDetailsService: CheckoutDetailsService,\n    protected checkoutConfigService: CheckoutConfigService\n  ) {\n    this.setShippingAddress();\n    this.setDeliveryMode();\n    this.setPaymentMethod();\n  }\n\n  protected setShippingAddress() {\n    this.shippingAddressSet$ = combineLatest([\n      this.userAddressService.getAddresses(),\n      this.userAddressService.getAddressesLoadedSuccess(),\n      this.checkoutDeliveryService.getSetDeliveryAddressProcess(),\n    ]).pipe(\n      debounceTime(0),\n      tap(\n        ([, addressesLoadedSuccess]: [\n          Address[],\n          boolean,\n          StateUtils.LoaderState<void>\n        ]) => {\n          if (!addressesLoadedSuccess) {\n            this.userAddressService.loadAddresses();\n          }\n        }\n      ),\n      filter(\n        ([, addressesLoadedSuccess]: [\n          Address[],\n          boolean,\n          StateUtils.LoaderState<void>\n        ]) => addressesLoadedSuccess\n      ),\n      switchMap(\n        ([addresses, , setDeliveryAddressProcess]: [\n          Address[],\n          boolean,\n          StateUtils.LoaderState<void>\n        ]) => {\n          const defaultAddress =\n            addresses.find((address) => address.defaultAddress) || addresses[0];\n          if (defaultAddress && Object.keys(defaultAddress).length) {\n            if (\n              !(\n                setDeliveryAddressProcess.success ||\n                setDeliveryAddressProcess.error ||\n                setDeliveryAddressProcess.loading\n              )\n            ) {\n              this.checkoutDeliveryService.setDeliveryAddress(defaultAddress);\n            }\n            return of(setDeliveryAddressProcess).pipe(\n              filter(\n                (\n                  setDeliveryAddressProcessState: StateUtils.LoaderState<void>\n                ) => {\n                  return (\n                    (setDeliveryAddressProcessState.success ||\n                      setDeliveryAddressProcessState.error) &&\n                    !setDeliveryAddressProcessState.loading\n                  );\n                }\n              ),\n              switchMap(\n                (\n                  setDeliveryAddressProcessState: StateUtils.LoaderState<void>\n                ) => {\n                  if (setDeliveryAddressProcessState.success) {\n                    return this.checkoutDetailsService.getDeliveryAddress();\n                  }\n                  return of(false);\n                }\n              ),\n              map((data) => Boolean(data && Object.keys(data).length))\n            );\n          }\n          return of(false);\n        }\n      )\n    );\n  }\n\n  protected setPaymentMethod() {\n    this.paymentMethodSet$ = combineLatest([\n      this.userPaymentService.getPaymentMethods(),\n      this.userPaymentService.getPaymentMethodsLoadedSuccess(),\n      this.checkoutPaymentService.getSetPaymentDetailsResultProcess(),\n    ]).pipe(\n      debounceTime(0),\n      tap(\n        ([, paymentMethodsLoadedSuccess]: [\n          PaymentDetails[],\n          boolean,\n          StateUtils.LoaderState<void>\n        ]) => {\n          if (!paymentMethodsLoadedSuccess) {\n            this.userPaymentService.loadPaymentMethods();\n          }\n        }\n      ),\n      filter(\n        ([, success]: [\n          PaymentDetails[],\n          boolean,\n          StateUtils.LoaderState<void>\n        ]) => success\n      ),\n      switchMap(\n        ([payments, , setPaymentDetailsProcess]: [\n          PaymentDetails[],\n          boolean,\n          StateUtils.LoaderState<void>\n        ]) => {\n          const defaultPayment =\n            payments.find((address) => address.defaultPayment) || payments[0];\n          if (defaultPayment && Object.keys(defaultPayment).length) {\n            if (\n              !(\n                setPaymentDetailsProcess.success ||\n                setPaymentDetailsProcess.error ||\n                setPaymentDetailsProcess.loading\n              )\n            ) {\n              this.checkoutPaymentService.setPaymentDetails(defaultPayment);\n            }\n            return of(setPaymentDetailsProcess).pipe(\n              filter(\n                (\n                  setPaymentDetailsProcessState: StateUtils.LoaderState<void>\n                ) => {\n                  return (\n                    (setPaymentDetailsProcessState.success ||\n                      setPaymentDetailsProcessState.error) &&\n                    !setPaymentDetailsProcessState.loading\n                  );\n                }\n              ),\n              switchMap(\n                (\n                  setPaymentDetailsProcessState: StateUtils.LoaderState<void>\n                ) => {\n                  if (setPaymentDetailsProcessState.success) {\n                    return this.checkoutDetailsService.getPaymentDetails();\n                  }\n                  return of(false);\n                }\n              ),\n              map((data) => Boolean(data && Object.keys(data).length))\n            );\n          }\n          return of(false);\n        }\n      )\n    );\n  }\n\n  protected setDeliveryMode() {\n    this.deliveryModeSet$ = combineLatest([\n      this.shippingAddressSet$,\n      this.checkoutDeliveryService.getSupportedDeliveryModes(),\n      this.checkoutDeliveryService.getSetDeliveryModeProcess(),\n      this.checkoutDeliveryService.getLoadSupportedDeliveryModeProcess(),\n    ]).pipe(\n      debounceTime(0),\n      switchMap(\n        ([\n          addressSet,\n          supportedDeliveryModes,\n          setDeliveryModeStatusFlag,\n          loadSupportedDeliveryModeStatus,\n        ]: [\n          boolean,\n          DeliveryMode[],\n          StateUtils.LoaderState<void>,\n          StateUtils.LoaderState<void>\n        ]) => {\n          if (addressSet) {\n            return of([\n              supportedDeliveryModes,\n              setDeliveryModeStatusFlag,\n              loadSupportedDeliveryModeStatus,\n            ]).pipe(\n              filter(\n                ([, , supportedDeliveryModeStatus]: [\n                  DeliveryMode[],\n                  StateUtils.LoaderState<void>,\n                  StateUtils.LoaderState<void>\n                ]) => supportedDeliveryModeStatus.success\n              ),\n              switchMap(\n                ([deliveryModes, setDeliveryModeStatus, ,]: [\n                  DeliveryMode[],\n                  StateUtils.LoaderState<void>,\n                  StateUtils.LoaderState<void>\n                ]) => {\n                  if (Boolean(deliveryModes.length)) {\n                    const preferredDeliveryMode = this.checkoutConfigService.getPreferredDeliveryMode(\n                      deliveryModes\n                    );\n                    return of([\n                      preferredDeliveryMode,\n                      setDeliveryModeStatus,\n                    ]).pipe(\n                      tap(\n                        ([deliveryMode, deliveryModeLoadingStatus]: [\n                          string,\n                          StateUtils.LoaderState<void>\n                        ]) => {\n                          if (\n                            deliveryMode &&\n                            !(\n                              deliveryModeLoadingStatus.success ||\n                              deliveryModeLoadingStatus.error ||\n                              deliveryModeLoadingStatus.loading\n                            )\n                          ) {\n                            this.checkoutDeliveryService.setDeliveryMode(\n                              deliveryMode\n                            );\n                          }\n                        }\n                      ),\n                      filter(\n                        ([, deliveryModeLoadingStatus]: [\n                          string,\n                          StateUtils.LoaderState<void>\n                        ]) => {\n                          return (\n                            (deliveryModeLoadingStatus.success ||\n                              deliveryModeLoadingStatus.error) &&\n                            !deliveryModeLoadingStatus.loading\n                          );\n                        }\n                      ),\n                      switchMap(\n                        ([, deliveryModeLoadingStatus]: [\n                          string,\n                          StateUtils.LoaderState<void>\n                        ]) => {\n                          if (deliveryModeLoadingStatus.success) {\n                            return this.checkoutDetailsService.getSelectedDeliveryModeCode();\n                          }\n                          return of(false);\n                        }\n                      ),\n                      map((data) => Boolean(data))\n                    );\n                  }\n                  return of(false);\n                }\n              )\n            );\n          } else {\n            return of(false);\n          }\n        }\n      )\n    );\n  }\n\n  protected resetCheckoutProcesses() {\n    this.checkoutDeliveryService.resetSetDeliveryAddressProcess();\n    this.checkoutPaymentService.resetSetPaymentDetailsProcess();\n    this.checkoutDeliveryService.resetSetDeliveryModeProcess();\n  }\n\n  public trySetDefaultCheckoutDetails(): Observable<boolean> {\n    this.resetCheckoutProcesses();\n    return combineLatest([this.deliveryModeSet$, this.paymentMethodSet$]).pipe(\n      map(([deliveryModeSet, paymentMethodSet]) =>\n        Boolean(deliveryModeSet && paymentMethodSet)\n      )\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { ActiveCartService, RoutingConfigService } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { CheckoutStepType } from '../model/checkout-step.model';\nimport { CheckoutConfigService } from '../services/checkout-config.service';\nimport { CheckoutStepService } from '../services/checkout-step.service';\nimport { ExpressCheckoutService } from '../services/express-checkout.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutGuard implements CanActivate {\n  private readonly firstStep$: Observable<UrlTree>;\n\n  constructor(\n    protected router: Router,\n    protected routingConfigService: RoutingConfigService,\n    protected checkoutConfigService: CheckoutConfigService,\n    protected expressCheckoutService: ExpressCheckoutService,\n    protected activeCartService: ActiveCartService,\n    protected checkoutStepService: CheckoutStepService\n  ) {\n    this.firstStep$ = of(\n      this.router.parseUrl(\n        this.routingConfigService.getRouteConfig(\n          this.checkoutStepService.getFirstCheckoutStepRoute()\n        ).paths[0]\n      )\n    );\n  }\n\n  canActivate(): Observable<boolean | UrlTree> {\n    if (\n      this.checkoutConfigService.isExpressCheckout() &&\n      !this.activeCartService.isGuestCart()\n    ) {\n      return this.expressCheckoutService.trySetDefaultCheckoutDetails().pipe(\n        switchMap((expressCheckoutPossible: boolean) => {\n          return expressCheckoutPossible\n            ? of(\n                this.router.parseUrl(\n                  this.routingConfigService.getRouteConfig(\n                    this.checkoutStepService.getCheckoutStepRoute(\n                      CheckoutStepType.REVIEW_ORDER\n                    )\n                  ).paths[0]\n                )\n              )\n            : this.firstStep$;\n        })\n      );\n    }\n    return this.firstStep$;\n  }\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'cx-checkout-orchestrator',\n  templateUrl: './checkout-orchestrator.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CheckoutOrchestratorComponent {\n  constructor() {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { defaultCheckoutConfig } from '../../config/default-checkout-config';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { CheckoutGuard } from '../../guards/checkout.guard';\nimport { CartNotEmptyGuard } from './../../../../cms-components/cart/cart-not-empty.guard';\nimport { CheckoutOrchestratorComponent } from './checkout-orchestrator.component';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(defaultCheckoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutOrchestrator: {\n          component: CheckoutOrchestratorComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [CheckoutOrchestratorComponent],\n  entryComponents: [CheckoutOrchestratorComponent],\n  exports: [CheckoutOrchestratorComponent],\n})\nexport class CheckoutOrchestratorModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { ActiveCartService, Cart } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n@Component({\n  selector: 'cx-checkout-order-summary',\n  templateUrl: './checkout-order-summary.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CheckoutOrderSummaryComponent {\n  cart$: Observable<Cart>;\n\n  constructor(protected activeCartService: ActiveCartService) {\n    this.cart$ = this.activeCartService.getActive();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { CartSharedModule } from '../../../../cms-components/cart/cart-shared/cart-shared.module';\nimport { CheckoutOrderSummaryComponent } from './checkout-order-summary.component';\n\n@NgModule({\n  imports: [CommonModule, CartSharedModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutOrderSummary: {\n          component: CheckoutOrderSummaryComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [CheckoutOrderSummaryComponent],\n  entryComponents: [CheckoutOrderSummaryComponent],\n  exports: [CheckoutOrderSummaryComponent],\n})\nexport class CheckoutOrderSummaryModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CheckoutStep } from '../../../model/checkout-step.model';\nimport { CheckoutStepService } from '../../../services/checkout-step.service';\n\n@Component({\n  selector: 'cx-checkout-progress-mobile-bottom',\n  templateUrl: './checkout-progress-mobile-bottom.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CheckoutProgressMobileBottomComponent {\n  private _steps$: BehaviorSubject<CheckoutStep[]> = this.checkoutStepService\n    .steps$;\n\n  constructor(protected checkoutStepService: CheckoutStepService) {}\n\n  activeStepIndex: number;\n  activeStepIndex$: Observable<\n    number\n  > = this.checkoutStepService.activeStepIndex$.pipe(\n    tap((index) => (this.activeStepIndex = index))\n  );\n\n  get steps$(): Observable<CheckoutStep[]> {\n    return this._steps$.asObservable();\n  }\n}\n","import { Injectable, isDevMode } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  Router,\n  RouterStateSnapshot,\n  UrlTree,\n} from '@angular/router';\nimport {\n  CheckoutCostCenterService,\n  PaymentTypeService,\n  RoutingConfigService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map, switchMap, take, tap } from 'rxjs/operators';\nimport { CheckoutStep, CheckoutStepType } from '../model/checkout-step.model';\nimport { CheckoutDetailsService } from '../services/checkout-details.service';\nimport { CheckoutStepService } from '../services/checkout-step.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutStepsSetGuard implements CanActivate {\n  constructor(\n    protected paymentTypeService: PaymentTypeService,\n    protected checkoutStepService: CheckoutStepService,\n    protected checkoutDetailsService: CheckoutDetailsService,\n    protected routingConfigService: RoutingConfigService,\n    protected checkoutCostCenterService: CheckoutCostCenterService,\n    protected router: Router\n  ) {}\n\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    _: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    let currentIndex = -1;\n    const currentRouteUrl = '/' + route.url.join('/');\n\n    // check whether the previous step is set\n    return combineLatest([\n      this.checkoutStepService.steps$,\n      this.paymentTypeService.isAccountPayment(),\n    ]).pipe(\n      tap(([, isAccount]) => {\n        this.checkoutStepService.disableEnableStep(\n          CheckoutStepType.PAYMENT_DETAILS,\n          isAccount\n        );\n      }),\n      take(1),\n      switchMap(([steps, isAccount]) => {\n        currentIndex = steps.findIndex((step) => {\n          const stepRouteUrl = `/${\n            this.routingConfigService.getRouteConfig(step.routeName).paths[0]\n          }`;\n          return stepRouteUrl === currentRouteUrl;\n        });\n        // get current step\n        let currentStep: CheckoutStep;\n        if (currentIndex >= 0) {\n          currentStep = steps[currentIndex];\n        }\n        if (Boolean(currentStep)) {\n          return this.isStepSet(steps[currentIndex - 1], isAccount);\n        } else {\n          if (isDevMode()) {\n            console.warn(\n              `Missing step with route '${currentRouteUrl}' in checkout configuration or this step is disabled.`\n            );\n          }\n          return of(this.getUrl('checkout'));\n        }\n      })\n    );\n  }\n\n  protected isStepSet(\n    step: CheckoutStep,\n    isAccountPayment\n  ): Observable<boolean | UrlTree> {\n    if (step && !step.disabled) {\n      switch (step.type[0]) {\n        case CheckoutStepType.PAYMENT_TYPE: {\n          return this.isPaymentTypeSet(step);\n        }\n        case CheckoutStepType.SHIPPING_ADDRESS: {\n          return this.isShippingAddressAndCostCenterSet(step, isAccountPayment);\n        }\n        case CheckoutStepType.DELIVERY_MODE: {\n          return this.isDeliveryModeSet(step);\n        }\n        case CheckoutStepType.PAYMENT_DETAILS: {\n          return this.isPaymentDetailsSet(step);\n        }\n        case CheckoutStepType.REVIEW_ORDER: {\n          break;\n        }\n      }\n    }\n    return of(true);\n  }\n\n  protected isPaymentTypeSet(\n    step: CheckoutStep\n  ): Observable<boolean | UrlTree> {\n    return this.paymentTypeService.getSelectedPaymentType().pipe(\n      map((paymentType: string) => {\n        if (Boolean(paymentType)) {\n          return true;\n        } else {\n          return this.getUrl(step.routeName);\n        }\n      })\n    );\n  }\n\n  protected isShippingAddressAndCostCenterSet(\n    step: CheckoutStep,\n    isAccountPayment: boolean\n  ): Observable<boolean | UrlTree> {\n    return combineLatest([\n      this.checkoutDetailsService.getDeliveryAddress(),\n      this.checkoutCostCenterService.getCostCenter(),\n    ]).pipe(\n      map(([deliveryAddress, costCenter]) => {\n        if (isAccountPayment) {\n          if (\n            deliveryAddress &&\n            Object.keys(deliveryAddress).length &&\n            Boolean(costCenter)\n          ) {\n            return true;\n          } else {\n            return this.getUrl(step.routeName);\n          }\n        } else {\n          if (\n            deliveryAddress &&\n            Object.keys(deliveryAddress).length &&\n            costCenter === undefined\n          ) {\n            return true;\n          } else {\n            return this.getUrl(step.routeName);\n          }\n        }\n      })\n    );\n  }\n\n  protected isDeliveryModeSet(\n    step: CheckoutStep\n  ): Observable<boolean | UrlTree> {\n    return this.checkoutDetailsService\n      .getSelectedDeliveryModeCode()\n      .pipe(\n        map((mode: string) =>\n          mode && mode.length ? true : this.getUrl(step.routeName)\n        )\n      );\n  }\n\n  protected isPaymentDetailsSet(\n    step: CheckoutStep\n  ): Observable<boolean | UrlTree> {\n    return this.checkoutDetailsService\n      .getPaymentDetails()\n      .pipe(\n        map((paymentDetails) =>\n          paymentDetails && Object.keys(paymentDetails).length !== 0\n            ? true\n            : this.getUrl(step.routeName)\n        )\n      );\n  }\n\n  private getUrl(routeName: string): UrlTree {\n    return this.router.parseUrl(\n      this.routingConfigService.getRouteConfig(routeName).paths[0]\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { defaultCheckoutConfig } from '../../../config/default-checkout-config';\nimport { CheckoutAuthGuard } from '../../../guards/checkout-auth.guard';\nimport { CartNotEmptyGuard } from './../../../../../cms-components/cart/cart-not-empty.guard';\nimport { CheckoutProgressMobileBottomComponent } from './checkout-progress-mobile-bottom.component';\nimport { CheckoutStepsSetGuard } from '../../../guards/checkout-steps-set.guard';\n\n@NgModule({\n  imports: [CommonModule, UrlModule, I18nModule, RouterModule],\n  providers: [\n    provideDefaultConfig(defaultCheckoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutProgressMobileBottom: {\n          component: CheckoutProgressMobileBottomComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [CheckoutProgressMobileBottomComponent],\n  entryComponents: [CheckoutProgressMobileBottomComponent],\n  exports: [CheckoutProgressMobileBottomComponent],\n})\nexport class CheckoutProgressMobileBottomModule {}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { ActiveCartService, Cart } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CheckoutStep } from '../../../model/checkout-step.model';\nimport { CheckoutStepService } from '../../../services/checkout-step.service';\n\n@Component({\n  selector: 'cx-checkout-progress-mobile-top',\n  templateUrl: './checkout-progress-mobile-top.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CheckoutProgressMobileTopComponent implements OnInit {\n  private _steps$: BehaviorSubject<CheckoutStep[]> = this.checkoutStepService\n    .steps$;\n\n  constructor(\n    protected activeCartService: ActiveCartService,\n    protected checkoutStepService: CheckoutStepService\n  ) {}\n\n  cart$: Observable<Cart>;\n\n  activeStepIndex: number;\n  activeStepIndex$: Observable<\n    number\n  > = this.checkoutStepService.activeStepIndex$.pipe(\n    tap((index) => (this.activeStepIndex = index))\n  );\n\n  get steps$(): Observable<CheckoutStep[]> {\n    return this._steps$.asObservable();\n  }\n\n  ngOnInit(): void {\n    this.cart$ = this.activeCartService.getActive();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { defaultCheckoutConfig } from '../../../config/default-checkout-config';\nimport { CheckoutAuthGuard } from '../../../guards/checkout-auth.guard';\nimport { CartNotEmptyGuard } from './../../../../../cms-components/cart/cart-not-empty.guard';\nimport { CheckoutProgressMobileTopComponent } from './checkout-progress-mobile-top.component';\nimport { CheckoutStepsSetGuard } from '../../../guards/checkout-steps-set.guard';\n\n@NgModule({\n  imports: [CommonModule, UrlModule, I18nModule, RouterModule],\n  providers: [\n    provideDefaultConfig(defaultCheckoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutProgressMobileTop: {\n          component: CheckoutProgressMobileTopComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [CheckoutProgressMobileTopComponent],\n  entryComponents: [CheckoutProgressMobileTopComponent],\n  exports: [CheckoutProgressMobileTopComponent],\n})\nexport class CheckoutProgressMobileTopModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { CheckoutStep } from '../../model/checkout-step.model';\nimport { CheckoutStepService } from '../../services/checkout-step.service';\n\n@Component({\n  selector: 'cx-checkout-progress',\n  templateUrl: './checkout-progress.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CheckoutProgressComponent {\n  private _steps$: BehaviorSubject<CheckoutStep[]> = this.checkoutStepService\n    .steps$;\n\n  constructor(protected checkoutStepService: CheckoutStepService) {}\n\n  activeStepIndex: number;\n  activeStepIndex$: Observable<\n    number\n  > = this.checkoutStepService.activeStepIndex$.pipe(\n    tap((index) => (this.activeStepIndex = index))\n  );\n\n  get steps$(): Observable<CheckoutStep[]> {\n    return this._steps$.asObservable();\n  }\n\n  getTabIndex(stepIndex: number): number {\n    return !this.isActive(stepIndex) && !this.isDisabled(stepIndex) ? 0 : -1;\n  }\n\n  isActive(index: number): boolean {\n    return index === this.activeStepIndex;\n  }\n\n  isDisabled(index: number): boolean {\n    return index > this.activeStepIndex;\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'cxMultiLine',\n})\nexport class MultiLinePipe implements PipeTransform {\n  transform(value: string): string {\n    const lastIndex = value.lastIndexOf(' ');\n\n    if (lastIndex === -1) return value;\n\n    return (\n      value.substring(0, lastIndex) +\n      '<br />' +\n      value.substring(lastIndex, value.length).trim()\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { defaultCheckoutConfig } from '../../config/default-checkout-config';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { CheckoutStepsSetGuard } from '../../guards/checkout-steps-set.guard';\nimport { CartNotEmptyGuard } from './../../../../cms-components/cart/cart-not-empty.guard';\nimport { CheckoutProgressComponent } from './checkout-progress.component';\nimport { MultiLinePipe } from './multiline-titles.pipe';\n\n@NgModule({\n  imports: [CommonModule, UrlModule, I18nModule, RouterModule],\n  declarations: [CheckoutProgressComponent, MultiLinePipe],\n  entryComponents: [CheckoutProgressComponent],\n  exports: [CheckoutProgressComponent],\n  providers: [\n    provideDefaultConfig(defaultCheckoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutProgress: {\n          component: CheckoutProgressComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutStepsSetGuard],\n        },\n      },\n    }),\n  ],\n})\nexport class CheckoutProgressModule {}\n","import { Injectable } from '@angular/core';\nimport { CanActivate } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nimport { CheckoutDetailsService } from '../services/checkout-details.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutDetailsLoadedGuard implements CanActivate {\n  constructor(private checkoutDetailsService: CheckoutDetailsService) {}\n\n  canActivate(): Observable<boolean> {\n    return this.checkoutDetailsService.getCheckoutDetailsLoaded$;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport {\n  ActiveCartService,\n  AuthService,\n  SemanticPathService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NotCheckoutAuthGuard implements CanActivate {\n  constructor(\n    protected authService: AuthService,\n    protected activeCartService: ActiveCartService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return this.authService.isUserLoggedIn().pipe(\n      map((isLoggedIn) => {\n        if (isLoggedIn) {\n          return this.router.parseUrl(this.semanticPathService.get('home'));\n        } else if (this.activeCartService.isGuestCart()) {\n          return this.router.parseUrl(this.semanticPathService.get('cart'));\n        }\n        return !isLoggedIn;\n      })\n    );\n  }\n}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { RoutingConfigService } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CheckoutStep, CheckoutStepType } from '../model/checkout-step.model';\nimport { CheckoutStepService } from '../services/checkout-step.service';\nimport { CheckoutDetailsService } from '../services/checkout-details.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DeliveryModeSetGuard implements CanActivate {\n  constructor(\n    private checkoutDetailsService: CheckoutDetailsService,\n    private routingConfigService: RoutingConfigService,\n    private router: Router,\n    private checkoutStepService: CheckoutStepService\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    const checkoutStep: CheckoutStep = this.checkoutStepService.getCheckoutStep(\n      CheckoutStepType.DELIVERY_MODE\n    );\n\n    if (!checkoutStep && isDevMode()) {\n      console.warn(\n        `Missing step with type ${CheckoutStepType.DELIVERY_MODE} in checkout configuration.`\n      );\n    }\n\n    if (checkoutStep && checkoutStep.disabled) {\n      return of(true);\n    }\n\n    return this.checkoutDetailsService\n      .getSelectedDeliveryModeCode()\n      .pipe(\n        map((mode: string) =>\n          mode && mode.length\n            ? true\n            : this.router.parseUrl(\n                checkoutStep &&\n                  this.routingConfigService.getRouteConfig(\n                    checkoutStep.routeName\n                  ).paths[0]\n              )\n        )\n      );\n  }\n}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { RoutingConfigService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CheckoutStep, CheckoutStepType } from '../model/checkout-step.model';\nimport { CheckoutStepService } from '../services/checkout-step.service';\nimport { CheckoutDetailsService } from '../services/checkout-details.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PaymentDetailsSetGuard implements CanActivate {\n  constructor(\n    private checkoutDetailsService: CheckoutDetailsService,\n    private routingConfigService: RoutingConfigService,\n    private router: Router,\n    private checkoutStepService: CheckoutStepService\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    const checkoutStep: CheckoutStep = this.checkoutStepService.getCheckoutStep(\n      CheckoutStepType.PAYMENT_DETAILS\n    );\n\n    if (!checkoutStep && isDevMode()) {\n      console.warn(\n        `Missing step with type ${CheckoutStepType.PAYMENT_DETAILS} in checkout configuration.`\n      );\n    }\n\n    return this.checkoutDetailsService\n      .getPaymentDetails()\n      .pipe(\n        map((paymentDetails) =>\n          paymentDetails && Object.keys(paymentDetails).length !== 0\n            ? true\n            : this.router.parseUrl(\n                checkoutStep &&\n                  this.routingConfigService.getRouteConfig(\n                    checkoutStep.routeName\n                  ).paths[0]\n              )\n        )\n      );\n  }\n}\n","import { Injectable, isDevMode } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { Address, RoutingConfigService } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CheckoutStep, CheckoutStepType } from '../model/checkout-step.model';\nimport { CheckoutStepService } from '../services/checkout-step.service';\nimport { CheckoutDetailsService } from '../services/checkout-details.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ShippingAddressSetGuard implements CanActivate {\n  constructor(\n    private checkoutDetailsService: CheckoutDetailsService,\n    private routingConfigService: RoutingConfigService,\n    private router: Router,\n    private checkoutStepService: CheckoutStepService\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    const checkoutStep: CheckoutStep = this.checkoutStepService.getCheckoutStep(\n      CheckoutStepType.SHIPPING_ADDRESS\n    );\n\n    if (!checkoutStep && isDevMode()) {\n      console.warn(\n        `Missing step with type ${CheckoutStepType.SHIPPING_ADDRESS} in checkout configuration.`\n      );\n    }\n\n    if (checkoutStep && checkoutStep.disabled) {\n      return of(true);\n    }\n\n    return this.checkoutDetailsService\n      .getDeliveryAddress()\n      .pipe(\n        map((deliveryAddress: Address) =>\n          deliveryAddress && Object.keys(deliveryAddress).length\n            ? true\n            : this.router.parseUrl(\n                checkoutStep &&\n                  this.routingConfigService.getRouteConfig(\n                    checkoutStep.routeName\n                  ).paths[0]\n              )\n        )\n      );\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  CheckoutCostCenterService,\n  CostCenter,\n  PaymentTypeService,\n  UserCostCenterService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, tap, withLatestFrom } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-cost-center',\n  templateUrl: 'cost-center.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CostCenterComponent {\n  costCenterId: string;\n\n  constructor(\n    protected userCostCenterService: UserCostCenterService,\n    protected checkoutCostCenterService: CheckoutCostCenterService,\n    protected paymentTypeService: PaymentTypeService\n  ) {}\n\n  get isAccountPayment$(): Observable<boolean> {\n    return this.paymentTypeService.isAccountPayment();\n  }\n\n  get costCenters$(): Observable<CostCenter[]> {\n    return this.userCostCenterService.getActiveCostCenters().pipe(\n      withLatestFrom(this.checkoutCostCenterService.getCostCenter()),\n      filter(([costCenters]) => Boolean(costCenters)),\n      tap(([costCenters, cartCostCenter]) => {\n        if (!Boolean(cartCostCenter)) {\n          this.setCostCenter(costCenters[0].code);\n        } else {\n          this.costCenterId = cartCostCenter;\n        }\n      }),\n      map(([costCenters]) => costCenters)\n    );\n  }\n\n  setCostCenter(selectCostCenter: string): void {\n    this.costCenterId = selectCostCenter;\n    this.checkoutCostCenterService.setCostCenter(this.costCenterId);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, ConfigModule, I18nModule } from '@spartacus/core';\nimport { CartNotEmptyGuard } from '../../../cart';\nimport { CheckoutAuthGuard } from '../../guards';\nimport { CostCenterComponent } from './cost-center.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    ConfigModule.withConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutCostCenterComponent: {\n          component: CostCenterComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [CostCenterComponent],\n  entryComponents: [CostCenterComponent],\n})\nexport class CostCenterModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { CheckoutDeliveryService, DeliveryMode } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  takeWhile,\n  withLatestFrom,\n} from 'rxjs/operators';\nimport { CheckoutConfigService } from '../../services/checkout-config.service';\nimport { CheckoutStepService } from '../../services/checkout-step.service';\n\n@Component({\n  selector: 'cx-delivery-mode',\n  templateUrl: './delivery-mode.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DeliveryModeComponent implements OnInit, OnDestroy {\n  supportedDeliveryModes$: Observable<DeliveryMode[]>;\n  selectedDeliveryMode$: Observable<DeliveryMode>;\n  continueButtonPressed = false;\n\n  backBtnText = this.checkoutStepService.getBackBntText(this.activatedRoute);\n\n  deliveryModeSub: Subscription;\n\n  mode: FormGroup = this.fb.group({\n    deliveryModeId: ['', Validators.required],\n  });\n\n  constructor(\n    private fb: FormBuilder,\n    private checkoutDeliveryService: CheckoutDeliveryService,\n    private checkoutConfigService: CheckoutConfigService,\n    private activatedRoute: ActivatedRoute,\n    protected checkoutStepService: CheckoutStepService\n  ) {}\n\n  ngOnInit() {\n    this.supportedDeliveryModes$ = this.checkoutDeliveryService\n      .getSupportedDeliveryModes()\n      .pipe(\n        filter((deliveryModes: DeliveryMode[]) => !!deliveryModes?.length),\n        distinctUntilChanged(\n          (current: DeliveryMode[], previous: DeliveryMode[]) => {\n            return JSON.stringify(current) === JSON.stringify(previous);\n          }\n        )\n      );\n\n    // Reload delivery modes on error\n    this.checkoutDeliveryService\n      .getLoadSupportedDeliveryModeProcess()\n      .pipe(takeWhile((state) => state?.success === false))\n      .subscribe((state) => {\n        if (state.error && !state.loading) {\n          this.checkoutDeliveryService.loadSupportedDeliveryModes();\n        }\n      });\n\n    this.deliveryModeSub = this.supportedDeliveryModes$\n      .pipe(\n        withLatestFrom(\n          this.checkoutDeliveryService\n            .getSelectedDeliveryMode()\n            .pipe(\n              map((deliveryMode: DeliveryMode) =>\n                deliveryMode && deliveryMode.code ? deliveryMode.code : null\n              )\n            )\n        )\n      )\n      .subscribe(([deliveryModes, code]: [DeliveryMode[], string]) => {\n        if (\n          !(\n            code &&\n            !!deliveryModes.find((deliveryMode) => deliveryMode.code === code)\n          )\n        ) {\n          code = this.checkoutConfigService.getPreferredDeliveryMode(\n            deliveryModes\n          );\n        }\n        this.mode.controls['deliveryModeId'].setValue(code);\n        this.checkoutDeliveryService.setDeliveryMode(code);\n      });\n  }\n\n  changeMode(code: string): void {\n    this.checkoutDeliveryService.setDeliveryMode(code);\n  }\n\n  next(): void {\n    if (this.mode.valid && this.mode.value) {\n      this.continueButtonPressed = true;\n      this.checkoutStepService.next(this.activatedRoute);\n    }\n  }\n\n  back(): void {\n    this.checkoutStepService.back(this.activatedRoute);\n  }\n\n  get deliveryModeInvalid(): boolean {\n    return this.mode.controls['deliveryModeId'].invalid;\n  }\n\n  ngOnDestroy(): void {\n    if (this.deliveryModeSub) {\n      this.deliveryModeSub.unsubscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { SpinnerModule } from '../../../../shared/components/spinner/spinner.module';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { CartNotEmptyGuard } from './../../../../cms-components/cart/cart-not-empty.guard';\nimport { DeliveryModeComponent } from './delivery-mode.component';\n\n@NgModule({\n  imports: [CommonModule, ReactiveFormsModule, I18nModule, SpinnerModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutDeliveryMode: {\n          component: DeliveryModeComponent,\n          // TODO(#8880): Shouldn't we keep ShippingAddressSetGuard here?\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [DeliveryModeComponent],\n  entryComponents: [DeliveryModeComponent],\n  exports: [DeliveryModeComponent],\n})\nexport class DeliveryModeModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  OnInit,\n} from '@angular/core';\nimport { Address } from '@spartacus/core';\nimport { ModalService } from '../../../../../../shared/components/modal/index';\nimport { ICON_TYPE } from '../../../../../misc/icon/index';\n\n@Component({\n  selector: 'cx-suggested-addresses-dialog',\n  templateUrl: './suggested-addresses-dialog.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SuggestedAddressDialogComponent implements OnInit {\n  iconTypes = ICON_TYPE;\n\n  constructor(protected modalService: ModalService) {}\n\n  @Input()\n  suggestedAddresses: Address[];\n  @Input()\n  enteredAddress: Address;\n\n  selectedAddress: Address;\n\n  ngOnInit(): void {\n    this.selectedAddress = this.suggestedAddresses.length\n      ? this.suggestedAddresses[0]\n      : this.enteredAddress;\n  }\n\n  closeModal(reason?: any): void {\n    this.modalService.closeActiveModal(reason);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  Address,\n  AddressValidation,\n  CardType,\n  CheckoutDeliveryService,\n  CheckoutPaymentService,\n  Country,\n  GlobalMessageService,\n  GlobalMessageType,\n  Region,\n  StateUtils,\n  UserAddressService,\n  UserPaymentService,\n} from '@spartacus/core';\nimport { BehaviorSubject, combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { Card } from '../../../../../shared/components/card/card.component'; // tslint:disable-line\nimport {\n  ModalRef,\n  ModalService,\n} from '../../../../../shared/components/modal/index';\nimport { ICON_TYPE } from '../../../../misc/icon/index';\nimport { SuggestedAddressDialogComponent } from '../../shipping-address/address-form/suggested-addresses-dialog/suggested-addresses-dialog.component'; // tslint:disable-line\n\n@Component({\n  selector: 'cx-payment-form',\n  templateUrl: './payment-form.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaymentFormComponent implements OnInit, OnDestroy {\n  iconTypes = ICON_TYPE;\n\n  private addressVerifySub: Subscription;\n  suggestedAddressModalRef: ModalRef;\n  months: string[] = [];\n  years: number[] = [];\n\n  cardTypes$: Observable<CardType[]>;\n  shippingAddress$: Observable<Address>;\n  countries$: Observable<Country[]>;\n  loading$: Observable<StateUtils.LoaderState<void>>;\n  sameAsShippingAddress = true;\n  regions$: Observable<Region[]>;\n  selectedCountry$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n  showSameAsShippingAddressCheckbox$: Observable<boolean>;\n\n  @Input()\n  setAsDefaultField: boolean;\n\n  @Input()\n  paymentMethodsCount: number;\n\n  @Output()\n  goBack = new EventEmitter<any>();\n\n  @Output()\n  closeForm = new EventEmitter<any>();\n\n  @Output()\n  setPaymentDetails = new EventEmitter<any>();\n\n  paymentForm: FormGroup = this.fb.group({\n    cardType: this.fb.group({\n      code: [null, Validators.required],\n    }),\n    accountHolderName: ['', Validators.required],\n    cardNumber: ['', Validators.required],\n    expiryMonth: [null, Validators.required],\n    expiryYear: [null, Validators.required],\n    cvn: ['', Validators.required],\n    defaultPayment: [false],\n  });\n\n  billingAddressForm: FormGroup = this.fb.group({\n    firstName: ['', Validators.required],\n    lastName: ['', Validators.required],\n    line1: ['', Validators.required],\n    line2: [''],\n    town: ['', Validators.required],\n    region: this.fb.group({\n      isocodeShort: [null, Validators.required],\n    }),\n    country: this.fb.group({\n      isocode: [null, Validators.required],\n    }),\n    postalCode: ['', Validators.required],\n  });\n\n  constructor(\n    protected checkoutPaymentService: CheckoutPaymentService,\n    protected checkoutDeliveryService: CheckoutDeliveryService,\n    protected userPaymentService: UserPaymentService,\n    protected globalMessageService: GlobalMessageService,\n    protected fb: FormBuilder,\n    protected modalService: ModalService,\n    protected userAddressService: UserAddressService\n  ) {}\n\n  ngOnInit() {\n    this.expMonthAndYear();\n    this.countries$ = this.userPaymentService.getAllBillingCountries().pipe(\n      tap((countries) => {\n        // If the store is empty fetch countries. This is also used when changing language.\n        if (Object.keys(countries).length === 0) {\n          this.userPaymentService.loadBillingCountries();\n        }\n      })\n    );\n\n    this.cardTypes$ = this.checkoutPaymentService.getCardTypes().pipe(\n      tap((cardTypes) => {\n        if (Object.keys(cardTypes).length === 0) {\n          this.checkoutPaymentService.loadSupportedCardTypes();\n        }\n      })\n    );\n\n    this.shippingAddress$ = this.checkoutDeliveryService.getDeliveryAddress();\n    this.loading$ = this.checkoutPaymentService.getSetPaymentDetailsResultProcess();\n\n    this.showSameAsShippingAddressCheckbox$ = combineLatest([\n      this.countries$,\n      this.shippingAddress$,\n    ]).pipe(\n      map(([countries, address]) => {\n        return (\n          address?.country &&\n          !!countries.filter(\n            (country: Country): boolean =>\n              country.isocode === address.country.isocode\n          ).length\n        );\n      }),\n      tap((shouldShowCheckbox) => {\n        this.sameAsShippingAddress = shouldShowCheckbox;\n      })\n    );\n\n    // verify the new added address\n    this.addressVerifySub = this.checkoutDeliveryService\n      .getAddressVerificationResults()\n      .subscribe((results: AddressValidation) => {\n        if (results.decision === 'FAIL') {\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n        } else if (results.decision === 'ACCEPT') {\n          this.next();\n        } else if (results.decision === 'REJECT') {\n          this.globalMessageService.add(\n            { key: 'addressForm.invalidAddress' },\n            GlobalMessageType.MSG_TYPE_ERROR\n          );\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n        } else if (results.decision === 'REVIEW') {\n          this.openSuggestedAddress(results);\n        }\n      });\n\n    this.regions$ = this.selectedCountry$.pipe(\n      switchMap((country) => this.userAddressService.getRegions(country)),\n      tap((regions) => {\n        const regionControl = this.billingAddressForm.get(\n          'region.isocodeShort'\n        );\n        if (regions.length > 0) {\n          regionControl.enable();\n        } else {\n          regionControl.disable();\n        }\n      })\n    );\n  }\n\n  expMonthAndYear(): void {\n    const year = new Date().getFullYear();\n\n    for (let i = 0; i < 10; i++) {\n      this.years.push(year + i);\n    }\n\n    for (let j = 1; j <= 12; j++) {\n      if (j < 10) {\n        this.months.push(`0${j}`);\n      } else {\n        this.months.push(j.toString());\n      }\n    }\n  }\n\n  toggleDefaultPaymentMethod(): void {\n    this.paymentForm.value.defaultPayment = !this.paymentForm.value\n      .defaultPayment;\n  }\n\n  toggleSameAsShippingAddress(): void {\n    this.sameAsShippingAddress = !this.sameAsShippingAddress;\n  }\n\n  getAddressCardContent(address: Address): Card {\n    let region = '';\n    if (address.region && address.region.isocode) {\n      region = address.region.isocode + ', ';\n    }\n\n    return {\n      textBold: address.firstName + ' ' + address.lastName,\n      text: [\n        address.line1,\n        address.line2,\n        address.town + ', ' + region + address.country.isocode,\n        address.postalCode,\n        address.phone,\n      ],\n    };\n  }\n\n  openSuggestedAddress(results: AddressValidation): void {\n    if (!this.suggestedAddressModalRef) {\n      this.suggestedAddressModalRef = this.modalService.open(\n        SuggestedAddressDialogComponent,\n        { centered: true, size: 'lg' }\n      );\n      this.suggestedAddressModalRef.componentInstance.enteredAddress = this.billingAddressForm.value;\n      this.suggestedAddressModalRef.componentInstance.suggestedAddresses =\n        results.suggestedAddresses;\n      this.suggestedAddressModalRef.result\n        .then(() => {\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n          this.suggestedAddressModalRef = null;\n        })\n        .catch(() => {\n          // this  callback is called when modal is closed with Esc key or clicking backdrop\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n          this.suggestedAddressModalRef = null;\n        });\n    }\n  }\n\n  close(): void {\n    this.closeForm.emit();\n  }\n\n  back(): void {\n    this.goBack.emit();\n  }\n\n  verifyAddress(): void {\n    if (this.sameAsShippingAddress) {\n      this.next();\n    } else {\n      this.checkoutDeliveryService.verifyAddress(this.billingAddressForm.value);\n    }\n  }\n\n  countrySelected(country: Country): void {\n    this.billingAddressForm.get('country.isocode').setValue(country.isocode);\n    this.selectedCountry$.next(country.isocode);\n  }\n\n  next(): void {\n    if (this.paymentForm.valid) {\n      if (this.sameAsShippingAddress) {\n        this.setPaymentDetails.emit({\n          paymentDetails: this.paymentForm.value,\n          billingAddress: null,\n        });\n      } else {\n        if (this.billingAddressForm.valid) {\n          this.setPaymentDetails.emit({\n            paymentDetails: this.paymentForm.value,\n            billingAddress: this.billingAddressForm.value,\n          });\n        } else {\n          this.billingAddressForm.markAllAsTouched();\n        }\n      }\n    } else {\n      this.paymentForm.markAllAsTouched();\n\n      if (!this.sameAsShippingAddress) {\n        this.billingAddressForm.markAllAsTouched();\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.addressVerifySub) {\n      this.addressVerifySub.unsubscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { I18nModule } from '@spartacus/core';\nimport { CardModule } from '../../../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../../../shared/components/spinner/spinner.module';\nimport { IconModule } from '../../../../misc/icon/icon.module';\nimport { PaymentFormComponent } from './payment-form.component';\nimport { FormErrorsModule } from '../../../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    NgSelectModule,\n    CardModule,\n    I18nModule,\n    IconModule,\n    SpinnerModule,\n    FormErrorsModule,\n  ],\n  declarations: [PaymentFormComponent],\n  entryComponents: [PaymentFormComponent],\n  exports: [PaymentFormComponent],\n})\nexport class PaymentFormModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  ActiveCartService,\n  Address,\n  CheckoutDeliveryService,\n  CheckoutPaymentService,\n  CheckoutService,\n  GlobalMessageService,\n  GlobalMessageType,\n  PaymentDetails,\n  TranslationService,\n  UserPaymentService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map, switchMap, take, tap } from 'rxjs/operators';\nimport { Card } from '../../../../shared/components/card/card.component';\nimport { ICON_TYPE } from '../../../misc/icon';\nimport { CheckoutStepService } from '../../services/checkout-step.service';\n\n@Component({\n  selector: 'cx-payment-method',\n  templateUrl: './payment-method.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaymentMethodComponent implements OnInit, OnDestroy {\n  iconTypes = ICON_TYPE;\n  existingPaymentMethods$: Observable<PaymentDetails[]>;\n  isLoading$: Observable<boolean>;\n  cards$: Observable<{ content: Card; paymentMethod: PaymentDetails }[]>;\n  selectedMethod$: Observable<PaymentDetails>;\n  isGuestCheckout = false;\n  newPaymentFormManuallyOpened = false;\n\n  backBtnText = this.checkoutStepService.getBackBntText(this.activatedRoute);\n\n  protected shouldRedirect: boolean;\n  protected deliveryAddress: Address;\n\n  constructor(\n    protected userPaymentService: UserPaymentService,\n    protected checkoutService: CheckoutService,\n    protected checkoutDeliveryService: CheckoutDeliveryService,\n    protected checkoutPaymentService: CheckoutPaymentService,\n    protected globalMessageService: GlobalMessageService,\n    protected activatedRoute: ActivatedRoute,\n    protected translation: TranslationService,\n    protected activeCartService: ActiveCartService,\n    protected checkoutStepService: CheckoutStepService\n  ) {}\n\n  ngOnInit() {\n    this.shouldRedirect = false;\n    this.isLoading$ = this.userPaymentService.getPaymentMethodsLoading();\n\n    if (!this.activeCartService.isGuestCart()) {\n      this.userPaymentService.loadPaymentMethods();\n    } else {\n      this.isGuestCheckout = true;\n    }\n\n    this.checkoutDeliveryService\n      .getDeliveryAddress()\n      .pipe(take(1))\n      .subscribe((address: Address) => {\n        this.deliveryAddress = address;\n      });\n\n    this.existingPaymentMethods$ = this.userPaymentService.getPaymentMethods();\n\n    this.selectedMethod$ = this.checkoutPaymentService.getPaymentDetails().pipe(\n      tap((paymentInfo) => {\n        if (paymentInfo && !!Object.keys(paymentInfo).length) {\n          if (paymentInfo['hasError']) {\n            Object.keys(paymentInfo).forEach((key) => {\n              if (key.startsWith('InvalidField')) {\n                this.sendPaymentMethodFailGlobalMessage(paymentInfo[key]);\n              }\n            });\n            this.checkoutService.clearCheckoutStep(3);\n          } else if (this.shouldRedirect) {\n            this.next();\n          }\n        }\n      })\n    );\n\n    this.cards$ = combineLatest([\n      this.existingPaymentMethods$.pipe(\n        switchMap((methods) => {\n          return !methods?.length\n            ? of([])\n            : combineLatest(\n                methods.map((method) =>\n                  combineLatest([\n                    of(method),\n                    this.translation.translate('paymentCard.expires', {\n                      month: method.expiryMonth,\n                      year: method.expiryYear,\n                    }),\n                  ]).pipe(\n                    map(([payment, translation]) => ({\n                      payment,\n                      expiryTranslation: translation,\n                    }))\n                  )\n                )\n              );\n        })\n      ),\n      this.selectedMethod$,\n      this.translation.translate('paymentForm.useThisPayment'),\n      this.translation.translate('paymentCard.defaultPaymentMethod'),\n      this.translation.translate('paymentCard.selected'),\n    ]).pipe(\n      map(\n        ([\n          paymentMethods,\n          selectedMethod,\n          textUseThisPayment,\n          textDefaultPaymentMethod,\n          textSelected,\n        ]) => {\n          if (\n            paymentMethods.length &&\n            (!selectedMethod || Object.keys(selectedMethod).length === 0)\n          ) {\n            const defaultPaymentMethod = paymentMethods.find(\n              (paymentMethod) => paymentMethod.payment.defaultPayment\n            );\n            if (defaultPaymentMethod) {\n              selectedMethod = defaultPaymentMethod.payment;\n              this.checkoutPaymentService.setPaymentDetails(selectedMethod);\n            }\n          }\n          return paymentMethods.map((payment) => ({\n            content: this.createCard(\n              payment.payment,\n              {\n                textExpires: payment.expiryTranslation,\n                textUseThisPayment,\n                textDefaultPaymentMethod,\n                textSelected,\n              },\n              selectedMethod\n            ),\n            paymentMethod: payment.payment,\n          }));\n        }\n      )\n    );\n  }\n\n  selectPaymentMethod(paymentDetails: PaymentDetails): void {\n    this.checkoutPaymentService.setPaymentDetails(paymentDetails);\n  }\n\n  showNewPaymentForm(): void {\n    this.newPaymentFormManuallyOpened = true;\n  }\n\n  hideNewPaymentForm(): void {\n    this.newPaymentFormManuallyOpened = false;\n  }\n\n  setPaymentDetails({\n    paymentDetails,\n    billingAddress,\n  }: {\n    paymentDetails: PaymentDetails;\n    billingAddress?: Address;\n  }): void {\n    const details: PaymentDetails = { ...paymentDetails };\n    details.billingAddress = billingAddress || this.deliveryAddress;\n    this.checkoutPaymentService.createPaymentDetails(details);\n    this.shouldRedirect = true;\n  }\n\n  ngOnDestroy(): void {\n    this.checkoutPaymentService.paymentProcessSuccess();\n  }\n\n  protected getCardIcon(code: string): string {\n    let ccIcon: string;\n    if (code === 'visa') {\n      ccIcon = this.iconTypes.VISA;\n    } else if (code === 'master' || code === 'mastercard_eurocard') {\n      ccIcon = this.iconTypes.MASTER_CARD;\n    } else if (code === 'diners') {\n      ccIcon = this.iconTypes.DINERS_CLUB;\n    } else if (code === 'amex') {\n      ccIcon = this.iconTypes.AMEX;\n    } else {\n      ccIcon = this.iconTypes.CREDIT_CARD;\n    }\n\n    return ccIcon;\n  }\n\n  protected sendPaymentMethodFailGlobalMessage(field: string) {\n    this.globalMessageService.add(\n      {\n        key: 'paymentMethods.invalidField',\n        params: { field },\n      },\n      GlobalMessageType.MSG_TYPE_ERROR\n    );\n  }\n\n  protected createCard(\n    paymentDetails: PaymentDetails,\n    cardLabels: {\n      textDefaultPaymentMethod: string;\n      textExpires: string;\n      textUseThisPayment: string;\n      textSelected: string;\n    },\n    selected: PaymentDetails\n  ): Card {\n    return {\n      title: paymentDetails.defaultPayment\n        ? cardLabels.textDefaultPaymentMethod\n        : '',\n      textBold: paymentDetails.accountHolderName,\n      text: [paymentDetails.cardNumber, cardLabels.textExpires],\n      img: this.getCardIcon(paymentDetails.cardType.code),\n      actions: [{ name: cardLabels.textUseThisPayment, event: 'send' }],\n      header:\n        selected?.id === paymentDetails.id\n          ? cardLabels.textSelected\n          : undefined,\n    };\n  }\n\n  next(): void {\n    this.checkoutStepService.next(this.activatedRoute);\n  }\n\n  back(): void {\n    this.checkoutStepService.back(this.activatedRoute);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { CardModule } from '../../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../../shared/components/spinner/spinner.module';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { CartNotEmptyGuard } from './../../../../cms-components/cart/cart-not-empty.guard';\nimport { PaymentFormModule } from './payment-form/payment-form.module';\nimport { PaymentMethodComponent } from './payment-method.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    PaymentFormModule,\n    CardModule,\n    SpinnerModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutPaymentDetails: {\n          component: PaymentMethodComponent,\n          // TODO(#8880): Shouldn't we keep ShippingAddressSetGuard and others here?\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [PaymentMethodComponent],\n  entryComponents: [PaymentMethodComponent],\n  exports: [PaymentMethodComponent],\n})\nexport class PaymentMethodModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  ViewChild,\n} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  B2BPaymentTypeEnum,\n  PaymentType,\n  PaymentTypeService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { distinctUntilChanged, filter, tap } from 'rxjs/operators';\nimport { CheckoutStepType } from '../../model/checkout-step.model';\nimport { CheckoutStepService } from '../../services/checkout-step.service';\n\n@Component({\n  selector: 'cx-payment-type',\n  templateUrl: './payment-type.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PaymentTypeComponent {\n  @ViewChild('poNumber', { static: false })\n  private _poNumberInput: ElementRef;\n\n  typeSelected: string;\n  cartPoNumber: string;\n\n  paymentTypes$: Observable<\n    PaymentType[]\n  > = this.paymentTypeService.getPaymentTypes();\n\n  typeSelected$: Observable<\n    string\n  > = this.paymentTypeService.getSelectedPaymentType().pipe(\n    filter((selected) => selected !== undefined),\n    distinctUntilChanged(),\n    tap((selected) => {\n      this.typeSelected = selected;\n      this.checkoutStepService.resetSteps();\n      this.checkoutStepService.disableEnableStep(\n        CheckoutStepType.PAYMENT_DETAILS,\n        selected === B2BPaymentTypeEnum.ACCOUNT_PAYMENT\n      );\n    })\n  );\n\n  cartPoNumber$: Observable<\n    string\n  > = this.paymentTypeService.getPoNumber().pipe(\n    filter((po) => po !== undefined),\n    tap((po) => {\n      return (this.cartPoNumber = po);\n    })\n  );\n\n  constructor(\n    protected paymentTypeService: PaymentTypeService,\n    protected checkoutStepService: CheckoutStepService,\n    protected activatedRoute: ActivatedRoute\n  ) {}\n\n  changeType(code: string): void {\n    this.paymentTypeService.setPaymentType(code);\n    this.typeSelected = code;\n  }\n\n  next(): void {\n    // set po number to cart\n    const poNumInput = this._poNumberInput.nativeElement.value;\n    if (this.typeSelected && poNumInput !== this.cartPoNumber) {\n      this.paymentTypeService.setPaymentType(this.typeSelected, poNumInput);\n    }\n\n    this.checkoutStepService.next(this.activatedRoute);\n  }\n\n  back(): void {\n    this.checkoutStepService.back(this.activatedRoute);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, ConfigModule, I18nModule } from '@spartacus/core';\nimport { SpinnerModule } from '../../../../shared/components/spinner/spinner.module';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { CartNotEmptyGuard } from './../../../../cms-components/cart/cart-not-empty.guard';\nimport { PaymentTypeComponent } from './payment-type.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    SpinnerModule,\n    ConfigModule.withConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutPaymentType: {\n          component: PaymentTypeComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [PaymentTypeComponent],\n  entryComponents: [PaymentTypeComponent],\n  exports: [PaymentTypeComponent],\n})\nexport class PaymentTypeModule {}\n","import { LayoutConfig } from '../../../../layout/config/layout-config';\nimport { DIALOG_TYPE } from '../../../../layout/launch-dialog/index';\nimport { SpinnerComponent } from '../../../../shared/components/spinner/spinner.component';\n\nexport const defaultPlaceOrderSpinnerLayoutConfig: LayoutConfig = {\n  launch: {\n    PLACE_ORDER_SPINNER: {\n      inline: true,\n      component: SpinnerComponent,\n      dialogType: DIALOG_TYPE.POPOVER_CENTER_BACKDROP,\n    },\n  },\n};\n","import { Injectable } from '@angular/core';\nimport {\n  DaysOfWeek,\n  recurrencePeriod,\n  ScheduleReplenishmentForm,\n} from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CheckoutReplenishmentFormService {\n  /**\n   * Default form data\n   */\n  readonly defaultFormData: ScheduleReplenishmentForm = {\n    daysOfWeek: [DaysOfWeek.MONDAY],\n    nthDayOfMonth: '1',\n    numberOfDays: '14',\n    numberOfWeeks: '1',\n    recurrencePeriod: recurrencePeriod.DAILY,\n    replenishmentStartDate: new Date().toISOString().split('T')[0],\n  };\n\n  private scheduleReplenishmentFormData$: BehaviorSubject<\n    ScheduleReplenishmentForm\n  > = new BehaviorSubject<ScheduleReplenishmentForm>(this.defaultFormData);\n\n  constructor() {}\n\n  getScheduleReplenishmentFormData(): Observable<ScheduleReplenishmentForm> {\n    return this.scheduleReplenishmentFormData$.asObservable();\n  }\n\n  setScheduleReplenishmentFormData(formData: ScheduleReplenishmentForm): void {\n    this.scheduleReplenishmentFormData$.next(formData);\n  }\n\n  resetScheduleReplenishmentFormData(): void {\n    this.scheduleReplenishmentFormData$.next(this.defaultFormData);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ComponentRef,\n  OnDestroy,\n  OnInit,\n  ViewContainerRef,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  CheckoutService,\n  ORDER_TYPE,\n  recurrencePeriod,\n  RoutingService,\n  ScheduleReplenishmentForm,\n} from '@spartacus/core';\nimport { BehaviorSubject, combineLatest, Observable, Subscription } from 'rxjs';\nimport {\n  LaunchDialogService,\n  LAUNCH_CALLER,\n} from '../../../../layout/launch-dialog/index';\nimport { CheckoutReplenishmentFormService } from '../../services/checkout-replenishment-form-service';\n\n@Component({\n  selector: 'cx-place-order',\n  templateUrl: './place-order.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PlaceOrderComponent implements OnInit, OnDestroy {\n  private subscription: Subscription = new Subscription();\n\n  currentOrderType: ORDER_TYPE;\n  scheduleReplenishmentFormData: ScheduleReplenishmentForm;\n  placedOrder: void | Observable<ComponentRef<any>>;\n\n  daysOfWeekNotChecked$ = new BehaviorSubject<boolean>(false);\n\n  checkoutSubmitForm: FormGroup = this.fb.group({\n    termsAndConditions: [false, Validators.requiredTrue],\n  });\n\n  get termsAndConditionInvalid(): Boolean {\n    return this.checkoutSubmitForm.invalid;\n  }\n\n  constructor(\n    protected checkoutService: CheckoutService,\n    protected routingService: RoutingService,\n    protected fb: FormBuilder,\n    protected checkoutReplenishmentFormService: CheckoutReplenishmentFormService,\n    protected launchDialogService: LaunchDialogService,\n    protected vcr: ViewContainerRef\n  ) {}\n\n  submitForm(): void {\n    if (this.checkoutSubmitForm.valid && Boolean(this.currentOrderType)) {\n      switch (this.currentOrderType) {\n        case ORDER_TYPE.PLACE_ORDER: {\n          this.checkoutService.placeOrder(this.checkoutSubmitForm.valid);\n          break;\n        }\n\n        case ORDER_TYPE.SCHEDULE_REPLENISHMENT_ORDER: {\n          this.checkoutService.scheduleReplenishmentOrder(\n            this.scheduleReplenishmentFormData,\n            this.checkoutSubmitForm.valid\n          );\n          break;\n        }\n      }\n    } else {\n      this.checkoutSubmitForm.markAllAsTouched();\n    }\n  }\n\n  ngOnInit(): void {\n    this.subscription.add(\n      combineLatest([\n        this.checkoutService.getPlaceOrderLoading(),\n        this.checkoutService.getPlaceOrderSuccess(),\n        this.checkoutService.getPlaceOrderError(),\n      ]).subscribe(([orderLoading, orderSuccess, orderError]) => {\n        if (orderLoading) {\n          this.placedOrder = this.launchDialogService.launch(\n            LAUNCH_CALLER.PLACE_ORDER_SPINNER,\n            this.vcr\n          );\n        }\n\n        if (orderError) {\n          if (this.placedOrder) {\n            this.placedOrder\n              .subscribe((component) => {\n                this.launchDialogService.clear(\n                  LAUNCH_CALLER.PLACE_ORDER_SPINNER\n                );\n                component.destroy();\n              })\n              .unsubscribe();\n            this.checkoutService.clearPlaceOrderState();\n          }\n        }\n\n        if (orderSuccess) {\n          this.onSuccess(orderSuccess);\n        }\n      })\n    );\n\n    this.subscription.add(\n      this.checkoutService\n        .getCurrentOrderType()\n        .subscribe((orderType) => (this.currentOrderType = orderType))\n    );\n\n    this.subscription.add(\n      this.checkoutReplenishmentFormService\n        .getScheduleReplenishmentFormData()\n        .subscribe((data) => {\n          this.scheduleReplenishmentFormData = data;\n\n          this.daysOfWeekNotChecked$.next(\n            data.daysOfWeek.length === 0 &&\n              data.recurrencePeriod === recurrencePeriod.WEEKLY\n          );\n        })\n    );\n  }\n\n  onSuccess(data: boolean): void {\n    if (data) {\n      switch (this.currentOrderType) {\n        case ORDER_TYPE.PLACE_ORDER: {\n          this.routingService.go({ cxRoute: 'orderConfirmation' });\n          break;\n        }\n\n        case ORDER_TYPE.SCHEDULE_REPLENISHMENT_ORDER: {\n          this.routingService.go({ cxRoute: 'replenishmentConfirmation' });\n          break;\n        }\n      }\n      this.checkoutReplenishmentFormService.resetScheduleReplenishmentFormData();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.launchDialogService.clear(LAUNCH_CALLER.PLACE_ORDER_SPINNER);\n    this.checkoutService.clearPlaceOrderState();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideConfig,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CartNotEmptyGuard } from '../../../cart/cart-not-empty.guard';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { defaultPlaceOrderSpinnerLayoutConfig } from './default-place-order-spinner-layout.config';\nimport { PlaceOrderComponent } from './place-order.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    ReactiveFormsModule,\n  ],\n  providers: [\n    provideConfig(defaultPlaceOrderSpinnerLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutPlaceOrder: {\n          component: PlaceOrderComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [PlaceOrderComponent],\n  entryComponents: [PlaceOrderComponent],\n  exports: [PlaceOrderComponent],\n})\nexport class PlaceOrderModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  ActiveCartService,\n  Address,\n  Cart,\n  CheckoutCostCenterService,\n  CheckoutDeliveryService,\n  CheckoutPaymentService,\n  CostCenter,\n  Country,\n  DeliveryMode,\n  OrderEntry,\n  PaymentDetails,\n  PaymentTypeService,\n  PromotionLocation,\n  PromotionResult,\n  TranslationService,\n  UserAddressService,\n  UserCostCenterService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map, switchMap, tap } from 'rxjs/operators';\nimport { Card } from '../../../../shared/components/card/card.component';\nimport { PromotionService } from '../../../../shared/services/promotion/promotion.service';\nimport { ICON_TYPE } from '../../../misc/icon/icon.model';\nimport {\n  checkoutPaymentSteps,\n  checkoutShippingSteps,\n  CheckoutStep,\n} from '../../model/checkout-step.model';\nimport { CheckoutStepType } from '../../model/index';\nimport { CheckoutStepService } from '../../services/index';\n\n@Component({\n  selector: 'cx-review-submit',\n  templateUrl: './review-submit.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReviewSubmitComponent {\n  iconTypes = ICON_TYPE;\n  checkoutStepType = CheckoutStepType;\n  promotionLocation: PromotionLocation = PromotionLocation.ActiveCart;\n\n  constructor(\n    protected checkoutDeliveryService: CheckoutDeliveryService,\n    protected checkoutPaymentService: CheckoutPaymentService,\n    protected userAddressService: UserAddressService,\n    protected activeCartService: ActiveCartService,\n    protected translation: TranslationService,\n    protected promotionService: PromotionService,\n    protected checkoutStepService: CheckoutStepService,\n    protected paymentTypeService: PaymentTypeService,\n    protected checkoutCostCenterService: CheckoutCostCenterService,\n    protected userCostCenterService: UserCostCenterService\n  ) {}\n\n  get cart$(): Observable<Cart> {\n    return this.activeCartService.getActive();\n  }\n\n  get entries$(): Observable<OrderEntry[]> {\n    return this.activeCartService.getEntries();\n  }\n\n  get steps$(): Observable<CheckoutStep[]> {\n    return this.checkoutStepService.steps$;\n  }\n\n  get deliveryAddress$(): Observable<Address> {\n    return this.checkoutDeliveryService.getDeliveryAddress();\n  }\n\n  get deliveryMode$(): Observable<DeliveryMode> {\n    return this.checkoutDeliveryService.getSelectedDeliveryMode().pipe(\n      tap((selected: DeliveryMode) => {\n        if (selected === null) {\n          this.checkoutDeliveryService.loadSupportedDeliveryModes();\n        }\n      })\n    );\n  }\n\n  get paymentDetails$(): Observable<PaymentDetails> {\n    return this.checkoutPaymentService.getPaymentDetails();\n  }\n\n  get orderPromotions$(): Observable<PromotionResult[]> {\n    return this.promotionService.getOrderPromotions(this.promotionLocation);\n  }\n\n  get countryName$(): Observable<string> {\n    return this.deliveryAddress$.pipe(\n      switchMap((address: Address) =>\n        this.userAddressService.getCountry(address?.country?.isocode)\n      ),\n      tap((country: Country) => {\n        if (country === null) {\n          this.userAddressService.loadDeliveryCountries();\n        }\n      }),\n      map((country: Country) => country && country.name)\n    );\n  }\n\n  get poNumber$(): Observable<string> {\n    return this.paymentTypeService.getPoNumber();\n  }\n\n  get paymentType$(): Observable<string> {\n    return this.paymentTypeService.getSelectedPaymentType();\n  }\n\n  get isAccountPayment$(): Observable<boolean> {\n    return this.paymentTypeService.isAccountPayment();\n  }\n\n  get costCenter$(): Observable<CostCenter> {\n    return this.userCostCenterService.getActiveCostCenters().pipe(\n      filter((costCenters) => Boolean(costCenters)),\n      switchMap((costCenters) => {\n        return this.checkoutCostCenterService.getCostCenter().pipe(\n          map((code) => {\n            return costCenters.find((cc) => cc.code === code);\n          })\n        );\n      })\n    );\n  }\n\n  getShippingAddressCard(\n    deliveryAddress: Address,\n    countryName: string\n  ): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('addressCard.shipTo'),\n    ]).pipe(\n      map(([textTitle]) => {\n        if (!countryName) {\n          countryName = deliveryAddress?.country?.isocode;\n        }\n\n        let region = '';\n        if (\n          deliveryAddress &&\n          deliveryAddress.region &&\n          deliveryAddress.region.isocode\n        ) {\n          region = deliveryAddress.region.isocode + ', ';\n        }\n\n        return {\n          title: textTitle,\n          textBold: deliveryAddress.firstName + ' ' + deliveryAddress.lastName,\n          text: [\n            deliveryAddress.line1,\n            deliveryAddress.line2,\n            deliveryAddress.town + ', ' + region + countryName,\n            deliveryAddress.postalCode,\n            deliveryAddress.phone,\n          ],\n        };\n      })\n    );\n  }\n\n  getCostCenterCard(costCenter: CostCenter): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutPO.costCenter'),\n    ]).pipe(\n      map(([textTitle]) => {\n        return {\n          title: textTitle,\n          textBold: costCenter?.name,\n          text: ['(' + costCenter?.unit.name + ')'],\n        };\n      })\n    );\n  }\n\n  getDeliveryModeCard(deliveryMode: DeliveryMode): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutShipping.shippingMethod'),\n    ]).pipe(\n      map(([textTitle]) => {\n        return {\n          title: textTitle,\n          textBold: deliveryMode.name,\n          text: [\n            deliveryMode.description,\n            deliveryMode.deliveryCost?.formattedValue\n              ? deliveryMode.deliveryCost?.formattedValue\n              : '',\n          ],\n        };\n      })\n    );\n  }\n\n  getPaymentMethodCard(paymentDetails: PaymentDetails): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('paymentForm.payment'),\n      this.translation.translate('paymentCard.expires', {\n        month: paymentDetails.expiryMonth,\n        year: paymentDetails.expiryYear,\n      }),\n      this.translation.translate('paymentForm.billingAddress'),\n    ]).pipe(\n      map(([textTitle, textExpires, billingAddress]) => {\n        const region = paymentDetails.billingAddress?.region?.isocode\n          ? paymentDetails.billingAddress?.region?.isocode + ', '\n          : '';\n        return {\n          title: textTitle,\n          textBold: paymentDetails.accountHolderName,\n          text: [paymentDetails.cardNumber, textExpires],\n          paragraphs: [\n            {\n              title: billingAddress + ':',\n              text: [\n                paymentDetails.billingAddress?.firstName +\n                  ' ' +\n                  paymentDetails.billingAddress?.lastName,\n                paymentDetails.billingAddress?.line1,\n                paymentDetails.billingAddress?.town +\n                  ', ' +\n                  region +\n                  paymentDetails.billingAddress?.country?.isocode,\n                paymentDetails.billingAddress?.postalCode,\n              ],\n            },\n          ],\n        };\n      })\n    );\n  }\n\n  getPoNumberCard(poNumber: string): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutReview.poNumber'),\n      this.translation.translate('checkoutPO.noPoNumber'),\n    ]).pipe(\n      map(([textTitle, noneTextTitle]) => {\n        return {\n          title: textTitle,\n          textBold: poNumber ? poNumber : noneTextTitle,\n        };\n      })\n    );\n  }\n\n  getPaymentTypeCard(paymentType: string): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('checkoutProgress.methodOfPayment'),\n      this.translation.translate('paymentTypes.paymentType', {\n        context: paymentType,\n      }),\n    ]).pipe(\n      map(([textTitle, paymentTypeTranslation]) => {\n        return {\n          title: textTitle,\n          textBold: paymentTypeTranslation,\n        };\n      })\n    );\n  }\n\n  getCheckoutStepUrl(stepType: CheckoutStepType): string {\n    const step = this.checkoutStepService.getCheckoutStep(stepType);\n    return step && step.routeName;\n  }\n\n  shippingSteps(steps: CheckoutStep[]): CheckoutStep[] {\n    return steps.filter((step) => checkoutShippingSteps.includes(step.type[0]));\n  }\n\n  paymentSteps(steps: CheckoutStep[]): CheckoutStep[] {\n    return steps.filter((step) => checkoutPaymentSteps.includes(step.type[0]));\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CartSharedModule } from '../../../../cms-components/cart/cart-shared/cart-shared.module';\nimport { CardModule } from '../../../../shared/components/card/card.module';\nimport { IconModule } from '../../../misc/icon/icon.module';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { PromotionsModule } from '../promotions/promotions.module';\nimport { CartNotEmptyGuard } from './../../../../cms-components/cart/cart-not-empty.guard';\nimport { ReviewSubmitComponent } from './review-submit.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CardModule,\n    CartSharedModule,\n    I18nModule,\n    UrlModule,\n    RouterModule,\n    PromotionsModule,\n    IconModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutReviewOrder: {\n          component: ReviewSubmitComponent,\n          // TODO(#8880): Shouldn't we keep ShippingAddressSetGuard and others here?\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ReviewSubmitComponent],\n  entryComponents: [ReviewSubmitComponent],\n  exports: [ReviewSubmitComponent],\n})\nexport class ReviewSubmitModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  CheckoutService,\n  DaysOfWeek,\n  ORDER_TYPE,\n  recurrencePeriod,\n  ScheduleReplenishmentForm,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { ICON_TYPE } from '../../../misc/icon/icon.model';\nimport { CheckoutReplenishmentFormService } from '../../services/checkout-replenishment-form-service';\n\n@Component({\n  selector: 'cx-schedule-replenishment-order',\n  templateUrl: './schedule-replenishment-order.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ScheduleReplenishmentOrderComponent implements OnInit, OnDestroy {\n  private subscription: Subscription = new Subscription();\n\n  iconTypes = ICON_TYPE;\n  orderTypes = ORDER_TYPE;\n  daysOfWeek = Object.keys(DaysOfWeek).map((key) => DaysOfWeek[key]);\n  recurrencePeriodType = Object.keys(recurrencePeriod).map(\n    (key) => recurrencePeriod[key]\n  );\n\n  selectedOrderType$: Observable<\n    ORDER_TYPE\n  > = this.checkoutService.getCurrentOrderType();\n\n  isMonthly: Boolean = false;\n  isWeekly: Boolean = false;\n  currentDaysOfWeek: DaysOfWeek[] = [];\n  numberOfDays: string[];\n  numberOfWeeks: string[];\n  currentDate: string;\n  scheduleReplenishmentFormData: ScheduleReplenishmentForm;\n\n  constructor(\n    protected checkoutService: CheckoutService,\n    protected checkoutReplenishmentFormService: CheckoutReplenishmentFormService\n  ) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      this.checkoutReplenishmentFormService\n        .getScheduleReplenishmentFormData()\n        .subscribe((data) => {\n          this.scheduleReplenishmentFormData = data;\n        })\n    );\n\n    this.initConfig();\n  }\n\n  changeOrderType(orderType: ORDER_TYPE): void {\n    this.checkoutService.setOrderType(orderType);\n  }\n\n  changeNumberOfDays(nDays: string): void {\n    this.checkoutReplenishmentFormService.setScheduleReplenishmentFormData({\n      ...this.scheduleReplenishmentFormData,\n      numberOfDays: nDays,\n    });\n  }\n\n  changeNumberOfWeeks(nWeeks: string): void {\n    this.checkoutReplenishmentFormService.setScheduleReplenishmentFormData({\n      ...this.scheduleReplenishmentFormData,\n      numberOfWeeks: nWeeks,\n    });\n  }\n\n  changeRecurrencePeriodType(type: string): void {\n    this.isWeekly = type === recurrencePeriod.WEEKLY;\n    this.isMonthly = type === recurrencePeriod.MONTHLY;\n\n    this.numberOfDays = this.isMonthly\n      ? this.createNumberStringArray(31)\n      : this.createNumberStringArray(30);\n\n    this.checkoutReplenishmentFormService.setScheduleReplenishmentFormData({\n      ...this.scheduleReplenishmentFormData,\n      recurrencePeriod: type,\n    });\n  }\n\n  changeDayOfTheMonth(dayOfMonth: string): void {\n    this.checkoutReplenishmentFormService.setScheduleReplenishmentFormData({\n      ...this.scheduleReplenishmentFormData,\n      nthDayOfMonth: dayOfMonth,\n    });\n  }\n\n  changeReplenishmentStartDate(date: string): void {\n    if (Boolean(date)) {\n      this.checkoutReplenishmentFormService.setScheduleReplenishmentFormData({\n        ...this.scheduleReplenishmentFormData,\n        replenishmentStartDate: date,\n      });\n    }\n  }\n\n  changeRepeatDays(day: DaysOfWeek, isChecked: boolean): void {\n    if (isChecked) {\n      this.currentDaysOfWeek = [...this.currentDaysOfWeek];\n\n      this.currentDaysOfWeek.push(day);\n\n      this.checkoutReplenishmentFormService.setScheduleReplenishmentFormData({\n        ...this.scheduleReplenishmentFormData,\n        daysOfWeek: this.currentDaysOfWeek,\n      });\n    } else {\n      const foundDay = this.currentDaysOfWeek.find((data) => day === data);\n\n      if (!foundDay) return;\n\n      const index = this.currentDaysOfWeek.indexOf(foundDay);\n      this.currentDaysOfWeek.splice(index, 1);\n\n      this.checkoutReplenishmentFormService.setScheduleReplenishmentFormData({\n        ...this.scheduleReplenishmentFormData,\n        daysOfWeek: this.currentDaysOfWeek,\n      });\n    }\n  }\n\n  hasDaysOfWeekChecked(day: DaysOfWeek): boolean {\n    return this.currentDaysOfWeek.includes(day);\n  }\n\n  private initConfig(): void {\n    this.isMonthly =\n      this.scheduleReplenishmentFormData.recurrencePeriod ===\n      recurrencePeriod.MONTHLY;\n\n    this.isWeekly =\n      this.scheduleReplenishmentFormData.recurrencePeriod ===\n      recurrencePeriod.WEEKLY;\n\n    this.currentDaysOfWeek = [...this.scheduleReplenishmentFormData.daysOfWeek];\n\n    this.numberOfDays = this.isMonthly\n      ? this.createNumberStringArray(31)\n      : this.createNumberStringArray(30);\n\n    this.numberOfWeeks = this.createNumberStringArray(12);\n\n    this.currentDate = this.scheduleReplenishmentFormData.replenishmentStartDate;\n  }\n\n  private createNumberStringArray(n: number): string[] {\n    return Array(n)\n      .fill(0)\n      .map((_, y) => (y + 1).toString());\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { CartNotEmptyGuard } from '../../../cart/cart-not-empty.guard';\nimport { IconModule } from '../../../misc/icon/icon.module';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { ScheduleReplenishmentOrderComponent } from './schedule-replenishment-order.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, I18nModule, IconModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutScheduleReplenishmentOrder: {\n          component: ScheduleReplenishmentOrderComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ScheduleReplenishmentOrderComponent],\n  entryComponents: [ScheduleReplenishmentOrderComponent],\n  exports: [ScheduleReplenishmentOrderComponent],\n})\nexport class ScheduleReplenishmentOrderModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  Address,\n  AddressValidation,\n  CheckoutDeliveryService,\n  Country,\n  ErrorModel,\n  GlobalMessageService,\n  GlobalMessageType,\n  Region,\n  Title,\n  UserAddressService,\n  UserService,\n} from '@spartacus/core';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { map, switchMap, take, tap } from 'rxjs/operators';\nimport {\n  ModalRef,\n  ModalService,\n} from '../../../../../shared/components/modal/index';\nimport { sortTitles } from '../../../../../shared/utils/forms/title-utils';\nimport { SuggestedAddressDialogComponent } from './suggested-addresses-dialog/suggested-addresses-dialog.component';\n\n@Component({\n  selector: 'cx-address-form',\n  templateUrl: './address-form.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddressFormComponent implements OnInit, OnDestroy {\n  countries$: Observable<Country[]>;\n  titles$: Observable<Title[]>;\n  regions$: Observable<Region[]>;\n  selectedCountry$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n  addresses$: Observable<Address[]>;\n\n  @Input()\n  addressData: Address;\n\n  @Input()\n  actionBtnLabel: string;\n\n  @Input()\n  cancelBtnLabel: string;\n\n  @Input()\n  setAsDefaultField = true;\n\n  @Input()\n  showTitleCode: boolean;\n\n  @Input()\n  showCancelBtn = true;\n\n  @Output()\n  submitAddress = new EventEmitter<any>();\n\n  @Output()\n  backToAddress = new EventEmitter<any>();\n\n  addressVerifySub: Subscription;\n  regionsSub: Subscription;\n  suggestedAddressModalRef: ModalRef;\n\n  addressForm: FormGroup = this.fb.group({\n    country: this.fb.group({\n      isocode: [null, Validators.required],\n    }),\n    titleCode: [''],\n    firstName: ['', Validators.required],\n    lastName: ['', Validators.required],\n    line1: ['', Validators.required],\n    line2: [''],\n    town: ['', Validators.required],\n    region: this.fb.group({\n      isocode: [null, Validators.required],\n    }),\n    postalCode: ['', Validators.required],\n    phone: '',\n    defaultAddress: [false],\n  });\n\n  constructor(\n    protected fb: FormBuilder,\n    protected checkoutDeliveryService: CheckoutDeliveryService,\n    protected userService: UserService,\n    protected userAddressService: UserAddressService,\n    protected globalMessageService: GlobalMessageService,\n    protected modalService: ModalService\n  ) {}\n\n  ngOnInit() {\n    // Fetching countries\n    this.countries$ = this.userAddressService.getDeliveryCountries().pipe(\n      tap((countries: Country[]) => {\n        if (Object.keys(countries).length === 0) {\n          this.userAddressService.loadDeliveryCountries();\n        }\n      })\n    );\n\n    // Fetching titles\n    this.titles$ = this.userService.getTitles().pipe(\n      map((titles) => {\n        titles.sort(sortTitles);\n        const noneTitle = { code: '', name: 'Title' };\n        return [noneTitle, ...titles];\n      })\n    );\n\n    // Fetching regions\n    this.regions$ = this.selectedCountry$.pipe(\n      switchMap((country) => this.userAddressService.getRegions(country)),\n      tap((regions: Region[]) => {\n        const regionControl = this.addressForm.get('region.isocode');\n        if (regions && regions.length > 0) {\n          regionControl.enable();\n        } else {\n          regionControl.disable();\n        }\n      })\n    );\n\n    // verify the new added address\n    this.addressVerifySub = this.checkoutDeliveryService\n      .getAddressVerificationResults()\n      .subscribe((results: AddressValidation) => {\n        if (results.decision === 'FAIL') {\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n        } else if (results.decision === 'ACCEPT') {\n          this.submitAddress.emit(this.addressForm.value);\n        } else if (results.decision === 'REJECT') {\n          // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)\n          if (\n            results.errors.errors.some(\n              (error: ErrorModel) => error.subject === 'titleCode'\n            )\n          ) {\n            this.globalMessageService.add(\n              { key: 'addressForm.titleRequired' },\n              GlobalMessageType.MSG_TYPE_ERROR\n            );\n          } else {\n            this.globalMessageService.add(\n              { key: 'addressForm.invalidAddress' },\n              GlobalMessageType.MSG_TYPE_ERROR\n            );\n          }\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n        } else if (results.decision === 'REVIEW') {\n          this.openSuggestedAddress(results);\n        }\n      });\n\n    if (this.addressData && Object.keys(this.addressData).length !== 0) {\n      this.addressForm.patchValue(this.addressData);\n\n      this.countrySelected(this.addressData.country);\n      if (this.addressData.region) {\n        this.regionSelected(this.addressData.region);\n      }\n    }\n\n    this.addresses$ = this.userAddressService.getAddresses();\n  }\n\n  countrySelected(country: Country): void {\n    this.addressForm['controls'].country['controls'].isocode.setValue(\n      country.isocode\n    );\n    this.selectedCountry$.next(country.isocode);\n  }\n\n  regionSelected(region: Region): void {\n    this.addressForm['controls'].region['controls'].isocode.setValue(\n      region.isocode\n    );\n  }\n\n  toggleDefaultAddress(): void {\n    this.addressForm['controls'].defaultAddress.setValue(\n      this.addressForm.value.defaultAddress\n    );\n  }\n\n  back(): void {\n    this.backToAddress.emit();\n  }\n\n  verifyAddress(): void {\n    if (this.addressForm.valid) {\n      if (this.addressForm.get('region').value.isocode) {\n        this.regionsSub = this.regions$.pipe(take(1)).subscribe((regions) => {\n          const obj = regions.find(\n            (region) =>\n              region.isocode ===\n              this.addressForm.controls['region'].value.isocode\n          );\n          Object.assign(this.addressForm.value.region, {\n            isocodeShort: obj.isocodeShort,\n          });\n        });\n      }\n\n      if (this.addressForm.dirty) {\n        this.checkoutDeliveryService.verifyAddress(this.addressForm.value);\n      } else {\n        // address form value not changed\n        // ignore duplicate address\n        this.submitAddress.emit(undefined);\n      }\n    } else {\n      this.addressForm.markAllAsTouched();\n    }\n  }\n\n  openSuggestedAddress(results: AddressValidation): void {\n    if (!this.suggestedAddressModalRef) {\n      this.suggestedAddressModalRef = this.modalService.open(\n        SuggestedAddressDialogComponent,\n        { centered: true, size: 'lg' }\n      );\n      this.suggestedAddressModalRef.componentInstance.enteredAddress = this.addressForm.value;\n      this.suggestedAddressModalRef.componentInstance.suggestedAddresses =\n        results.suggestedAddresses;\n      this.suggestedAddressModalRef.result\n        .then((address) => {\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n          if (address) {\n            address = Object.assign(\n              {\n                titleCode: this.addressForm.value.titleCode,\n                phone: this.addressForm.value.phone,\n                selected: true,\n              },\n              address\n            );\n            this.submitAddress.emit(address);\n          }\n          this.suggestedAddressModalRef = null;\n        })\n        .catch(() => {\n          // this  callback is called when modal is closed with Esc key or clicking backdrop\n          this.checkoutDeliveryService.clearAddressVerificationResults();\n          const address = Object.assign(\n            {\n              selected: true,\n            },\n            this.addressForm.value\n          );\n          this.submitAddress.emit(address);\n          this.suggestedAddressModalRef = null;\n        });\n    }\n  }\n\n  ngOnDestroy() {\n    this.checkoutDeliveryService.clearAddressVerificationResults();\n\n    if (this.addressVerifySub) {\n      this.addressVerifySub.unsubscribe();\n    }\n\n    if (this.regionsSub) {\n      this.regionsSub.unsubscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../../misc/icon/index';\nimport { AddressFormComponent } from './address-form.component';\nimport { SuggestedAddressDialogComponent } from './suggested-addresses-dialog/suggested-addresses-dialog.component';\nimport { FormErrorsModule } from '../../../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    RouterModule,\n    NgSelectModule,\n    IconModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  declarations: [AddressFormComponent, SuggestedAddressDialogComponent],\n  entryComponents: [SuggestedAddressDialogComponent],\n  exports: [AddressFormComponent, SuggestedAddressDialogComponent],\n})\nexport class AddressFormModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  ActiveCartService,\n  Address,\n  CheckoutCostCenterService,\n  CheckoutDeliveryService,\n  PaymentTypeService,\n  TranslationService,\n  UserAddressService,\n  UserCostCenterService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map, switchMap, tap } from 'rxjs/operators';\nimport { Card } from '../../../../shared/components/card/card.component';\nimport { CheckoutStepService } from '../../services/checkout-step.service';\n\nexport interface CardWithAddress {\n  card: Card;\n  address: Address;\n}\n\n@Component({\n  selector: 'cx-shipping-address',\n  templateUrl: './shipping-address.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ShippingAddressComponent implements OnInit, OnDestroy {\n  addressFormOpened = false;\n  forceLoader = false; // this helps with smoother steps transition\n  selectedAddress: Address;\n  doneAutoSelect = false;\n  isAccountPayment = false;\n\n  protected subscriptions = new Subscription();\n\n  constructor(\n    protected userAddressService: UserAddressService,\n    protected checkoutDeliveryService: CheckoutDeliveryService,\n    protected activatedRoute: ActivatedRoute,\n    protected translation: TranslationService,\n    protected activeCartService: ActiveCartService,\n    protected checkoutStepService: CheckoutStepService,\n    protected paymentTypeService?: PaymentTypeService,\n    protected userCostCenterService?: UserCostCenterService,\n    protected checkoutCostCenterService?: CheckoutCostCenterService\n  ) {}\n\n  get isGuestCheckout(): boolean {\n    return this.activeCartService.isGuestCart();\n  }\n\n  get backBtnText(): string {\n    return this.checkoutStepService.getBackBntText(this.activatedRoute);\n  }\n\n  get isLoading$(): Observable<boolean> {\n    return this.userAddressService.getAddressesLoading();\n  }\n\n  get selectedAddress$(): Observable<Address> {\n    return this.checkoutDeliveryService.getDeliveryAddress().pipe(\n      tap((address) => {\n        if (\n          address &&\n          (this.selectedAddress === undefined ||\n            this.selectedAddress.id !== address.id)\n        ) {\n          this.selectedAddress = address;\n          if (this.forceLoader) {\n            this.next();\n          }\n        }\n      })\n    );\n  }\n\n  get cards$(): Observable<CardWithAddress[]> {\n    return combineLatest([\n      this.getSupportedAddresses(),\n      this.selectedAddress$,\n      this.translation.translate('checkoutAddress.defaultShippingAddress'),\n      this.translation.translate('checkoutAddress.shipToThisAddress'),\n      this.translation.translate('addressCard.selected'),\n    ]).pipe(\n      tap(([addresses, selected]) =>\n        this.selectDefaultAddress(addresses, selected)\n      ),\n      map(([addresses, selected, textDefault, textShipTo, textSelected]) =>\n        (<any>addresses).map((address) => ({\n          address,\n          card: this.getCardContent(\n            address,\n            selected,\n            textDefault,\n            textShipTo,\n            textSelected\n          ),\n        }))\n      )\n    );\n  }\n\n  getSupportedAddresses(): Observable<Address[]> {\n    if (this.isAccountPayment) {\n      return this.checkoutCostCenterService.getCostCenter().pipe(\n        distinctUntilChanged(),\n        switchMap((selected) => {\n          this.doneAutoSelect = false;\n          return this.userCostCenterService.getCostCenterAddresses(selected);\n        })\n      );\n    }\n    return this.userAddressService.getAddresses();\n  }\n\n  selectDefaultAddress(addresses: Address[], selected: Address) {\n    if (\n      !this.doneAutoSelect &&\n      addresses &&\n      addresses.length &&\n      (!selected || Object.keys(selected).length === 0)\n    ) {\n      if (this.isAccountPayment) {\n        if (addresses.length === 1) {\n          this.selectAddress(addresses[0]);\n        }\n      } else {\n        selected = addresses.find((address) => address.defaultAddress);\n        if (selected) {\n          this.selectAddress(selected);\n        }\n      }\n      this.doneAutoSelect = true;\n    }\n  }\n\n  ngOnInit(): void {\n    if (\n      this.paymentTypeService &&\n      this.userCostCenterService &&\n      this.checkoutCostCenterService\n    ) {\n      this.subscriptions.add(\n        this.paymentTypeService\n          .isAccountPayment()\n          .pipe(distinctUntilChanged())\n          .subscribe((isAccount) => (this.isAccountPayment = isAccount))\n      );\n    }\n\n    if (!this.isGuestCheckout && !this.isAccountPayment) {\n      this.userAddressService.loadAddresses();\n    }\n  }\n\n  getCardContent(\n    address: Address,\n    selected: any,\n    textDefaultShippingAddress: string,\n    textShipToThisAddress: string,\n    textSelected: string\n  ): Card {\n    let region = '';\n    if (address.region && address.region.isocode) {\n      region = address.region.isocode + ', ';\n    }\n\n    return {\n      title: address.defaultAddress ? textDefaultShippingAddress : '',\n      textBold: address.firstName + ' ' + address.lastName,\n      text: [\n        address.line1,\n        address.line2,\n        address.town + ', ' + region + address.country.isocode,\n        address.postalCode,\n        address.phone,\n      ],\n      actions: [{ name: textShipToThisAddress, event: 'send' }],\n      header: selected && selected.id === address.id ? textSelected : '',\n    };\n  }\n\n  selectAddress(address: Address): void {\n    this.checkoutDeliveryService.setDeliveryAddress(address);\n  }\n\n  addAddress(address: Address): void {\n    this.forceLoader = true;\n    if (Boolean(address)) {\n      this.checkoutDeliveryService.createAndSetAddress(address);\n    } else {\n      this.forceLoader = false;\n      this.next();\n    }\n  }\n\n  showNewAddressForm(): void {\n    this.addressFormOpened = true;\n  }\n\n  hideNewAddressForm(goPrevious: boolean = false): void {\n    this.addressFormOpened = false;\n    if (goPrevious) {\n      this.back();\n    }\n  }\n\n  next(): void {\n    this.checkoutStepService.next(this.activatedRoute);\n  }\n\n  back(): void {\n    this.checkoutStepService.back(this.activatedRoute);\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { CardModule } from '../../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../../shared/components/spinner/spinner.module';\nimport { CheckoutAuthGuard } from '../../guards/checkout-auth.guard';\nimport { CartNotEmptyGuard } from './../../../../cms-components/cart/cart-not-empty.guard';\nimport { AddressFormModule } from './address-form/address-form.module';\nimport { ShippingAddressComponent } from './shipping-address.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    AddressFormModule,\n    CardModule,\n    SpinnerModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CheckoutShippingAddress: {\n          component: ShippingAddressComponent,\n          guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ShippingAddressComponent],\n  entryComponents: [ShippingAddressComponent],\n  exports: [ShippingAddressComponent],\n})\nexport class ShippingAddressModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CheckoutOrchestratorModule } from './components/checkout-orchestrator/checkout-orchestrator.module';\nimport { CheckoutOrderSummaryModule } from './components/checkout-order-summary/checkout-order-summary.module';\n// tslint:disable-next-line\nimport { CheckoutProgressMobileBottomModule } from './components/checkout-progress/checkout-progress-mobile-bottom/checkout-progress-mobile-bottom.module';\n// tslint:disable-next-line\nimport { CheckoutProgressMobileTopModule } from './components/checkout-progress/checkout-progress-mobile-top/checkout-progress-mobile-top.module';\nimport { CheckoutProgressModule } from './components/checkout-progress/checkout-progress.module';\nimport { CostCenterModule } from './components/cost-center/cost-center.module';\nimport { DeliveryModeModule } from './components/delivery-mode/delivery-mode.module';\nimport { PaymentMethodModule } from './components/payment-method/payment-method.module';\nimport { PaymentTypeModule } from './components/payment-type/payment-type.module';\nimport { PlaceOrderModule } from './components/place-order/place-order.module';\nimport { PromotionsModule } from './components/promotions/promotions.module';\nimport { ReviewSubmitModule } from './components/review-submit/review-submit.module';\nimport { ScheduleReplenishmentOrderModule } from './components/schedule-replenishment-order/schedule-replenishment-order.module';\nimport { ShippingAddressModule } from './components/shipping-address/shipping-address.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CheckoutOrchestratorModule,\n    CheckoutOrderSummaryModule,\n    CheckoutProgressModule,\n    CheckoutProgressMobileTopModule,\n    CheckoutProgressMobileBottomModule,\n    PaymentTypeModule,\n    DeliveryModeModule,\n    PaymentMethodModule,\n    PlaceOrderModule,\n    ScheduleReplenishmentOrderModule,\n    PromotionsModule,\n    ReviewSubmitModule,\n    ShippingAddressModule,\n    CostCenterModule,\n  ],\n})\nexport class CheckoutComponentModule {}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class SkipLinkConfig {\n  skipLinks?: SkipLink[];\n}\n\nexport abstract class SkipLink {\n  key: string;\n  i18nKey: string;\n  target?: HTMLElement;\n  position?: SkipLinkScrollPosition;\n}\n\nexport enum SkipLinkScrollPosition {\n  BEFORE = 'BEFORE',\n  AFTER = 'AFTER',\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { KeyboardFocusService } from '../../keyboard-focus/services/keyboard-focus.service';\nimport { SkipLink, SkipLinkConfig } from '../config/skip-link.config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SkipLinkService {\n  private skipLinks$ = new BehaviorSubject<SkipLink[]>([]);\n\n  constructor(\n    protected config: SkipLinkConfig,\n    protected keyboardFocusService: KeyboardFocusService\n  ) {}\n\n  getSkipLinks(): Observable<SkipLink[]> {\n    return this.skipLinks$;\n  }\n\n  add(key: string, target: HTMLElement): void {\n    const found: SkipLink = this.config.skipLinks.find(\n      (skipLink) => skipLink.key === key\n    );\n\n    if (found) {\n      const existing: SkipLink[] = this.skipLinks$.value;\n      existing.splice(this.getSkipLinkIndexInArray(key), 0, {\n        target,\n        i18nKey: found.i18nKey,\n        position: found.position,\n        key,\n      });\n      this.skipLinks$.next(existing);\n    }\n  }\n\n  remove(key: string): void {\n    const found: SkipLink = this.config.skipLinks.find(\n      (skipLink) => skipLink.key === key\n    );\n\n    if (found) {\n      let existing: SkipLink[] = this.skipLinks$.value;\n      existing = existing.filter((skipLink) => skipLink.key !== key);\n      this.skipLinks$.next(existing);\n    }\n  }\n\n  scrollToTarget(skipLink: SkipLink): void {\n    const target =\n      skipLink.target instanceof HTMLElement\n        ? skipLink.target\n        : (skipLink.target as Element).parentElement;\n\n    // focus first focusable element in the\n    const firstFocusable =\n      this.keyboardFocusService.findFirstFocusable(target) || target;\n\n    // we force a tabindex if not available, to ensure we can focus into the element\n    const hasTabindex = firstFocusable.hasAttribute('tabindex');\n    if (!hasTabindex) {\n      firstFocusable.setAttribute('tabindex', '-1');\n    }\n\n    firstFocusable.focus();\n\n    // drop the tmp tabindex\n    if (!hasTabindex) {\n      firstFocusable.removeAttribute('tabindex');\n    }\n  }\n\n  protected getSkipLinkIndexInArray(key: string): number {\n    let index: number = this.config.skipLinks.findIndex(\n      (skipLink) => skipLink.key === key\n    );\n\n    while (index > 0) {\n      index--;\n      const previous: SkipLink = this.config.skipLinks[index];\n      if (previous) {\n        const existing: SkipLink[] = this.skipLinks$.value;\n        const found: number = existing.findIndex(\n          (skipLink) => skipLink.key === previous.key\n        );\n        if (found > -1) {\n          return found + 1;\n        }\n      }\n    }\n    return 0;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SkipLink } from '../config/skip-link.config';\nimport { SkipLinkService } from '../service/skip-link.service';\n\n@Component({\n  selector: 'cx-skip-link',\n  templateUrl: './skip-link.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SkipLinkComponent {\n  skipLinks$: Observable<SkipLink[]> = this.skipLinkService.getSkipLinks();\n\n  constructor(private skipLinkService: SkipLinkService) {}\n\n  scrollToTarget(skipLink: SkipLink): void {\n    this.skipLinkService.scrollToTarget(skipLink);\n  }\n}\n","import { SkipLinkConfig } from './skip-link.config';\n\nexport const defaultSkipLinkConfig: SkipLinkConfig = {\n  skipLinks: [\n    {\n      key: 'cx-header',\n      i18nKey: 'skipLink.labels.header',\n    },\n    {\n      key: 'cx-main',\n      i18nKey: 'skipLink.labels.main',\n    },\n    { key: 'cx-footer', i18nKey: 'skipLink.labels.footer' },\n  ],\n};\n","import { Directive, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { SkipLinkService } from '../service/skip-link.service';\n\n@Directive({\n  selector: '[cxSkipLink]',\n})\nexport class SkipLinkDirective implements OnInit, OnDestroy {\n  @Input() cxSkipLink: string;\n\n  constructor(\n    protected elementRef: ElementRef<HTMLElement>,\n    protected skipLinkService: SkipLinkService\n  ) {}\n\n  ngOnInit(): void {\n    this.skipLinkService.add(this.cxSkipLink, this.elementRef.nativeElement);\n  }\n\n  ngOnDestroy(): void {\n    this.skipLinkService.remove(this.cxSkipLink);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport {\n  APP_INITIALIZER,\n  ComponentFactoryResolver,\n  NgModule,\n} from '@angular/core';\nimport {\n  ConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { OutletPosition } from '../../../cms-structure/outlet/outlet.model';\nimport { OutletService } from '../../../cms-structure/outlet/outlet.service';\nimport { KeyboardFocusModule } from '../keyboard-focus/keyboard-focus.module';\nimport { SkipLinkComponent } from './component/skip-link.component';\nimport { defaultSkipLinkConfig } from './config/default-skip-link.config';\nimport { SkipLinkDirective } from './directive/skip-link.directive';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    ConfigModule.withConfig(defaultSkipLinkConfig),\n    KeyboardFocusModule,\n  ],\n  declarations: [SkipLinkComponent, SkipLinkDirective],\n  exports: [SkipLinkDirective],\n  entryComponents: [SkipLinkComponent],\n\n  providers: [\n    provideDefaultConfig(defaultSkipLinkConfig),\n    {\n      provide: APP_INITIALIZER,\n      useFactory: skipLinkFactory,\n      deps: [ComponentFactoryResolver, OutletService],\n      multi: true,\n    },\n  ],\n})\nexport class SkipLinkModule {}\n\n/**\n * Adds the skip link component before the cx-storefront.\n */\nexport function skipLinkFactory(\n  componentFactoryResolver: ComponentFactoryResolver,\n  outletService: OutletService\n) {\n  const isReady = () => {\n    const factory = componentFactoryResolver.resolveComponentFactory(\n      SkipLinkComponent\n    );\n    outletService.add('cx-storefront', <any>factory, OutletPosition.BEFORE);\n  };\n  return isReady;\n}\n","import { LayoutConfig } from './layout-config';\n\nexport const defaultLayoutConfig: LayoutConfig = {\n  breakpoints: {\n    xs: 576,\n    sm: 768,\n    md: 992,\n    lg: 1200,\n    xl: {\n      min: 1200,\n    },\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\nimport { Direction } from './direction.model';\n\n/**\n * The direction config provides an easy way to configure \"ltr\" versus \"rtl\" direction\n * for the storefront. The direction can be configured to detect the direction by language.\n *\n * The following configuration detects rtl languages by isoCode for Arabic and Hebrew:\n *\n * ```typescript\n * direction: {\n *   detect: true,\n *   default: DirectionMode.LTR,\n *   rtlLanguages: ['ar', 'he']\n * }\n * ```\n */\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class DirectionConfig {\n  direction?: Direction;\n}\n","import { DirectionConfig } from './direction.config';\nimport { DirectionMode } from './direction.model';\n\nexport const defaultDirectionConfig: DirectionConfig = {\n  direction: {\n    detect: true,\n    default: DirectionMode.LTR,\n    // we're not polluting the system with all defaults for ltr, but add 2 common used\n    // languages (hebrew and arabic) to easily demo directionality\n    // see https://meta.wikimedia.org/wiki/Template:List_of_language_names_ordered_by_code\n    rtlLanguages: ['he', 'ar'],\n  },\n};\n","import { Injectable, OnDestroy } from '@angular/core';\nimport {\n  ConfigInitializerService,\n  LanguageService,\n  WindowRef,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { DirectionConfig } from './config/direction.config';\nimport { Direction, DirectionMode } from './config/direction.model';\n\n/**\n * The `DirectionService` can be used to add the direction to the overall storefront or individual elements.\n * By default, the direction is added to the `html` element (i.e. `<html dir=\"ltr\">`). The API of this service\n * does however provide methods to add direction to individual elements if needed.\n *\n * The direction is configurable and allows for language driven direction configuration.\n *\n * To react to the active language, the service subscribes to the active language in the initialize method. This\n * is called from an APP_INITIALIZER method and should only happen once.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class DirectionService implements OnDestroy {\n  protected config: Direction;\n  protected startsDetecting = false;\n\n  protected subscription = new Subscription();\n\n  constructor(\n    protected configInit: ConfigInitializerService,\n    protected languageService: LanguageService,\n    protected winRef: WindowRef\n  ) {}\n\n  /**\n   * Initializes the layout direction for the storefront.\n   */\n  initialize(): Promise<void> {\n    return this.configInit\n      .getStableConfig('direction')\n      .then((config: DirectionConfig) => {\n        this.config = config?.direction;\n        if (this.config?.detect) {\n          this.detect();\n        } else {\n          this.setDirection(\n            this.winRef.document.documentElement,\n            this.config?.default\n          );\n        }\n      });\n  }\n\n  /**\n   * Observes the _active_ language and set the required direction for the given language.\n   * The method is guarded to ensure that the active language is observed only once.\n   */\n  protected detect() {\n    if (this.startsDetecting) {\n      return;\n    }\n    this.subscription.add(\n      this.languageService\n        .getActive()\n        .subscribe((isoCode: string) =>\n          this.setDirection(\n            this.winRef.document.documentElement,\n            this.getDirection(isoCode)\n          )\n        )\n    );\n    this.startsDetecting = true;\n  }\n\n  /**\n   * Sets the direction attribute for the given element. If the direction is undefined, the `dir`\n   * attribute is removed.\n   */\n  setDirection(el: HTMLElement, direction: DirectionMode): void {\n    if (direction) {\n      el.setAttribute('dir', direction);\n    } else {\n      el.removeAttribute('dir');\n    }\n  }\n\n  /**\n   * Gets the `DirectionMode` for the given language isoCode. The language isoCode is compared\n   * to the configured list of languages(`direction.rtlLanguages` vs `direction.ltrLanguages`).\n   *\n   * If no language is given, or no language mapping could be found, we fallback to the default\n   * `direction.mode`.\n   */\n  getDirection(language?: string): DirectionMode {\n    if (language && this.config?.rtlLanguages?.includes(language)) {\n      return DirectionMode.RTL;\n    }\n    if (language && this.config?.ltrLanguages?.includes(language)) {\n      return DirectionMode.LTR;\n    }\n    return this.config?.default;\n  }\n\n  ngOnDestroy(): void {\n    // Cleans up the subscription, to avoid memory leaks in SSR.\n    this.subscription.unsubscribe();\n  }\n}\n","import { APP_INITIALIZER, NgModule } from '@angular/core';\nimport { FeatureConfigService, provideDefaultConfig } from '@spartacus/core';\nimport { defaultDirectionConfig } from './config/default-direction.config';\nimport { DirectionService } from './direction.service';\n\nexport function initHtmlDirAttribute(\n  directionService: DirectionService,\n  featureConfigService: FeatureConfigService\n) {\n  const result = () => {\n    if (featureConfigService.isLevel('2.1')) {\n      return directionService.initialize();\n    }\n  };\n  return result;\n}\n\n/**\n * Provides a configuration and APP_INITIALIZER to add the correct (language drive) html direction.\n */\n@NgModule({\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      multi: true,\n      useFactory: initHtmlDirAttribute,\n      deps: [DirectionService, FeatureConfigService],\n    },\n    provideDefaultConfig(defaultDirectionConfig),\n  ],\n})\nexport class DirectionModule {}\n","import { Injectable } from '@angular/core';\nimport { NavigationStart, Router } from '@angular/router';\nimport { BehaviorSubject } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class HamburgerMenuService {\n  isExpanded: BehaviorSubject<boolean> = new BehaviorSubject(false);\n\n  constructor(router: Router) {\n    router.events\n      .pipe(filter((event) => event instanceof NavigationStart))\n      .subscribe(() => {\n        this.toggle(true);\n      });\n  }\n\n  /**\n   * toggles the expand state of the hamburger menu\n   */\n  toggle(forceCollapse?: boolean): void {\n    if (forceCollapse) {\n      this.isExpanded.next(false);\n    } else {\n      this.isExpanded.next(!this.isExpanded.value);\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { HamburgerMenuService } from './hamburger-menu.service';\n\n@Component({\n  selector: 'cx-hamburger-menu',\n  templateUrl: './hamburger-menu.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class HamburgerMenuComponent {\n  constructor(private hamburgerMenuService: HamburgerMenuService) {}\n\n  toggle(): void {\n    this.hamburgerMenuService.toggle();\n  }\n\n  get isExpanded(): Observable<boolean> {\n    return this.hamburgerMenuService.isExpanded;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { HamburgerMenuComponent } from './hamburger-menu.component';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        HamburgerMenuComponent: {\n          component: HamburgerMenuComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [HamburgerMenuComponent],\n  exports: [HamburgerMenuComponent],\n  entryComponents: [HamburgerMenuComponent],\n})\nexport class HamburgerMenuModule {}\n","import { NgModule } from '@angular/core';\nimport { provideConfig } from '@spartacus/core';\nimport { OutletRefModule } from '../cms-structure/outlet/outlet-ref/outlet-ref.module';\nimport { defaultLayoutConfig } from './config/default-layout.config';\nimport { DirectionModule } from './direction/direction.module';\nimport { LaunchDialogModule } from './launch-dialog/index';\n\n@NgModule({\n  imports: [OutletRefModule, LaunchDialogModule.forRoot(), DirectionModule],\n  providers: [provideConfig(defaultLayoutConfig)],\n  exports: [OutletRefModule],\n})\nexport class LayoutModule {}\n","import { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { DOCUMENT, isPlatformBrowser } from '@angular/common';\nimport { IntersectionOptions } from '../../../layout/loading/intersection.model';\nimport { DeferLoadingStrategy } from '@spartacus/core';\nimport { CmsComponentsService } from '../../services/cms-components.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PageSlotService {\n  protected prerenderedSlots: string[] | undefined;\n\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    @Inject(PLATFORM_ID) protected platformId: any,\n    @Inject(DOCUMENT) protected document\n  ) {\n    this.resolvePrerenderedSlots();\n  }\n\n  /**\n   * Finds all slots visible in the SSR pre-rendered DOM\n   */\n  protected resolvePrerenderedSlots(): void {\n    if (isPlatformBrowser(this.platformId)) {\n      this.prerenderedSlots = Array.from(\n        this.document.querySelectorAll('cx-page-slot')\n      )\n        .filter(\n          (el: Element) =>\n            el.getBoundingClientRect().top <\n            this.document.documentElement.clientHeight\n        )\n        .map((el: Element) => el.getAttribute('page-slot'));\n    }\n  }\n\n  /**\n   * Indicates if certain slot should be rendered instantly.\n   *\n   * It's especially useful when transitioning from SSR to CSR application,\n   * where we don't want to apply deferring logic to slots that are visible\n   * to avoid unnecessary flickering.\n   */\n  shouldNotDefer(slot: string): boolean {\n    if (this.prerenderedSlots?.includes(slot)) {\n      this.prerenderedSlots.splice(this.prerenderedSlots.indexOf(slot), 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Returns the defer options for the given component. If the wrapping\n   * page slot is prerendered, we would ignore the defer options altogether.\n   */\n  getComponentDeferOptions(\n    slot: string,\n    componentType: string\n  ): IntersectionOptions {\n    if (this.shouldNotDefer(slot)) {\n      return { deferLoading: DeferLoadingStrategy.INSTANT };\n    }\n    const deferLoading = this.cmsComponentsService.getDeferLoadingStrategy(\n      componentType\n    );\n    return { deferLoading };\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n} from '@angular/core';\nimport {\n  CmsService,\n  ContentSlotComponentData,\n  ContentSlotData,\n  DynamicAttributeService,\n} from '@spartacus/core';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map, switchMap, tap } from 'rxjs/operators';\nimport { IntersectionOptions } from '../../../layout/loading/intersection.model';\nimport { PageSlotService } from './page-slot.service';\n\n/**\n * The `PageSlotComponent` is used to render the CMS page slot and it's components.\n *\n * The Page slot host element will be supplemented with css classes so that the layout\n * can be fully controlled by customers:\n * - The page slot _position_ is added as a css class by default.\n * - The `cx-pending` is added for as long as the slot hasn't start loading.\n * - The `page-fold` style class is added for the page slot which is configured as the page fold.\n */\n@Component({\n  selector: 'cx-page-slot,[cx-page-slot]',\n  templateUrl: './page-slot.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PageSlotComponent implements OnInit, OnDestroy {\n  /**\n   * The position represents the unique key for a page slot on a single page, but can\n   * be reused cross pages.\n   *\n   * The position is used to find the CMS components for the page slot. It is also\n   * added as an additional CSS class so that layout can be applied.\n   */\n  @HostBinding('attr.position')\n  @Input()\n  set position(value: string) {\n    this.position$.next(value);\n  }\n  get position(): string {\n    return this.position$.value;\n  }\n\n  /**\n   * Maintains css classes introduced by the host and adds additional classes.\n   */\n  @Input() @HostBinding() class: string;\n\n  /**\n   * Indicates that the page slot is the last page slot above the fold.\n   */\n  @HostBinding('class.page-fold') @Input() isPageFold = false;\n\n  /**\n   * Indicates that the components of the page slot haven't been loaded as long\n   * as the isPending state is true.\n   */\n  @HostBinding('class.cx-pending') isPending = true;\n\n  /**\n   * Indicates that the page slot doesn't contain any components. This is no\n   * longer used in spartacus, but kept for backwards compatibility.\n   */\n  @HostBinding('class.has-components') @Input() hasComponents = false;\n\n  protected position$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n\n  components: ContentSlotComponentData[];\n\n  protected slot$: Observable<ContentSlotData> = this.position$.pipe(\n    switchMap((position) => this.cmsService.getContentSlot(position)),\n    distinctUntilChanged(this.isDistinct)\n  );\n\n  /** Observes the components for the given page slot. */\n  components$: Observable<ContentSlotComponentData[]> = this.slot$.pipe(\n    map((slot) => slot?.components ?? [])\n  );\n\n  protected subscription: Subscription = new Subscription();\n\n  /** Keeps track of the pending components that must be loaded for the page slot */\n  private pendingComponentCount = 0;\n\n  /** Tracks the last used position, in case the page slot is used dynamically */\n  private lastPosition: string;\n  constructor(\n    protected cmsService: CmsService,\n    protected dynamicAttributeService: DynamicAttributeService,\n    protected renderer: Renderer2,\n    protected elementRef: ElementRef,\n    protected cd: ChangeDetectorRef,\n    protected pageSlotService: PageSlotService\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.slot$.pipe(tap((slot) => this.decorate(slot))).subscribe((value) => {\n        this.components = value?.components || [];\n        this.cd.markForCheck();\n      })\n    );\n  }\n\n  protected decorate(slot: ContentSlotData): void {\n    let cls = this.class || '';\n\n    if (this.lastPosition && cls.indexOf(this.lastPosition) > -1) {\n      cls = cls.replace(this.lastPosition, '');\n    }\n    if (this.position$.value) {\n      cls += ` ${this.position$.value}`;\n      this.lastPosition = this.position$.value;\n    }\n\n    // host bindings\n    this.pending = slot?.components?.length || 0;\n    this.hasComponents = slot?.components?.length > 0;\n    if (cls && cls !== this.class) {\n      this.class = cls;\n    }\n\n    this.addSmartEditSlotClass(slot);\n  }\n\n  /**\n   * Sets the pending count for the page slot components. Once all pending components are\n   * loaded, the `isPending` flag is updated, so that the associated class can be updated\n   */\n  protected set pending(count: number) {\n    this.pendingComponentCount = count;\n    this.isPending = this.pendingComponentCount > 0;\n  }\n\n  protected get pending(): number {\n    return this.pendingComponentCount;\n  }\n\n  /*\n   * Is triggered when a component is added to the view. This is used to\n   * update the pending count\n   */\n  isLoaded(loadState: boolean) {\n    if (loadState) {\n      this.pending--;\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * The `DeferLoadingStrategy` indicates whether the component should be\n   * rendered instantly or whether it should be deferred.\n   */\n  getComponentDeferOptions(componentType: string): IntersectionOptions {\n    return this.pageSlotService.getComponentDeferOptions(\n      this.position,\n      componentType\n    );\n  }\n\n  protected isDistinct(old: ContentSlotData, current: ContentSlotData) {\n    return (\n      current.components &&\n      old.components?.length === current.components.length &&\n      !old.components.find(\n        (el, index) => el.uid !== current.components[index].uid\n      )\n    );\n  }\n\n  private addSmartEditSlotClass(slot: ContentSlotData): void {\n    if (slot) {\n      this.dynamicAttributeService.addDynamicAttributes(\n        this.elementRef.nativeElement,\n        this.renderer,\n        { slotData: slot }\n      );\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscription?.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { OutletModule } from '../../outlet/outlet.module';\nimport { PageComponentModule } from '../component/page-component.module';\nimport { PageSlotComponent } from './page-slot.component';\nimport { PageSlotService } from './page-slot.service';\n\n@NgModule({\n  imports: [CommonModule, OutletModule, PageComponentModule],\n  declarations: [PageSlotComponent],\n  exports: [PageSlotComponent],\n})\nexport class PageSlotModule {\n  // instantiate PageSlotService ASAP, so it can examine SSR pre-rendered DOM\n  constructor(_pageSlot: PageSlotService) {}\n}\n","import { Inject, Injectable, isDevMode, Optional } from '@angular/core';\nimport { CmsService, Page } from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, map, switchMap } from 'rxjs/operators';\nimport { BreakpointService } from '../../../layout/breakpoint/breakpoint.service';\nimport {\n  BREAKPOINT,\n  LayoutConfig,\n  LayoutSlotConfig,\n  SlotConfig,\n} from '../../../layout/config/layout-config';\nimport { PageLayoutHandler, PAGE_LAYOUT_HANDLER } from './page-layout-handler';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PageLayoutService {\n  constructor(\n    private cms: CmsService,\n    private config: LayoutConfig,\n    private breakpointService: BreakpointService,\n    @Optional()\n    @Inject(PAGE_LAYOUT_HANDLER)\n    private handlers: PageLayoutHandler[]\n  ) {}\n\n  // Prints warn messages for missing layout configs.\n  // The warnings are only printed once per config\n  // to not pollute the console log.\n  private warnLogMessages = {};\n  private logSlots = {};\n\n  getSlots(section?: string): Observable<string[]> {\n    return combineLatest([this.page$, this.breakpointService.breakpoint$]).pipe(\n      map(([page, breakpoint]) => {\n        const pageTemplate = page.template;\n        const slots = this.resolveSlots(page, section, breakpoint);\n        return { slots, pageTemplate, breakpoint };\n      }),\n      switchMap(({ slots, pageTemplate, breakpoint }) => {\n        let result = of(slots);\n        for (const handler of this.handlers || []) {\n          result = handler.handle(result, pageTemplate, section, breakpoint);\n        }\n        return result;\n      }),\n      distinctUntilChanged((a, b) => {\n        if (a.length !== b.length) {\n          return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n          if (a[i] !== b[i]) {\n            return false;\n          }\n        }\n        return true;\n      })\n    );\n  }\n\n  /**\n   * Returns an observable with the last page slot above-the-fold\n   * for the given pageTemplate / breakpoint.\n   *\n   * The page fold is configurable in the `LayoutConfig` for each page layout.\n   */\n  getPageFoldSlot(pageTemplate: string): Observable<string> {\n    return this.breakpointService.breakpoint$.pipe(\n      map((breakpoint) => {\n        if (!this.config.layoutSlots) {\n          // no layout config available\n          return null;\n        }\n        const pageTemplateConfig = this.config.layoutSlots[pageTemplate];\n        const config = this.getResponsiveSlotConfig(\n          <LayoutSlotConfig>pageTemplateConfig,\n          'pageFold',\n          breakpoint\n        );\n        return config ? config.pageFold : null;\n      })\n    );\n  }\n\n  private resolveSlots(page, section, breakpoint): string[] {\n    const config = this.getSlotConfig(\n      page.template,\n      'slots',\n      section,\n      breakpoint\n    );\n    if (config && config.slots) {\n      const pageSlots = Object.keys(page.slots);\n      return config.slots.filter((slot) => pageSlots.includes(slot));\n    } else if (!section) {\n      this.logMissingLayoutConfig(page);\n      return Object.keys(page.slots);\n    } else {\n      this.logMissingLayoutConfig(page, section);\n      return [];\n    }\n  }\n\n  get page$(): Observable<Page> {\n    return this.cms.getCurrentPage().pipe(filter((page) => !!page));\n  }\n\n  get templateName$(): Observable<string> {\n    return this.page$.pipe(\n      filter((page) => !!page.template),\n      map((page: Page) => page.template)\n    );\n  }\n\n  /**\n   * load slots from the layout configuration. The breakpoint is used\n   * to load a specific configuration for the given breakpoint. If there's\n   * no configuration available for the given breakpoint the default slot\n   * configuration is returned.\n   */\n  protected getSlotConfig(\n    templateUid: string,\n    configAttribute: string,\n    section?: string,\n    breakpoint?: BREAKPOINT\n  ): SlotConfig {\n    if (!this.config.layoutSlots) {\n      return null;\n    }\n    const pageTemplateConfig = this.config.layoutSlots[templateUid];\n\n    if (section) {\n      return this.getSlotConfigForSection(\n        templateUid,\n        configAttribute,\n        section,\n        breakpoint\n      );\n    }\n\n    if (pageTemplateConfig) {\n      return this.getResponsiveSlotConfig(\n        <LayoutSlotConfig>pageTemplateConfig,\n        configAttribute,\n        breakpoint\n      );\n    }\n  }\n\n  protected getSlotConfigForSection(\n    templateUid: string,\n    configAttribute: string,\n    section?: string,\n    breakpoint?: BREAKPOINT\n  ): SlotConfig {\n    const pageTemplateConfig = this.config.layoutSlots[templateUid];\n\n    if (!pageTemplateConfig) {\n      return null;\n    }\n\n    // if there's no section config on the page layout\n    // we fall back to the global section config\n    const sectionConfig = pageTemplateConfig[section]\n      ? pageTemplateConfig[section]\n      : this.config.layoutSlots[section];\n\n    if (!sectionConfig) {\n      return null;\n    }\n\n    const responsiveConfig = this.getResponsiveSlotConfig(\n      <LayoutSlotConfig>sectionConfig,\n      configAttribute,\n      breakpoint\n    );\n\n    if (responsiveConfig.hasOwnProperty(configAttribute)) {\n      return responsiveConfig;\n    } else if (pageTemplateConfig[section].hasOwnProperty(configAttribute)) {\n      return pageTemplateConfig[section];\n    } else if (this.config.layoutSlots[section]) {\n      return <SlotConfig>this.config.layoutSlots[section];\n    }\n  }\n\n  /**\n   * Returns a list of slots for a breakpoint specific configuration\n   * If there's no specific configuration for the breakpoint,\n   * the closest available configuration will be returned.\n   */\n  protected getResponsiveSlotConfig(\n    layoutSlotConfig: LayoutSlotConfig,\n    configAttribute: string,\n    breakpoint?: BREAKPOINT\n  ): SlotConfig {\n    let slotConfig = <SlotConfig>layoutSlotConfig;\n\n    // fallback to default slot config\n    if (!layoutSlotConfig || !breakpoint) {\n      return slotConfig;\n    }\n\n    // we have a config for the specific breakpoint\n    if (\n      layoutSlotConfig[breakpoint] &&\n      layoutSlotConfig[breakpoint].hasOwnProperty(configAttribute)\n    ) {\n      return <SlotConfig>layoutSlotConfig[breakpoint];\n    }\n\n    // find closest config\n    const all = this.breakpointService.breakpoints;\n\n    for (const br of all.slice(0, all.indexOf(breakpoint))) {\n      if (\n        layoutSlotConfig[br] &&\n        layoutSlotConfig[br].hasOwnProperty(configAttribute)\n      ) {\n        slotConfig = <SlotConfig>layoutSlotConfig[br];\n      }\n    }\n    return slotConfig;\n  }\n\n  /**\n   * In order to help developers, we print some detailed log information in\n   * case there's no layout configuration available for the given page template\n   * or section. Additionally, the slot positions are printed in the console\n   * in a format that can be copied / paste to the configuration.\n   */\n  private logMissingLayoutConfig(page: Page, section?: string): void {\n    if (!isDevMode()) {\n      return;\n    }\n    if (!this.logSlots[page.template]) {\n      // the info log is not printed in production\n      // tslint:disable-next-line: no-console\n      console.info(\n        `Available CMS page slots: '${Object.keys(page.slots).join(`','`)}'`\n      );\n      this.logSlots[page.template] = true;\n    }\n\n    const cacheKey = section || page.template;\n    if (!this.warnLogMessages[cacheKey]) {\n      console.warn(\n        `No layout config found for ${cacheKey}, you can configure a 'LayoutConfig' to control the rendering of page slots.`\n      );\n      this.warnLogMessages[cacheKey] = true;\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport { PageLayoutService } from './page-layout.service';\n\n@Component({\n  selector: 'cx-page-layout',\n  templateUrl: './page-layout.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PageLayoutComponent {\n  @Input() set section(value: string) {\n    this.section$.next(value);\n  }\n  readonly section$: BehaviorSubject<string> = new BehaviorSubject(undefined);\n\n  readonly templateName$: Observable<string> = this.pageLayoutService\n    .templateName$;\n\n  readonly layoutName$: Observable<string> = this.section$.pipe(\n    switchMap((section) => (section ? of(section) : this.templateName$))\n  );\n\n  readonly slots$: Observable<string[]> = this.section$.pipe(\n    switchMap((section) => this.pageLayoutService.getSlots(section))\n  );\n\n  readonly pageFoldSlot$: Observable<string> = this.templateName$.pipe(\n    switchMap((templateName) =>\n      this.pageLayoutService.getPageFoldSlot(templateName)\n    ),\n    distinctUntilChanged()\n  );\n\n  constructor(protected pageLayoutService: PageLayoutService) {}\n}\n","import {\n  ChangeDetectorRef,\n  Directive,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n  TemplateRef,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { PageLayoutService } from './page-layout.service';\n\n/**\n * Directive that Adds a style class to the host element based on the cms page\n * template. The CMS page template is driven by the CMS structure, which is configurable\n * in the backend.\n *\n * The style class is added to the host element of the directive. The host element is resolved\n * from the `elementRef`, or, in case the directive is used in an `ng-template`, by the\n * `TemplateRef`.\n *\n * An example of the usage is given below:\n *\n * ```html\n * <cx-storefront class=\"LandingPageTemplate\">\n *   <ng-template cxPageTemplateStyle>...</ng-template>\n * <cx-storefront>\n * ```\n *\n * The style class can also be provided by an input:\n *\n * ```html\n * <ng-template [cxPageTemplateStyle]=\"pageTemplateName\">\n * ```\n *\n */\n@Directive({\n  selector: '[cxPageTemplateStyle]',\n})\nexport class PageTemplateDirective implements OnInit, OnDestroy {\n  /**\n   * Indicates whether this component is driven by an input template or should\n   * observe the CMS driven page layout template.\n   */\n  protected useTemplateFromInput: boolean;\n\n  /**\n   * Adds a style class to the host element based on the cms page template, unless\n   * the class is given as an input.\n   *\n   * The host element is either the actual host, or the parent element in case this\n   * is used inside an `ng-template`.\n   */\n  @Input('cxPageTemplateStyle') set setTemplate(template: string) {\n    if (template && template !== '') {\n      this.useTemplateFromInput = true;\n      this.addStyleClass(template);\n    } else if (this.useTemplateFromInput) {\n      // we only clear the template if it has been provided by the input before\n      this.clear();\n    }\n  }\n\n  // Maintains the page template subscription\n  protected subscription: Subscription = new Subscription();\n\n  /**\n   * Holds the current page template, so we can remove previous page templates\n   * from the element classList.\n   */\n  protected currentTemplate: string;\n\n  constructor(\n    protected pageLayoutService: PageLayoutService,\n    protected elementRef: ElementRef,\n    @Optional() protected templateRef: TemplateRef<HTMLElement>,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  ngOnInit(): void {\n    if (!this.useTemplateFromInput) {\n      this.subscription.add(\n        this.pageLayoutService.templateName$.subscribe((template) =>\n          this.addStyleClass(template)\n        )\n      );\n    }\n  }\n\n  /**\n   * Adds the page template as a style class to the given element. If any\n   * page template was added before, we clean it up.\n   *\n   * We'll not use hostBinding for the style class, as it will potential drop\n   * an existing class name on the host. This is why we need to work with\n   * the lower level change detection api.\n   */\n  protected addStyleClass(template: string, el?: HTMLElement): void {\n    this.clear(el);\n    if (template) {\n      this.currentTemplate = template;\n      (el ?? this.host).classList.add(this.currentTemplate);\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * Cleans up the class host binding, if a template class was assigned before.\n   */\n  protected clear(el?: HTMLElement) {\n    if (this.currentTemplate) {\n      (el ?? this.host).classList?.remove(this.currentTemplate);\n      this.cd.markForCheck();\n    }\n  }\n\n  /**\n   * Returns the host element (`HTMLElement`).\n   *\n   * If the directive is used on an `ng-template`, we take the parent element,\n   * to ensure that we're not ending up with a comment.\n   */\n  protected get host(): HTMLElement {\n    return !!this.templateRef\n      ? this.templateRef.elementRef.nativeElement.parentElement\n      : this.elementRef.nativeElement;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { PageSlotModule } from '../../../cms-structure/page/slot/page-slot.module';\nimport { OutletModule } from '../../outlet/outlet.module';\nimport { PageLayoutComponent } from './page-layout.component';\nimport { PageTemplateDirective } from './page-template.directive';\n\n@NgModule({\n  imports: [CommonModule, OutletModule, PageSlotModule],\n  declarations: [PageLayoutComponent, PageTemplateDirective],\n  exports: [PageLayoutComponent, PageTemplateDirective],\n})\nexport class PageLayoutModule {}\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class PWAModuleConfig {\n  pwa?: {\n    enabled?: boolean;\n    addToHomeScreen?: boolean;\n  };\n}\n\nexport const defaultPWAModuleConfig: PWAModuleConfig = {\n  pwa: {\n    enabled: false,\n    addToHomeScreen: false,\n  },\n};\n","import { Injectable } from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  WindowRef,\n} from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { PWAModuleConfig } from '../pwa.module-config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AddToHomeScreenService {\n  protected deferredEvent: any;\n\n  protected canPrompt = new BehaviorSubject<boolean>(false);\n\n  canPrompt$: Observable<boolean> = this.canPrompt.asObservable();\n\n  constructor(\n    protected config: PWAModuleConfig,\n    protected globalMessageService: GlobalMessageService,\n    protected winRef: WindowRef\n  ) {\n    if (this.config.pwa.addToHomeScreen) {\n      this.init();\n    }\n  }\n\n  init() {\n    if (this.winRef.nativeWindow) {\n      this.winRef.nativeWindow.addEventListener(\n        'beforeinstallprompt',\n        (event) => {\n          event.preventDefault();\n          this.deferredEvent = event;\n          this.enableAddToHomeScreen();\n        }\n      );\n\n      this.winRef.nativeWindow.addEventListener('appinstalled', () => {\n        this.globalMessageService.add(\n          { key: 'pwa.addedToHomeScreen' },\n          GlobalMessageType.MSG_TYPE_CONFIRMATION\n        );\n\n        this.disableAddToHomeScreen();\n        this.deferredEvent = null;\n      });\n    }\n  }\n\n  enableAddToHomeScreen(): void {\n    this.canPrompt.next(true);\n  }\n\n  disableAddToHomeScreen(): void {\n    this.canPrompt.next(false);\n  }\n\n  firePrompt(): void {\n    if (this.deferredEvent) {\n      this.deferredEvent.prompt();\n    }\n  }\n}\n","import { OnInit, Directive } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { AddToHomeScreenService } from '../services/add-to-home-screen.service';\n\n@Directive()\n// tslint:disable-next-line:directive-class-suffix\nexport abstract class AddToHomeScreenComponent implements OnInit {\n  canPrompt$: Observable<boolean>;\n  constructor(protected addToHomeScreenService: AddToHomeScreenService) {}\n\n  ngOnInit(): void {\n    this.canPrompt$ = this.addToHomeScreenService.canPrompt$;\n  }\n\n  prompt(): void {\n    this.addToHomeScreenService.firePrompt();\n  }\n}\n","import { Component } from '@angular/core';\nimport { AddToHomeScreenService } from '../../services/add-to-home-screen.service';\nimport { AddToHomeScreenComponent } from '../add-to-home-screen.component';\n\n@Component({\n  selector: 'cx-add-to-home-screen-banner',\n  templateUrl: './add-to-home-screen-banner.component.html',\n})\nexport class AddToHomeScreenBannerComponent extends AddToHomeScreenComponent {\n  constructor(protected addToHomeScreenService: AddToHomeScreenService) {\n    super(addToHomeScreenService);\n  }\n}\n","import { Component } from '@angular/core';\nimport { AddToHomeScreenService } from '../../services/add-to-home-screen.service';\nimport { AddToHomeScreenComponent } from '../add-to-home-screen.component';\n\n@Component({\n  selector: 'cx-add-to-home-screen-btn',\n  templateUrl: './add-to-home-screen-btn.component.html',\n})\nexport class AddToHomeScreenBtnComponent extends AddToHomeScreenComponent {\n  constructor(protected addToHomeScreenService: AddToHomeScreenService) {\n    super(addToHomeScreenService);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { APP_INITIALIZER, isDevMode, NgModule } from '@angular/core';\nimport {\n  ServiceWorkerModule,\n  SwRegistrationOptions,\n} from '@angular/service-worker';\nimport { Config, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { AddToHomeScreenBannerComponent } from './components/add-to-home-screen-banner/add-to-home-screen-banner.component';\nimport { AddToHomeScreenBtnComponent } from './components/add-to-home-screen-btn/add-to-home-screen-btn.component';\nimport { defaultPWAModuleConfig, PWAModuleConfig } from './pwa.module-config';\nimport { AddToHomeScreenService } from './services/add-to-home-screen.service';\n\nexport function pwaConfigurationFactory(\n  pwaConfig: PWAModuleConfig\n): SwRegistrationOptions {\n  return { enabled: (!isDevMode() && pwaConfig.pwa.enabled) || false };\n}\n\nexport function pwaFactory(addToHomeScreenService): any {\n  const result = () => addToHomeScreenService;\n  return result;\n}\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ServiceWorkerModule.register('ngsw-worker.js'),\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(defaultPWAModuleConfig),\n    {\n      provide: SwRegistrationOptions,\n      useFactory: pwaConfigurationFactory,\n      deps: [Config],\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: pwaFactory,\n      deps: [AddToHomeScreenService],\n      multi: true,\n    },\n  ],\n  declarations: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],\n  exports: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],\n})\nexport class PwaModule {}\n","import { SeoConfig } from './seo.config';\n\nexport const defaultSeoConfig: SeoConfig = {\n  seo: {\n    structuredData: {\n      disableInDevMode: true,\n    },\n  },\n};\n","import { Injectable } from '@angular/core';\nimport { Config } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n  useExisting: Config,\n})\nexport abstract class SeoConfig {\n  seo?: SeoOptions;\n}\n\nexport interface SeoOptions {\n  structuredData?: StructuredData;\n}\n\nexport interface StructuredData {\n  disableInDevMode?: boolean;\n}\n","import { APP_INITIALIZER, Provider } from '@angular/core';\nimport { LanguageService, WindowRef } from '@spartacus/core';\n\nexport const htmlLangProvider: Provider = {\n  provide: APP_INITIALIZER,\n  multi: true,\n  useFactory: setHtmlLangAttribute,\n  deps: [WindowRef, LanguageService],\n};\n\n/**\n * Sets active language in <html lang=\"\">\n */\nexport function setHtmlLangAttribute(\n  winRef: WindowRef,\n  languageService: LanguageService\n) {\n  const result = () => {\n    languageService.getActive().subscribe((lang) => {\n      winRef.document.documentElement.lang = lang.replace(/_/g, '-');\n    });\n  };\n  return result;\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { Meta, MetaDefinition, Title } from '@angular/platform-browser';\nimport { PageMeta, PageMetaService, PageRobotsMeta } from '@spartacus/core';\nimport { filter } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SeoMetaService implements OnDestroy {\n  constructor(\n    protected ngTitle: Title,\n    protected ngMeta: Meta,\n    protected pageMetaService: PageMetaService\n  ) {}\n\n  private subscription: Subscription;\n\n  init() {\n    this.subscription = this.pageMetaService\n      .getMeta()\n      .pipe(filter(Boolean))\n      .subscribe((meta: PageMeta) => (this.meta = meta));\n  }\n\n  protected set meta(meta: PageMeta) {\n    this.title = meta.title;\n    this.description = meta.description;\n    this.image = meta.image;\n    this.robots = meta.robots || [PageRobotsMeta.INDEX, PageRobotsMeta.FOLLOW];\n  }\n\n  protected set title(title: string) {\n    this.ngTitle.setTitle(title || '');\n  }\n\n  protected set description(value: string) {\n    this.addTag({ name: 'description', content: value });\n  }\n\n  protected set image(imageUrl: string) {\n    if (imageUrl) {\n      this.addTag({ name: 'og:image', content: imageUrl });\n    }\n  }\n\n  protected set robots(value: PageRobotsMeta[]) {\n    if (value) {\n      this.addTag({ name: 'robots', content: value.join(', ') });\n    }\n  }\n\n  protected addTag(meta: MetaDefinition) {\n    if (meta.content) {\n      this.ngMeta.updateTag(meta);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport {\n  Inject,\n  Injectable,\n  isDevMode,\n  PLATFORM_ID,\n  Renderer2,\n  RendererFactory2,\n  SecurityContext,\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { WindowRef } from '@spartacus/core';\nimport { SeoConfig } from '../config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdScriptFactory {\n  constructor(\n    @Inject(PLATFORM_ID) protected platformId: string,\n    protected winRef: WindowRef,\n    protected rendererFactory: RendererFactory2,\n    protected sanitizer: DomSanitizer,\n    protected config: SeoConfig\n  ) {}\n\n  build(schema: {}[]): void {\n    if (schema && this.isJsonLdRequired()) {\n      this.getJsonLdScriptElement().innerHTML = this.sanitize(schema);\n    }\n  }\n\n  /**\n   * Indicates whether json ld data should be generated.\n   *\n   * This is only required on the server, but can be enabled in dev mode.\n   */\n  isJsonLdRequired(): boolean {\n    return (\n      !isPlatformBrowser(this.platformId) ||\n      (isDevMode() && !this.config.seo?.structuredData?.disableInDevMode)\n    );\n  }\n\n  /**\n   * Creates a json-ld script element. The element is created one, and appended\n   * to the html body element.\n   *\n   * ```html\n   * <script id=\"json-ld\" type=\"application/ld+json\">\n   * </script>\n   * ```\n   */\n  protected getJsonLdScriptElement(): HTMLScriptElement {\n    const id = 'json-ld';\n    let scriptElement: HTMLScriptElement = <HTMLScriptElement>(\n      this.winRef.document.getElementById(id)\n    );\n\n    if (!scriptElement) {\n      const renderer: Renderer2 = this.rendererFactory.createRenderer(\n        null,\n        null\n      );\n      const script: HTMLScriptElement = renderer.createElement('script');\n      script.id = id;\n      script.type = 'application/ld+json';\n      renderer.appendChild(this.winRef.document.body, script);\n      scriptElement = script;\n    }\n    return scriptElement;\n  }\n\n  /**\n   * Sanitizes the given json-ld schema by leveraging the angular HTML sanitizer.\n   *\n   * The given schema is not trusted, as malicious code could be injected (XSS)\n   * into the json-ld script.\n   */\n  sanitize(schema: {}): string {\n    return JSON.stringify(schema, (_key, value) =>\n      typeof value === 'string'\n        ? this.sanitizer.sanitize(SecurityContext.HTML, value)\n        : value\n    );\n  }\n}\n","import { Directive, HostBinding, Input } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { JsonLdScriptFactory } from './json-ld-script.factory';\n\n/**\n * Low level directive that adds a json-ld script tag to the component.\n * This code bypasses the strict XSS security, as otherwise we're not able\n * to append a script tag with JS inside.\n *\n * This helper directive is actually not used in Spartacus, as Spartacus\n * appends json-ld the data to the document body.\n *\n * This directive can however be used by merchants to write static schema data\n * to the DOM in a save way.\n */\n@Directive({\n  selector: '[cxJsonLd]',\n})\nexport class JsonLdDirective {\n  /**\n   * Writes the schema data to a json-ld script element.\n   */\n  @Input() set cxJsonLd(schema: string | {}) {\n    this.jsonLD = this.generateJsonLdScript(schema);\n  }\n\n  @HostBinding('innerHTML') jsonLD: SafeHtml;\n\n  constructor(\n    protected jsonLdScriptFactory: JsonLdScriptFactory,\n    protected sanitizer: DomSanitizer\n  ) {}\n\n  /**\n   * Returns the json-ld script tag with the schema data. The script is\n   * _bypassing_ sanitization explicitly.\n   */\n  protected generateJsonLdScript(schema: string | {}): SafeHtml {\n    if (schema && this.jsonLdScriptFactory.isJsonLdRequired()) {\n      const sanitizedSchema = this.jsonLdScriptFactory.sanitize(schema);\n      const html = `<script type=\"application/ld+json\">${sanitizedSchema}</script>`;\n      return this.sanitizer.bypassSecurityTrustHtml(html);\n    }\n  }\n}\n","import { InjectionToken } from '@angular/core';\n\n/**\n * Injection token to extend schema builders for adding structural data (json-ld).\n *\n * Some builders (i.e. `JSONLD_PRODUCT_BUILDER`) might have additional\n * lower level builder to further extend the schema.\n */\nexport const SCHEMA_BUILDER = new InjectionToken('SchemaBuilderToken');\n\n/**\n * Injection token to add specific json-ld builders for product related schemas.\n * See see https://schema.org/product for more information.\n */\nexport const JSONLD_PRODUCT_BUILDER = new InjectionToken(\n  'JsonLdProductBuilderToken'\n);\n","import { Inject, Injectable, OnDestroy, Optional } from '@angular/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { SchemaBuilder } from './builders/schema.interface';\nimport { SCHEMA_BUILDER } from './builders/tokens';\nimport { JsonLdScriptFactory } from './json-ld-script.factory';\n\n/**\n * Factory service that is used to build the structured data for\n * all configured schema builders.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class StructuredDataFactory implements OnDestroy {\n  constructor(\n    private scriptBuilder: JsonLdScriptFactory,\n    @Optional()\n    @Inject(SCHEMA_BUILDER)\n    private builders: SchemaBuilder[]\n  ) {}\n\n  protected subscription: Subscription = new Subscription();\n\n  /**\n   * Initiates the build of structured data by collecting all schema\n   * builders.\n   */\n  build(): void {\n    if (this.scriptBuilder.isJsonLdRequired() && this.builders) {\n      this.subscription.add(\n        this.collectSchemas().subscribe((schema: {}[]) => {\n          this.scriptBuilder.build(schema);\n        })\n      );\n    }\n  }\n\n  /**\n   * Collects all schema builders and observe their structured data.\n   */\n  protected collectSchemas(): Observable<any[]> {\n    return combineLatest(this.builders.map((builder) => builder.build()));\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { APP_INITIALIZER, Injector, NgModule } from '@angular/core';\nimport { JsonLdDirective } from './json-ld.directive';\nimport { StructuredDataFactory } from './structured-data.factory';\n\n/**\n * Factory to build the structure data\n * without any interaction with the UI.\n */\nexport function getStructuredDataFactory(injector: Injector) {\n  const result = () => {\n    const factory = injector.get(StructuredDataFactory);\n    factory.build();\n  };\n  return result;\n}\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [JsonLdDirective],\n  exports: [JsonLdDirective],\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      useFactory: getStructuredDataFactory,\n      deps: [Injector],\n      multi: true,\n    },\n  ],\n})\nexport class StructuredDataModule {}\n","import { APP_INITIALIZER, Injector, NgModule } from '@angular/core';\nimport { provideDefaultConfig } from '@spartacus/core';\nimport { defaultSeoConfig } from './config';\nimport { htmlLangProvider } from './html-lang-provider';\nimport { SeoMetaService } from './seo-meta.service';\nimport { StructuredDataModule } from './structured-data/structured-data.module';\n\nexport function initSeoService(injector: Injector) {\n  const result = () => {\n    const service = injector.get(SeoMetaService);\n    service.init();\n  };\n  return result;\n}\n\n@NgModule({\n  imports: [StructuredDataModule],\n  providers: [\n    provideDefaultConfig(defaultSeoConfig),\n    {\n      provide: APP_INITIALIZER,\n      useFactory: initSeoService,\n      deps: [Injector],\n      multi: true,\n    },\n    htmlLangProvider,\n  ],\n})\nexport class SeoModule {}\n","import {\n  Component,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { RoutingService } from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport {\n  FocusConfig,\n  KeyboardFocusService,\n} from '../a11y/keyboard-focus/index';\nimport { SkipLinkComponent } from '../a11y/skip-link/index';\nimport { HamburgerMenuService } from '../header/hamburger-menu/hamburger-menu.service';\n\n@Component({\n  selector: 'cx-storefront',\n  templateUrl: './storefront.component.html',\n})\nexport class StorefrontComponent implements OnInit, OnDestroy {\n  navigateSubscription: Subscription;\n  isExpanded$: Observable<boolean> = this.hamburgerMenuService.isExpanded;\n\n  @HostBinding('class.start-navigating') startNavigating;\n  @HostBinding('class.stop-navigating') stopNavigating;\n\n  // required by esc focus\n  @HostBinding('tabindex') tabindex = '0';\n\n  @ViewChild(SkipLinkComponent) child: SkipLinkComponent;\n\n  private keyboardFocusConfig: FocusConfig = {\n    focusOnEscape: true,\n    focusOnDoubleEscape: true,\n  };\n\n  @HostListener('keydown.escape', ['$event'])\n  handleEscape(event: KeyboardEvent): void {\n    this.keyboardFocusService.handleEscape(\n      this.elementRef.nativeElement,\n      this.keyboardFocusConfig,\n      event\n    );\n  }\n\n  constructor(\n    private hamburgerMenuService: HamburgerMenuService,\n    private routingService: RoutingService,\n    protected elementRef: ElementRef<HTMLElement>,\n    protected keyboardFocusService: KeyboardFocusService\n  ) {}\n\n  ngOnInit(): void {\n    this.navigateSubscription = this.routingService\n      .isNavigating()\n      .subscribe((val) => {\n        this.startNavigating = val === true;\n        this.stopNavigating = val === false;\n      });\n  }\n\n  collapseMenuIfClickOutside(event: any): void {\n    const element = event.target;\n    if (\n      element.nodeName.toLowerCase() === 'header' &&\n      element.className.includes('is-expanded')\n    ) {\n      this.collapseMenu();\n    }\n  }\n\n  collapseMenu(): void {\n    this.hamburgerMenuService.toggle(true);\n  }\n\n  ngOnDestroy(): void {\n    if (this.navigateSubscription) {\n      this.navigateSubscription.unsubscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { FeaturesConfigModule } from '@spartacus/core';\nimport { GlobalMessageComponentModule } from '../../cms-components/misc/global-message/global-message.module';\nimport { OutletRefModule } from '../../cms-structure/outlet/outlet-ref/outlet-ref.module';\nimport { OutletModule } from '../../cms-structure/outlet/outlet.module';\nimport { PageLayoutModule } from '../../cms-structure/page/page-layout/page-layout.module';\nimport { PageSlotModule } from '../../cms-structure/page/slot/page-slot.module';\nimport { PwaModule } from '../../cms-structure/pwa/pwa.module';\nimport { SeoModule } from '../../cms-structure/seo/seo.module';\nimport { AnonymousConsentsDialogModule } from '../../shared/components/anonymous-consents-dialog/anonymous-consents-dialog.module';\nimport { KeyboardFocusModule } from '../a11y/keyboard-focus/keyboard-focus.module';\nimport { SkipLinkModule } from '../a11y/skip-link/skip-link.module';\nimport { StorefrontComponent } from './storefront.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    GlobalMessageComponentModule,\n    OutletModule,\n    OutletRefModule,\n    PwaModule,\n    PageLayoutModule,\n    SeoModule,\n    PageSlotModule,\n    AnonymousConsentsDialogModule,\n    FeaturesConfigModule,\n\n    SkipLinkModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [StorefrontComponent],\n  exports: [StorefrontComponent],\n})\nexport class MainModule {}\n","import { Injectable, Injector } from '@angular/core';\nimport { CanActivate, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport { CmsActivatedRouteSnapshot } from '@spartacus/core';\nimport { concat, from, isObservable, Observable, of } from 'rxjs';\nimport { endWith, first, skipWhile } from 'rxjs/operators';\nimport { CmsComponentsService } from './cms-components.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsGuardsService {\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    protected injector: Injector\n  ) {}\n\n  cmsPageCanActivate(\n    componentTypes: string[],\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    const guards = this.cmsComponentsService.getGuards(componentTypes);\n\n    if (guards.length) {\n      const canActivateObservables = guards.map((guardClass) => {\n        const guard = this.injector.get<CanActivate>(guardClass, null);\n        if (isCanActivate(guard)) {\n          return wrapIntoObservable(guard.canActivate(route, state)).pipe(\n            first()\n          );\n        } else {\n          throw new Error('Invalid CanActivate guard in cmsMapping');\n        }\n      });\n\n      return concat(...canActivateObservables).pipe(\n        skipWhile((canActivate: boolean | UrlTree) => canActivate === true),\n        endWith(true),\n        first()\n      );\n    } else {\n      return of(true);\n    }\n  }\n}\n\nfunction wrapIntoObservable<T>(\n  value: T | Promise<T> | Observable<T>\n): Observable<T> {\n  if (isObservable(value)) {\n    return value;\n  }\n\n  if (isPromise(value)) {\n    return from(Promise.resolve(value));\n  }\n\n  return of(value);\n}\n\nfunction isPromise(obj: any): obj is Promise<any> {\n  return !!obj && typeof obj.then === 'function';\n}\n\nfunction isCanActivate(guard: any): guard is CanActivate {\n  return guard && isFunction<CanActivate>(guard.canActivate);\n}\n\nfunction isFunction<T>(v: any): v is T {\n  return typeof v === 'function';\n}\n","import { Injectable } from '@angular/core';\nimport { TranslationChunkService, TranslationService } from '@spartacus/core';\nimport { CmsComponentsService } from './cms-components.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsI18nService {\n  constructor(\n    protected cmsComponentsService: CmsComponentsService,\n    protected translation: TranslationService,\n    protected translationChunk: TranslationChunkService\n  ) {}\n\n  loadForComponents(componentTypes: string[]) {\n    const i18nKeys = this.cmsComponentsService.getI18nKeys(componentTypes);\n    const i18nChunks = new Set<string>();\n    for (const key of i18nKeys) {\n      i18nChunks.add(this.translationChunk.getChunkNameForKey(key));\n    }\n    this.translation.loadChunks(Array.from(i18nChunks));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport {\n  CmsComponentChildRoutesConfig,\n  CmsRoute,\n  deepMerge,\n  PageContext,\n  PageType,\n} from '@spartacus/core';\nimport { PageLayoutComponent } from '../page/page-layout/page-layout.component';\nimport { CmsComponentsService } from './cms-components.service';\n\n// This service should be exposed in public API only after the refactor planned in https://github.com/SAP/spartacus/issues/7070\n@Injectable({ providedIn: 'root' })\nexport class CmsRoutesImplService {\n  constructor(\n    private router: Router,\n    private cmsComponentsService: CmsComponentsService\n  ) {}\n\n  private cmsRouteExists(url: string): boolean {\n    const isCmsDrivenRoute = url.startsWith('/');\n\n    if (!isCmsDrivenRoute) {\n      return false;\n    }\n\n    const routePath = url.substr(1);\n\n    return (\n      isCmsDrivenRoute &&\n      !!this.router.config.find(\n        (route: CmsRoute) =>\n          route.data && route.data.cxCmsRouteContext && route.path === routePath\n      )\n    );\n  }\n\n  /**\n   * Contains Cms driven routing logic intended for use use in guards, especially in canActivate method.\n   *\n   * Will return true, when logic wont have to modify routing (so canActivate could be easily resolved to true)\n   * or will return false, when routing configuration was updated and redirection to newly generated route was initiated.\n   *\n   * @param pageContext\n   * @param currentUrl\n   */\n  handleCmsRoutesInGuard(\n    pageContext: PageContext,\n    componentTypes: string[],\n    currentUrl: string,\n    currentPageLabel: string\n  ): boolean {\n    if (this.cmsRouteExists(currentPageLabel)) {\n      return true;\n    }\n\n    const childRoutesConfig = this.cmsComponentsService.getChildRoutes(\n      componentTypes\n    );\n\n    if (childRoutesConfig?.children?.length) {\n      if (\n        this.updateRouting(pageContext, currentPageLabel, childRoutesConfig)\n      ) {\n        this.router.navigateByUrl(currentUrl);\n        return false;\n      }\n    }\n    return true;\n  }\n\n  private updateRouting(\n    pageContext: PageContext,\n    pageLabel: string,\n    childRoutesConfig: CmsComponentChildRoutesConfig\n  ): boolean {\n    if (\n      pageContext.type === PageType.CONTENT_PAGE &&\n      pageLabel.startsWith('/') &&\n      pageLabel.length > 1\n    ) {\n      const newRoute: CmsRoute = {\n        path: pageLabel.substr(1),\n        component: PageLayoutComponent,\n        children: childRoutesConfig.children,\n        data: deepMerge({}, childRoutesConfig?.parent?.data ?? {}, {\n          cxCmsRouteContext: {\n            type: pageContext.type,\n            id: pageLabel,\n          },\n        }),\n      };\n\n      this.router.resetConfig([newRoute, ...this.router.config]);\n      return true;\n    }\n\n    return false;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { PageContext } from '@spartacus/core';\nimport { CmsRoutesImplService } from './cms-routes-impl.service';\n\n// Public injection token for the private implementation of the service `CmsRoutesImplService`.\n// After #7070, this class should be replaced with a real implementation.\n@Injectable({\n  providedIn: 'root',\n  useExisting: CmsRoutesImplService,\n})\nexport abstract class CmsRoutesService {\n  abstract handleCmsRoutesInGuard(\n    pageContext: PageContext,\n    componentTypes: string[],\n    currentUrl: string,\n    currentPageLabel: string\n  ): boolean;\n}\n","import { Injectable } from '@angular/core';\nimport { RouterStateSnapshot, UrlTree } from '@angular/router';\nimport {\n  CmsActivatedRouteSnapshot,\n  CmsService,\n  Page,\n  PageContext,\n  PageType,\n  SemanticPathService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport {\n  filter,\n  map,\n  switchMap,\n  take,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators';\nimport { CmsComponentsService } from '../services/cms-components.service';\nimport { CmsGuardsService } from '../services/cms-guards.service';\nimport { CmsI18nService } from '../services/cms-i18n.service';\nimport { CmsRoutesService } from '../services/cms-routes.service';\n\n/**\n * Helper service for `CmsPageGuard`\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsPageGuardService {\n  constructor(\n    protected semanticPathService: SemanticPathService,\n    protected cmsService: CmsService,\n    protected cmsRoutes: CmsRoutesService,\n    protected cmsI18n: CmsI18nService,\n    protected cmsGuards: CmsGuardsService,\n    protected cmsComponentsService: CmsComponentsService,\n    protected routing: RoutingService\n  ) {}\n\n  /**\n   * Takes CMS components types in the current CMS page, triggers (configurable) side effects and returns a boolean - whether the route can be activated.\n   *\n   * Based on `cmsComponents` config for the components in the page:\n   * - Evaluates components' guards; if one of them emits false or UrlTree - the route cannot be activated or redirects to the given UrlTree, respectively.\n   * - If all components' guards emitted true, then the route can be activated\n   * - Then we trigger loading of configured i18n chunks in parallel\n   * - And we register the configured children routes of cms components\n   *\n   * @param pageContext current cms page context\n   * @param pageData cms page data\n   * @param route activated route snapshot\n   * @param state router state snapshot\n   *\n   * @returns boolean observable - whether the route can be activated\n   */\n  canActivatePage(\n    pageContext: PageContext,\n    pageData: Page,\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    return this.cmsService.getPageComponentTypes(pageContext).pipe(\n      take(1),\n      switchMap((componentTypes) =>\n        this.cmsComponentsService.determineMappings(componentTypes)\n      ),\n      switchMap((componentTypes) =>\n        this.cmsGuards\n          .cmsPageCanActivate(componentTypes, route, state)\n          .pipe(withLatestFrom(of(componentTypes)))\n      ),\n      tap(([canActivate, componentTypes]) => {\n        if (canActivate === true) {\n          this.cmsI18n.loadForComponents(componentTypes);\n        }\n      }),\n      map(([canActivate, componentTypes]) => {\n        const pageLabel = pageData.label || pageContext.id; // for content pages the page label returned from backend can be different than ID initially assumed from route\n        if (canActivate === true && !route?.data?.cxCmsRouteContext) {\n          return this.cmsRoutes.handleCmsRoutesInGuard(\n            pageContext,\n            componentTypes,\n            state.url,\n            pageLabel\n          );\n        }\n        return canActivate;\n      })\n    );\n  }\n\n  /**\n   * Activates the \"NOT FOUND\" cms page.\n   *\n   * It loads cms page data for the \"NOT FOUND\" page and puts it in the state of the the requested page label.\n   * Then it processes its CMS components with the method `canActivatePage()` of this service. For more, see its docs.\n   */\n  canActivateNotFoundPage(\n    pageContext: PageContext,\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    const notFoundCmsPageContext: PageContext = {\n      type: PageType.CONTENT_PAGE,\n      id: this.semanticPathService.get('notFound'),\n    };\n\n    return this.cmsService.getPage(notFoundCmsPageContext).pipe(\n      switchMap((notFoundPage) => {\n        if (notFoundPage) {\n          return this.cmsService.getPageIndex(notFoundCmsPageContext).pipe(\n            tap((notFoundIndex) => {\n              this.cmsService.setPageFailIndex(pageContext, notFoundIndex);\n              this.routing.changeNextPageContext(notFoundCmsPageContext);\n            }),\n            switchMap((notFoundIndex) =>\n              this.cmsService.getPageIndex(pageContext).pipe(\n                // we have to wait for page index update\n                filter((index) => index === notFoundIndex)\n              )\n            ),\n            switchMap(() =>\n              this.canActivatePage(pageContext, notFoundPage, route, state)\n            )\n          );\n        }\n        return of(false);\n      })\n    );\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, RouterStateSnapshot, UrlTree } from '@angular/router';\nimport {\n  CmsActivatedRouteSnapshot,\n  CmsService,\n  ProtectedRoutesGuard,\n  RouteLoadStrategy,\n  RoutingConfigService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { first, switchMap } from 'rxjs/operators';\nimport { CmsPageGuardService } from './cms-page-guard.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CmsPageGuard implements CanActivate {\n  static guardName = 'CmsPageGuard';\n\n  constructor(\n    protected routingService: RoutingService,\n    protected cmsService: CmsService,\n    protected protectedRoutesGuard: ProtectedRoutesGuard,\n    protected service: CmsPageGuardService,\n    protected routingConfig: RoutingConfigService\n  ) {}\n\n  /**\n   * Tries to load the CMS page data for the anticipated route and returns:\n   * - `true` - if it can be activated\n   * - `false` - if it cannot be activated\n   * - `UrlTree` - if user should be redirected to a given `UrlTree`\n   *\n   * If the route can be activated, it fires additional calculations on the CMS components present on this CMS page,\n   * based on their configuration (`cmsComponents` config).\n   *\n   * For more, see docs of the `CmsPageGuardService.canActivatePage`.\n   */\n  canActivate(\n    route: CmsActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    return this.protectedRoutesGuard.canActivate(route).pipe(\n      switchMap((canActivate) =>\n        canActivate === true\n          ? this.routingService.getNextPageContext().pipe(\n              switchMap((pageContext) =>\n                this.cmsService.getPage(pageContext, this.shouldReload()).pipe(\n                  first(),\n                  switchMap((pageData) =>\n                    pageData\n                      ? this.service.canActivatePage(\n                          pageContext,\n                          pageData,\n                          route,\n                          state\n                        )\n                      : this.service.canActivateNotFoundPage(\n                          pageContext,\n                          route,\n                          state\n                        )\n                  )\n                )\n              )\n            )\n          : of(canActivate)\n      )\n    );\n  }\n\n  /**\n   * Returns whether we should reload the CMS page data, even when it was loaded before.\n   */\n  private shouldReload(): boolean {\n    return this.routingConfig.getLoadStrategy() !== RouteLoadStrategy.ONCE;\n  }\n}\n","import { Injector } from '@angular/core';\nimport { Route, Router } from '@angular/router';\nimport { CmsPageGuard } from '../../guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../page/page-layout/page-layout.component';\n\nconst cmsRoute: Route = {\n  path: '**',\n  canActivate: [CmsPageGuard],\n  component: PageLayoutComponent,\n};\n\nexport function addCmsRoute(injector: Injector) {\n  const result = () => {\n    const router = injector.get(Router);\n    router.config.push(cmsRoute);\n  };\n  return result;\n}\n","import { NgModule, APP_INITIALIZER, Injector } from '@angular/core';\nimport { addCmsRoute } from './add-cms-route';\n\n@NgModule({\n  providers: [\n    {\n      provide: APP_INITIALIZER,\n      multi: true,\n      deps: [Injector],\n      useFactory: addCmsRoute,\n    },\n  ],\n})\nexport class CmsRouteModule {}\n","import { RoutesConfig, RoutingConfig } from '@spartacus/core';\n\nexport const defaultStorefrontRoutesConfig: RoutesConfig = {\n  home: { paths: [''] },\n  notFound: { paths: ['not-found'] },\n  cart: { paths: ['cart'] },\n\n  // semantic links for login related pages\n  login: { paths: ['login'], protected: false },\n  register: { paths: ['login/register'], protected: false },\n  forgotPassword: { paths: ['login/forgot-password'], protected: false },\n  resetPassword: { paths: ['login/pw/change'], protected: false },\n  logout: { paths: ['logout'] },\n  checkoutLogin: { paths: ['checkout-login'] },\n\n  checkout: { paths: ['checkout'] },\n  checkoutPaymentType: { paths: ['checkout/payment-type'] },\n  checkoutShippingAddress: { paths: ['checkout/shipping-address'] },\n  checkoutDeliveryMode: { paths: ['checkout/delivery-mode'] },\n  checkoutPaymentDetails: { paths: ['checkout/payment-details'] },\n  checkoutReviewOrder: { paths: ['checkout/review-order'] },\n  orderConfirmation: { paths: ['order-confirmation'] },\n  replenishmentConfirmation: { paths: ['replenishment/confirmation'] },\n\n  // plp routes\n  search: { paths: ['search/:query'] },\n  category: {\n    paths: ['category/:categoryCode'],\n    paramsMapping: { categoryCode: 'code' },\n  },\n  brand: { paths: ['Brands/:brandName/c/:brandCode'] },\n\n  // pdp routes\n  product: {\n    paths: ['product/:productCode/:name'],\n    paramsMapping: { productCode: 'code' },\n  },\n\n  termsAndConditions: { paths: ['terms-and-conditions'] },\n  orders: {\n    paths: ['my-account/orders'],\n  },\n  orderDetails: {\n    paths: ['my-account/order/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  orderGuest: {\n    paths: ['guest/order/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  orderReturn: {\n    paths: ['my-account/order/return/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  orderReturnConfirmation: {\n    paths: ['my-account/order/return/confirmation/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  orderCancel: {\n    paths: ['my-account/order/cancel/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  orderCancelConfirmation: {\n    paths: ['my-account/order/cancel/confirmation/:orderCode'],\n    paramsMapping: { orderCode: 'code' },\n  },\n  returnRequestDetails: {\n    paths: ['my-account/return-request/:returnCode'],\n    paramsMapping: { returnCode: 'rma' },\n  },\n  coupons: { paths: ['my-account/coupons'] },\n  couponClaim: {\n    paths: ['my-account/coupon/claim/:couponCode'],\n    paramsMapping: { couponCode: 'code' },\n  },\n  replenishmentOrders: {\n    paths: ['my-account/my-replenishments'],\n  },\n  replenishmentDetails: {\n    paths: ['my-account/my-replenishment/:replenishmentOrderCode'],\n    paramsMapping: { replenishmentOrderCode: 'replenishmentOrderCode' },\n  },\n};\n\nexport const defaultRoutingConfig: RoutingConfig = {\n  routing: {\n    routes: defaultStorefrontRoutesConfig,\n  },\n};\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport {\n  provideDefaultConfig,\n  RoutingModule as CoreRoutingModule,\n} from '@spartacus/core';\nimport { CmsRouteModule } from './cms-route/cms-route.module';\nimport { defaultRoutingConfig } from './default-routing-config';\n\n@NgModule({\n  imports: [CoreRoutingModule.forRoot(), CmsRouteModule],\n})\nexport class RoutingModule {\n  static forRoot(): ModuleWithProviders<RoutingModule> {\n    return {\n      ngModule: RoutingModule,\n      providers: [provideDefaultConfig(defaultRoutingConfig)],\n    };\n  }\n}\n","import { isDevMode } from '@angular/core';\nimport { UrlMatchResult, UrlSegment } from '@angular/router';\n\n/**\n * Matches the pattern '[ ** / ] marker / :paramName'\n *\n * @param marker phrase that indicates the start of the match\n * @param paramName name of the parameter present after the marker\n * @param precedingParamName name of the parameter for every preceding url segment\n *        i.e. `param` will result in `param0`, `param1`, ...\n */\nexport function getSuffixUrlMatcher({\n  marker,\n  paramName,\n  precedingParamName,\n}: {\n  marker: string;\n  paramName: string;\n  precedingParamName?: string;\n}) {\n  precedingParamName = precedingParamName || 'param';\n  const matcher = function suffixUrlMatcher(\n    segments: UrlSegment[]\n  ): UrlMatchResult | null {\n    const markerIndex = findLastIndex(segments, ({ path }) => path === marker);\n    const isMarkerLastSegment = markerIndex === segments.length - 1;\n\n    if (markerIndex === -1 || isMarkerLastSegment) {\n      return null;\n    }\n\n    const paramIndex = markerIndex + 1;\n    const posParams: { [name: string]: UrlSegment } = {\n      [paramName]: segments[paramIndex],\n    };\n\n    for (let i = 0; i < markerIndex; i++) {\n      posParams[`${precedingParamName}${i}`] = segments[i];\n    }\n\n    return { consumed: segments.slice(0, paramIndex + 1), posParams };\n  };\n\n  if (isDevMode()) {\n    matcher['_suffixRouteConfig'] = { marker, paramName, precedingParamName }; // property added for easier debugging of routes\n  }\n\n  return matcher;\n}\n\nfunction findLastIndex<T>(elements: T[], predicate: (el: T) => boolean) {\n  for (let index = elements.length - 1; index >= 0; index--) {\n    if (predicate(elements[index])) {\n      return index;\n    }\n  }\n  return -1;\n}\n","import { Injectable } from '@angular/core';\nimport { PageMeta, PageMetaService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SchemaBuilder } from '../schema.interface';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class BreadcrumbSchemaBuilder implements SchemaBuilder {\n  constructor(protected pageMetaService: PageMetaService) {}\n\n  build(): Observable<any> {\n    return this.pageMetaService\n      .getMeta()\n      .pipe(map((pageMeta: PageMeta) => this.collect(pageMeta)));\n  }\n\n  protected collect(pageMeta: PageMeta): any {\n    if (!pageMeta?.breadcrumbs) {\n      return;\n    }\n    const crumbs = pageMeta.breadcrumbs.map((crumb, index) => {\n      return {\n        '@type': 'ListItem',\n        position: index + 1,\n        item: {\n          '@id': crumb.link,\n          name: crumb.label,\n        },\n      };\n    });\n\n    if (pageMeta.title) {\n      crumbs.push({\n        '@type': 'ListItem',\n        position: crumbs.length + 1,\n        item: {\n          '@id': pageMeta.title,\n          name: pageMeta.title,\n        },\n      });\n    }\n\n    return {\n      '@context': 'http://schema.org',\n      '@type': 'BreadcrumbList',\n      itemListElement: crumbs,\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { JsonLdBuilder } from '../schema.interface';\n\n/**\n * Builds the basic structured data for the product, see https://schema.org/product.\n * This builder includes data for sku number, name, description, brand and main image.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdBaseProductBuilder implements JsonLdBuilder<Product> {\n  build(product: Product): Observable<any> {\n    return of({\n      ...this.getProductBase(product),\n      ...this.getProductBrand(product),\n      ...this.getProductImage(product),\n    });\n  }\n\n  /**\n   * Returns the product sku, name and description.\n   */\n  private getProductBase(product: Product) {\n    const result: any = { sku: product.code };\n    if (product.name) {\n      result.name = product.name;\n    }\n    if (product.summary) {\n      result.description = product.summary;\n    }\n    return result;\n  }\n\n  /**\n   * Returns the image object with the main product image url.\n   *\n   * If the image is not available, an empty object is returned.\n   */\n  protected getProductImage(product: Product): { image?: string } {\n    const image = product.images?.PRIMARY?.['zoom']?.url;\n    return image ? { image } : {};\n  }\n\n  /**\n   * Returns the brand object with the product manufacturer.\n   *\n   * If the brand is not available, an empty object is returned.\n   */\n  protected getProductBrand(product: Product): { brand?: string } {\n    const brand = product.manufacturer;\n    return brand ? { brand } : {};\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { JsonLdBuilder } from '../schema.interface';\n\n/**\n * Builds the structured data for the product offer, see https://schema.org/offers.\n * The data includes the price, currency and availability level.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdProductOfferBuilder implements JsonLdBuilder<Product> {\n  build(product: Product): Observable<any> {\n    const schema: any = { '@type': 'Offer' };\n\n    if (product.price?.value) {\n      schema.price = product.price.value;\n      if (product.price.currencyIso) {\n        schema.priceCurrency = product.price.currencyIso;\n      }\n    }\n\n    if (product.stock && product.stock.stockLevelStatus) {\n      schema.availability =\n        product.stock.stockLevelStatus === 'inStock' ? 'InStock' : 'OutOfStock';\n    }\n\n    return of({ offers: schema });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Product, ProductReviewService, Review } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { SeoConfig } from '../../../config';\nimport { JsonLdBuilder } from '../schema.interface';\n\n/**\n * Builds the structured data for the product reviews, see https://schema.org/Review.\n * The data includes the aggregated product rating and the individual reviews.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class JsonLdProductReviewBuilder implements JsonLdBuilder<Product> {\n  constructor(\n    protected reviewService: ProductReviewService,\n    protected config: SeoConfig\n  ) {}\n\n  build(product: Product): Observable<any> {\n    return this.reviewService.getByProductCode(product.code).pipe(\n      map((reviews: Review[]) =>\n        reviews?.length > 0\n          ? {\n              aggregateRating: this.buildAggregatedReviews(product, reviews),\n              review: reviews.map((review) => this.buildReviews(review)),\n            }\n          : {}\n      )\n    );\n  }\n\n  protected buildAggregatedReviews(product: Product, reviews: Review[]) {\n    const aggregated: any = {\n      '@type': 'AggregateRating',\n    };\n    if (product.averageRating) {\n      aggregated.ratingValue = product.averageRating;\n    }\n    if (reviews) {\n      aggregated.ratingCount = reviews.filter((rev) => !!rev.rating).length;\n      aggregated.reviewCount = reviews.filter((rev) => !!rev.comment).length;\n    }\n    return aggregated;\n  }\n\n  protected buildReviews(review: Review) {\n    const reviewSchema: any = {\n      '@type': 'review',\n    };\n\n    if (review.principal && review.principal.name) {\n      reviewSchema.author = review.principal.name;\n    }\n    if (review.date) {\n      const date = new Date(review.date);\n      reviewSchema.datePublished = `${date.getFullYear()}-${\n        date.getMonth() + 1\n      }-${date.getDate()}`;\n    }\n    if (review.headline) {\n      reviewSchema.name = review.headline;\n    }\n    if (review.comment) {\n      reviewSchema.description = review.comment;\n    }\n    if (review.rating) {\n      reviewSchema.reviewRating = {\n        '@type': 'Rating',\n        ratingValue: review.rating.toString(),\n      };\n    }\n\n    return reviewSchema;\n  }\n}\n","import { Inject, Injectable, Optional } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { CurrentProductService } from '../../../../../cms-components/product/current-product.service';\nimport { JsonLdBuilder, SchemaBuilder } from '../schema.interface';\nimport { JSONLD_PRODUCT_BUILDER } from '../tokens';\n\n/**\n * Adds the minimal structured data for the product, see https://schema.org/product.\n * The actual data collection is delegated to `JsonLdBuilder`s, which can be injected\n * using the `JSONLD_PRODUCT_BUILDER` token.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductSchemaBuilder implements SchemaBuilder {\n  constructor(\n    private currentProduct: CurrentProductService,\n    @Optional()\n    @Inject(JSONLD_PRODUCT_BUILDER)\n    protected builders: JsonLdBuilder<Product>[]\n  ) {}\n\n  build(): Observable<any> {\n    return this.currentProduct.getProduct().pipe(\n      switchMap((product: Product) => {\n        if (product) {\n          return combineLatest(this.collect(product)).pipe(\n            map((res: {}[]) => Object.assign({}, ...res))\n          );\n        }\n        return of({});\n      })\n    );\n  }\n\n  protected collect(product: Product): Observable<any>[] {\n    if (!product || !product.code) {\n      return [];\n    }\n    const builders = this.builders\n      ? this.builders.map((builder) => builder.build(product))\n      : [];\n    return [\n      of({\n        '@context': 'http://schema.org',\n        '@type': 'Product',\n      }),\n      ...builders,\n    ];\n  }\n}\n","import { BREAKPOINT } from '../../layout/config/layout-config';\n\nexport enum PageSection {\n  HEADER = 'header',\n  FOOTER = 'footer',\n  NAVIGATION = 'navigation',\n}\n\nexport interface CmsStructureOptions {\n  /**\n   * The componentId is used to provide a static configuration of (cms) components.\n   */\n  componentId?: string;\n  /**\n   * Page slot position is used to provide the slot configuration.\n   */\n  pageSlotPosition?: string;\n  /**\n   * The page template is used to provide the page slot to the given page template.\n   */\n  pageTemplate?: string;\n  /**\n   * The section is used to provide the page slot to the given section.\n   */\n  section?: PageSection | string;\n  /**\n   * The breakpoint is used to provide the page slot for a specific breakpoint.\n   */\n  breakpoint?: BREAKPOINT;\n}\n","import { NgModule } from '@angular/core';\nimport { BreadcrumbSchemaBuilder } from './breadcrumb/index';\nimport {\n  JsonLdBaseProductBuilder,\n  JsonLdProductOfferBuilder,\n  JsonLdProductReviewBuilder,\n  ProductSchemaBuilder,\n} from './product/index';\nimport { JSONLD_PRODUCT_BUILDER, SCHEMA_BUILDER } from './tokens';\n\n/**\n * Provides several standard json-ld builders that contribute\n * to collecting and building json-ld data.\n */\n@NgModule({\n  providers: [\n    {\n      provide: SCHEMA_BUILDER,\n      useExisting: ProductSchemaBuilder,\n      multi: true,\n    },\n    {\n      provide: SCHEMA_BUILDER,\n      useExisting: BreadcrumbSchemaBuilder,\n      multi: true,\n    },\n    // lower level json-ld builder classes offering fine-grained control\n    // for product related schemas\n    {\n      provide: JSONLD_PRODUCT_BUILDER,\n      useExisting: JsonLdBaseProductBuilder,\n      multi: true,\n    },\n    {\n      provide: JSONLD_PRODUCT_BUILDER,\n      useExisting: JsonLdProductOfferBuilder,\n      multi: true,\n    },\n    {\n      provide: JSONLD_PRODUCT_BUILDER,\n      useExisting: JsonLdProductReviewBuilder,\n      multi: true,\n    },\n  ],\n})\nexport class JsonLdBuilderModule {}\n","import { ValueProvider } from '@angular/core';\nimport { CmsStructureConfig, provideConfig } from '@spartacus/core';\nimport { LayoutConfig } from '../../layout/config/layout-config';\nimport { CmsStructureOptions } from './cms-structure.model';\n\n/**\n * Helper function to simplify the creation of static CMS structure (`CmsStructureConfig`).\n * The helper function leverage the `provideConfig`, and is only providing an easy way to\n * generate the cms structure. The function creates a configuration structure for components,\n * page slot and page template. The following example adds a component to a page slot:\n *\n * ```ts\n * provideCmsStructure({\n *   componentId: 'LoginComponent',\n *   pageSlotPosition: 'SiteLogin'\n * })\n * ```\n *\n * @param options.componentId component identifier is used to provide component structure\n * @param options.pageSlotPosition page slot position is used to provide the slot configuration\n * @param options.pageTemplate the page template is used to provide the page slot to the given page template\n * @param options.section the section is used to provide the page slot to the given section\n * @param options.breakpoint the breakpoint is used to provide the page slot for a specific breakpoint\n */\nexport function provideCmsStructure(\n  options: CmsStructureOptions\n): ValueProvider {\n  return provideConfig({\n    ...buildCmsStructure(options),\n    ...buildLayoutConfig(options),\n  });\n}\n\n/**\n * @private\n */\nfunction buildCmsStructure({\n  componentId,\n  pageSlotPosition,\n}: CmsStructureOptions = {}): CmsStructureConfig {\n  const config: CmsStructureConfig = { cmsStructure: {} };\n\n  if (componentId) {\n    config.cmsStructure = {\n      components: {\n        [componentId]: {\n          typeCode: componentId,\n          flexType: componentId,\n        },\n      },\n    };\n  }\n\n  if (componentId && pageSlotPosition) {\n    config.cmsStructure.slots = {\n      [pageSlotPosition]: { componentIds: [componentId] },\n    };\n  }\n  return config;\n}\n\n/**\n * @private\n */\nfunction buildLayoutConfig({\n  pageTemplate,\n  pageSlotPosition,\n  breakpoint,\n  section,\n}: CmsStructureOptions = {}): LayoutConfig {\n  const layoutConfig: LayoutConfig = {};\n  if (pageTemplate && pageSlotPosition) {\n    const pageTemplateSlots: any = {};\n    if (breakpoint) {\n      pageTemplateSlots[breakpoint] = {\n        slots: [pageSlotPosition],\n      };\n    } else {\n      pageTemplateSlots.slots = [pageSlotPosition];\n    }\n    layoutConfig.layoutSlots = {\n      [pageTemplate]: pageTemplateSlots,\n    };\n  }\n\n  if (section && pageSlotPosition) {\n    const sectionSlots: any = {};\n    if (breakpoint) {\n      sectionSlots[breakpoint] = { slots: [pageSlotPosition] };\n    } else {\n      sectionSlots.slots = [pageSlotPosition];\n    }\n    if (layoutConfig.layoutSlots) {\n      layoutConfig.layoutSlots[section] = sectionSlots;\n    } else {\n      layoutConfig.layoutSlots = {\n        [section]: sectionSlots,\n      };\n    }\n  }\n  return layoutConfig;\n}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport {\n  CmsBannerCarouselComponent as model,\n  CmsService,\n  ContentSlotComponentData,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/index';\n\n/**\n * Generic carousel that renders CMS Components.\n */\n@Component({\n  selector: 'cx-banner-carousel',\n  templateUrl: 'banner-carousel.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BannerCarouselComponent {\n  private componentData$: Observable<model> = this.componentData.data$.pipe(\n    filter(Boolean),\n    tap((d: model) => (this.theme = `${d.effect}-theme`))\n  );\n\n  private items$: Observable<\n    Observable<ContentSlotComponentData>[]\n  > = this.componentData$.pipe(\n    map((data) => data.banners.trim().split(' ')),\n    map((codes) => codes.map((code) => this.cmsService.getComponentData(code)))\n  );\n\n  /**\n   * Adds a specific theme for the carousel. The effect can be\n   * used in CSS customisations.\n   */\n  @HostBinding('class') theme = '';\n\n  constructor(\n    private componentData: CmsComponentData<model>,\n    private cmsService: CmsService\n  ) {}\n\n  /**\n   * Returns an Obervable with an Array of Observables. This is done, so that\n   * the component UI could consider to lazy load the UI components when they're\n   * in the viewpoint.\n   */\n  getItems(): Observable<Observable<ContentSlotComponentData>[]> {\n    return this.items$;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { PageComponentModule } from '../../../cms-structure/page/component/page-component.module';\nimport { CarouselModule, MediaModule } from '../../../shared/components/index';\nimport { BannerCarouselComponent } from './banner-carousel.component';\n\n@NgModule({\n  imports: [CommonModule, PageComponentModule, CarouselModule, MediaModule],\n  providers: [\n    provideDefaultConfig({\n      cmsComponents: {\n        RotatingImagesComponent: {\n          component: BannerCarouselComponent,\n        },\n      },\n    } as CmsConfig),\n  ],\n  declarations: [BannerCarouselComponent],\n  entryComponents: [BannerCarouselComponent],\n  exports: [BannerCarouselComponent],\n})\nexport class BannerCarouselModule {}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport { CmsBannerComponent } from '@spartacus/core';\nimport { tap } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-banner',\n  templateUrl: './banner.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BannerComponent {\n  @HostBinding('class') styleClasses: string;\n\n  data$ = this.component.data$.pipe(\n    tap((data) => (this.styleClasses = data.styleClasses))\n  );\n\n  constructor(protected component: CmsComponentData<CmsBannerComponent>) {}\n\n  /**\n   * Returns `_blank` to force opening the link in a new window whenever the\n   * `data.external` flag is set to true.\n   */\n  getTarget(data: CmsBannerComponent): string | null {\n    return data.external === 'true' || data.external === true ? '_blank' : null;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { BannerComponent } from './banner.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, GenericLinkModule, MediaModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        SimpleResponsiveBannerComponent: {\n          component: BannerComponent,\n        },\n        BannerComponent: {\n          component: BannerComponent,\n        },\n        SimpleBannerComponent: {\n          component: BannerComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [BannerComponent],\n  entryComponents: [BannerComponent],\n  exports: [BannerComponent],\n})\nexport class BannerModule {}\n","import { ChangeDetectionStrategy, Component, HostBinding } from '@angular/core';\nimport { CmsLinkComponent } from '@spartacus/core';\nimport { tap } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-link',\n  templateUrl: './link.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LinkComponent {\n  @HostBinding('class') styleClasses: string;\n\n  data$ = this.component.data$.pipe(\n    tap((data) => (this.styleClasses = data.styleClasses))\n  );\n\n  constructor(protected component: CmsComponentData<CmsLinkComponent>) {}\n\n  /**\n   * Returns `_blank` to force opening the link in a new window whenever the\n   * `data.target` flag is set to `true`.\n   */\n  getTarget(data: CmsLinkComponent): string | null {\n    return data.target === 'true' || data.target === true ? '_blank' : null;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { LinkComponent } from './link.component';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, GenericLinkModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSLinkComponent: { component: LinkComponent },\n      },\n    }),\n  ],\n  declarations: [LinkComponent],\n  exports: [LinkComponent],\n  entryComponents: [LinkComponent],\n})\nexport class LinkModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { CmsParagraphComponent } from '@spartacus/core';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-paragraph',\n  templateUrl: './paragraph.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ParagraphComponent {\n  constructor(public component: CmsComponentData<CmsParagraphComponent>) {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ParagraphComponent } from './paragraph.component';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSParagraphComponent: {\n          component: ParagraphComponent,\n        },\n        CMSTabParagraphComponent: {\n          component: ParagraphComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ParagraphComponent],\n  exports: [ParagraphComponent],\n  entryComponents: [ParagraphComponent],\n})\nexport class CmsParagraphModule {}\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  ViewChildren,\n} from '@angular/core';\nimport {\n  CmsService,\n  CMSTabParagraphContainer,\n  WindowRef,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map, take, switchMap } from 'rxjs/operators';\nimport { ComponentWrapperDirective } from '../../../cms-structure/page/component/component-wrapper.directive';\nimport { CmsComponentData } from '../../../cms-structure/page/model/index';\nimport { BreakpointService } from '../../../layout/breakpoint/breakpoint.service';\nimport { BREAKPOINT } from '../../../layout/config/layout-config';\n\n@Component({\n  selector: 'cx-tab-paragraph-container',\n  templateUrl: './tab-paragraph-container.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TabParagraphContainerComponent\n  implements AfterViewInit, OnInit, OnDestroy {\n  activeTabNum = 0;\n\n  @ViewChildren(ComponentWrapperDirective) children!: QueryList<\n    ComponentWrapperDirective\n  >;\n\n  tabTitleParams: Observable<any>[] = [];\n\n  subscription: Subscription;\n\n  constructor(\n    componentData: CmsComponentData<CMSTabParagraphContainer>,\n    cmsService: CmsService,\n    winRef?: WindowRef,\n    // tslint:disable-next-line:unified-signatures\n    breakpointService?: BreakpointService\n  );\n  /**\n   * @deprecated since 2.1\n   */\n  constructor(\n    componentData: CmsComponentData<CMSTabParagraphContainer>,\n    cmsService: CmsService,\n    winRef?: WindowRef\n  );\n  constructor(\n    public componentData: CmsComponentData<CMSTabParagraphContainer>,\n    protected cmsService: CmsService,\n    protected winRef?: WindowRef,\n    protected breakpointService?: BreakpointService\n  ) {}\n\n  components$: Observable<any[]> = this.componentData.data$.pipe(\n    distinctUntilChanged((x, y) => x?.components === y?.components),\n    switchMap((data) =>\n      combineLatest(\n        (data?.components ?? '').split(' ').map((component) =>\n          this.cmsService.getComponentData<any>(component).pipe(\n            distinctUntilChanged(),\n            map((tab) => {\n              if (!tab) {\n                return undefined;\n              }\n\n              if (!tab.flexType) {\n                tab = {\n                  ...tab,\n                  flexType: tab.typeCode,\n                };\n              }\n\n              return {\n                ...tab,\n                title: `${data.uid}.tabs.${tab.uid}`,\n              };\n            })\n          )\n        )\n      )\n    )\n  );\n\n  select(tabNum: number, event?: MouseEvent): void {\n    this.breakpointService\n      ?.isDown(BREAKPOINT.sm)\n      .pipe(take(1))\n      .subscribe((res) => {\n        if (res) {\n          this.activeTabNum = this.activeTabNum === tabNum ? -1 : tabNum;\n          if (event && event?.target) {\n            const target = event.target as HTMLElement;\n            const parentNode = target.parentNode as HTMLElement;\n            this.winRef?.nativeWindow?.scrollTo(0, parentNode.offsetTop);\n          }\n        } else {\n          this.activeTabNum = tabNum;\n        }\n      });\n  }\n\n  ngOnInit(): void {\n    this.activeTabNum =\n      this.winRef?.nativeWindow?.history?.state?.activeTab ?? this.activeTabNum;\n  }\n\n  ngAfterViewInit(): void {\n    // If the sub cms components data exist, the components created before ngAfterViewInit are called.\n    // In this case, the title parameters are directly pulled from them.\n    // If the sub cms components data does not exist, it should should be loaded first.\n    // In this case, listen to the changes to wait for them to be created.\n    if (this.children.length > 0) {\n      this.getTitleParams(this.children);\n    } else {\n      this.subscription = this.children.changes.subscribe(\n        (tabComps: QueryList<ComponentWrapperDirective>) =>\n          this.getTitleParams(tabComps)\n      );\n    }\n  }\n\n  private getTitleParams(children: QueryList<ComponentWrapperDirective>) {\n    children.forEach((comp) => {\n      if (comp.cmpRef && comp.cmpRef.instance.tabTitleParam$) {\n        this.tabTitleParams.push(comp.cmpRef.instance.tabTitleParam$);\n      } else {\n        this.tabTitleParams.push(null);\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { PageComponentModule } from '../../../cms-structure/page/component/page-component.module';\nimport { TabParagraphContainerComponent } from './tab-paragraph-container.component';\n\n@NgModule({\n  imports: [CommonModule, PageComponentModule, OutletModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSTabParagraphContainer: {\n          component: TabParagraphContainerComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [TabParagraphContainerComponent],\n  entryComponents: [TabParagraphContainerComponent],\n  exports: [TabParagraphContainerComponent],\n})\nexport class TabParagraphContainerModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  Address,\n  CheckoutDeliveryService,\n  UserAddressService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AddressBookComponentService {\n  constructor(\n    protected userAddressService: UserAddressService,\n    protected checkoutDeliveryService: CheckoutDeliveryService\n  ) {}\n\n  getAddresses(): Observable<Address[]> {\n    return this.userAddressService.getAddresses();\n  }\n\n  getAddressesStateLoading(): Observable<boolean> {\n    return this.userAddressService.getAddressesLoading();\n  }\n\n  loadAddresses() {\n    this.userAddressService.loadAddresses();\n  }\n\n  addUserAddress(address: Address) {\n    this.userAddressService.addUserAddress(address);\n  }\n\n  updateUserAddress(addressId: string, address: Address) {\n    this.userAddressService.updateUserAddress(addressId, address);\n    this.checkoutDeliveryService.clearCheckoutDeliveryDetails();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  Address,\n  TranslationService,\n  UserAddressService,\n  CheckoutDeliveryService,\n} from '@spartacus/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { AddressBookComponentService } from './address-book.component.service';\nimport { Card } from '../../../shared/components/card';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-address-book',\n  templateUrl: './address-book.component.html',\n})\nexport class AddressBookComponent implements OnInit {\n  addresses$: Observable<Address[]>;\n  cards$: Observable<Card[]>;\n  addressesStateLoading$: Observable<boolean>;\n  currentAddress: Address;\n\n  showAddAddressForm = false;\n  showEditAddressForm = false;\n  editCard: string;\n\n  constructor(\n    public service: AddressBookComponentService,\n    protected translation: TranslationService,\n    protected userAddressService: UserAddressService,\n    protected checkoutDeliveryService: CheckoutDeliveryService\n  ) {}\n\n  ngOnInit(): void {\n    this.addresses$ = this.service.getAddresses();\n    this.addressesStateLoading$ = this.service.getAddressesStateLoading();\n    this.service.loadAddresses();\n  }\n\n  addAddressButtonHandle(): void {\n    this.showEditAddressForm = false;\n    this.showAddAddressForm = true;\n  }\n\n  editAddressButtonHandle(address: Address): void {\n    this.showAddAddressForm = false;\n    this.showEditAddressForm = true;\n    this.currentAddress = address;\n  }\n\n  addAddressSubmit(address: Address): void {\n    this.showAddAddressForm = false;\n    this.service.addUserAddress(address);\n  }\n\n  addAddressCancel(): void {\n    this.showAddAddressForm = false;\n  }\n\n  editAddressSubmit(address: Address): void {\n    this.showEditAddressForm = false;\n    this.service.updateUserAddress(this.currentAddress['id'], address);\n  }\n\n  editAddressCancel(): void {\n    this.showEditAddressForm = false;\n  }\n\n  getCardContent(address: Address) {\n    return combineLatest([\n      this.translation.translate('addressCard.default'),\n      this.translation.translate('addressCard.setAsDefault'),\n      this.translation.translate('common.delete'),\n      this.translation.translate('common.edit'),\n      this.translation.translate('addressBook.areYouSureToDeleteAddress'),\n    ]).pipe(\n      map(\n        ([\n          defaultText,\n          setAsDefaultText,\n          textDelete,\n          textEdit,\n          textVerifyDeleteMsg,\n        ]) => {\n          let region = '';\n\n          if (address.region && address.region.isocode) {\n            region = address.region.isocode + ', ';\n          }\n\n          const actions: { name: string; event: string }[] = [];\n          if (!address.defaultAddress) {\n            actions.push({ name: setAsDefaultText, event: 'default' });\n          }\n          actions.push({ name: textEdit, event: 'edit' });\n          actions.push({ name: textDelete, event: 'delete' });\n\n          return {\n            textBold: address.firstName + ' ' + address.lastName,\n            text: [\n              address.line1,\n              address.line2,\n              address.town + ', ' + region + address.country.isocode,\n              address.postalCode,\n              address.phone,\n            ],\n            actions: actions,\n            header: address.defaultAddress ? `✓ ${defaultText}` : '',\n            deleteMsg: textVerifyDeleteMsg,\n          };\n        }\n      )\n    );\n  }\n\n  setAddressAsDefault(addressId: string): void {\n    this.userAddressService.setAddressAsDefault(addressId);\n    this.checkoutDeliveryService.clearCheckoutDeliveryDetails();\n  }\n\n  deleteAddress(addressId: string): void {\n    this.userAddressService.deleteUserAddress(addressId);\n    this.checkoutDeliveryService.clearCheckoutDeliveryDetails();\n  }\n\n  setEdit(addressId: string): void {\n    if (this.editCard !== addressId) {\n      this.editCard = addressId;\n    } else {\n      this.deleteAddress(addressId);\n    }\n  }\n\n  cancelCard(): void {\n    this.editCard = null;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UserAddressService,\n} from '@spartacus/core';\nimport { CardModule } from '../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { AddressFormModule } from '../../checkout/components/shipping-address/address-form/address-form.module';\nimport { AddressBookComponent } from './address-book.component';\nimport { AddressBookComponentService } from './address-book.component.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CardModule,\n    AddressFormModule,\n    SpinnerModule,\n    I18nModule,\n  ],\n  declarations: [AddressBookComponent],\n  exports: [AddressBookComponent],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountAddressBookComponent: {\n          component: AddressBookComponent,\n          providers: [\n            {\n              provide: AddressBookComponentService,\n              useClass: AddressBookComponentService,\n              deps: [UserAddressService],\n            },\n          ],\n          guards: [AuthGuard],\n        },\n      },\n    }),\n    UserAddressService,\n  ],\n  entryComponents: [AddressBookComponent],\n})\nexport class AddressBookModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  AuthService,\n  GlobalMessageService,\n  GlobalMessageType,\n  RoutingService,\n  TranslationService,\n  UserService,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { first } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../../../cms-components/misc/icon/icon.model';\nimport { ModalService } from '../../../../../shared/components/modal/modal.service';\n\n@Component({\n  selector: 'cx-close-account-modal',\n  templateUrl: './close-account-modal.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CloseAccountModalComponent implements OnInit, OnDestroy {\n  iconTypes = ICON_TYPE;\n\n  private subscription = new Subscription();\n  isLoggedIn$: Observable<boolean>;\n  isLoading$: Observable<boolean>;\n\n  constructor(\n    protected modalService: ModalService,\n    private userService: UserService,\n    private authService: AuthService,\n    private globalMessageService: GlobalMessageService,\n    private routingService: RoutingService,\n    private translationService: TranslationService\n  ) {}\n\n  ngOnInit() {\n    this.isLoggedIn$ = this.authService.isUserLoggedIn();\n    this.userService.resetRemoveUserProcessState();\n    this.subscription.add(\n      this.userService\n        .getRemoveUserResultSuccess()\n        .subscribe((success) => this.onSuccess(success))\n    );\n\n    this.subscription.add(\n      this.userService\n        .getRemoveUserResultError()\n        .subscribe((error) => this.onError(error))\n    );\n    this.isLoading$ = this.userService.getRemoveUserResultLoading();\n  }\n\n  onSuccess(success: boolean): void {\n    if (success) {\n      this.dismissModal();\n      this.translationService\n        .translate('closeAccount.accountClosedSuccessfully')\n        .pipe(first())\n        .subscribe((text) => {\n          this.globalMessageService.add(\n            text,\n            GlobalMessageType.MSG_TYPE_CONFIRMATION\n          );\n        });\n      this.routingService.go({ cxRoute: 'home' });\n    }\n  }\n\n  onError(error: boolean): void {\n    if (error) {\n      this.dismissModal();\n      this.translationService\n        .translate('closeAccount.accountClosedFailure')\n        .pipe(first())\n        .subscribe((text) => {\n          this.globalMessageService.add(text, GlobalMessageType.MSG_TYPE_ERROR);\n        });\n    }\n  }\n\n  dismissModal(reason?: any): void {\n    this.modalService.dismissActiveModal(reason);\n  }\n\n  closeAccount() {\n    this.userService.remove();\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\n\nimport { CloseAccountModalComponent } from '../close-account-modal/close-account-modal.component';\nimport { ModalService } from '../../../../../shared/components/modal/index';\n\n@Component({\n  selector: 'cx-close-account',\n  templateUrl: './close-account.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CloseAccountComponent {\n  modal: any;\n  constructor(private modalService: ModalService) {}\n\n  openModal(): void {\n    this.modal = this.modalService.open(CloseAccountModalComponent, {\n      centered: true,\n    }).componentInstance;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { CloseAccountModalComponent } from './components/close-account-modal/close-account-modal.component';\nimport { IconModule } from '../../../cms-components/misc/icon/index';\nimport { CloseAccountComponent } from './components/close-account/close-account.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    IconModule,\n    SpinnerModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CloseAccountComponent: {\n          component: CloseAccountComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [CloseAccountComponent, CloseAccountModalComponent],\n  exports: [CloseAccountComponent, CloseAccountModalComponent],\n  entryComponents: [CloseAccountComponent, CloseAccountModalComponent],\n})\nexport class CloseAccountModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  AuthConfigService,\n  OAuthFlow,\n  RoutingService,\n  UserService,\n} from '@spartacus/core';\nimport { CustomFormValidators } from '../../../shared/utils/validators/custom-form-validators';\n@Component({\n  selector: 'cx-forgot-password',\n  templateUrl: './forgot-password.component.html',\n})\nexport class ForgotPasswordComponent implements OnInit {\n  forgotPasswordForm: FormGroup;\n\n  constructor(\n    protected fb: FormBuilder,\n    protected userService: UserService,\n    protected routingService: RoutingService,\n    protected authConfigService: AuthConfigService\n  ) {}\n\n  ngOnInit() {\n    this.forgotPasswordForm = this.fb.group({\n      userEmail: [\n        '',\n        [Validators.required, CustomFormValidators.emailValidator],\n      ],\n    });\n  }\n\n  requestForgotPasswordEmail() {\n    if (this.forgotPasswordForm.valid) {\n      this.userService.requestForgotPasswordEmail(\n        this.forgotPasswordForm.value.userEmail\n      );\n      if (\n        this.authConfigService.getOAuthFlow() ===\n        OAuthFlow.ResourceOwnerPasswordFlow\n      ) {\n        this.routingService.go({ cxRoute: 'login' });\n      }\n    } else {\n      this.forgotPasswordForm.markAllAsTouched();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  NotAuthGuard,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { ForgotPasswordComponent } from './forgot-password.component';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ForgotPasswordComponent: {\n          component: ForgotPasswordComponent,\n          guards: [NotAuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ForgotPasswordComponent],\n  exports: [ForgotPasswordComponent],\n  entryComponents: [ForgotPasswordComponent],\n})\nexport class ForgotPasswordModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  HostBinding,\n  Input,\n} from '@angular/core';\nimport { RoutingService } from '@spartacus/core';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n  selector: 'cx-amend-order-actions',\n  templateUrl: './amend-order-actions.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AmendOrderActionsComponent {\n  @Input() orderCode: string;\n  @Input() amendOrderForm: FormGroup;\n  @Input() backRoute: string;\n  @Input() forwardRoute: string;\n\n  @HostBinding('class') styles = 'row';\n\n  constructor(protected routingService: RoutingService) {}\n\n  continue(event: Event): void {\n    if (this.amendOrderForm.valid) {\n      this.routingService.go({\n        cxRoute: this.forwardRoute,\n        params: { code: this.orderCode },\n      });\n    } else {\n      this.amendOrderForm.markAllAsTouched();\n      event.stopPropagation();\n    }\n  }\n}\n","export enum AmendOrderType {\n  CANCEL,\n  RETURN,\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, UrlModule } from '@spartacus/core';\nimport { AmendOrderActionsComponent } from './amend-order-actions.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n  declarations: [AmendOrderActionsComponent],\n  exports: [AmendOrderActionsComponent],\n})\nexport class AmendOrderActionsModule {}\n","import { formatCurrency, getCurrencySymbol } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Order, OrderEntry, Price } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { OrderDetailsService } from '../order-details/order-details.service';\nimport { AmendOrderType } from './amend-order.model';\n\nfunction ValidateQuantityToCancel(control: FormControl) {\n  if (!control.value) {\n    return null;\n  }\n  const quantity = Object.values(control.value).reduce(\n    (acc: number, val: number) => acc + val,\n    0\n  );\n  return quantity > 0 ? null : { cxNoSelectedItemToCancel: true };\n}\n\n@Injectable()\nexport abstract class OrderAmendService {\n  protected amendType: AmendOrderType;\n  protected form: FormGroup;\n\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  /**\n   * Returns entries for the given order.\n   */\n  abstract getEntries(): Observable<OrderEntry[]>;\n\n  /**\n   * Returns entries with an amended quantity.\n   */\n  getAmendedEntries(): Observable<OrderEntry[]> {\n    return this.getForm().pipe(\n      switchMap((form) => {\n        return this.getEntries().pipe(\n          map((entries) =>\n            entries.filter(\n              (entry) => this.getFormControl(form, entry).value > 0\n            )\n          )\n        );\n      })\n    );\n  }\n\n  /**\n   * Submits the amended order.\n   */\n  abstract save(): void;\n\n  getOrder(): Observable<Order> {\n    return this.orderDetailsService.getOrderDetails();\n  }\n\n  /**\n   * returns the form with form data at runtime\n   */\n  getForm(): Observable<FormGroup> {\n    return this.getOrder().pipe(\n      tap((order) => {\n        if (!this.form || this.form.get('orderCode').value !== order.code) {\n          this.buildForm(order);\n        }\n      }),\n      map(() => this.form)\n    );\n  }\n\n  private buildForm(order: Order): void {\n    this.form = new FormGroup({});\n    this.form.addControl('orderCode', new FormControl(order.code));\n\n    const entryGroup = new FormGroup(\n      {},\n      { validators: [ValidateQuantityToCancel] }\n    );\n    this.form.addControl('entries', entryGroup);\n\n    (order.entries || []).forEach((entry) => {\n      const key = entry.entryNumber.toString();\n      entryGroup.addControl(\n        key,\n        new FormControl(0, {\n          validators: [\n            Validators.min(0),\n            Validators.max(this.getMaxAmendQuantity(entry)),\n          ],\n        })\n      );\n    });\n  }\n\n  protected getFormControl(form: FormGroup, entry: OrderEntry): FormControl {\n    return <FormControl>form.get('entries').get(entry.entryNumber.toString());\n  }\n\n  /**\n   * As discussed, this calculation is moved to SPA side.\n   * The calculation and validation should be in backend facade layer.\n   */\n  getAmendedPrice(entry: OrderEntry): Price {\n    const amendedQuantity = this.getFormControl(this.form, entry).value;\n    const amendedPrice = Object.assign({}, entry.basePrice);\n    amendedPrice.value =\n      Math.round(entry.basePrice.value * amendedQuantity * 100) / 100;\n\n    amendedPrice.formattedValue = formatCurrency(\n      amendedPrice.value,\n      // TODO: user current language\n      'en',\n      getCurrencySymbol(amendedPrice.currencyIso, 'narrow'),\n      amendedPrice.currencyIso\n    );\n\n    return amendedPrice;\n  }\n\n  getMaxAmendQuantity(entry: OrderEntry) {\n    return (\n      (this.isCancellation()\n        ? entry.cancellableQuantity\n        : entry.returnableQuantity) || entry.quantity\n    );\n  }\n\n  isCancellation() {\n    return this.amendType === AmendOrderType.CANCEL;\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { OrderEntry, Price } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { OrderAmendService } from '../amend-order.service';\n\n@Component({\n  selector: 'cx-amend-order-items',\n  templateUrl: './amend-order-items.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CancelOrReturnItemsComponent {\n  @Input() entries: OrderEntry[];\n  @Input() isConfirmation = false;\n\n  form$: Observable<FormGroup> = this.orderAmendService.getForm();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n\n  getControl(form: FormGroup, entry: OrderEntry): FormControl {\n    const control = <FormControl>(\n      form.get('entries').get(entry.entryNumber.toString())\n    );\n    return control;\n  }\n\n  setAll(form: FormGroup): void {\n    this.entries.forEach((entry) =>\n      this.getControl(form, entry).setValue(this.getMaxAmendQuantity(entry))\n    );\n  }\n\n  getItemPrice(entry: OrderEntry): Price {\n    return this.orderAmendService.getAmendedPrice(entry);\n  }\n\n  getMaxAmendQuantity(entry: OrderEntry) {\n    return this.orderAmendService.getMaxAmendQuantity(entry);\n  }\n\n  isCancellation() {\n    return this.orderAmendService.isCancellation();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { I18nModule, FeaturesConfigModule } from '@spartacus/core';\nimport {\n  FormErrorsModule,\n  ItemCounterModule,\n  MediaModule,\n} from '../../../../../shared/index';\nimport { CancelOrReturnItemsComponent } from './amend-order-items.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    I18nModule,\n    MediaModule,\n    ItemCounterModule,\n    FeaturesConfigModule,\n    FormErrorsModule,\n  ],\n  declarations: [CancelOrReturnItemsComponent],\n  exports: [CancelOrReturnItemsComponent],\n  entryComponents: [CancelOrReturnItemsComponent],\n})\nexport class AmendOrderItemsModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n@Component({\n  selector: 'cx-cancel-order-confirmation',\n  templateUrl: './cancel-order-confirmation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CancelOrderConfirmationComponent {\n  orderCode: string;\n\n  form$ = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<\n    OrderEntry[]\n  > = this.orderAmendService.getAmendedEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n\n  submit(form: FormGroup) {\n    if (form.valid) {\n      this.orderAmendService.save();\n    } else {\n      form.markAllAsTouched();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  CancelOrReturnRequestEntryInput,\n  GlobalMessageService,\n  GlobalMessageType,\n  OrderEntry,\n  RoutingService,\n  UserOrderService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, first, map } from 'rxjs/operators';\nimport { OrderDetailsService } from '../../order-details/order-details.service';\nimport { AmendOrderType } from '../amend-order.model';\nimport { OrderAmendService } from '../amend-order.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderCancellationService extends OrderAmendService {\n  amendType = AmendOrderType.CANCEL;\n\n  constructor(\n    protected orderDetailsService: OrderDetailsService,\n    protected userOrderService: UserOrderService,\n    protected routing: RoutingService,\n    protected globalMessageService: GlobalMessageService\n  ) {\n    super(orderDetailsService);\n  }\n  /**\n   * Return cancellable order entries.\n   */\n  getEntries(): Observable<OrderEntry[]> {\n    return this.getOrder().pipe(\n      filter((order) => !!order?.entries),\n      map((order) =>\n        order.entries.filter(\n          (entry) => entry.entryNumber !== -1 && entry.cancellableQuantity > 0\n        )\n      )\n    );\n  }\n\n  save(): void {\n    const orderCode = this.form.value.orderCode;\n    const entries = this.form.value.entries;\n    const inputs: CancelOrReturnRequestEntryInput[] = Object.keys(entries)\n      .filter((entryNumber) => <number>entries[entryNumber] > 0)\n      .map(\n        (entryNumber) =>\n          ({\n            orderEntryNumber: Number(entryNumber),\n            quantity: <number>entries[entryNumber],\n          } as CancelOrReturnRequestEntryInput)\n      );\n\n    this.form.reset();\n\n    this.userOrderService.cancelOrder(orderCode, {\n      cancellationRequestEntryInputs: inputs,\n    });\n\n    this.userOrderService\n      .getCancelOrderSuccess()\n      .pipe(first(Boolean))\n      .subscribe(() => this.afterSave(orderCode));\n  }\n\n  private afterSave(orderCode: string): void {\n    this.userOrderService.resetCancelOrderProcessState();\n    this.globalMessageService.add(\n      {\n        key: 'orderDetails.cancellationAndReturn.cancelSuccess',\n        params: { orderCode },\n      },\n      GlobalMessageType.MSG_TYPE_CONFIRMATION\n    );\n    this.routing.go({\n      cxRoute: 'orders',\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { SemanticPathService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { OrderCancellationService } from './order-cancellation.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderCancellationGuard implements CanActivate {\n  constructor(\n    protected orderAmendService: OrderCancellationService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return this.orderAmendService.getForm().pipe(\n      map((form) => {\n        if (!form.valid) {\n          // the order code is not available in the route\n          // as long as we're inside a guard, hence we redirect\n          // to the common orders page.\n          return this.router.parseUrl(this.semanticPathService.get('orders'));\n        } else {\n          return true;\n        }\n      })\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { AuthGuard, CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../../../cms-structure/page/page-layout/page-layout.component';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderCancellationGuard } from '../order-cancellation.guard';\nimport { OrderCancellationService } from '../order-cancellation.service';\nimport { CancelOrderConfirmationComponent } from './cancel-order-confirmation.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderCancelConfirmation',\n        },\n      },\n    ]),\n    ReactiveFormsModule,\n    AmendOrderItemsModule,\n    AmendOrderActionsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CancelOrderConfirmationComponent: {\n          component: CancelOrderConfirmationComponent,\n          guards: [AuthGuard, OrderCancellationGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderCancellationService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [CancelOrderConfirmationComponent],\n  exports: [CancelOrderConfirmationComponent],\n  entryComponents: [CancelOrderConfirmationComponent],\n})\nexport class CancelOrderConfirmationModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n@Component({\n  selector: 'cx-cancel-order',\n  templateUrl: './cancel-order.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CancelOrderComponent {\n  orderCode: string;\n\n  form$: Observable<FormGroup> = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<OrderEntry[]> = this.orderAmendService.getEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AuthGuard, CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport {\n  CmsPageGuard,\n  PageLayoutComponent,\n} from '../../../../../../cms-structure/index';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderCancellationService } from '../order-cancellation.service';\nimport { CancelOrderComponent } from './cancel-order.component';\nimport { FormErrorsModule } from '../../../../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderCancel',\n        },\n      },\n    ]),\n    AmendOrderItemsModule,\n    AmendOrderActionsModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CancelOrderComponent: {\n          component: CancelOrderComponent,\n          guards: [AuthGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderCancellationService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [CancelOrderComponent],\n  exports: [CancelOrderComponent],\n  entryComponents: [CancelOrderComponent],\n})\nexport class CancelOrderModule {}\n","import { NgModule } from '@angular/core';\nimport { CancelOrderConfirmationModule } from './cancel-order-confirmation/cancel-order-confirmation.module';\nimport { CancelOrderModule } from './cancel-order/cancel-order.module';\n\n@NgModule({\n  imports: [CancelOrderModule, CancelOrderConfirmationModule],\n})\nexport class OrderCancellationModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  CancelOrReturnRequestEntryInput,\n  GlobalMessageService,\n  GlobalMessageType,\n  OrderEntry,\n  OrderReturnRequestService,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, first, map } from 'rxjs/operators';\nimport { OrderDetailsService } from '../../order-details/order-details.service';\nimport { AmendOrderType } from '../amend-order.model';\nimport { OrderAmendService } from '../amend-order.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderReturnService extends OrderAmendService {\n  amendType = AmendOrderType.RETURN;\n\n  constructor(\n    protected orderDetailsService: OrderDetailsService,\n    protected returnRequestService: OrderReturnRequestService,\n    protected routing: RoutingService,\n    protected globalMessageService: GlobalMessageService\n  ) {\n    super(orderDetailsService);\n  }\n\n  getEntries(): Observable<OrderEntry[]> {\n    return this.getOrder().pipe(\n      filter((order) => !!order.entries),\n      map((order) =>\n        order.entries.filter(\n          (entry) => entry.entryNumber !== -1 && entry.returnableQuantity > 0\n        )\n      )\n    );\n  }\n\n  save(): void {\n    const orderCode = this.form.value.orderCode;\n    const entries = this.form.value.entries;\n    const inputs: CancelOrReturnRequestEntryInput[] = Object.keys(entries)\n      .filter((entryNumber) => <number>entries[entryNumber] > 0)\n      .map(\n        (entryNumber) =>\n          ({\n            orderEntryNumber: Number(entryNumber),\n            quantity: <number>entries[entryNumber],\n          } as CancelOrReturnRequestEntryInput)\n      );\n\n    this.form.reset();\n\n    this.returnRequestService.createOrderReturnRequest({\n      orderCode,\n      returnRequestEntryInputs: inputs,\n    });\n\n    this.returnRequestService\n      .getReturnRequestSuccess()\n      .pipe(first(Boolean))\n      .subscribe(() => this.afterSave());\n  }\n\n  private afterSave(): void {\n    this.returnRequestService\n      .getOrderReturnRequest()\n      .pipe(first((r) => !!r))\n      .subscribe((returnRequest) => {\n        const rma = returnRequest.rma;\n        this.globalMessageService.add(\n          {\n            key: 'orderDetails.cancellationAndReturn.returnSuccess',\n            params: { rma },\n          },\n          GlobalMessageType.MSG_TYPE_CONFIRMATION\n        );\n        this.routing.go({\n          cxRoute: 'returnRequestDetails',\n          params: { rma },\n        });\n      });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport { SemanticPathService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { OrderReturnService } from './order-return.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderReturnGuard implements CanActivate {\n  constructor(\n    protected orderAmendService: OrderReturnService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return this.orderAmendService.getForm().pipe(\n      map((form) => {\n        if (!form.valid) {\n          // the order code is not available in the route\n          // as long as we're inside a guard, hence we redirect\n          // to the common orders page.\n          return this.router.parseUrl(this.semanticPathService.get('orders'));\n        } else {\n          return true;\n        }\n      })\n    );\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n@Component({\n  selector: 'cx-return-order-confirmation',\n  templateUrl: './return-order-confirmation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnOrderConfirmationComponent {\n  orderCode: string;\n\n  form$ = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<\n    OrderEntry[]\n  > = this.orderAmendService.getAmendedEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n\n  submit(form: FormGroup): void {\n    form.disable();\n    this.orderAmendService.save();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../../../cms-structure/page/page-layout/page-layout.component';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderReturnGuard } from '../order-return.guard';\nimport { OrderReturnService } from '../order-return.service';\nimport { ReturnOrderConfirmationComponent } from './return-order-confirmation.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderReturnConfirmation',\n        },\n      },\n    ]),\n    AmendOrderItemsModule,\n    I18nModule,\n    ReactiveFormsModule,\n    AmendOrderActionsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturnOrderConfirmationComponent: {\n          component: ReturnOrderConfirmationComponent,\n          guards: [AuthGuard, OrderReturnGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderReturnService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [ReturnOrderConfirmationComponent],\n  exports: [ReturnOrderConfirmationComponent],\n  entryComponents: [ReturnOrderConfirmationComponent],\n})\nexport class ReturnOrderConfirmationModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { OrderEntry } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { OrderAmendService } from '../../amend-order.service';\n\n@Component({\n  selector: 'cx-return-order',\n  templateUrl: './return-order.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnOrderComponent {\n  orderCode: string;\n\n  form$: Observable<FormGroup> = this.orderAmendService\n    .getForm()\n    .pipe(tap((form) => (this.orderCode = form.value.orderCode)));\n\n  entries$: Observable<OrderEntry[]> = this.orderAmendService.getEntries();\n\n  constructor(protected orderAmendService: OrderAmendService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { AuthGuard, CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../../../cms-structure/page/page-layout/page-layout.component';\nimport { FormErrorsModule } from '../../../../../../shared/index';\nimport { AmendOrderActionsModule } from '../../amend-order-actions/amend-order-actions.module';\nimport { AmendOrderItemsModule } from '../../amend-order-items/amend-order-items.module';\nimport { OrderAmendService } from '../../amend-order.service';\nimport { OrderReturnService } from '../order-return.service';\nimport { ReturnOrderComponent } from './return-order.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: {\n          cxRoute: 'orderReturn',\n        },\n      },\n    ]),\n    AmendOrderItemsModule,\n    AmendOrderActionsModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturnOrderComponent: {\n          component: ReturnOrderComponent,\n          guards: [AuthGuard],\n          providers: [\n            {\n              provide: OrderAmendService,\n              useExisting: OrderReturnService,\n            },\n          ],\n        },\n      },\n    }),\n  ],\n  declarations: [ReturnOrderComponent],\n  exports: [ReturnOrderComponent],\n  entryComponents: [ReturnOrderComponent],\n})\nexport class ReturnOrderModule {}\n","import { NgModule } from '@angular/core';\nimport { ReturnOrderConfirmationModule } from './return-order-confirmation/return-order-confirmation.module';\nimport { ReturnOrderModule } from './return-order/return-order.module';\n\n@NgModule({\n  imports: [ReturnOrderModule, ReturnOrderConfirmationModule],\n})\nexport class OrderReturnModule {}\n","import { Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OrderDetailsService } from '../order-details.service';\n\n@Component({\n  selector: 'cx-order-details-actions',\n  templateUrl: './order-detail-actions.component.html',\n})\nexport class OrderDetailActionsComponent {\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  order$: Observable<any> = this.orderDetailsService.getOrderDetails();\n}\n","export const completedValues = ['DELIVERY_COMPLETED', 'PICKUP_COMPLETE'];\nexport const cancelledValues = ['CANCELLED'];\n","import { Component, OnInit } from '@angular/core';\nimport {\n  Consignment,\n  PromotionLocation,\n  PromotionResult,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { PromotionService } from '../../../../../shared/services/promotion/promotion.service';\nimport { OrderDetailsService } from '../order-details.service';\nimport {\n  cancelledValues,\n  completedValues,\n} from './order-consigned-entries/order-consigned-entries.model';\n\n@Component({\n  selector: 'cx-order-details-items',\n  templateUrl: './order-detail-items.component.html',\n})\nexport class OrderDetailItemsComponent implements OnInit {\n  constructor(\n    protected orderDetailsService: OrderDetailsService,\n    protected promotionService: PromotionService\n  ) {}\n\n  promotionLocation: PromotionLocation = PromotionLocation.Order;\n  order$: Observable<any> = this.orderDetailsService.getOrderDetails();\n  orderPromotions$: Observable<PromotionResult[]>;\n  others$: Observable<Consignment[]>;\n  completed$: Observable<Consignment[]>;\n  cancel$: Observable<Consignment[]>;\n\n  ngOnInit() {\n    this.orderPromotions$ = this.promotionService.getOrderPromotions(\n      this.promotionLocation\n    );\n    this.others$ = this.getOtherStatus(...completedValues, ...cancelledValues);\n    this.completed$ = this.getExactStatus(completedValues);\n    this.cancel$ = this.getExactStatus(cancelledValues);\n  }\n\n  private getExactStatus(\n    consignmentStatus: string[]\n  ): Observable<Consignment[]> {\n    return this.order$.pipe(\n      map((order) => {\n        if (Boolean(order.consignments)) {\n          return order.consignments.filter((consignment) =>\n            consignmentStatus.includes(consignment.status)\n          );\n        }\n      })\n    );\n  }\n\n  private getOtherStatus(\n    ...consignmentStatus: string[]\n  ): Observable<Consignment[]> {\n    return this.order$.pipe(\n      map((order) => {\n        if (Boolean(order.consignments)) {\n          return order.consignments.filter(\n            (consignment) => !consignmentStatus.includes(consignment.status)\n          );\n        }\n      })\n    );\n  }\n}\n","import { Component, OnDestroy } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ConsignmentTracking, UserOrderService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'cx-tracking-events',\n  templateUrl: './tracking-events.component.html',\n})\nexport class TrackingEventsComponent implements OnDestroy {\n  tracking$: Observable<ConsignmentTracking>;\n  shipDate: Date;\n  consignmentCode: string;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    private userOrderService: UserOrderService\n  ) {}\n\n  ngOnDestroy(): void {\n    this.userOrderService.clearConsignmentTracking();\n  }\n}\n","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport {\n  Consignment,\n  ConsignmentTracking,\n  UserOrderService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  ModalRef,\n  ModalService,\n} from '../../../../../../shared/components/modal/index';\nimport { TrackingEventsComponent } from './tracking-events/tracking-events.component';\n\n@Component({\n  selector: 'cx-consignment-tracking',\n  templateUrl: './consignment-tracking.component.html',\n})\nexport class ConsignmentTrackingComponent implements OnInit, OnDestroy {\n  consignmentStatus: string[] = [\n    'SHIPPED',\n    'IN_TRANSIT',\n    'DELIVERY_COMPLETED',\n    'DELIVERY_REJECTED',\n    'DELIVERING',\n  ];\n  modalRef: ModalRef;\n\n  @Input()\n  consignment: Consignment;\n  @Input()\n  orderCode: string;\n  consignmentTracking$: Observable<ConsignmentTracking>;\n\n  constructor(\n    private userOrderService: UserOrderService,\n    private modalService: ModalService\n  ) {}\n\n  ngOnInit() {\n    this.consignmentTracking$ = this.userOrderService.getConsignmentTracking();\n  }\n\n  openTrackingDialog(consignment: Consignment) {\n    this.userOrderService.loadConsignmentTracking(\n      this.orderCode,\n      consignment.code\n    );\n    let modalInstance: any;\n    this.modalRef = this.modalService.open(TrackingEventsComponent, {\n      centered: true,\n      size: 'lg',\n    });\n\n    modalInstance = this.modalRef.componentInstance;\n    modalInstance.tracking$ = this.consignmentTracking$;\n    modalInstance.shipDate = consignment.statusDate;\n    modalInstance.consignmentCode = consignment.code;\n  }\n\n  ngOnDestroy(): void {\n    this.userOrderService.clearConsignmentTracking();\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport {\n  Consignment,\n  Order,\n  OrderEntry,\n  PromotionLocation,\n} from '@spartacus/core';\n\n@Component({\n  selector: 'cx-order-consigned-entries',\n  templateUrl: './order-consigned-entries.component.html',\n})\nexport class OrderConsignedEntriesComponent {\n  @Input() consignments: Consignment[];\n  @Input() order: Order;\n  promotionLocation: PromotionLocation = PromotionLocation.Order;\n\n  getConsignmentProducts(consignment: Consignment): OrderEntry[] {\n    const products: OrderEntry[] = [];\n    consignment.entries.forEach((element) => {\n      products.push(element.orderEntry);\n    });\n\n    return products;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OrderDetailsService } from '../order-details.service';\n\n@Component({\n  selector: 'cx-order-details-shipping',\n  templateUrl: './order-detail-shipping.component.html',\n})\nexport class OrderDetailShippingComponent implements OnInit {\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  order$: Observable<any>;\n\n  ngOnInit() {\n    this.order$ = this.orderDetailsService.getOrderDetails();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { OrderDetailsService } from '../order-details.service';\n\n@Component({\n  selector: 'cx-order-details-totals',\n  templateUrl: './order-detail-totals.component.html',\n})\nexport class OrderDetailTotalsComponent implements OnInit {\n  constructor(protected orderDetailsService: OrderDetailsService) {}\n\n  order$: Observable<any>;\n\n  ngOnInit() {\n    this.order$ = this.orderDetailsService.getOrderDetails();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  FeaturesConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { ConsignmentTrackingComponent } from '../../../../cms-components/myaccount/order/order-details/order-detail-items/consignment-tracking/consignment-tracking.component';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport {\n  CardModule,\n  OrderOverviewModule,\n  SpinnerModule,\n} from '../../../../shared/index';\nimport { CartSharedModule } from '../../../cart/cart-shared/cart-shared.module';\nimport { PromotionsModule } from '../../../checkout/components/promotions/promotions.module';\nimport { OrderDetailActionsComponent } from './order-detail-actions/order-detail-actions.component';\nimport { TrackingEventsComponent } from './order-detail-items/consignment-tracking/tracking-events/tracking-events.component';\nimport { OrderConsignedEntriesComponent } from './order-detail-items/order-consigned-entries/order-consigned-entries.component';\nimport { OrderDetailItemsComponent } from './order-detail-items/order-detail-items.component';\nimport { OrderDetailShippingComponent } from './order-detail-shipping/order-detail-shipping.component';\nimport { OrderDetailTotalsComponent } from './order-detail-totals/order-detail-totals.component';\nimport { OrderDetailsService } from './order-details.service';\n\nconst moduleComponents = [\n  OrderDetailActionsComponent,\n  OrderDetailItemsComponent,\n  OrderDetailTotalsComponent,\n  OrderDetailShippingComponent,\n  TrackingEventsComponent,\n  ConsignmentTrackingComponent,\n  OrderConsignedEntriesComponent,\n];\n\n@NgModule({\n  imports: [\n    CartSharedModule,\n    CardModule,\n    CommonModule,\n    I18nModule,\n    FeaturesConfigModule,\n    PromotionsModule,\n    OrderOverviewModule,\n    UrlModule,\n    SpinnerModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { pageLabel: 'order', cxRoute: 'orderGuest' },\n      },\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'orderDetails' },\n      },\n    ]),\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig | FeaturesConfig>{\n      cmsComponents: {\n        AccountOrderDetailsActionsComponent: {\n          component: OrderDetailActionsComponent,\n        },\n        AccountOrderDetailsItemsComponent: {\n          component: OrderDetailItemsComponent,\n        },\n        AccountOrderDetailsTotalsComponent: {\n          component: OrderDetailTotalsComponent,\n        },\n        AccountOrderDetailsShippingComponent: {\n          component: OrderDetailShippingComponent,\n        },\n      },\n      features: {\n        consignmentTracking: '1.2',\n      },\n    }),\n    OrderDetailsService,\n  ],\n  declarations: [...moduleComponents],\n  exports: [...moduleComponents],\n  entryComponents: [...moduleComponents],\n})\nexport class OrderDetailsModule {}\n","import { ChangeDetectionStrategy, Component, OnDestroy } from '@angular/core';\nimport {\n  Order,\n  OrderHistoryList,\n  RoutingService,\n  TranslationService,\n  UserOrderService,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map, take, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-order-history',\n  templateUrl: './order-history.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderHistoryComponent implements OnDestroy {\n  constructor(\n    protected routing: RoutingService,\n    protected userOrderService: UserOrderService,\n    protected translation: TranslationService,\n    protected userReplenishmentOrderService: UserReplenishmentOrderService\n  ) {}\n\n  private PAGE_SIZE = 5;\n  sortType: string;\n\n  orders$: Observable<\n    OrderHistoryList\n  > = this.userOrderService.getOrderHistoryList(this.PAGE_SIZE).pipe(\n    tap((orders: OrderHistoryList) => {\n      if (orders.pagination) {\n        this.sortType = orders.pagination.sort;\n      }\n    })\n  );\n\n  hasReplenishmentOrder$: Observable<\n    boolean\n  > = this.userReplenishmentOrderService\n    .getReplenishmentOrderDetails()\n    .pipe(map((order) => order && Object.keys(order).length !== 0));\n\n  isLoaded$: Observable<\n    boolean\n  > = this.userOrderService.getOrderHistoryListLoaded();\n\n  /**\n   * When \"Order Return\" feature is enabled, this component becomes one tab in\n   * TabParagraphContainerComponent. This can be read from TabParagraphContainer.\n   */\n  tabTitleParam$: Observable<number> = this.orders$.pipe(\n    map((order) => order.pagination.totalResults),\n    filter((totalResults) => totalResults !== undefined),\n    take(1)\n  );\n\n  ngOnDestroy(): void {\n    this.userOrderService.clearOrderList();\n  }\n\n  changeSortCode(sortCode: string): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode,\n      currentPage: 0,\n    };\n    this.sortType = sortCode;\n    this.fetchOrders(event);\n  }\n\n  pageChange(page: number): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode: this.sortType,\n      currentPage: page,\n    };\n    this.fetchOrders(event);\n  }\n\n  goToOrderDetail(order: Order): void {\n    this.routing.go({\n      cxRoute: 'orderDetails',\n      params: order,\n    });\n  }\n\n  getSortLabels(): Observable<{ byDate: string; byOrderNumber: string }> {\n    return combineLatest([\n      this.translation.translate('sorting.date'),\n      this.translation.translate('sorting.orderNumber'),\n    ]).pipe(\n      map(([textByDate, textByOrderNumber]) => {\n        return {\n          byDate: textByDate,\n          byOrderNumber: textByOrderNumber,\n        };\n      })\n    );\n  }\n\n  private fetchOrders(event: { sortCode: string; currentPage: number }): void {\n    this.userOrderService.loadOrderList(\n      this.PAGE_SIZE,\n      event.currentPage,\n      event.sortCode\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { ListNavigationModule } from '../../../../shared/components/list-navigation/list-navigation.module';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport { OrderHistoryComponent } from './order-history.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'orders' },\n      },\n    ]),\n    RouterModule,\n    FormsModule,\n    NgSelectModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n  ],\n  declarations: [OrderHistoryComponent],\n  exports: [OrderHistoryComponent],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountOrderHistoryComponent: {\n          component: OrderHistoryComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  entryComponents: [OrderHistoryComponent],\n})\nexport class OrderHistoryModule {}\n","import { LayoutConfig } from '../../../../layout/config/layout-config';\nimport { DIALOG_TYPE } from '../../../../layout/launch-dialog/index';\nimport { ReplenishmentOrderCancellationDialogComponent } from '../../../../shared/components/replenishment-order-cancellation-dialog/replenishment-order-cancellation-dialog.component';\n\nexport const defaultReplenishmentOrderCancellationLayoutConfig: LayoutConfig = {\n  launch: {\n    REPLENISHMENT_ORDER: {\n      inline: true,\n      component: ReplenishmentOrderCancellationDialogComponent,\n      dialogType: DIALOG_TYPE.DIALOG,\n    },\n  },\n};\n","import { ElementRef, Injectable, ViewContainerRef } from '@angular/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map, tap } from 'rxjs/operators';\nimport {\n  LaunchDialogService,\n  LAUNCH_CALLER,\n} from '../../../../../layout/launch-dialog/index';\n\n@Injectable({ providedIn: 'root' })\nexport class ReplenishmentOrderCancellationLaunchDialogService {\n  constructor(protected launchDialogService: LaunchDialogService) {}\n\n  openDialog(\n    openElement?: ElementRef,\n    vcr?: ViewContainerRef,\n    data?: any\n  ): Observable<any> | undefined {\n    const component = this.launchDialogService.launch(\n      LAUNCH_CALLER.REPLENISHMENT_ORDER,\n      vcr,\n      data\n    );\n\n    if (component) {\n      return combineLatest([\n        component,\n        this.launchDialogService.dialogClose,\n      ]).pipe(\n        filter(([, close]) => close && close !== undefined),\n        tap(([comp]) => {\n          openElement?.nativeElement.focus();\n          this.launchDialogService.clear(LAUNCH_CALLER.REPLENISHMENT_ORDER);\n          comp.destroy();\n        }),\n        map(([comp]) => comp)\n      );\n    }\n  }\n}\n","import {\n  Component,\n  ElementRef,\n  OnDestroy,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport {\n  ReplenishmentOrder,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { ReplenishmentOrderCancellationLaunchDialogService } from './replenishment-order-cancellation-launch-dialog.service';\n\n@Component({\n  selector: 'cx-replenishment-order-cancellation',\n  templateUrl: './replenishment-order-cancellation.component.html',\n})\nexport class ReplenishmentOrderCancellationComponent implements OnDestroy {\n  @ViewChild('element') element: ElementRef;\n\n  private subscription = new Subscription();\n\n  replenishmentOrder$: Observable<\n    ReplenishmentOrder\n  > = this.userReplenishmentOrderService.getReplenishmentOrderDetails();\n\n  constructor(\n    protected userReplenishmentOrderService: UserReplenishmentOrderService,\n    protected replenishmentOrderCancellationLaunchDialogService: ReplenishmentOrderCancellationLaunchDialogService,\n    protected vcr: ViewContainerRef\n  ) {}\n\n  openDialog() {\n    const dialog = this.replenishmentOrderCancellationLaunchDialogService.openDialog(\n      this.element,\n      this.vcr\n    );\n\n    if (dialog) {\n      this.subscription.add(dialog.pipe(take(1)).subscribe());\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.userReplenishmentOrderService.clearReplenishmentOrderDetails();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  ReplenishmentOrder,\n  RoutingService,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  map,\n  shareReplay,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReplenishmentOrderDetailsService {\n  protected replenishmentOrderCode$ = this.routingService.getRouterState().pipe(\n    map((routingData) => routingData.state.params.replenishmentOrderCode),\n    distinctUntilChanged()\n  );\n\n  protected replenishmentOrderLoad$ = this.replenishmentOrderCode$.pipe(\n    tap((replenishmentOrderCode: string) => {\n      if (Boolean(replenishmentOrderCode)) {\n        this.userReplenishmentOrderService.loadReplenishmentOrderDetails(\n          replenishmentOrderCode\n        );\n      } else {\n        this.userReplenishmentOrderService.clearReplenishmentOrderDetails();\n      }\n    }),\n    shareReplay({ bufferSize: 1, refCount: true })\n  );\n\n  constructor(\n    protected routingService: RoutingService,\n    protected userReplenishmentOrderService: UserReplenishmentOrderService\n  ) {}\n\n  getOrderDetails(): Observable<ReplenishmentOrder> {\n    return this.replenishmentOrderLoad$.pipe(\n      switchMap((_) =>\n        this.userReplenishmentOrderService.getReplenishmentOrderDetails()\n      )\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideConfig,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport {\n  CardModule,\n  ListNavigationModule,\n  ReplenishmentOrderCancellationDialogModule,\n  SpinnerModule,\n} from '../../../../shared/index';\nimport { CartSharedModule } from '../../../cart/cart-shared/cart-shared.module';\nimport { PromotionsModule } from '../../../checkout/components/promotions/promotions.module';\nimport { OrderDetailItemsComponent } from '../order-details/order-detail-items/order-detail-items.component';\nimport { OrderDetailShippingComponent } from '../order-details/order-detail-shipping/order-detail-shipping.component';\nimport { OrderDetailTotalsComponent } from '../order-details/order-detail-totals/order-detail-totals.component';\nimport { OrderDetailsService } from '../order-details/order-details.service';\nimport { OrderHistoryComponent } from '../order-history/order-history.component';\nimport { defaultReplenishmentOrderCancellationLayoutConfig } from './default-replenishment-order-cancellation-layout.config';\nimport { ReplenishmentOrderCancellationComponent } from './replenishment-order-cancellation/replenishment-order-cancellation.component';\nimport { ReplenishmentOrderDetailsService } from './replenishment-order-details.service';\n\nconst moduleComponents = [ReplenishmentOrderCancellationComponent];\n\n@NgModule({\n  imports: [\n    CartSharedModule,\n    CardModule,\n    CommonModule,\n    I18nModule,\n    PromotionsModule,\n    UrlModule,\n    ReplenishmentOrderCancellationDialogModule,\n    SpinnerModule,\n    ListNavigationModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'replenishmentDetails' },\n      },\n    ]),\n  ],\n  providers: [\n    provideConfig(defaultReplenishmentOrderCancellationLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReplenishmentDetailItemsComponent: {\n          component: OrderDetailItemsComponent,\n          providers: [\n            {\n              provide: OrderDetailsService,\n              useExisting: ReplenishmentOrderDetailsService,\n            },\n          ],\n        },\n        ReplenishmentDetailTotalsComponent: {\n          component: OrderDetailTotalsComponent,\n          providers: [\n            {\n              provide: OrderDetailsService,\n              useExisting: ReplenishmentOrderDetailsService,\n            },\n          ],\n        },\n        ReplenishmentDetailShippingComponent: {\n          component: OrderDetailShippingComponent,\n          providers: [\n            {\n              provide: OrderDetailsService,\n              useExisting: ReplenishmentOrderDetailsService,\n            },\n          ],\n        },\n        ReplenishmentDetailActionsComponent: {\n          component: ReplenishmentOrderCancellationComponent,\n        },\n        ReplenishmentDetailOrderHistoryComponent: {\n          component: OrderHistoryComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [...moduleComponents],\n  exports: [...moduleComponents],\n  entryComponents: [...moduleComponents],\n})\nexport class ReplenishmentOrderDetailsModule {}\n","import {\n  Component,\n  OnDestroy,\n  ChangeDetectionStrategy,\n  ElementRef,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport {\n  ReplenishmentOrder,\n  ReplenishmentOrderList,\n  RoutingService,\n  TranslationService,\n  UserReplenishmentOrderService,\n} from '@spartacus/core';\nimport { ReplenishmentOrderCancellationLaunchDialogService } from '../replenishment-order-details/replenishment-order-cancellation/replenishment-order-cancellation-launch-dialog.service';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, take, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-replenishment-order-history',\n  templateUrl: './replenishment-order-history.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReplenishmentOrderHistoryComponent implements OnDestroy {\n  @ViewChild('element') element: ElementRef;\n\n  private subscription = new Subscription();\n\n  private PAGE_SIZE = 5;\n  sortType: string;\n\n  replenishmentOrders$: Observable<\n    ReplenishmentOrderList\n  > = this.userReplenishmentOrderService\n    .getReplenishmentOrderHistoryList(this.PAGE_SIZE)\n    .pipe(\n      tap((replenishmentOrders: ReplenishmentOrderList) => {\n        if (replenishmentOrders.pagination) {\n          this.sortType = replenishmentOrders.pagination.sort;\n        }\n      })\n    );\n\n  isLoaded$: Observable<\n    boolean\n  > = this.userReplenishmentOrderService.getReplenishmentOrderHistoryListSuccess();\n\n  constructor(\n    protected routing: RoutingService,\n    protected userReplenishmentOrderService: UserReplenishmentOrderService,\n    protected replenishmentOrderCancellationLaunchDialogService: ReplenishmentOrderCancellationLaunchDialogService,\n    protected translation: TranslationService,\n    protected vcr: ViewContainerRef\n  ) {}\n\n  changeSortCode(sortCode: string): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode,\n      currentPage: 0,\n    };\n    this.sortType = sortCode;\n    this.fetchReplenishmentOrders(event);\n  }\n\n  pageChange(page: number): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode: this.sortType,\n      currentPage: page,\n    };\n    this.fetchReplenishmentOrders(event);\n  }\n\n  goToOrderDetail(order: ReplenishmentOrder): void {\n    this.routing.go({\n      cxRoute: 'replenishmentDetails',\n      params: order,\n    });\n  }\n\n  getSortLabels(): Observable<{\n    byDate: string;\n    byReplenishmentNumber: string;\n    byNextOrderDate: string;\n  }> {\n    return combineLatest([\n      this.translation.translate('sorting.date'),\n      this.translation.translate('sorting.replenishmentNumber'),\n      this.translation.translate('sorting.nextOrderDate'),\n    ]).pipe(\n      map(([textByDate, textByOrderNumber, textbyNextOrderDate]) => {\n        return {\n          byDate: textByDate,\n          byReplenishmentNumber: textByOrderNumber,\n          byNextOrderDate: textbyNextOrderDate,\n        };\n      })\n    );\n  }\n\n  openDialog(event: Event, replenishmentOrderCode: string): void {\n    const dialog = this.replenishmentOrderCancellationLaunchDialogService.openDialog(\n      this.element,\n      this.vcr,\n      replenishmentOrderCode\n    );\n\n    if (dialog) {\n      this.subscription.add(dialog.pipe(take(1)).subscribe());\n    }\n    event.stopPropagation();\n  }\n\n  private fetchReplenishmentOrders(event: {\n    sortCode: string;\n    currentPage: number;\n  }): void {\n    this.userReplenishmentOrderService.loadReplenishmentOrderList(\n      this.PAGE_SIZE,\n      event.currentPage,\n      event.sortCode\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.userReplenishmentOrderService.clearReplenishmentOrderList();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideConfig,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\n\nimport { ListNavigationModule } from '../../../../shared/components/list-navigation/list-navigation.module';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport { ReplenishmentOrderHistoryComponent } from './replenishment-order-history.component';\nimport { defaultReplenishmentOrderCancellationLayoutConfig } from '../replenishment-order-details/default-replenishment-order-cancellation-layout.config';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'replenishmentOrders' },\n      },\n    ]),\n    RouterModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n  ],\n  providers: [\n    provideConfig(defaultReplenishmentOrderCancellationLayoutConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountReplenishmentHistoryComponent: {\n          component: ReplenishmentOrderHistoryComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ReplenishmentOrderHistoryComponent],\n  exports: [ReplenishmentOrderHistoryComponent],\n  entryComponents: [ReplenishmentOrderHistoryComponent],\n})\nexport class ReplenishmentOrderHistoryModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  OrderReturnRequestService,\n  RoutingService,\n  ReturnRequest,\n  GlobalMessageService,\n  GlobalMessageType,\n} from '@spartacus/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { filter, map, tap, distinctUntilChanged } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReturnRequestService {\n  constructor(\n    protected routingService: RoutingService,\n    protected returnRequestService: OrderReturnRequestService,\n    protected globalMessageService: GlobalMessageService\n  ) {}\n\n  get isCancelling$(): Observable<boolean> {\n    return this.returnRequestService.getCancelReturnRequestLoading();\n  }\n\n  get isCancelSuccess$(): Observable<boolean> {\n    return this.returnRequestService.getCancelReturnRequestSuccess();\n  }\n\n  getReturnRequest(): Observable<ReturnRequest> {\n    return combineLatest([\n      this.routingService.getRouterState(),\n      this.returnRequestService.getOrderReturnRequest(),\n      this.returnRequestService.getReturnRequestLoading(),\n    ]).pipe(\n      map(([routingState, returnRequest, isLoading]) => [\n        routingState.state.params['returnCode'],\n        returnRequest,\n        isLoading,\n      ]),\n      filter(([returnCode]) => Boolean(returnCode)),\n      tap(([returnCode, returnRequest, isLoading]) => {\n        if (\n          (returnRequest === undefined || returnRequest.rma !== returnCode) &&\n          !isLoading\n        ) {\n          this.returnRequestService.loadOrderReturnRequestDetail(returnCode);\n        }\n      }),\n      map(([_, returnRequest]) => returnRequest),\n      filter(Boolean),\n      distinctUntilChanged()\n    );\n  }\n\n  clearReturnRequest(): void {\n    this.returnRequestService.clearOrderReturnRequestDetail();\n  }\n\n  cancelReturnRequest(returnRequestCode: string): void {\n    this.returnRequestService.cancelOrderReturnRequest(returnRequestCode, {\n      status: 'CANCELLING',\n    });\n  }\n\n  cancelSuccess(rma: string): void {\n    this.returnRequestService.resetCancelReturnRequestProcessState();\n    this.globalMessageService.add(\n      {\n        key: 'returnRequest.cancelSuccess',\n        params: { rma },\n      },\n      GlobalMessageType.MSG_TYPE_CONFIRMATION\n    );\n    this.routingService.go({\n      cxRoute: 'orders',\n    });\n  }\n\n  backToList(): void {\n    this.routingService.go({ cxRoute: 'orders' }, null, {\n      state: {\n        activeTab: 1,\n      },\n    });\n  }\n}\n","import {\n  Component,\n  ChangeDetectionStrategy,\n  OnInit,\n  OnDestroy,\n} from '@angular/core';\nimport { Observable, Subscription } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ReturnRequest } from '@spartacus/core';\nimport { ReturnRequestService } from '../return-request.service';\n\n@Component({\n  selector: 'cx-return-request-overview',\n  templateUrl: './return-request-overview.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnRequestOverviewComponent implements OnInit, OnDestroy {\n  constructor(protected returnRequestService: ReturnRequestService) {}\n\n  rma: string;\n  subscription: Subscription;\n\n  returnRequest$: Observable<\n    ReturnRequest\n  > = this.returnRequestService\n    .getReturnRequest()\n    .pipe(tap((returnRequest) => (this.rma = returnRequest.rma)));\n\n  isCancelling$ = this.returnRequestService.isCancelling$;\n\n  ngOnInit(): void {\n    this.subscription = this.returnRequestService.isCancelSuccess$.subscribe(\n      (success) => {\n        if (success) {\n          this.returnRequestService.cancelSuccess(this.rma);\n        }\n      }\n    );\n  }\n\n  cancelReturn(returnRequestCode: string): void {\n    this.returnRequestService.cancelReturnRequest(returnRequestCode);\n  }\n\n  back(): void {\n    this.returnRequestService.backToList();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { Component, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ReturnRequest } from '@spartacus/core';\nimport { ReturnRequestService } from '../return-request.service';\n\n@Component({\n  selector: 'cx-return-request-items',\n  templateUrl: './return-request-items.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnRequestItemsComponent {\n  constructor(protected returnRequestService: ReturnRequestService) {}\n\n  returnRequest$: Observable<\n    ReturnRequest\n  > = this.returnRequestService.getReturnRequest();\n}\n","import { Component, OnDestroy, ChangeDetectionStrategy } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ReturnRequest } from '@spartacus/core';\nimport { ReturnRequestService } from '../return-request.service';\n\n@Component({\n  selector: 'cx-return-request-totals',\n  templateUrl: './return-request-totals.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ReturnRequestTotalsComponent implements OnDestroy {\n  constructor(protected returnRequestService: ReturnRequestService) {}\n\n  returnRequest$: Observable<\n    ReturnRequest\n  > = this.returnRequestService.getReturnRequest();\n\n  ngOnDestroy() {\n    this.returnRequestService.clearReturnRequest();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { MediaModule } from '../../../../shared/index';\nimport { CmsPageGuard } from '../../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../../cms-structure/page/page-layout/page-layout.component';\nimport { ReturnRequestOverviewComponent } from './return-request-overview/return-request-overview.component';\nimport { ReturnRequestItemsComponent } from './return-request-items/return-request-items.component';\nimport { ReturnRequestTotalsComponent } from './return-request-totals/return-request-totals.component';\n\nconst components = [\n  ReturnRequestOverviewComponent,\n  ReturnRequestItemsComponent,\n  ReturnRequestTotalsComponent,\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'returnRequestDetails' },\n      },\n    ]),\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    MediaModule,\n    FeaturesConfigModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturnRequestOverviewComponent: {\n          component: ReturnRequestOverviewComponent,\n        },\n        ReturnRequestItemsComponent: {\n          component: ReturnRequestItemsComponent,\n        },\n        ReturnRequestTotalsComponent: {\n          component: ReturnRequestTotalsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [...components],\n  exports: [...components],\n  entryComponents: [...components],\n})\nexport class ReturnRequestDetailModule {}\n","import { Component, OnDestroy, ChangeDetectionStrategy } from '@angular/core';\nimport {\n  ReturnRequestList,\n  OrderReturnRequestService,\n  TranslationService,\n} from '@spartacus/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { tap, map, filter, take } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-order-return-request-list',\n  templateUrl: './order-return-request-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderReturnRequestListComponent implements OnDestroy {\n  constructor(\n    private returnRequestService: OrderReturnRequestService,\n    private translation: TranslationService\n  ) {}\n\n  private PAGE_SIZE = 5;\n  sortType: string;\n\n  returnRequests$: Observable<\n    ReturnRequestList\n  > = this.returnRequestService.getOrderReturnRequestList(this.PAGE_SIZE).pipe(\n    tap((requestList: ReturnRequestList) => {\n      if (requestList.pagination) {\n        this.sortType = requestList.pagination.sort;\n      }\n    })\n  );\n\n  /**\n   * When \"Order Return\" feature is enabled, this component becomes one tab in\n   * TabParagraphContainerComponent. This can be read from TabParagraphContainer.\n   */\n  tabTitleParam$: Observable<number> = this.returnRequests$.pipe(\n    map((returnRequests) => returnRequests.pagination.totalResults),\n    filter((totalResults) => totalResults !== undefined),\n    take(1)\n  );\n\n  ngOnDestroy(): void {\n    this.returnRequestService.clearOrderReturnRequestList();\n  }\n\n  changeSortCode(sortCode: string): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode,\n      currentPage: 0,\n    };\n    this.sortType = sortCode;\n    this.fetchReturnRequests(event);\n  }\n\n  pageChange(page: number): void {\n    const event: { sortCode: string; currentPage: number } = {\n      sortCode: this.sortType,\n      currentPage: page,\n    };\n    this.fetchReturnRequests(event);\n  }\n\n  getSortLabels(): Observable<{ byDate: string; byRMA: string }> {\n    return combineLatest([\n      this.translation.translate('sorting.date'),\n      this.translation.translate('sorting.rma'),\n    ]).pipe(\n      map(([textByDate, textByRma]) => {\n        return {\n          byDate: textByDate,\n          byRMA: textByRma,\n        };\n      })\n    );\n  }\n\n  private fetchReturnRequests(event: {\n    sortCode: string;\n    currentPage: number;\n  }): void {\n    this.returnRequestService.loadOrderReturnRequestList(\n      this.PAGE_SIZE,\n      event.currentPage,\n      event.sortCode\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { ListNavigationModule } from '../../../../shared/components/list-navigation/list-navigation.module';\nimport { OrderReturnRequestListComponent } from './order-return-request-list.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        OrderReturnRequestListComponent: {\n          component: OrderReturnRequestListComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [OrderReturnRequestListComponent],\n  exports: [OrderReturnRequestListComponent],\n  entryComponents: [OrderReturnRequestListComponent],\n})\nexport class ReturnRequestListModule {}\n","import { NgModule } from '@angular/core';\nimport {\n  OrderCancellationModule,\n  OrderReturnModule,\n} from './amend-order/index';\nimport { OrderDetailsModule } from './order-details/order-details.module';\nimport { OrderHistoryModule } from './order-history/order-history.module';\nimport { ReplenishmentOrderDetailsModule } from './replenishment-order-details/replenishment-order-details.module';\nimport { ReplenishmentOrderHistoryModule } from './replenishment-order-history/replenishment-order-history.module';\nimport { ReturnRequestDetailModule } from './return-request-detail/return-request-detail.module';\nimport { ReturnRequestListModule } from './return-request-list/order-return-request-list.module';\n\n@NgModule({\n  imports: [\n    OrderHistoryModule,\n    OrderDetailsModule,\n    ReplenishmentOrderDetailsModule,\n    OrderCancellationModule,\n    OrderReturnModule,\n    ReplenishmentOrderHistoryModule,\n    ReturnRequestListModule,\n    ReturnRequestDetailModule,\n  ],\n})\nexport class OrderModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {\n  PaymentDetails,\n  TranslationService,\n  UserPaymentService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon';\nimport { Card } from '../../../shared/components/card/card.component';\n\n@Component({\n  selector: 'cx-payment-methods',\n  templateUrl: './payment-methods.component.html',\n})\nexport class PaymentMethodsComponent implements OnInit {\n  paymentMethods$: Observable<PaymentDetails[]>;\n  editCard: string;\n  iconTypes = ICON_TYPE;\n  loading$: Observable<boolean>;\n\n  constructor(\n    private userPaymentService: UserPaymentService,\n    private translation: TranslationService\n  ) {}\n\n  ngOnInit(): void {\n    this.paymentMethods$ = this.userPaymentService.getPaymentMethods().pipe(\n      tap((paymentDetails) => {\n        // Set first payment method to DEFAULT if none is set\n        if (\n          paymentDetails.length > 0 &&\n          !paymentDetails.find((paymentDetail) => paymentDetail.defaultPayment)\n        ) {\n          this.setDefaultPaymentMethod(paymentDetails[0]);\n        }\n      })\n    );\n\n    this.editCard = null;\n    this.loading$ = this.userPaymentService.getPaymentMethodsLoading();\n    this.userPaymentService.loadPaymentMethods();\n  }\n\n  getCardContent({\n    defaultPayment,\n    accountHolderName,\n    expiryMonth,\n    expiryYear,\n    cardNumber,\n    cardType,\n  }: PaymentDetails): Observable<Card> {\n    return combineLatest([\n      this.translation.translate('paymentCard.setAsDefault'),\n      this.translation.translate('common.delete'),\n      this.translation.translate('paymentCard.deleteConfirmation'),\n      this.translation.translate('paymentCard.expires', {\n        month: expiryMonth,\n        year: expiryYear,\n      }),\n      this.translation.translate('paymentCard.defaultPaymentMethod'),\n    ]).pipe(\n      map(\n        ([\n          textSetAsDefault,\n          textDelete,\n          textDeleteConfirmation,\n          textExpires,\n          textDefaultPaymentMethod,\n        ]) => {\n          const actions: { name: string; event: string }[] = [];\n          if (!defaultPayment) {\n            actions.push({ name: textSetAsDefault, event: 'default' });\n          }\n          actions.push({ name: textDelete, event: 'edit' });\n          const card: Card = {\n            header: defaultPayment ? textDefaultPaymentMethod : null,\n            textBold: accountHolderName,\n            text: [cardNumber, textExpires],\n            actions,\n            deleteMsg: textDeleteConfirmation,\n            img: this.getCardIcon(cardType.code),\n          };\n\n          return card;\n        }\n      )\n    );\n  }\n\n  deletePaymentMethod(paymentMethod: PaymentDetails): void {\n    this.userPaymentService.deletePaymentMethod(paymentMethod.id);\n    this.editCard = null;\n  }\n\n  setEdit(paymentMethod: PaymentDetails): void {\n    this.editCard = paymentMethod.id;\n  }\n\n  cancelCard(): void {\n    this.editCard = null;\n  }\n\n  setDefaultPaymentMethod(paymentMethod: PaymentDetails): void {\n    this.userPaymentService.setPaymentMethodAsDefault(paymentMethod.id);\n  }\n\n  getCardIcon(code: string): string {\n    let ccIcon: string;\n    if (code === 'visa') {\n      ccIcon = this.iconTypes.VISA;\n    } else if (code === 'master' || code === 'mastercard_eurocard') {\n      ccIcon = this.iconTypes.MASTER_CARD;\n    } else if (code === 'diners') {\n      ccIcon = this.iconTypes.DINERS_CLUB;\n    } else if (code === 'amex') {\n      ccIcon = this.iconTypes.AMEX;\n    } else {\n      ccIcon = this.iconTypes.CREDIT_CARD;\n    }\n\n    return ccIcon;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { CardModule } from '../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { PaymentMethodsComponent } from './payment-methods.component';\n\n@NgModule({\n  imports: [CommonModule, CardModule, SpinnerModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        AccountPaymentDetailsComponent: {\n          component: PaymentMethodsComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [PaymentMethodsComponent],\n  exports: [PaymentMethodsComponent],\n  entryComponents: [PaymentMethodsComponent],\n})\nexport class PaymentMethodsModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { RoutingService, UserService } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { CustomFormValidators } from '../../../shared/utils/validators/custom-form-validators';\n\n@Component({\n  selector: 'cx-reset-password-form',\n  templateUrl: './reset-password-form.component.html',\n})\nexport class ResetPasswordFormComponent implements OnInit, OnDestroy {\n  token: string;\n  subscription = new Subscription();\n\n  resetPasswordForm: FormGroup = this.fb.group(\n    {\n      password: [\n        '',\n        [Validators.required, CustomFormValidators.passwordValidator],\n      ],\n      repassword: ['', [Validators.required]],\n    },\n    {\n      validators: CustomFormValidators.passwordsMustMatch(\n        'password',\n        'repassword'\n      ),\n    }\n  );\n\n  constructor(\n    private fb: FormBuilder,\n    private routingService: RoutingService,\n    private userService: UserService\n  ) {}\n\n  ngOnInit() {\n    this.subscription.add(\n      this.routingService\n        .getRouterState()\n        .subscribe((state) => (this.token = state.state.queryParams['token']))\n    );\n\n    this.subscription.add(\n      this.userService.isPasswordReset().subscribe((reset) => {\n        if (reset) {\n          this.routingService.go({ cxRoute: 'login' });\n        }\n      })\n    );\n  }\n\n  resetPassword() {\n    if (this.resetPasswordForm.valid) {\n      const password = this.resetPasswordForm.get('password').value;\n      this.userService.resetPassword(this.token, password);\n    } else {\n      this.resetPasswordForm.markAllAsTouched();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  NotAuthGuard,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { ResetPasswordFormComponent } from './reset-password-form.component';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ResetPasswordComponent: {\n          component: ResetPasswordFormComponent,\n          guards: [NotAuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ResetPasswordFormComponent],\n  exports: [ResetPasswordFormComponent],\n  entryComponents: [ResetPasswordFormComponent],\n})\nexport class ResetPasswordModule {}\n","import { Component, EventEmitter, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { CustomFormValidators } from '../../../../shared/utils/validators/custom-form-validators';\n\n@Component({\n  selector: 'cx-update-email-form',\n  templateUrl: './update-email-form.component.html',\n})\nexport class UpdateEmailFormComponent {\n  @Output()\n  saveEmail = new EventEmitter<{\n    newUid: string;\n    password: string;\n  }>();\n\n  @Output()\n  cancelEmail = new EventEmitter<void>();\n\n  updateEmailForm: FormGroup = this.fb.group(\n    {\n      email: ['', [Validators.required, CustomFormValidators.emailValidator]],\n      confirmEmail: ['', [Validators.required]],\n      password: ['', [Validators.required]],\n    },\n    {\n      validators: CustomFormValidators.emailsMustMatch('email', 'confirmEmail'),\n    }\n  );\n\n  constructor(private fb: FormBuilder) {}\n\n  onSubmit(): void {\n    if (this.updateEmailForm.valid) {\n      const newUid = this.updateEmailForm.get('confirmEmail').value;\n      const password = this.updateEmailForm.get('password').value;\n\n      this.saveEmail.emit({ newUid, password });\n    } else {\n      this.updateEmailForm.markAllAsTouched();\n    }\n  }\n\n  onCancel(): void {\n    this.cancelEmail.emit();\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  AuthService,\n  GlobalMessageService,\n  GlobalMessageType,\n  RoutingService,\n  UserService,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'cx-update-email',\n  templateUrl: './update-email.component.html',\n})\nexport class UpdateEmailComponent implements OnInit, OnDestroy {\n  constructor(\n    private routingService: RoutingService,\n    private globalMessageService: GlobalMessageService,\n    private userService: UserService,\n    private authService: AuthService\n  ) {}\n\n  private subscription = new Subscription();\n  private newUid: string;\n  isLoading$: Observable<boolean>;\n\n  ngOnInit() {\n    this.userService.resetUpdateEmailResultState();\n    this.subscription.add(\n      this.userService\n        .getUpdateEmailResultSuccess()\n        .subscribe((success) => this.onSuccess(success))\n    );\n    this.isLoading$ = this.userService.getUpdateEmailResultLoading();\n  }\n\n  onCancel(): void {\n    this.routingService.go({ cxRoute: 'home' });\n  }\n\n  onSubmit({ newUid, password }: { newUid: string; password: string }): void {\n    this.newUid = newUid;\n    this.userService.updateEmail(password, newUid);\n  }\n\n  async onSuccess(success: boolean): Promise<void> {\n    if (success) {\n      this.globalMessageService.add(\n        {\n          key: 'updateEmailForm.emailUpdateSuccess',\n          params: { newUid: this.newUid },\n        },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n      // TODO(#9638): Use logout route when it will support passing redirect url\n      await this.authService.coreLogout();\n      this.routingService.go({ cxRoute: 'login' }, null, {\n        state: {\n          newUid: this.newUid,\n        },\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.userService.resetUpdateEmailResultState();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { UpdateEmailFormComponent } from './update-email-form/update-email-form.component';\nimport { UpdateEmailComponent } from './update-email.component';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SpinnerModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        UpdateEmailComponent: {\n          component: UpdateEmailComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [UpdateEmailFormComponent, UpdateEmailComponent],\n  exports: [UpdateEmailComponent, UpdateEmailFormComponent],\n  entryComponents: [UpdateEmailComponent],\n})\nexport class UpdateEmailModule {}\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { CustomFormValidators } from '../../../../../shared/utils/validators/custom-form-validators';\n@Component({\n  selector: 'cx-update-password-form',\n  templateUrl: './update-password-form.component.html',\n})\nexport class UpdatePasswordFormComponent implements OnInit {\n  updatePasswordForm: FormGroup;\n\n  @Output()\n  submitted = new EventEmitter<{ oldPassword: string; newPassword: string }>();\n\n  @Output()\n  cancelled = new EventEmitter<void>();\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit() {\n    this.updatePasswordForm = this.fb.group(\n      {\n        oldPassword: ['', [Validators.required]],\n        newPassword: [\n          '',\n          [Validators.required, CustomFormValidators.passwordValidator],\n        ],\n        newPasswordConfirm: ['', [Validators.required]],\n      },\n      {\n        validators: CustomFormValidators.passwordsMustMatch(\n          'newPassword',\n          'newPasswordConfirm'\n        ),\n      }\n    );\n  }\n\n  onSubmit(): void {\n    if (this.updatePasswordForm.valid) {\n      this.submitted.emit({\n        oldPassword: this.updatePasswordForm.value.oldPassword,\n        newPassword: this.updatePasswordForm.value.newPassword,\n      });\n    } else {\n      this.updatePasswordForm.markAllAsTouched();\n    }\n  }\n\n  onCancel(): void {\n    this.cancelled.emit();\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  RoutingService,\n  UserService,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'cx-update-password',\n  templateUrl: './update-password.component.html',\n})\nexport class UpdatePasswordComponent implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n  loading$: Observable<boolean>;\n\n  constructor(\n    private routingService: RoutingService,\n    private userService: UserService,\n    private globalMessageService: GlobalMessageService\n  ) {}\n\n  ngOnInit(): void {\n    this.userService.resetUpdatePasswordProcessState();\n    this.loading$ = this.userService.getUpdatePasswordResultLoading();\n    this.subscription.add(\n      this.userService\n        .getUpdatePasswordResultSuccess()\n        .subscribe((success) => this.onSuccess(success))\n    );\n  }\n\n  onSuccess(success: boolean): void {\n    if (success) {\n      this.globalMessageService.add(\n        { key: 'updatePasswordForm.passwordUpdateSuccess' },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n      this.routingService.go({ cxRoute: 'home' });\n    }\n  }\n\n  onCancel(): void {\n    this.routingService.go({ cxRoute: 'home' });\n  }\n\n  onSubmit({\n    oldPassword,\n    newPassword,\n  }: {\n    oldPassword: string;\n    newPassword: string;\n  }): void {\n    this.userService.updatePassword(oldPassword, newPassword);\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n\n    this.userService.resetUpdatePasswordProcessState();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { UpdatePasswordFormComponent } from './components/update-password-form/update-password-form.component';\nimport { UpdatePasswordComponent } from './components/update-password/update-password.component';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SpinnerModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        UpdatePasswordComponent: {\n          component: UpdatePasswordComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [UpdatePasswordComponent, UpdatePasswordFormComponent],\n  exports: [UpdatePasswordComponent, UpdatePasswordFormComponent],\n  entryComponents: [UpdatePasswordComponent],\n})\nexport class UpdatePasswordModule {}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Title, User } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-update-profile-form',\n  templateUrl: './update-profile-form.component.html',\n})\nexport class UpdateProfileFormComponent implements OnInit {\n  @Input()\n  user: User;\n\n  @Input()\n  titles: Title[];\n\n  @Output()\n  submitted = new EventEmitter<{ userUpdates: User }>();\n\n  @Output()\n  cancelled = new EventEmitter<void>();\n\n  updateProfileForm: FormGroup = this.fb.group({\n    titleCode: [''],\n    firstName: ['', Validators.required],\n    lastName: ['', Validators.required],\n    customerId: [''],\n  });\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit() {\n    if (this.user) {\n      this.updateProfileForm.patchValue(this.user);\n    }\n  }\n\n  onSubmit(): void {\n    if (this.updateProfileForm.valid) {\n      this.submitted.emit({\n        userUpdates: { ...this.updateProfileForm.value },\n      });\n    } else {\n      this.updateProfileForm.markAllAsTouched();\n    }\n  }\n\n  onCancel(): void {\n    this.cancelled.emit();\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  RoutingService,\n  Title,\n  User,\n  UserService,\n} from '@spartacus/core';\nimport { Observable, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'cx-update-profile',\n  templateUrl: './update-profile.component.html',\n})\nexport class UpdateProfileComponent implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n\n  titles$: Observable<Title[]>;\n  user$: Observable<User>;\n  loading$: Observable<boolean>;\n\n  constructor(\n    private routingService: RoutingService,\n    private userService: UserService,\n    private globalMessageService: GlobalMessageService\n  ) {}\n\n  ngOnInit(): void {\n    // reset the previous form processing state\n    this.userService.resetUpdatePersonalDetailsProcessingState();\n\n    this.user$ = this.userService.get();\n    this.titles$ = this.userService.getTitles();\n    this.loading$ = this.userService.getUpdatePersonalDetailsResultLoading();\n\n    this.subscription.add(\n      this.userService\n        .getUpdatePersonalDetailsResultSuccess()\n        .subscribe((success) => this.onSuccess(success))\n    );\n  }\n\n  onSuccess(success: boolean): void {\n    if (success) {\n      this.globalMessageService.add(\n        { key: 'updateProfileForm.profileUpdateSuccess' },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n      this.routingService.go({ cxRoute: 'home' });\n    }\n  }\n\n  onCancel(): void {\n    this.routingService.go({ cxRoute: 'home' });\n  }\n\n  onSubmit({ userUpdates }: { userUpdates: User }): void {\n    this.userService.updatePersonalDetails(userUpdates);\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n\n    // clean up the state\n    this.userService.resetUpdatePersonalDetailsProcessingState();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { UpdateProfileFormComponent } from './components/update-profile-form.component';\nimport { UpdateProfileComponent } from './update-profile.component';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SpinnerModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        UpdateProfileComponent: {\n          component: UpdateProfileComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [UpdateProfileComponent, UpdateProfileFormComponent],\n  exports: [UpdateProfileComponent, UpdateProfileFormComponent],\n  entryComponents: [UpdateProfileComponent],\n})\nexport class UpdateProfileModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  CustomerCoupon,\n  RoutingService,\n  TranslationService,\n} from '@spartacus/core';\nimport { map } from 'rxjs/operators';\nimport { combineLatest, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class MyCouponsComponentService {\n  sortLabels: Observable<{\n    byStartDateAsc: string;\n    byStartDateDesc: string;\n    byEndDateAsc: string;\n    byEndDateDesc: string;\n  }>;\n\n  protected readonly RELEVANCE = ':relevance';\n  protected readonly CUSTOMER_COUPON_CODE = ':customerCouponCode:';\n\n  constructor(\n    protected routingService: RoutingService,\n    protected translation: TranslationService\n  ) {}\n\n  launchSearchPage(coupon: CustomerCoupon): void {\n    this.routingService.go(\n      {\n        cxRoute: 'search',\n        params: { query: this.buildSearchParam(coupon) },\n      },\n      { couponcode: coupon.couponId }\n    );\n  }\n\n  private buildSearchParam(coupon: CustomerCoupon): string {\n    return coupon.allProductsApplicable\n      ? this.RELEVANCE\n      : this.RELEVANCE + this.CUSTOMER_COUPON_CODE + coupon.couponId;\n  }\n\n  getSortLabels(): Observable<{\n    byStartDateAsc: string;\n    byStartDateDesc: string;\n    byEndDateAsc: string;\n    byEndDateDesc: string;\n  }> {\n    return combineLatest([\n      this.translation.translate('myCoupons.startDateAsc'),\n      this.translation.translate('myCoupons.startDateDesc'),\n      this.translation.translate('myCoupons.endDateAsc'),\n      this.translation.translate('myCoupons.endDateDesc'),\n    ]).pipe(\n      map(\n        ([\n          textByStartDateAsc,\n          textByStartDateDesc,\n          textByEndDateAsc,\n          textByEndDateDesc,\n        ]) => {\n          return {\n            byStartDateAsc: textByStartDateAsc,\n            byStartDateDesc: textByStartDateDesc,\n            byEndDateAsc: textByEndDateAsc,\n            byEndDateDesc: textByEndDateDesc,\n          };\n        }\n      )\n    );\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  CustomerCouponSearchResult,\n  CustomerCouponService,\n  PaginationModel,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../misc/icon/icon.model';\nimport { MyCouponsComponentService } from './my-coupons.component.service';\n\n@Component({\n  selector: 'cx-my-coupons',\n  templateUrl: './my-coupons.component.html',\n})\nexport class MyCouponsComponent implements OnInit, OnDestroy {\n  couponResult$: Observable<CustomerCouponSearchResult>;\n  couponsLoading$: Observable<boolean>;\n  couponSubscriptionLoading$: Observable<boolean>;\n\n  iconTypes = ICON_TYPE;\n\n  private subscriptions = new Subscription();\n\n  private PAGE_SIZE = 10;\n  private sortMapping = {\n    byStartDateAsc: 'startDate:asc',\n    byStartDateDesc: 'startDate:desc',\n    byEndDateAsc: 'endDate:asc',\n    byEndDateDesc: 'endDate:desc',\n  };\n  sort = 'byStartDateAsc';\n\n  sortOptions = [\n    {\n      code: 'byStartDateAsc',\n      selected: false,\n    },\n    {\n      code: 'byStartDateDesc',\n      selected: false,\n    },\n    {\n      code: 'byEndDateAsc',\n      selected: false,\n    },\n    {\n      code: 'byEndDateDesc',\n      selected: false,\n    },\n  ];\n\n  pagination: PaginationModel;\n  sortLabels: Observable<{\n    byStartDateAsc: string;\n    byStartDateDesc: string;\n    byEndDateAsc: string;\n    byEndDateDesc: string;\n  }>;\n\n  constructor(\n    protected couponService: CustomerCouponService,\n    protected myCouponsComponentService: MyCouponsComponentService\n  ) {}\n\n  ngOnInit(): void {\n    this.couponResult$ = this.couponService\n      .getCustomerCoupons(this.PAGE_SIZE)\n      .pipe(\n        tap(\n          (coupons) =>\n            (this.pagination = {\n              currentPage: coupons.pagination.page,\n              pageSize: coupons.pagination.count,\n              totalPages: coupons.pagination.totalPages,\n              totalResults: coupons.pagination.totalCount,\n              sort: this.sort,\n            })\n        )\n      );\n    this.couponsLoading$ = this.couponService.getCustomerCouponsLoading();\n    this.couponSubscriptionLoading$ = combineLatest([\n      this.couponService.getSubscribeCustomerCouponResultLoading(),\n      this.couponService.getUnsubscribeCustomerCouponResultLoading(),\n    ]).pipe(\n      map(([subscribing, unsubscribing]) => subscribing || unsubscribing)\n    );\n    this.sortLabels = this.myCouponsComponentService.getSortLabels();\n\n    this.subscriptions\n      .add(\n        this.couponService\n          .getSubscribeCustomerCouponResultError()\n          .subscribe((error) => {\n            this.subscriptionFail(error);\n          })\n      )\n      .add(\n        this.couponService\n          .getUnsubscribeCustomerCouponResultError()\n          .subscribe((error) => {\n            this.subscriptionFail(error);\n          })\n      );\n  }\n\n  private subscriptionFail(error: boolean) {\n    if (error) {\n      this.couponService.loadCustomerCoupons(this.PAGE_SIZE);\n    }\n  }\n\n  sortChange(sort: string): void {\n    this.sort = sort;\n\n    this.couponService.loadCustomerCoupons(\n      this.PAGE_SIZE,\n      this.pagination.currentPage,\n      this.sortMapping[sort]\n    );\n  }\n\n  pageChange(page: number): void {\n    this.couponService.loadCustomerCoupons(\n      this.PAGE_SIZE,\n      page,\n      this.sortMapping[this.sort]\n    );\n  }\n\n  notificationChange({\n    couponId,\n    notification,\n  }: {\n    couponId: string;\n    notification: boolean;\n  }): void {\n    if (notification) {\n      this.couponService.subscribeCustomerCoupon(couponId);\n    } else {\n      this.couponService.unsubscribeCustomerCoupon(couponId);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n","import { Component, ViewChild, ElementRef } from '@angular/core';\nimport { ModalService } from '../../../../../shared/components/modal/index';\nimport { ICON_TYPE } from '../../../../../cms-components/misc/icon/index';\nimport { CustomerCoupon } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-coupon-dialog',\n  templateUrl: './coupon-dialog.component.html',\n})\nexport class CouponDialogComponent {\n  iconTypes = ICON_TYPE;\n  coupon: CustomerCoupon;\n\n  @ViewChild('dialog', { read: ElementRef })\n  dialog: ElementRef;\n\n  constructor(protected modalService: ModalService) {}\n\n  dismissModal(reason?: any): void {\n    this.modalService.dismissActiveModal(reason);\n  }\n}\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nimport {\n  ModalRef,\n  ModalService,\n} from '../../../../shared/components/modal/index';\nimport { CouponDialogComponent } from './coupon-dialog/coupon-dialog.component';\nimport { CustomerCoupon } from '@spartacus/core';\nimport { MyCouponsComponentService } from '../my-coupons.component.service';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'cx-coupon-card',\n  templateUrl: './coupon-card.component.html',\n})\nexport class CouponCardComponent {\n  @Input() coupon: CustomerCoupon;\n  @Input() couponSubscriptionLoading$: Observable<boolean>;\n  modalRef: ModalRef;\n\n  @Output()\n  notificationChanged = new EventEmitter<{\n    couponId: string;\n    notification: boolean;\n  }>();\n\n  constructor(\n    protected modalService: ModalService,\n    protected myCouponsComponentService: MyCouponsComponentService\n  ) {}\n\n  onSubscriptionChange(): void {\n    this.notificationChanged.emit({\n      couponId: this.coupon.couponId,\n      notification: !this.coupon.notificationOn,\n    });\n  }\n\n  readMore() {\n    let modalInstance: any;\n    this.modalRef = this.modalService.open(CouponDialogComponent, {\n      centered: true,\n      size: 'lg',\n    });\n\n    modalInstance = this.modalRef.componentInstance;\n    modalInstance.coupon = this.coupon;\n  }\n\n  findProducts(): void {\n    this.myCouponsComponentService.launchSearchPage(this.coupon);\n  }\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport {\n  RoutingService,\n  CustomerCouponService,\n  GlobalMessageService,\n  GlobalMessageType,\n} from '@spartacus/core';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  templateUrl: './coupon-claim.component.html',\n  selector: 'cx-coupon-claim',\n})\nexport class CouponClaimComponent implements OnInit, OnDestroy {\n  subscription: Subscription;\n\n  constructor(\n    protected couponService: CustomerCouponService,\n    protected routingService: RoutingService,\n    protected messageService: GlobalMessageService\n  ) {}\n\n  ngOnInit(): void {\n    this.routingService\n      .getRouterState()\n      .subscribe((k) => {\n        const couponCode = k.state.params.couponCode;\n        if (couponCode) {\n          this.couponService.claimCustomerCoupon(couponCode);\n          this.subscription = this.couponService\n            .getClaimCustomerCouponResultSuccess()\n            .subscribe((success) => {\n              if (success) {\n                this.messageService.add(\n                  { key: 'myCoupons.claimCustomerCoupon' },\n                  GlobalMessageType.MSG_TYPE_CONFIRMATION\n                );\n              }\n              this.routingService.go({ cxRoute: 'coupons' });\n            });\n        } else {\n          this.routingService.go({ cxRoute: 'notFound' });\n        }\n      })\n      .unsubscribe();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { CardModule } from '../../../shared/components/card/card.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { MyCouponsComponent } from './my-coupons.component';\nimport { CouponCardComponent } from './coupon-card/coupon-card.component';\n\nimport { ListNavigationModule } from '../../../shared/components/list-navigation/list-navigation.module';\nimport { CouponDialogComponent } from './coupon-card/coupon-dialog/coupon-dialog.component';\nimport { CouponClaimComponent } from './coupon-claim/coupon-claim.component';\nimport { CmsPageGuard } from '../../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../../cms-structure/page/page-layout/page-layout.component';\nimport { IconModule } from '../../misc/icon/icon.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CardModule,\n    SpinnerModule,\n    I18nModule,\n    RouterModule,\n    UrlModule,\n    IconModule,\n    ListNavigationModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [AuthGuard, CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'couponClaim' },\n      },\n    ]),\n  ],\n  declarations: [\n    MyCouponsComponent,\n    CouponCardComponent,\n    CouponDialogComponent,\n    CouponClaimComponent,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        MyCouponsComponent: {\n          component: MyCouponsComponent,\n          guards: [AuthGuard],\n        },\n        CouponClaimComponent: {\n          component: CouponClaimComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  exports: [MyCouponsComponent, CouponClaimComponent],\n  entryComponents: [\n    MyCouponsComponent,\n    CouponDialogComponent,\n    CouponClaimComponent,\n  ],\n})\nexport class MyCouponsModule {}\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport {\n  NotificationPreference,\n  UserNotificationPreferenceService,\n} from '@spartacus/core';\nimport { Observable, combineLatest } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-notification-preference',\n  templateUrl: './notification-preference.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NotificationPreferenceComponent implements OnInit {\n  preferences$: Observable<NotificationPreference[]>;\n  isLoading$: Observable<boolean>;\n\n  protected preferences: NotificationPreference[] = [];\n\n  constructor(\n    private notificationPreferenceService: UserNotificationPreferenceService\n  ) {}\n\n  ngOnInit() {\n    this.notificationPreferenceService.resetNotificationPreferences();\n    this.preferences$ = this.notificationPreferenceService\n      .getPreferences()\n      .pipe(tap((preferences) => (this.preferences = preferences)));\n    this.notificationPreferenceService.loadPreferences();\n\n    this.isLoading$ = combineLatest([\n      this.notificationPreferenceService.getPreferencesLoading(),\n      this.notificationPreferenceService.getUpdatePreferencesResultLoading(),\n    ]).pipe(\n      map(([prefsLoading, updateLoading]) => prefsLoading || updateLoading)\n    );\n  }\n\n  updatePreference(preference: NotificationPreference) {\n    const updatedPreferences = [];\n    this.preferences.forEach((p) => {\n      if (p.channel === preference.channel) {\n        updatedPreferences.push({\n          ...p,\n          enabled: !p.enabled,\n        });\n      } else {\n        updatedPreferences.push(p);\n      }\n    });\n    this.notificationPreferenceService.updatePreferences(updatedPreferences);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { NotificationPreferenceComponent } from './notification-preference.component';\n\n@NgModule({\n  declarations: [NotificationPreferenceComponent],\n  imports: [CommonModule, SpinnerModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        NotificationPreferenceComponent: {\n          component: NotificationPreferenceComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  exports: [NotificationPreferenceComponent],\n  entryComponents: [NotificationPreferenceComponent],\n})\nexport class NotificationPreferenceModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport {\n  PaginationModel,\n  Product,\n  ProductInterestEntryRelation,\n  ProductInterestSearchResult,\n  ProductScope,\n  ProductService,\n  TranslationService,\n  UserInterestsService,\n} from '@spartacus/core';\nimport { map, tap } from 'rxjs/operators';\n\ninterface ProductInterestSearchResultUI extends ProductInterestSearchResult {\n  results?: (ProductInterestEntryRelation & {\n    product$?: Observable<Product>;\n  })[];\n}\n\n@Component({\n  selector: 'cx-my-interests',\n  templateUrl: './my-interests.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MyInterestsComponent implements OnInit, OnDestroy {\n  private DEFAULT_PAGE_SIZE = 10;\n  private sortMapping = {\n    byNameAsc: 'name:asc',\n    byNameDesc: 'name:desc',\n  };\n\n  sort = 'byNameAsc';\n  sortOptions = [\n    {\n      code: 'byNameAsc',\n      selected: false,\n    },\n    {\n      code: 'byNameDesc',\n      selected: false,\n    },\n  ];\n  pagination: PaginationModel;\n\n  interests$: Observable<ProductInterestSearchResultUI>;\n  isRemoveDisabled$: Observable<boolean>;\n  getInterestsloading$: Observable<boolean>;\n  sortLabels: Observable<{ byNameAsc: string; byNameDesc: string }>;\n\n  constructor(\n    private productInterestService: UserInterestsService,\n    private translationService: TranslationService,\n    private productService: ProductService\n  ) {}\n\n  ngOnInit() {\n    this.interests$ = this.productInterestService\n      .getAndLoadProductInterests(this.DEFAULT_PAGE_SIZE)\n      .pipe(\n        tap(\n          (interests) =>\n            (this.pagination = {\n              currentPage: interests.pagination.page,\n              pageSize: interests.pagination.count,\n              totalPages: interests.pagination.totalPages,\n              totalResults: interests.pagination.totalCount,\n              sort: 'byNameAsc',\n            })\n        ),\n        map((interest) => ({\n          ...interest,\n          results: interest.results\n            ? interest.results.map((result) => ({\n                ...result,\n                product$: this.getProduct(result),\n              }))\n            : interest.results,\n        }))\n      );\n\n    this.getInterestsloading$ = this.productInterestService.getProdutInterestsLoading();\n    this.isRemoveDisabled$ = combineLatest([\n      this.getInterestsloading$,\n      this.productInterestService.getRemoveProdutInterestLoading(),\n    ]).pipe(map(([getLoading, removeLoading]) => getLoading || removeLoading));\n\n    this.sortLabels = this.getSortLabels();\n  }\n\n  private getSortLabels(): Observable<{\n    byNameAsc: string;\n    byNameDesc: string;\n  }> {\n    return combineLatest([\n      this.translationService.translate('myInterests.sorting.byNameAsc'),\n      this.translationService.translate('myInterests.sorting.byNameDesc'),\n    ]).pipe(\n      map(([asc, desc]) => {\n        return {\n          byNameAsc: asc,\n          byNameDesc: desc,\n        };\n      })\n    );\n  }\n\n  private getProduct(\n    interest: ProductInterestEntryRelation\n  ): Observable<Product> {\n    return this.productService.get(interest.product.code, ProductScope.DETAILS);\n  }\n\n  removeInterest(\n    relation: ProductInterestEntryRelation & {\n      product$?: Observable<Product>;\n    }\n  ): void {\n    this.productInterestService.removeProdutInterest({\n      product: relation.product,\n      productInterestEntry: relation.productInterestEntry,\n    });\n  }\n\n  sortChange(sort: string): void {\n    this.sort = sort;\n    this.productInterestService.loadProductInterests(\n      this.DEFAULT_PAGE_SIZE,\n      0,\n      this.sortMapping[sort]\n    );\n  }\n\n  pageChange(page: number): void {\n    this.productInterestService.loadProductInterests(\n      this.DEFAULT_PAGE_SIZE,\n      page,\n      this.sortMapping[this.sort]\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.productInterestService.clearProductInterests();\n    this.productInterestService.resetRemoveInterestState();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { ListNavigationModule } from '../../../shared/components/list-navigation/list-navigation.module';\nimport { MyInterestsComponent } from './my-interests.component';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\n\n@NgModule({\n  declarations: [MyInterestsComponent],\n  imports: [\n    CommonModule,\n    I18nModule,\n    RouterModule,\n    ListNavigationModule,\n    I18nModule,\n    UrlModule,\n    MediaModule,\n    SpinnerModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        MyInterestsComponent: {\n          component: MyInterestsComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  exports: [MyInterestsComponent],\n  entryComponents: [MyInterestsComponent],\n})\nexport class MyInterestsModule {}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport {\n  CmsBreadcrumbsComponent,\n  PageMeta,\n  PageMetaService,\n  TranslationService,\n} from '@spartacus/core';\nimport { combineLatest, Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-breadcrumb',\n  templateUrl: './breadcrumb.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BreadcrumbComponent implements OnInit {\n  title$: Observable<string>;\n  crumbs$: Observable<any[]>;\n\n  constructor(\n    public component: CmsComponentData<CmsBreadcrumbsComponent>,\n    protected pageMetaService: PageMetaService,\n    private translation: TranslationService\n  ) {}\n\n  ngOnInit(): void {\n    this.setTitle();\n    this.setCrumbs();\n  }\n\n  private setTitle(): void {\n    this.title$ = this.pageMetaService.getMeta().pipe(\n      filter(Boolean),\n      map((meta: PageMeta) => meta.heading || meta.title)\n    );\n  }\n\n  private setCrumbs(): void {\n    this.crumbs$ = combineLatest([\n      this.pageMetaService.getMeta(),\n      this.translation.translate('common.home'),\n    ]).pipe(\n      map(([meta, textHome]) =>\n        meta?.breadcrumbs ? meta.breadcrumbs : [{ label: textHome, link: '/' }]\n      )\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  CmsPageTitleModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { BreadcrumbComponent } from './breadcrumb.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, CmsPageTitleModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        BreadcrumbComponent: {\n          component: BreadcrumbComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [BreadcrumbComponent],\n  exports: [BreadcrumbComponent],\n  entryComponents: [BreadcrumbComponent],\n})\nexport class BreadcrumbModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  CmsNavigationComponent,\n  CmsService,\n  SemanticPathService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { filter, map, switchMap, tap } from 'rxjs/operators';\nimport { NavigationNode } from './navigation-node.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NavigationService {\n  constructor(\n    protected cmsService: CmsService,\n    protected semanticPathService: SemanticPathService\n  ) {}\n\n  public createNavigation(\n    data$: Observable<CmsNavigationComponent>\n  ): Observable<NavigationNode> {\n    return combineLatest([data$, this.getNavigationNode(data$)]).pipe(\n      map(([data, nav]) => {\n        return data\n          ? {\n              title: data.name,\n              children: [nav],\n            }\n          : undefined;\n      })\n    );\n  }\n\n  /**\n   * returns an observable with the `NavigationNode` for the given `CmsNavigationComponent`.\n   * This function will load the navigation underlying entries and children if they haven't been\n   * loaded so far.\n   */\n  public getNavigationNode(\n    data$: Observable<CmsNavigationComponent>\n  ): Observable<NavigationNode> {\n    if (!data$) {\n      return of();\n    }\n    return data$.pipe(\n      filter((data) => !!data),\n      switchMap((data) => {\n        const navigation = data.navigationNode ? data.navigationNode : data;\n        return this.cmsService.getNavigationEntryItems(navigation.uid).pipe(\n          tap((items) => {\n            if (items === undefined) {\n              this.loadNavigationEntryItems(navigation, true);\n            } else {\n              // we should check whether the existing node items are what expected\n              const expectedItems = [];\n              this.loadNavigationEntryItems(navigation, false, expectedItems);\n              const existingItems = Object.keys(items).map(\n                (key) => items[key].uid\n              );\n              const missingItems = expectedItems.filter(\n                (it) => !existingItems.includes(it.id)\n              );\n              if (missingItems.length > 0) {\n                this.cmsService.loadNavigationItems(\n                  navigation.uid,\n                  missingItems\n                );\n              }\n            }\n          }),\n          filter(Boolean),\n          map((items) => this.populateNavigationNode(navigation, items))\n        );\n      })\n    );\n  }\n\n  /**\n   * Loads all navigation entry items' type and id. Dispatch action to load all these items\n   * @param nodeData\n   * @param root\n   * @param itemsList\n   */\n  private loadNavigationEntryItems(\n    nodeData: any,\n    root: boolean,\n    itemsList = []\n  ): void {\n    if (nodeData.entries && nodeData.entries.length > 0) {\n      nodeData.entries.forEach((entry) => {\n        itemsList.push({\n          superType: entry.itemSuperType,\n          id: entry.itemId,\n        });\n      });\n    }\n\n    if (nodeData.children && nodeData.children.length > 0) {\n      nodeData.children.forEach((child) =>\n        this.loadNavigationEntryItems(child, false, itemsList)\n      );\n    }\n\n    if (root) {\n      this.cmsService.loadNavigationItems(nodeData.uid, itemsList);\n    }\n  }\n\n  /**\n   * Create a new node tree for the view\n   * @param nodeData\n   * @param items\n   */\n  private populateNavigationNode(nodeData: any, items: any): NavigationNode {\n    const node: NavigationNode = {};\n\n    if (nodeData.title) {\n      // the node title will be populated by the first entry (if any)\n      // if there's no nodeData.title available\n      node.title = nodeData.title;\n    }\n\n    // populate style classes to apply CMS driven styling\n    if (nodeData.styleClasses) {\n      node.styleClasses = nodeData.styleClasses;\n    }\n    // populate style attributes to apply CMS driven styling\n    if (nodeData.styleAttributes) {\n      node.styleAttributes = nodeData.styleAttributes;\n    }\n\n    if (nodeData.entries && nodeData.entries.length > 0) {\n      this.populateLink(node, nodeData.entries[0], items);\n    }\n\n    if (nodeData.children?.length > 0) {\n      const children = nodeData.children\n        .map((child) => this.populateNavigationNode(child, items))\n        .filter(Boolean);\n      if (children.length > 0) {\n        node.children = children;\n      }\n    }\n\n    // return null in case there are no children\n    return Object.keys(node).length === 0 ? null : node;\n  }\n\n  /**\n   * The node link is driven by the first entry.\n   */\n  private populateLink(node: NavigationNode, entry, items) {\n    const item = items[`${entry.itemId}_${entry.itemSuperType}`];\n\n    // now we only consider CMSLinkComponent\n    if (item && entry.itemType === 'CMSLinkComponent') {\n      if (!node.title) {\n        node.title = item.linkName;\n      }\n      const url = this.getLink(item);\n      // only populate the node link if we have a visible node\n      if (node.title && url) {\n        node.url = url;\n        // the backend provide boolean value for the target\n        // in case the link should be opened in a new window\n        if (item.target === 'true' || item.target === true) {\n          node.target = '_blank';\n        }\n      }\n      // populate style classes to apply CMS driven styling\n      if (item.styleClasses) {\n        node.styleClasses = item.styleClasses;\n      }\n      // populate style attributes to apply CMS driven styling\n      if (item.styleAttributes) {\n        node.styleAttributes = item.styleAttributes;\n      }\n    }\n  }\n\n  /**\n   *\n   * Gets the URL or link to a related item (category),\n   * also taking into account content pages (contentPageLabelOrId)\n   * and product pages (productCode)\n   */\n  protected getLink(item): string | string[] {\n    if (item.url) {\n      return item.url;\n    } else if (item.contentPageLabelOrId) {\n      return item.contentPageLabelOrId;\n    } else if (item.categoryCode) {\n      return this.semanticPathService.transform({\n        cxRoute: 'category',\n        params: {\n          code: item.categoryCode,\n          name: item.name,\n        },\n      });\n    } else if (item.productCode) {\n      return this.semanticPathService.transform({\n        cxRoute: 'product',\n        params: {\n          code: item.productCode,\n          name: item.name,\n        },\n      });\n    }\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { CmsNavigationComponent } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { NavigationNode } from '../navigation/navigation-node.model';\nimport { NavigationService } from '../navigation/navigation.service';\n\n@Component({\n  selector: 'cx-category-navigation',\n  templateUrl: './category-navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CategoryNavigationComponent {\n  node$: Observable<NavigationNode> = this.service.getNavigationNode(\n    this.componentData.data$\n  );\n\n  data$: Observable<CmsNavigationComponent> = this.componentData.data$;\n\n  constructor(\n    protected componentData: CmsComponentData<CmsNavigationComponent>,\n    protected service: NavigationService\n  ) {}\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  OnDestroy,\n  Renderer2,\n} from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { debounceTime, filter } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../misc/icon/index';\nimport { NavigationNode } from './navigation-node.model';\n\n@Component({\n  selector: 'cx-navigation-ui',\n  templateUrl: './navigation-ui.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NavigationUIComponent implements OnDestroy {\n  /**\n   * The navigation node to render.\n   */\n  @Input() node: NavigationNode;\n\n  /**\n   * The number of child nodes that must be wrapped.\n   */\n  @Input() wrapAfter: number;\n  /**\n   * the icon type that will be used for navigation nodes\n   * with children.\n   */\n  iconType = ICON_TYPE;\n\n  /**\n   * Indicates whether the navigation should support flyout.\n   * If flyout is set to true, the\n   * nested child navigation nodes will only appear on hover or focus.\n   */\n  @Input() @HostBinding('class.flyout') flyout = true;\n\n  @Input() @HostBinding('class.is-open') isOpen = false;\n\n  private openNodes: HTMLElement[] = [];\n  private subscriptions = new Subscription();\n  private resize = new EventEmitter();\n\n  @HostListener('window:resize')\n  onResize() {\n    this.resize.next();\n  }\n\n  constructor(\n    private router: Router,\n    private renderer: Renderer2,\n    private elemRef: ElementRef\n  ) {\n    this.subscriptions.add(\n      this.router.events\n        .pipe(filter((event) => event instanceof NavigationEnd))\n        .subscribe(() => this.clear())\n    );\n    this.subscriptions.add(\n      this.resize.pipe(debounceTime(50)).subscribe(() => {\n        this.alignWrappersToRightIfStickOut();\n      })\n    );\n  }\n\n  toggleOpen(event: UIEvent): void {\n    if (event.type === 'keydown') {\n      event.preventDefault();\n    }\n    const node = <HTMLElement>event.currentTarget;\n    if (this.openNodes.includes(node)) {\n      if (event.type === 'keydown') {\n        this.back();\n      } else {\n        this.openNodes = this.openNodes.filter((n) => n !== node);\n        this.renderer.removeClass(node, 'is-open');\n      }\n    } else {\n      this.openNodes.push(node);\n    }\n\n    this.updateClasses();\n\n    event.stopImmediatePropagation();\n    event.stopPropagation();\n  }\n\n  back(): void {\n    if (this.openNodes[this.openNodes.length - 1]) {\n      this.renderer.removeClass(\n        this.openNodes[this.openNodes.length - 1],\n        'is-open'\n      );\n      this.openNodes.pop();\n      this.updateClasses();\n    }\n  }\n\n  clear(): void {\n    this.openNodes = [];\n    this.updateClasses();\n  }\n\n  onMouseEnter(event: MouseEvent) {\n    this.alignWrapperToRightIfStickOut(<HTMLElement>event.currentTarget);\n    this.focusAfterPreviousClicked(event);\n  }\n\n  getTotalDepth(node: NavigationNode, depth = 0): number {\n    if (node.children && node.children.length > 0) {\n      return Math.max(\n        ...node.children.map((n) => this.getTotalDepth(n, depth + 1))\n      );\n    } else {\n      return depth;\n    }\n  }\n\n  getColumnCount(length: number): number {\n    return Math.round(length / (this.wrapAfter || length));\n  }\n\n  focusAfterPreviousClicked(event: MouseEvent) {\n    const target: HTMLElement = <HTMLElement>(\n      (event.target || event.relatedTarget)\n    );\n    if (\n      target.ownerDocument.activeElement.matches('nav[tabindex]') &&\n      target.parentElement.matches('.flyout')\n    ) {\n      target.focus();\n    }\n    return target.ownerDocument;\n  }\n\n  ngOnDestroy() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n\n  private alignWrapperToRightIfStickOut(node: HTMLElement) {\n    const wrapper = <HTMLElement>node.querySelector('.wrapper');\n    const body = <HTMLElement>node.closest('body');\n    if (wrapper) {\n      this.renderer.removeStyle(wrapper, 'margin-left');\n      if (\n        wrapper.offsetLeft + wrapper.offsetWidth >\n        body.offsetLeft + body.offsetWidth\n      ) {\n        this.renderer.setStyle(\n          wrapper,\n          'margin-left',\n          `${node.offsetWidth - wrapper.offsetWidth}px`\n        );\n      }\n    }\n  }\n\n  private alignWrappersToRightIfStickOut() {\n    const navs = <HTMLCollection>this.elemRef.nativeElement.childNodes;\n    Array.from(navs)\n      .filter((node) => node.tagName === 'NAV')\n      .forEach((nav) => this.alignWrapperToRightIfStickOut(<HTMLElement>nav));\n  }\n\n  private updateClasses(): void {\n    this.openNodes.forEach((node, i) => {\n      if (i + 1 < this.openNodes.length) {\n        this.renderer.addClass(node, 'is-opened');\n        this.renderer.removeClass(node, 'is-open');\n      } else {\n        this.renderer.removeClass(node, 'is-opened');\n        this.renderer.addClass(node, 'is-open');\n      }\n    });\n\n    this.isOpen = this.openNodes.length > 0;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { CmsNavigationComponent } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { NavigationNode } from './navigation-node.model';\nimport { NavigationService } from './navigation.service';\n\n@Component({\n  selector: 'cx-navigation',\n  templateUrl: './navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NavigationComponent {\n  node$: Observable<NavigationNode> = this.service.createNavigation(\n    this.componentData.data$\n  );\n\n  styleClass$: Observable<string> = this.componentData.data$.pipe(\n    map((d) => d?.styleClass)\n  );\n\n  constructor(\n    protected componentData: CmsComponentData<CmsNavigationComponent>,\n    protected service: NavigationService\n  ) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { NavigationUIComponent } from './navigation-ui.component';\nimport { NavigationComponent } from './navigation.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    IconModule,\n    GenericLinkModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        NavigationComponent: {\n          component: NavigationComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [NavigationComponent, NavigationUIComponent],\n  entryComponents: [NavigationComponent],\n  exports: [NavigationComponent, NavigationUIComponent],\n})\nexport class NavigationModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { NavigationModule } from '../navigation/navigation.module';\nimport { CategoryNavigationComponent } from './category-navigation.component';\n\n@NgModule({\n  imports: [CommonModule, NavigationModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CategoryNavigationComponent: {\n          component: CategoryNavigationComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [CategoryNavigationComponent],\n  entryComponents: [CategoryNavigationComponent],\n  exports: [CategoryNavigationComponent],\n})\nexport class CategoryNavigationModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { CmsNavigationComponent } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { NavigationNode } from '../navigation/navigation-node.model';\nimport { NavigationService } from '../navigation/navigation.service';\n\n@Component({\n  selector: 'cx-footer-navigation',\n  templateUrl: './footer-navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FooterNavigationComponent {\n  node$: Observable<NavigationNode> = this.service.getNavigationNode(\n    this.componentData.data$\n  );\n\n  styleClass$: Observable<string> = this.componentData.data$.pipe(\n    map((d) => d?.styleClass)\n  );\n\n  constructor(\n    protected componentData: CmsComponentData<CmsNavigationComponent>,\n    protected service: NavigationService\n  ) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { GenericLinkModule } from '../../../shared/components/generic-link/generic-link.module';\nimport { NavigationModule } from '../navigation/navigation.module';\nimport { FooterNavigationComponent } from './footer-navigation.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    NavigationModule,\n    GenericLinkModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        FooterNavigationComponent: {\n          component: FooterNavigationComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [FooterNavigationComponent],\n  entryComponents: [FooterNavigationComponent],\n  exports: [FooterNavigationComponent],\n})\nexport class FooterNavigationModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  ProductSearchPage,\n  RoutingService,\n  SearchboxService,\n  TranslationService,\n  WindowRef,\n} from '@spartacus/core';\nimport { combineLatest, Observable, of } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { SearchBoxConfig, SearchResults } from './search-box.model';\n\nconst HAS_SEARCH_RESULT_CLASS = 'has-searchbox-results';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class SearchBoxComponentService {\n  constructor(\n    public searchService: SearchboxService,\n    protected routingService: RoutingService,\n    protected translationService: TranslationService,\n    protected winRef: WindowRef\n  ) {}\n\n  /**\n   * Executes the search for products and suggestions,\n   * unless the configuration is setup to not search for\n   * products or suggestions.\n   */\n  search(query: string, config: SearchBoxConfig): void {\n    if (!query || query === '') {\n      this.clearResults();\n      return;\n    }\n\n    if (\n      config.minCharactersBeforeRequest &&\n      query.length < config.minCharactersBeforeRequest\n    ) {\n      return;\n    }\n\n    if (config.displayProducts) {\n      this.searchService.search(query, {\n        pageSize: config.maxProducts,\n      });\n    }\n\n    if (config.displaySuggestions) {\n      this.searchService.searchSuggestions(query, {\n        pageSize: config.maxSuggestions,\n      });\n    }\n  }\n\n  /**\n   * Returns an observable with the SearchResults. When there's any\n   * result, the body tag will get a classname, so that specific style\n   * rules can be applied.\n   */\n  getResults(config: SearchBoxConfig): Observable<SearchResults> {\n    return combineLatest([\n      this.getProductResults(config),\n      this.getProductSuggestions(config),\n      this.getSearchMessage(config),\n    ]).pipe(\n      map(([productResults, suggestions, message]) => {\n        return {\n          products: productResults ? productResults.products : null,\n          suggestions,\n          message,\n        };\n      }),\n      tap((results) =>\n        this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, this.hasResults(results))\n      )\n    );\n  }\n\n  /**\n   * Clears the searchbox results, so that old values are\n   * no longer emited upon next search.\n   */\n  clearResults() {\n    this.searchService.clearResults();\n    this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, false);\n  }\n\n  hasBodyClass(className: string): boolean {\n    return this.winRef.document.body.classList.contains(className);\n  }\n\n  toggleBodyClass(className: string, add?: boolean) {\n    if (add === undefined) {\n      this.winRef.document.body.classList.toggle(className);\n    } else {\n      add\n        ? this.winRef.document.body.classList.add(className)\n        : this.winRef.document.body.classList.remove(className);\n    }\n  }\n\n  /**\n   * For search results model, it returns true when:\n   * * there is any product OR\n   * * the is any search suggestion OR\n   * * there is a message.\n   *\n   * Otherwise it returns false.\n   */\n  protected hasResults(results: SearchResults): boolean {\n    return (\n      (!!results.products && results.products.length > 0) ||\n      (!!results.suggestions && results.suggestions.length > 0) ||\n      !!results.message\n    );\n  }\n\n  /**\n   * Emits product search results in case when the config property `displayProducts` is true.\n   * Otherwise it emits an empty object.\n   */\n  protected getProductResults(\n    config: SearchBoxConfig\n  ): Observable<ProductSearchPage> {\n    if (config.displayProducts) {\n      return this.searchService.getResults();\n    } else {\n      return of({});\n    }\n  }\n\n  /**\n   * Loads suggestions from the backend. In case there's no suggestion\n   * available, we try to get an exact match suggestion.\n   */\n  protected getProductSuggestions(\n    config: SearchBoxConfig\n  ): Observable<string[]> {\n    if (!config.displaySuggestions) {\n      return of([]);\n    } else {\n      return this.searchService.getSuggestionResults().pipe(\n        map((res) => res.map((suggestion) => suggestion.value)),\n        switchMap((suggestions) => {\n          if (suggestions.length === 0) {\n            return this.getExactSuggestion(config).pipe(\n              map((match) => (match ? [match] : []))\n            );\n          } else {\n            return of(suggestions);\n          }\n        })\n      );\n    }\n  }\n\n  /**\n   * Whenever there is at least 1 product, we simulate\n   * a suggestion to provide easy access to the search result page\n   */\n  protected getExactSuggestion(config: SearchBoxConfig): Observable<string> {\n    return this.getProductResults(config).pipe(\n      switchMap((productResult) => {\n        return productResult.products && productResult.products.length > 0\n          ? this.fetchTranslation('searchBox.help.exactMatch', {\n              term: productResult.freeTextSearch,\n            })\n          : of(null);\n      })\n    );\n  }\n\n  /**\n   * Emits a 'no match' message, in case the product search results and search suggestions are empty.\n   * Otherwise it emits null.\n   */\n  protected getSearchMessage(config: SearchBoxConfig): Observable<string> {\n    return combineLatest([\n      this.getProductResults(config),\n      this.getProductSuggestions(config),\n    ]).pipe(\n      switchMap(([productResult, suggestions]) => {\n        if (\n          productResult &&\n          productResult.products &&\n          productResult.products.length === 0 &&\n          suggestions &&\n          suggestions.length === 0\n        ) {\n          return this.fetchTranslation('searchBox.help.noMatch');\n        } else {\n          return of(null);\n        }\n      })\n    );\n  }\n\n  /**\n   * Navigates to the search result page with a given query\n   */\n  launchSearchPage(query: string): void {\n    this.routingService.go({\n      cxRoute: 'search',\n      params: { query },\n    });\n  }\n\n  private fetchTranslation(\n    translationKey: string,\n    options?: any\n  ): Observable<string> {\n    return this.translationService.translate(translationKey, options);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  Input,\n  Optional,\n} from '@angular/core';\nimport { CmsSearchBoxComponent, WindowRef } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../cms-components/misc/icon/index';\nimport { CmsComponentData } from '../../../cms-structure/page/model/cms-component-data';\nimport { SearchBoxComponentService } from './search-box-component.service';\nimport { SearchBoxConfig, SearchResults } from './search-box.model';\n\nconst DEFAULT_SEARCH_BOX_CONFIG: SearchBoxConfig = {\n  minCharactersBeforeRequest: 1,\n  displayProducts: true,\n  displaySuggestions: true,\n  maxProducts: 5,\n  maxSuggestions: 5,\n  displayProductImages: true,\n};\n\n@Component({\n  selector: 'cx-searchbox',\n  templateUrl: './search-box.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class SearchBoxComponent {\n  @Input() config: SearchBoxConfig;\n\n  /**\n   * Sets the search box input field\n   */\n  @Input('queryText')\n  set queryText(value: string) {\n    if (value) {\n      this.search(value);\n    }\n  }\n\n  iconTypes = ICON_TYPE;\n\n  /**\n   * In some occasions we need to ignore the close event,\n   * for example when we click inside the search result section.\n   */\n  private ignoreCloseEvent = false;\n\n  /**\n   * The component data is optional, so that this component\n   * can be reused without CMS integration.\n   */\n\n  constructor(\n    protected searchBoxComponentService: SearchBoxComponentService,\n    @Optional()\n    protected componentData: CmsComponentData<CmsSearchBoxComponent>,\n    protected winRef: WindowRef\n  ) {}\n\n  /**\n   * Returns the SearchBox configuration. The configuration is driven by multiple\n   * layers: default configuration, (optional) backend configuration and (optional)\n   * input configuration.\n   */\n  protected config$: Observable<SearchBoxConfig> = (\n    this.componentData?.data$ || of({} as any)\n  ).pipe(\n    map((config) => {\n      const isBool = (obj: SearchBoxConfig, prop: string): boolean =>\n        obj?.[prop] !== 'false' && obj?.[prop] !== false;\n\n      return {\n        ...DEFAULT_SEARCH_BOX_CONFIG,\n        ...config,\n        displayProducts: isBool(config, 'displayProducts'),\n        displayProductImages: isBool(config, 'displayProductImages'),\n        displaySuggestions: isBool(config, 'displaySuggestions'),\n        // we're merging the (optional) input of this component, but write the merged\n        // result back to the input property, as the view logic depends on it.\n        ...this.config,\n      };\n    }),\n    tap((config) => (this.config = config))\n  );\n\n  results$: Observable<SearchResults> = this.config$.pipe(\n    switchMap((config) => this.searchBoxComponentService.getResults(config))\n  );\n\n  /**\n   * Closes the searchBox and opens the search result page.\n   */\n  search(query: string): void {\n    this.searchBoxComponentService.search(query, this.config);\n    // force the searchBox to open\n    this.open();\n  }\n\n  /**\n   * Opens the type-ahead searchBox\n   */\n  open(): void {\n    this.searchBoxComponentService.toggleBodyClass('searchbox-is-active', true);\n  }\n\n  /**\n   * Closes the type-ahead searchBox.\n   */\n  close(event: UIEvent, force?: boolean): void {\n    // Use timeout to detect changes\n    setTimeout(() => {\n      if ((!this.ignoreCloseEvent && !this.isSearchBoxFocused()) || force) {\n        this.blurSearchBox(event);\n      }\n    });\n  }\n\n  protected blurSearchBox(event: UIEvent): void {\n    this.searchBoxComponentService.toggleBodyClass(\n      'searchbox-is-active',\n      false\n    );\n    if (event && event.target) {\n      (<HTMLElement>event.target).blur();\n    }\n  }\n\n  // Check if focus is on searchbox or result list elements\n  private isSearchBoxFocused(): boolean {\n    return (\n      this.getResultElements().includes(this.getFocusedElement()) ||\n      this.winRef.document.querySelector('input[aria-label=\"search\"]') ===\n        this.getFocusedElement()\n    );\n  }\n\n  /**\n   * Especially in mobile we do not want the search icon\n   * to focus the input again when it's already open.\n   * */\n  avoidReopen(event: UIEvent): void {\n    if (this.searchBoxComponentService.hasBodyClass('searchbox-is-active')) {\n      this.close(event);\n      event.preventDefault();\n    }\n  }\n\n  // Return result list as HTMLElement array\n  private getResultElements(): HTMLElement[] {\n    return Array.from(\n      this.winRef.document.querySelectorAll('.products > a, .suggestions > a')\n    );\n  }\n\n  // Return focused element as HTMLElement\n  private getFocusedElement(): HTMLElement {\n    return <HTMLElement>this.winRef.document.activeElement;\n  }\n\n  private getFocusedIndex(): number {\n    return this.getResultElements().indexOf(this.getFocusedElement());\n  }\n\n  // Focus on previous item in results list\n  focusPreviousChild(event) {\n    event.preventDefault(); // Negate normal keyscroll\n    const [results, focusedIndex] = [\n      this.getResultElements(),\n      this.getFocusedIndex(),\n    ];\n    // Focus on last index moving to first\n    if (results.length) {\n      if (focusedIndex < 1) {\n        results[results.length - 1].focus();\n      } else {\n        results[focusedIndex - 1].focus();\n      }\n    }\n  }\n\n  // Focus on next item in results list\n  focusNextChild(event) {\n    event.preventDefault(); // Negate normal keyscroll\n    const [results, focusedIndex] = [\n      this.getResultElements(),\n      this.getFocusedIndex(),\n    ];\n    // Focus on first index moving to last\n    if (results.length) {\n      if (focusedIndex >= results.length - 1) {\n        results[0].focus();\n      } else {\n        results[focusedIndex + 1].focus();\n      }\n    }\n  }\n\n  /**\n   * Opens the PLP with the given query.\n   *\n   * TODO: if there's a single product match, we could open the PDP.\n   */\n  launchSearchResult(event: UIEvent, query: string): void {\n    if (!query || query.trim().length === 0) {\n      return;\n    }\n    this.close(event);\n    this.searchBoxComponentService.launchSearchPage(query);\n  }\n\n  /**\n   * Disables closing the search result list.\n   */\n  disableClose(): void {\n    this.ignoreCloseEvent = true;\n  }\n\n  /**\n   * Clears the search box input field\n   */\n  clear(el: HTMLInputElement): void {\n    this.disableClose();\n    el.value = '';\n    this.searchBoxComponentService.clearResults();\n\n    // Use Timeout to run after blur event to prevent the searchbox from closing on mobile\n    setTimeout(() => {\n      // Retain focus on input lost by clicking on icon\n      el.focus();\n      this.ignoreCloseEvent = false;\n    });\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'cxHighlight' })\nexport class HighlightPipe implements PipeTransform {\n  transform(text: string, match?: string): string {\n    if (!match) {\n      return text;\n    }\n    return text.replace(\n      match.trim(),\n      `<span class=\"highlight\">${match.trim()}</span>`\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { IconModule } from '../../misc/icon/icon.module';\nimport { HighlightPipe } from './highlight.pipe';\nimport { SearchBoxComponent } from './search-box.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    MediaModule,\n    IconModule,\n    UrlModule,\n    I18nModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        SearchBoxComponent: {\n          component: SearchBoxComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [SearchBoxComponent, HighlightPipe],\n  entryComponents: [SearchBoxComponent],\n  exports: [SearchBoxComponent],\n})\nexport class SearchBoxModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  CheckoutService,\n  Order,\n  PromotionResult,\n  PromotionLocation,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { PromotionService } from '../../../../shared/services/promotion/promotion.service';\n\n@Component({\n  selector: 'cx-order-confirmation-items',\n  templateUrl: './order-confirmation-items.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderConfirmationItemsComponent implements OnInit, OnDestroy {\n  promotionLocation: PromotionLocation = PromotionLocation.Checkout;\n  order$: Observable<Order>;\n  orderPromotions$: Observable<PromotionResult[]>;\n\n  constructor(\n    protected checkoutService: CheckoutService,\n    protected promotionService: PromotionService\n  ) {}\n\n  ngOnInit() {\n    this.order$ = this.checkoutService.getOrderDetails();\n    this.orderPromotions$ = this.promotionService.getOrderPromotions(\n      this.promotionLocation\n    );\n  }\n\n  ngOnDestroy() {\n    this.checkoutService.clearCheckoutData();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { CheckoutService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'cx-order-confirmation-overview',\n  templateUrl: './order-confirmation-overview.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderConfirmationOverviewComponent implements OnInit, OnDestroy {\n  order$: Observable<any>;\n\n  constructor(protected checkoutService: CheckoutService) {}\n\n  ngOnInit() {\n    this.order$ = this.checkoutService.getOrderDetails();\n  }\n\n  ngOnDestroy() {\n    this.checkoutService.clearCheckoutData();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { CheckoutService, ORDER_TYPE } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-order-confirmation-thank-you-message',\n  templateUrl: './order-confirmation-thank-you-message.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderConfirmationThankYouMessageComponent\n  implements OnInit, OnDestroy {\n  order$: Observable<any>;\n  isReplenishmentOrderType$: Observable<boolean>;\n\n  isGuestCustomer = false;\n  orderGuid: string;\n\n  constructor(protected checkoutService: CheckoutService) {}\n\n  ngOnInit() {\n    this.order$ = this.checkoutService.getOrderDetails().pipe(\n      tap((order) => {\n        this.isGuestCustomer = order.guestCustomer;\n        this.orderGuid = order.guid;\n      })\n    );\n\n    this.isReplenishmentOrderType$ = this.checkoutService\n      .getCurrentOrderType()\n      .pipe(\n        map(\n          (orderType) => ORDER_TYPE.SCHEDULE_REPLENISHMENT_ORDER === orderType\n        )\n      );\n  }\n\n  ngOnDestroy() {\n    this.checkoutService.clearCheckoutData();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { CheckoutService, Order } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'cx-order-confirmation-totals',\n  templateUrl: './order-confirmation-totals.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OrderConfirmationTotalsComponent implements OnInit, OnDestroy {\n  order$: Observable<Order>;\n\n  constructor(protected checkoutService: CheckoutService) {}\n\n  ngOnInit() {\n    this.order$ = this.checkoutService.getOrderDetails();\n  }\n\n  ngOnDestroy() {\n    this.checkoutService.clearCheckoutData();\n  }\n}\n","import { Component, Input, OnDestroy } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { AuthService, RoutingService, UserService } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { CustomFormValidators } from '../../../../shared/utils/validators/custom-form-validators';\n\n@Component({\n  selector: 'cx-guest-register-form',\n  templateUrl: './guest-register-form.component.html',\n})\nexport class GuestRegisterFormComponent implements OnDestroy {\n  @Input() guid: string;\n  @Input() email: string;\n\n  subscription: Subscription;\n  guestRegisterForm: FormGroup = this.fb.group(\n    {\n      password: [\n        '',\n        [Validators.required, CustomFormValidators.passwordValidator],\n      ],\n      passwordconf: ['', Validators.required],\n    },\n    {\n      validators: CustomFormValidators.passwordsMustMatch(\n        'password',\n        'passwordconf'\n      ),\n    }\n  );\n\n  constructor(\n    protected userService: UserService,\n    protected routingService: RoutingService,\n    protected authService: AuthService,\n    protected fb: FormBuilder\n  ) {}\n\n  submit() {\n    if (this.guestRegisterForm.valid) {\n      this.userService.registerGuest(\n        this.guid,\n        this.guestRegisterForm.value.password\n      );\n      if (!this.subscription) {\n        this.subscription = this.authService\n          .isUserLoggedIn()\n          .subscribe((isLoggedIn) => {\n            if (isLoggedIn) {\n              this.routingService.go({ cxRoute: 'home' });\n            }\n          });\n      }\n    } else {\n      this.guestRegisterForm.markAllAsTouched();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, UrlTree, Router } from '@angular/router';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { CheckoutService, SemanticPathService } from '@spartacus/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class OrderConfirmationGuard implements CanActivate {\n  constructor(\n    private checkoutService: CheckoutService,\n    private router: Router,\n    private semanticPathService: SemanticPathService\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    return this.checkoutService.getOrderDetails().pipe(\n      map((orderDetails) => {\n        if (orderDetails && Object.keys(orderDetails).length !== 0) {\n          return true;\n        } else {\n          return this.router.parseUrl(this.semanticPathService.get('orders'));\n        }\n      })\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport {\n  CardModule,\n  FormErrorsModule,\n  OrderOverviewModule,\n} from '../../shared/index';\nimport { CartSharedModule } from '../cart/cart-shared/cart-shared.module';\nimport { PromotionsModule } from '../checkout/components/promotions/promotions.module';\nimport { PwaModule } from './../../cms-structure/pwa/pwa.module';\nimport { GuestRegisterFormComponent } from './components/guest-register-form/guest-register-form.component';\nimport { OrderConfirmationItemsComponent } from './components/order-confirmation-items/order-confirmation-items.component';\nimport { OrderConfirmationOverviewComponent } from './components/order-confirmation-overview/order-confirmation-overview.component';\n// tslint:disable-next-line\nimport { OrderConfirmationThankYouMessageComponent } from './components/order-confirmation-thank-you-message/order-confirmation-thank-you-message.component';\nimport { OrderConfirmationTotalsComponent } from './components/order-confirmation-totals/order-confirmation-totals.component';\nimport { OrderConfirmationGuard } from './guards/order-confirmation.guard';\n\nconst orderConfirmationComponents = [\n  OrderConfirmationItemsComponent,\n  OrderConfirmationOverviewComponent,\n  OrderConfirmationThankYouMessageComponent,\n  OrderConfirmationTotalsComponent,\n  GuestRegisterFormComponent,\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CartSharedModule,\n    CardModule,\n    PwaModule,\n    PromotionsModule,\n    I18nModule,\n    ReactiveFormsModule,\n    FeaturesConfigModule,\n    FormErrorsModule,\n    OrderOverviewModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        OrderConfirmationThankMessageComponent: {\n          component: OrderConfirmationThankYouMessageComponent,\n          guards: [OrderConfirmationGuard],\n        },\n        OrderConfirmationItemsComponent: {\n          component: OrderConfirmationItemsComponent,\n          guards: [OrderConfirmationGuard],\n        },\n        OrderConfirmationTotalsComponent: {\n          component: OrderConfirmationTotalsComponent,\n          guards: [OrderConfirmationGuard],\n        },\n        OrderConfirmationOverviewComponent: {\n          component: OrderConfirmationOverviewComponent,\n          guards: [OrderConfirmationGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [...orderConfirmationComponents],\n  exports: [...orderConfirmationComponents],\n  entryComponents: [...orderConfirmationComponents],\n})\nexport class OrderConfirmationModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n} from '@spartacus/core';\nimport { CardModule } from '../../shared/components/card/card.module';\nimport { FormErrorsModule } from '../../shared/index';\nimport { CartSharedModule } from '../cart/cart-shared/cart-shared.module';\nimport { PromotionsModule } from '../checkout/components/promotions/promotions.module';\nimport { PwaModule } from './../../cms-structure/pwa/pwa.module';\nimport { OrderConfirmationItemsComponent } from './components/order-confirmation-items/order-confirmation-items.component';\nimport { OrderConfirmationOverviewComponent } from './components/order-confirmation-overview/order-confirmation-overview.component';\nimport { OrderConfirmationThankYouMessageComponent } from './components/order-confirmation-thank-you-message/order-confirmation-thank-you-message.component';\nimport { OrderConfirmationTotalsComponent } from './components/order-confirmation-totals/order-confirmation-totals.component';\nimport { OrderConfirmationGuard } from './guards/order-confirmation.guard';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CartSharedModule,\n    CardModule,\n    PwaModule,\n    PromotionsModule,\n    I18nModule,\n    ReactiveFormsModule,\n    FeaturesConfigModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReplenishmentConfirmationMessageComponent: {\n          component: OrderConfirmationThankYouMessageComponent,\n          guards: [OrderConfirmationGuard],\n        },\n        ReplenishmentConfirmationOverviewComponent: {\n          component: OrderConfirmationOverviewComponent,\n          guards: [OrderConfirmationGuard],\n        },\n        ReplenishmentConfirmationItemsComponent: {\n          component: OrderConfirmationItemsComponent,\n          guards: [OrderConfirmationGuard],\n        },\n        ReplenishmentConfirmationTotalsComponent: {\n          component: OrderConfirmationTotalsComponent,\n          guards: [OrderConfirmationGuard],\n        },\n      },\n    }),\n  ],\n})\nexport class ReplenishmentOrderConfirmationModule {}\n","import { Injectable } from '@angular/core';\nimport { Product, ProductService, SemanticPathService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { ProductCarouselItem } from './product-carousel.model';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductCarouselService {\n  constructor(\n    protected productService: ProductService,\n    protected semanticPathService: SemanticPathService\n  ) {}\n\n  /**\n   * Loads the product data and converts it `CarouselItem`.\n   */\n  loadProduct(code: string): Observable<ProductCarouselItem> {\n    return this.productService.get(code).pipe(\n      filter(Boolean),\n      map((product) => this.convertProduct(product))\n    );\n  }\n\n  /**\n   * Converts the product to a generic CarouselItem\n   */\n  private convertProduct(\n    source: Product,\n    displayTitle = true,\n    displayProductPrices = true\n  ): ProductCarouselItem {\n    const item: ProductCarouselItem = {};\n    if (displayTitle) {\n      item.title = source.name;\n    }\n    if (displayProductPrices && source.price && source.price.formattedValue) {\n      item.price = source.price.formattedValue;\n    }\n    if (source.images && source.images.PRIMARY) {\n      item.media = {\n        container: source.images.PRIMARY,\n        format: 'product',\n      };\n    }\n    item.route = this.semanticPathService.transform({\n      cxRoute: 'product',\n      params: source,\n    });\n    return item;\n  }\n}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  CmsProductCarouselComponent as model,\n  Product,\n  ProductScope,\n  ProductService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../../cms-structure/page/model/cms-component-data';\n\n@Component({\n  selector: 'cx-product-carousel',\n  templateUrl: './product-carousel.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductCarouselComponent {\n  protected readonly PRODUCT_SCOPE = ProductScope.LIST;\n\n  private componentData$: Observable<model> = this.componentData.data$.pipe(\n    filter(Boolean)\n  );\n\n  /**\n   * returns an Observable string for the title.\n   */\n  title$: Observable<string> = this.componentData$.pipe(\n    map((data) => data.title)\n  );\n\n  /**\n   * Observable that holds an Array of Observables. This is done, so that\n   * the component UI could consider to lazy load the UI components when they're\n   * in the viewpoint.\n   */\n  items$: Observable<Observable<Product>[]> = this.componentData$.pipe(\n    map((data) => data.productCodes?.trim().split(' ') ?? []),\n    map((codes) =>\n      codes.map((code) => this.productService.get(code, this.PRODUCT_SCOPE))\n    )\n  );\n\n  constructor(\n    protected componentData: CmsComponentData<model>,\n    protected productService: ProductService\n  ) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig, UrlModule } from '@spartacus/core';\nimport {\n  CarouselModule,\n  MediaModule,\n} from '../../../../shared/components/index';\nimport { ProductCarouselComponent } from './product-carousel.component';\n\n@NgModule({\n  imports: [CommonModule, CarouselModule, MediaModule, RouterModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductCarouselComponent: {\n          component: ProductCarouselComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductCarouselComponent],\n  entryComponents: [ProductCarouselComponent],\n  exports: [ProductCarouselComponent],\n})\nexport class ProductCarouselModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport {\n  CmsProductReferencesComponent,\n  Product,\n  ProductReference,\n  ProductReferenceService,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { CmsComponentData } from '../../../../cms-structure/page/model/cms-component-data';\nimport { CurrentProductService } from '../../current-product.service';\n\n@Component({\n  selector: 'cx-product-references',\n  templateUrl: './product-references.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductReferencesComponent {\n  constructor(\n    protected cmsComponentData: CmsComponentData<CmsProductReferencesComponent>,\n    protected currentProductService: CurrentProductService,\n    protected productReferenceService: ProductReferenceService\n  ) {}\n\n  protected get componentData$(): Observable<CmsProductReferencesComponent> {\n    return this.cmsComponentData.data$.pipe(filter(Boolean));\n  }\n\n  /**\n   * Returns an Observable String for the product code\n   */\n  protected get productCode$(): Observable<string> {\n    return this.currentProductService.getProduct().pipe(\n      filter(Boolean),\n      map((product: Product) => product.code),\n      tap((_) => this.productReferenceService.cleanReferences())\n    );\n  }\n\n  /**\n   * Returns an Observable String for the title\n   */\n  get title$(): Observable<string> {\n    return this.componentData$.pipe(map((data) => data?.title));\n  }\n\n  /**\n   * Observable with an Array of Observables. This is done so that\n   * the component UI could consider to lazy load the UI components when they're\n   * in the viewpoint.\n   */\n  items$: Observable<Observable<Product>[]> = this.productCode$.pipe(\n    withLatestFrom(this.componentData$),\n    tap(([productCode, data]) =>\n      this.productReferenceService.loadProductReferences(\n        productCode,\n        data?.productReferenceTypes\n      )\n    ),\n    switchMap(([productCode, data]) =>\n      this.getProductReferences(productCode, data?.productReferenceTypes)\n    )\n  );\n\n  /**\n   * Returns an observable for product references\n   */\n  private getProductReferences(\n    code: string,\n    referenceType: string\n  ): Observable<Observable<Product>[]> {\n    return this.productReferenceService\n      .getProductReferences(code, referenceType)\n      .pipe(\n        filter(Boolean),\n        map((references: ProductReference[]) =>\n          references.map((reference) => of(reference.target))\n        )\n      );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig, UrlModule } from '@spartacus/core';\nimport { CarouselModule } from '../../../../shared/components/carousel/carousel.module';\nimport { MediaModule } from '../../../../shared/components/media/media.module';\nimport { ProductReferencesComponent } from './product-references.component';\n\n@NgModule({\n  imports: [CommonModule, CarouselModule, MediaModule, RouterModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductReferencesComponent: {\n          component: ProductReferencesComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductReferencesComponent],\n  entryComponents: [ProductReferencesComponent],\n  exports: [ProductReferencesComponent],\n})\nexport class ProductReferencesModule {}\n","import { ViewConfig } from '../../../shared/config/view-config';\n\nexport const defaultScrollConfig: ViewConfig = {\n  view: {\n    infiniteScroll: {\n      active: false,\n      productLimit: 0,\n      showMoreButton: false,\n    },\n  },\n};\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport { distinctUntilChanged, filter, map, tap } from 'rxjs/operators';\nimport { CurrentProductService } from '../current-product.service';\n\n@Component({\n  selector: 'cx-product-images',\n  templateUrl: './product-images.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductImagesComponent {\n  private mainMediaContainer = new BehaviorSubject(null);\n\n  private product$: Observable<\n    Product\n  > = this.currentProductService.getProduct().pipe(\n    filter(Boolean),\n    distinctUntilChanged(),\n    tap((p: Product) => {\n      this.mainMediaContainer.next(p.images?.PRIMARY ? p.images.PRIMARY : {});\n    })\n  );\n\n  thumbs$: Observable<any[]> = this.product$.pipe(\n    map((p: Product) => this.createThumbs(p))\n  );\n\n  mainImage$ = combineLatest([this.product$, this.mainMediaContainer]).pipe(\n    map(([, container]) => container)\n  );\n\n  constructor(private currentProductService: CurrentProductService) {}\n\n  openImage(item: any): void {\n    this.mainMediaContainer.next(item);\n  }\n\n  isActive(thumbnail): Observable<boolean> {\n    return this.mainMediaContainer.pipe(\n      filter(Boolean),\n      map((container: any) => {\n        return (\n          container.zoom &&\n          container.zoom.url &&\n          thumbnail.zoom &&\n          thumbnail.zoom.url &&\n          container.zoom.url === thumbnail.zoom.url\n        );\n      })\n    );\n  }\n\n  /** find the index of the main media in the list of media */\n  getActive(thumbs: any[]): Observable<number> {\n    return this.mainMediaContainer.pipe(\n      filter(Boolean),\n      map((container: any) => {\n        const current = thumbs.find(\n          (t) =>\n            t.media &&\n            container.zoom &&\n            t.media.container &&\n            t.media.container.zoom &&\n            t.media.container.zoom.url === container.zoom.url\n        );\n        return thumbs.indexOf(current);\n      })\n    );\n  }\n\n  /**\n   * Return an array of CarouselItems for the product thumbnails.\n   * In case there are less then 2 thumbs, we return null.\n   */\n  private createThumbs(product: Product): Observable<any>[] {\n    if (\n      !product.images ||\n      !product.images.GALLERY ||\n      product.images.GALLERY.length < 2\n    ) {\n      return [];\n    }\n\n    return (<any[]>product.images.GALLERY).map((c) => of({ container: c }));\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/index';\nimport { CarouselModule } from '../../../shared/components/carousel/index';\nimport { MediaModule } from '../../../shared/components/media/media.module';\nimport { ProductImagesComponent } from './product-images.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    MediaModule,\n    OutletModule,\n    CarouselModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductImagesComponent: {\n          component: ProductImagesComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductImagesComponent],\n  entryComponents: [ProductImagesComponent],\n  exports: [ProductImagesComponent],\n})\nexport class ProductImagesModule {}\n","import {\n  AfterContentChecked,\n  ChangeDetectionStrategy,\n  Component,\n} from '@angular/core';\nimport { Product, TranslationService, WindowRef } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { CurrentProductService } from '../current-product.service';\n\n@Component({\n  selector: 'cx-product-intro',\n  templateUrl: './product-intro.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductIntroComponent implements AfterContentChecked {\n  reviewsTabAvailable = new BehaviorSubject<boolean>(false);\n\n  product$: Observable<Product> = this.currentProductService.getProduct();\n\n  constructor(\n    protected currentProductService: CurrentProductService,\n    private translationService: TranslationService,\n    protected winRef: WindowRef\n  ) {}\n\n  ngAfterContentChecked() {\n    this.reviewsTabAvailable.next(!!this.getReviewsComponent());\n  }\n\n  // Scroll to views component on page and click \"Reviews\" tab\n  showReviews() {\n    // Use translated label for Reviews tab reference\n    this.translationService\n      .translate('TabPanelContainer.tabs.ProductReviewsTabComponent')\n      .subscribe((reviewsTabLabel) => {\n        const tabsComponent = this.getTabsComponent();\n        const reviewsTab = this.getTabByLabel(reviewsTabLabel, tabsComponent);\n        const reviewsComponent = this.getReviewsComponent();\n        if (reviewsTab && reviewsComponent) {\n          this.clickTabIfInactive(reviewsTab);\n          setTimeout(\n            () => reviewsComponent.scrollIntoView({ behavior: 'smooth' }),\n            0\n          );\n        }\n      })\n      .unsubscribe();\n  }\n\n  // NOTE: Does not currently exists as its own component\n  // but part of tabs component. This is likely to change in refactor.\n  private getReviewsComponent(): Element {\n    return this.winRef.document.querySelector('cx-product-reviews');\n  }\n\n  // Get Tabs Component if exists on page\n  private getTabsComponent(): Element {\n    return this.winRef.document.querySelector('cx-tab-paragraph-container');\n  }\n\n  // Click to activate tab if not already active\n  private clickTabIfInactive(tab: HTMLElement): void {\n    if (\n      !tab.classList.contains('active') ||\n      tab.classList.contains('toggled')\n    ) {\n      tab.click();\n    }\n  }\n\n  // Get Tab by label if exists on page\n  private getTabByLabel(label: string, tabsComponent: Element): HTMLElement {\n    if (tabsComponent) {\n      // NOTE: Reads through button tags to click on correct tab\n      // There may be a better way of doing this now/after refactor\n      const tabElements: HTMLCollectionOf<HTMLElement> = tabsComponent.getElementsByTagName(\n        'button'\n      );\n\n      // Look through button tab elements until finding tab with label\n      for (const buttonElement of Array.from(tabElements)) {\n        if (buttonElement.innerHTML.includes(label)) {\n          return buttonElement;\n        }\n      }\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { StarRatingModule } from '../../../shared/components/star-rating/star-rating.module';\nimport { ProductIntroComponent } from './product-intro.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule, StarRatingModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductIntroComponent: {\n          component: ProductIntroComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductIntroComponent],\n  exports: [ProductIntroComponent],\n  entryComponents: [ProductIntroComponent],\n})\nexport class ProductIntroModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { ICON_TYPE } from '../../../misc/icon/icon.model';\n\nexport enum ViewModes {\n  Grid = 'grid',\n  List = 'list',\n}\n\n@Component({\n  selector: 'cx-product-view',\n  templateUrl: './product-view.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductViewComponent {\n  iconTypes = ICON_TYPE;\n  @Input()\n  mode: ViewModes;\n  @Output()\n  modeChange = new EventEmitter<string>();\n\n  get buttonClass() {\n    const viewName: string = this.viewMode.toLowerCase();\n    return `cx-product-${viewName}`;\n  }\n\n  /**\n   *   Display icons inversely to allow users\n   *   to see the view they will navigate to\n   */\n  get viewMode() {\n    if (this.mode === 'list') {\n      return this.iconTypes.GRID;\n    } else if (this.mode === 'grid') {\n      return this.iconTypes.LIST;\n    }\n  }\n\n  changeMode() {\n    const newMode =\n      this.mode === ViewModes.Grid ? ViewModes.List : ViewModes.Grid;\n    this.modeChange.emit(newMode);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  ActivatedRouterStateSnapshot,\n  CurrencyService,\n  LanguageService,\n  ProductSearchPage,\n  ProductSearchService,\n  RouterState,\n  RoutingService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, using } from 'rxjs';\nimport {\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  map,\n  shareReplay,\n  tap,\n} from 'rxjs/operators';\nimport { ProductListRouteParams, SearchCriteria } from './product-list.model';\n\n/**\n * The `ProductListComponentService` is used to search products. The service is used\n * on the Product Listing Page, for listing products and the facet navigation.\n *\n * The service exposes the product search results based on the category and search\n * route parameters. The route parameters are used to query products by the help of\n * the `ProductSearchService`.\n */\n@Injectable({ providedIn: 'root' })\nexport class ProductListComponentService {\n  // TODO: make it configurable\n  protected defaultPageSize = 10;\n\n  protected readonly RELEVANCE_ALLCATEGORIES = ':relevance:allCategories:';\n\n  constructor(\n    protected productSearchService: ProductSearchService,\n    protected routing: RoutingService,\n    protected activatedRoute: ActivatedRoute,\n    protected currencyService: CurrencyService,\n    protected languageService: LanguageService,\n    protected router: Router\n  ) {}\n\n  /**\n   * Emits the search results for the current search query.\n   *\n   * The `searchResults$` is _not_ concerned with querying, it only observes the\n   * `productSearchService.getResults()`\n   */\n  protected searchResults$: Observable<\n    ProductSearchPage\n  > = this.productSearchService\n    .getResults()\n    .pipe(filter((searchResult) => Object.keys(searchResult).length > 0));\n\n  /**\n   * Observes the route and performs a search on each route change.\n   *\n   * Context changes, such as language and currencies are also taken\n   * into account, so that the search is performed again.\n   */\n  protected searchByRouting$: Observable<\n    ActivatedRouterStateSnapshot\n  > = combineLatest([\n    this.routing.getRouterState().pipe(\n      distinctUntilChanged((x, y) => {\n        // router emits new value also when the anticipated `nextState` changes\n        // but we want to perform search only when current url changes\n        return x.state.url === y.state.url;\n      })\n    ),\n    ...this.siteContext,\n  ]).pipe(\n    debounceTime(0),\n    map(([routerState, ..._context]) => (routerState as RouterState).state),\n    tap((state: ActivatedRouterStateSnapshot) => {\n      const criteria = this.getCriteriaFromRoute(\n        state.params,\n        state.queryParams\n      );\n      this.search(criteria);\n    })\n  );\n\n  /**\n   * This stream is used for the Product Listing and Product Facets.\n   *\n   * It not only emits search results, but also performs a search on every change\n   * of the route (i.e. route params or query params).\n   *\n   * When a user leaves the PLP route, the PLP component unsubscribes from this stream\n   * so no longer the search is performed on route change.\n   */\n  readonly model$: Observable<ProductSearchPage> = using(\n    () => this.searchByRouting$.subscribe(),\n    () => this.searchResults$\n  ).pipe(shareReplay({ bufferSize: 1, refCount: true }));\n\n  /**\n   * Expose the `SearchCriteria`. The search criteria are driven by the route parameters.\n   *\n   * This search route configuration is not yet configurable\n   * (see https://github.com/SAP/spartacus/issues/7191).\n   */\n  protected getCriteriaFromRoute(\n    routeParams: ProductListRouteParams,\n    queryParams: SearchCriteria\n  ): SearchCriteria {\n    return {\n      query: queryParams.query || this.getQueryFromRouteParams(routeParams),\n      pageSize: queryParams.pageSize || this.defaultPageSize,\n      currentPage: queryParams.currentPage,\n      sortCode: queryParams.sortCode,\n    };\n  }\n\n  /**\n   * Resolves the search query from the given `ProductListRouteParams`.\n   */\n  protected getQueryFromRouteParams({\n    query,\n    categoryCode,\n    brandCode,\n  }: ProductListRouteParams) {\n    if (query) {\n      return query;\n    }\n    if (categoryCode) {\n      return this.RELEVANCE_ALLCATEGORIES + categoryCode;\n    }\n\n    // TODO: drop support for brands as they should be treated\n    // similarly as any category.\n    if (brandCode) {\n      return this.RELEVANCE_ALLCATEGORIES + brandCode;\n    }\n  }\n\n  /**\n   * Performs a search based on the given search criteria.\n   *\n   * The search is delegated to the `ProductSearchService`.\n   */\n  protected search(criteria: SearchCriteria): void {\n    const currentPage = criteria.currentPage;\n    const pageSize = criteria.pageSize;\n    const sort = criteria.sortCode;\n\n    this.productSearchService.search(\n      criteria.query,\n      // TODO: consider dropping this complex passing of cleaned object\n      Object.assign(\n        {},\n        currentPage && { currentPage },\n        pageSize && { pageSize },\n        sort && { sort }\n      )\n    );\n  }\n\n  /**\n   * Get items from a given page without using navigation\n   */\n  getPageItems(pageNumber: number): void {\n    this.routing\n      .getRouterState()\n      .subscribe((route) => {\n        const routeCriteria = this.getCriteriaFromRoute(\n          route.state.params,\n          route.state.queryParams\n        );\n        const criteria = {\n          ...routeCriteria,\n          currentPage: pageNumber,\n        };\n        this.search(criteria);\n      })\n      .unsubscribe();\n  }\n\n  /**\n   * Sort the search results by the given sort code.\n   */\n  sort(sortCode: string): void {\n    this.route({ sortCode });\n  }\n\n  /**\n   * Routes to the next product listing page, using the given `queryParams`. The\n   * `queryParams` support sorting, pagination and querying.\n   *\n   * The `queryParams` are delegated to the Angular router `NavigationExtras`.\n   */\n  protected route(queryParams: SearchCriteria): void {\n    this.router.navigate([], {\n      queryParams,\n      queryParamsHandling: 'merge',\n      relativeTo: this.activatedRoute,\n    });\n  }\n\n  /**\n   * The site context is used to update the search query in case of a\n   * changing context. The context will typically influence the search data.\n   *\n   * We keep this private for now, as we're likely refactoring this in the next\n   * major version.\n   */\n  private get siteContext(): Observable<string>[] {\n    // TODO: we should refactor this so that custom context will be taken\n    // into account automatically. Ideally, we drop the specific context\n    // from the constructor, and query a ContextService for all contexts.\n\n    return [this.languageService.getActive(), this.currencyService.getActive()];\n  }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ProductSearchPage } from '@spartacus/core';\nimport { BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { PageLayoutService } from '../../../../cms-structure/page/index';\nimport { ViewConfig } from '../../../../shared/config/view-config';\nimport { ViewModes } from '../product-view/product-view.component';\nimport { ProductListComponentService } from './product-list-component.service';\n\n@Component({\n  selector: 'cx-product-list',\n  templateUrl: './product-list.component.html',\n})\nexport class ProductListComponent implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n\n  isInfiniteScroll: boolean;\n\n  model$: Observable<ProductSearchPage> = this.productListComponentService\n    .model$;\n\n  viewMode$ = new BehaviorSubject<ViewModes>(ViewModes.Grid);\n  ViewModes = ViewModes;\n\n  constructor(\n    private pageLayoutService: PageLayoutService,\n    private productListComponentService: ProductListComponentService,\n    public scrollConfig: ViewConfig\n  ) {}\n\n  ngOnInit(): void {\n    this.isInfiniteScroll = this.scrollConfig.view.infiniteScroll.active;\n\n    this.subscription.add(\n      this.pageLayoutService.templateName$\n        .pipe(take(1))\n        .subscribe((template) => {\n          this.viewMode$.next(\n            template === 'ProductGridPageTemplate'\n              ? ViewModes.Grid\n              : ViewModes.List\n          );\n        })\n    );\n  }\n\n  sortList(sortCode: string): void {\n    this.productListComponentService.sort(sortCode);\n  }\n\n  setViewMode(mode: ViewModes): void {\n    this.viewMode$.next(mode);\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { Breadcrumb, Facet } from '@spartacus/core';\n\n/**\n * UI model that holds the full list of facet and active facets for\n * the product list.\n */\nexport interface FacetList {\n  facets: Facet[];\n  activeFacets?: Breadcrumb[];\n}\n\nexport interface FacetCollapseState {\n  /**\n   * Indicates whether the facet is toggled to expand or collapse the facet values.\n   * Whether the toggle results in an expanded or collapsed state, depends on the\n   * experience, which is controlled in CSS.\n   */\n  toggled?: FacetGroupCollapsedState;\n\n  /**\n   * The top number of facet values that will be visible.\n   */\n  topVisible?: number;\n\n  /**\n   * The max number of facet values which will be visible. This includes\n   * the top visible number.\n   */\n  maxVisible?: number;\n}\n\nexport enum FacetGroupCollapsedState {\n  EXPANDED = 'EXPANDED',\n  COLLAPSED = 'COLLAPSED',\n}\n","import { Component, Input, OnDestroy, ChangeDetectorRef } from '@angular/core';\nimport { ProductSearchPage } from '@spartacus/core';\nimport { ViewModes } from '../../product-view/product-view.component';\nimport { Subscription } from 'rxjs';\nimport { ProductListComponentService } from '../product-list-component.service';\nimport { ViewConfig } from '../../../../../shared/config/view-config';\n\n@Component({\n  selector: 'cx-product-scroll',\n  templateUrl: './product-scroll.component.html',\n})\nexport class ProductScrollComponent implements OnDestroy {\n  private subscription = new Subscription();\n\n  @Input('scrollConfig')\n  set setConfig(inputConfig: ViewConfig) {\n    this.setComponentConfigurations(inputConfig);\n  }\n\n  model: ProductSearchPage;\n  @Input('model')\n  set setModel(inputModel: ProductSearchPage) {\n    this.infiniteScrollOperations(inputModel);\n  }\n\n  inputViewMode: ViewModes;\n  @Input('inputViewMode')\n  set setViewMode(inputViewMode: ViewModes) {\n    this.inputViewMode = inputViewMode;\n    //If viewMode is already set (meaning it is not the first load)\n    //Reset the product list\n    if (this.viewMode) {\n      this.resetListOnViewModeChange();\n    } else {\n      //If viewMode is not set (meaning it is the first load)\n      //Set the viewMode\n      this.viewMode = inputViewMode;\n    }\n  }\n\n  viewMode: ViewModes;\n  productLimit: number;\n  maxProducts: number;\n\n  ViewModes = ViewModes;\n  appendProducts = false;\n  resetList = false;\n  isMaxProducts = false;\n  isLastPage = false;\n  isEmpty = false;\n\n  constructor(\n    private productListComponentService: ProductListComponentService,\n    private ref: ChangeDetectorRef\n  ) {}\n\n  scrollPage(pageNumber: number): void {\n    this.appendProducts = true;\n    this.ref.markForCheck();\n    this.productListComponentService.getPageItems(pageNumber);\n  }\n\n  loadNextPage(pageNumber: number): void {\n    this.isMaxProducts = false;\n    this.scrollPage(pageNumber);\n  }\n\n  scrollToTop(): void {\n    window.scroll(0, 0);\n  }\n\n  private setComponentConfigurations(scrollConfig: ViewConfig): void {\n    const isButton = scrollConfig.view.infiniteScroll.showMoreButton;\n    const configProductLimit = scrollConfig.view.infiniteScroll.productLimit;\n\n    //Display \"show more\" button every time when button configuration is true\n    //Otherwise, only display \"show more\" when the configuration product limit is reached\n    this.productLimit = isButton ? 1 : configProductLimit;\n  }\n\n  private infiniteScrollOperations(inputModel: ProductSearchPage): void {\n    if (this.appendProducts) {\n      this.model = {\n        ...inputModel,\n        products: this.model.products.concat(inputModel.products),\n      };\n    } else {\n      this.model = inputModel;\n      this.maxProducts = this.productLimit;\n    }\n    this.setConditions();\n    this.ref.markForCheck();\n  }\n\n  private resetListOnViewModeChange(): void {\n    this.scrollToTop();\n    this.resetList = true;\n    this.productListComponentService.getPageItems(0);\n  }\n\n  //Set booleans after model has been retrieved\n  private setConditions(): void {\n    this.isEmpty = !this.model.products || this.model.products.length === 0;\n\n    this.isLastPage =\n      this.model.pagination.currentPage ===\n      this.model.pagination.totalPages - 1;\n\n    this.isMaxProducts =\n      this.productLimit &&\n      this.productLimit !== 0 &&\n      this.model.products.length >= this.maxProducts;\n\n    //Add the productLimit to the current number of products to determine the next max number of products\n    if (this.isMaxProducts) {\n      this.maxProducts = this.model.products.length + this.productLimit;\n    }\n\n    //Only change viewMode once the new model is set\n    //This prevents flickering issues\n    if (this.viewMode !== this.inputViewMode) {\n      this.viewMode = this.inputViewMode;\n    }\n\n    this.resetList = false;\n    this.appendProducts = false;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Params } from '@angular/router';\nimport {\n  ActivatedRouterStateSnapshot,\n  Breadcrumb,\n  PageType,\n  ProductSearchPage,\n  RoutingService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map, pluck, switchMap } from 'rxjs/operators';\nimport { ProductListComponentService } from '../../container/product-list-component.service';\nimport { FacetList } from '../facet.model';\n\n/**\n * Provides access to all the facets and active facets for the Product Listing Page.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductFacetService {\n  protected readonly routeState$ = this.routing\n    .getRouterState()\n    .pipe(pluck('state'));\n\n  protected readonly searchResult$: Observable<\n    ProductSearchPage\n  > = this.routeState$.pipe(\n    switchMap((state) =>\n      this.productListComponentService.model$.pipe(\n        filter((page) => this.filterForPage(state, page)),\n        map((page) => this.mapResults(state, page))\n      )\n    )\n  );\n\n  constructor(\n    protected routing: RoutingService,\n    protected productListComponentService: ProductListComponentService\n  ) {}\n\n  /**\n   * Observes the facets and active facets for the given page. The facet data\n   * is provided in a `FacetList`.\n   */\n  readonly facetList$: Observable<FacetList> = this.searchResult$.pipe(\n    map(\n      (result: ProductSearchPage) =>\n        ({\n          facets: result.facets,\n          activeFacets: result.breadcrumbs,\n        } as FacetList)\n    )\n  );\n\n  /**\n   * Filters the current result by verifying if the result is related to the page.\n   * This is done to avoid a combination of the next page and the current search results.\n   */\n  protected filterForPage(\n    state: ActivatedRouterStateSnapshot,\n    page: ProductSearchPage\n  ): boolean {\n    if (state.context.type === PageType.CATEGORY_PAGE) {\n      return (\n        page.currentQuery?.query?.value?.indexOf(\n          `allCategories:${state.context.id}`\n        ) > -1\n      );\n    }\n\n    if (\n      state.context.type === PageType.CONTENT_PAGE &&\n      state.context.id === 'search'\n    ) {\n      return page.currentQuery.query.value.startsWith(`${state.params.query}:`);\n    }\n    return false;\n  }\n\n  private mapResults(\n    state: ActivatedRouterStateSnapshot,\n    page: ProductSearchPage\n  ): ProductSearchPage {\n    return {\n      ...page,\n      breadcrumbs: this.filterBreadcrumbs(page.breadcrumbs, state.params),\n    };\n  }\n\n  /**\n   * filter breadcrumbs which are not actively selected\n   * but coming from the route navigation\n   */\n  private filterBreadcrumbs(\n    breadcrumbs: Breadcrumb[],\n    params: Params\n  ): Breadcrumb[] {\n    return breadcrumbs\n      ? breadcrumbs.filter(\n          (breadcrumb) => !this.hasBreadcrumb(breadcrumb, params)\n        )\n      : [];\n  }\n\n  /**\n   * Indicates whether the breadcrumb is related to navigation parameters,\n   * since either the category or brand code should match those codes.\n   */\n  private hasBreadcrumb(breadcrumb: Breadcrumb, params: Params): boolean {\n    return (\n      breadcrumb.facetCode === 'allCategories' &&\n      (breadcrumb.facetValueCode === params.categoryCode ||\n        breadcrumb.facetValueCode === params.brandCode)\n    );\n  }\n}\n","import { HttpUrlEncodingCodec } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Facet } from '@spartacus/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport {\n  FacetCollapseState,\n  FacetGroupCollapsedState,\n  FacetList,\n} from '../facet.model';\nimport { ProductFacetService } from './product-facet.service';\n\n/**\n * Provides access to the facets as well as their UI state. The UI state\n * represents user related changes on the facets, such as expanding or\n * collapsing a facet group or expanding the number of _visible_ facet values.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class FacetService {\n  /**\n   * An internal map where we keep the UI state of the facets.\n   */\n  protected facetState = new Map<string, BehaviorSubject<FacetCollapseState>>();\n\n  constructor(protected productFacetService: ProductFacetService) {}\n\n  /**\n   * Observes the facets for the given page and configures the initial UI state.\n   *\n   * Facets are configured on each emission so that we keep the facet UI state.\n   * This is mainly done to keep the state during usage of the facet, but also\n   * benefitial when the facets are rebuild while using them.\n   */\n  facetList$: Observable<FacetList> = this.productFacetService.facetList$.pipe(\n    tap((facetList) => {\n      facetList.facets.forEach((facet) => this.initialize(facet));\n    })\n  );\n\n  /**\n   * Returns the observed UI state for the facet.\n   *\n   * The state is initialized using the `initialize` method.\n   */\n  getState(facet: Facet): Observable<FacetCollapseState> {\n    this.initialize(facet);\n    return this.facetState.get(facet.name);\n  }\n\n  /**\n   * Returns the UI state for the facet.\n   *\n   * The state is initialized using the `initialize` method.\n   */\n  protected getStateSnapshot(facet: Facet): FacetCollapseState {\n    return (this.getState(facet) as BehaviorSubject<FacetCollapseState>).value;\n  }\n\n  /**\n   * Toggles the facet expanded state. If the expanded state becomes false,\n   * the visible values will decrease to the top values only.\n   *\n   * If the optional value argument is provided the expanded state will be set\n   * to this value, regardless of the current `expanded` state.\n   */\n  toggle(facet: Facet, isExpanded: boolean): void {\n    const state = this.getStateSnapshot(facet);\n\n    const toggledState = {\n      toggled: isExpanded\n        ? FacetGroupCollapsedState.COLLAPSED\n        : FacetGroupCollapsedState.EXPANDED,\n    } as FacetCollapseState;\n\n    if (toggledState.toggled === FacetGroupCollapsedState.COLLAPSED) {\n      toggledState.maxVisible = state.topVisible;\n    }\n\n    this.updateState(facet, toggledState);\n  }\n\n  /**\n   * Increases the visible values to the maximum values of the facet.\n   */\n  increaseVisibleValues(facet: Facet): void {\n    this.updateState(facet, { maxVisible: facet.values.length });\n  }\n\n  /**\n   * Decreases the visible values to the topValueCount.\n   *\n   * The topValueCount defaults to 6, but can be controlled in\n   * the backend as well.\n   */\n  decreaseVisibleValues(facet: Facet): void {\n    this.updateState(facet, { maxVisible: facet.topValueCount });\n  }\n\n  /**\n   * Persists the facet state and initializes the default values for the top\n   * and max visible values.\n   */\n  protected initialize(facet: Facet): void {\n    const topFacets =\n      facet.topValueCount > 0 ? facet.topValueCount : facet.values?.length || 0;\n    if (!this.hasState(facet)) {\n      this.facetState.set(\n        facet.name,\n        new BehaviorSubject({\n          topVisible: topFacets,\n          maxVisible: topFacets,\n        } as FacetCollapseState)\n      );\n    }\n  }\n\n  /**\n   * Updates the state of the facet in the local facet map.\n   */\n  protected updateState(facet: Facet, property: FacetCollapseState): void {\n    const state = { ...this.getStateSnapshot(facet), ...property };\n    this.facetState.get(facet.name).next(state);\n  }\n\n  protected hasState(facet: Facet): boolean {\n    return this.facetState.has(facet.name);\n  }\n\n  getLinkParams(query: string): { [key: string]: string } {\n    return {\n      // to avoid encoding issues with facets that have space (' ') in their name,\n      // we replace the decoded '+' back to empty space ' '.\n      // For more, see https://github.com/SAP/spartacus/issues/7348\n      query: new HttpUrlEncodingCodec().decodeValue(query).replace(/\\+/g, ' '),\n    };\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport { Breadcrumb } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../../../../../cms-components/misc/icon/icon.model';\nimport { FacetList } from '../facet.model';\nimport { FacetService } from '../services/facet.service';\n\n/**\n * Active facets render the applied facet values as a list of focusable buttons\n * which can be used to remove the applied facet value.\n */\n@Component({\n  selector: 'cx-active-facets',\n  templateUrl: './active-facets.component.html',\n  changeDetection: ChangeDetectionStrategy.Default,\n})\nexport class ActiveFacetsComponent {\n  /** Active facets which are applied to the product results. */\n  facetList$: Observable<FacetList> = this.facetService.facetList$;\n\n  /** Configurable icon which is used for the active facet close button */\n  @Input() closeIcon = ICON_TYPE.CLOSE;\n\n  constructor(protected facetService: FacetService) {}\n\n  getLinkParams(facet: Breadcrumb) {\n    return this.facetService.getLinkParams(facet.removeQuery?.query?.value);\n  }\n\n  /**\n   * The focus key is used to persist the focus on the facet when the DOM is being\n   * recreated. We only apply the focus key for the given _active_ facet when there\n   * the original facets is not available. This happens for non multi-valued facets.\n   *\n   * With this approach, the we keep the focus, either at the facet list or on the\n   * active facets.\n   */\n  getFocusKey(facetList: FacetList, facet: Breadcrumb) {\n    return facetList.facets?.find((f) =>\n      f.values?.find((val) => val.name === facet.facetValueName)\n    )\n      ? ''\n      : facet.facetValueName;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../../../cms-components/misc/icon/icon.module';\nimport { KeyboardFocusModule } from '../../../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { ActiveFacetsComponent } from './active-facets.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    I18nModule,\n    IconModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [ActiveFacetsComponent],\n  exports: [ActiveFacetsComponent],\n})\nexport class ActiveFacetsModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  Output,\n  Renderer2,\n} from '@angular/core';\nimport { Facet } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { FocusConfig } from '../../../../../layout/a11y/keyboard-focus/index';\nimport { ICON_TYPE } from '../../../../misc/icon/icon.model';\nimport { FacetGroupCollapsedState, FacetList } from '../facet.model';\nimport { FacetComponent } from '../facet/facet.component';\nimport { FacetService } from '../services/facet.service';\n\n@Component({\n  selector: 'cx-facet-list',\n  templateUrl: './facet-list.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FacetListComponent {\n  private _isDialog: boolean;\n  /**\n   * Indicates that the facet navigation is rendered in dialog.\n   */\n  @Input()\n  set isDialog(value: boolean) {\n    this._isDialog = value;\n    if (value) {\n      this.renderer.addClass(document.body, 'modal-open');\n    }\n  }\n\n  get isDialog(): boolean {\n    return this._isDialog;\n  }\n\n  /** Emits when the list must close */\n  @Output() closeList = new EventEmitter();\n\n  /** The list of all facet and values related to the products in the list */\n  facetList$: Observable<FacetList> = this.facetService.facetList$;\n\n  iconTypes = ICON_TYPE;\n\n  dialogFocusConfig: FocusConfig = {\n    trap: true,\n    block: true,\n    focusOnEscape: true,\n    autofocus: 'cx-facet',\n  };\n\n  @HostListener('click') handleClick() {\n    this.close();\n  }\n\n  constructor(\n    protected facetService: FacetService,\n    protected elementRef: ElementRef,\n    protected renderer: Renderer2\n  ) {}\n\n  /**\n   * Toggles the facet group in case it is not expanded.\n   */\n  expandFacetGroup(facet: Facet, ref: FacetComponent) {\n    if (!ref.isExpanded) {\n      this.facetService.toggle(facet, ref.isExpanded);\n    }\n  }\n\n  /**\n   * Indicates that the facet group has been expanded.\n   */\n  isExpanded(facet: Facet): Observable<boolean> {\n    return this.facetService\n      .getState(facet)\n      .pipe(\n        map((value) => value.toggled === FacetGroupCollapsedState.EXPANDED)\n      );\n  }\n\n  /**\n   * Indicates that the facet group has been collapsed.\n   */\n  isCollapsed(facet: Facet): Observable<boolean> {\n    return this.facetService\n      .getState(facet)\n      .pipe(\n        map((value) => value.toggled === FacetGroupCollapsedState.COLLAPSED)\n      );\n  }\n\n  close(event?: boolean): void {\n    this.renderer.removeClass(document.body, 'modal-open');\n    this.closeList.emit(event);\n  }\n\n  block(event?: MouseEvent) {\n    event.stopPropagation();\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  Input,\n  QueryList,\n  ViewChild,\n  ViewChildren,\n} from '@angular/core';\nimport { Facet, FacetValue } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ICON_TYPE } from '../../../../../cms-components/misc/icon/icon.model';\nimport { FocusDirective } from '../../../../../layout/a11y/keyboard-focus/focus.directive';\nimport { FacetCollapseState } from '../facet.model';\nimport { FacetService } from '../services/facet.service';\n\n@Component({\n  selector: 'cx-facet',\n  templateUrl: './facet.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class FacetComponent {\n  protected _facet: Facet;\n\n  state$: Observable<FacetCollapseState>;\n\n  /** configurable icon that is used to collapse the facet group  */\n  @Input() expandIcon: ICON_TYPE = ICON_TYPE.EXPAND;\n  @Input() collapseIcon: ICON_TYPE = ICON_TYPE.COLLAPSE;\n\n  @HostBinding('class.multi-select') isMultiSelect: boolean;\n\n  @ViewChildren('facetValue') values: QueryList<ElementRef<HTMLElement>>;\n\n  @ViewChild(FocusDirective) keyboardFocus: FocusDirective;\n\n  @Input()\n  set facet(value: Facet) {\n    this._facet = value;\n    this.isMultiSelect = !!value.multiSelect;\n    this.state$ = this.facetService.getState(value);\n  }\n\n  get facet(): Facet {\n    return this._facet;\n  }\n\n  constructor(\n    protected facetService: FacetService,\n    protected elementRef: ElementRef<HTMLElement>,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  /**\n   * Handles clicking the heading of the facet group, which means toggling\n   * the visibility of the group (collapse / expand) and optionally focusing\n   * the group.\n   */\n  toggleGroup(event: UIEvent) {\n    const host: HTMLElement = this.elementRef.nativeElement;\n    const isLocked = this.keyboardFocus?.isLocked;\n\n    this.facetService.toggle(this.facet, this.isExpanded);\n\n    if (!isLocked || this.isExpanded) {\n      host.focus();\n      // we stop propagating the event as otherwise the focus on the host will trigger\n      // an unlock event from the LockFocus directive.\n      event.stopPropagation();\n    }\n  }\n\n  get isExpanded(): boolean {\n    return this.values.first.nativeElement.offsetParent !== null;\n  }\n\n  openLink(event: KeyboardEvent) {\n    (event.target as HTMLElement).click();\n    event.preventDefault();\n  }\n\n  /**\n   * Increases the number of visible values for the facet. This is delegated\n   * to `facetService.increaseVisibleValues`.\n   */\n  increaseVisibleValues(): void {\n    this.facetService.increaseVisibleValues(this.facet);\n  }\n\n  /**\n   * Decreases the number of visible values for the facet. This is delegated\n   * to `facetService.decreaseVisibleValues`.\n   */\n  decreaseVisibleValues(): void {\n    this.facetService.decreaseVisibleValues(this.facet);\n  }\n\n  getLinkParams(value: FacetValue) {\n    return this.facetService.getLinkParams(value.query?.query.value);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { I18nModule, UrlModule } from '@spartacus/core';\nimport { IconModule } from '../../../../../cms-components/misc/icon/index';\nimport { KeyboardFocusModule } from '../../../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { FacetComponent } from './facet.component';\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    IconModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [FacetComponent],\n  exports: [FacetComponent],\n})\nexport class FacetModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { I18nModule } from '@spartacus/core';\nimport { KeyboardFocusModule } from '../../../../../layout/a11y/keyboard-focus/keyboard-focus.module';\nimport { IconModule } from '../../../../misc/icon/icon.module';\nimport { FacetModule } from '../facet/facet.module';\nimport { FacetListComponent } from './facet-list.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    IconModule,\n    FacetModule,\n    KeyboardFocusModule,\n  ],\n  declarations: [FacetListComponent],\n  exports: [FacetListComponent],\n})\nexport class FacetListModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  ViewChild,\n} from '@angular/core';\nimport { asapScheduler, BehaviorSubject, interval, Observable, of } from 'rxjs';\nimport { delayWhen, observeOn, switchMap } from 'rxjs/operators';\nimport { ICON_TYPE } from '../../../../cms-components/misc/icon/icon.model';\nimport { BreakpointService } from '../../../../layout/breakpoint/breakpoint.service';\n\n@Component({\n  selector: 'cx-product-facet-navigation',\n  templateUrl: './product-facet-navigation.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductFacetNavigationComponent {\n  iconTypes = ICON_TYPE;\n\n  /**\n   * We delay the removal of DOM so that animations can finish playing before the\n   * DOM is removed. Removing the DOM, as hidding is not enough to stop elements\n   * to be focused.\n   */\n  protected CLOSE_DELAY = 300;\n\n  /**\n   * Used to open the facet navigation in a dialog. The usage of the dialog depends\n   * on the availability of the trigger element, which is driven by CSS.\n   *\n   * The reference is also used to refocus the trigger after the dialog is closed.\n   */\n  @ViewChild('trigger') trigger: ElementRef<HTMLElement>;\n\n  protected open$ = new BehaviorSubject(false);\n\n  /**\n   * Emits the open state that indicates whether the facet list should be rendered.\n   * This is either done instantly, or after the user triggers this by using the trigger\n   * button. This driven by the visiibility of the trigger, so that the CSS drives\n   * the behaviour. This can differ per breakpoint.\n   *\n   * There's a configurable delay for the closed state, so that the DOM is not removed\n   * before some CSS animations are done.\n   */\n  isOpen$: Observable<boolean> = this.breakpointService.breakpoint$.pipe(\n    // deffer emitting a new value to the next micro-task to ensure that the `hasTrigger`\n    // method represents the actual UI state.\n    observeOn(asapScheduler),\n    switchMap(() => (this.hasTrigger ? this.open$ : of(true))),\n    delayWhen((launched) => interval(launched ? 0 : this.CLOSE_DELAY))\n  );\n\n  /**\n   * Emits the active state that indicates whether the facet list is activated. Activation\n   * is related to the css, so that a animation or transition can visualize opening/closing\n   * the list (i.e. dialog).\n   */\n  isActive$ = this.open$.pipe(\n    // deffer emitting a new value to the next micro-task to ensure the active class is\n    //  applied after the DOM is created\n    observeOn(asapScheduler)\n  );\n\n  constructor(protected breakpointService: BreakpointService) {}\n\n  launch() {\n    this.open$.next(true);\n  }\n\n  close() {\n    this.open$.next(false);\n    this.trigger.nativeElement.focus();\n  }\n\n  /**\n   * Indicates that the facet navigation should be open explicitely by a trigger.\n   * This is fully controlled by CSS, where the trigger button can be hidden\n   * (display:none) for certain screen sizes.\n   */\n  get hasTrigger() {\n    return this.trigger.nativeElement.offsetParent !== null;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, ConfigModule, I18nModule } from '@spartacus/core';\nimport { IconModule } from '../../../misc/icon/icon.module';\nimport { ActiveFacetsModule } from './active-facets/active-facets.module';\nimport { FacetListModule } from './facet-list/facet-list.module';\nimport { ProductFacetNavigationComponent } from './product-facet-navigation.component';\n@NgModule({\n  imports: [\n    CommonModule,\n    FacetListModule,\n    ActiveFacetsModule,\n    IconModule,\n    I18nModule,\n    ConfigModule.withConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductRefinementComponent: {\n          component: ProductFacetNavigationComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductFacetNavigationComponent],\n  exports: [ProductFacetNavigationComponent],\n})\nexport class ProductFacetNavigationModule {}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'cx-product-grid-item',\n  templateUrl: './product-grid-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductGridItemComponent {\n  @Input() product: any;\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'cx-product-list-item',\n  templateUrl: './product-list-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductListItemComponent {\n  @Input() product: any;\n}\n","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\nimport { Product, BaseOption, VariantType } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CurrentProductService } from '../current-product.service';\nimport { tap, filter, distinctUntilChanged } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-product-variants',\n  templateUrl: './product-variants.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductVariantsComponent implements OnInit {\n  constructor(private currentProductService: CurrentProductService) {}\n\n  variants: BaseOption[] = [];\n  variantType = VariantType;\n  product$: Observable<Product>;\n\n  ngOnInit(): void {\n    this.product$ = this.currentProductService.getProduct().pipe(\n      filter((product) => !!(product && product.baseOptions)),\n      distinctUntilChanged(),\n      tap((product) => {\n        product.baseOptions.forEach((option) => {\n          if (option && option.variantType) {\n            this.variants[option.variantType] = option;\n          }\n        });\n      })\n    );\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport {\n  OccConfig,\n  BaseOption,\n  VariantQualifier,\n  VariantOptionQualifier,\n  Product,\n  ProductService,\n  ProductScope,\n  RoutingService,\n} from '@spartacus/core';\nimport { filter, take } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-variant-style-selector',\n  templateUrl: './variant-style-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class VariantStyleSelectorComponent {\n  constructor(\n    private config: OccConfig,\n    private productService: ProductService,\n    private routingService: RoutingService\n  ) {}\n\n  variantQualifier = VariantQualifier;\n\n  @Input()\n  variants: BaseOption;\n\n  getVariantOptionValue(qualifiers: VariantOptionQualifier[]) {\n    const obj = qualifiers.find((q) => q.qualifier === VariantQualifier.STYLE);\n    return obj ? obj.value : '';\n  }\n\n  getVariantThumbnailUrl(\n    variantOptionQualifiers: VariantOptionQualifier[]\n  ): string {\n    const qualifier = variantOptionQualifiers.find((item) => item.image);\n    return qualifier\n      ? `${this.config.backend.occ.baseUrl}${qualifier.image.url}`\n      : '';\n  }\n\n  changeStyle(code: string): void {\n    if (code) {\n      this.productService\n        .get(code, ProductScope.LIST)\n        .pipe(\n          // below call might looks redundant but in fact this data is going to be loaded anyways\n          // we're just calling it earlier and storing\n          filter(Boolean),\n          take(1)\n        )\n        .subscribe((product: Product) => {\n          this.routingService.go({\n            cxRoute: 'product',\n            params: product,\n          });\n        });\n    }\n    return null;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { UrlModule, I18nModule } from '@spartacus/core';\nimport { VariantStyleSelectorComponent } from './variant-style-selector.component';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n  declarations: [VariantStyleSelectorComponent],\n  entryComponents: [VariantStyleSelectorComponent],\n  exports: [VariantStyleSelectorComponent],\n})\nexport class VariantStyleSelectorModule {}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport {\n  Product,\n  RoutingService,\n  BaseOption,\n  VariantQualifier,\n  VariantOptionQualifier,\n  ProductService,\n  ProductScope,\n} from '@spartacus/core';\nimport { filter, take } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-variant-size-selector',\n  templateUrl: './variant-size-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class VariantSizeSelectorComponent {\n  constructor(\n    private productService: ProductService,\n    private routingService: RoutingService\n  ) {}\n\n  @Input()\n  product: Product;\n\n  @Input()\n  variants: BaseOption;\n\n  changeSize(code: string): void {\n    if (code) {\n      this.productService\n        .get(code, ProductScope.LIST)\n        .pipe(\n          // below call might looks redundant but in fact this data is going to be loaded anyways\n          // we're just calling it earlier and storing\n          filter(Boolean),\n          take(1)\n        )\n        .subscribe((product: Product) => {\n          this.routingService.go({\n            cxRoute: 'product',\n            params: product,\n          });\n        });\n    }\n    return null;\n  }\n  getVariantOptionValue(qualifiers: VariantOptionQualifier[]) {\n    const obj = qualifiers.find((q) => q.qualifier === VariantQualifier.SIZE);\n    return obj ? obj.value : '';\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { UrlModule, I18nModule } from '@spartacus/core';\nimport { VariantSizeSelectorComponent } from './variant-size-selector.component';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n  declarations: [VariantSizeSelectorComponent],\n  entryComponents: [VariantSizeSelectorComponent],\n  exports: [VariantSizeSelectorComponent],\n})\nexport class VariantSizeSelectorModule {}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\nimport {\n  BaseOption,\n  Product,\n  RoutingService,\n  VariantOptionQualifier,\n  VariantQualifier,\n} from '@spartacus/core';\n\n@Component({\n  selector: 'cx-variant-color-selector',\n  templateUrl: './variant-color-selector.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class VariantColorSelectorComponent {\n  constructor(private routingService: RoutingService) {}\n\n  @Input()\n  product: Product;\n\n  @Input()\n  variants: BaseOption;\n\n  changeColor(code: string, name: string): void {\n    if (code) {\n      this.routingService.go({\n        cxRoute: 'product',\n        params: { code, name },\n      });\n    }\n    return null;\n  }\n  getVariantOptionValue(qualifiers: VariantOptionQualifier[]) {\n    const obj = qualifiers.find((q) => q.qualifier === VariantQualifier.COLOR);\n    return obj ? obj.value : '';\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { UrlModule, I18nModule } from '@spartacus/core';\nimport { VariantColorSelectorComponent } from './variant-color-selector.component';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n  declarations: [VariantColorSelectorComponent],\n  entryComponents: [VariantColorSelectorComponent],\n  exports: [VariantColorSelectorComponent],\n})\nexport class VariantColorSelectorModule {}\n","import {\n  Component,\n  Input,\n  OnInit,\n  ChangeDetectionStrategy,\n} from '@angular/core';\n\nimport {\n  OccConfig,\n  VariantOption,\n  VariantOptionQualifier,\n  VariantQualifier,\n} from '@spartacus/core';\n\n@Component({\n  selector: 'cx-variant-style-icons',\n  templateUrl: './variant-style-icons.component.html',\n  styleUrls: ['./variant-style-icons.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class VariantStyleIconsComponent implements OnInit {\n  constructor(private config: OccConfig) {}\n\n  @Input()\n  variants: VariantOption[];\n\n  variantNames: { [key: string]: string } = {};\n\n  ngOnInit() {\n    this.variants.forEach((variant) => {\n      this.variantNames[variant.code] = this.getVariantName(\n        variant.variantOptionQualifiers\n      );\n    });\n  }\n\n  getVariantThumbnailUrl(\n    variantOptionQualifiers: VariantOptionQualifier[]\n  ): string {\n    const thumbnail = variantOptionQualifiers.find(\n      (item) => item.qualifier === VariantQualifier.THUMBNAIL\n    );\n    return thumbnail\n      ? `${this.config.backend.occ.baseUrl}${thumbnail.image.url}`\n      : '';\n  }\n\n  private getVariantName(\n    variantOptionQualifiers: VariantOptionQualifier[]\n  ): string {\n    const rollupProperty = variantOptionQualifiers.find(\n      (item) => item.qualifier === VariantQualifier.ROLLUP_PROPERTY\n    );\n    const property = rollupProperty\n      ? variantOptionQualifiers.find(\n          (item) => item.qualifier === rollupProperty.value\n        )\n      : null;\n    return property ? property.value : '';\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { UrlModule, I18nModule } from '@spartacus/core';\nimport { VariantStyleIconsComponent } from './variant-style-icons.component';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n  declarations: [VariantStyleIconsComponent],\n  entryComponents: [VariantStyleIconsComponent],\n  exports: [VariantStyleIconsComponent],\n})\nexport class VariantStyleIconsModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  Router,\n  UrlTree,\n} from '@angular/router';\nimport {\n  Product,\n  ProductScope,\n  ProductService,\n  SemanticPathService,\n  VariantOption,\n} from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { filter, map, switchMap, take } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductVariantGuard implements CanActivate {\n  constructor(\n    protected productService: ProductService,\n    protected semanticPathService: SemanticPathService,\n    protected router: Router\n  ) {}\n\n  canActivate(\n    activatedRoute: ActivatedRouteSnapshot\n  ): Observable<boolean | UrlTree> {\n    const productCode = activatedRoute.params?.productCode;\n    if (!productCode) {\n      return of(true);\n    }\n\n    return this.productService.get(productCode, ProductScope.VARIANTS).pipe(\n      filter(Boolean),\n      switchMap((product: Product) => {\n        if (!product.purchasable) {\n          const variant = this.findVariant(product.variantOptions);\n          // below call might looks redundant but in fact this data is going to be loaded anyways\n          // we're just calling it earlier and storing\n          return this.productService.get(variant.code, ProductScope.LIST).pipe(\n            filter(Boolean),\n            take(1),\n            map((_product: Product) => {\n              return this.router.createUrlTree(\n                this.semanticPathService.transform({\n                  cxRoute: 'product',\n                  params: _product,\n                })\n              );\n            })\n          );\n        } else {\n          return of(true);\n        }\n      })\n    );\n  }\n\n  findVariant(variants: VariantOption[]): VariantOption {\n    const results: VariantOption[] = variants.filter((variant) => {\n      return variant.stock && variant.stock.stockLevel ? variant : false;\n    });\n    return !results.length && variants.length ? variants[0] : results[0];\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { ProductVariantsComponent } from './product-variants.component';\nimport { RouterModule } from '@angular/router';\nimport { VariantStyleSelectorModule } from './variant-style-selector/variant-style-selector.module';\nimport { VariantSizeSelectorModule } from './variant-size-selector/variant-size-selector.module';\nimport { VariantColorSelectorModule } from './variant-color-selector/variant-color-selector.module';\nimport { VariantStyleIconsModule } from './variant-style-icons/variant-style-icons.module';\nimport { ProductVariantGuard } from './guards/product-variant.guard';\nimport { VariantStyleIconsComponent } from './variant-style-icons/variant-style-icons.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    VariantStyleSelectorModule,\n    VariantSizeSelectorModule,\n    VariantColorSelectorModule,\n    VariantStyleIconsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductVariantSelectorComponent: {\n          component: ProductVariantsComponent,\n          guards: [ProductVariantGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [ProductVariantsComponent],\n  entryComponents: [ProductVariantsComponent],\n  exports: [VariantStyleIconsComponent],\n})\nexport class ProductVariantsModule {}\n","export enum ProductDetailOutlets {\n  INTRO = 'PDP.INTRO',\n  PRICE = 'PDP.PRICE',\n  SHARE = 'PDP.SHARE',\n  SUMMARY = 'PDP.SUMMARY',\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  FeaturesConfigModule,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport { ViewConfig } from '../../../shared/config/view-config';\nimport { ViewConfigModule } from '../../../shared/config/view-config.module';\nimport {\n  ItemCounterModule,\n  ListNavigationModule,\n  MediaModule,\n  SpinnerModule,\n  StarRatingModule,\n} from '../../../shared/index';\nimport { AddToCartModule } from '../../cart/index';\nimport { IconModule } from '../../misc/icon/index';\nimport { defaultScrollConfig } from '../config/default-scroll-config';\nimport { ProductVariantsModule } from '../product-variants/product-variants.module';\nimport { ProductListComponent } from './container/product-list.component';\nimport { ProductScrollComponent } from './container/product-scroll/product-scroll.component';\nimport { ProductFacetNavigationComponent } from './product-facet-navigation/product-facet-navigation.component';\nimport { ProductGridItemComponent } from './product-grid-item/product-grid-item.component';\nimport { ProductListItemComponent } from './product-list-item/product-list-item.component';\nimport { ProductViewComponent } from './product-view/product-view.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    MediaModule,\n    AddToCartModule,\n    ItemCounterModule,\n    ListNavigationModule,\n    UrlModule,\n    I18nModule,\n    StarRatingModule,\n    IconModule,\n    SpinnerModule,\n    InfiniteScrollModule,\n    ViewConfigModule,\n    ProductVariantsModule,\n    FeaturesConfigModule,\n  ],\n  providers: [\n    provideDefaultConfig(<ViewConfig>defaultScrollConfig),\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        CMSProductListComponent: {\n          component: ProductListComponent,\n        },\n        ProductGridComponent: {\n          component: ProductListComponent,\n        },\n        SearchResultsListComponent: {\n          component: ProductListComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [\n    ProductListComponent,\n    ProductListItemComponent,\n    ProductGridItemComponent,\n    ProductViewComponent,\n    ProductScrollComponent,\n  ],\n  exports: [\n    ProductListComponent,\n    ProductListItemComponent,\n    ProductGridItemComponent,\n    ProductViewComponent,\n    ProductScrollComponent,\n  ],\n  entryComponents: [ProductListComponent, ProductFacetNavigationComponent],\n})\nexport class ProductListModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CurrentProductService } from '../current-product.service';\nimport { ProductDetailOutlets } from '../product-outlets.model';\n\n@Component({\n  selector: 'cx-product-summary',\n  templateUrl: './product-summary.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductSummaryComponent {\n  outlets = ProductDetailOutlets;\n\n  product$: Observable<Product> = this.currentProductService.getProduct();\n\n  constructor(protected currentProductService: CurrentProductService) {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { OutletModule } from '../../../cms-structure/outlet/outlet.module';\nimport { ProductSummaryComponent } from './product-summary.component';\n\n@NgModule({\n  imports: [CommonModule, OutletModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductSummaryComponent: {\n          component: ProductSummaryComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductSummaryComponent],\n  entryComponents: [ProductSummaryComponent],\n  exports: [ProductSummaryComponent],\n})\nexport class ProductSummaryModule {}\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\nimport { Product, ProductScope } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CurrentProductService } from '../../current-product.service';\n\n@Component({\n  selector: 'cx-product-attributes',\n  templateUrl: './product-attributes.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductAttributesComponent {\n  product$: Observable<Product> = this.currentProductService.getProduct(\n    ProductScope.ATTRIBUTES\n  );\n\n  constructor(protected currentProductService: CurrentProductService) {}\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { ProductAttributesComponent } from './product-attributes.component';\n\n@NgModule({\n  imports: [CommonModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductSpecsTabComponent: {\n          component: ProductAttributesComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductAttributesComponent],\n  entryComponents: [ProductAttributesComponent],\n  exports: [ProductAttributesComponent],\n})\nexport class ProductAttributesModule {}\n","import { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { Product } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { CurrentProductService } from '../../current-product.service';\n\n@Component({\n  selector: 'cx-product-details-tab',\n  templateUrl: './product-details-tab.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductDetailsTabComponent implements OnInit {\n  product$: Observable<Product>;\n\n  constructor(protected currentProductService: CurrentProductService) {}\n\n  ngOnInit() {\n    this.product$ = this.currentProductService.getProduct();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CmsConfig, provideDefaultConfig } from '@spartacus/core';\nimport { ProductDetailsTabComponent } from './product-details-tab.component';\n\n@NgModule({\n  imports: [CommonModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductDetailsTabComponent: {\n          component: ProductDetailsTabComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductDetailsTabComponent],\n  entryComponents: [ProductDetailsTabComponent],\n  exports: [ProductDetailsTabComponent],\n})\nexport class ProductDetailsTabModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  ViewChild,\n  ElementRef,\n  ChangeDetectorRef,\n} from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Product, ProductReviewService, Review } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  switchMap,\n  tap,\n} from 'rxjs/operators';\nimport { CurrentProductService } from '../../current-product.service';\nimport { CustomFormValidators } from '../../../../shared/index';\n\n@Component({\n  selector: 'cx-product-reviews',\n  templateUrl: './product-reviews.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ProductReviewsComponent {\n  @ViewChild('titleInput', { static: false }) titleInput: ElementRef;\n  @ViewChild('writeReviewButton', { static: false })\n  writeReviewButton: ElementRef;\n\n  isWritingReview = false;\n\n  // TODO: configurable\n  initialMaxListItems = 5;\n  maxListItems: number;\n  reviewForm: FormGroup;\n\n  product$: Observable<Product> = this.currentProductService.getProduct();\n\n  reviews$: Observable<Review[]> = this.product$.pipe(\n    filter((p) => !!p),\n    map((p) => p.code),\n    distinctUntilChanged(),\n    switchMap((productCode) =>\n      this.reviewService.getByProductCode(productCode)\n    ),\n    tap(() => {\n      this.resetReviewForm();\n      this.maxListItems = this.initialMaxListItems;\n    })\n  );\n\n  constructor(\n    protected reviewService: ProductReviewService,\n    protected currentProductService: CurrentProductService,\n    private fb: FormBuilder,\n    protected cd: ChangeDetectorRef\n  ) {}\n\n  initiateWriteReview(): void {\n    this.isWritingReview = true;\n\n    this.cd.detectChanges();\n\n    if (this.titleInput && this.titleInput.nativeElement) {\n      this.titleInput.nativeElement.focus();\n    }\n  }\n\n  cancelWriteReview(): void {\n    this.isWritingReview = false;\n    this.resetReviewForm();\n\n    this.cd.detectChanges();\n\n    if (this.writeReviewButton && this.writeReviewButton.nativeElement) {\n      this.writeReviewButton.nativeElement.focus();\n    }\n  }\n\n  setRating(rating: number): void {\n    this.reviewForm.controls.rating.setValue(rating);\n  }\n\n  submitReview(product: Product) {\n    if (this.reviewForm.valid) {\n      this.addReview(product);\n    } else {\n      this.reviewForm.markAllAsTouched();\n    }\n  }\n\n  addReview(product: Product): void {\n    const reviewFormControls = this.reviewForm.controls;\n    const review: Review = {\n      headline: reviewFormControls.title.value,\n      comment: reviewFormControls.comment.value,\n      rating: reviewFormControls.rating.value,\n      alias: reviewFormControls.reviewerName.value,\n    };\n\n    this.reviewService.add(product.code, review);\n\n    this.isWritingReview = false;\n    this.resetReviewForm();\n\n    this.cd.detectChanges();\n\n    if (this.writeReviewButton && this.writeReviewButton.nativeElement) {\n      this.writeReviewButton.nativeElement.focus();\n    }\n  }\n\n  private resetReviewForm(): void {\n    this.reviewForm = this.fb.group({\n      title: ['', Validators.required],\n      comment: ['', Validators.required],\n      rating: [null, CustomFormValidators.starRatingEmpty],\n      reviewerName: '',\n    });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { ProductReviewsComponent } from './product-reviews.component';\nimport { StarRatingModule, FormErrorsModule } from '../../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    I18nModule,\n    StarRatingModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ProductReviewsTabComponent: {\n          component: ProductReviewsComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [ProductReviewsComponent],\n  entryComponents: [ProductReviewsComponent],\n  exports: [ProductReviewsComponent],\n})\nexport class ProductReviewsModule {}\n","import { NgModule } from '@angular/core';\nimport { ProductAttributesModule } from './product-attributes/product-attributes.module';\nimport { ProductDetailsTabModule } from './product-details-tab/product-details-tab.module';\nimport { ProductReviewsModule } from './product-reviews/product-reviews.module';\n\n@NgModule({\n  imports: [\n    ProductAttributesModule,\n    ProductDetailsTabModule,\n    ProductReviewsModule,\n  ],\n})\nexport class ProductTabsModule {}\n","import { Component, OnDestroy } from '@angular/core';\nimport { NotificationPreference, UserInterestsService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { ModalService } from '../../../../shared/components/modal/modal.service';\n\n@Component({\n  selector: 'cx-stock-notification-dialog',\n  templateUrl: './stock-notification-dialog.component.html',\n})\nexport class StockNotificationDialogComponent implements OnDestroy {\n  subscribeSuccess$: Observable<boolean>;\n  enabledPrefs: NotificationPreference[] = [];\n\n  constructor(\n    private modalService: ModalService,\n    private interestsService: UserInterestsService\n  ) {}\n\n  close() {\n    this.modalService.dismissActiveModal();\n  }\n\n  ngOnDestroy(): void {\n    if (this.subscribeSuccess$) {\n      this.subscribeSuccess$\n        .subscribe((success) => {\n          if (success) {\n            this.interestsService.resetAddInterestState();\n          }\n        })\n        .unsubscribe();\n    }\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  GlobalMessageService,\n  GlobalMessageType,\n  NotificationPreference,\n  NotificationType,\n  OCC_USER_ID_ANONYMOUS,\n  Product,\n  TranslationService,\n  UserIdService,\n  UserInterestsService,\n  UserNotificationPreferenceService,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { filter, first, map, tap } from 'rxjs/operators';\nimport { ModalService } from '../../../shared/components/modal/modal.service';\nimport { CurrentProductService } from '../current-product.service';\nimport { StockNotificationDialogComponent } from './stock-notification-dialog/stock-notification-dialog.component';\n\n@Component({\n  selector: 'cx-stock-notification',\n  templateUrl: './stock-notification.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class StockNotificationComponent implements OnInit, OnDestroy {\n  hasProductInterests$: Observable<boolean>;\n  prefsEnabled$: Observable<boolean>;\n  outOfStock$: Observable<boolean>;\n  isRemoveInterestLoading$: Observable<boolean>;\n  anonymous = true;\n\n  private enabledPrefs: NotificationPreference[] = [];\n  private productCode: string;\n  private subscribeSuccess$: Observable<boolean>;\n  private subscriptions = new Subscription();\n\n  constructor(\n    private currentProductService: CurrentProductService,\n    private globalMessageService: GlobalMessageService,\n    private translationService: TranslationService,\n    private interestsService: UserInterestsService,\n    private modalService: ModalService,\n    private notificationPrefService: UserNotificationPreferenceService,\n    private userIdService: UserIdService\n  ) {}\n\n  ngOnInit() {\n    this.outOfStock$ = combineLatest([\n      this.currentProductService.getProduct().pipe(filter(Boolean)),\n      this.userIdService.getUserId(),\n    ]).pipe(\n      tap(([product, userId]: [Product, String]) => {\n        this.productCode = product.code;\n        if (userId !== OCC_USER_ID_ANONYMOUS) {\n          this.anonymous = false;\n          this.notificationPrefService.loadPreferences();\n          this.interestsService.loadProductInterests(\n            null,\n            null,\n            null,\n            product.code,\n            NotificationType.BACK_IN_STOCK\n          );\n        }\n      }),\n      map(\n        ([product]: [Product, String]) =>\n          !!product.stock && product.stock.stockLevelStatus === 'outOfStock'\n      )\n    );\n\n    this.hasProductInterests$ = this.interestsService\n      .getProductInterests()\n      .pipe(\n        map(\n          (interests) => !!interests.results && interests.results.length === 1\n        )\n      );\n    this.subscribeSuccess$ = this.interestsService.getAddProductInterestSuccess();\n    this.isRemoveInterestLoading$ = this.interestsService.getRemoveProdutInterestLoading();\n    this.prefsEnabled$ = this.notificationPrefService\n      .getEnabledPreferences()\n      .pipe(\n        tap((prefs) => (this.enabledPrefs = prefs)),\n        map((prefs) => prefs.length > 0)\n      );\n\n    this.subscriptions.add(\n      this.interestsService.getAddProductInterestError().subscribe((error) => {\n        if (error) {\n          this.onInterestAddingError();\n        }\n      })\n    );\n    this.subscriptions.add(\n      this.interestsService\n        .getRemoveProdutInterestSuccess()\n        .subscribe((success) => {\n          if (success) {\n            this.onInterestRemovingSuccess();\n          }\n        })\n    );\n  }\n\n  subscribe() {\n    this.openDialog();\n    this.interestsService.addProductInterest(\n      this.productCode,\n      NotificationType.BACK_IN_STOCK\n    );\n  }\n\n  unsubscribe() {\n    this.interestsService.removeProdutInterest(\n      {\n        product: {\n          code: this.productCode,\n        },\n        productInterestEntry: [\n          {\n            interestType: NotificationType.BACK_IN_STOCK,\n          },\n        ],\n      },\n      true\n    );\n  }\n\n  private onInterestRemovingSuccess() {\n    this.subscriptions.add(\n      this.translationService\n        .translate('stockNotification.unsubscribeSuccess')\n        .pipe(first())\n        .subscribe((text) =>\n          this.globalMessageService.add(text, GlobalMessageType.MSG_TYPE_INFO)\n        )\n    );\n    this.interestsService.resetRemoveInterestState();\n  }\n\n  private onInterestAddingError() {\n    this.modalService.dismissActiveModal();\n    this.interestsService.resetAddInterestState();\n  }\n\n  private openDialog() {\n    const modalInstance = this.modalService.open(\n      StockNotificationDialogComponent,\n      {\n        centered: true,\n        size: 'lg',\n      }\n    ).componentInstance;\n    modalInstance.subscribeSuccess$ = this.subscribeSuccess$;\n    modalInstance.enabledPrefs = this.enabledPrefs;\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    this.interestsService.clearProductInterests();\n    this.notificationPrefService.clearPreferences();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { StockNotificationComponent } from './stock-notification.component';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { StockNotificationDialogComponent } from './stock-notification-dialog/stock-notification-dialog.component';\nimport { SpinnerModule } from '../../../shared/components/spinner/spinner.module';\nimport { RouterModule } from '@angular/router';\n\n@NgModule({\n  declarations: [StockNotificationComponent, StockNotificationDialogComponent],\n  imports: [CommonModule, RouterModule, I18nModule, SpinnerModule, UrlModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        StockNotificationComponent: {\n          component: StockNotificationComponent,\n        },\n      },\n    }),\n  ],\n  entryComponents: [\n    StockNotificationComponent,\n    StockNotificationDialogComponent,\n  ],\n  exports: [StockNotificationComponent, StockNotificationDialogComponent],\n})\nexport class StockNotificationModule {}\n","import { Component, OnDestroy } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActiveCartService, AuthRedirectService } from '@spartacus/core';\nimport { Subscription } from 'rxjs';\nimport { CustomFormValidators } from '../../../shared/utils/validators/custom-form-validators';\n\n@Component({\n  selector: 'cx-checkout-login',\n  templateUrl: './checkout-login.component.html',\n})\nexport class CheckoutLoginComponent implements OnDestroy {\n  checkoutLoginForm: FormGroup = this.formBuilder.group(\n    {\n      email: ['', [Validators.required, CustomFormValidators.emailValidator]],\n      emailConfirmation: ['', [Validators.required]],\n    },\n    {\n      validators: CustomFormValidators.emailsMustMatch(\n        'email',\n        'emailConfirmation'\n      ),\n    }\n  );\n  sub: Subscription;\n\n  constructor(\n    protected formBuilder: FormBuilder,\n    protected authRedirectService: AuthRedirectService,\n    protected activeCartService: ActiveCartService\n  ) {}\n\n  onSubmit() {\n    if (this.checkoutLoginForm.valid) {\n      const email = this.checkoutLoginForm.get('email').value;\n      this.activeCartService.addEmail(email);\n\n      if (!this.sub) {\n        this.sub = this.activeCartService.getAssignedUser().subscribe(() => {\n          if (this.activeCartService.isGuestCart()) {\n            this.authRedirectService.redirect();\n          }\n        });\n      }\n    } else {\n      this.checkoutLoginForm.markAllAsTouched();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CmsConfig, I18nModule, provideDefaultConfig } from '@spartacus/core';\nimport { CheckoutLoginComponent } from './checkout-login.component';\nimport { NotCheckoutAuthGuard } from '../../checkout/guards/not-checkout-auth.guard';\nimport { FormErrorsModule } from '../../../shared/index';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    I18nModule,\n    FormsModule,\n    ReactiveFormsModule,\n    FormsModule,\n    ReactiveFormsModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        GuestCheckoutLoginComponent: {\n          component: CheckoutLoginComponent,\n          guards: [NotCheckoutAuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [CheckoutLoginComponent],\n  exports: [CheckoutLoginComponent],\n  entryComponents: [CheckoutLoginComponent],\n})\nexport class CheckoutLoginModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  AuthService,\n  GlobalMessageService,\n  GlobalMessageType,\n  WindowRef,\n} from '@spartacus/core';\nimport { from } from 'rxjs';\nimport { tap, withLatestFrom } from 'rxjs/operators';\nimport { CustomFormValidators } from '../../../shared/index';\n\n@Component({\n  selector: 'cx-login-form',\n  templateUrl: './login-form.component.html',\n})\nexport class LoginFormComponent implements OnInit {\n  loginForm: FormGroup;\n\n  constructor(\n    protected auth: AuthService,\n    protected globalMessageService: GlobalMessageService,\n    protected fb: FormBuilder,\n    protected winRef: WindowRef\n  ) {}\n\n  ngOnInit(): void {\n    const routeState = this.winRef.nativeWindow?.history?.state;\n    const prefilledEmail = routeState?.['newUid'];\n\n    this.loginForm = this.fb.group({\n      userId: [\n        prefilledEmail?.length ? prefilledEmail : '',\n        [Validators.required, CustomFormValidators.emailValidator],\n      ],\n      password: ['', Validators.required],\n    });\n  }\n\n  submitForm(): void {\n    if (this.loginForm.valid) {\n      this.loginUser();\n    } else {\n      this.loginForm.markAllAsTouched();\n    }\n  }\n\n  protected loginUser(): void {\n    const { userId, password } = this.loginForm.controls;\n    from(\n      this.auth.loginWithCredentials(\n        userId.value.toLowerCase(), // backend accepts lowercase emails only\n        password.value\n      )\n    )\n      .pipe(\n        withLatestFrom(this.auth.isUserLoggedIn()),\n        tap(([_, isLoggedIn]) => {\n          if (isLoggedIn) {\n            // We want to remove error messages on successful login (primary the bad username/password combination)\n            this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n          }\n        })\n      )\n      .subscribe();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  NotAuthGuard,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { FormErrorsModule } from '../../../shared/index';\nimport { LoginFormComponent } from './login-form.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturningCustomerLoginComponent: {\n          component: LoginFormComponent,\n          guards: [NotAuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [LoginFormComponent],\n  exports: [LoginFormComponent],\n  entryComponents: [LoginFormComponent],\n})\nexport class LoginFormModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CheckoutConfigService } from '../../checkout/services/index';\n\n@Component({\n  selector: 'cx-login-register',\n  templateUrl: './login-register.component.html',\n})\nexport class LoginRegisterComponent implements OnInit {\n  loginAsGuest = false;\n\n  constructor(\n    protected checkoutConfigService: CheckoutConfigService,\n    protected activatedRoute: ActivatedRoute\n  ) {}\n\n  ngOnInit(): void {\n    if (this.checkoutConfigService.isGuestCheckout()) {\n      this.loginAsGuest = this.activatedRoute?.snapshot?.queryParams?.[\n        'forced'\n      ];\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CheckoutModule,\n  CmsConfig,\n  I18nModule,\n  NotAuthGuard,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { PageSlotModule } from '../../../cms-structure/page/slot/page-slot.module';\nimport { LoginRegisterComponent } from './login-register.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule,\n    UrlModule,\n    PageSlotModule,\n    I18nModule,\n    CheckoutModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        ReturningCustomerRegisterComponent: {\n          component: LoginRegisterComponent,\n          guards: [NotAuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [LoginRegisterComponent],\n  entryComponents: [LoginRegisterComponent],\n  exports: [LoginRegisterComponent],\n})\nexport class LoginRegisterModule {}\n","import { Injectable } from '@angular/core';\nimport {\n  ActivatedRouteSnapshot,\n  CanActivate,\n  RouterStateSnapshot,\n  UrlTree,\n} from '@angular/router';\nimport {\n  AuthConfigService,\n  AuthRedirectService,\n  AuthService,\n  OAuthFlow,\n} from '@spartacus/core';\nimport { EMPTY, Observable, of } from 'rxjs';\nimport { switchMap, take } from 'rxjs/operators';\nimport { CmsPageGuard } from '../../../cms-structure/guards/cms-page.guard';\n\n/**\n * Guards the _login_ route.\n *\n * Takes care of routing the user to a auth server login page (if implicit or code flow is used).\n * In case of Resource Owner Password Flow just renders the page as normal CMS page.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LoginGuard implements CanActivate {\n  constructor(\n    protected authService: AuthService,\n    protected authRedirectService: AuthRedirectService,\n    protected authConfigService: AuthConfigService,\n    protected cmsPageGuard: CmsPageGuard\n  ) {}\n\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot\n  ): Observable<boolean | UrlTree> {\n    return this.authService.isUserLoggedIn().pipe(\n      take(1),\n      switchMap((isUserLoggedIn) => {\n        if (\n          this.authConfigService.getOAuthFlow() ===\n            OAuthFlow.ResourceOwnerPasswordFlow ||\n          isUserLoggedIn\n        ) {\n          return this.cmsPageGuard.canActivate(route, state);\n        } else {\n          // Remember the previous url, so we can redirect user to that page after OAuth server callback\n          this.authRedirectService.reportNotAuthGuard();\n          // This method can trigger redirect to OAuth server that's why we don't return anything in this case\n          const redirected = this.authService.loginWithRedirect();\n          if (!redirected) {\n            return of(false);\n          }\n          return EMPTY;\n        }\n      })\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  PageLayoutComponent,\n  PageLayoutModule,\n} from '../../../cms-structure/page/index';\nimport { LoginGuard } from './login.guard';\n\n/**\n * This module enables to quickly switch from Resource Owner Password Flow\n * to Implicit Flow or Authorization Code Flow. The `login` route in this case will be\n * responsible for initalizing the redirect to OAuth server to login.\n *\n * Instead of manually invoking OAuth redirect you only have to redirect to `login` page.\n */\n@NgModule({\n  imports: [\n    PageLayoutModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [LoginGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'login' },\n      },\n    ]),\n  ],\n})\nexport class LoginRouteModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AuthService, User, UserService } from '@spartacus/core';\nimport { Observable, of } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\n\n@Component({\n  selector: 'cx-login',\n  templateUrl: './login.component.html',\n})\nexport class LoginComponent implements OnInit {\n  user$: Observable<User>;\n\n  constructor(private auth: AuthService, private userService: UserService) {}\n\n  ngOnInit(): void {\n    this.user$ = this.auth.isUserLoggedIn().pipe(\n      switchMap((isUserLoggedIn) => {\n        if (isUserLoggedIn) {\n          return this.userService.get();\n        } else {\n          return of(undefined);\n        }\n      })\n    );\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { PageSlotModule } from '../../../cms-structure/page/slot/page-slot.module';\nimport { LoginComponent } from './login.component';\n\n@NgModule({\n  imports: [CommonModule, RouterModule, UrlModule, PageSlotModule, I18nModule],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        LoginComponent: {\n          component: LoginComponent,\n        },\n      },\n    }),\n  ],\n  declarations: [LoginComponent],\n  entryComponents: [LoginComponent],\n  exports: [LoginComponent],\n})\nexport class LoginModule {}\n","import { Injectable } from '@angular/core';\nimport { CanActivate, Router, UrlTree } from '@angular/router';\nimport {\n  AuthService,\n  CmsService,\n  PageType,\n  ProtectedRoutesService,\n  SemanticPathService,\n} from '@spartacus/core';\nimport { from, Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\n\n/**\n * Guards the _logout_ route.\n *\n * Takes care of routing the user to a logout page (if available) or redirects to\n * the homepage. If the homepage is protected, the user is redirected\n * to the login route instead.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class LogoutGuard implements CanActivate {\n  constructor(\n    protected auth: AuthService,\n    protected cms: CmsService,\n    protected semanticPathService: SemanticPathService,\n    protected protectedRoutes: ProtectedRoutesService,\n    protected router: Router\n  ) {}\n\n  canActivate(): Observable<boolean | UrlTree> {\n    /**\n     * First we want to complete logout process before redirecting to logout page\n     * We want to avoid errors like `token is no longer valid`\n     */\n    return from(this.logout()).pipe(\n      switchMap(() => {\n        return this.cms\n          .hasPage({\n            id: this.semanticPathService.get('logout'),\n            type: PageType.CONTENT_PAGE,\n          })\n          .pipe(\n            map((hasPage) => {\n              if (!hasPage) {\n                return this.getRedirectUrl();\n              }\n              // TODO(#9385): Use CMS page guard here.\n              return hasPage;\n            })\n          );\n      })\n    );\n  }\n\n  protected logout(): Promise<any> {\n    return this.auth.coreLogout();\n  }\n\n  /**\n   * Whenever there is no specific \"logout\" page configured in the CMS,\n   * we redirect after the user is logged out.\n   *\n   * The user gets redirected to the homepage, unless the homepage is protected\n   * (in case of a closed shop). We'll redirect to the login page instead.\n   */\n  protected getRedirectUrl(): UrlTree {\n    const cxRoute = this.protectedRoutes.shouldProtect ? 'login' : 'home';\n    return this.router.parseUrl(this.semanticPathService.get(cxRoute));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  PageLayoutComponent,\n  PageLayoutModule,\n} from '../../../cms-structure/page/index';\nimport { LogoutGuard } from './logout.guard';\nimport { CmsPageGuard } from '../../../cms-structure/guards/cms-page.guard';\n\n@NgModule({\n  imports: [\n    PageLayoutModule,\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard, LogoutGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'logout' },\n      },\n    ]),\n  ],\n})\nexport class LogoutModule {}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport {\n  AnonymousConsent,\n  AnonymousConsentsConfig,\n  AnonymousConsentsService,\n  AuthConfigService,\n  ConsentTemplate,\n  GlobalMessageEntities,\n  GlobalMessageService,\n  GlobalMessageType,\n  OAuthFlow,\n  RoutingService,\n  Title,\n  UserService,\n  UserSignUp,\n} from '@spartacus/core';\nimport { combineLatest, Observable, Subscription } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { CustomFormValidators, sortTitles } from '../../../shared/index';\n\n@Component({\n  selector: 'cx-register',\n  templateUrl: './register.component.html',\n})\nexport class RegisterComponent implements OnInit, OnDestroy {\n  titles$: Observable<Title[]>;\n  loading$: Observable<boolean>;\n  private subscription = new Subscription();\n\n  anonymousConsent$: Observable<{\n    consent: AnonymousConsent;\n    template: string;\n  }>;\n\n  registerForm: FormGroup = this.fb.group(\n    {\n      titleCode: [''],\n      firstName: ['', Validators.required],\n      lastName: ['', Validators.required],\n      email: ['', [Validators.required, CustomFormValidators.emailValidator]],\n      password: [\n        '',\n        [Validators.required, CustomFormValidators.passwordValidator],\n      ],\n      passwordconf: ['', Validators.required],\n      newsletter: new FormControl({\n        value: false,\n        disabled: this.isConsentRequired(),\n      }),\n      termsandconditions: [false, Validators.requiredTrue],\n    },\n    {\n      validators: CustomFormValidators.passwordsMustMatch(\n        'password',\n        'passwordconf'\n      ),\n    }\n  );\n\n  constructor(\n    protected userService: UserService,\n    protected globalMessageService: GlobalMessageService,\n    protected fb: FormBuilder,\n    protected router: RoutingService,\n    protected anonymousConsentsService: AnonymousConsentsService,\n    protected anonymousConsentsConfig: AnonymousConsentsConfig,\n    protected authConfigService: AuthConfigService\n  ) {}\n\n  ngOnInit() {\n    this.titles$ = this.userService.getTitles().pipe(\n      map((titles) => {\n        return titles.sort(sortTitles);\n      })\n    );\n\n    this.loading$ = this.userService.getRegisterUserResultLoading();\n    this.registerUserProcessInit();\n\n    // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)\n    this.subscription.add(\n      this.globalMessageService\n        .get()\n        .pipe(filter((messages) => !!Object.keys(messages).length))\n        .subscribe((globalMessageEntities: GlobalMessageEntities) => {\n          const messages =\n            globalMessageEntities &&\n            globalMessageEntities[GlobalMessageType.MSG_TYPE_ERROR];\n\n          if (\n            messages &&\n            messages.some((message) => message === 'This field is required.')\n          ) {\n            this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n            this.globalMessageService.add(\n              { key: 'register.titleRequired' },\n              GlobalMessageType.MSG_TYPE_ERROR\n            );\n          }\n        })\n    );\n\n    const { registerConsent } = this.anonymousConsentsConfig?.anonymousConsents;\n\n    this.anonymousConsent$ = combineLatest([\n      this.anonymousConsentsService.getConsent(registerConsent),\n      this.anonymousConsentsService.getTemplate(registerConsent),\n    ]).pipe(\n      map(([consent, template]: [AnonymousConsent, ConsentTemplate]) => {\n        return {\n          consent,\n          template: template ? template.description : '',\n        };\n      })\n    );\n\n    this.subscription.add(\n      this.registerForm.get('newsletter').valueChanges.subscribe(() => {\n        this.toggleAnonymousConsent();\n      })\n    );\n  }\n\n  submitForm(): void {\n    if (this.registerForm.valid) {\n      this.registerUser();\n    } else {\n      this.registerForm.markAllAsTouched();\n    }\n  }\n\n  registerUser(): void {\n    this.userService.register(\n      this.collectDataFromRegisterForm(this.registerForm.value)\n    );\n  }\n\n  titleSelected(title: Title): void {\n    this.registerForm['controls'].titleCode.setValue(title.code);\n  }\n\n  collectDataFromRegisterForm(formData: any): UserSignUp {\n    const { firstName, lastName, email, password, titleCode } = formData;\n\n    return {\n      firstName,\n      lastName,\n      uid: email.toLowerCase(),\n      password,\n      titleCode,\n    };\n  }\n\n  isConsentGiven(consent: AnonymousConsent): boolean {\n    return this.anonymousConsentsService.isConsentGiven(consent);\n  }\n\n  private isConsentRequired(): boolean {\n    const {\n      requiredConsents,\n      registerConsent,\n    } = this.anonymousConsentsConfig?.anonymousConsents;\n\n    if (requiredConsents && registerConsent) {\n      return requiredConsents.includes(registerConsent);\n    }\n\n    return false;\n  }\n\n  private onRegisterUserSuccess(success: boolean): void {\n    if (success) {\n      if (\n        this.authConfigService.getOAuthFlow() ===\n        OAuthFlow.ResourceOwnerPasswordFlow\n      ) {\n        this.router.go('login');\n      }\n      this.globalMessageService.add(\n        { key: 'register.postRegisterMessage' },\n        GlobalMessageType.MSG_TYPE_CONFIRMATION\n      );\n    }\n  }\n\n  toggleAnonymousConsent(): void {\n    const { registerConsent } = this.anonymousConsentsConfig.anonymousConsents;\n\n    if (Boolean(this.registerForm.get('newsletter').value)) {\n      this.anonymousConsentsService.giveConsent(registerConsent);\n    } else {\n      this.anonymousConsentsService.withdrawConsent(registerConsent);\n    }\n  }\n\n  private registerUserProcessInit(): void {\n    this.userService.resetRegisterUserProcessState();\n    this.subscription.add(\n      this.userService.getRegisterUserResultSuccess().subscribe((success) => {\n        this.onRegisterUserSuccess(success);\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.userService.resetRegisterUserProcessState();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  CmsConfig,\n  I18nModule,\n  NotAuthGuard,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport { SpinnerModule, FormErrorsModule } from '../../../shared/index';\nimport { LoginModule } from '../login/login.module';\nimport { RegisterComponent } from './register.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    LoginModule,\n    ReactiveFormsModule,\n    RouterModule,\n    UrlModule,\n    I18nModule,\n    SpinnerModule,\n    FormErrorsModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        RegisterCustomerComponent: {\n          component: RegisterComponent,\n          guards: [NotAuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [RegisterComponent],\n  exports: [RegisterComponent],\n  entryComponents: [RegisterComponent],\n})\nexport class RegisterComponentModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { UrlModule } from '@spartacus/core';\nimport { CheckoutLoginModule } from './checkout-login/checkout-login.module';\nimport { LoginFormModule } from './login-form/login-form.module';\nimport { LoginRegisterModule } from './login-register/login-register.module';\nimport { LoginRouteModule } from './login-route/login-route.module';\nimport { LoginModule } from './login/login.module';\nimport { LogoutModule } from './logout/logout.module';\nimport { RegisterComponentModule } from './register/register.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    LoginModule,\n    LoginFormModule,\n    LoginRegisterModule,\n    LogoutModule,\n    LoginRouteModule,\n    CheckoutLoginModule,\n    ReactiveFormsModule,\n    RouterModule,\n    UrlModule,\n    RegisterComponentModule,\n  ],\n})\nexport class UserComponentModule {}\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n} from '@angular/core';\nimport { OrderEntry } from '@spartacus/core';\n\n@Component({\n  selector: 'cx-wish-list-item',\n  templateUrl: './wish-list-item.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class WishListItemComponent {\n  @Input()\n  isLoading = false;\n  @Input() cartEntry: OrderEntry;\n\n  @Output()\n  remove = new EventEmitter<OrderEntry>();\n\n  removeEntry(item: OrderEntry) {\n    this.remove.emit(item);\n  }\n}\n","import { Component } from '@angular/core';\nimport { Cart, OrderEntry, WishListService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'cx-wish-list',\n  templateUrl: './wish-list.component.html',\n})\nexport class WishListComponent {\n  wishList$: Observable<Cart> = this.wishListService.getWishList();\n  loading$: Observable<boolean> = this.wishListService.getWishListLoading();\n\n  constructor(protected wishListService: WishListService) {}\n\n  removeEntry(item: OrderEntry) {\n    this.wishListService.removeEntry(item);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport {\n  AuthGuard,\n  CmsConfig,\n  I18nModule,\n  provideDefaultConfig,\n  UrlModule,\n} from '@spartacus/core';\nimport {\n  ItemCounterModule,\n  MediaModule,\n  StarRatingModule,\n} from '../../shared/index';\nimport { AddToCartModule } from '../cart/index';\nimport { WishListItemComponent } from './components/wish-list-item/wish-list-item.component';\nimport { WishListComponent } from './components/wish-list/wish-list.component';\n\n@NgModule({\n  imports: [\n    AddToCartModule,\n    CommonModule,\n    I18nModule,\n    MediaModule,\n    RouterModule,\n    StarRatingModule,\n    UrlModule,\n    ItemCounterModule,\n  ],\n  providers: [\n    provideDefaultConfig(<CmsConfig>{\n      cmsComponents: {\n        WishListComponent: {\n          component: WishListComponent,\n          guards: [AuthGuard],\n        },\n      },\n    }),\n  ],\n  declarations: [WishListComponent, WishListItemComponent],\n  entryComponents: [WishListComponent],\n  exports: [WishListComponent, WishListItemComponent],\n})\nexport class WishListModule {}\n","import { NgModule } from '@angular/core';\nimport { HamburgerMenuModule } from '../layout/index';\nimport { AnonymousConsentManagementBannerModule } from './anonymous-consent-management/anonymous-consent-management.module';\nimport { AsmModule } from './asm/asm.module';\nimport { CartComponentModule } from './cart/cart.module';\nimport { CheckoutComponentModule } from './checkout/checkout.module';\nimport { BannerCarouselModule } from './content/banner-carousel/banner-carousel.module';\nimport {\n  BannerModule,\n  CmsParagraphModule,\n  LinkModule,\n  TabParagraphContainerModule,\n} from './content/index';\nimport { QualtricsModule, SiteContextSelectorModule } from './misc/index';\nimport {\n  AddressBookModule,\n  CloseAccountModule,\n  ConsentManagementModule,\n  ForgotPasswordModule,\n  MyCouponsModule,\n  MyInterestsModule,\n  NotificationPreferenceModule,\n  OrderCancellationModule,\n  OrderDetailsModule,\n  OrderHistoryModule,\n  OrderReturnModule,\n  PaymentMethodsModule,\n  ReplenishmentOrderDetailsModule,\n  ReplenishmentOrderHistoryModule,\n  ResetPasswordModule,\n  ReturnRequestDetailModule,\n  ReturnRequestListModule,\n  UpdateEmailModule,\n  UpdatePasswordModule,\n  UpdateProfileModule,\n} from './myaccount/index';\nimport {\n  BreadcrumbModule,\n  CategoryNavigationModule,\n  FooterNavigationModule,\n  NavigationModule,\n  SearchBoxModule,\n} from './navigation/index';\nimport {\n  OrderConfirmationModule,\n  ReplenishmentOrderConfirmationModule,\n} from './order-confirmation/index';\nimport {\n  ProductCarouselModule,\n  ProductFacetNavigationModule,\n  ProductIntroModule,\n  ProductListModule,\n  ProductReferencesModule,\n  ProductTabsModule,\n  StockNotificationModule,\n} from './product/index';\nimport { ProductImagesModule } from './product/product-images/product-images.module';\nimport { ProductSummaryModule } from './product/product-summary/product-summary.module';\nimport { ProductVariantsModule } from './product/product-variants/product-variants.module';\nimport { UserComponentModule } from './user/user.module';\nimport { WishListModule } from './wish-list/wish-list.module';\n\n@NgModule({\n  imports: [\n    AnonymousConsentManagementBannerModule,\n    AsmModule,\n    HamburgerMenuModule,\n    CmsParagraphModule,\n    LinkModule,\n    BannerModule,\n    CategoryNavigationModule,\n    NavigationModule,\n    FooterNavigationModule,\n    BreadcrumbModule,\n    SearchBoxModule,\n    SiteContextSelectorModule,\n    QualtricsModule,\n    AddressBookModule,\n    OrderHistoryModule,\n    OrderCancellationModule,\n    OrderReturnModule,\n    ReturnRequestListModule,\n    ReturnRequestDetailModule,\n    ProductListModule,\n    ProductFacetNavigationModule,\n    ProductTabsModule,\n    ProductCarouselModule,\n    ProductReferencesModule,\n    OrderDetailsModule,\n    PaymentMethodsModule,\n    UpdateEmailModule,\n    UpdatePasswordModule,\n    UpdateProfileModule,\n    ConsentManagementModule,\n    CloseAccountModule,\n    CartComponentModule,\n    TabParagraphContainerModule,\n    OrderConfirmationModule,\n    ProductImagesModule,\n    ProductSummaryModule,\n    ProductVariantsModule,\n    ProductIntroModule,\n    CheckoutComponentModule,\n    ForgotPasswordModule,\n    ResetPasswordModule,\n    BannerCarouselModule,\n    UserComponentModule,\n    MyCouponsModule,\n    WishListModule,\n    NotificationPreferenceModule,\n    MyInterestsModule,\n    StockNotificationModule,\n    ReplenishmentOrderHistoryModule,\n    ReplenishmentOrderConfirmationModule,\n    ReplenishmentOrderDetailsModule,\n  ],\n})\nexport class CmsLibModule {}\n","import { inject, InjectionToken } from '@angular/core';\nimport { Route } from '@angular/router';\nimport {\n  DEFAULT_URL_MATCHER,\n  UrlMatcherFactory,\n  UrlMatcherService,\n} from '@spartacus/core';\nimport { getSuffixUrlMatcher } from '../../cms-structure/routing/suffix-routes/suffix-url-matcher';\n\nexport function getProductDetailsUrlMatcherFactory(\n  service: UrlMatcherService,\n  defaultMatcherFactory: UrlMatcherFactory\n): UrlMatcherFactory {\n  const factory = (route: Route) => {\n    const defaultMatcher = defaultMatcherFactory(route);\n    const suffixPDPMatcher = getSuffixUrlMatcher({\n      marker: 'p',\n      paramName: 'productCode',\n    });\n    return service.getCombined([defaultMatcher, suffixPDPMatcher]);\n  };\n  return factory;\n}\n\n/**\n * Injection token with url matcher factory for PDP.\n * The provided url matcher matches both:\n * - the configured `paths` from routing config and\n * - custom pattern  `** / p / :productCode`\n *\n * If the this matcher doesn't fit the requirements, it can be replaced with the DEFAULT_URL_MATCHER\n * or additional matchers can be added for a specific route.\n *\n * Note: Matchers will \"match\" a route, but do not contribute to the creation of the route, nor do they guard routes.\n */\nexport const PRODUCT_DETAILS_URL_MATCHER = new InjectionToken<\n  UrlMatcherFactory\n>('PRODUCT_DETAILS_URL_MATCHER', {\n  providedIn: 'root',\n  factory: () =>\n    getProductDetailsUrlMatcherFactory(\n      inject(UrlMatcherService),\n      inject(DEFAULT_URL_MATCHER)\n    ),\n});\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { provideDefaultConfig, RoutingConfig } from '@spartacus/core';\nimport { CmsPageGuard } from '../../cms-structure/guards/cms-page.guard';\nimport { PageLayoutComponent } from '../../cms-structure/page/page-layout/page-layout.component';\nimport { PRODUCT_DETAILS_URL_MATCHER } from './product-details-url-matcher';\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'product' },\n      },\n    ]),\n  ],\n  providers: [\n    provideDefaultConfig(<RoutingConfig>{\n      routing: {\n        routes: {\n          product: {\n            matchers: [PRODUCT_DETAILS_URL_MATCHER],\n          },\n        },\n      },\n    }),\n  ],\n})\nexport class ProductDetailsPageModule {}\n","import { inject, InjectionToken } from '@angular/core';\nimport { Route } from '@angular/router';\nimport {\n  DEFAULT_URL_MATCHER,\n  UrlMatcherFactory,\n  UrlMatcherService,\n} from '@spartacus/core';\nimport { getSuffixUrlMatcher } from '../../cms-structure/routing/suffix-routes/suffix-url-matcher';\n\nexport function getProductListingUrlMatcherFactory(\n  service: UrlMatcherService,\n  defaultMatcherFactory: UrlMatcherFactory\n): UrlMatcherFactory {\n  const factory = (route: Route) => {\n    const defaultMatcher = defaultMatcherFactory(route);\n    const suffixPLPMatcher = getSuffixUrlMatcher({\n      marker: 'c',\n      paramName: 'categoryCode',\n    });\n    return service.getCombined([defaultMatcher, suffixPLPMatcher]);\n  };\n  return factory;\n}\n\n/**\n * Injection token with url matcher factory for PLP.\n * The provided url matcher matches both:\n * - the configured `paths` from routing config and\n * - custom pattern  `** / c / :categoryCode`\n *\n * If the this matcher doesn't fit the requirements, it can be replaced with the DEFAULT_URL_MATCHER\n * or additional matchers can be added for a specific route.\n *\n * Note: Matchers will \"match\" a route, but do not contribute to the creation of the route, nor do they guard routes.\n */\nexport const PRODUCT_LISTING_URL_MATCHER = new InjectionToken<\n  UrlMatcherFactory\n>('PRODUCT_LISTING_URL_MATCHER', {\n  providedIn: 'root',\n  factory: () =>\n    getProductListingUrlMatcherFactory(\n      inject(UrlMatcherService),\n      inject(DEFAULT_URL_MATCHER)\n    ),\n});\n","import { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { provideDefaultConfig, RoutingConfig } from '@spartacus/core';\nimport { CmsPageGuard, PageLayoutComponent } from '../../cms-structure/index';\nimport { PRODUCT_LISTING_URL_MATCHER } from './product-listing-url-matcher';\n\n@NgModule({\n  imports: [\n    RouterModule.forChild([\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { pageLabel: 'search', cxRoute: 'search' },\n      },\n      {\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'brand' },\n      },\n      {\n        // The 'category' route  may include a greedy suffix url matcher '**/c/:categoryCode'\n        // So not to shadow the specific 'brand' route, the 'category' is the last route in the sequence.\n        path: null,\n        canActivate: [CmsPageGuard],\n        component: PageLayoutComponent,\n        data: { cxRoute: 'category' },\n      },\n    ]),\n  ],\n  providers: [\n    provideDefaultConfig(<RoutingConfig>{\n      routing: {\n        routes: {\n          category: {\n            matchers: [PRODUCT_LISTING_URL_MATCHER],\n          },\n        },\n      },\n    }),\n  ],\n})\nexport class ProductListingPageModule {}\n","import { Params } from '@angular/router';\nimport { PageContext } from '@spartacus/core';\n\n/**\n * Indicates that a user visited an arbitrary page.\n */\nexport class PageEvent {\n  context: PageContext;\n  semanticRoute?: string;\n  url: string;\n  params: Params;\n}\n\n/**\n * Indicates that a user visited the home page.\n */\nexport class HomePageEvent extends PageEvent {}\n","import { PageEvent } from '../page/page.events';\n\n/**\n * Indicates that a user visited a cart page.\n */\nexport class CartPageEvent extends PageEvent {}\n","import { Injectable } from '@angular/core';\nimport { ActionsSubject } from '@ngrx/store';\nimport { createFrom, EventService } from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { PageEvent } from '../page/page.events';\nimport { CartPageEvent } from './cart-page.events';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class CartPageEventBuilder {\n  constructor(\n    protected actions: ActionsSubject,\n    protected eventService: EventService\n  ) {\n    this.register();\n  }\n\n  protected register(): void {\n    this.eventService.register(CartPageEvent, this.buildCartPageEvent());\n  }\n\n  protected buildCartPageEvent(): Observable<CartPageEvent> {\n    return this.eventService.get(PageEvent).pipe(\n      filter((pageEvent) => pageEvent.semanticRoute === 'cart'),\n      map((pageEvent) => createFrom(CartPageEvent, pageEvent))\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CartPageEventBuilder } from './cart-page-event.builder';\n\n@NgModule({})\nexport class CartPageEventModule {\n  constructor(_cartPageEventBuilder: CartPageEventBuilder) {}\n}\n","import { Injectable } from '@angular/core';\nimport { ofType } from '@ngrx/effects';\nimport { RouterNavigatedAction, ROUTER_NAVIGATED } from '@ngrx/router-store';\nimport { ActionsSubject } from '@ngrx/store';\nimport {\n  ActivatedRouterStateSnapshot,\n  createFrom,\n  EventService,\n} from '@spartacus/core';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { HomePageEvent, PageEvent } from './page.events';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PageEventBuilder {\n  constructor(\n    protected actions: ActionsSubject,\n    protected eventService: EventService\n  ) {\n    this.register();\n  }\n\n  protected register(): void {\n    this.eventService.register(PageEvent, this.buildPageEvent());\n    this.eventService.register(HomePageEvent, this.buildHomePageEvent());\n  }\n\n  protected buildPageEvent(): Observable<PageEvent> {\n    return this.getNavigatedEvent().pipe(\n      map((state) =>\n        createFrom(PageEvent, {\n          context: state.context,\n          semanticRoute: state.semanticRoute,\n          url: state.url,\n          params: state.params,\n        })\n      )\n    );\n  }\n\n  protected buildHomePageEvent(): Observable<HomePageEvent> {\n    return this.buildPageEvent().pipe(\n      filter((pageEvent) => pageEvent.semanticRoute === 'home'),\n      map((pageEvent) => createFrom(HomePageEvent, pageEvent))\n    );\n  }\n\n  private getNavigatedEvent(): Observable<ActivatedRouterStateSnapshot> {\n    return this.actions.pipe(\n      ofType<RouterNavigatedAction<ActivatedRouterStateSnapshot>>(\n        ROUTER_NAVIGATED\n      ),\n      map((event) => event.payload.routerState)\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { PageEventBuilder } from './page-event.builder';\n\n@NgModule({})\nexport class PageEventModule {\n  constructor(_pageEventBuilder: PageEventBuilder) {}\n}\n","import { Category, Price } from '@spartacus/core';\nimport { PageEvent } from '../page/page.events';\n\n/**\n * Indicates that a user visited a product details page.\n */\nexport class ProductDetailsPageEvent extends PageEvent {\n  categories?: Category[];\n  code?: string;\n  name?: string;\n  price?: Price;\n}\n\n/**\n * Indicates that a user visited a category page.\n */\nexport class CategoryPageResultsEvent extends PageEvent {\n  categoryCode: string;\n  categoryName?: string;\n  numberOfResults: Number;\n}\n\n/**\n * Indicates that the a user visited the search results page,\n * and that the search results have been retrieved.\n */\nexport class SearchPageResultsEvent extends PageEvent {\n  searchTerm: string;\n  numberOfResults: Number;\n}\n","import { Injectable } from '@angular/core';\nimport {\n  createFrom,\n  EventService,\n  ProductSearchService,\n  ProductService,\n} from '@spartacus/core';\nimport { EMPTY, Observable } from 'rxjs';\nimport { filter, map, skip, switchMap, take } from 'rxjs/operators';\nimport { PageEvent } from '../page/page.events';\nimport {\n  CategoryPageResultsEvent,\n  ProductDetailsPageEvent,\n  SearchPageResultsEvent,\n} from './product-page.events';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ProductPageEventBuilder {\n  constructor(\n    protected eventService: EventService,\n    protected productService: ProductService,\n    protected productSearchService: ProductSearchService\n  ) {\n    this.register();\n  }\n\n  protected register(): void {\n    this.eventService.register(\n      SearchPageResultsEvent,\n      this.buildSearchPageResultsEvent()\n    );\n    this.eventService.register(\n      ProductDetailsPageEvent,\n      this.buildProductDetailsPageEvent()\n    );\n    this.eventService.register(\n      CategoryPageResultsEvent,\n      this.buildCategoryResultsPageEvent()\n    );\n  }\n\n  protected buildProductDetailsPageEvent(): Observable<\n    ProductDetailsPageEvent\n  > {\n    return this.eventService.get(PageEvent).pipe(\n      filter((pageEvent) => pageEvent.semanticRoute === 'product'),\n      switchMap((pageEvent) =>\n        this.productService.get(pageEvent.context.id).pipe(\n          filter((product) => Boolean(product)),\n          take(1),\n          map((product) =>\n            createFrom(ProductDetailsPageEvent, {\n              ...pageEvent,\n              categories: product.categories,\n              code: product.code,\n              name: product.name,\n              price: product.price,\n            })\n          )\n        )\n      )\n    );\n  }\n\n  protected buildCategoryResultsPageEvent(): Observable<\n    CategoryPageResultsEvent\n  > {\n    const searchResults$ = this.productSearchService.getResults().pipe(\n      // skipping the initial value, and preventing emission of the previous search state\n      skip(1)\n    );\n\n    return this.eventService.get(PageEvent).pipe(\n      switchMap((pageEvent) => {\n        if (pageEvent?.semanticRoute !== 'category') {\n          return EMPTY;\n        }\n\n        return searchResults$.pipe(\n          map((searchResults) => ({\n            ...pageEvent,\n            ...{\n              categoryCode: pageEvent?.context?.id,\n              numberOfResults: searchResults?.pagination?.totalResults,\n              categoryName: searchResults.breadcrumbs?.[0].facetValueName,\n            },\n          })),\n          map((categoryPage) =>\n            createFrom(CategoryPageResultsEvent, categoryPage)\n          )\n        );\n      })\n    );\n  }\n\n  protected buildSearchPageResultsEvent(): Observable<SearchPageResultsEvent> {\n    const searchResults$ = this.productSearchService.getResults().pipe(\n      // skipping the initial value, and preventing emission of the previous search state\n      skip(1)\n    );\n\n    return this.eventService.get(PageEvent).pipe(\n      switchMap((pageEvent) => {\n        if (pageEvent?.semanticRoute !== 'search') {\n          return EMPTY;\n        }\n\n        return searchResults$.pipe(\n          map((searchResults) => ({\n            ...pageEvent,\n            ...{\n              searchTerm: searchResults?.freeTextSearch,\n              numberOfResults: searchResults?.pagination?.totalResults,\n            },\n          })),\n          map((searchPage) => createFrom(SearchPageResultsEvent, searchPage))\n        );\n      })\n    );\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ProductPageEventBuilder } from './product-page-event.builder';\n\n@NgModule({})\nexport class ProductPageEventModule {\n  constructor(_productPageEventBuilder: ProductPageEventBuilder) {}\n}\n","import { MediaConfig } from '../../shared/components/media/media.config';\n\nexport const mediaConfig: MediaConfig = {\n  mediaFormats: {\n    mobile: { width: 400 },\n    tablet: { width: 770 },\n    desktop: { width: 1140 },\n    widescreen: { width: 1400 },\n    // product media\n    cartIcon: { width: 65 },\n    thumbnail: { width: 96 },\n    product: { width: 284 },\n    zoom: { width: 515 },\n  },\n};\n","import { LayoutConfig } from '../../layout/config/layout-config';\n\n/**\n * The layout configuration is used to define the overall layout of the storefront.\n * The configuration includes the following aspects:\n * - breakpoint layout (AKA screen layout)\n * - Page sections slot configuration (i.e. header vs footer)\n * - page template slot configuration (i.e. landing page template vs PDP page template)\n * - deferred loading configuration\n *\n * The page slot configurations is directly related to the data in the backend. If you use the\n * Spartacus sample-data, you will have an aligned setup. However, if you introduce custom page\n * templates and/or slots, you most likely need to further adjust or replace this configuration.\n */\nexport const layoutConfig: LayoutConfig = {\n  // deferredLoading: {\n  //   strategy: DeferLoadingStrategy.DEFER,\n  //   intersectionMargin: '50px',\n  // },\n  layoutSlots: {\n    header: {\n      lg: {\n        slots: [\n          'PreHeader',\n          'SiteContext',\n          'SiteLinks',\n          'SiteLogo',\n          'SearchBox',\n          'SiteLogin',\n          'MiniCart',\n          'NavigationBar',\n        ],\n      },\n      slots: ['PreHeader', 'SiteLogo', 'SearchBox', 'MiniCart'],\n    },\n    navigation: {\n      lg: { slots: [] },\n      slots: ['SiteLogin', 'NavigationBar', 'SiteContext', 'SiteLinks'],\n    },\n    footer: {\n      slots: ['Footer'],\n    },\n    LandingPage2Template: {\n      pageFold: 'Section2B',\n      slots: [\n        'Section1',\n        'Section2A',\n        'Section2B',\n        'Section2C',\n        'Section3',\n        'Section4',\n        'Section5',\n      ],\n    },\n    ContentPage1Template: {\n      slots: ['Section2A', 'Section2B'],\n    },\n    CategoryPageTemplate: {\n      pageFold: 'Section2',\n      slots: ['Section1', 'Section2', 'Section3'],\n    },\n    ProductListPageTemplate: {\n      slots: ['ProductLeftRefinements', 'ProductListSlot'],\n    },\n    ProductGridPageTemplate: {\n      slots: ['ProductLeftRefinements', 'ProductGridSlot'],\n    },\n    SearchResultsListPageTemplate: {\n      slots: [\n        'Section2',\n        'ProductLeftRefinements',\n        'SearchResultsListSlot',\n        'Section4',\n      ],\n    },\n    SearchResultsGridPageTemplate: {\n      slots: [\n        'Section2',\n        'ProductLeftRefinements',\n        'SearchResultsGridSlot',\n        'Section4',\n      ],\n    },\n    ProductDetailsPageTemplate: {\n      lg: {\n        pageFold: 'UpSelling',\n      },\n      pageFold: 'Summary',\n      slots: [\n        'Summary',\n        'UpSelling',\n        'CrossSelling',\n        'Tabs',\n        'PlaceholderContentSlot',\n      ],\n    },\n    CartPageTemplate: {\n      slots: ['TopContent', 'CenterRightContentSlot', 'EmptyCartMiddleContent'],\n    },\n    AccountPageTemplate: {\n      slots: ['BodyContent', 'SideContent'],\n    },\n    LoginPageTemplate: {\n      slots: ['LeftContentSlot', 'RightContentSlot'],\n    },\n    ErrorPageTemplate: {\n      slots: ['TopContent', 'MiddleContent', 'BottomContent'],\n    },\n    OrderConfirmationPageTemplate: {\n      slots: ['BodyContent', 'SideContent'],\n    },\n    MultiStepCheckoutSummaryPageTemplate: {\n      slots: ['TopContent', 'BodyContent', 'SideContent', 'BottomContent'],\n    },\n    CheckoutLoginPageTemplate: {\n      slots: ['RightContentSlot'],\n    },\n  },\n};\n\n/**\n * @deprecated the b2cLayoutConfig will be dropped with version 4.0.\n *\n * With Spartacus 3.0 we started to align various layout configurations. Moreover, we move\n * into a pattern where layout configurations are shattered through various (lazy loaded) modules.\n */\nexport const b2cLayoutConfig: LayoutConfig = layoutConfig;\n","import { ValueProvider } from '@angular/core';\nimport { provideCmsStructure } from '../../cms-structure/utils/cms-structure.util';\n\nexport const defaultCmsContentProviders: ValueProvider[] = [\n  provideCmsStructure({\n    componentId: 'HamburgerMenuComponent',\n    pageSlotPosition: 'PreHeader',\n  }),\n  provideCmsStructure({\n    componentId: 'LoginComponent',\n    pageSlotPosition: 'SiteLogin',\n  }),\n];\n","import { NgModule } from '@angular/core';\nimport { CartPageEventModule } from './cart/cart-page-event.module';\nimport { PageEventModule } from './page/page-event.module';\nimport { ProductPageEventModule } from './product/product-page-event.module';\n\n@NgModule({\n  imports: [CartPageEventModule, PageEventModule, ProductPageEventModule],\n})\nexport class EventsModule {}\n","import { NgModule } from '@angular/core';\nimport {\n  AnonymousConsentsModule,\n  AuthModule,\n  CartModule,\n  CheckoutModule,\n  CmsModule,\n  ConfigInitializerModule,\n  ConfigModule,\n  ConfigValidatorModule,\n  FeaturesConfigModule,\n  GlobalMessageModule,\n  I18nModule,\n  ProcessModule,\n  ProductModule,\n  provideConfigFromMetaTags,\n  StateModule,\n  UserModule,\n} from '@spartacus/core';\nimport { OutletModule } from '../cms-structure/outlet/outlet.module';\nimport { RoutingModule } from '../cms-structure/routing/routing.module';\nimport { EventsModule } from '../events/events.module';\nimport { LayoutModule } from '../layout/layout.module';\nimport { MediaModule } from '../shared/components/media/media.module';\nimport { ViewConfigModule } from '../shared/config/view-config.module';\n\n@NgModule({\n  imports: [\n    StateModule.forRoot(),\n    AuthModule.forRoot(),\n    AnonymousConsentsModule.forRoot(),\n    ConfigModule.forRoot(),\n    ConfigInitializerModule.forRoot(),\n    ConfigValidatorModule.forRoot(),\n    RoutingModule.forRoot(),\n    I18nModule.forRoot(),\n    CmsModule.forRoot(),\n    GlobalMessageModule.forRoot(),\n    ProcessModule.forRoot(),\n    CartModule.forRoot(),\n    CheckoutModule.forRoot(),\n    UserModule.forRoot(),\n    ProductModule.forRoot(),\n    ViewConfigModule.forRoot(),\n    FeaturesConfigModule.forRoot('2.0'),\n    LayoutModule,\n    MediaModule.forRoot(),\n    EventsModule,\n    OutletModule.forRoot(),\n  ],\n  exports: [LayoutModule],\n  providers: [...provideConfigFromMetaTags()],\n})\nexport class StorefrontFoundationModule {}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\nimport {\n  ExternalRoutesModule,\n  OccModule,\n  PersonalizationModule,\n  provideConfig,\n  SiteContextModule,\n  SmartEditModule,\n} from '@spartacus/core';\nimport { AsmModule } from '../cms-components/asm/asm.module';\nimport { ProductDetailsPageModule } from '../cms-pages/product-details-page/product-details-page.module';\nimport { ProductListingPageModule } from '../cms-pages/product-listing-page/product-listing-page.module';\nimport { MainModule } from '../layout/main/main.module';\nimport { StorefrontConfig } from '../storefront-config';\nimport { StorefrontFoundationModule } from './storefront-foundation.module';\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot([], {\n      anchorScrolling: 'enabled',\n      relativeLinkResolution: 'corrected',\n      initialNavigation: 'enabled',\n    }),\n\n    StoreModule.forRoot({}),\n    EffectsModule.forRoot([]),\n\n    // ASM module must be imported before the `AuthModule (which is imported in `StorefrontFoundationModule`)\n    // since we might have conflicting interceptor logic. See #5461.\n    AsmModule,\n\n    StorefrontFoundationModule,\n    MainModule,\n    SiteContextModule.forRoot(), // should be imported after RouterModule.forRoot, because it overwrites UrlSerializer\n\n    SmartEditModule.forRoot(), // should be custom\n    PersonalizationModule.forRoot(), // should be custom\n\n    // opt-in explicitly\n    OccModule.forRoot(),\n    ProductDetailsPageModule,\n    ProductListingPageModule,\n    ExternalRoutesModule.forRoot(),\n  ],\n  exports: [MainModule, StorefrontFoundationModule],\n})\nexport class StorefrontModule {\n  static withConfig(\n    config?: StorefrontConfig\n  ): ModuleWithProviders<StorefrontModule> {\n    return {\n      ngModule: StorefrontModule,\n      providers: [provideConfig(config)],\n    };\n  }\n}\n","import { HttpClientModule } from '@angular/common/http';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { provideConfig, provideDefaultConfig } from '@spartacus/core';\nimport { CmsLibModule } from '../cms-components/cms-lib.module';\nimport { StorefrontConfig } from '../storefront-config';\nimport { layoutConfig, mediaConfig } from './config/index';\nimport { defaultCmsContentProviders } from './config/static-cms-structure';\nimport { StorefrontModule } from './storefront.module';\n\n@NgModule({\n  imports: [\n    HttpClientModule,\n    StorefrontModule,\n\n    // the cms lib module contains all components that added in the bundle\n    CmsLibModule,\n  ],\n  providers: [\n    provideDefaultConfig({\n      pwa: {\n        enabled: true,\n        addToHomeScreen: true,\n      },\n    }),\n    provideDefaultConfig(layoutConfig),\n    provideDefaultConfig(mediaConfig),\n    ...defaultCmsContentProviders,\n  ],\n  exports: [StorefrontModule],\n})\nexport class B2cStorefrontModule {\n  static withConfig(\n    config?: StorefrontConfig\n  ): ModuleWithProviders<B2cStorefrontModule> {\n    return {\n      ngModule: B2cStorefrontModule,\n      providers: [provideConfig(config)],\n    };\n  }\n}\n","import { AbstractControl, FormArray, FormGroup } from '@angular/forms';\n\n/**\n * Utils for Angular forms\n */\nexport namespace FormUtils {\n  /**\n   * Calls the native Angular method `#updateValueAndValidity` for the given from control\n   * and all its descendants (in case when it's `FormGroup` or `FormArray`).\n   *\n   * In particular it's useful for triggering re-emission of observables\n   * `valueChanges` and `statusChanges` for all descendant form controls.\n   *\n   * _Note: Dropping this function may be considered, when it's implemented natively\n   * by Angular. See https://github.com/angular/angular/issues/6170_\n   *\n   * @param control form control\n   * @param options additional options\n   * * `emitEvent`: When true or not given (the default), the `statusChanges` and\n   * `valueChanges` observables emit the latest status and value. When false,\n   * it doesn't trigger observables emission.\n   */\n  export function deepUpdateValueAndValidity(\n    control: AbstractControl,\n    options: { emitEvent?: boolean } = {}\n  ): void {\n    if (control instanceof FormGroup || control instanceof FormArray) {\n      Object.values(control.controls).forEach(\n        (childControl: AbstractControl) => {\n          deepUpdateValueAndValidity(childControl, options);\n        }\n      );\n    }\n\n    control.updateValueAndValidity({\n      onlySelf: true, // avoid calling `#updateValueAndValidity` for all ancestors\n      emitEvent: options.emitEvent,\n    });\n  }\n}\n"]}