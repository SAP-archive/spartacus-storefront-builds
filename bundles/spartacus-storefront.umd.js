(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('@spartacus/core'), require('rxjs'), require('rxjs/operators'), require('@ng-bootstrap/ng-bootstrap'), require('@angular/router'), require('@angular/forms'), require('@ng-select/ng-select'), require('@angular/common/http'), require('@angular/service-worker'), require('@angular/platform-browser'), require('rxjs/internal/Subscription'), require('ngx-infinite-scroll'), require('@ngrx/effects'), require('@ngrx/store')) :
    typeof define === 'function' && define.amd ? define('@spartacus/storefront', ['exports', '@angular/common', '@angular/core', '@spartacus/core', 'rxjs', 'rxjs/operators', '@ng-bootstrap/ng-bootstrap', '@angular/router', '@angular/forms', '@ng-select/ng-select', '@angular/common/http', '@angular/service-worker', '@angular/platform-browser', 'rxjs/internal/Subscription', 'ngx-infinite-scroll', '@ngrx/effects', '@ngrx/store'], factory) :
    (global = global || self, factory((global.spartacus = global.spartacus || {}, global.spartacus.storefront = {}), global.ng.common, global.ng.core, global.core, global.rxjs, global.rxjs.operators, global.ngBootstrap, global.ng.router, global.ng.forms, global.ngSelect, global.ng.common.http, global.ng['service-worker'], global.ng.platformBrowser, global.rxjs['internal/Subscription'], global.ngxInfiniteScroll, global.effects, global.store));
}(this, function (exports, common, core, core$1, rxjs, operators, ngBootstrap, router, forms, ngSelect, http, serviceWorker, platformBrowser, Subscription, ngxInfiniteScroll, effects, store) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */

    var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };

    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __rest(s, e) {
        var t = {};
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
            t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                    t[p[i]] = s[p[i]];
            }
        return t;
    }

    function __decorate(decorators, target, key, desc) {
        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
        if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
        return c > 3 && r && Object.defineProperty(target, key, r), r;
    }

    function __param(paramIndex, decorator) {
        return function (target, key) { decorator(target, key, paramIndex); }
    }

    function __metadata(metadataKey, metadataValue) {
        if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
    }

    function __awaiter(thisArg, _arguments, P, generator) {
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    function __exportStar(m, exports) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }

    function __values(o) {
        var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
        if (m) return m.call(o);
        return {
            next: function () {
                if (o && i >= o.length) o = void 0;
                return { value: o && o[i++], done: !o };
            }
        };
    }

    function __read(o, n) {
        var m = typeof Symbol === "function" && o[Symbol.iterator];
        if (!m) return o;
        var i = m.call(o), r, ar = [], e;
        try {
            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
        }
        catch (error) { e = { error: error }; }
        finally {
            try {
                if (r && !r.done && (m = i["return"])) m.call(i);
            }
            finally { if (e) throw e.error; }
        }
        return ar;
    }

    function __spread() {
        for (var ar = [], i = 0; i < arguments.length; i++)
            ar = ar.concat(__read(arguments[i]));
        return ar;
    }

    function __spreadArrays() {
        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
        for (var r = Array(s), k = 0, i = 0; i < il; i++)
            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
                r[k] = a[j];
        return r;
    };

    function __await(v) {
        return this instanceof __await ? (this.v = v, this) : new __await(v);
    }

    function __asyncGenerator(thisArg, _arguments, generator) {
        if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
        var g = generator.apply(thisArg, _arguments || []), i, q = [];
        return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
        function fulfill(value) { resume("next", value); }
        function reject(value) { resume("throw", value); }
        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
    }

    function __asyncDelegator(o) {
        var i, p;
        return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
    }

    function __asyncValues(o) {
        if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
        var m = o[Symbol.asyncIterator], i;
        return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
    }

    function __makeTemplateObject(cooked, raw) {
        if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
        return cooked;
    };

    function __importStar(mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
        result.default = mod;
        return result;
    }

    function __importDefault(mod) {
        return (mod && mod.__esModule) ? mod : { default: mod };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var ICON_TYPE = {
        STAR: 'STAR',
        SEARCH: 'SEARCH',
        CART: 'CART',
        INFO: 'INFO',
        GRID: 'GRID',
        LIST: 'LIST',
        CARET_DOWN: 'CARET_DOWN',
        CARET_LEFT: 'CARET_LEFT',
        CARET_RIGHT: 'CARET_RIGHT',
        CLOSE: 'CLOSE',
        ERROR: 'ERROR',
        WARNING: 'WARNING',
        SUCCESS: 'SUCCESS',
        VISA: 'VISA',
        MASTER_CARD: 'MASTER_CARD',
        AMEX: 'AMEX',
        DINERS_CLUB: 'DINERS_CLUB',
        CREDIT_CARD: 'CREDIT_CARD',
        EXPAND: 'EXPAND',
        COLLAPSE: 'COLLAPSE',
        RESET: 'RESET',
        CIRCLE: 'CIRCLE',
        HEART: 'HEART',
        EMPTY_HEART: 'EMPTY_HEART',
    };
    /**
     * @abstract
     */
    var   /**
     * @abstract
     */
    IconConfig = /** @class */ (function () {
        function IconConfig() {
        }
        return IconConfig;
    }());
    if (false) {
        /** @type {?} */
        IconConfig.prototype.icon;
    }
    /**
     * @record
     */
    function IconConfigResource() { }
    if (false) {
        /** @type {?} */
        IconConfigResource.prototype.type;
        /** @type {?|undefined} */
        IconConfigResource.prototype.url;
        /** @type {?|undefined} */
        IconConfigResource.prototype.types;
    }
    /** @enum {string} */
    var IconResourceType = {
        SVG: 'svg',
        LINK: 'link',
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var fontawesomeIconConfig = {
        icon: {
            symbols: {
                SEARCH: 'fas fa-search',
                CART: 'fas fa-shopping-cart',
                INFO: 'fas fa-info-circle',
                STAR: 'fas fa-star',
                GRID: 'fas fa-th-large',
                LIST: 'fas fa-bars',
                CARET_DOWN: 'fas fa-angle-down',
                CARET_RIGHT: 'fas fa-angle-right',
                CARET_LEFT: 'fas fa-angle-left',
                ERROR: 'fas fa-exclamation-circle',
                WARNING: 'fas fa-exclamation-triangle',
                SUCCESS: 'fas fa-check-circle',
                CLOSE: 'fas fa-times',
                VISA: 'fab fa-cc-visa',
                MASTER_CARD: 'fab fa-cc-mastercard',
                AMEX: 'fab fa-cc-amex',
                DINERS_CLUB: 'fab fa-cc-diners-club',
                CREDIT_CARD: 'fas fa-credit-card',
                COLLAPSE: 'fas fa-minus',
                EXPAND: 'fas fa-plus',
                RESET: 'fas fa-times-circle',
                CIRCLE: 'fas fa-circle',
                HEART: 'fas fa-heart',
                EMPTY_HEART: 'far fa-heart',
            },
            resources: [
                {
                    type: IconResourceType.LINK,
                    url: 'https://use.fontawesome.com/releases/v5.8.1/css/all.css',
                },
            ],
        },
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var IconLoaderService = /** @class */ (function () {
        function IconLoaderService(winRef, config) {
            this.winRef = winRef;
            this.config = config;
            this.loadedResources = [];
        }
        /**
         * Indicates whether the given icon type is configured to use SVG.
         */
        /**
         * Indicates whether the given icon type is configured to use SVG.
         * @param {?} iconType
         * @return {?}
         */
        IconLoaderService.prototype.useSvg = /**
         * Indicates whether the given icon type is configured to use SVG.
         * @param {?} iconType
         * @return {?}
         */
        function (iconType) {
            return (this.config.icon.resources &&
                !!this.config.icon.resources.find((/**
                 * @param {?} res
                 * @return {?}
                 */
                function (res) {
                    return res.types &&
                        res.type === IconResourceType.SVG &&
                        res.types.includes(iconType);
                })));
        };
        /**
         * Returns the path to the svg link. The link supports path names
         * as well, if the config has been setup to support a svg file path.
         * Additionally, the icon prefix will be taken into account to prefix the
         * icon IDs in the SVG.
         */
        /**
         * Returns the path to the svg link. The link supports path names
         * as well, if the config has been setup to support a svg file path.
         * Additionally, the icon prefix will be taken into account to prefix the
         * icon IDs in the SVG.
         * @param {?} iconType
         * @return {?}
         */
        IconLoaderService.prototype.getSvgPath = /**
         * Returns the path to the svg link. The link supports path names
         * as well, if the config has been setup to support a svg file path.
         * Additionally, the icon prefix will be taken into account to prefix the
         * icon IDs in the SVG.
         * @param {?} iconType
         * @return {?}
         */
        function (iconType) {
            /** @type {?} */
            var svgResource = this.config.icon.resources.find((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                return res.type === IconResourceType.SVG &&
                    res.types &&
                    res.types.includes(iconType);
            }));
            if (svgResource) {
                return svgResource.url
                    ? svgResource.url + "#" + this.getSymbol(iconType)
                    : "#" + this.getSymbol(iconType);
            }
        };
        /**
         *
         * Returns the symbol class(es) for the icon type.
         */
        /**
         *
         * Returns the symbol class(es) for the icon type.
         * @param {?} iconType
         * @return {?}
         */
        IconLoaderService.prototype.getStyleClasses = /**
         *
         * Returns the symbol class(es) for the icon type.
         * @param {?} iconType
         * @return {?}
         */
        function (iconType) {
            return this.getSymbol(iconType) || '';
        };
        /**
         * Loads the resource url (if any) for the given icon.
         * The icon will only be loaded once.
         *
         * NOTE: this is not working when the shadow is used as there's
         * no head element available and the link must be loaded for every
         * web component.
         */
        /**
         * Loads the resource url (if any) for the given icon.
         * The icon will only be loaded once.
         *
         * NOTE: this is not working when the shadow is used as there's
         * no head element available and the link must be loaded for every
         * web component.
         * @param {?} iconType
         * @return {?}
         */
        IconLoaderService.prototype.addLinkResource = /**
         * Loads the resource url (if any) for the given icon.
         * The icon will only be loaded once.
         *
         * NOTE: this is not working when the shadow is used as there's
         * no head element available and the link must be loaded for every
         * web component.
         * @param {?} iconType
         * @return {?}
         */
        function (iconType) {
            /** @type {?} */
            var resource = this.findResource(iconType, IconResourceType.LINK);
            if (resource && resource.url) {
                if (!this.loadedResources.includes(resource.url)) {
                    this.loadedResources.push(resource.url);
                    /** @type {?} */
                    var head = this.winRef.document.getElementsByTagName('head')[0];
                    /** @type {?} */
                    var link = this.winRef.document.createElement('link');
                    link.rel = 'stylesheet';
                    link.type = 'text/css';
                    link.href = resource.url;
                    head.appendChild(link);
                }
            }
        };
        /**
         * @private
         * @param {?} iconType
         * @param {?} resourceType
         * @return {?}
         */
        IconLoaderService.prototype.findResource = /**
         * @private
         * @param {?} iconType
         * @param {?} resourceType
         * @return {?}
         */
        function (iconType, resourceType) {
            if (!this.config.icon.resources) {
                return;
            }
            /** @type {?} */
            var resource = this.config.icon.resources.find((/**
             * @param {?} res
             * @return {?}
             */
            function (res) {
                return res.type === resourceType && res.types && res.types.includes(iconType);
            }));
            // no specific resource found, let's try to find a one-size-fits-all resource
            if (!resource) {
                resource = this.config.icon.resources.find((/**
                 * @param {?} res
                 * @return {?}
                 */
                function (res) { return (res.type === resourceType && !res.types) || res.types === []; }));
            }
            return resource;
        };
        /**
         * @private
         * @param {?} iconType
         * @return {?}
         */
        IconLoaderService.prototype.getSymbol = /**
         * @private
         * @param {?} iconType
         * @return {?}
         */
        function (iconType) {
            if (this.config.icon &&
                this.config.icon.symbols &&
                this.config.icon.symbols[iconType]) {
                return this.config.icon.symbols[iconType];
            }
        };
        IconLoaderService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        IconLoaderService.ctorParameters = function () { return [
            { type: core$1.WindowRef },
            { type: IconConfig }
        ]; };
        /** @nocollapse */ IconLoaderService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function IconLoaderService_Factory() { return new IconLoaderService(core.ɵɵinject(core$1.WindowRef), core.ɵɵinject(IconConfig)); }, token: IconLoaderService, providedIn: "root" });
        return IconLoaderService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        IconLoaderService.prototype.loadedResources;
        /**
         * @type {?}
         * @protected
         */
        IconLoaderService.prototype.winRef;
        /**
         * @type {?}
         * @protected
         */
        IconLoaderService.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var IconComponent = /** @class */ (function () {
        function IconComponent(iconLoader, elementRef) {
            this.iconLoader = iconLoader;
            this.elementRef = elementRef;
            /**
             * Keeps the given style classes so that we can
             * clean them up when the icon changes
             */
            this.styleClasses = '';
        }
        Object.defineProperty(IconComponent.prototype, "type", {
            set: /**
             * @param {?} type
             * @return {?}
             */
            function (type) {
                this._type = type;
                this.addStyleClasses(type);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(IconComponent.prototype, "useSvg", {
            /**
             * Indicates whether the icon is configured to use SVG or not.
             */
            get: /**
             * Indicates whether the icon is configured to use SVG or not.
             * @return {?}
             */
            function () {
                return this.iconLoader.useSvg(this._type);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(IconComponent.prototype, "svgPath", {
            /**
             * Returns the path to the svg symbol. The path could include an
             * external URL to an svg (sprite) file, but can also reference
             * an existing SVG symbol in the DOM.
             */
            get: /**
             * Returns the path to the svg symbol. The path could include an
             * external URL to an svg (sprite) file, but can also reference
             * an existing SVG symbol in the DOM.
             * @return {?}
             */
            function () {
                return this.iconLoader.getSvgPath(this._type);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * Adds the style classes and the link resource (if availabe).
         */
        /**
         * Adds the style classes and the link resource (if availabe).
         * @private
         * @param {?} type
         * @return {?}
         */
        IconComponent.prototype.addStyleClasses = /**
         * Adds the style classes and the link resource (if availabe).
         * @private
         * @param {?} type
         * @return {?}
         */
        function (type) {
            if (this.useSvg) {
                return;
            }
            if (this.staticStyleClasses === undefined) {
                this.staticStyleClasses = this.elementRef.nativeElement.classList.value
                    ? this.elementRef.nativeElement.classList.value + ' '
                    : '';
            }
            this.styleClasses =
                this.staticStyleClasses + this.iconLoader.getStyleClasses(type);
            this.iconLoader.addLinkResource(type);
        };
        IconComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-icon',
                        template: "<ng-container *ngIf=\"useSvg\">\n  <svg>\n    <use [attr.xlink:href]=\"svgPath\"></use>\n  </svg>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        IconComponent.ctorParameters = function () { return [
            { type: IconLoaderService },
            { type: core.ElementRef }
        ]; };
        IconComponent.propDecorators = {
            type: [{ type: core.Input, args: ['type',] }],
            styleClasses: [{ type: core.HostBinding, args: ['class',] }]
        };
        return IconComponent;
    }());
    if (false) {
        /**
         * The type of the icon which maps to the icon link
         * in the svg icon sprite.
         * @type {?}
         */
        IconComponent.prototype._type;
        /**
         * Keeps the given style classes so that we can
         * clean them up when the icon changes
         * @type {?}
         */
        IconComponent.prototype.styleClasses;
        /**
         * Style class names from the host element are taken into account
         * when classes are set dynamically.
         * @type {?}
         * @private
         */
        IconComponent.prototype.staticStyleClasses;
        /**
         * @type {?}
         * @protected
         */
        IconComponent.prototype.iconLoader;
        /**
         * @type {?}
         * @protected
         */
        IconComponent.prototype.elementRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var IconModule = /** @class */ (function () {
        function IconModule() {
        }
        IconModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [IconComponent],
                        imports: [common.CommonModule, core$1.ConfigModule.withConfig(fontawesomeIconConfig)],
                        providers: [{ provide: IconConfig, useExisting: core$1.Config }],
                        exports: [IconComponent],
                    },] }
        ];
        return IconModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Options available for modal instance
     *
     * \@todo remove ngb dependency and create our own set of props for this interface
     * @record
     */
    function ModalOptions() { }
    if (false) {
        /** @type {?|undefined} */
        ModalOptions.prototype.temp;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * A reference to a newly opened modal
     *
     * \@todo remove ngb dependency and create our own implementation of ModalRef
     */
    var   /**
     * A reference to a newly opened modal
     *
     * \@todo remove ngb dependency and create our own implementation of ModalRef
     */
    ModalRef = /** @class */ (function (_super) {
        __extends(ModalRef, _super);
        function ModalRef() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return ModalRef;
    }(ngBootstrap.NgbModalRef));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * A service to handle modal
     */
    var ModalService = /** @class */ (function () {
        function ModalService(ngbModalService) {
            this.ngbModalService = ngbModalService;
            this.modals = [];
        }
        /**
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
        ModalService.prototype.open = /**
         * @param {?} content
         * @param {?=} options
         * @return {?}
         */
        function (content, options) {
            /** @type {?} */
            var activeModal;
            activeModal = this.ngbModalService.open(content, options);
            this.modals.push(activeModal);
            return activeModal;
        };
        /**
         * @return {?}
         */
        ModalService.prototype.getActiveModal = /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var modal = this.modals[this.modals.length - 1];
            return modal ? modal : null;
        };
        /**
         * @param {?=} reason
         * @return {?}
         */
        ModalService.prototype.dismissActiveModal = /**
         * @param {?=} reason
         * @return {?}
         */
        function (reason) {
            /** @type {?} */
            var modal = this.getActiveModal();
            if (modal) {
                modal.dismiss(reason);
                this.modals.pop();
            }
        };
        /**
         * @param {?=} reason
         * @return {?}
         */
        ModalService.prototype.closeActiveModal = /**
         * @param {?=} reason
         * @return {?}
         */
        function (reason) {
            /** @type {?} */
            var modal = this.getActiveModal();
            if (modal) {
                modal.close(reason);
                this.modals.pop();
            }
        };
        ModalService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        ModalService.ctorParameters = function () { return [
            { type: ngBootstrap.NgbModal }
        ]; };
        /** @nocollapse */ ModalService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ModalService_Factory() { return new ModalService(core.ɵɵinject(ngBootstrap.NgbModal)); }, token: ModalService, providedIn: "root" });
        return ModalService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ModalService.prototype.modals;
        /**
         * @type {?}
         * @private
         */
        ModalService.prototype.ngbModalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AnonymousConsentDialogComponent = /** @class */ (function () {
        function AnonymousConsentDialogComponent(config, modalService, anonymousConsentsService) {
            this.config = config;
            this.modalService = modalService;
            this.anonymousConsentsService = anonymousConsentsService;
            this.subscriptions = new rxjs.Subscription();
            this.showLegalDescription = true;
            this.iconTypes = ICON_TYPE;
            this.requiredConsents = [];
            // TODO(issue:4989) Anonymous consents - remove
            this.isLevel13 = core$1.isFeatureLevel(this.config, '1.3');
            if (Boolean(this.config.anonymousConsents)) {
                this.showLegalDescription = this.config.anonymousConsents.showLegalDescriptionInDialog;
                if (Boolean(this.config.anonymousConsents.requiredConsents)) {
                    this.requiredConsents = this.config.anonymousConsents.requiredConsents;
                }
            }
        }
        /**
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.templates$ = this.anonymousConsentsService.getTemplates();
            this.consents$ = this.anonymousConsentsService.getConsents();
            this.loading$ = this.anonymousConsentsService.getLoadTemplatesLoading();
        };
        /**
         * @param {?=} reason
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.closeModal = /**
         * @param {?=} reason
         * @return {?}
         */
        function (reason) {
            this.modalService.closeActiveModal(reason);
        };
        /**
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.rejectAll = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscriptions.add(rxjs.combineLatest([this.templates$, this.consents$])
                .pipe(operators.take(1), operators.distinctUntilChanged(), operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), templates = _b[0], consents = _b[1];
                return templates.forEach((/**
                 * @param {?} template
                 * @return {?}
                 */
                function (template) {
                    /** @type {?} */
                    var consent = _this.getCorrespondingConsent(template, consents);
                    if (_this.anonymousConsentsService.isConsentGiven(consent)) {
                        if (_this.isRequiredConsent(template)) {
                            return;
                        }
                        _this.anonymousConsentsService.withdrawConsent(template.id);
                    }
                }));
            })))
                .subscribe());
            this.closeModal('rejectAll');
        };
        /**
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.allowAll = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscriptions.add(rxjs.combineLatest([this.templates$, this.consents$])
                .pipe(operators.take(1), operators.distinctUntilChanged(), operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), templates = _b[0], consents = _b[1];
                return templates.forEach((/**
                 * @param {?} template
                 * @return {?}
                 */
                function (template) {
                    /** @type {?} */
                    var consent = _this.getCorrespondingConsent(template, consents);
                    if ((consent && consent.consentState == null) ||
                        _this.anonymousConsentsService.isConsentWithdrawn(consent)) {
                        if (_this.isRequiredConsent(template)) {
                            return;
                        }
                        _this.anonymousConsentsService.giveConsent(template.id);
                    }
                }));
            })))
                .subscribe());
            this.closeModal('allowAll');
        };
        /**
         * @private
         * @param {?} template
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.isRequiredConsent = /**
         * @private
         * @param {?} template
         * @return {?}
         */
        function (template) {
            return (Boolean(this.config.anonymousConsents) &&
                Boolean(this.config.anonymousConsents.requiredConsents) &&
                this.config.anonymousConsents.requiredConsents.includes(template.id));
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.onConsentChange = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var given = _a.given, template = _a.template;
            if (given) {
                this.anonymousConsentsService.giveConsent(template.id);
            }
            else {
                this.anonymousConsentsService.withdrawConsent(template.id);
            }
        };
        /**
         * @param {?} template
         * @param {?=} consents
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.getCorrespondingConsent = /**
         * @param {?} template
         * @param {?=} consents
         * @return {?}
         */
        function (template, consents) {
            var e_1, _a;
            if (consents === void 0) { consents = []; }
            try {
                for (var consents_1 = __values(consents), consents_1_1 = consents_1.next(); !consents_1_1.done; consents_1_1 = consents_1.next()) {
                    var consent = consents_1_1.value;
                    if (template.id === consent.templateCode) {
                        return consent;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (consents_1_1 && !consents_1_1.done && (_a = consents_1.return)) _a.call(consents_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return null;
        };
        /**
         * @return {?}
         */
        AnonymousConsentDialogComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscriptions.unsubscribe();
        };
        AnonymousConsentDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-anonymous-consent-dialog',
                        template: "<div #dialog>\n  <div *ngIf=\"loading$ | async; else dialogBody\">\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n\n  <!-- Modal Header -->\n  <ng-template #dialogBody>\n    <div class=\"cx-dialog-header modal-header\">\n      <div class=\"cx-dialog-title modal-title\">\n        {{ 'anonymousConsents.dialog.title' | cxTranslate }}\n      </div>\n      <button\n        type=\"button\"\n        class=\"close\"\n        aria-label=\"Close\"\n        (click)=\"closeModal('Cross click')\"\n      >\n        <span aria-hidden=\"true\">\n          <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n        </span>\n      </button>\n    </div>\n    <!-- Separator -->\n    <div\n      class=\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\"\n    ></div>\n    <div class=\"cx-dialog-description\" *ngIf=\"showLegalDescription\">\n      {{ 'anonymousConsents.dialog.legalDescription' | cxTranslate }}\n      <div\n        class=\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\"\n      ></div>\n    </div>\n    <!-- Actions -->\n    <div class=\"cx-dialog-buttons\">\n      <a tabindex=\"0\" class=\"btn-link cx-action-link\" (click)=\"rejectAll()\">{{\n        'anonymousConsents.dialog.clearAll' | cxTranslate\n      }}</a>\n      <a tabindex=\"0\" class=\"btn-link cx-action-link\" (click)=\"allowAll()\">{{\n        'anonymousConsents.dialog.selectAll' | cxTranslate\n      }}</a>\n    </div>\n    <!-- Modal Body -->\n    <div\n      class=\"cx-dialog-body modal-body\"\n      *ngIf=\"templates$ | async as templates\"\n    >\n      <div *ngIf=\"consents$ | async as consents\">\n        <div\n          class=\"cx-dialog-row col-sm-12 col-md-6\"\n          *ngFor=\"let template of templates\"\n        >\n          <cx-consent-management-form\n            [consentTemplate]=\"template\"\n            [requiredConsents]=\"requiredConsents\"\n            [consent]=\"getCorrespondingConsent(template, consents)\"\n            [isAnonymousConsentsEnabled]=\"true\"\n            [isLevel13]=\"isLevel13\"\n            (consentChanged)=\"onConsentChange($event)\"\n          ></cx-consent-management-form>\n        </div>\n      </div>\n    </div>\n  </ng-template>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        AnonymousConsentDialogComponent.ctorParameters = function () { return [
            { type: core$1.AnonymousConsentsConfig },
            { type: ModalService },
            { type: core$1.AnonymousConsentsService }
        ]; };
        return AnonymousConsentDialogComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        AnonymousConsentDialogComponent.prototype.subscriptions;
        /** @type {?} */
        AnonymousConsentDialogComponent.prototype.showLegalDescription;
        /** @type {?} */
        AnonymousConsentDialogComponent.prototype.iconTypes;
        /** @type {?} */
        AnonymousConsentDialogComponent.prototype.requiredConsents;
        /** @type {?} */
        AnonymousConsentDialogComponent.prototype.loading$;
        /** @type {?} */
        AnonymousConsentDialogComponent.prototype.templates$;
        /** @type {?} */
        AnonymousConsentDialogComponent.prototype.consents$;
        /** @type {?} */
        AnonymousConsentDialogComponent.prototype.isLevel13;
        /**
         * @type {?}
         * @private
         */
        AnonymousConsentDialogComponent.prototype.config;
        /**
         * @type {?}
         * @private
         */
        AnonymousConsentDialogComponent.prototype.modalService;
        /**
         * @type {?}
         * @private
         */
        AnonymousConsentDialogComponent.prototype.anonymousConsentsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AnonymousConsentManagementBannerComponent = /** @class */ (function () {
        function AnonymousConsentManagementBannerComponent(modalService, anonymousConsentsService) {
            this.modalService = modalService;
            this.anonymousConsentsService = anonymousConsentsService;
            this.subscriptions = new rxjs.Subscription();
            this.bannerVisible$ = this.anonymousConsentsService.isBannerVisible();
        }
        /**
         * @return {?}
         */
        AnonymousConsentManagementBannerComponent.prototype.viewDetails = /**
         * @return {?}
         */
        function () {
            this.hideBanner();
            this.modalService.open(AnonymousConsentDialogComponent, {
                centered: true,
                size: 'lg',
            });
        };
        /**
         * @return {?}
         */
        AnonymousConsentManagementBannerComponent.prototype.allowAll = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscriptions.add(this.anonymousConsentsService
                .giveAllConsents()
                .pipe(operators.tap((/**
             * @param {?} _
             * @return {?}
             */
            function (_) { return _this.hideBanner(); })))
                .subscribe());
        };
        /**
         * @return {?}
         */
        AnonymousConsentManagementBannerComponent.prototype.hideBanner = /**
         * @return {?}
         */
        function () {
            this.anonymousConsentsService.toggleBannerDismissed(true);
        };
        /**
         * @return {?}
         */
        AnonymousConsentManagementBannerComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscriptions.unsubscribe();
        };
        AnonymousConsentManagementBannerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-anonymous-consent-management-banner',
                        template: "<ng-container *ngIf=\"bannerVisible$ | async as bannerVisible\">\n  <div\n    [ngClass]=\"{ 'anonymous-consent-banner-hidden': !bannerVisible }\"\n    class=\"anonymous-consent-banner\"\n  >\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-lg-8 col-xs-12\">\n          <div class=\"cx-banner-title\">\n            {{ 'anonymousConsents.banner.title' | cxTranslate }}\n          </div>\n          <div class=\"cx-banner-description\">\n            {{ 'anonymousConsents.banner.description' | cxTranslate }}\n          </div>\n        </div>\n\n        <div class=\"col-lg-4 col-xs-12 cx-banner-buttons\">\n          <button class=\"btn btn-action\" (click)=\"viewDetails()\">\n            {{ 'anonymousConsents.banner.viewDetails' | cxTranslate }}\n          </button>\n          <button class=\"btn btn-primary\" (click)=\"allowAll()\">\n            {{ 'anonymousConsents.banner.allowAll' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        AnonymousConsentManagementBannerComponent.ctorParameters = function () { return [
            { type: ModalService },
            { type: core$1.AnonymousConsentsService }
        ]; };
        return AnonymousConsentManagementBannerComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        AnonymousConsentManagementBannerComponent.prototype.subscriptions;
        /** @type {?} */
        AnonymousConsentManagementBannerComponent.prototype.bannerVisible$;
        /**
         * @type {?}
         * @private
         */
        AnonymousConsentManagementBannerComponent.prototype.modalService;
        /**
         * @type {?}
         * @private
         */
        AnonymousConsentManagementBannerComponent.prototype.anonymousConsentsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function CardAction() { }
    if (false) {
        /** @type {?} */
        CardAction.prototype.event;
        /** @type {?} */
        CardAction.prototype.name;
    }
    /**
     * @record
     */
    function CardLinkAction() { }
    if (false) {
        /** @type {?} */
        CardLinkAction.prototype.link;
        /** @type {?} */
        CardLinkAction.prototype.name;
    }
    /**
     * @record
     */
    function Card() { }
    if (false) {
        /** @type {?|undefined} */
        Card.prototype.header;
        /** @type {?|undefined} */
        Card.prototype.title;
        /** @type {?|undefined} */
        Card.prototype.textBold;
        /** @type {?|undefined} */
        Card.prototype.text;
        /** @type {?|undefined} */
        Card.prototype.img;
        /** @type {?|undefined} */
        Card.prototype.actions;
        /** @type {?|undefined} */
        Card.prototype.deleteMsg;
    }
    var CardComponent = /** @class */ (function () {
        function CardComponent() {
            this.iconTypes = ICON_TYPE;
            this.deleteCard = new core.EventEmitter();
            this.setDefaultCard = new core.EventEmitter();
            this.sendCard = new core.EventEmitter();
            this.editCard = new core.EventEmitter();
            this.cancelCard = new core.EventEmitter();
            this.border = false;
            this.editMode = false;
            this.isDefault = false;
            this.fitToContainer = false;
        }
        // ACTIONS
        // ACTIONS
        /**
         * @return {?}
         */
        CardComponent.prototype.setEditMode = 
        // ACTIONS
        /**
         * @return {?}
         */
        function () {
            this.editMode = true;
        };
        /**
         * @return {?}
         */
        CardComponent.prototype.cancelEdit = /**
         * @return {?}
         */
        function () {
            this.editMode = false;
            this.cancelCard.emit(5);
        };
        /**
         * @return {?}
         */
        CardComponent.prototype.delete = /**
         * @return {?}
         */
        function () {
            this.deleteCard.emit(1);
        };
        /**
         * @return {?}
         */
        CardComponent.prototype.setDefault = /**
         * @return {?}
         */
        function () {
            this.isDefault = true;
            this.setDefaultCard.emit(2);
        };
        /**
         * @return {?}
         */
        CardComponent.prototype.send = /**
         * @return {?}
         */
        function () {
            this.sendCard.emit(3);
        };
        /**
         * @return {?}
         */
        CardComponent.prototype.edit = /**
         * @return {?}
         */
        function () {
            this.editCard.emit(4);
        };
        /**
         * @return {?}
         */
        CardComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () { };
        CardComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-card',
                        template: "<div\n  *ngIf=\"content\"\n  class=\"cx-card\"\n  [class.cx-card-border]=\"border\"\n  [class.cx-card-fit-to-container]=\"fitToContainer\"\n>\n  <!-- Card Header -->\n  <div *ngIf=\"content.header && !editMode\" class=\"card-header\">\n    {{ content.header }}\n  </div>\n  <!-- Card Body -->\n  <div class=\"card-body cx-card-body\" [class.cx-card-delete]=\"editMode\">\n    <!-- Edit message -->\n    <div *ngIf=\"editMode\" class=\"cx-card-delete-msg\">\n      {{ content.deleteMsg }}\n    </div>\n    <!-- Card title -->\n    <h4 *ngIf=\"content.title\" class=\"cx-card-title\">\n      {{ content.title }}\n    </h4>\n    <!-- Card Content -->\n    <div class=\"cx-card-container\">\n      <!-- Card Label -->\n      <div class=\"cx-card-label-container\">\n        <div *ngIf=\"content.textBold\" class=\"cx-card-label-bold\">\n          {{ content.textBold }}\n        </div>\n        <div *ngFor=\"let line of content.text\">\n          <div class=\"cx-card-label\">{{ line }}</div>\n        </div>\n      </div>\n      <!-- Image -->\n      <div *ngIf=\"content.img\" class=\"cx-card-img-container\">\n        <cx-icon [type]=\"content.img\"></cx-icon>\n      </div>\n    </div>\n    <!-- Edit Mode Actions -->\n    <div *ngIf=\"editMode\" class=\"row cx-card-body-delete\">\n      <div class=\"col-md-6\">\n        <button class=\"btn btn-block btn-secondary\" (click)=\"cancelEdit()\">\n          {{ 'common.cancel' | cxTranslate }}\n        </button>\n      </div>\n      <div class=\"col-md-6\">\n        <button class=\"btn btn-block btn-primary\" (click)=\"delete()\">\n          {{ 'common.delete' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <!-- Actions -->\n    <div *ngIf=\"content.actions && !editMode\" class=\"cx-card-actions\">\n      <div *ngFor=\"let action of content.actions\">\n        <div [ngSwitch]=\"action.event\">\n          <a\n            *ngSwitchCase=\"'delete'\"\n            class=\"cx-card-link card-link btn-link\"\n            (click)=\"delete()\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchCase=\"'default'\"\n            class=\"cx-card-link card-link btn-link\"\n            (click)=\"setDefault()\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchCase=\"'send'\"\n            class=\"cx-card-link card-link btn-link\"\n            (click)=\"send()\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchCase=\"'edit'\"\n            class=\"cx-card-link card-link btn-link\"\n            (click)=\"edit()\"\n            >{{ action.name }}</a\n          >\n          <a\n            *ngSwitchDefault\n            href=\"{{ action.link }}\"\n            class=\"card-link btn-link\"\n            >{{ action.name }}</a\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        CardComponent.ctorParameters = function () { return []; };
        CardComponent.propDecorators = {
            deleteCard: [{ type: core.Output }],
            setDefaultCard: [{ type: core.Output }],
            sendCard: [{ type: core.Output }],
            editCard: [{ type: core.Output }],
            cancelCard: [{ type: core.Output }],
            border: [{ type: core.Input }],
            editMode: [{ type: core.Input }],
            isDefault: [{ type: core.Input }],
            content: [{ type: core.Input }],
            fitToContainer: [{ type: core.Input }]
        };
        return CardComponent;
    }());
    if (false) {
        /** @type {?} */
        CardComponent.prototype.iconTypes;
        /** @type {?} */
        CardComponent.prototype.deleteCard;
        /** @type {?} */
        CardComponent.prototype.setDefaultCard;
        /** @type {?} */
        CardComponent.prototype.sendCard;
        /** @type {?} */
        CardComponent.prototype.editCard;
        /** @type {?} */
        CardComponent.prototype.cancelCard;
        /** @type {?} */
        CardComponent.prototype.border;
        /** @type {?} */
        CardComponent.prototype.editMode;
        /** @type {?} */
        CardComponent.prototype.isDefault;
        /** @type {?} */
        CardComponent.prototype.content;
        /** @type {?} */
        CardComponent.prototype.fitToContainer;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CardModule = /** @class */ (function () {
        function CardModule() {
        }
        CardModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, core$1.I18nModule, IconModule],
                        declarations: [CardComponent],
                        exports: [CardComponent],
                    },] }
        ];
        return CardModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CarouselService = /** @class */ (function () {
        function CarouselService(winRef) {
            this.winRef = winRef;
        }
        /**
         * The number of items per slide is calculated by the help of
         * the item width and the available width of the host element.
         * This appoach makes it possible to place the carousel in different
         * layouts. Instead of using the page breakpoints, the host size is
         * taken into account.
         *
         * Since there's no element resize API available, we use the
         * window `resize` event, so that we can adjust the number of items
         * whenever the window got resized.
         */
        /**
         * The number of items per slide is calculated by the help of
         * the item width and the available width of the host element.
         * This appoach makes it possible to place the carousel in different
         * layouts. Instead of using the page breakpoints, the host size is
         * taken into account.
         *
         * Since there's no element resize API available, we use the
         * window `resize` event, so that we can adjust the number of items
         * whenever the window got resized.
         * @param {?} nativeElement
         * @param {?} itemWidth
         * @return {?}
         */
        CarouselService.prototype.getItemsPerSlide = /**
         * The number of items per slide is calculated by the help of
         * the item width and the available width of the host element.
         * This appoach makes it possible to place the carousel in different
         * layouts. Instead of using the page breakpoints, the host size is
         * taken into account.
         *
         * Since there's no element resize API available, we use the
         * window `resize` event, so that we can adjust the number of items
         * whenever the window got resized.
         * @param {?} nativeElement
         * @param {?} itemWidth
         * @return {?}
         */
        function (nativeElement, itemWidth) {
            var _this = this;
            return this.winRef.resize$.pipe(operators.map((/**
             * @return {?}
             */
            function () { return ((/** @type {?} */ (nativeElement))).clientWidth; })), operators.map((/**
             * @param {?} totalWidth
             * @return {?}
             */
            function (totalWidth) { return _this.calculateItems(totalWidth, itemWidth); })));
        };
        /**
         * Calculates the number of items per given hostSize.  calculated based on the given
         * intended size in pixels or percentages. The
         *
         * @param availableWidth The available width in pixels for the carousel items.
         * @param itemWidth The width per carousel item, in px or percentage.
         */
        /**
         * Calculates the number of items per given hostSize.  calculated based on the given
         * intended size in pixels or percentages. The
         *
         * @private
         * @param {?} availableWidth The available width in pixels for the carousel items.
         * @param {?} itemWidth The width per carousel item, in px or percentage.
         * @return {?}
         */
        CarouselService.prototype.calculateItems = /**
         * Calculates the number of items per given hostSize.  calculated based on the given
         * intended size in pixels or percentages. The
         *
         * @private
         * @param {?} availableWidth The available width in pixels for the carousel items.
         * @param {?} itemWidth The width per carousel item, in px or percentage.
         * @return {?}
         */
        function (availableWidth, itemWidth) {
            /** @type {?} */
            var calculatedItems = 0;
            if (itemWidth.endsWith('px')) {
                /** @type {?} */
                var num = itemWidth.substring(0, itemWidth.length - 2);
                calculatedItems = availableWidth / (/** @type {?} */ (((/** @type {?} */ (num)))));
            }
            if (itemWidth.endsWith('%')) {
                /** @type {?} */
                var perc = itemWidth.substring(0, itemWidth.length - 1);
                calculatedItems =
                    availableWidth / (availableWidth * ((/** @type {?} */ (((/** @type {?} */ (perc))))) / 100));
            }
            return Math.floor(calculatedItems) || 1;
        };
        CarouselService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CarouselService.ctorParameters = function () { return [
            { type: core$1.WindowRef }
        ]; };
        /** @nocollapse */ CarouselService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CarouselService_Factory() { return new CarouselService(core.ɵɵinject(core$1.WindowRef)); }, token: CarouselService, providedIn: "root" });
        return CarouselService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CarouselService.prototype.winRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Generic carousel component that can be used to render any carousel items,
     * such as products, images, banners, or any component. Carousel items are
     * rendered in so-called carousel slides, and the previous/next buttons as well as
     * the indicator-buttons can used to navigate the slides.
     *
     * The component uses an array of Observables (`items$`) as an input, to allow
     * for lazy loading of items.
     *
     * The number of items per slide is calculated with the `itemWidth`, which can given
     * in pixels or percentage.
     *
     * To allow for flexible rendering of items, the rendering is delegated to the
     * given `template`. This allows for maximum flexibility.
     */
    var CarouselComponent = /** @class */ (function () {
        function CarouselComponent(el, service) {
            this.el = el;
            this.service = service;
            /**
             * Specifies the minimum size of the carousel item, either in px or %.
             * This value is used for the calculation of numbers per carousel, so that
             * the number of carousel items is dynamic. The calculation uses the `itemWidth`
             * and the host element `clientWidth`, so that the carousel is reusable in
             * different layouts (for example in a 50% grid).
             */
            this.itemWidth = '300px';
            /**
             * Indicates whether the visual indicators are used.
             */
            this.hideIndicators = false;
            this.indicatorIcon = ICON_TYPE.CIRCLE;
            this.previousIcon = ICON_TYPE.CARET_LEFT;
            this.nextIcon = ICON_TYPE.CARET_RIGHT;
        }
        Object.defineProperty(CarouselComponent.prototype, "setItems", {
            set: /**
             * @param {?} inputItems
             * @return {?}
             */
            function (inputItems) {
                this.items = inputItems;
                //Reset slider when changing products
                this.activeSlide = 0;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        CarouselComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (!this.template && core.isDevMode()) {
                console.error('No template reference provided to render the carousel items for the `cx-carousel`');
                return;
            }
            this.size$ = this.service
                .getItemsPerSlide(this.el.nativeElement, this.itemWidth)
                .pipe(operators.tap((/**
             * @return {?}
             */
            function () { return (_this.activeSlide = 0); })));
        };
        CarouselComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-carousel',
                        template: "<ng-container *ngIf=\"items?.length > 0 && (size$ | async) as size\">\n  <h3 *ngIf=\"title\">{{ title }}</h3>\n\n  <div class=\"carousel-panel\" [ngClass]=\"'size-' + size\">\n    <button\n      *ngIf=\"size < items.length\"\n      class=\"previous\"\n      (click)=\"activeSlide = activeSlide - size\"\n      [disabled]=\"activeSlide === 0\"\n    >\n      <cx-icon [type]=\"previousIcon\"></cx-icon>\n    </button>\n\n    <div class=\"slides\">\n      <ng-container *ngFor=\"let _ of items; let i = index\">\n        <div class=\"slide\" *ngIf=\"i % size === 0\">\n          <ng-container\n            *ngFor=\"let item of items | slice: i:i + size; let j = index\"\n          >\n            <div\n              *ngIf=\"item | async as data\"\n              class=\"item\"\n              [class.active]=\"i === activeSlide\"\n            >\n              <ng-container\n                *ngTemplateOutlet=\"template; context: { item: data }\"\n              ></ng-container>\n            </div>\n          </ng-container>\n        </div>\n      </ng-container>\n    </div>\n\n    <button\n      *ngIf=\"size < items.length\"\n      class=\"next\"\n      (click)=\"activeSlide = activeSlide + size\"\n      tabindex=\"0\"\n      [disabled]=\"activeSlide > items.length - size - 1\"\n    >\n      <cx-icon [type]=\"nextIcon\"></cx-icon>\n    </button>\n  </div>\n\n  <div *ngIf=\"!hideIndicators && size < items.length\" class=\"indicators\">\n    <ng-container *ngFor=\"let _ of items; let i = index\">\n      <button\n        *ngIf=\"i % size === 0\"\n        (focus)=\"activeSlide = i\"\n        [disabled]=\"i === activeSlide\"\n        tabindex=\"0\"\n      >\n        <cx-icon [type]=\"indicatorIcon\"></cx-icon>\n      </button>\n    </ng-container>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CarouselComponent.ctorParameters = function () { return [
            { type: core.ElementRef },
            { type: CarouselService }
        ]; };
        CarouselComponent.propDecorators = {
            title: [{ type: core.Input }],
            setItems: [{ type: core.Input, args: ['items',] }],
            template: [{ type: core.Input }],
            itemWidth: [{ type: core.Input }],
            hideIndicators: [{ type: core.Input }],
            indicatorIcon: [{ type: core.Input }],
            previousIcon: [{ type: core.Input }],
            nextIcon: [{ type: core.Input }]
        };
        return CarouselComponent;
    }());
    if (false) {
        /**
         * The title is rendered as the carousel heading.
         * @type {?}
         */
        CarouselComponent.prototype.title;
        /**
         * The items$ represent the carousel items. The items$ are
         * observables so that the items can be loaded on demand.
         * @type {?}
         */
        CarouselComponent.prototype.items;
        /**
         * The template is rendered for each item, so that the actual
         * view can be given by the compoent that uses the `CarouselComponent`.
         * @type {?}
         */
        CarouselComponent.prototype.template;
        /**
         * Specifies the minimum size of the carousel item, either in px or %.
         * This value is used for the calculation of numbers per carousel, so that
         * the number of carousel items is dynamic. The calculation uses the `itemWidth`
         * and the host element `clientWidth`, so that the carousel is reusable in
         * different layouts (for example in a 50% grid).
         * @type {?}
         */
        CarouselComponent.prototype.itemWidth;
        /**
         * Indicates whether the visual indicators are used.
         * @type {?}
         */
        CarouselComponent.prototype.hideIndicators;
        /** @type {?} */
        CarouselComponent.prototype.indicatorIcon;
        /** @type {?} */
        CarouselComponent.prototype.previousIcon;
        /** @type {?} */
        CarouselComponent.prototype.nextIcon;
        /** @type {?} */
        CarouselComponent.prototype.activeSlide;
        /** @type {?} */
        CarouselComponent.prototype.size$;
        /**
         * @type {?}
         * @protected
         */
        CarouselComponent.prototype.el;
        /**
         * @type {?}
         * @protected
         */
        CarouselComponent.prototype.service;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var BREAKPOINT = {
        xs: 'xs',
        sm: 'sm',
        md: 'md',
        lg: 'lg',
        xl: 'xl',
    };
    /**
     * The LayoutConfig supports the configuration of page slots by page templates
     * or page sections, such as headers and footers. The configuration also supports
     * adaptive design per breadpoint (not per device type), so that the DOM is (re)rendered
     * por a given breakpoint.
     * @abstract
     */
    var   /**
     * The LayoutConfig supports the configuration of page slots by page templates
     * or page sections, such as headers and footers. The configuration also supports
     * adaptive design per breadpoint (not per device type), so that the DOM is (re)rendered
     * por a given breakpoint.
     * @abstract
     */
    LayoutConfig = /** @class */ (function () {
        function LayoutConfig() {
        }
        return LayoutConfig;
    }());
    if (false) {
        /**
         * The breakpoint configuration is used when the DOM is (re)rendered in specific view.
         * This allows for adaptive rendering, so that the DOM is rendered for specific breakpoints.
         * @type {?}
         */
        LayoutConfig.prototype.breakpoints;
        /** @type {?} */
        LayoutConfig.prototype.layoutSlots;
        /**
         * Deferrred loading is a technique to hold of with the loading / creation
         * of DOM elements which are not not in the initial view port.
         * This technique wil increase performance.
         * @type {?}
         */
        LayoutConfig.prototype.deferredLoading;
    }

    var _a;
    /** @type {?} */
    var DEFAULT_BREAKPOINTS = (_a = {},
        _a[BREAKPOINT.xs] = 576,
        _a[BREAKPOINT.sm] = 768,
        _a[BREAKPOINT.md] = 992,
        _a[BREAKPOINT.lg] = 1200,
        _a);
    var BreakpointService = /** @class */ (function () {
        function BreakpointService(winRef, config) {
            this.winRef = winRef;
            this.config = config;
        }
        /**
         * @param {?} breakpoint
         * @return {?}
         */
        BreakpointService.prototype.getSize = /**
         * @param {?} breakpoint
         * @return {?}
         */
        function (breakpoint) {
            return this.config.breakpoints
                ? this.config.breakpoints[breakpoint]
                : DEFAULT_BREAKPOINTS[breakpoint];
        };
        Object.defineProperty(BreakpointService.prototype, "breakpoint$", {
            get: /**
             * @return {?}
             */
            function () {
                var _this = this;
                if (!this.window) {
                    return rxjs.of(BREAKPOINT.xs);
                }
                return rxjs.fromEvent(this.window, 'resize').pipe(operators.debounceTime(300), operators.startWith({ target: this.window }), operators.map((/**
                 * @param {?} event
                 * @return {?}
                 */
                function (event) { return _this.getBreakpoint(((/** @type {?} */ (event.target))).innerWidth); })), operators.distinctUntilChanged());
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(BreakpointService.prototype, "breakpoints", {
            get: /**
             * @return {?}
             */
            function () {
                return [
                    BREAKPOINT.xs,
                    BREAKPOINT.sm,
                    BREAKPOINT.md,
                    BREAKPOINT.lg,
                    BREAKPOINT.xl,
                ];
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @protected
         * @param {?} windowWidth
         * @return {?}
         */
        BreakpointService.prototype.getBreakpoint = /**
         * @protected
         * @param {?} windowWidth
         * @return {?}
         */
        function (windowWidth) {
            /** @type {?} */
            var breakpoint = this.getClosest(windowWidth);
            return BREAKPOINT[breakpoint || BREAKPOINT.lg];
        };
        /**
         * @protected
         * @param {?=} windowWidth
         * @return {?}
         */
        BreakpointService.prototype.getClosest = /**
         * @protected
         * @param {?=} windowWidth
         * @return {?}
         */
        function (windowWidth) {
            var _this = this;
            if (!windowWidth) {
                windowWidth = this.window.innerWidth;
            }
            return windowWidth < this.getSize(BREAKPOINT.xs)
                ? BREAKPOINT.xs
                : this.breakpoints.reverse().find((/**
                 * @param {?} br
                 * @return {?}
                 */
                function (br) { return windowWidth >= _this.getSize(br); }));
        };
        Object.defineProperty(BreakpointService.prototype, "window", {
            get: /**
             * @return {?}
             */
            function () {
                return this.winRef.nativeWindow;
            },
            enumerable: true,
            configurable: true
        });
        BreakpointService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        BreakpointService.ctorParameters = function () { return [
            { type: core$1.WindowRef },
            { type: LayoutConfig }
        ]; };
        /** @nocollapse */ BreakpointService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function BreakpointService_Factory() { return new BreakpointService(core.ɵɵinject(core$1.WindowRef), core.ɵɵinject(LayoutConfig)); }, token: BreakpointService, providedIn: "root" });
        return BreakpointService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        BreakpointService.prototype.winRef;
        /**
         * @type {?}
         * @private
         */
        BreakpointService.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * the default format is used for browsers that do not support
     * @type {?}
     */
    var DEFAULT_MEDIA_FORMAT = 'tablet';
    var MediaService = /** @class */ (function () {
        function MediaService(config, breakpointService) {
            this.config = config;
            this.breakpointService = breakpointService;
        }
        Object.defineProperty(MediaService.prototype, "mediaFormats", {
            get: /**
             * @private
             * @return {?}
             */
            function () {
                return [
                    {
                        code: 'mobile',
                        threshold: this.breakpointService.getSize(BREAKPOINT.xs),
                    },
                    {
                        code: 'tablet',
                        threshold: this.breakpointService.getSize(BREAKPOINT.sm),
                    },
                    {
                        code: 'desktop',
                        threshold: this.breakpointService.getSize(BREAKPOINT.md),
                    },
                    {
                        code: 'widescreen',
                        threshold: this.breakpointService.getSize(BREAKPOINT.lg),
                    },
                ];
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} container
         * @param {?=} format
         * @param {?=} alt
         * @return {?}
         */
        MediaService.prototype.getMedia = /**
         * @param {?} container
         * @param {?=} format
         * @param {?=} alt
         * @return {?}
         */
        function (container, format, alt) {
            return {
                src: this.getMainImage(container, format),
                srcset: this.getSrcSet(container),
                alt: alt || this.getAlt(container, format),
            };
        };
        /**
         * @private
         * @param {?} media
         * @param {?=} format
         * @return {?}
         */
        MediaService.prototype.getMainImage = /**
         * @private
         * @param {?} media
         * @param {?=} format
         * @return {?}
         */
        function (media, format) {
            if (media && media[format || DEFAULT_MEDIA_FORMAT]) {
                return this.getImageUrl(media[format || DEFAULT_MEDIA_FORMAT].url);
            }
            else if (media && media.url) {
                return this.getImageUrl(media.url);
            }
            else if (media && media[this.getHighestAvailableFormat(media)]) {
                return this.getImageUrl(media[this.getHighestAvailableFormat(media)].url);
            }
            else {
                return null;
            }
        };
        /**
         * returns highest resolution format name from media formats
         */
        /**
         * returns highest resolution format name from media formats
         * @private
         * @param {?} media
         * @return {?}
         */
        MediaService.prototype.getHighestAvailableFormat = /**
         * returns highest resolution format name from media formats
         * @private
         * @param {?} media
         * @return {?}
         */
        function (media) {
            if (media) {
                /** @type {?} */
                var mediaFormat_1;
                this.mediaFormats.forEach((/**
                 * @param {?} format
                 * @return {?}
                 */
                function (format) {
                    if (!mediaFormat_1 ||
                        (mediaFormat_1.threshold < format.threshold && media[format.code])) {
                        mediaFormat_1 = format;
                    }
                }));
                return mediaFormat_1.code;
            }
            return null;
        };
        /**
         * @private
         * @param {?} media
         * @param {?=} format
         * @return {?}
         */
        MediaService.prototype.getAlt = /**
         * @private
         * @param {?} media
         * @param {?=} format
         * @return {?}
         */
        function (media, format) {
            if (!media) {
                return undefined;
            }
            else if (media[format || DEFAULT_MEDIA_FORMAT]) {
                return media[format || DEFAULT_MEDIA_FORMAT].altText;
            }
            else if (media.altText) {
                return media.altText;
            }
        };
        /**
         * builds a set of images aligned with the breakpoints
         */
        /**
         * builds a set of images aligned with the breakpoints
         * @private
         * @param {?} media
         * @return {?}
         */
        MediaService.prototype.getSrcSet = /**
         * builds a set of images aligned with the breakpoints
         * @private
         * @param {?} media
         * @return {?}
         */
        function (media) {
            var _this = this;
            if (!media) {
                return undefined;
            }
            /** @type {?} */
            var srcset = this.mediaFormats.reduce((/**
             * @param {?} set
             * @param {?} format
             * @return {?}
             */
            function (set, format) {
                if (!!media[format.code]) {
                    if (set) {
                        set += ', ';
                    }
                    set += _this.getImageUrl(media[format.code].url) + " " + format.threshold + "w";
                }
                return set;
            }), '');
            return srcset === '' ? undefined : srcset;
        };
        /**
         * @private
         * @param {?} url
         * @return {?}
         */
        MediaService.prototype.getImageUrl = /**
         * @private
         * @param {?} url
         * @return {?}
         */
        function (url) {
            if (!url) {
                return null;
            }
            return url.startsWith('http') ? url : this.getBaseUrl() + url;
        };
        /**
         * @private
         * @return {?}
         */
        MediaService.prototype.getBaseUrl = /**
         * @private
         * @return {?}
         */
        function () {
            return (this.config.backend.media.baseUrl || this.config.backend.occ.baseUrl || '');
        };
        MediaService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        MediaService.ctorParameters = function () { return [
            { type: core$1.OccConfig },
            { type: BreakpointService }
        ]; };
        /** @nocollapse */ MediaService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function MediaService_Factory() { return new MediaService(core.ɵɵinject(core$1.OccConfig), core.ɵɵinject(BreakpointService)); }, token: MediaService, providedIn: "root" });
        return MediaService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        MediaService.prototype.config;
        /**
         * @type {?}
         * @protected
         */
        MediaService.prototype.breakpointService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MediaComponent = /** @class */ (function () {
        function MediaComponent(mediaService) {
            this.mediaService = mediaService;
            /**
             * Once the media is loaded, we emit an event.
             */
            this.loaded = new core.EventEmitter();
            /**
             * The `cx-media` component has an `is-initialized` class as long as the
             * media is being initialized.
             */
            this.isInitialized = false;
            /**
             * The `cx-media` component has a `is-loading` class as long as the
             * media is loaded. Wehn the media is loaded, the `is-initialized` class
             * is added.
             */
            this.isLoading = true;
            /**
             * When there's no media provided for the content, or in case an error
             * happened during loading, we add the `is-missing` class. Visual effects
             * can be controlled by CSS.
             */
            this.isMissing = false;
        }
        /**
         * @return {?}
         */
        MediaComponent.prototype.ngOnChanges = /**
         * @return {?}
         */
        function () {
            this.create();
        };
        /**
         * Creates the `Media` object
         */
        /**
         * Creates the `Media` object
         * @private
         * @return {?}
         */
        MediaComponent.prototype.create = /**
         * Creates the `Media` object
         * @private
         * @return {?}
         */
        function () {
            this.media = this.mediaService.getMedia(this.container, this.format, this.alt);
            if (!this.media.src) {
                this.handleMissing();
            }
        };
        /**
         * This handler is called from the UI when the image is loaded.
         */
        /**
         * This handler is called from the UI when the image is loaded.
         * @return {?}
         */
        MediaComponent.prototype.loadHandler = /**
         * This handler is called from the UI when the image is loaded.
         * @return {?}
         */
        function () {
            this.isLoading = false;
            this.isInitialized = true;
            this.isMissing = false;
            this.loaded.emit(true);
        };
        /**
         * Whenever an error happens during load, we mark the component
         * with css classes to have a missing media.
         */
        /**
         * Whenever an error happens during load, we mark the component
         * with css classes to have a missing media.
         * @return {?}
         */
        MediaComponent.prototype.errorHandler = /**
         * Whenever an error happens during load, we mark the component
         * with css classes to have a missing media.
         * @return {?}
         */
        function () {
            this.handleMissing();
        };
        /**
         * @private
         * @return {?}
         */
        MediaComponent.prototype.handleMissing = /**
         * @private
         * @return {?}
         */
        function () {
            this.isLoading = false;
            this.isInitialized = true;
            this.isMissing = true;
            this.loaded.emit(false);
        };
        MediaComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-media',
                        template: "<img\n  *ngIf=\"media?.src\"\n  [attr.src]=\"media.src\"\n  [attr.srcset]=\"media.srcset\"\n  [attr.alt]=\"media.alt\"\n  (load)=\"loadHandler()\"\n  (error)=\"errorHandler()\"\n/>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        MediaComponent.ctorParameters = function () { return [
            { type: MediaService }
        ]; };
        MediaComponent.propDecorators = {
            container: [{ type: core.Input }],
            format: [{ type: core.Input }],
            alt: [{ type: core.Input }],
            loaded: [{ type: core.Output }],
            isInitialized: [{ type: core.HostBinding, args: ['class.is-initialized',] }],
            isLoading: [{ type: core.HostBinding, args: ['class.is-loading',] }],
            isMissing: [{ type: core.HostBinding, args: ['class.is-missing',] }]
        };
        return MediaComponent;
    }());
    if (false) {
        /**
         * The media container can hold multiple media items, so that
         * a specific media (by format) can be used or multiple media
         * can be provided in a `srcset` so the browser will figure out
         * the best media for the device.
         * @type {?}
         */
        MediaComponent.prototype.container;
        /**
         * if a media format is given, a media for the given format will be rendered
         * @type {?}
         */
        MediaComponent.prototype.format;
        /**
         * A specific alt text for an image, which overrules the alt text
         * from the container data.
         * @type {?}
         */
        MediaComponent.prototype.alt;
        /**
         * Once the media is loaded, we emit an event.
         * @type {?}
         */
        MediaComponent.prototype.loaded;
        /**
         * The media contains the info for the UI to create the image. This media
         * object might contain more info once other media types (i.e. video) is supported.
         * @type {?}
         */
        MediaComponent.prototype.media;
        /**
         * The `cx-media` component has an `is-initialized` class as long as the
         * media is being initialized.
         * @type {?}
         */
        MediaComponent.prototype.isInitialized;
        /**
         * The `cx-media` component has a `is-loading` class as long as the
         * media is loaded. Wehn the media is loaded, the `is-initialized` class
         * is added.
         * @type {?}
         */
        MediaComponent.prototype.isLoading;
        /**
         * When there's no media provided for the content, or in case an error
         * happened during loading, we add the `is-missing` class. Visual effects
         * can be controlled by CSS.
         * @type {?}
         */
        MediaComponent.prototype.isMissing;
        /**
         * @type {?}
         * @protected
         */
        MediaComponent.prototype.mediaService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MediaModule = /** @class */ (function () {
        function MediaModule() {
        }
        MediaModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [MediaComponent],
                        exports: [MediaComponent],
                    },] }
        ];
        return MediaModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CarouselModule = /** @class */ (function () {
        function CarouselModule() {
        }
        CarouselModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, router.RouterModule, IconModule, MediaModule, core$1.UrlModule],
                        declarations: [CarouselComponent],
                        exports: [CarouselComponent],
                    },] }
        ];
        return CarouselModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var COUNTER_CONTROL_ACCESSOR = {
        provide: forms.NG_VALUE_ACCESSOR,
        /* tslint:disable-next-line */
        useExisting: core.forwardRef((/**
         * @return {?}
         */
        function () { return ItemCounterComponent; })),
        multi: true,
    };
    var ItemCounterComponent = /** @class */ (function () {
        function ItemCounterComponent(renderer) {
            this.renderer = renderer;
            this.value = 0;
            this.step = 1;
            this.async = false;
            this.cartIsLoading = false;
            this.isValueChangeable = false;
            this.update = new core.EventEmitter();
            this.isValueOutOfRange = false;
            this.inputValue = new forms.FormControl({
                disabled: this.isValueChangeable,
            });
            this.onTouch = (/**
             * @return {?}
             */
            function () { });
            this.onModelChange = (/**
             * @param {?} _rating
             * @return {?}
             */
            function (_rating) { });
        }
        /**
         * @return {?}
         */
        ItemCounterComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.writeValue(this.min || 0);
            this.subscription = this.inputValue.valueChanges
                .pipe(operators.debounceTime(300))
                .subscribe((/**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (value) {
                    _this.manualChange(Number(value));
                }
            }));
        };
        /**
         * @return {?}
         */
        ItemCounterComponent.prototype.ngOnChanges = /**
         * @return {?}
         */
        function () {
            if (this.cartIsLoading) {
                this.inputValue.disable({
                    onlySelf: true,
                    emitEvent: false,
                });
            }
            else {
                this.inputValue.enable({
                    onlySelf: true,
                    emitEvent: false,
                });
            }
        };
        /**
         * If value is too small it will be set to min, if is too big it will be set to max.
         */
        /**
         * If value is too small it will be set to min, if is too big it will be set to max.
         * @param {?} incomingValue
         * @return {?}
         */
        ItemCounterComponent.prototype.adjustValueInRange = /**
         * If value is too small it will be set to min, if is too big it will be set to max.
         * @param {?} incomingValue
         * @return {?}
         */
        function (incomingValue) {
            return this.min !== undefined && incomingValue < this.min
                ? this.min
                : this.max !== undefined && incomingValue > this.max
                    ? this.max
                    : incomingValue;
        };
        /**
         * Update model value and refresh input
         */
        /**
         * Update model value and refresh input
         * @param {?} newValue
         * @return {?}
         */
        ItemCounterComponent.prototype.manualChange = /**
         * Update model value and refresh input
         * @param {?} newValue
         * @return {?}
         */
        function (newValue) {
            newValue = this.adjustValueInRange(newValue);
            this.updateValue(newValue);
            /* We use the value from the input, however, this value
              is not the correct value that should be displayed. The correct value to display
              is this.value, which the parent updates if the async call succeed. If the call
              fails, then the input will need to display this.value, and not what the user
              recently typed in */
            this.renderer.setProperty(this.input.nativeElement, 'value', newValue);
        };
        /**
         * @param {?} event
         * @return {?}
         */
        ItemCounterComponent.prototype.onKeyDown = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            var _this = this;
            /** @type {?} */
            var handlers = {
                ArrowDown: (/**
                 * @return {?}
                 */
                function () { return _this.decrement(); }),
                ArrowUp: (/**
                 * @return {?}
                 */
                function () { return _this.increment(); }),
            };
            if (handlers[event.code]) {
                handlers[event.code]();
                event.preventDefault();
                event.stopPropagation();
            }
        };
        /**
         * @param {?} event
         * @return {?}
         */
        ItemCounterComponent.prototype.onBlur = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            this.focus = false;
            event.preventDefault();
            event.stopPropagation();
            this.onTouch();
        };
        /**
         * @param {?} event
         * @return {?}
         */
        ItemCounterComponent.prototype.onFocus = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            this.focus = true;
            event.preventDefault();
            event.stopPropagation();
            this.onTouch();
        };
        /**
         * Verify value that it can be incremented, if yes it does that.
         */
        /**
         * Verify value that it can be incremented, if yes it does that.
         * @return {?}
         */
        ItemCounterComponent.prototype.increment = /**
         * Verify value that it can be incremented, if yes it does that.
         * @return {?}
         */
        function () {
            this.manualChange(this.value + this.step);
            this.setFocus(true);
        };
        /**
         * Verify value that it can be decremented, if yes it does that.
         */
        /**
         * Verify value that it can be decremented, if yes it does that.
         * @return {?}
         */
        ItemCounterComponent.prototype.decrement = /**
         * Verify value that it can be decremented, if yes it does that.
         * @return {?}
         */
        function () {
            this.manualChange(this.value - this.step);
            this.setFocus(false);
        };
        // ControlValueAccessor interface
        // ControlValueAccessor interface
        /**
         * @param {?} fn
         * @return {?}
         */
        ItemCounterComponent.prototype.registerOnTouched = 
        // ControlValueAccessor interface
        /**
         * @param {?} fn
         * @return {?}
         */
        function (fn) {
            this.onTouch = fn;
        };
        /**
         * @param {?} fn
         * @return {?}
         */
        ItemCounterComponent.prototype.registerOnChange = /**
         * @param {?} fn
         * @return {?}
         */
        function (fn) {
            this.onModelChange = fn;
        };
        /**
         * @param {?} value
         * @return {?}
         */
        ItemCounterComponent.prototype.writeValue = /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.value = value || this.min || 0;
            this.onModelChange(this.value);
        };
        /**
         * Set up new value for input and emit event outside
         */
        /**
         * Set up new value for input and emit event outside
         * @param {?} updatedQuantity
         * @return {?}
         */
        ItemCounterComponent.prototype.updateValue = /**
         * Set up new value for input and emit event outside
         * @param {?} updatedQuantity
         * @return {?}
         */
        function (updatedQuantity) {
            if (!this.async) {
                // If the async flag is true, then the parent component is responsible for updating the form
                this.writeValue(updatedQuantity);
            }
            // Additionally, we emit a change event, so that users may optionally do something on change
            this.update.emit(updatedQuantity);
            this.onTouch();
        };
        /**
         * Determines which HTML element should have focus at a given time
         */
        /**
         * Determines which HTML element should have focus at a given time
         * @param {?} isIncremented
         * @return {?}
         */
        ItemCounterComponent.prototype.setFocus = /**
         * Determines which HTML element should have focus at a given time
         * @param {?} isIncremented
         * @return {?}
         */
        function (isIncremented) {
            if (this.isMaxOrMinValueOrBeyond()) {
                this.input.nativeElement.focus();
            }
            else if (isIncremented) {
                this.incrementBtn.nativeElement.focus();
            }
            else {
                this.decrementBtn.nativeElement.focus();
            }
        };
        /**
         * @return {?}
         */
        ItemCounterComponent.prototype.isMaxOrMinValueOrBeyond = /**
         * @return {?}
         */
        function () {
            return this.value >= this.max || this.value <= this.min;
        };
        /**
         * @return {?}
         */
        ItemCounterComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        ItemCounterComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-item-counter',
                        template: "<div class=\"cx-counter-wrapper\">\n  <div\n    class=\"cx-counter btn-group\"\n    role=\"group\"\n    tabindex=\"0\"\n    aria-label=\"Add more items\"\n    [class.focused]=\"focus\"\n    (keydown)=\"onKeyDown($event)\"\n    (blur)=\"onBlur($event)\"\n    (focus)=\"onFocus($event)\"\n  >\n    <button\n      #decrementBtn\n      type=\"button\"\n      class=\"cx-counter-action\"\n      (click)=\"decrement()\"\n      [disabled]=\"cartIsLoading || value <= min\"\n      *ngIf=\"isValueChangeable\"\n    >\n      -\n    </button>\n\n    <input\n      #itemCounterInput\n      class=\"cx-counter-value\"\n      type=\"text\"\n      name=\"value\"\n      cxOnlyNumber\n      [formControl]=\"inputValue\"\n      [value]=\"value\"\n      *ngIf=\"isValueChangeable\"\n    />\n    <div class=\"cx-counter-value\" *ngIf=\"!isValueChangeable\">\n      {{ value }}\n    </div>\n    <button\n      #incrementBtn\n      type=\"button\"\n      class=\"cx-counter-action\"\n      (click)=\"increment()\"\n      [disabled]=\"cartIsLoading || value >= max\"\n      *ngIf=\"isValueChangeable\"\n    >\n      +\n    </button>\n  </div>\n</div>\n",
                        providers: [COUNTER_CONTROL_ACCESSOR]
                    }] }
        ];
        /** @nocollapse */
        ItemCounterComponent.ctorParameters = function () { return [
            { type: core.Renderer2 }
        ]; };
        ItemCounterComponent.propDecorators = {
            input: [{ type: core.ViewChild, args: ['itemCounterInput', { static: false },] }],
            incrementBtn: [{ type: core.ViewChild, args: ['incrementBtn', { static: false },] }],
            decrementBtn: [{ type: core.ViewChild, args: ['decrementBtn', { static: false },] }],
            value: [{ type: core.Input }],
            step: [{ type: core.Input }],
            min: [{ type: core.Input }],
            max: [{ type: core.Input }],
            async: [{ type: core.Input }],
            cartIsLoading: [{ type: core.Input }],
            isValueChangeable: [{ type: core.Input }],
            update: [{ type: core.Output }]
        };
        return ItemCounterComponent;
    }());
    if (false) {
        /** @type {?} */
        ItemCounterComponent.prototype.input;
        /** @type {?} */
        ItemCounterComponent.prototype.incrementBtn;
        /** @type {?} */
        ItemCounterComponent.prototype.decrementBtn;
        /** @type {?} */
        ItemCounterComponent.prototype.value;
        /** @type {?} */
        ItemCounterComponent.prototype.step;
        /** @type {?} */
        ItemCounterComponent.prototype.min;
        /** @type {?} */
        ItemCounterComponent.prototype.max;
        /** @type {?} */
        ItemCounterComponent.prototype.async;
        /** @type {?} */
        ItemCounterComponent.prototype.cartIsLoading;
        /** @type {?} */
        ItemCounterComponent.prototype.isValueChangeable;
        /** @type {?} */
        ItemCounterComponent.prototype.update;
        /** @type {?} */
        ItemCounterComponent.prototype.focus;
        /** @type {?} */
        ItemCounterComponent.prototype.isValueOutOfRange;
        /** @type {?} */
        ItemCounterComponent.prototype.inputValue;
        /** @type {?} */
        ItemCounterComponent.prototype.subscription;
        /** @type {?} */
        ItemCounterComponent.prototype.onTouch;
        /** @type {?} */
        ItemCounterComponent.prototype.onModelChange;
        /**
         * @type {?}
         * @private
         */
        ItemCounterComponent.prototype.renderer;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OnlyNumberDirective = /** @class */ (function () {
        /**
         * Class constructor
         * @param hostElement
         */
        function OnlyNumberDirective(hostElement, renderer) {
            this.hostElement = hostElement;
            this.renderer = renderer;
            this.previousValue = '';
            this.integerUnsigned = '^[0-9]*$';
        }
        /**
         * Event handler for host's change event
         */
        /**
         * Event handler for host's change event
         * @return {?}
         */
        OnlyNumberDirective.prototype.onChange = /**
         * Event handler for host's change event
         * @return {?}
         */
        function () {
            this.validateValue(this.hostElement.nativeElement.value);
        };
        /**
         * Event handler for host's change event
         */
        /**
         * Event handler for host's change event
         * @return {?}
         */
        OnlyNumberDirective.prototype.onInput = /**
         * Event handler for host's change event
         * @return {?}
         */
        function () {
            this.validateValue(this.hostElement.nativeElement.value);
        };
        /**
         * Event handler for host's paste event
         * @param e
         */
        /**
         * Event handler for host's paste event
         * @param {?} e
         * @return {?}
         */
        OnlyNumberDirective.prototype.onPaste = /**
         * Event handler for host's paste event
         * @param {?} e
         * @return {?}
         */
        function (e) {
            /** @type {?} */
            var value = e.clipboardData.getData('text/plain');
            this.validateValue(value);
            e.preventDefault();
        };
        /**
         * Event handler for host's keyup event
         * @param e
         */
        /**
         * Event handler for host's keyup event
         * @param {?} e
         * @return {?}
         */
        OnlyNumberDirective.prototype.onKeyUp = /**
         * Event handler for host's keyup event
         * @param {?} e
         * @return {?}
         */
        function (e) {
            /** @type {?} */
            var value = e.target['value'];
            this.validateValue(value);
        };
        /**
         * Event handler for host's keydown event
         * @param e
         */
        /**
         * Event handler for host's keydown event
         * @param {?} e
         * @return {?}
         */
        OnlyNumberDirective.prototype.onKeyDown = /**
         * Event handler for host's keydown event
         * @param {?} e
         * @return {?}
         */
        function (e) {
            /** @type {?} */
            var originalValue = e.target['value'];
            /** @type {?} */
            var key = this.getName(e);
            /** @type {?} */
            var controlOrCommand = e.ctrlKey === true || e.metaKey === true;
            // allowed keys apart from numeric characters
            /** @type {?} */
            var allowedKeys = [
                'Backspace',
                'ArrowLeft',
                'ArrowRight',
                'Escape',
                'Tab',
            ];
            // allow some non-numeric characters
            if (allowedKeys.includes(key) ||
                // Allow: Ctrl+A and Command+A
                (key === 'a' && controlOrCommand) ||
                // Allow: Ctrl+C and Command+C
                (key === 'c' && controlOrCommand) ||
                // Allow: Ctrl+V and Command+V
                (key === 'v' && controlOrCommand) ||
                // Allow: Ctrl+X and Command+X
                (key === 'x' && controlOrCommand)) {
                // let it happen, don't do anything
                return;
            }
            // save value before keydown event
            this.previousValue = originalValue;
            // allow number characters only
            /** @type {?} */
            var isNumber = new RegExp(this.integerUnsigned).test(key);
            if (isNumber) {
                return;
            }
            else {
                e.preventDefault();
            }
        };
        /**
         * Test whether value is a valid number or not
         * @param value
         */
        /**
         * Test whether value is a valid number or not
         * @param {?} value
         * @return {?}
         */
        OnlyNumberDirective.prototype.validateValue = /**
         * Test whether value is a valid number or not
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value) {
                value = value.replace(/[^0-9]+/g, '');
                this.renderer.setProperty(this.hostElement.nativeElement, 'value', value);
            }
        };
        /**
         * Get key's name
         * @param e
         */
        /**
         * Get key's name
         * @param {?} e
         * @return {?}
         */
        OnlyNumberDirective.prototype.getName = /**
         * Get key's name
         * @param {?} e
         * @return {?}
         */
        function (e) {
            return e.key;
        };
        OnlyNumberDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[cxOnlyNumber]',
                    },] }
        ];
        /** @nocollapse */
        OnlyNumberDirective.ctorParameters = function () { return [
            { type: core.ElementRef },
            { type: core.Renderer2 }
        ]; };
        OnlyNumberDirective.propDecorators = {
            onChange: [{ type: core.HostListener, args: ['change',] }],
            onInput: [{ type: core.HostListener, args: ['input',] }],
            onPaste: [{ type: core.HostListener, args: ['paste', ['$event'],] }],
            onKeyUp: [{ type: core.HostListener, args: ['keyup', ['$event'],] }],
            onKeyDown: [{ type: core.HostListener, args: ['keydown', ['$event'],] }]
        };
        return OnlyNumberDirective;
    }());
    if (false) {
        /** @type {?} */
        OnlyNumberDirective.prototype.previousValue;
        /** @type {?} */
        OnlyNumberDirective.prototype.integerUnsigned;
        /**
         * @type {?}
         * @private
         */
        OnlyNumberDirective.prototype.hostElement;
        /**
         * @type {?}
         * @private
         */
        OnlyNumberDirective.prototype.renderer;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OnlyNumberDirectiveModule = /** @class */ (function () {
        function OnlyNumberDirectiveModule() {
        }
        OnlyNumberDirectiveModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [OnlyNumberDirective],
                        exports: [OnlyNumberDirective],
                    },] }
        ];
        return OnlyNumberDirectiveModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ItemCounterModule = /** @class */ (function () {
        function ItemCounterModule() {
        }
        ItemCounterModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            OnlyNumberDirectiveModule,
                        ],
                        declarations: [ItemCounterComponent],
                        exports: [ItemCounterComponent],
                    },] }
        ];
        return ItemCounterModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * This component navigates using [routerLink] attribute when input 'url' is a relative url. Otherwise (when it's absolute), [href] is used.
     */
    var GenericLinkComponent = /** @class */ (function () {
        function GenericLinkComponent() {
            this.protocolRegex = /^https?:\/\//i;
        }
        Object.defineProperty(GenericLinkComponent.prototype, "rel", {
            get: /**
             * @return {?}
             */
            function () {
                return this.target === '_blank' ? 'noopener' : null;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(GenericLinkComponent.prototype, "routerUrl", {
            get: /**
             * @return {?}
             */
            function () {
                if (typeof this.url === 'string') {
                    return [this.getAbsoluteUrl(this.url)];
                }
                return this.url;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        GenericLinkComponent.prototype.isExternalUrl = /**
         * @return {?}
         */
        function () {
            return typeof this.url === 'string' && this.protocolRegex.test(this.url);
        };
        /**
         * @private
         * @param {?} url
         * @return {?}
         */
        GenericLinkComponent.prototype.getAbsoluteUrl = /**
         * @private
         * @param {?} url
         * @return {?}
         */
        function (url) {
            return url.startsWith('/') ? this.url : '/' + this.url;
        };
        GenericLinkComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-generic-link',
                        template: "<!-- https://github.com/angular/angular/issues/24567 -->\n\n<ng-container *ngIf=\"isExternalUrl(); else isLocalUrl\">\n  <a\n    role=\"link\"\n    [href]=\"url\"\n    [attr.target]=\"target\"\n    [attr.rel]=\"rel\"\n    [attr.class]=\"class\"\n    [attr.id]=\"id\"\n    [attr.style]=\"style\"\n    [attr.title]=\"title\"\n  >\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n  </a>\n</ng-container>\n\n<ng-template #isLocalUrl>\n  <a\n    role=\"link\"\n    [routerLink]=\"routerUrl\"\n    [attr.target]=\"target\"\n    [attr.class]=\"class\"\n    [attr.id]=\"id\"\n    [attr.style]=\"style\"\n    [attr.title]=\"title\"\n  >\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\n  </a>\n</ng-template>\n\n<ng-template #content>\n  <ng-content></ng-content>\n</ng-template>\n"
                    }] }
        ];
        GenericLinkComponent.propDecorators = {
            url: [{ type: core.Input }],
            target: [{ type: core.Input }],
            class: [{ type: core.Input }],
            id: [{ type: core.Input }],
            style: [{ type: core.Input }],
            title: [{ type: core.Input }]
        };
        return GenericLinkComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        GenericLinkComponent.prototype.protocolRegex;
        /** @type {?} */
        GenericLinkComponent.prototype.url;
        /** @type {?} */
        GenericLinkComponent.prototype.target;
        /** @type {?} */
        GenericLinkComponent.prototype.class;
        /** @type {?} */
        GenericLinkComponent.prototype.id;
        /** @type {?} */
        GenericLinkComponent.prototype.style;
        /** @type {?} */
        GenericLinkComponent.prototype.title;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GenericLinkModule = /** @class */ (function () {
        function GenericLinkModule() {
        }
        GenericLinkModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, router.RouterModule],
                        declarations: [GenericLinkComponent],
                        exports: [GenericLinkComponent],
                    },] }
        ];
        return GenericLinkModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var PAGE_FIRST = 1;
    /** @type {?} */
    var PAGE_WINDOW_SIZE = 3;
    var PaginationComponent = /** @class */ (function () {
        function PaginationComponent() {
            this.hideOnSinglePage = false;
            this.viewPageEvent = new core.EventEmitter();
        }
        // Because pagination model uses indexes starting from 0,
        // add 1 to get current page number
        // Because pagination model uses indexes starting from 0,
        // add 1 to get current page number
        /**
         * @private
         * @return {?}
         */
        PaginationComponent.prototype.getCurrentPageNumber = 
        // Because pagination model uses indexes starting from 0,
        // add 1 to get current page number
        /**
         * @private
         * @return {?}
         */
        function () {
            return this.pagination.currentPage + 1;
        };
        /**
         * @return {?}
         */
        PaginationComponent.prototype.getPagePrevious = /**
         * @return {?}
         */
        function () {
            return this.getCurrentPageNumber() - 1;
        };
        /**
         * @return {?}
         */
        PaginationComponent.prototype.getPageNext = /**
         * @return {?}
         */
        function () {
            return this.getCurrentPageNumber() + 1;
        };
        /**
         * @return {?}
         */
        PaginationComponent.prototype.getPageIndicies = /**
         * @return {?}
         */
        function () {
            return Array(this.pagination.totalPages);
        };
        // Gets the minimum index of page numbers that can be shown by being within the page window range
        // Gets the minimum index of page numbers that can be shown by being within the page window range
        /**
         * @return {?}
         */
        PaginationComponent.prototype.getPageWindowMinIndex = 
        // Gets the minimum index of page numbers that can be shown by being within the page window range
        /**
         * @return {?}
         */
        function () {
            return (Math.floor(this.pagination.currentPage / PAGE_WINDOW_SIZE) *
                PAGE_WINDOW_SIZE);
        };
        // Gets the maximum index of page numbers that can be shown by being within the page window range
        // Gets the maximum index of page numbers that can be shown by being within the page window range
        /**
         * @return {?}
         */
        PaginationComponent.prototype.getPageWindowMaxIndex = 
        // Gets the maximum index of page numbers that can be shown by being within the page window range
        /**
         * @return {?}
         */
        function () {
            return (Math.floor(this.pagination.currentPage / PAGE_WINDOW_SIZE) *
                PAGE_WINDOW_SIZE +
                2);
        };
        /**
         * @return {?}
         */
        PaginationComponent.prototype.hasPages = /**
         * @return {?}
         */
        function () {
            return this.pagination.totalPages > 0;
        };
        /**
         * @return {?}
         */
        PaginationComponent.prototype.onFirstPage = /**
         * @return {?}
         */
        function () {
            return this.pagination.currentPage === 0;
        };
        /**
         * @return {?}
         */
        PaginationComponent.prototype.onLastPage = /**
         * @return {?}
         */
        function () {
            return this.pagination.currentPage === this.pagination.totalPages - 1;
        };
        /**
         * @param {?} index
         * @return {?}
         */
        PaginationComponent.prototype.onPageIndex = /**
         * @param {?} index
         * @return {?}
         */
        function (index) {
            return this.pagination.currentPage === index;
        };
        /**
         * @param {?} index
         * @return {?}
         */
        PaginationComponent.prototype.hidePageIndex = /**
         * @param {?} index
         * @return {?}
         */
        function (index) {
            return ((this.getPageWindowMinIndex() > index ||
                this.getPageWindowMaxIndex() < index) &&
                (index > 0 && index < this.pagination.totalPages - 1));
        };
        /**
         * @param {?} index
         * @return {?}
         */
        PaginationComponent.prototype.showDots = /**
         * @param {?} index
         * @return {?}
         */
        function (index) {
            return (this.hidePageIndex(index) &&
                (index === this.getPageWindowMaxIndex() + 1 ||
                    index === this.getPageWindowMinIndex() - 1));
        };
        /**
         * @param {?} page
         * @return {?}
         */
        PaginationComponent.prototype.clickPageNo = /**
         * @param {?} page
         * @return {?}
         */
        function (page) {
            // Change page on valid index
            if (page >= PAGE_FIRST &&
                page <= this.pagination.totalPages &&
                page !== this.getCurrentPageNumber()) {
                this.pageChange(page);
                return page;
            }
            // Page stays the same on invalid index
            return this.pagination.currentPage;
        };
        /**
         * @param {?} page
         * @return {?}
         */
        PaginationComponent.prototype.pageChange = /**
         * @param {?} page
         * @return {?}
         */
        function (page) {
            this.viewPageEvent.emit(page - 1);
        };
        /**
         * @return {?}
         */
        PaginationComponent.prototype.showPagination = /**
         * @return {?}
         */
        function () {
            return !(this.hideOnSinglePage && this.pagination.totalPages <= 1);
        };
        PaginationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-pagination',
                        template: "<ul class=\"pagination\" *ngIf=\"showPagination()\">\n  <!-- Previous -->\n  <li class=\"page-item\" [ngClass]=\"{ disabled: onFirstPage() || !hasPages() }\">\n    <a class=\"page-link\" (click)=\"clickPageNo(getPagePrevious())\">\u00AB</a>\n  </li>\n\n  <!-- Page Index -->\n  <li\n    class=\"page-item\"\n    *ngFor=\"let page of getPageIndicies(); let i = index\"\n    [ngClass]=\"{ active: onPageIndex(i), disabled: showDots(i) }\"\n  >\n    <a class=\"page-link\" *ngIf=\"showDots(i)\">...</a>\n    <a\n      class=\"page-link\"\n      *ngIf=\"!hidePageIndex(i)\"\n      (click)=\"clickPageNo(i + 1)\"\n      >{{ i + 1 }}</a\n    >\n  </li>\n\n  <!-- Next -->\n  <li class=\"page-item\" [ngClass]=\"{ disabled: onLastPage() || !hasPages() }\">\n    <a class=\"page-link\" (click)=\"clickPageNo(getPageNext())\">\u00BB</a>\n  </li>\n</ul>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        PaginationComponent.propDecorators = {
            pagination: [{ type: core.Input }],
            hideOnSinglePage: [{ type: core.Input }],
            viewPageEvent: [{ type: core.Output }]
        };
        return PaginationComponent;
    }());
    if (false) {
        /** @type {?} */
        PaginationComponent.prototype.pagination;
        /** @type {?} */
        PaginationComponent.prototype.hideOnSinglePage;
        /** @type {?} */
        PaginationComponent.prototype.viewPageEvent;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SortingComponent = /** @class */ (function () {
        function SortingComponent() {
            this.sortListEvent = new core.EventEmitter();
        }
        /**
         * @param {?} sortCode
         * @return {?}
         */
        SortingComponent.prototype.sortList = /**
         * @param {?} sortCode
         * @return {?}
         */
        function (sortCode) {
            this.sortListEvent.emit(sortCode);
        };
        SortingComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-sorting',
                        template: "<ng-select\n  [searchable]=\"false\"\n  [clearable]=\"false\"\n  placeholder=\"{{ placeholder }}\"\n  (change)=\"sortList($event)\"\n  [ngModel]=\"selectedOption\"\n>\n  <ng-option *ngFor=\"let sort of sortOptions\" [value]=\"sort.code\">{{\n    sort.name ? sort.name : sortLabels ? sortLabels[sort.code] : ''\n  }}</ng-option>\n</ng-select>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        SortingComponent.ctorParameters = function () { return []; };
        SortingComponent.propDecorators = {
            sortOptions: [{ type: core.Input }],
            selectedOption: [{ type: core.Input }],
            placeholder: [{ type: core.Input }],
            sortLabels: [{ type: core.Input }],
            sortListEvent: [{ type: core.Output }]
        };
        return SortingComponent;
    }());
    if (false) {
        /** @type {?} */
        SortingComponent.prototype.sortOptions;
        /** @type {?} */
        SortingComponent.prototype.selectedOption;
        /** @type {?} */
        SortingComponent.prototype.placeholder;
        /** @type {?} */
        SortingComponent.prototype.sortLabels;
        /** @type {?} */
        SortingComponent.prototype.sortListEvent;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ListNavigationModule = /** @class */ (function () {
        function ListNavigationModule() {
        }
        ListNavigationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, ngSelect.NgSelectModule, forms.FormsModule],
                        declarations: [PaginationComponent, SortingComponent],
                        exports: [PaginationComponent, SortingComponent],
                    },] }
        ];
        return ListNavigationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function Media() { }
    if (false) {
        /** @type {?} */
        Media.prototype.src;
        /** @type {?|undefined} */
        Media.prototype.srcset;
        /** @type {?|undefined} */
        Media.prototype.alt;
    }
    /**
     * @record
     */
    function MediaFormats() { }
    if (false) {
        /** @type {?} */
        MediaFormats.prototype.code;
        /** @type {?} */
        MediaFormats.prototype.threshold;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    // TODO: Improve a11y with better text appropriate to usage (example: loading cart spinner)
    var SpinnerComponent = /** @class */ (function () {
        function SpinnerComponent() {
        }
        SpinnerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-spinner',
                        template: "<div class=\"loader-container\">\n  <div class=\"loader\">{{ 'spinner.loading' | cxTranslate }}</div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        SpinnerComponent.ctorParameters = function () { return []; };
        return SpinnerComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SpinnerModule = /** @class */ (function () {
        function SpinnerModule() {
        }
        SpinnerModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, core$1.I18nModule],
                        declarations: [SpinnerComponent],
                        exports: [SpinnerComponent],
                    },] }
        ];
        return SpinnerModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GlobalMessageComponent = /** @class */ (function () {
        function GlobalMessageComponent(globalMessageService) {
            this.globalMessageService = globalMessageService;
            this.iconTypes = ICON_TYPE;
            this.messageType = core$1.GlobalMessageType;
        }
        /**
         * @return {?}
         */
        GlobalMessageComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.messages$ = this.globalMessageService.get();
        };
        /**
         * @param {?} type
         * @param {?} index
         * @return {?}
         */
        GlobalMessageComponent.prototype.clear = /**
         * @param {?} type
         * @param {?} index
         * @return {?}
         */
        function (type, index) {
            this.globalMessageService.remove(type, index);
        };
        GlobalMessageComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-global-message',
                        template: "<div *ngIf=\"messages$ | async as messages\">\n  <div\n    class=\"alert alert-success\"\n    *ngFor=\"\n      let confMsg of messages[messageType.MSG_TYPE_CONFIRMATION];\n      let i = index\n    \"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.SUCCESS\"></cx-icon>\n    </span>\n    <span>{{ confMsg | cxTranslate }}</span>\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"clear(messageType.MSG_TYPE_CONFIRMATION, i)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n  <div\n    class=\"alert alert-warning\"\n    *ngFor=\"let infoMsg of messages[messageType.MSG_TYPE_INFO]; let i = index\"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.WARNING\"></cx-icon>\n    </span>\n    <span>{{ infoMsg | cxTranslate }}</span>\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"clear(messageType.MSG_TYPE_INFO, i)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n  <div\n    class=\"alert alert-danger\"\n    *ngFor=\"let errorMsg of messages[messageType.MSG_TYPE_ERROR]; let i = index\"\n  >\n    <span class=\"alert-icon\">\n      <cx-icon [type]=\"iconTypes.ERROR\"></cx-icon>\n    </span>\n    <span>{{ errorMsg | cxTranslate }}</span>\n    <button\n      class=\"close\"\n      type=\"button\"\n      (click)=\"clear(messageType.MSG_TYPE_ERROR, i)\"\n    >\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </button>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        GlobalMessageComponent.ctorParameters = function () { return [
            { type: core$1.GlobalMessageService }
        ]; };
        return GlobalMessageComponent;
    }());
    if (false) {
        /** @type {?} */
        GlobalMessageComponent.prototype.iconTypes;
        /** @type {?} */
        GlobalMessageComponent.prototype.messages$;
        /** @type {?} */
        GlobalMessageComponent.prototype.messageType;
        /**
         * @type {?}
         * @protected
         */
        GlobalMessageComponent.prototype.globalMessageService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GlobalMessageComponentModule = /** @class */ (function () {
        function GlobalMessageComponentModule() {
        }
        GlobalMessageComponentModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, http.HttpClientModule, IconModule, core$1.I18nModule],
                        declarations: [GlobalMessageComponent],
                        exports: [GlobalMessageComponent],
                    },] }
        ];
        return GlobalMessageComponentModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var   /**
     * @abstract
     */
    QualtricsConfig = /** @class */ (function () {
        function QualtricsConfig() {
        }
        return QualtricsConfig;
    }());
    if (false) {
        /** @type {?} */
        QualtricsConfig.prototype.qualtrics;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var QualtricsLoaderService = /** @class */ (function () {
        function QualtricsLoaderService(winRef, config) {
            this.winRef = winRef;
            this.config = config;
            this.qualtricsLoaded$ = new rxjs.BehaviorSubject(false);
            if (Boolean(this.winRef.nativeWindow) &&
                Boolean(this.winRef.document) &&
                this.isQualtricsConfigured()) {
                this.initialize();
                this.setup();
            }
        }
        /**
         * @private
         * @return {?}
         */
        QualtricsLoaderService.prototype.initialize = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            rxjs.fromEvent(this.winRef.nativeWindow, 'qsi_js_loaded').subscribe((/**
             * @param {?} _
             * @return {?}
             */
            function (_) {
                return _this.qualtricsLoaded$.next(true);
            }));
        };
        /**
         * @private
         * @return {?}
         */
        QualtricsLoaderService.prototype.setup = /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var qualtricsScript = this.winRef.document.createElement('script');
            qualtricsScript.type = 'text/javascript';
            qualtricsScript.defer = true;
            qualtricsScript.src = 'assets/qualtricsIntegration.js';
            /** @type {?} */
            var idScript = this.winRef.document.createElement('div');
            idScript.id = this.config.qualtrics.projectId;
            this.winRef.document
                .getElementsByTagName('head')[0]
                .appendChild(qualtricsScript);
            this.winRef.document.getElementsByTagName('head')[0].appendChild(idScript);
        };
        /**
         * @private
         * @return {?}
         */
        QualtricsLoaderService.prototype.isQualtricsConfigured = /**
         * @private
         * @return {?}
         */
        function () {
            return (Boolean(this.config.qualtrics) && Boolean(this.config.qualtrics.projectId));
        };
        /**
         * @return {?}
         */
        QualtricsLoaderService.prototype.load = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.qualtricsLoaded$.pipe(operators.filter((/**
             * @param {?} loaded
             * @return {?}
             */
            function (loaded) { return loaded; })), operators.switchMap((/**
             * @param {?} _
             * @return {?}
             */
            function (_) {
                /** @type {?} */
                var qsi = _this.winRef.nativeWindow['QSI'];
                return _this.isDataLoaded().pipe(operators.distinctUntilChanged(), operators.tap((/**
                 * @param {?} dataLoaded
                 * @return {?}
                 */
                function (dataLoaded) {
                    if (dataLoaded) {
                        qsi.API.unload();
                        qsi.API.load().done(qsi.API.run());
                    }
                })));
            })));
        };
        /**
         * This logic exist in order to let the client(s) add their own logic to wait for any kind of page data
         * If client(s) does not extend this service to override this implementation, it returns true
         * Return false otherwise.
         */
        /**
         * This logic exist in order to let the client(s) add their own logic to wait for any kind of page data
         * If client(s) does not extend this service to override this implementation, it returns true
         * Return false otherwise.
         * @protected
         * @return {?}
         */
        QualtricsLoaderService.prototype.isDataLoaded = /**
         * This logic exist in order to let the client(s) add their own logic to wait for any kind of page data
         * If client(s) does not extend this service to override this implementation, it returns true
         * Return false otherwise.
         * @protected
         * @return {?}
         */
        function () {
            return rxjs.of(true);
        };
        QualtricsLoaderService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        QualtricsLoaderService.ctorParameters = function () { return [
            { type: core$1.WindowRef },
            { type: QualtricsConfig }
        ]; };
        /** @nocollapse */ QualtricsLoaderService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function QualtricsLoaderService_Factory() { return new QualtricsLoaderService(core.ɵɵinject(core$1.WindowRef), core.ɵɵinject(QualtricsConfig)); }, token: QualtricsLoaderService, providedIn: "root" });
        return QualtricsLoaderService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        QualtricsLoaderService.prototype.qualtricsLoaded$;
        /**
         * @type {?}
         * @private
         */
        QualtricsLoaderService.prototype.winRef;
        /**
         * @type {?}
         * @private
         */
        QualtricsLoaderService.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var QualtricsComponent = /** @class */ (function () {
        function QualtricsComponent(qualtricsLoader) {
            this.qualtricsLoader = qualtricsLoader;
            this.qualtricsEnabled$ = this.qualtricsLoader.load();
        }
        QualtricsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-qualtrics',
                        template: "\n    <ng-container *ngIf=\"qualtricsEnabled$ | async\"></ng-container>\n  "
                    }] }
        ];
        /** @nocollapse */
        QualtricsComponent.ctorParameters = function () { return [
            { type: QualtricsLoaderService }
        ]; };
        return QualtricsComponent;
    }());
    if (false) {
        /** @type {?} */
        QualtricsComponent.prototype.qualtricsEnabled$;
        /**
         * @type {?}
         * @private
         */
        QualtricsComponent.prototype.qualtricsLoader;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaultQualtricsConfig = {
        qualtrics: {},
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var QualtricsModule = /** @class */ (function () {
        function QualtricsModule() {
        }
        QualtricsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            http.HttpClientModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    QualtricsComponent: {
                                        component: QualtricsComponent,
                                    },
                                },
                            }))),
                            core$1.ConfigModule.withConfig(defaultQualtricsConfig),
                        ],
                        declarations: [QualtricsComponent],
                        entryComponents: [QualtricsComponent],
                        providers: [
                            {
                                provide: QualtricsConfig,
                                useExisting: core$1.Config,
                            },
                        ],
                    },] }
        ];
        return QualtricsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LanguageCurrencyComponent = /** @class */ (function () {
        function LanguageCurrencyComponent() {
        }
        LanguageCurrencyComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-language-currency-selector',
                        template: "\n    <cx-site-context-selector context=\"language\"></cx-site-context-selector>\n    <cx-site-context-selector context=\"currency\"></cx-site-context-selector>\n  ",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        return LanguageCurrencyComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     * @template T
     */
    var   /**
     * @abstract
     * @template T
     */
    CmsComponentData = /** @class */ (function () {
        function CmsComponentData() {
        }
        return CmsComponentData;
    }());
    if (false) {
        /** @type {?} */
        CmsComponentData.prototype.uid;
        /** @type {?} */
        CmsComponentData.prototype.data$;
    }

    var _a$1;
    /** @type {?} */
    var LABELS = (_a$1 = {},
        _a$1[core$1.LANGUAGE_CONTEXT_ID] = 'Language',
        _a$1[core$1.CURRENCY_CONTEXT_ID] = 'Currency',
        _a$1);
    var SiteContextComponentService = /** @class */ (function () {
        function SiteContextComponentService(componentData, contextServiceMap, injector) {
            this.componentData = componentData;
            this.contextServiceMap = contextServiceMap;
            this.injector = injector;
        }
        /**
         * @param {?=} context
         * @return {?}
         */
        SiteContextComponentService.prototype.getItems = /**
         * @param {?=} context
         * @return {?}
         */
        function (context) {
            var _this = this;
            return this.getService(context).pipe(operators.switchMap((/**
             * @param {?} service
             * @return {?}
             */
            function (service) { return service.getAll(); })), operators.switchMap((/**
             * @param {?} items
             * @return {?}
             */
            function (items) {
                return _this.getContext(context).pipe(operators.switchMap((/**
                 * @param {?} ctx
                 * @return {?}
                 */
                function (ctx) {
                    var e_1, _a;
                    /** @type {?} */
                    var itemsCopy = [];
                    try {
                        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {
                            var item = items_1_1.value;
                            itemsCopy.push(__assign({}, item, { label: _this.getOptionLabel(item, ctx) }));
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                    return rxjs.of(itemsCopy);
                })));
            })));
        };
        /**
         * @param {?=} context
         * @return {?}
         */
        SiteContextComponentService.prototype.getActiveItem = /**
         * @param {?=} context
         * @return {?}
         */
        function (context) {
            return this.getService(context).pipe(operators.switchMap((/**
             * @param {?} service
             * @return {?}
             */
            function (service) { return service.getActive(); })));
        };
        /**
         * @param {?=} context
         * @return {?}
         */
        SiteContextComponentService.prototype.getLabel = /**
         * @param {?=} context
         * @return {?}
         */
        function (context) {
            return this.getContext(context).pipe(operators.map((/**
             * @param {?} ctx
             * @return {?}
             */
            function (ctx) {
                return LABELS[ctx];
            })));
        };
        /**
         * @param {?} value
         * @param {?=} context
         * @return {?}
         */
        SiteContextComponentService.prototype.setActive = /**
         * @param {?} value
         * @param {?=} context
         * @return {?}
         */
        function (value, context) {
            this.getService(context)
                .pipe(operators.take(1))
                .subscribe((/**
             * @param {?} service
             * @return {?}
             */
            function (service) {
                service.setActive(value);
            }));
        };
        /**
         * @protected
         * @param {?=} context
         * @return {?}
         */
        SiteContextComponentService.prototype.getService = /**
         * @protected
         * @param {?=} context
         * @return {?}
         */
        function (context) {
            var _this = this;
            return this.getContext(context).pipe(operators.map((/**
             * @param {?} ctx
             * @return {?}
             */
            function (ctx) { return _this.getInjectedService(ctx); })), operators.filter((/**
             * @param {?} s
             * @return {?}
             */
            function (s) { return !!s; })));
        };
        /**
         * @protected
         * @param {?=} context
         * @return {?}
         */
        SiteContextComponentService.prototype.getContext = /**
         * @protected
         * @param {?=} context
         * @return {?}
         */
        function (context) {
            if (context) {
                return rxjs.of(context);
            }
            else if (this.componentData) {
                return this.componentData.data$.pipe(operators.map((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) { return data.context; })), operators.map((/**
                 * @param {?} ctx
                 * @return {?}
                 */
                function (ctx) {
                    switch (ctx) {
                        case 'LANGUAGE':
                            return core$1.LANGUAGE_CONTEXT_ID;
                        case 'CURRENCY':
                            return core$1.CURRENCY_CONTEXT_ID;
                        default:
                            return ctx;
                    }
                })));
            }
        };
        /**
         * @protected
         * @param {?} context
         * @return {?}
         */
        SiteContextComponentService.prototype.getInjectedService = /**
         * @protected
         * @param {?} context
         * @return {?}
         */
        function (context) {
            return this.injector.get(this.contextServiceMap[context], null);
        };
        /**
         * @protected
         * @param {?} item
         * @param {?=} context
         * @return {?}
         */
        SiteContextComponentService.prototype.getOptionLabel = /**
         * @protected
         * @param {?} item
         * @param {?=} context
         * @return {?}
         */
        function (item, context) {
            switch (context) {
                case core$1.LANGUAGE_CONTEXT_ID:
                    return item.nativeName;
                case core$1.CURRENCY_CONTEXT_ID:
                    return item.symbol + ' ' + item.isocode;
                default:
                    return item.isocode;
            }
        };
        SiteContextComponentService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        SiteContextComponentService.ctorParameters = function () { return [
            { type: CmsComponentData, decorators: [{ type: core.Optional }] },
            { type: core$1.ContextServiceMap },
            { type: core.Injector }
        ]; };
        return SiteContextComponentService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        SiteContextComponentService.prototype.componentData;
        /**
         * @type {?}
         * @private
         */
        SiteContextComponentService.prototype.contextServiceMap;
        /**
         * @type {?}
         * @protected
         */
        SiteContextComponentService.prototype.injector;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var SiteContextType = {
        LANGUAGE: 'LANGUAGE',
        CURRENCY: 'CURRENCY',
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SiteContextSelectorComponent = /** @class */ (function () {
        function SiteContextSelectorComponent(componentService) {
            this.componentService = componentService;
            this.iconTypes = ICON_TYPE;
        }
        Object.defineProperty(SiteContextSelectorComponent.prototype, "items$", {
            get: /**
             * @return {?}
             */
            function () {
                return this.componentService.getItems(this.context);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SiteContextSelectorComponent.prototype, "activeItem$", {
            get: /**
             * @return {?}
             */
            function () {
                return this.componentService.getActiveItem(this.context);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SiteContextSelectorComponent.prototype, "active", {
            set: /**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                this.componentService.setActive(value, this.context);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SiteContextSelectorComponent.prototype, "label$", {
            get: /**
             * @return {?}
             */
            function () {
                return this.componentService.getLabel(this.context);
            },
            enumerable: true,
            configurable: true
        });
        SiteContextSelectorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-site-context-selector',
                        template: "<label *ngIf=\"(items$ | async)?.length > 1 && (items$ | async) as items\">\n  <span>{{ label$ | async }}</span>\n  <select (change)=\"active = $event.target.value\">\n    <option\n      *ngFor=\"let item of items\"\n      value=\"{{ item.isocode }}\"\n      [selected]=\"(activeItem$ | async) === item.isocode\"\n      >{{ item.label }}</option\n    > </select\n  ><cx-icon [type]=\"iconTypes.CARET_DOWN\" class=\"small\"></cx-icon>\n</label>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        SiteContextSelectorComponent.ctorParameters = function () { return [
            { type: SiteContextComponentService }
        ]; };
        SiteContextSelectorComponent.propDecorators = {
            context: [{ type: core.Input }]
        };
        return SiteContextSelectorComponent;
    }());
    if (false) {
        /** @type {?} */
        SiteContextSelectorComponent.prototype.siteContextService;
        /** @type {?} */
        SiteContextSelectorComponent.prototype.iconTypes;
        /**
         * the context type can be set as an input. If the context is
         * not given, the context will be loaded from the backend.
         * @type {?}
         */
        SiteContextSelectorComponent.prototype.context;
        /**
         * @type {?}
         * @private
         */
        SiteContextSelectorComponent.prototype.componentService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SiteContextSelectorModule = /** @class */ (function () {
        function SiteContextSelectorModule() {
        }
        SiteContextSelectorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CMSSiteContextComponent: {
                                        component: SiteContextSelectorComponent,
                                        providers: [
                                            {
                                                provide: SiteContextComponentService,
                                                useClass: SiteContextComponentService,
                                                deps: [CmsComponentData, core$1.ContextServiceMap, core.Injector],
                                            },
                                        ],
                                    },
                                    LanguageCurrencyComponent: {
                                        component: LanguageCurrencyComponent,
                                    },
                                },
                            }))),
                            core$1.SiteContextModule,
                            IconModule,
                        ],
                        providers: [SiteContextComponentService],
                        declarations: [SiteContextSelectorComponent, LanguageCurrencyComponent],
                        entryComponents: [SiteContextSelectorComponent, LanguageCurrencyComponent],
                        exports: [SiteContextSelectorComponent, LanguageCurrencyComponent],
                    },] }
        ];
        return SiteContextSelectorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StarRatingComponent = /** @class */ (function () {
        function StarRatingComponent(el, renderer) {
            this.el = el;
            this.renderer = renderer;
            /**
             * The rating component can be used in disabled mode,
             * so that the interation is not provided.
             */
            this.disabled = false;
            /**
             * Emits the given rating when the user clicks on a star.
             */
            this.change = new core.EventEmitter();
            this.initialRate = 0;
            this.iconTypes = ICON_TYPE;
        }
        /**
         * @return {?}
         */
        StarRatingComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.setRate(this.rating, true);
        };
        /**
         * @param {?} value
         * @param {?=} force
         * @return {?}
         */
        StarRatingComponent.prototype.setRate = /**
         * @param {?} value
         * @param {?=} force
         * @return {?}
         */
        function (value, force) {
            if (!this.disabled || force) {
                // TODO(issue:#3803) deprecated since 1.0.2
                if (this.renderer) {
                    this.renderer.setAttribute(this.el.nativeElement, 'style', "--star-fill:" + (value || this.initialRate) + ";");
                }
                else {
                    this.el.nativeElement.style.setProperty('--star-fill', value || this.initialRate);
                }
            }
        };
        /**
         * @param {?} rating
         * @return {?}
         */
        StarRatingComponent.prototype.saveRate = /**
         * @param {?} rating
         * @return {?}
         */
        function (rating) {
            if (this.disabled) {
                return;
            }
            this.initialRate = rating;
            this.setRate(rating);
            this.change.emit(rating);
        };
        StarRatingComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-star-rating',
                        template: "<cx-icon\n  *ngFor=\"let i of [1, 2, 3, 4, 5]\"\n  [type]=\"iconTypes.STAR\"\n  class=\"star\"\n  (mouseover)=\"setRate(i)\"\n  (mouseout)=\"setRate(0)\"\n  (click)=\"saveRate(i)\"\n></cx-icon>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        StarRatingComponent.ctorParameters = function () { return [
            { type: core.ElementRef },
            { type: core.Renderer2 }
        ]; };
        StarRatingComponent.propDecorators = {
            disabled: [{ type: core.Input }, { type: core.HostBinding, args: ['attr.disabled',] }],
            rating: [{ type: core.Input }],
            change: [{ type: core.Output }]
        };
        return StarRatingComponent;
    }());
    if (false) {
        /**
         * The rating component can be used in disabled mode,
         * so that the interation is not provided.
         * @type {?}
         */
        StarRatingComponent.prototype.disabled;
        /**
         * The rating will be used to render some colorful stars in the UI.
         * @type {?}
         */
        StarRatingComponent.prototype.rating;
        /**
         * Emits the given rating when the user clicks on a star.
         * @type {?}
         */
        StarRatingComponent.prototype.change;
        /**
         * @type {?}
         * @private
         */
        StarRatingComponent.prototype.initialRate;
        /** @type {?} */
        StarRatingComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @protected
         */
        StarRatingComponent.prototype.el;
        /**
         * @type {?}
         * @protected
         */
        StarRatingComponent.prototype.renderer;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StarRatingModule = /** @class */ (function () {
        function StarRatingModule() {
        }
        StarRatingModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, IconModule],
                        declarations: [StarRatingComponent],
                        exports: [StarRatingComponent],
                    },] }
        ];
        return StarRatingModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var   /**
     * @abstract
     */
    ViewConfig = /** @class */ (function () {
        function ViewConfig() {
        }
        return ViewConfig;
    }());
    if (false) {
        /** @type {?} */
        ViewConfig.prototype.view;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ViewConfigModule = /** @class */ (function () {
        function ViewConfigModule() {
        }
        /**
         * @return {?}
         */
        ViewConfigModule.forRoot = /**
         * @return {?}
         */
        function () {
            return {
                ngModule: ViewConfigModule,
                providers: [
                    core$1.provideConfig({
                        view: {},
                    }),
                    {
                        provide: ViewConfig,
                        useExisting: core$1.Config,
                    },
                ],
            };
        };
        ViewConfigModule.decorators = [
            { type: core.NgModule, args: [{},] }
        ];
        return ViewConfigModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AutoFocusDirective = /** @class */ (function () {
        function AutoFocusDirective(hostElement) {
            this.hostElement = hostElement;
        }
        /**
         * @return {?}
         */
        AutoFocusDirective.prototype.ngAfterViewInit = /**
         * @return {?}
         */
        function () {
            this.hostElement.nativeElement.focus();
        };
        AutoFocusDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[cxAutoFocus]',
                    },] }
        ];
        /** @nocollapse */
        AutoFocusDirective.ctorParameters = function () { return [
            { type: core.ElementRef }
        ]; };
        return AutoFocusDirective;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        AutoFocusDirective.prototype.hostElement;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AutoFocusDirectiveModule = /** @class */ (function () {
        function AutoFocusDirectiveModule() {
        }
        AutoFocusDirectiveModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [AutoFocusDirective],
                        exports: [AutoFocusDirective],
                    },] }
        ];
        return AutoFocusDirectiveModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Utility class when working with forms.
     */
    var   /**
     * Utility class when working with forms.
     */
    FormUtils = /** @class */ (function () {
        function FormUtils() {
        }
        /**
         *
         * Validates a field of the given form group
         *
         * If the field is NOT valid (or invalid), the method returns `true`.
         *
         * @param form Form with fields to check
         * @param formControlName Name of the form field to check
         * @param submitted Has the form been submitted
         */
        /**
         *
         * Validates a field of the given form group
         *
         * If the field is NOT valid (or invalid), the method returns `true`.
         *
         * @param {?} form Form with fields to check
         * @param {?} formControlName Name of the form field to check
         * @param {?} submitted Has the form been submitted
         * @return {?}
         */
        FormUtils.isNotValidField = /**
         *
         * Validates a field of the given form group
         *
         * If the field is NOT valid (or invalid), the method returns `true`.
         *
         * @param {?} form Form with fields to check
         * @param {?} formControlName Name of the form field to check
         * @param {?} submitted Has the form been submitted
         * @return {?}
         */
        function (form, formControlName, submitted) {
            /** @type {?} */
            var control = form.get(formControlName);
            return control.invalid && (submitted || (control.touched && control.dirty));
        };
        return FormUtils;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CustomFormValidators = /** @class */ (function () {
        function CustomFormValidators() {
        }
        /**
         * @param {?} control
         * @return {?}
         */
        CustomFormValidators.emailDomainValidator = /**
         * @param {?} control
         * @return {?}
         */
        function (control) {
            /** @type {?} */
            var email = (/** @type {?} */ (control.value));
            return email.match('[.][a-zA-Z]+$') ? null : { InvalidEmail: true };
        };
        /**
         * @param {?} control
         * @return {?}
         */
        CustomFormValidators.emailValidator = /**
         * @param {?} control
         * @return {?}
         */
        function (control) {
            /** @type {?} */
            var email = (/** @type {?} */ (control.value));
            return email.match(core$1.EMAIL_PATTERN) ? null : { InvalidEmail: true };
        };
        /**
         * @param {?} control
         * @return {?}
         */
        CustomFormValidators.passwordValidator = /**
         * @param {?} control
         * @return {?}
         */
        function (control) {
            /** @type {?} */
            var password = (/** @type {?} */ (control.value));
            return password.match(core$1.PASSWORD_PATTERN) ? null : { InvalidPassword: true };
        };
        /**
         * @param {?} control
         * @return {?}
         */
        CustomFormValidators.matchPassword = /**
         * @param {?} control
         * @return {?}
         */
        function (control) {
            if (control.get('password').value !== control.get('passwordconf').value) {
                return { NotEqual: true };
            }
            return null;
        };
        return CustomFormValidators;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var titleScores = {
        mr: 1,
        mrs: 2,
        miss: 3,
        ms: 4,
        dr: 5,
        rev: 6,
    };
    /**
     * @param {?} title1
     * @param {?} title2
     * @return {?}
     */
    function sortTitles(title1, title2) {
        if (!titleScores[title1.code] || !titleScores[title2.code]) {
            return 1;
        }
        else {
            return titleScores[title1.code] - titleScores[title2.code];
        }
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderDetailsService = /** @class */ (function () {
        function OrderDetailsService(userOrderService, routingService) {
            var _this = this;
            this.userOrderService = userOrderService;
            this.routingService = routingService;
            this.orderCode$ = this.routingService
                .getRouterState()
                .pipe(operators.map((/**
             * @param {?} routingData
             * @return {?}
             */
            function (routingData) { return routingData.state.params.orderCode; })));
            this.orderLoad$ = this.orderCode$.pipe(operators.tap((/**
             * @param {?} orderCode
             * @return {?}
             */
            function (orderCode) {
                if (orderCode) {
                    _this.userOrderService.loadOrderDetails(orderCode);
                }
                else {
                    _this.userOrderService.clearOrderDetails();
                }
            })), operators.shareReplay({ bufferSize: 1, refCount: true }));
        }
        /**
         * @return {?}
         */
        OrderDetailsService.prototype.getOrderDetails = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.orderLoad$.pipe(operators.switchMap((/**
             * @return {?}
             */
            function () { return _this.userOrderService.getOrderDetails(); })));
        };
        OrderDetailsService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        OrderDetailsService.ctorParameters = function () { return [
            { type: core$1.UserOrderService },
            { type: core$1.RoutingService }
        ]; };
        /** @nocollapse */ OrderDetailsService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function OrderDetailsService_Factory() { return new OrderDetailsService(core.ɵɵinject(core$1.UserOrderService), core.ɵɵinject(core$1.RoutingService)); }, token: OrderDetailsService, providedIn: "root" });
        return OrderDetailsService;
    }());
    if (false) {
        /** @type {?} */
        OrderDetailsService.prototype.orderCode$;
        /** @type {?} */
        OrderDetailsService.prototype.orderLoad$;
        /**
         * @type {?}
         * @private
         */
        OrderDetailsService.prototype.userOrderService;
        /**
         * @type {?}
         * @private
         */
        OrderDetailsService.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PromotionService = /** @class */ (function () {
        function PromotionService(cartService, orderDetailsService, checkoutService) {
            this.cartService = cartService;
            this.orderDetailsService = orderDetailsService;
            this.checkoutService = checkoutService;
        }
        /**
         * @param {?} promotionLocation
         * @return {?}
         */
        PromotionService.prototype.getOrderPromotions = /**
         * @param {?} promotionLocation
         * @return {?}
         */
        function (promotionLocation) {
            switch (promotionLocation) {
                case core$1.PromotionLocation.ActiveCart:
                    return this.getOrderPromotionsFromCart();
                case core$1.PromotionLocation.Checkout:
                    return this.getOrderPromotionsFromCheckout();
                case core$1.PromotionLocation.Order:
                    return this.getOrderPromotionsFromOrder();
                default:
                    return rxjs.of([]);
            }
        };
        /**
         * @return {?}
         */
        PromotionService.prototype.getOrderPromotionsFromCart = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.cartService
                .getActive()
                .pipe(operators.map((/**
             * @param {?} cart
             * @return {?}
             */
            function (cart) { return _this.getOrderPromotionsFromCartHelper(cart); })));
        };
        /**
         * @private
         * @param {?} cart
         * @return {?}
         */
        PromotionService.prototype.getOrderPromotionsFromCartHelper = /**
         * @private
         * @param {?} cart
         * @return {?}
         */
        function (cart) {
            /** @type {?} */
            var potentialPromotions = [];
            potentialPromotions.push.apply(potentialPromotions, __spread((cart.potentialOrderPromotions || [])));
            /** @type {?} */
            var appliedPromotions = [];
            appliedPromotions.push.apply(appliedPromotions, __spread((cart.appliedOrderPromotions || [])));
            return __spread(potentialPromotions, appliedPromotions);
        };
        /**
         * @return {?}
         */
        PromotionService.prototype.getOrderPromotionsFromCheckout = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.checkoutService
                .getOrderDetails()
                .pipe(operators.map((/**
             * @param {?} order
             * @return {?}
             */
            function (order) { return _this.getOrderPromotionsFromOrderHelper(order); })));
        };
        /**
         * @return {?}
         */
        PromotionService.prototype.getOrderPromotionsFromOrder = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.orderDetailsService
                .getOrderDetails()
                .pipe(operators.map((/**
             * @param {?} order
             * @return {?}
             */
            function (order) { return _this.getOrderPromotionsFromOrderHelper(order); })));
        };
        /**
         * @private
         * @param {?} order
         * @return {?}
         */
        PromotionService.prototype.getOrderPromotionsFromOrderHelper = /**
         * @private
         * @param {?} order
         * @return {?}
         */
        function (order) {
            /** @type {?} */
            var appliedOrderPromotions = [];
            appliedOrderPromotions.push.apply(appliedOrderPromotions, __spread((order.appliedOrderPromotions || [])));
            return appliedOrderPromotions;
        };
        /**
         * @param {?} item
         * @param {?} promotionLocation
         * @return {?}
         */
        PromotionService.prototype.getProductPromotionForEntry = /**
         * @param {?} item
         * @param {?} promotionLocation
         * @return {?}
         */
        function (item, promotionLocation) {
            var _this = this;
            switch (promotionLocation) {
                case core$1.PromotionLocation.ActiveCart:
                    return this.cartService
                        .getActive()
                        .pipe(operators.map((/**
                     * @param {?} cart
                     * @return {?}
                     */
                    function (cart) {
                        return _this.getProductPromotion(item, cart.appliedProductPromotions || []);
                    })));
                case core$1.PromotionLocation.Checkout:
                    return this.checkoutService
                        .getOrderDetails()
                        .pipe(operators.map((/**
                     * @param {?} order
                     * @return {?}
                     */
                    function (order) {
                        return _this.getProductPromotion(item, order.appliedProductPromotions || []);
                    })));
                case core$1.PromotionLocation.Order:
                    return this.orderDetailsService
                        .getOrderDetails()
                        .pipe(operators.map((/**
                     * @param {?} order
                     * @return {?}
                     */
                    function (order) {
                        return _this.getProductPromotion(item, order.appliedProductPromotions || []);
                    })));
            }
        };
        /**
         * @private
         * @param {?} item
         * @param {?} promotions
         * @return {?}
         */
        PromotionService.prototype.getProductPromotion = /**
         * @private
         * @param {?} item
         * @param {?} promotions
         * @return {?}
         */
        function (item, promotions) {
            var e_1, _a, e_2, _b;
            /** @type {?} */
            var entryPromotions = [];
            if (promotions && promotions.length > 0) {
                try {
                    for (var promotions_1 = __values(promotions), promotions_1_1 = promotions_1.next(); !promotions_1_1.done; promotions_1_1 = promotions_1.next()) {
                        var promotion = promotions_1_1.value;
                        if (promotion.description &&
                            promotion.consumedEntries &&
                            promotion.consumedEntries.length > 0) {
                            try {
                                for (var _c = (e_2 = void 0, __values(promotion.consumedEntries)), _d = _c.next(); !_d.done; _d = _c.next()) {
                                    var consumedEntry = _d.value;
                                    if (this.isConsumedByEntry(consumedEntry, item)) {
                                        entryPromotions.push(promotion);
                                    }
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (promotions_1_1 && !promotions_1_1.done && (_a = promotions_1.return)) _a.call(promotions_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            return entryPromotions;
        };
        /**
         * @private
         * @param {?} consumedEntry
         * @param {?} entry
         * @return {?}
         */
        PromotionService.prototype.isConsumedByEntry = /**
         * @private
         * @param {?} consumedEntry
         * @param {?} entry
         * @return {?}
         */
        function (consumedEntry, entry) {
            var e_3, _a;
            /** @type {?} */
            var consumedEntryNumber = consumedEntry.orderEntryNumber;
            if (entry.entries && entry.entries.length > 0) {
                try {
                    for (var _b = __values(entry.entries), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var subEntry = _c.value;
                        if (subEntry.entryNumber === consumedEntryNumber) {
                            return true;
                        }
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
                return false;
            }
            else {
                return consumedEntryNumber === entry.entryNumber;
            }
        };
        PromotionService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        PromotionService.ctorParameters = function () { return [
            { type: core$1.CartService },
            { type: OrderDetailsService },
            { type: core$1.CheckoutService }
        ]; };
        /** @nocollapse */ PromotionService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function PromotionService_Factory() { return new PromotionService(core.ɵɵinject(core$1.CartService), core.ɵɵinject(OrderDetailsService), core.ɵɵinject(core$1.CheckoutService)); }, token: PromotionService, providedIn: "root" });
        return PromotionService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        PromotionService.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        PromotionService.prototype.orderDetailsService;
        /**
         * @type {?}
         * @protected
         */
        PromotionService.prototype.checkoutService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AnonymousConsentOpenDialogComponent = /** @class */ (function () {
        function AnonymousConsentOpenDialogComponent(modalService) {
            this.modalService = modalService;
        }
        /**
         * @return {?}
         */
        AnonymousConsentOpenDialogComponent.prototype.openDialog = /**
         * @return {?}
         */
        function () {
            this.modalService.open(AnonymousConsentDialogComponent, {
                centered: true,
                size: 'lg',
            });
        };
        AnonymousConsentOpenDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-anonymous-consent-open-dialog',
                        template: "<div class=\"anonymous-consents\">\n  <button class=\"btn btn-link\" (click)=\"openDialog()\">\n    {{ 'anonymousConsents.preferences' | cxTranslate }}\n  </button>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        AnonymousConsentOpenDialogComponent.ctorParameters = function () { return [
            { type: ModalService }
        ]; };
        return AnonymousConsentOpenDialogComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        AnonymousConsentOpenDialogComponent.prototype.modalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AnonymousConsentManagementBannerModule = /** @class */ (function () {
        function AnonymousConsentManagementBannerModule() {
        }
        AnonymousConsentManagementBannerModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.I18nModule,
                            core$1.FeaturesConfigModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    AnonymousConsentManagementBannerComponent: {
                                        component: AnonymousConsentManagementBannerComponent,
                                        deferLoading: core$1.DeferLoadingStrategy.INSTANT,
                                    },
                                    AnonymousConsentOpenDialogComponent: {
                                        component: AnonymousConsentOpenDialogComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [
                            AnonymousConsentManagementBannerComponent,
                            AnonymousConsentOpenDialogComponent,
                        ],
                        exports: [
                            AnonymousConsentManagementBannerComponent,
                            AnonymousConsentOpenDialogComponent,
                        ],
                        entryComponents: [
                            AnonymousConsentManagementBannerComponent,
                            AnonymousConsentOpenDialogComponent,
                        ],
                    },] }
        ];
        return AnonymousConsentManagementBannerModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Please don't put that service in public API.
     *
     */
    var CmsMappingService = /** @class */ (function () {
        function CmsMappingService(config, platformId) {
            this.config = config;
            this.platformId = platformId;
        }
        /**
         * @param {?} flexType
         * @return {?}
         */
        CmsMappingService.prototype.isComponentEnabled = /**
         * @param {?} flexType
         * @return {?}
         */
        function (flexType) {
            /** @type {?} */
            var isSSR = common.isPlatformServer(this.platformId);
            /** @type {?} */
            var isComponentDisabledInSSR = (this.config.cmsComponents[flexType] || {})
                .disableSSR;
            return !(isSSR && isComponentDisabledInSSR);
        };
        /**
         * @param {?} componentTypes
         * @return {?}
         */
        CmsMappingService.prototype.getRoutesForComponents = /**
         * @param {?} componentTypes
         * @return {?}
         */
        function (componentTypes) {
            var e_1, _a;
            /** @type {?} */
            var routes = [];
            try {
                for (var componentTypes_1 = __values(componentTypes), componentTypes_1_1 = componentTypes_1.next(); !componentTypes_1_1.done; componentTypes_1_1 = componentTypes_1.next()) {
                    var componentType = componentTypes_1_1.value;
                    if (this.isComponentEnabled(componentType)) {
                        routes.push.apply(routes, __spread(this.getRoutesForComponent(componentType)));
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (componentTypes_1_1 && !componentTypes_1_1.done && (_a = componentTypes_1.return)) _a.call(componentTypes_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return routes;
        };
        /**
         * @param {?} componentTypes
         * @return {?}
         */
        CmsMappingService.prototype.getGuardsForComponents = /**
         * @param {?} componentTypes
         * @return {?}
         */
        function (componentTypes) {
            var e_2, _a;
            /** @type {?} */
            var guards = new Set();
            try {
                for (var componentTypes_2 = __values(componentTypes), componentTypes_2_1 = componentTypes_2.next(); !componentTypes_2_1.done; componentTypes_2_1 = componentTypes_2.next()) {
                    var componentType = componentTypes_2_1.value;
                    this.getGuardsForComponent(componentType).forEach((/**
                     * @param {?} guard
                     * @return {?}
                     */
                    function (guard) {
                        return guards.add(guard);
                    }));
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (componentTypes_2_1 && !componentTypes_2_1.done && (_a = componentTypes_2.return)) _a.call(componentTypes_2);
                }
                finally { if (e_2) throw e_2.error; }
            }
            return Array.from(guards);
        };
        /**
         * @param {?} componentTypes
         * @return {?}
         */
        CmsMappingService.prototype.getI18nKeysForComponents = /**
         * @param {?} componentTypes
         * @return {?}
         */
        function (componentTypes) {
            var e_3, _a;
            /** @type {?} */
            var i18nKeys = new Set();
            try {
                for (var componentTypes_3 = __values(componentTypes), componentTypes_3_1 = componentTypes_3.next(); !componentTypes_3_1.done; componentTypes_3_1 = componentTypes_3.next()) {
                    var componentType = componentTypes_3_1.value;
                    if (this.isComponentEnabled(componentType)) {
                        this.getI18nKeysForComponent(componentType).forEach((/**
                         * @param {?} key
                         * @return {?}
                         */
                        function (key) {
                            return i18nKeys.add(key);
                        }));
                    }
                }
            }
            catch (e_3_1) { e_3 = { error: e_3_1 }; }
            finally {
                try {
                    if (componentTypes_3_1 && !componentTypes_3_1.done && (_a = componentTypes_3.return)) _a.call(componentTypes_3);
                }
                finally { if (e_3) throw e_3.error; }
            }
            return Array.from(i18nKeys);
        };
        /**
         * @private
         * @param {?} componentType
         * @return {?}
         */
        CmsMappingService.prototype.getRoutesForComponent = /**
         * @private
         * @param {?} componentType
         * @return {?}
         */
        function (componentType) {
            /** @type {?} */
            var mappingConfig = this.config.cmsComponents[componentType];
            return (mappingConfig && mappingConfig.childRoutes) || [];
        };
        /**
         * @private
         * @param {?} componentType
         * @return {?}
         */
        CmsMappingService.prototype.getGuardsForComponent = /**
         * @private
         * @param {?} componentType
         * @return {?}
         */
        function (componentType) {
            /** @type {?} */
            var mappingConfig = this.config.cmsComponents[componentType];
            return (mappingConfig && mappingConfig.guards) || [];
        };
        /**
         * @private
         * @param {?} componentType
         * @return {?}
         */
        CmsMappingService.prototype.getI18nKeysForComponent = /**
         * @private
         * @param {?} componentType
         * @return {?}
         */
        function (componentType) {
            /** @type {?} */
            var mappingConfig = this.config.cmsComponents[componentType];
            return (mappingConfig && mappingConfig.i18nKeys) || [];
        };
        CmsMappingService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CmsMappingService.ctorParameters = function () { return [
            { type: core$1.CmsConfig },
            { type: Object, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] }
        ]; };
        /** @nocollapse */ CmsMappingService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CmsMappingService_Factory() { return new CmsMappingService(core.ɵɵinject(core$1.CmsConfig), core.ɵɵinject(core.PLATFORM_ID)); }, token: CmsMappingService, providedIn: "root" });
        return CmsMappingService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CmsMappingService.prototype.config;
        /**
         * @type {?}
         * @private
         */
        CmsMappingService.prototype.platformId;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Please don't put that service in public API.
     *
     */
    var CmsGuardsService = /** @class */ (function () {
        function CmsGuardsService(cmsMapping, injector) {
            this.cmsMapping = cmsMapping;
            this.injector = injector;
        }
        /**
         * @param {?} componentTypes
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        CmsGuardsService.prototype.cmsPageCanActivate = /**
         * @param {?} componentTypes
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        function (componentTypes, route, state) {
            var _this = this;
            /** @type {?} */
            var guards = this.cmsMapping.getGuardsForComponents(componentTypes);
            if (guards.length) {
                /** @type {?} */
                var canActivateObservables = guards.map((/**
                 * @param {?} guardClass
                 * @return {?}
                 */
                function (guardClass) {
                    /** @type {?} */
                    var guard = _this.injector.get(guardClass, null);
                    if (isCanActivate(guard)) {
                        return wrapIntoObservable(guard.canActivate(route, state)).pipe(operators.first());
                    }
                    else {
                        throw new Error('Invalid CanActivate guard in cmsMapping');
                    }
                }));
                return rxjs.concat.apply(void 0, __spread(canActivateObservables)).pipe(operators.skipWhile((/**
                 * @param {?} canActivate
                 * @return {?}
                 */
                function (canActivate) { return canActivate === true; })), operators.endWith(true), operators.first());
            }
            else {
                return rxjs.of(true);
            }
        };
        CmsGuardsService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CmsGuardsService.ctorParameters = function () { return [
            { type: CmsMappingService },
            { type: core.Injector }
        ]; };
        /** @nocollapse */ CmsGuardsService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CmsGuardsService_Factory() { return new CmsGuardsService(core.ɵɵinject(CmsMappingService), core.ɵɵinject(core.INJECTOR)); }, token: CmsGuardsService, providedIn: "root" });
        return CmsGuardsService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CmsGuardsService.prototype.cmsMapping;
        /**
         * @type {?}
         * @private
         */
        CmsGuardsService.prototype.injector;
    }
    /**
     * @template T
     * @param {?} value
     * @return {?}
     */
    function wrapIntoObservable(value) {
        if (rxjs.isObservable(value)) {
            return value;
        }
        if (isPromise(value)) {
            return rxjs.from(Promise.resolve(value));
        }
        return rxjs.of(value);
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    function isPromise(obj) {
        return !!obj && typeof obj.then === 'function';
    }
    /**
     * @param {?} guard
     * @return {?}
     */
    function isCanActivate(guard) {
        return guard && isFunction(guard.canActivate);
    }
    /**
     * @template T
     * @param {?} v
     * @return {?}
     */
    function isFunction(v) {
        return typeof v === 'function';
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Please don't put that service in public API.
     *
     */
    var CmsI18nService = /** @class */ (function () {
        function CmsI18nService(cmsMapping, translation, translationChunk) {
            this.cmsMapping = cmsMapping;
            this.translation = translation;
            this.translationChunk = translationChunk;
        }
        /**
         * @param {?} componentTypes
         * @return {?}
         */
        CmsI18nService.prototype.loadChunksForComponents = /**
         * @param {?} componentTypes
         * @return {?}
         */
        function (componentTypes) {
            var e_1, _a;
            /** @type {?} */
            var i18nKeys = this.cmsMapping.getI18nKeysForComponents(componentTypes);
            /** @type {?} */
            var i18nChunks = new Set();
            try {
                for (var i18nKeys_1 = __values(i18nKeys), i18nKeys_1_1 = i18nKeys_1.next(); !i18nKeys_1_1.done; i18nKeys_1_1 = i18nKeys_1.next()) {
                    var key = i18nKeys_1_1.value;
                    i18nChunks.add(this.translationChunk.getChunkNameForKey(key));
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (i18nKeys_1_1 && !i18nKeys_1_1.done && (_a = i18nKeys_1.return)) _a.call(i18nKeys_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            this.translation.loadChunks(Array.from(i18nChunks));
        };
        CmsI18nService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CmsI18nService.ctorParameters = function () { return [
            { type: CmsMappingService },
            { type: core$1.TranslationService },
            { type: core$1.TranslationChunkService }
        ]; };
        /** @nocollapse */ CmsI18nService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CmsI18nService_Factory() { return new CmsI18nService(core.ɵɵinject(CmsMappingService), core.ɵɵinject(core$1.TranslationService), core.ɵɵinject(core$1.TranslationChunkService)); }, token: CmsI18nService, providedIn: "root" });
        return CmsI18nService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CmsI18nService.prototype.cmsMapping;
        /**
         * @type {?}
         * @private
         */
        CmsI18nService.prototype.translation;
        /**
         * @type {?}
         * @private
         */
        CmsI18nService.prototype.translationChunk;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var PAGE_LAYOUT_HANDLER = new core.InjectionToken('PageLayoutHandler');
    /**
     * @record
     */
    function PageLayoutHandler() { }
    if (false) {
        /**
         * @param {?} slots
         * @param {?=} pageTemplate
         * @param {?=} section
         * @param {?=} breakpoint
         * @return {?}
         */
        PageLayoutHandler.prototype.handle = function (slots, pageTemplate, section, breakpoint) { };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PageLayoutService = /** @class */ (function () {
        function PageLayoutService(cms, config, breakpointService, handlers) {
            this.cms = cms;
            this.config = config;
            this.breakpointService = breakpointService;
            this.handlers = handlers;
            // Prints warn messages for missing layout configs.
            // The warnings are only printed once per config
            // to not pollute the console log.
            this.warnLogMessages = {};
            this.logSlots = {};
        }
        /**
         * @param {?=} section
         * @return {?}
         */
        PageLayoutService.prototype.getSlots = /**
         * @param {?=} section
         * @return {?}
         */
        function (section) {
            var _this = this;
            return rxjs.combineLatest([this.page$, this.breakpointService.breakpoint$]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), page = _b[0], breakpoint = _b[1];
                /** @type {?} */
                var pageTemplate = page.template;
                /** @type {?} */
                var slots = _this.resolveSlots(page, section, breakpoint);
                return { slots: slots, pageTemplate: pageTemplate, breakpoint: breakpoint };
            })), operators.switchMap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var e_1, _b;
                var slots = _a.slots, pageTemplate = _a.pageTemplate, breakpoint = _a.breakpoint;
                /** @type {?} */
                var result = rxjs.of(slots);
                try {
                    for (var _c = __values(_this.handlers || []), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var handler = _d.value;
                        result = handler.handle(result, pageTemplate, section, breakpoint);
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
                return result;
            })), operators.distinctUntilChanged((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            function (a, b) {
                if (a.length !== b.length) {
                    return false;
                }
                for (var i = 0; i < a.length; i++) {
                    if (a[i] !== b[i]) {
                        return false;
                    }
                }
                return true;
            })));
        };
        /**
         * Returns an observable with the last page slot above-the-fold
         * for the given pageTemplate / breakpoint.
         *
         * The page fold is configurable in the `LayoutConfig` for each page layout.
         */
        /**
         * Returns an observable with the last page slot above-the-fold
         * for the given pageTemplate / breakpoint.
         *
         * The page fold is configurable in the `LayoutConfig` for each page layout.
         * @param {?} pageTemplate
         * @return {?}
         */
        PageLayoutService.prototype.getPageFoldSlot = /**
         * Returns an observable with the last page slot above-the-fold
         * for the given pageTemplate / breakpoint.
         *
         * The page fold is configurable in the `LayoutConfig` for each page layout.
         * @param {?} pageTemplate
         * @return {?}
         */
        function (pageTemplate) {
            var _this = this;
            return this.breakpointService.breakpoint$.pipe(operators.map((/**
             * @param {?} breakpoint
             * @return {?}
             */
            function (breakpoint) {
                if (!_this.config.layoutSlots) {
                    // no layout config available
                    return null;
                }
                /** @type {?} */
                var pageTemplateConfig = _this.config.layoutSlots[pageTemplate];
                /** @type {?} */
                var config = _this.getResponsiveSlotConfig((/** @type {?} */ (pageTemplateConfig)), 'pageFold', breakpoint);
                return config ? config.pageFold : null;
            })));
        };
        /**
         * @private
         * @param {?} page
         * @param {?} section
         * @param {?} breakpoint
         * @return {?}
         */
        PageLayoutService.prototype.resolveSlots = /**
         * @private
         * @param {?} page
         * @param {?} section
         * @param {?} breakpoint
         * @return {?}
         */
        function (page, section, breakpoint) {
            /** @type {?} */
            var config = this.getSlotConfig(page.template, 'slots', section, breakpoint);
            if (config && config.slots) {
                /** @type {?} */
                var pageSlots_1 = Object.keys(page.slots);
                return config.slots.filter((/**
                 * @param {?} slot
                 * @return {?}
                 */
                function (slot) { return pageSlots_1.includes(slot); }));
            }
            else if (!section) {
                this.logMissingLayoutConfig(page);
                return Object.keys(page.slots);
            }
            else {
                this.logMissingLayoutConfig(page, section);
                return [];
            }
        };
        Object.defineProperty(PageLayoutService.prototype, "page$", {
            get: /**
             * @return {?}
             */
            function () {
                return this.cms.getCurrentPage().pipe(operators.filter((/**
                 * @param {?} page
                 * @return {?}
                 */
                function (page) { return !!page; })));
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(PageLayoutService.prototype, "templateName$", {
            get: /**
             * @return {?}
             */
            function () {
                return this.page$.pipe(operators.filter((/**
                 * @param {?} page
                 * @return {?}
                 */
                function (page) { return !!page.template; })), operators.map((/**
                 * @param {?} page
                 * @return {?}
                 */
                function (page) { return page.template; })));
            },
            enumerable: true,
            configurable: true
        });
        /**
         * load slots from the layout configuration. The breakpoint is used
         * to load a specific configuration for the given breakpoint. If there's
         * no configuration available for the given breakpoint the default slot
         * configuration is returned.
         */
        /**
         * load slots from the layout configuration. The breakpoint is used
         * to load a specific configuration for the given breakpoint. If there's
         * no configuration available for the given breakpoint the default slot
         * configuration is returned.
         * @protected
         * @param {?} templateUid
         * @param {?} configAttribute
         * @param {?=} section
         * @param {?=} breakpoint
         * @return {?}
         */
        PageLayoutService.prototype.getSlotConfig = /**
         * load slots from the layout configuration. The breakpoint is used
         * to load a specific configuration for the given breakpoint. If there's
         * no configuration available for the given breakpoint the default slot
         * configuration is returned.
         * @protected
         * @param {?} templateUid
         * @param {?} configAttribute
         * @param {?=} section
         * @param {?=} breakpoint
         * @return {?}
         */
        function (templateUid, configAttribute, section, breakpoint) {
            if (!this.config.layoutSlots) {
                return null;
            }
            /** @type {?} */
            var pageTemplateConfig = this.config.layoutSlots[templateUid];
            if (section) {
                return this.getSlotConfigForSection(templateUid, configAttribute, section, breakpoint);
            }
            if (pageTemplateConfig) {
                return this.getResponsiveSlotConfig((/** @type {?} */ (pageTemplateConfig)), configAttribute, breakpoint);
            }
        };
        /**
         * @protected
         * @param {?} templateUid
         * @param {?} configAttribute
         * @param {?=} section
         * @param {?=} breakpoint
         * @return {?}
         */
        PageLayoutService.prototype.getSlotConfigForSection = /**
         * @protected
         * @param {?} templateUid
         * @param {?} configAttribute
         * @param {?=} section
         * @param {?=} breakpoint
         * @return {?}
         */
        function (templateUid, configAttribute, section, breakpoint) {
            /** @type {?} */
            var pageTemplateConfig = this.config.layoutSlots[templateUid];
            if (!pageTemplateConfig) {
                return null;
            }
            // if there's no section config on the page layout
            // we fall back to the global section config
            /** @type {?} */
            var sectionConfig = pageTemplateConfig[section]
                ? pageTemplateConfig[section]
                : this.config.layoutSlots[section];
            if (!sectionConfig) {
                return null;
            }
            /** @type {?} */
            var responsiveConfig = this.getResponsiveSlotConfig((/** @type {?} */ (sectionConfig)), configAttribute, breakpoint);
            if (responsiveConfig.hasOwnProperty(configAttribute)) {
                return responsiveConfig;
            }
            else if (pageTemplateConfig[section].hasOwnProperty(configAttribute)) {
                return pageTemplateConfig[section];
            }
            else if (this.config.layoutSlots[section]) {
                return (/** @type {?} */ (this.config.layoutSlots[section]));
            }
        };
        /**
         * Returns a list of slots for a breakpoint specific configuratoin
         * If there's no specific configuration for the breakpoint,
         * the closest available configuration will be returned.
         */
        /**
         * Returns a list of slots for a breakpoint specific configuratoin
         * If there's no specific configuration for the breakpoint,
         * the closest available configuration will be returned.
         * @protected
         * @param {?} layoutSlotConfig
         * @param {?} configAttribute
         * @param {?=} breakpoint
         * @return {?}
         */
        PageLayoutService.prototype.getResponsiveSlotConfig = /**
         * Returns a list of slots for a breakpoint specific configuratoin
         * If there's no specific configuration for the breakpoint,
         * the closest available configuration will be returned.
         * @protected
         * @param {?} layoutSlotConfig
         * @param {?} configAttribute
         * @param {?=} breakpoint
         * @return {?}
         */
        function (layoutSlotConfig, configAttribute, breakpoint) {
            var e_2, _a;
            /** @type {?} */
            var slotConfig = (/** @type {?} */ (layoutSlotConfig));
            // fallback to default slot config
            if (!layoutSlotConfig || !breakpoint) {
                return slotConfig;
            }
            // we have a config for the specific breakpoint
            if (layoutSlotConfig[breakpoint] &&
                layoutSlotConfig[breakpoint].hasOwnProperty(configAttribute)) {
                return (/** @type {?} */ (layoutSlotConfig[breakpoint]));
            }
            // find closest config
            /** @type {?} */
            var all = this.breakpointService.breakpoints;
            try {
                for (var _b = __values(all.splice(0, all.indexOf(breakpoint))), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var br = _c.value;
                    if (layoutSlotConfig[br] &&
                        layoutSlotConfig[br].hasOwnProperty(configAttribute)) {
                        slotConfig = (/** @type {?} */ (layoutSlotConfig[br]));
                    }
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_2) throw e_2.error; }
            }
            return slotConfig;
        };
        /**
         * In order to help developers, we print some detailed log information in
         * case there's no layout configuration available for the given page template
         * or section. Additionally, the slot positions are printed in the console
         * in a format that can be copied / paste to the configuration.
         */
        /**
         * In order to help developers, we print some detailed log information in
         * case there's no layout configuration available for the given page template
         * or section. Additionally, the slot positions are printed in the console
         * in a format that can be copied / paste to the configuration.
         * @private
         * @param {?} page
         * @param {?=} section
         * @return {?}
         */
        PageLayoutService.prototype.logMissingLayoutConfig = /**
         * In order to help developers, we print some detailed log information in
         * case there's no layout configuration available for the given page template
         * or section. Additionally, the slot positions are printed in the console
         * in a format that can be copied / paste to the configuration.
         * @private
         * @param {?} page
         * @param {?=} section
         * @return {?}
         */
        function (page, section) {
            if (!core.isDevMode()) {
                return;
            }
            if (!this.logSlots[page.template]) {
                // the info log is not printed in production
                // tslint:disable-next-line: no-console
                console.info("Available CMS page slots: '" + Object.keys(page.slots).join("','") + "'");
                this.logSlots[page.template] = true;
            }
            /** @type {?} */
            var cacheKey = section || page.template;
            if (!this.warnLogMessages[cacheKey]) {
                console.warn("No layout config found for " + cacheKey + ", you can configure a 'LayoutConfig' to control the rendering of page slots.");
                this.warnLogMessages[cacheKey] = true;
            }
        };
        PageLayoutService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        PageLayoutService.ctorParameters = function () { return [
            { type: core$1.CmsService },
            { type: LayoutConfig },
            { type: BreakpointService },
            { type: Array, decorators: [{ type: core.Optional }, { type: core.Inject, args: [PAGE_LAYOUT_HANDLER,] }] }
        ]; };
        return PageLayoutService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        PageLayoutService.prototype.warnLogMessages;
        /**
         * @type {?}
         * @private
         */
        PageLayoutService.prototype.logSlots;
        /**
         * @type {?}
         * @private
         */
        PageLayoutService.prototype.cms;
        /**
         * @type {?}
         * @private
         */
        PageLayoutService.prototype.config;
        /**
         * @type {?}
         * @private
         */
        PageLayoutService.prototype.breakpointService;
        /**
         * @type {?}
         * @private
         */
        PageLayoutService.prototype.handlers;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PageLayoutComponent = /** @class */ (function () {
        function PageLayoutComponent(el, renderer, pageLayoutService) {
            var _this = this;
            this.el = el;
            this.renderer = renderer;
            this.pageLayoutService = pageLayoutService;
            this.section$ = new rxjs.BehaviorSubject(undefined);
            this.templateName$ = this.pageLayoutService
                .templateName$;
            this.layoutName$ = this.section$.pipe(operators.switchMap((/**
             * @param {?} section
             * @return {?}
             */
            function (section) { return (section ? rxjs.of(section) : _this.templateName$); })), operators.tap((/**
             * @param {?} name
             * @return {?}
             */
            function (name) {
                _this.styleClass = name;
            })));
            this.slots$ = this.section$.pipe(operators.switchMap((/**
             * @param {?} section
             * @return {?}
             */
            function (section) { return _this.pageLayoutService.getSlots(section); })));
            this.pageFoldSlot$ = this.templateName$.pipe(operators.switchMap((/**
             * @param {?} templateName
             * @return {?}
             */
            function (templateName) {
                return _this.pageLayoutService.getPageFoldSlot(templateName);
            })), operators.distinctUntilChanged());
        }
        Object.defineProperty(PageLayoutComponent.prototype, "section", {
            set: /**
             * @param {?} value
             * @return {?}
             */
            function (value) {
                this.section$.next(value);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(PageLayoutComponent.prototype, "styleClass", {
            set: /**
             * @param {?} cls
             * @return {?}
             */
            function (cls) {
                if (this.currentClass) {
                    this.renderer.removeClass(this.el.nativeElement, this.currentClass);
                }
                this.renderer.addClass(this.el.nativeElement, cls);
                this.currentClass = cls;
            },
            enumerable: true,
            configurable: true
        });
        PageLayoutComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-page-layout',
                        template: "<ng-template\n  [cxOutlet]=\"layoutName$ | async\"\n  [cxOutletContext]=\"{\n    templateName$: templateName$,\n    slots$: slots$,\n    section$: section$\n  }\"\n>\n  <ng-content></ng-content>\n\n  <cx-page-slot\n    *ngFor=\"let slot of slots$ | async\"\n    [position]=\"slot\"\n    [isPageFold]=\"slot === (pageFoldSlot$ | async)\"\n  ></cx-page-slot>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        PageLayoutComponent.ctorParameters = function () { return [
            { type: core.ElementRef },
            { type: core.Renderer2 },
            { type: PageLayoutService }
        ]; };
        PageLayoutComponent.propDecorators = {
            section: [{ type: core.Input }]
        };
        return PageLayoutComponent;
    }());
    if (false) {
        /** @type {?} */
        PageLayoutComponent.prototype.section$;
        /** @type {?} */
        PageLayoutComponent.prototype.templateName$;
        /** @type {?} */
        PageLayoutComponent.prototype.layoutName$;
        /** @type {?} */
        PageLayoutComponent.prototype.slots$;
        /** @type {?} */
        PageLayoutComponent.prototype.pageFoldSlot$;
        /**
         * @type {?}
         * @private
         */
        PageLayoutComponent.prototype.currentClass;
        /**
         * @type {?}
         * @private
         */
        PageLayoutComponent.prototype.el;
        /**
         * @type {?}
         * @private
         */
        PageLayoutComponent.prototype.renderer;
        /**
         * @type {?}
         * @private
         */
        PageLayoutComponent.prototype.pageLayoutService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Please don't put that service in public API.
     *
     */
    var CmsRoutesService = /** @class */ (function () {
        function CmsRoutesService(router, cmsMapping) {
            this.router = router;
            this.cmsMapping = cmsMapping;
        }
        /**
         * @param {?} url
         * @return {?}
         */
        CmsRoutesService.prototype.cmsRouteExist = /**
         * @param {?} url
         * @return {?}
         */
        function (url) {
            /** @type {?} */
            var isCmsDrivenRoute = url.startsWith('/');
            if (!isCmsDrivenRoute) {
                return false;
            }
            /** @type {?} */
            var routePath = url.substr(1);
            return (isCmsDrivenRoute &&
                !!this.router.config.find((/**
                 * @param {?} route
                 * @return {?}
                 */
                function (route) {
                    return route.data && route.data.cxCmsRouteContext && route.path === routePath;
                })));
        };
        /**
         * Contains Cms driven routing logic intended for use use in guards, especially in canActivate method.
         *
         * Will return true, when logic wont have to modify routing (so canActivate could be easily resolved to true)
         * or will return false, when routing configuration was updated and redirection to newly generated route was initiated.
         *
         * @param pageContext
         * @param currentUrl
         */
        /**
         * Contains Cms driven routing logic intended for use use in guards, especially in canActivate method.
         *
         * Will return true, when logic wont have to modify routing (so canActivate could be easily resolved to true)
         * or will return false, when routing configuration was updated and redirection to newly generated route was initiated.
         *
         * @param {?} pageContext
         * @param {?} componentTypes
         * @param {?} currentUrl
         * @param {?} currentPageLabel
         * @return {?}
         */
        CmsRoutesService.prototype.handleCmsRoutesInGuard = /**
         * Contains Cms driven routing logic intended for use use in guards, especially in canActivate method.
         *
         * Will return true, when logic wont have to modify routing (so canActivate could be easily resolved to true)
         * or will return false, when routing configuration was updated and redirection to newly generated route was initiated.
         *
         * @param {?} pageContext
         * @param {?} componentTypes
         * @param {?} currentUrl
         * @param {?} currentPageLabel
         * @return {?}
         */
        function (pageContext, componentTypes, currentUrl, currentPageLabel) {
            /** @type {?} */
            var componentRoutes = this.cmsMapping.getRoutesForComponents(componentTypes);
            if (componentRoutes.length) {
                if (this.updateRouting(pageContext, currentPageLabel, componentRoutes)) {
                    this.router.navigateByUrl(currentUrl);
                    return false;
                }
            }
            return true;
        };
        /**
         * @private
         * @param {?} pageContext
         * @param {?} pageLabel
         * @param {?} routes
         * @return {?}
         */
        CmsRoutesService.prototype.updateRouting = /**
         * @private
         * @param {?} pageContext
         * @param {?} pageLabel
         * @param {?} routes
         * @return {?}
         */
        function (pageContext, pageLabel, routes) {
            if (pageContext.type === core$1.PageType.CONTENT_PAGE &&
                pageLabel.startsWith('/') &&
                pageLabel.length > 1) {
                /** @type {?} */
                var newRoute = {
                    path: pageLabel.substr(1),
                    component: PageLayoutComponent,
                    children: routes,
                    data: {
                        cxCmsRouteContext: {
                            type: pageContext.type,
                            id: pageLabel,
                        },
                    },
                };
                this.router.resetConfig(__spread([newRoute], this.router.config));
                return true;
            }
            return false;
        };
        CmsRoutesService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CmsRoutesService.ctorParameters = function () { return [
            { type: router.Router },
            { type: CmsMappingService }
        ]; };
        /** @nocollapse */ CmsRoutesService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CmsRoutesService_Factory() { return new CmsRoutesService(core.ɵɵinject(router.Router), core.ɵɵinject(CmsMappingService)); }, token: CmsRoutesService, providedIn: "root" });
        return CmsRoutesService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CmsRoutesService.prototype.router;
        /**
         * @type {?}
         * @private
         */
        CmsRoutesService.prototype.cmsMapping;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CmsPageGuard = /** @class */ (function () {
        function CmsPageGuard(routingService, cmsService, cmsRoutes, cmsI18n, cmsGuards, semanticPathService, protectedRoutesGuard) {
            this.routingService = routingService;
            this.cmsService = cmsService;
            this.cmsRoutes = cmsRoutes;
            this.cmsI18n = cmsI18n;
            this.cmsGuards = cmsGuards;
            this.semanticPathService = semanticPathService;
            this.protectedRoutesGuard = protectedRoutesGuard;
        }
        /**
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        CmsPageGuard.prototype.canActivate = /**
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        function (route, state) {
            var _this = this;
            /**
             * TODO(issue:4646) Expect that `ProtectedRoutesGuard` dependency is required (remove `if` logic)
             */
            return this.protectedRoutesGuard
                ? this.protectedRoutesGuard
                    .canActivate(route)
                    .pipe(operators.switchMap((/**
                 * @param {?} result
                 * @return {?}
                 */
                function (result) {
                    return result ? _this.getCmsPage(route, state) : rxjs.of(result);
                })))
                : this.getCmsPage(route, state);
        };
        /**
         * @private
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        CmsPageGuard.prototype.getCmsPage = /**
         * @private
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        function (route, state) {
            var _this = this;
            return this.routingService.getNextPageContext().pipe(operators.switchMap((/**
             * @param {?} pageContext
             * @return {?}
             */
            function (pageContext) {
                return _this.cmsService.getPage(pageContext, true).pipe(operators.first(), operators.withLatestFrom(rxjs.of(pageContext)));
            })), operators.switchMap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), pageData = _b[0], pageContext = _b[1];
                return pageData
                    ? _this.resolveCmsPageLogic(pageContext, pageData, route, state)
                    : _this.handleNotFoundPage(pageContext, route, state);
            })));
        };
        /**
         * @private
         * @param {?} pageContext
         * @param {?} pageData
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        CmsPageGuard.prototype.resolveCmsPageLogic = /**
         * @private
         * @param {?} pageContext
         * @param {?} pageData
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        function (pageContext, pageData, route, state) {
            var _this = this;
            return this.cmsService.getPageComponentTypes(pageContext).pipe(operators.take(1), operators.switchMap((/**
             * @param {?} componentTypes
             * @return {?}
             */
            function (componentTypes) {
                return _this.cmsGuards
                    .cmsPageCanActivate(componentTypes, route, state)
                    .pipe(operators.withLatestFrom(rxjs.of(componentTypes)));
            })), operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), canActivate = _b[0], componentTypes = _b[1];
                if (canActivate === true) {
                    _this.cmsI18n.loadChunksForComponents(componentTypes);
                }
            })), operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), canActivate = _b[0], componentTypes = _b[1];
                /** @type {?} */
                var pageLabel = pageData.label || pageContext.id;
                if (canActivate === true &&
                    !route.data.cxCmsRouteContext &&
                    !_this.cmsRoutes.cmsRouteExist(pageLabel)) {
                    return _this.cmsRoutes.handleCmsRoutesInGuard(pageContext, componentTypes, state.url, pageLabel);
                }
                return canActivate;
            })));
        };
        /**
         * @private
         * @param {?} pageContext
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        CmsPageGuard.prototype.handleNotFoundPage = /**
         * @private
         * @param {?} pageContext
         * @param {?} route
         * @param {?} state
         * @return {?}
         */
        function (pageContext, route, state) {
            var _this = this;
            /** @type {?} */
            var notFoundCmsPageContext = {
                type: core$1.PageType.CONTENT_PAGE,
                id: this.semanticPathService.get('notFound'),
            };
            return this.cmsService.getPage(notFoundCmsPageContext).pipe(operators.switchMap((/**
             * @param {?} notFoundPage
             * @return {?}
             */
            function (notFoundPage) {
                if (notFoundPage) {
                    return _this.cmsService.getPageIndex(notFoundCmsPageContext).pipe(operators.tap((/**
                     * @param {?} notFoundIndex
                     * @return {?}
                     */
                    function (notFoundIndex) {
                        _this.cmsService.setPageFailIndex(pageContext, notFoundIndex);
                    })), operators.switchMap((/**
                     * @param {?} notFoundIndex
                     * @return {?}
                     */
                    function (notFoundIndex) {
                        return _this.cmsService.getPageIndex(pageContext).pipe(
                        // we have to wait for page index update
                        operators.filter((/**
                         * @param {?} index
                         * @return {?}
                         */
                        function (index) { return index === notFoundIndex; })));
                    })), operators.switchMap((/**
                     * @return {?}
                     */
                    function () {
                        return _this.resolveCmsPageLogic(pageContext, notFoundPage, route, state);
                    })));
                }
                return rxjs.of(false);
            })));
        };
        CmsPageGuard.guardName = 'CmsPageGuard';
        CmsPageGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CmsPageGuard.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.CmsService },
            { type: CmsRoutesService },
            { type: CmsI18nService },
            { type: CmsGuardsService },
            { type: core$1.SemanticPathService },
            { type: core$1.ProtectedRoutesGuard }
        ]; };
        /** @nocollapse */ CmsPageGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CmsPageGuard_Factory() { return new CmsPageGuard(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.CmsService), core.ɵɵinject(CmsRoutesService), core.ɵɵinject(CmsI18nService), core.ɵɵinject(CmsGuardsService), core.ɵɵinject(core$1.SemanticPathService), core.ɵɵinject(core$1.ProtectedRoutesGuard)); }, token: CmsPageGuard, providedIn: "root" });
        return CmsPageGuard;
    }());
    if (false) {
        /** @type {?} */
        CmsPageGuard.guardName;
        /**
         * @type {?}
         * @protected
         */
        CmsPageGuard.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        CmsPageGuard.prototype.cmsService;
        /**
         * @type {?}
         * @private
         */
        CmsPageGuard.prototype.cmsRoutes;
        /**
         * @type {?}
         * @private
         */
        CmsPageGuard.prototype.cmsI18n;
        /**
         * @type {?}
         * @private
         */
        CmsPageGuard.prototype.cmsGuards;
        /**
         * @type {?}
         * @protected
         */
        CmsPageGuard.prototype.semanticPathService;
        /**
         * @type {?}
         * @protected
         */
        CmsPageGuard.prototype.protectedRoutesGuard;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var OutletPosition = {
        REPLACE: 'replace',
        BEFORE: 'before',
        AFTER: 'after',
    };
    /** @type {?} */
    var AVOID_STACKED_OUTLETS = false;
    /** @type {?} */
    var USE_STACKED_OUTLETS = true;

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @template T
     */
    var OutletService = /** @class */ (function () {
        function OutletService() {
            this.templatesRefs = new Map();
            this.templatesRefsBefore = new Map();
            this.templatesRefsAfter = new Map();
        }
        /**
         * @param templateOrFactory A `ComponentFactory` that inserts a component dynamically.
         */
        /**
         * @param {?} outlet
         * @param {?} templateOrFactory A `ComponentFactory` that inserts a component dynamically.
         * @param {?=} position
         * @return {?}
         */
        OutletService.prototype.add = /**
         * @param {?} outlet
         * @param {?} templateOrFactory A `ComponentFactory` that inserts a component dynamically.
         * @param {?=} position
         * @return {?}
         */
        function (outlet, templateOrFactory, position) {
            if (position === void 0) { position = OutletPosition.REPLACE; }
            if (position === OutletPosition.BEFORE) {
                this.store(this.templatesRefsBefore, outlet, templateOrFactory);
            }
            if (position === OutletPosition.REPLACE) {
                this.store(this.templatesRefs, outlet, templateOrFactory);
            }
            if (position === OutletPosition.AFTER) {
                this.store(this.templatesRefsAfter, outlet, templateOrFactory);
            }
        };
        /**
         *
         * Returns a single object or multiple objects for the given outlet reference,
         * depending on the `stacked` argument.
         *
         * @param outlet The outlet reference
         * @param position the outlet position, `OutletPosition.before`, `OutletPosition.AFTER` or `OutletPosition.REPLACE`
         * @param stacked Indicates whether an array of outlet components is returned
         */
        /**
         *
         * Returns a single object or multiple objects for the given outlet reference,
         * depending on the `stacked` argument.
         *
         * @param {?} outlet The outlet reference
         * @param {?=} position the outlet position, `OutletPosition.before`, `OutletPosition.AFTER` or `OutletPosition.REPLACE`
         * @param {?=} stacked Indicates whether an array of outlet components is returned
         * @return {?}
         */
        OutletService.prototype.get = /**
         *
         * Returns a single object or multiple objects for the given outlet reference,
         * depending on the `stacked` argument.
         *
         * @param {?} outlet The outlet reference
         * @param {?=} position the outlet position, `OutletPosition.before`, `OutletPosition.AFTER` or `OutletPosition.REPLACE`
         * @param {?=} stacked Indicates whether an array of outlet components is returned
         * @return {?}
         */
        function (outlet, position, stacked) {
            if (position === void 0) { position = OutletPosition.REPLACE; }
            if (stacked === void 0) { stacked = AVOID_STACKED_OUTLETS; }
            /** @type {?} */
            var templateRef;
            switch (position) {
                case OutletPosition.BEFORE:
                    templateRef = this.templatesRefsBefore.get(outlet);
                    break;
                case OutletPosition.AFTER:
                    templateRef = this.templatesRefsAfter.get(outlet);
                    break;
                default:
                    templateRef = this.templatesRefs.get(outlet);
            }
            if (templateRef && !stacked) {
                return templateRef[0];
            }
            return templateRef;
        };
        /**
         * @private
         * @param {?} store
         * @param {?} outlet
         * @param {?} value
         * @return {?}
         */
        OutletService.prototype.store = /**
         * @private
         * @param {?} store
         * @param {?} outlet
         * @param {?} value
         * @return {?}
         */
        function (store, outlet, value) {
            /** @type {?} */
            var existing = store.get(outlet) || [];
            /** @type {?} */
            var newValue = existing.concat([value]);
            store.set(outlet, newValue);
        };
        OutletService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */ OutletService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function OutletService_Factory() { return new OutletService(); }, token: OutletService, providedIn: "root" });
        return OutletService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        OutletService.prototype.templatesRefs;
        /**
         * @type {?}
         * @private
         */
        OutletService.prototype.templatesRefsBefore;
        /**
         * @type {?}
         * @private
         */
        OutletService.prototype.templatesRefsAfter;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OutletRefDirective = /** @class */ (function () {
        function OutletRefDirective(tpl, outletService) {
            this.tpl = tpl;
            this.outletService = outletService;
        }
        /**
         * @return {?}
         */
        OutletRefDirective.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.outletService.add(this.cxOutletRef, this.tpl, this.cxOutletPos);
        };
        OutletRefDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[cxOutletRef]',
                    },] }
        ];
        /** @nocollapse */
        OutletRefDirective.ctorParameters = function () { return [
            { type: core.TemplateRef },
            { type: OutletService }
        ]; };
        OutletRefDirective.propDecorators = {
            cxOutletRef: [{ type: core.Input }],
            cxOutletPos: [{ type: core.Input }]
        };
        return OutletRefDirective;
    }());
    if (false) {
        /** @type {?} */
        OutletRefDirective.prototype.cxOutletRef;
        /** @type {?} */
        OutletRefDirective.prototype.cxOutletPos;
        /**
         * @type {?}
         * @private
         */
        OutletRefDirective.prototype.tpl;
        /**
         * @type {?}
         * @private
         */
        OutletRefDirective.prototype.outletService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OutletRefModule = /** @class */ (function () {
        function OutletRefModule() {
        }
        OutletRefModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [OutletRefDirective],
                        exports: [OutletRefDirective],
                    },] }
        ];
        return OutletRefModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * The IntersectionService uses the native IntersectionObserver (v2), which
     * can be used to implement pre-loading and deferred loading of DOM content.
     *
     */
    var IntersectionService = /** @class */ (function () {
        function IntersectionService(config) {
            this.config = config;
        }
        /**
         * Returns an Observable that emits only once a boolean value whenever
         * the given element has shown in the view port.
         *
         * The returned obervable will only emit the first value. The
         * observable must be cleaned up either way, since the value might never emit; it
         *  depends on whether the element appears in the view port.
         */
        /**
         * Returns an Observable that emits only once a boolean value whenever
         * the given element has shown in the view port.
         *
         * The returned obervable will only emit the first value. The
         * observable must be cleaned up either way, since the value might never emit; it
         *  depends on whether the element appears in the view port.
         * @param {?} element
         * @param {?=} options
         * @return {?}
         */
        IntersectionService.prototype.isIntersected = /**
         * Returns an Observable that emits only once a boolean value whenever
         * the given element has shown in the view port.
         *
         * The returned obervable will only emit the first value. The
         * observable must be cleaned up either way, since the value might never emit; it
         *  depends on whether the element appears in the view port.
         * @param {?} element
         * @param {?=} options
         * @return {?}
         */
        function (element, options) {
            return this.intersects(element, options).pipe(operators.first((/**
             * @param {?} v
             * @return {?}
             */
            function (v) { return v === true; })));
        };
        /**
         * Indicates whenever the element intersects the view port. An optional margin
         * is used to intersects before the element shows up in the viewport.
         * A value is emitted each time the element intersects.
         *
         * This is private for now, but could be exposed as a public API
         * to introduce additional (css) render effects to the UI.
         */
        /**
         * Indicates whenever the element intersects the view port. An optional margin
         * is used to intersects before the element shows up in the viewport.
         * A value is emitted each time the element intersects.
         *
         * This is private for now, but could be exposed as a public API
         * to introduce additional (css) render effects to the UI.
         * @private
         * @param {?} element
         * @param {?=} options
         * @return {?}
         */
        IntersectionService.prototype.intersects = /**
         * Indicates whenever the element intersects the view port. An optional margin
         * is used to intersects before the element shows up in the viewport.
         * A value is emitted each time the element intersects.
         *
         * This is private for now, but could be exposed as a public API
         * to introduce additional (css) render effects to the UI.
         * @private
         * @param {?} element
         * @param {?=} options
         * @return {?}
         */
        function (element, options) {
            var _this = this;
            /** @type {?} */
            var elementVisible$ = new rxjs.Observable((/**
             * @param {?} observer
             * @return {?}
             */
            function (observer) {
                /** @type {?} */
                var rootMargin = _this.getRootMargin(options);
                /** @type {?} */
                var intersectOptions = { rootMargin: rootMargin };
                /** @type {?} */
                var intersectionObserver = new IntersectionObserver((/**
                 * @param {?} entries
                 * @return {?}
                 */
                function (entries) {
                    observer.next(entries);
                }), intersectOptions);
                intersectionObserver.observe(element);
                return (/**
                 * @return {?}
                 */
                function () {
                    intersectionObserver.disconnect();
                });
            })).pipe(operators.flatMap((/**
             * @param {?} entries
             * @return {?}
             */
            function (entries) { return entries; })), operators.map((/**
             * @param {?} entry
             * @return {?}
             */
            function (entry) { return entry.isIntersecting; })), operators.distinctUntilChanged());
            return elementVisible$;
        };
        /**
         * @private
         * @param {?=} options
         * @return {?}
         */
        IntersectionService.prototype.getRootMargin = /**
         * @private
         * @param {?=} options
         * @return {?}
         */
        function (options) {
            if (options.rootMargin) {
                return options.rootMargin;
            }
            /** @type {?} */
            var layoutConfig = (/** @type {?} */ (this.config));
            if (layoutConfig.deferredLoading &&
                layoutConfig.deferredLoading.intersectionMargin) {
                return layoutConfig.deferredLoading.intersectionMargin;
            }
        };
        IntersectionService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        IntersectionService.ctorParameters = function () { return [
            { type: LayoutConfig }
        ]; };
        /** @nocollapse */ IntersectionService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function IntersectionService_Factory() { return new IntersectionService(core.ɵɵinject(LayoutConfig)); }, token: IntersectionService, providedIn: "root" });
        return IntersectionService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        IntersectionService.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * The defer loading serivce is used to defer loading of DOM elements
     * until the elements are required for the user experience.
     */
    var DeferLoaderService = /** @class */ (function () {
        function DeferLoaderService(platformId, config, intersectionService) {
            this.platformId = platformId;
            this.config = config;
            this.intersectionService = intersectionService;
            this.globalLoadStrategy = config.deferredLoading
                ? config.deferredLoading.strategy
                : core$1.DeferLoadingStrategy.INSTANT;
        }
        /**
         * Defer loading till the element intersects the viewport.
         *
         * We evalutes whether we instantly load the element for different reasons:
         * - we run in SSR mode
         * - there's no global strategy given
         * - the global loading strategy is set to INSTANT loading,
         *   and the loading strategy in the given is not set to DEFER
         * - the loading strategy in the given options is set to INSTANT
         */
        /**
         * Defer loading till the element intersects the viewport.
         *
         * We evalutes whether we instantly load the element for different reasons:
         * - we run in SSR mode
         * - there's no global strategy given
         * - the global loading strategy is set to INSTANT loading,
         *   and the loading strategy in the given is not set to DEFER
         * - the loading strategy in the given options is set to INSTANT
         * @param {?} element
         * @param {?=} options
         * @return {?}
         */
        DeferLoaderService.prototype.load = /**
         * Defer loading till the element intersects the viewport.
         *
         * We evalutes whether we instantly load the element for different reasons:
         * - we run in SSR mode
         * - there's no global strategy given
         * - the global loading strategy is set to INSTANT loading,
         *   and the loading strategy in the given is not set to DEFER
         * - the loading strategy in the given options is set to INSTANT
         * @param {?} element
         * @param {?=} options
         * @return {?}
         */
        function (element, options) {
            if (this.shouldLoadInstantly((options || {}).deferLoading)) {
                return rxjs.of(true);
            }
            else {
                return this.intersectionService.isIntersected(element, options);
            }
        };
        /**
         * @private
         * @param {?} elementLoadingStrategy
         * @return {?}
         */
        DeferLoaderService.prototype.shouldLoadInstantly = /**
         * @private
         * @param {?} elementLoadingStrategy
         * @return {?}
         */
        function (elementLoadingStrategy) {
            return (common.isPlatformServer(this.platformId) ||
                elementLoadingStrategy === core$1.DeferLoadingStrategy.INSTANT ||
                (elementLoadingStrategy !== core$1.DeferLoadingStrategy.DEFER &&
                    this.globalLoadStrategy === core$1.DeferLoadingStrategy.INSTANT));
        };
        DeferLoaderService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        DeferLoaderService.ctorParameters = function () { return [
            { type: Object, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] },
            { type: LayoutConfig },
            { type: IntersectionService }
        ]; };
        /** @nocollapse */ DeferLoaderService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function DeferLoaderService_Factory() { return new DeferLoaderService(core.ɵɵinject(core.PLATFORM_ID), core.ɵɵinject(LayoutConfig), core.ɵɵinject(IntersectionService)); }, token: DeferLoaderService, providedIn: "root" });
        return DeferLoaderService;
    }());
    if (false) {
        /** @type {?} */
        DeferLoaderService.prototype.globalLoadStrategy;
        /**
         * @type {?}
         * @private
         */
        DeferLoaderService.prototype.platformId;
        /**
         * @type {?}
         * @protected
         */
        DeferLoaderService.prototype.config;
        /**
         * @type {?}
         * @protected
         */
        DeferLoaderService.prototype.intersectionService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OutletDirective = /** @class */ (function () {
        function OutletDirective(vcr, templateRef, outletService, deferLoaderService) {
            this.vcr = vcr;
            this.templateRef = templateRef;
            this.outletService = outletService;
            this.deferLoaderService = deferLoaderService;
            this.loaded = new core.EventEmitter(true);
            this.subscription = new rxjs.Subscription();
        }
        /**
         * @private
         * @return {?}
         */
        OutletDirective.prototype.initializeOutlet = /**
         * @private
         * @return {?}
         */
        function () {
            this.vcr.clear();
            this.subscription.unsubscribe();
            this.subscription = new rxjs.Subscription();
            if (this.cxOutletDefer) {
                this.deferLoading();
            }
            else {
                this.render();
            }
        };
        /**
         * @param {?} changes
         * @return {?}
         */
        OutletDirective.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
        function (changes) {
            if (changes.cxOutlet) {
                this.initializeOutlet();
            }
        };
        /**
         * @private
         * @return {?}
         */
        OutletDirective.prototype.deferLoading = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.loaded.emit(false);
            /** @type {?} */
            var hostElement = this.getHostElement(this.vcr.element.nativeElement);
            // Although the deferLoaderService might emit only once, as long as the hostElement
            // isn't being loaded, there's no value being emitted. Therefor we need to clean up
            // the subscription on destroy.
            this.subscription.add(this.deferLoaderService
                .load(hostElement, this.cxOutletDefer)
                .subscribe((/**
             * @return {?}
             */
            function () {
                _this.render();
                _this.loaded.emit(true);
            })));
        };
        /**
         * @private
         * @return {?}
         */
        OutletDirective.prototype.render = /**
         * @private
         * @return {?}
         */
        function () {
            this.renderOutlet(OutletPosition.BEFORE);
            this.renderOutlet(OutletPosition.REPLACE);
            this.renderOutlet(OutletPosition.AFTER);
        };
        /**
         * @private
         * @param {?} position
         * @return {?}
         */
        OutletDirective.prototype.renderOutlet = /**
         * @private
         * @param {?} position
         * @return {?}
         */
        function (position) {
            var _this = this;
            /** @type {?} */
            var templates = (/** @type {?} */ ((this.outletService.get(this.cxOutlet, position, USE_STACKED_OUTLETS))));
            if (!templates && position === OutletPosition.REPLACE) {
                templates = [this.templateRef];
            }
            // Just in case someone extended the `OutletService` and
            // returns a singular object.
            if (!Array.isArray(templates)) {
                templates = [templates];
            }
            templates.forEach((/**
             * @param {?} obj
             * @return {?}
             */
            function (obj) {
                _this.create(obj);
            }));
        };
        /**
         * @private
         * @param {?} tmplOrFactory
         * @return {?}
         */
        OutletDirective.prototype.create = /**
         * @private
         * @param {?} tmplOrFactory
         * @return {?}
         */
        function (tmplOrFactory) {
            if (tmplOrFactory instanceof core.ComponentFactory) {
                this.vcr.createComponent(tmplOrFactory);
            }
            else if (tmplOrFactory instanceof core.TemplateRef) {
                /** @type {?} */
                var view = this.vcr.createEmbeddedView((/** @type {?} */ (tmplOrFactory)), {
                    $implicit: this.cxOutletContext,
                });
                // we do not know if content is created dynamically or not
                // so we apply change detection anyway
                view.markForCheck();
            }
        };
        /**
         * Returns the closest `HtmlElement`, by iterating over the
         * parent elements of the given element.
         *
         * @param element
         */
        /**
         * Returns the closest `HtmlElement`, by iterating over the
         * parent elements of the given element.
         *
         * @private
         * @param {?} element
         * @return {?}
         */
        OutletDirective.prototype.getHostElement = /**
         * Returns the closest `HtmlElement`, by iterating over the
         * parent elements of the given element.
         *
         * @private
         * @param {?} element
         * @return {?}
         */
        function (element) {
            if (element instanceof HTMLElement) {
                return element;
            }
            return this.getHostElement(element.parentElement);
        };
        /**
         * @return {?}
         */
        OutletDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
        };
        OutletDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[cxOutlet]',
                    },] }
        ];
        /** @nocollapse */
        OutletDirective.ctorParameters = function () { return [
            { type: core.ViewContainerRef },
            { type: core.TemplateRef },
            { type: OutletService },
            { type: DeferLoaderService }
        ]; };
        OutletDirective.propDecorators = {
            cxOutlet: [{ type: core.Input }],
            cxOutletContext: [{ type: core.Input }],
            cxOutletDefer: [{ type: core.Input }],
            loaded: [{ type: core.Output }]
        };
        return OutletDirective;
    }());
    if (false) {
        /** @type {?} */
        OutletDirective.prototype.cxOutlet;
        /** @type {?} */
        OutletDirective.prototype.cxOutletContext;
        /**
         * Defers loading options for the the templates of this outlet.
         * @type {?}
         */
        OutletDirective.prototype.cxOutletDefer;
        /** @type {?} */
        OutletDirective.prototype.loaded;
        /** @type {?} */
        OutletDirective.prototype.subscription;
        /**
         * @type {?}
         * @private
         */
        OutletDirective.prototype.vcr;
        /**
         * @type {?}
         * @private
         */
        OutletDirective.prototype.templateRef;
        /**
         * @type {?}
         * @private
         */
        OutletDirective.prototype.outletService;
        /**
         * @type {?}
         * @private
         */
        OutletDirective.prototype.deferLoaderService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OutletModule = /** @class */ (function () {
        function OutletModule() {
        }
        OutletModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [OutletDirective],
                        providers: [OutletService],
                        exports: [OutletDirective],
                    },] }
        ];
        return OutletModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ComponentMapperService = /** @class */ (function () {
        function ComponentMapperService(componentFactoryResolver, config, document, platform) {
            this.componentFactoryResolver = componentFactoryResolver;
            this.config = config;
            this.document = document;
            this.platform = platform;
            this.missingComponents = [];
            this.loadedWebComponents = {};
        }
        /**
         * @desc
         * returns a web component for the CMS typecode.
         *
         * The mapping of CMS components to web componetns requires a mapping.
         * This is configurable when the module is loaded.
         *
         * For example:
         *
         *  {
         *      'CMSLinkComponent': 'LinkComponent',
         *      'SimpleResponsiveBannerComponent': 'SimpleResponsiveBannerComponent',
         *      [etc.]
         *  }
         *
         * The type codes are dynamic since they depend on the implementation.
         * Customer will add, extend or ingore standard components.
         *
         * @param typeCode the component type
         */
        /**
         * @desc
         * returns a web component for the CMS typecode.
         *
         * The mapping of CMS components to web componetns requires a mapping.
         * This is configurable when the module is loaded.
         *
         * For example:
         *
         *  {
         *      'CMSLinkComponent': 'LinkComponent',
         *      'SimpleResponsiveBannerComponent': 'SimpleResponsiveBannerComponent',
         *      [etc.]
         *  }
         *
         * The type codes are dynamic since they depend on the implementation.
         * Customer will add, extend or ingore standard components.
         *
         * @protected
         * @param {?} typeCode the component type
         * @return {?}
         */
        ComponentMapperService.prototype.getComponent = /**
         * @desc
         * returns a web component for the CMS typecode.
         *
         * The mapping of CMS components to web componetns requires a mapping.
         * This is configurable when the module is loaded.
         *
         * For example:
         *
         *  {
         *      'CMSLinkComponent': 'LinkComponent',
         *      'SimpleResponsiveBannerComponent': 'SimpleResponsiveBannerComponent',
         *      [etc.]
         *  }
         *
         * The type codes are dynamic since they depend on the implementation.
         * Customer will add, extend or ingore standard components.
         *
         * @protected
         * @param {?} typeCode the component type
         * @return {?}
         */
        function (typeCode) {
            /** @type {?} */
            var componentConfig = this.config.cmsComponents[typeCode];
            if (!componentConfig) {
                if (!this.missingComponents.includes(typeCode)) {
                    this.missingComponents.push(typeCode);
                    console.warn("No component implementation found for the CMS component type '" + typeCode + "'.\n", "Make sure you implement a component and register it in the mapper.");
                }
            }
            return componentConfig ? componentConfig.component : null;
        };
        /**
         * @param {?} typeCode
         * @return {?}
         */
        ComponentMapperService.prototype.getComponentFactoryByCode = /**
         * @param {?} typeCode
         * @return {?}
         */
        function (typeCode) {
            /** @type {?} */
            var component = this.getComponent(typeCode);
            if (!component) {
                return null;
            }
            /** @type {?} */
            var factory = this.componentFactoryResolver.resolveComponentFactory(component);
            if (!factory) {
                console.warn("No component factory found for the CMS component type '" + typeCode + "'.\n", "Make sure you add a component to the 'entryComponents' array in the NgModule.");
                return null;
            }
            return factory;
        };
        /**
         * @param {?} typeCode
         * @return {?}
         */
        ComponentMapperService.prototype.isWebComponent = /**
         * @param {?} typeCode
         * @return {?}
         */
        function (typeCode) {
            /** @type {?} */
            var component = this.getComponent(typeCode);
            return typeof component === 'string' && (component || '').includes('#');
        };
        /**
         * @param {?} componentType
         * @param {?} renderer
         * @return {?}
         */
        ComponentMapperService.prototype.initWebComponent = /**
         * @param {?} componentType
         * @param {?} renderer
         * @return {?}
         */
        function (componentType, renderer) {
            var _this = this;
            return new Promise((/**
             * @param {?} resolve
             * @return {?}
             */
            function (resolve) {
                var _a = __read(_this.getComponent(componentType).split('#'), 2), path = _a[0], selector = _a[1];
                /** @type {?} */
                var script = _this.loadedWebComponents[path];
                if (!script) {
                    if (path) {
                        script = renderer.createElement('script');
                        _this.loadedWebComponents[path] = script;
                        script.setAttribute('src', path);
                        renderer.appendChild(_this.document.body, script);
                        if (common.isPlatformBrowser(_this.platform)) {
                            script.onload = (/**
                             * @return {?}
                             */
                            function () {
                                script.onload = null;
                            });
                        }
                    }
                    else {
                        script = {};
                    }
                }
                if (script.onload) {
                    // If script is still loading (has onload callback defined)
                    // add new callback and chain it with the existing one.
                    // Needed to support loading multiple components from one script
                    /** @type {?} */
                    var chainedOnload_1 = script.onload;
                    script.onload = (/**
                     * @return {?}
                     */
                    function () {
                        chainedOnload_1();
                        resolve(selector);
                    });
                }
                else {
                    resolve(selector);
                }
            }));
        };
        ComponentMapperService.decorators = [
            { type: core.Injectable, args: [{ providedIn: 'root' },] }
        ];
        /** @nocollapse */
        ComponentMapperService.ctorParameters = function () { return [
            { type: core.ComponentFactoryResolver },
            { type: core$1.CmsConfig },
            { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] },
            { type: undefined, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] }
        ]; };
        /** @nocollapse */ ComponentMapperService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ComponentMapperService_Factory() { return new ComponentMapperService(core.ɵɵinject(core.ComponentFactoryResolver), core.ɵɵinject(core$1.CmsConfig), core.ɵɵinject(common.DOCUMENT), core.ɵɵinject(core.PLATFORM_ID)); }, token: ComponentMapperService, providedIn: "root" });
        return ComponentMapperService;
    }());
    if (false) {
        /** @type {?} */
        ComponentMapperService.prototype.missingComponents;
        /**
         * @type {?}
         * @private
         */
        ComponentMapperService.prototype.loadedWebComponents;
        /**
         * @type {?}
         * @protected
         */
        ComponentMapperService.prototype.componentFactoryResolver;
        /**
         * @type {?}
         * @protected
         */
        ComponentMapperService.prototype.config;
        /**
         * @type {?}
         * @protected
         */
        ComponentMapperService.prototype.document;
        /**
         * @type {?}
         * @protected
         */
        ComponentMapperService.prototype.platform;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CxApiService = /** @class */ (function () {
        function CxApiService(auth, cart, cartData, checkout, checkoutDelivery, checkoutPayment, cms, pageMeta, featureConfig, globalMessage, translation, kyma, occEndpoints, product, productSearch, productReview, productReference, searchbox, routing, currency, language, baseSite, user, userAddress, userConsent, userOrder, userPayment, userNotificationPreferenceService, userInterestsService, selectiveCartService, ngZone) {
            this.auth = auth;
            this.cart = cart;
            this.cartData = cartData;
            this.checkout = checkout;
            this.checkoutDelivery = checkoutDelivery;
            this.checkoutPayment = checkoutPayment;
            this.cms = cms;
            this.pageMeta = pageMeta;
            this.featureConfig = featureConfig;
            this.globalMessage = globalMessage;
            this.translation = translation;
            this.kyma = kyma;
            this.occEndpoints = occEndpoints;
            this.product = product;
            this.productSearch = productSearch;
            this.productReview = productReview;
            this.productReference = productReference;
            this.searchbox = searchbox;
            this.routing = routing;
            this.currency = currency;
            this.language = language;
            this.baseSite = baseSite;
            this.user = user;
            this.userAddress = userAddress;
            this.userConsent = userConsent;
            this.userOrder = userOrder;
            this.userPayment = userPayment;
            this.userNotificationPreferenceService = userNotificationPreferenceService;
            this.userInterestsService = userInterestsService;
            this.selectiveCartService = selectiveCartService;
            this.ngZone = ngZone;
        }
        CxApiService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CxApiService.ctorParameters = function () { return [
            { type: core$1.AuthService, decorators: [{ type: core.Optional }] },
            { type: core$1.CartService, decorators: [{ type: core.Optional }] },
            { type: core$1.CartDataService, decorators: [{ type: core.Optional }] },
            { type: core$1.CheckoutService, decorators: [{ type: core.Optional }] },
            { type: core$1.CheckoutDeliveryService, decorators: [{ type: core.Optional }] },
            { type: core$1.CheckoutPaymentService, decorators: [{ type: core.Optional }] },
            { type: core$1.CmsService, decorators: [{ type: core.Optional }] },
            { type: core$1.PageMetaService, decorators: [{ type: core.Optional }] },
            { type: core$1.FeatureConfigService, decorators: [{ type: core.Optional }] },
            { type: core$1.GlobalMessageService, decorators: [{ type: core.Optional }] },
            { type: core$1.TranslationService, decorators: [{ type: core.Optional }] },
            { type: core$1.KymaService, decorators: [{ type: core.Optional }] },
            { type: core$1.OccEndpointsService, decorators: [{ type: core.Optional }] },
            { type: core$1.ProductService, decorators: [{ type: core.Optional }] },
            { type: core$1.ProductSearchService, decorators: [{ type: core.Optional }] },
            { type: core$1.ProductReviewService, decorators: [{ type: core.Optional }] },
            { type: core$1.ProductReferenceService, decorators: [{ type: core.Optional }] },
            { type: core$1.SearchboxService, decorators: [{ type: core.Optional }] },
            { type: core$1.RoutingService, decorators: [{ type: core.Optional }] },
            { type: core$1.CurrencyService, decorators: [{ type: core.Optional }] },
            { type: core$1.LanguageService, decorators: [{ type: core.Optional }] },
            { type: core$1.BaseSiteService, decorators: [{ type: core.Optional }] },
            { type: core$1.UserService, decorators: [{ type: core.Optional }] },
            { type: core$1.UserAddressService, decorators: [{ type: core.Optional }] },
            { type: core$1.UserConsentService, decorators: [{ type: core.Optional }] },
            { type: core$1.UserOrderService, decorators: [{ type: core.Optional }] },
            { type: core$1.UserPaymentService, decorators: [{ type: core.Optional }] },
            { type: core$1.UserNotificationPreferenceService, decorators: [{ type: core.Optional }] },
            { type: core$1.UserInterestsService, decorators: [{ type: core.Optional }] },
            { type: core$1.SelectiveCartService, decorators: [{ type: core.Optional }] },
            { type: core.NgZone }
        ]; };
        /** @nocollapse */ CxApiService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CxApiService_Factory() { return new CxApiService(core.ɵɵinject(core$1.AuthService, 8), core.ɵɵinject(core$1.CartService, 8), core.ɵɵinject(core$1.CartDataService, 8), core.ɵɵinject(core$1.CheckoutService, 8), core.ɵɵinject(core$1.CheckoutDeliveryService, 8), core.ɵɵinject(core$1.CheckoutPaymentService, 8), core.ɵɵinject(core$1.CmsService, 8), core.ɵɵinject(core$1.PageMetaService, 8), core.ɵɵinject(core$1.FeatureConfigService, 8), core.ɵɵinject(core$1.GlobalMessageService, 8), core.ɵɵinject(core$1.TranslationService, 8), core.ɵɵinject(core$1.KymaService, 8), core.ɵɵinject(core$1.OccEndpointsService, 8), core.ɵɵinject(core$1.ProductService, 8), core.ɵɵinject(core$1.ProductSearchService, 8), core.ɵɵinject(core$1.ProductReviewService, 8), core.ɵɵinject(core$1.ProductReferenceService, 8), core.ɵɵinject(core$1.SearchboxService, 8), core.ɵɵinject(core$1.RoutingService, 8), core.ɵɵinject(core$1.CurrencyService, 8), core.ɵɵinject(core$1.LanguageService, 8), core.ɵɵinject(core$1.BaseSiteService, 8), core.ɵɵinject(core$1.UserService, 8), core.ɵɵinject(core$1.UserAddressService, 8), core.ɵɵinject(core$1.UserConsentService, 8), core.ɵɵinject(core$1.UserOrderService, 8), core.ɵɵinject(core$1.UserPaymentService, 8), core.ɵɵinject(core$1.UserNotificationPreferenceService, 8), core.ɵɵinject(core$1.UserInterestsService, 8), core.ɵɵinject(core$1.SelectiveCartService, 8), core.ɵɵinject(core.NgZone)); }, token: CxApiService, providedIn: "root" });
        return CxApiService;
    }());
    if (false) {
        /** @type {?} */
        CxApiService.prototype.cmsComponentData;
        /** @type {?} */
        CxApiService.prototype.auth;
        /** @type {?} */
        CxApiService.prototype.cart;
        /** @type {?} */
        CxApiService.prototype.cartData;
        /** @type {?} */
        CxApiService.prototype.checkout;
        /** @type {?} */
        CxApiService.prototype.checkoutDelivery;
        /** @type {?} */
        CxApiService.prototype.checkoutPayment;
        /** @type {?} */
        CxApiService.prototype.cms;
        /** @type {?} */
        CxApiService.prototype.pageMeta;
        /** @type {?} */
        CxApiService.prototype.featureConfig;
        /** @type {?} */
        CxApiService.prototype.globalMessage;
        /** @type {?} */
        CxApiService.prototype.translation;
        /** @type {?} */
        CxApiService.prototype.kyma;
        /** @type {?} */
        CxApiService.prototype.occEndpoints;
        /** @type {?} */
        CxApiService.prototype.product;
        /** @type {?} */
        CxApiService.prototype.productSearch;
        /** @type {?} */
        CxApiService.prototype.productReview;
        /** @type {?} */
        CxApiService.prototype.productReference;
        /** @type {?} */
        CxApiService.prototype.searchbox;
        /** @type {?} */
        CxApiService.prototype.routing;
        /** @type {?} */
        CxApiService.prototype.currency;
        /** @type {?} */
        CxApiService.prototype.language;
        /** @type {?} */
        CxApiService.prototype.baseSite;
        /** @type {?} */
        CxApiService.prototype.user;
        /** @type {?} */
        CxApiService.prototype.userAddress;
        /** @type {?} */
        CxApiService.prototype.userConsent;
        /** @type {?} */
        CxApiService.prototype.userOrder;
        /** @type {?} */
        CxApiService.prototype.userPayment;
        /** @type {?} */
        CxApiService.prototype.userNotificationPreferenceService;
        /** @type {?} */
        CxApiService.prototype.userInterestsService;
        /** @type {?} */
        CxApiService.prototype.selectiveCartService;
        /** @type {?} */
        CxApiService.prototype.ngZone;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ComponentWrapperDirective = /** @class */ (function () {
        function ComponentWrapperDirective(vcr, componentMapper, injector, cmsService, dynamicAttributeService, renderer, config, platformId) {
            this.vcr = vcr;
            this.componentMapper = componentMapper;
            this.injector = injector;
            this.cmsService = cmsService;
            this.dynamicAttributeService = dynamicAttributeService;
            this.renderer = renderer;
            this.config = config;
            this.platformId = platformId;
        }
        /**
         * @return {?}
         */
        ComponentWrapperDirective.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            if (!this.shouldRenderComponent()) {
                return;
            }
            if (this.componentMapper.isWebComponent(this.cxComponentWrapper.flexType)) {
                this.launchWebComponent();
            }
            else {
                this.launchComponent();
            }
        };
        /**
         * @private
         * @return {?}
         */
        ComponentWrapperDirective.prototype.shouldRenderComponent = /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var isSSR = common.isPlatformServer(this.platformId);
            /** @type {?} */
            var isComponentDisabledInSSR = (this.config.cmsComponents[this.cxComponentWrapper.flexType] || {}).disableSSR;
            return !(isSSR && isComponentDisabledInSSR);
        };
        /**
         * @private
         * @return {?}
         */
        ComponentWrapperDirective.prototype.launchComponent = /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var factory = this.componentMapper.getComponentFactoryByCode(this.cxComponentWrapper.flexType);
            if (factory) {
                this.cmpRef = this.vcr.createComponent(factory, undefined, this.getInjectorForComponent());
                if (this.cmsService.isLaunchInSmartEdit()) {
                    this.addSmartEditContract(this.cmpRef.location.nativeElement);
                }
            }
        };
        /**
         * @private
         * @return {?}
         */
        ComponentWrapperDirective.prototype.launchWebComponent = /**
         * @private
         * @return {?}
         */
        function () {
            return __awaiter(this, void 0, void 0, function () {
                var elementName, cmsComponentData;
                return __generator(this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, this.componentMapper.initWebComponent(this.cxComponentWrapper.flexType, this.renderer)];
                        case 1:
                            elementName = _a.sent();
                            if (elementName) {
                                this.webElement = this.renderer.createElement(elementName);
                                cmsComponentData = this.getCmsDataForComponent();
                                this.webElement.cxApi = __assign({}, this.injector.get(CxApiService), { CmsComponentData: cmsComponentData, // TODO: remove / deprecated since 1.0.x
                                    cmsComponentData: cmsComponentData });
                                this.renderer.appendChild(this.vcr.element.nativeElement.parentElement, this.webElement);
                                if (this.cmsService.isLaunchInSmartEdit()) {
                                    this.addSmartEditContract(this.webElement);
                                }
                            }
                            return [2 /*return*/];
                    }
                });
            });
        };
        /**
         * @private
         * @template T
         * @return {?}
         */
        ComponentWrapperDirective.prototype.getCmsDataForComponent = /**
         * @private
         * @template T
         * @return {?}
         */
        function () {
            return {
                uid: this.cxComponentWrapper.uid,
                data$: this.cmsService.getComponentData(this.cxComponentWrapper.uid),
            };
        };
        /**
         * @private
         * @return {?}
         */
        ComponentWrapperDirective.prototype.getInjectorForComponent = /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var configProviders = (this.config.cmsComponents[this.cxComponentWrapper.flexType] || {})
                .providers || [];
            return core.Injector.create({
                providers: __spread([
                    {
                        provide: CmsComponentData,
                        useValue: this.getCmsDataForComponent(),
                    }
                ], configProviders),
                parent: this.injector,
            });
        };
        /**
         * @private
         * @param {?} element
         * @return {?}
         */
        ComponentWrapperDirective.prototype.addSmartEditContract = /**
         * @private
         * @param {?} element
         * @return {?}
         */
        function (element) {
            this.dynamicAttributeService.addDynamicAttributes(this.cxComponentWrapper.properties, element, this.renderer);
        };
        /**
         * @return {?}
         */
        ComponentWrapperDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.cmpRef) {
                this.cmpRef.destroy();
            }
            if (this.webElement) {
                this.webElement.remove();
            }
        };
        ComponentWrapperDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[cxComponentWrapper]',
                    },] }
        ];
        /** @nocollapse */
        ComponentWrapperDirective.ctorParameters = function () { return [
            { type: core.ViewContainerRef },
            { type: ComponentMapperService },
            { type: core.Injector },
            { type: core$1.CmsService },
            { type: core$1.DynamicAttributeService },
            { type: core.Renderer2 },
            { type: core$1.CmsConfig },
            { type: Object, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] }
        ]; };
        ComponentWrapperDirective.propDecorators = {
            cxComponentWrapper: [{ type: core.Input }]
        };
        return ComponentWrapperDirective;
    }());
    if (false) {
        /** @type {?} */
        ComponentWrapperDirective.prototype.cxComponentWrapper;
        /** @type {?} */
        ComponentWrapperDirective.prototype.cmpRef;
        /** @type {?} */
        ComponentWrapperDirective.prototype.webElement;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.vcr;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.componentMapper;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.injector;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.cmsService;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.dynamicAttributeService;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.renderer;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.config;
        /**
         * @type {?}
         * @private
         */
        ComponentWrapperDirective.prototype.platformId;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PageComponentModule = /** @class */ (function () {
        function PageComponentModule() {
        }
        PageComponentModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        providers: [],
                        declarations: [ComponentWrapperDirective],
                        exports: [ComponentWrapperDirective],
                    },] }
        ];
        return PageComponentModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PageSlotComponent = /** @class */ (function () {
        function PageSlotComponent(cmsService, dynamicAttributeService, renderer, hostElement, config) {
            var _this = this;
            this.cmsService = cmsService;
            this.dynamicAttributeService = dynamicAttributeService;
            this.renderer = renderer;
            this.hostElement = hostElement;
            this.config = config;
            this.isPending = true;
            this.hasComponents = false;
            this.isPageFold = false;
            this.position$ = new rxjs.BehaviorSubject(undefined);
            /**
             * observable with `ContentSlotData` for the current position
             *
             * @deprecated we'll stop supporting this property in 2.0 as
             * it is not used separately.
             */
            this.slot$ = this.position$.pipe(operators.switchMap((/**
             * @param {?} position
             * @return {?}
             */
            function (position) { return _this.cmsService.getContentSlot(position); })), operators.tap((/**
             * @param {?} slot
             * @return {?}
             */
            function (slot) { return _this.addSmartEditSlotClass(slot); })));
            this.components$ = this.slot$.pipe(operators.map((/**
             * @param {?} slot
             * @return {?}
             */
            function (slot) { return (slot && slot.components ? slot.components : []); })), operators.distinctUntilChanged((/**
             * @param {?} a
             * @param {?} b
             * @return {?}
             */
            function (a, b) {
                return a.length === b.length && !a.find((/**
                 * @param {?} el
                 * @param {?} index
                 * @return {?}
                 */
                function (el, index) { return el.uid !== b[index].uid; }));
            })));
            this.subscription = new rxjs.Subscription();
        }
        Object.defineProperty(PageSlotComponent.prototype, "position", {
            get: /**
             * @return {?}
             */
            function () {
                return this.position$.value;
            },
            /**
             * The position is used to find the CMS page slot (and optional outlet)
             * that is rendered in the PageSlotComponent. Furthermore, the position
             * is added as a CSS class name to the host element.
             */
            set: /**
             * The position is used to find the CMS page slot (and optional outlet)
             * that is rendered in the PageSlotComponent. Furthermore, the position
             * is added as a CSS class name to the host element.
             * @param {?} position
             * @return {?}
             */
            function (position) {
                this.position$.next(position);
                this.renderer.addClass(this.hostElement.nativeElement, position);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        PageSlotComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscription.add(this.components$.subscribe((/**
             * @param {?} components
             * @return {?}
             */
            function (components) {
                _this.hasComponents = components && components.length > 0;
                _this.pendingComponentCount = components ? components.length : 0;
                _this.isPending = _this.pendingComponentCount > 0;
            })));
        };
        /**
         * @return {?}
         */
        PageSlotComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
        };
        /**
         * Is triggered when a component is added to the view.
         * We use this information to dropthe `is-pending` class from the page slot
         * when all nested components have been added.
         */
        /**
         * Is triggered when a component is added to the view.
         * We use this information to dropthe `is-pending` class from the page slot
         * when all nested components have been added.
         * @param {?} loadState
         * @return {?}
         */
        PageSlotComponent.prototype.isLoaded = /**
         * Is triggered when a component is added to the view.
         * We use this information to dropthe `is-pending` class from the page slot
         * when all nested components have been added.
         * @param {?} loadState
         * @return {?}
         */
        function (loadState) {
            if (loadState) {
                this.pendingComponentCount--;
            }
            this.isPending = this.pendingComponentCount > 0;
        };
        /**
         * @param {?} componentType
         * @return {?}
         */
        PageSlotComponent.prototype.getComponentDeferOptions = /**
         * @param {?} componentType
         * @return {?}
         */
        function (componentType) {
            /** @type {?} */
            var deferLoading = this.getDeferLoadingStrategy(componentType);
            return { deferLoading: deferLoading };
        };
        /**
         * The `DeferLoadingStrategy` indicates whether component rendering
         * should be deferred.
         */
        /**
         * The `DeferLoadingStrategy` indicates whether component rendering
         * should be deferred.
         * @private
         * @param {?} componentType
         * @return {?}
         */
        PageSlotComponent.prototype.getDeferLoadingStrategy = /**
         * The `DeferLoadingStrategy` indicates whether component rendering
         * should be deferred.
         * @private
         * @param {?} componentType
         * @return {?}
         */
        function (componentType) {
            if (this.config) {
                return (((/** @type {?} */ (this.config))).cmsComponents[componentType] || {})
                    .deferLoading;
            }
        };
        /**
         * @private
         * @param {?} slot
         * @return {?}
         */
        PageSlotComponent.prototype.addSmartEditSlotClass = /**
         * @private
         * @param {?} slot
         * @return {?}
         */
        function (slot) {
            if (slot && this.cmsService.isLaunchInSmartEdit()) {
                this.addSmartEditContract(slot);
            }
        };
        /**
         * @private
         * @param {?} slot
         * @return {?}
         */
        PageSlotComponent.prototype.addSmartEditContract = /**
         * @private
         * @param {?} slot
         * @return {?}
         */
        function (slot) {
            this.dynamicAttributeService.addDynamicAttributes(slot.properties, this.hostElement.nativeElement, this.renderer);
        };
        PageSlotComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-page-slot,[cx-page-slot]',
                        template: "<ng-template\n  [cxOutlet]=\"position\"\n  [cxOutletContext]=\"{ components$: components$ }\"\n  [cxSkipLink]=\"position\"\n>\n  <ng-template\n    *ngFor=\"let component of components$ | async\"\n    [cxOutlet]=\"component.flexType\"\n    [cxOutletContext]=\"{ component: component }\"\n    [cxOutletDefer]=\"getComponentDeferOptions(component.flexType)\"\n    (loaded)=\"isLoaded($event)\"\n  >\n    <ng-container [cxComponentWrapper]=\"component\"></ng-container>\n  </ng-template>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        PageSlotComponent.ctorParameters = function () { return [
            { type: core$1.CmsService },
            { type: core$1.DynamicAttributeService },
            { type: core.Renderer2 },
            { type: core.ElementRef },
            { type: core$1.CmsConfig }
        ]; };
        PageSlotComponent.propDecorators = {
            position: [{ type: core.Input }],
            isPending: [{ type: core.HostBinding, args: ['class.cx-pending',] }],
            hasComponents: [{ type: core.HostBinding, args: ['class.has-components',] }],
            isPageFold: [{ type: core.HostBinding, args: ['class.page-fold',] }, { type: core.Input }]
        };
        return PageSlotComponent;
    }());
    if (false) {
        /** @type {?} */
        PageSlotComponent.prototype.isPending;
        /** @type {?} */
        PageSlotComponent.prototype.hasComponents;
        /** @type {?} */
        PageSlotComponent.prototype.isPageFold;
        /**
         * @type {?}
         * @private
         */
        PageSlotComponent.prototype.pendingComponentCount;
        /** @type {?} */
        PageSlotComponent.prototype.position$;
        /**
         * observable with `ContentSlotData` for the current position
         *
         * @deprecated we'll stop supporting this property in 2.0 as
         * it is not used separately.
         * @type {?}
         */
        PageSlotComponent.prototype.slot$;
        /** @type {?} */
        PageSlotComponent.prototype.components$;
        /**
         * @type {?}
         * @private
         */
        PageSlotComponent.prototype.subscription;
        /**
         * @type {?}
         * @protected
         */
        PageSlotComponent.prototype.cmsService;
        /**
         * @type {?}
         * @protected
         */
        PageSlotComponent.prototype.dynamicAttributeService;
        /**
         * @type {?}
         * @protected
         */
        PageSlotComponent.prototype.renderer;
        /**
         * @type {?}
         * @protected
         */
        PageSlotComponent.prototype.hostElement;
        /**
         * @type {?}
         * @protected
         */
        PageSlotComponent.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var   /**
     * @abstract
     */
    SkipLinkConfig = /** @class */ (function () {
        function SkipLinkConfig() {
        }
        return SkipLinkConfig;
    }());
    if (false) {
        /** @type {?} */
        SkipLinkConfig.prototype.skipLinks;
    }
    /**
     * @abstract
     */
    var /**
     * @abstract
     */
    SkipLink = /** @class */ (function () {
        function SkipLink() {
        }
        return SkipLink;
    }());
    if (false) {
        /** @type {?} */
        SkipLink.prototype.key;
        /** @type {?} */
        SkipLink.prototype.i18nKey;
        /** @type {?} */
        SkipLink.prototype.target;
        /** @type {?} */
        SkipLink.prototype.position;
    }
    /** @enum {string} */
    var SkipLinkScrollPosition = {
        BEFORE: 'BEFORE',
        AFTER: 'AFTER',
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SkipLinkService = /** @class */ (function () {
        function SkipLinkService(config) {
            this.config = config;
            this.skipLinks$ = new rxjs.BehaviorSubject([]);
        }
        /**
         * @return {?}
         */
        SkipLinkService.prototype.getSkipLinks = /**
         * @return {?}
         */
        function () {
            return this.skipLinks$;
        };
        /**
         * @param {?} key
         * @param {?} target
         * @return {?}
         */
        SkipLinkService.prototype.add = /**
         * @param {?} key
         * @param {?} target
         * @return {?}
         */
        function (key, target) {
            /** @type {?} */
            var found = this.config.skipLinks.find((/**
             * @param {?} skipLink
             * @return {?}
             */
            function (skipLink) { return skipLink.key === key; }));
            if (found) {
                /** @type {?} */
                var existing = this.skipLinks$.value;
                existing.splice(this.getSkipLinkIndexInArray(key), 0, {
                    target: target,
                    i18nKey: found.i18nKey,
                    position: found.position,
                    key: key,
                });
                this.skipLinks$.next(existing);
            }
        };
        /**
         * @param {?} key
         * @return {?}
         */
        SkipLinkService.prototype.remove = /**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var found = this.config.skipLinks.find((/**
             * @param {?} skipLink
             * @return {?}
             */
            function (skipLink) { return skipLink.key === key; }));
            if (found) {
                /** @type {?} */
                var existing = this.skipLinks$.value;
                existing = existing.filter((/**
                 * @param {?} skipLink
                 * @return {?}
                 */
                function (skipLink) { return skipLink.key !== key; }));
                this.skipLinks$.next(existing);
            }
        };
        /**
         * @param {?} target
         * @param {?} position
         * @param {?} event
         * @return {?}
         */
        SkipLinkService.prototype.scrollToTarget = /**
         * @param {?} target
         * @param {?} position
         * @param {?} event
         * @return {?}
         */
        function (target, position, event) {
            target = (/** @type {?} */ (target.parentNode));
            ((/** @type {?} */ (event.target))).blur();
            /** @type {?} */
            var options = position === SkipLinkScrollPosition.AFTER ? { inline: 'end' } : {};
            target.scrollIntoView(options);
        };
        /**
         * @protected
         * @param {?} key
         * @return {?}
         */
        SkipLinkService.prototype.getSkipLinkIndexInArray = /**
         * @protected
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var index = this.config.skipLinks.findIndex((/**
             * @param {?} skipLink
             * @return {?}
             */
            function (skipLink) { return skipLink.key === key; }));
            var _loop_1 = function () {
                index--;
                /** @type {?} */
                var previous = this_1.config.skipLinks[index];
                if (previous) {
                    /** @type {?} */
                    var existing = this_1.skipLinks$.value;
                    /** @type {?} */
                    var found = existing.findIndex((/**
                     * @param {?} skipLink
                     * @return {?}
                     */
                    function (skipLink) { return skipLink.key === previous.key; }));
                    if (found > -1) {
                        return { value: found + 1 };
                    }
                }
            };
            var this_1 = this;
            while (index > 0) {
                var state_1 = _loop_1();
                if (typeof state_1 === "object")
                    return state_1.value;
            }
            return 0;
        };
        SkipLinkService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        SkipLinkService.ctorParameters = function () { return [
            { type: SkipLinkConfig }
        ]; };
        /** @nocollapse */ SkipLinkService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function SkipLinkService_Factory() { return new SkipLinkService(core.ɵɵinject(SkipLinkConfig)); }, token: SkipLinkService, providedIn: "root" });
        return SkipLinkService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        SkipLinkService.prototype.skipLinks$;
        /**
         * @type {?}
         * @protected
         */
        SkipLinkService.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SkipLinkComponent = /** @class */ (function () {
        function SkipLinkComponent(skipLinkService) {
            this.skipLinkService = skipLinkService;
            this.skipLinks$ = this.skipLinkService
                .getSkipLinks()
                .pipe(operators.observeOn(rxjs.asyncScheduler)); // delay view's update to avoid ExpressionChangedAfterItHasBeenCheckedError
        }
        /**
         * @param {?} skipLink
         * @param {?} event
         * @return {?}
         */
        SkipLinkComponent.prototype.scrollToTarget = /**
         * @param {?} skipLink
         * @param {?} event
         * @return {?}
         */
        function (skipLink, event) {
            this.skipLinkService.scrollToTarget(skipLink.target, skipLink.position, event);
        };
        /**
         * Hides the skip link by removing the focus.
         */
        /**
         * Hides the skip link by removing the focus.
         * @param {?} event
         * @return {?}
         */
        SkipLinkComponent.prototype.blur = /**
         * Hides the skip link by removing the focus.
         * @param {?} event
         * @return {?}
         */
        function (event) {
            ((/** @type {?} */ (event.target))).blur();
        };
        /**
         * @param {?} event
         * @return {?}
         */
        SkipLinkComponent.prototype.tabNext = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (this.isElement(((/** @type {?} */ (event.target))).nextSibling)) {
                ((/** @type {?} */ (((/** @type {?} */ (event.target))).nextSibling))).focus();
            }
        };
        /**
         * @param {?} event
         * @return {?}
         */
        SkipLinkComponent.prototype.tabPrev = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (this.isElement(((/** @type {?} */ (event.target))).previousSibling)) {
                ((/** @type {?} */ (((/** @type {?} */ (event.target))).previousSibling))).focus();
            }
        };
        /**
         * @private
         * @param {?} element
         * @return {?}
         */
        SkipLinkComponent.prototype.isElement = /**
         * @private
         * @param {?} element
         * @return {?}
         */
        function (element) {
            return !!element && element instanceof HTMLElement;
        };
        SkipLinkComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-skip-link',
                        template: "<button\n  *ngFor=\"let skipLink of skipLinks$ | async\"\n  (click)=\"scrollToTarget(skipLink, $event)\"\n  (keydown.esc)=\"blur($event)\"\n  (keydown.arrowright)=\"tabNext($event)\"\n  (keydown.arrowleft)=\"tabPrev($event)\"\n>\n  {{ 'skipLink.skipTo' | cxTranslate }}\n  {{ skipLink.i18nKey | cxTranslate }}\n</button>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        SkipLinkComponent.ctorParameters = function () { return [
            { type: SkipLinkService }
        ]; };
        return SkipLinkComponent;
    }());
    if (false) {
        /** @type {?} */
        SkipLinkComponent.prototype.skipLinks$;
        /**
         * @type {?}
         * @private
         */
        SkipLinkComponent.prototype.skipLinkService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaultSkipLinkConfig = {
        skipLinks: [
            {
                key: 'SiteContext',
                i18nKey: 'skipLink.labels.header',
            },
            {
                key: 'BottomHeaderSlot',
                position: SkipLinkScrollPosition.AFTER,
                i18nKey: 'skipLink.labels.main',
            },
            {
                key: 'ProductLeftRefinements',
                i18nKey: 'skipLink.labels.productFacets',
            },
            { key: 'ProductListSlot', i18nKey: 'skipLink.labels.productList' },
            { key: 'Footer', i18nKey: 'skipLink.labels.footer' },
        ],
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SkipLinkDirective = /** @class */ (function () {
        function SkipLinkDirective(elRef, skipLinkService) {
            this.elRef = elRef;
            this.skipLinkService = skipLinkService;
        }
        /**
         * @return {?}
         */
        SkipLinkDirective.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.skipLinkService.add(this.cxSkipLink, this.elRef.nativeElement);
        };
        /**
         * @return {?}
         */
        SkipLinkDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.skipLinkService.remove(this.cxSkipLink);
        };
        SkipLinkDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[cxSkipLink]',
                    },] }
        ];
        /** @nocollapse */
        SkipLinkDirective.ctorParameters = function () { return [
            { type: core.ElementRef },
            { type: SkipLinkService }
        ]; };
        SkipLinkDirective.propDecorators = {
            cxSkipLink: [{ type: core.Input }]
        };
        return SkipLinkDirective;
    }());
    if (false) {
        /** @type {?} */
        SkipLinkDirective.prototype.cxSkipLink;
        /**
         * @type {?}
         * @private
         */
        SkipLinkDirective.prototype.elRef;
        /**
         * @type {?}
         * @private
         */
        SkipLinkDirective.prototype.skipLinkService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SkipLinkModule = /** @class */ (function () {
        function SkipLinkModule() {
        }
        SkipLinkModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig(defaultSkipLinkConfig),
                        ],
                        declarations: [SkipLinkComponent, SkipLinkDirective],
                        exports: [SkipLinkDirective],
                        entryComponents: [SkipLinkComponent],
                        providers: [
                            { provide: SkipLinkConfig, useExisting: core$1.Config },
                            {
                                provide: core.APP_INITIALIZER,
                                useFactory: skipLinkFactory,
                                deps: [core.ComponentFactoryResolver, OutletService],
                                multi: true,
                            },
                        ],
                    },] }
        ];
        return SkipLinkModule;
    }());
    /**
     * Adds the skip link component before the cx-storefront.
     * @param {?} componentFactoryResolver
     * @param {?} outletService
     * @return {?}
     */
    function skipLinkFactory(componentFactoryResolver, outletService) {
        /** @type {?} */
        var isReady = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var factory = componentFactoryResolver.resolveComponentFactory(SkipLinkComponent);
            outletService.add('cx-storefront', (/** @type {?} */ (factory)), OutletPosition.BEFORE);
        });
        return isReady;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PageSlotModule = /** @class */ (function () {
        function PageSlotModule() {
        }
        PageSlotModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, OutletModule, PageComponentModule, SkipLinkModule],
                        providers: [],
                        declarations: [PageSlotComponent],
                        exports: [PageSlotComponent],
                    },] }
        ];
        return PageSlotModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PageLayoutModule = /** @class */ (function () {
        function PageLayoutModule() {
        }
        PageLayoutModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, OutletModule, PageSlotModule],
                        declarations: [PageLayoutComponent],
                        providers: [PageLayoutService],
                        exports: [PageLayoutComponent],
                    },] }
        ];
        return PageLayoutModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var   /**
     * @abstract
     */
    PWAModuleConfig = /** @class */ (function () {
        function PWAModuleConfig() {
        }
        return PWAModuleConfig;
    }());
    if (false) {
        /** @type {?} */
        PWAModuleConfig.prototype.pwa;
    }
    /** @type {?} */
    var defaultPWAModuleConfig = {
        pwa: {
            enabled: false,
            addToHomeScreen: false,
        },
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddToHomeScreenService = /** @class */ (function () {
        function AddToHomeScreenService(config, globalMessageService, winRef) {
            this.config = config;
            this.globalMessageService = globalMessageService;
            this.winRef = winRef;
            this.canPrompt = new rxjs.BehaviorSubject(false);
            this.canPrompt$ = this.canPrompt.asObservable();
            if (this.config.pwa.addToHomeScreen) {
                this.init();
            }
        }
        /**
         * @return {?}
         */
        AddToHomeScreenService.prototype.init = /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (this.winRef.nativeWindow) {
                this.winRef.nativeWindow.addEventListener('beforeinstallprompt', (/**
                 * @param {?} event
                 * @return {?}
                 */
                function (event) {
                    event.preventDefault();
                    _this.deferredEvent = event;
                    _this.enableAddToHomeScreen();
                }));
                this.winRef.nativeWindow.addEventListener('appinstalled', (/**
                 * @return {?}
                 */
                function () {
                    _this.globalMessageService.add({ key: 'pwa.addedToHomeScreen' }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
                    _this.disableAddToHomeScreen();
                    _this.deferredEvent = null;
                }));
            }
        };
        /**
         * @return {?}
         */
        AddToHomeScreenService.prototype.enableAddToHomeScreen = /**
         * @return {?}
         */
        function () {
            this.canPrompt.next(true);
        };
        /**
         * @return {?}
         */
        AddToHomeScreenService.prototype.disableAddToHomeScreen = /**
         * @return {?}
         */
        function () {
            this.canPrompt.next(false);
        };
        /**
         * @return {?}
         */
        AddToHomeScreenService.prototype.firePrompt = /**
         * @return {?}
         */
        function () {
            if (this.deferredEvent) {
                this.deferredEvent.prompt();
            }
        };
        AddToHomeScreenService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        AddToHomeScreenService.ctorParameters = function () { return [
            { type: PWAModuleConfig },
            { type: core$1.GlobalMessageService },
            { type: core$1.WindowRef }
        ]; };
        return AddToHomeScreenService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        AddToHomeScreenService.prototype.deferredEvent;
        /**
         * @type {?}
         * @private
         */
        AddToHomeScreenService.prototype.canPrompt;
        /** @type {?} */
        AddToHomeScreenService.prototype.canPrompt$;
        /**
         * @type {?}
         * @private
         */
        AddToHomeScreenService.prototype.config;
        /**
         * @type {?}
         * @private
         */
        AddToHomeScreenService.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        AddToHomeScreenService.prototype.winRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @abstract
     */
    var   /**
     * @abstract
     */
    AddToHomeScreenComponent = /** @class */ (function () {
        function AddToHomeScreenComponent(addToHomeScreenService) {
            this.addToHomeScreenService = addToHomeScreenService;
        }
        /**
         * @return {?}
         */
        AddToHomeScreenComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.canPrompt$ = this.addToHomeScreenService.canPrompt$;
        };
        /**
         * @return {?}
         */
        AddToHomeScreenComponent.prototype.prompt = /**
         * @return {?}
         */
        function () {
            this.addToHomeScreenService.firePrompt();
        };
        return AddToHomeScreenComponent;
    }());
    if (false) {
        /** @type {?} */
        AddToHomeScreenComponent.prototype.canPrompt$;
        /**
         * @type {?}
         * @protected
         */
        AddToHomeScreenComponent.prototype.addToHomeScreenService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddToHomeScreenBannerComponent = /** @class */ (function (_super) {
        __extends(AddToHomeScreenBannerComponent, _super);
        function AddToHomeScreenBannerComponent(addToHomeScreenService) {
            var _this = _super.call(this, addToHomeScreenService) || this;
            _this.addToHomeScreenService = addToHomeScreenService;
            return _this;
        }
        AddToHomeScreenBannerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-add-to-home-screen-banner',
                        template: "<div *ngIf=\"canPrompt$ | async\">\n  <div class=\"cx-add-to-home-screen-banner\">\n    <div class=\"cx-add-to-home-screen-banner-inner\">\n      <p>\n        {{ 'pwa.addToHomeScreenDescription' | cxTranslate }}\n      </p>\n      <ul>\n        <li>{{ 'pwa.noInstallationNeeded' | cxTranslate }}</li>\n        <li>{{ 'pwa.fastAccessToApplication' | cxTranslate }}</li>\n      </ul>\n      <button (click)=\"prompt()\" class=\"btn btn-primary\">\n        {{ 'pwa.addToHomeScreen' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        AddToHomeScreenBannerComponent.ctorParameters = function () { return [
            { type: AddToHomeScreenService }
        ]; };
        return AddToHomeScreenBannerComponent;
    }(AddToHomeScreenComponent));
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        AddToHomeScreenBannerComponent.prototype.addToHomeScreenService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddToHomeScreenBtnComponent = /** @class */ (function (_super) {
        __extends(AddToHomeScreenBtnComponent, _super);
        function AddToHomeScreenBtnComponent(addToHomeScreenService) {
            var _this = _super.call(this, addToHomeScreenService) || this;
            _this.addToHomeScreenService = addToHomeScreenService;
            return _this;
        }
        AddToHomeScreenBtnComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-add-to-home-screen-btn',
                        template: "<span (click)=\"prompt()\">\n  <ng-content *ngIf=\"canPrompt$ | async\"></ng-content>\n</span>\n"
                    }] }
        ];
        /** @nocollapse */
        AddToHomeScreenBtnComponent.ctorParameters = function () { return [
            { type: AddToHomeScreenService }
        ]; };
        return AddToHomeScreenBtnComponent;
    }(AddToHomeScreenComponent));
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        AddToHomeScreenBtnComponent.prototype.addToHomeScreenService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?} pwaConfig
     * @return {?}
     */
    function pwaConfigurationFactory(pwaConfig) {
        return { enabled: (!core.isDevMode() && pwaConfig.pwa.enabled) || false };
    }
    /**
     * @param {?} addToHomeScreenService
     * @return {?}
     */
    function pwaFactory(addToHomeScreenService) {
        /** @type {?} */
        var result = (/**
         * @return {?}
         */
        function () { return addToHomeScreenService; });
        return result;
    }
    var PwaModule = /** @class */ (function () {
        function PwaModule() {
        }
        PwaModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig(defaultPWAModuleConfig),
                            serviceWorker.ServiceWorkerModule.register('/ngsw-worker.js'),
                            core$1.I18nModule,
                        ],
                        providers: [
                            { provide: PWAModuleConfig, useExisting: core$1.Config },
                            {
                                provide: serviceWorker.SwRegistrationOptions,
                                useFactory: pwaConfigurationFactory,
                                deps: [core$1.Config],
                            },
                            {
                                provide: core.APP_INITIALIZER,
                                useFactory: pwaFactory,
                                deps: [AddToHomeScreenService],
                                multi: true,
                            },
                            AddToHomeScreenService,
                        ],
                        declarations: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],
                        exports: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],
                    },] }
        ];
        return PwaModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var cmsRoute = {
        path: '**',
        canActivate: [CmsPageGuard],
        component: PageLayoutComponent,
    };
    /**
     * @param {?} injector
     * @return {?}
     */
    function addCmsRoute(injector) {
        /** @type {?} */
        var result = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var router$1 = injector.get(router.Router);
            router$1.config.push(cmsRoute);
        });
        return result;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0 = addCmsRoute;
    var CmsRouteModule = /** @class */ (function () {
        function CmsRouteModule() {
        }
        CmsRouteModule.decorators = [
            { type: core.NgModule, args: [{
                        providers: [
                            {
                                provide: core.APP_INITIALIZER,
                                multi: true,
                                deps: [core.Injector],
                                useFactory: ɵ0,
                            },
                        ],
                    },] }
        ];
        return CmsRouteModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SeoMetaService = /** @class */ (function () {
        function SeoMetaService(ngTitle, ngMeta, pageMetaService) {
            this.ngTitle = ngTitle;
            this.ngMeta = ngMeta;
            this.pageMetaService = pageMetaService;
        }
        /**
         * @return {?}
         */
        SeoMetaService.prototype.init = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.pageMetaService
                .getMeta()
                .pipe(operators.filter(Boolean))
                .subscribe((/**
             * @param {?} meta
             * @return {?}
             */
            function (meta) { return (_this.meta = meta); }));
        };
        Object.defineProperty(SeoMetaService.prototype, "meta", {
            set: /**
             * @protected
             * @param {?} meta
             * @return {?}
             */
            function (meta) {
                this.title = meta.title;
                this.description = meta.description;
                this.image = meta.image;
                this.robots = meta.robots || [core$1.PageRobotsMeta.INDEX, core$1.PageRobotsMeta.FOLLOW];
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SeoMetaService.prototype, "title", {
            set: /**
             * @protected
             * @param {?} title
             * @return {?}
             */
            function (title) {
                this.ngTitle.setTitle(title || '');
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SeoMetaService.prototype, "description", {
            set: /**
             * @protected
             * @param {?} value
             * @return {?}
             */
            function (value) {
                this.addTag({ name: 'description', content: value });
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SeoMetaService.prototype, "image", {
            set: /**
             * @protected
             * @param {?} imageUrl
             * @return {?}
             */
            function (imageUrl) {
                if (imageUrl) {
                    this.addTag({ name: 'og:image', content: imageUrl });
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SeoMetaService.prototype, "robots", {
            set: /**
             * @protected
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (value) {
                    this.addTag({ name: 'robots', content: value.join(', ') });
                }
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @protected
         * @param {?} meta
         * @return {?}
         */
        SeoMetaService.prototype.addTag = /**
         * @protected
         * @param {?} meta
         * @return {?}
         */
        function (meta) {
            if (meta.content) {
                this.ngMeta.updateTag(meta);
            }
        };
        SeoMetaService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        SeoMetaService.ctorParameters = function () { return [
            { type: platformBrowser.Title },
            { type: platformBrowser.Meta },
            { type: core$1.PageMetaService }
        ]; };
        /** @nocollapse */ SeoMetaService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function SeoMetaService_Factory() { return new SeoMetaService(core.ɵɵinject(platformBrowser.Title), core.ɵɵinject(platformBrowser.Meta), core.ɵɵinject(core$1.PageMetaService)); }, token: SeoMetaService, providedIn: "root" });
        return SeoMetaService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        SeoMetaService.prototype.ngTitle;
        /**
         * @type {?}
         * @protected
         */
        SeoMetaService.prototype.ngMeta;
        /**
         * @type {?}
         * @protected
         */
        SeoMetaService.prototype.pageMetaService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var htmlLangProvider = {
        provide: core.APP_INITIALIZER,
        multi: true,
        useFactory: setHtmlLangAttribute,
        deps: [core$1.WindowRef, core$1.LanguageService],
    };
    /**
     * Sets active language in <html lang="">
     * @param {?} winRef
     * @param {?} languageService
     * @return {?}
     */
    function setHtmlLangAttribute(winRef, languageService) {
        /** @type {?} */
        var result = (/**
         * @return {?}
         */
        function () {
            languageService.getActive().subscribe((/**
             * @param {?} lang
             * @return {?}
             */
            function (lang) {
                winRef.document.documentElement.lang = lang;
            }));
        });
        return result;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var JsonLdScriptFactory = /** @class */ (function () {
        function JsonLdScriptFactory(platformId, winRef, rendererFactory, sanitizer) {
            this.platformId = platformId;
            this.winRef = winRef;
            this.rendererFactory = rendererFactory;
            this.sanitizer = sanitizer;
        }
        /**
         * @param {?} schema
         * @return {?}
         */
        JsonLdScriptFactory.prototype.build = /**
         * @param {?} schema
         * @return {?}
         */
        function (schema) {
            if (schema && this.isJsonLdRequired()) {
                this.createJsonLdScriptElement().innerHTML = this.sanitize(schema);
            }
        };
        /**
         * Only return schema data in case of SSR or development mode,
         * to not waste memory unnecessary.
         */
        /**
         * Only return schema data in case of SSR or development mode,
         * to not waste memory unnecessary.
         * @return {?}
         */
        JsonLdScriptFactory.prototype.isJsonLdRequired = /**
         * Only return schema data in case of SSR or development mode,
         * to not waste memory unnecessary.
         * @return {?}
         */
        function () {
            return !common.isPlatformBrowser(this.platformId) || core.isDevMode();
        };
        /**
         * @private
         * @return {?}
         */
        JsonLdScriptFactory.prototype.createJsonLdScriptElement = /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var id = 'json-ld';
            /** @type {?} */
            var scriptElement = (/** @type {?} */ ((this.winRef.document.getElementById(id))));
            if (!scriptElement) {
                /** @type {?} */
                var renderer = this.rendererFactory.createRenderer(null, null);
                /** @type {?} */
                var script = renderer.createElement('script');
                script.id = id;
                script.type = 'application/ld+json';
                renderer.appendChild(this.winRef.document.body, script);
                scriptElement = script;
            }
            return scriptElement;
        };
        /**
         * Sanitizes the given json-ld schema by leveraging the angular HTML sanitizer.
         *
         * The given schema is not trusted, as malicious code could be injected (XSS)
         * into the json-ld script.
         */
        /**
         * Sanitizes the given json-ld schema by leveraging the angular HTML sanitizer.
         *
         * The given schema is not trusted, as malicious code could be injected (XSS)
         * into the json-ld script.
         * @param {?} schema
         * @return {?}
         */
        JsonLdScriptFactory.prototype.sanitize = /**
         * Sanitizes the given json-ld schema by leveraging the angular HTML sanitizer.
         *
         * The given schema is not trusted, as malicious code could be injected (XSS)
         * into the json-ld script.
         * @param {?} schema
         * @return {?}
         */
        function (schema) {
            var _this = this;
            return JSON.stringify(schema, (/**
             * @param {?} _key
             * @param {?} value
             * @return {?}
             */
            function (_key, value) {
                return typeof value === 'string'
                    ? _this.sanitizer.sanitize(core.SecurityContext.HTML, value)
                    : value;
            }));
        };
        JsonLdScriptFactory.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        JsonLdScriptFactory.ctorParameters = function () { return [
            { type: String, decorators: [{ type: core.Inject, args: [core.PLATFORM_ID,] }] },
            { type: core$1.WindowRef },
            { type: core.RendererFactory2 },
            { type: platformBrowser.DomSanitizer }
        ]; };
        /** @nocollapse */ JsonLdScriptFactory.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function JsonLdScriptFactory_Factory() { return new JsonLdScriptFactory(core.ɵɵinject(core.PLATFORM_ID), core.ɵɵinject(core$1.WindowRef), core.ɵɵinject(core.RendererFactory2), core.ɵɵinject(platformBrowser.DomSanitizer)); }, token: JsonLdScriptFactory, providedIn: "root" });
        return JsonLdScriptFactory;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        JsonLdScriptFactory.prototype.platformId;
        /**
         * @type {?}
         * @protected
         */
        JsonLdScriptFactory.prototype.winRef;
        /**
         * @type {?}
         * @protected
         */
        JsonLdScriptFactory.prototype.rendererFactory;
        /**
         * @type {?}
         * @protected
         */
        JsonLdScriptFactory.prototype.sanitizer;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Low level directive that adds a json-ld script tag to the component.
     * This code bypasses the strict XSS security, as otherwise we're not able
     * to append a script tag with JS inside.
     */
    var JsonLdDirective = /** @class */ (function () {
        function JsonLdDirective(jsonLdScriptFactory, sanitizer) {
            this.jsonLdScriptFactory = jsonLdScriptFactory;
            this.sanitizer = sanitizer;
        }
        Object.defineProperty(JsonLdDirective.prototype, "cxJsonLd", {
            set: /**
             * @param {?} schema
             * @return {?}
             */
            function (schema) {
                this.writeJsonLd(schema);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @private
         * @param {?} schema
         * @return {?}
         */
        JsonLdDirective.prototype.writeJsonLd = /**
         * @private
         * @param {?} schema
         * @return {?}
         */
        function (schema) {
            if (schema && this.jsonLdScriptFactory.isJsonLdRequired()) {
                /** @type {?} */
                var sanitizedSchema = this.jsonLdScriptFactory.sanitize(schema);
                /** @type {?} */
                var html = "<script type=\"application/ld+json\">" + sanitizedSchema + "</script>";
                this.jsonLD = this.sanitizer.bypassSecurityTrustHtml(html);
            }
        };
        JsonLdDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[cxJsonLd]',
                    },] }
        ];
        /** @nocollapse */
        JsonLdDirective.ctorParameters = function () { return [
            { type: JsonLdScriptFactory },
            { type: platformBrowser.DomSanitizer }
        ]; };
        JsonLdDirective.propDecorators = {
            cxJsonLd: [{ type: core.Input }],
            jsonLD: [{ type: core.HostBinding, args: ['innerHTML',] }]
        };
        return JsonLdDirective;
    }());
    if (false) {
        /** @type {?} */
        JsonLdDirective.prototype.jsonLD;
        /**
         * @type {?}
         * @protected
         */
        JsonLdDirective.prototype.jsonLdScriptFactory;
        /**
         * @type {?}
         * @protected
         */
        JsonLdDirective.prototype.sanitizer;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Injection token to extend schema builders for adding structural data (json-ld).
     *
     * Some builders (i.e. `JSONLD_PRODUCT_BUILDER`) might have additional
     * lowever level builder to further extend the schema.
     * @type {?}
     */
    var SCHEMA_BUILDER = new core.InjectionToken('SchemaBuilderToken');
    /**
     * Injection token to add specific json-ld builders for product related schema's.
     * See see https://schema.org/product for more information.
     * @type {?}
     */
    var JSONLD_PRODUCT_BUILDER = new core.InjectionToken('JsonLdProductBuilderToken');

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StructuredDataFactory = /** @class */ (function () {
        function StructuredDataFactory(scriptBuilder, builders) {
            this.scriptBuilder = scriptBuilder;
            this.builders = builders;
        }
        /**
         * @return {?}
         */
        StructuredDataFactory.prototype.build = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.collectSchemas().subscribe((/**
             * @param {?} schema
             * @return {?}
             */
            function (schema) {
                _this.scriptBuilder.build(schema);
            }));
        };
        /**
         * @private
         * @return {?}
         */
        StructuredDataFactory.prototype.collectSchemas = /**
         * @private
         * @return {?}
         */
        function () {
            if (!this.scriptBuilder.isJsonLdRequired() || !this.builders) {
                return rxjs.of();
            }
            return rxjs.combineLatest(this.builders.map((/**
             * @param {?} builder
             * @return {?}
             */
            function (builder) { return builder.build(); }))).pipe();
        };
        StructuredDataFactory.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        StructuredDataFactory.ctorParameters = function () { return [
            { type: JsonLdScriptFactory },
            { type: Array, decorators: [{ type: core.Optional }, { type: core.Inject, args: [SCHEMA_BUILDER,] }] }
        ]; };
        /** @nocollapse */ StructuredDataFactory.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function StructuredDataFactory_Factory() { return new StructuredDataFactory(core.ɵɵinject(JsonLdScriptFactory), core.ɵɵinject(SCHEMA_BUILDER, 8)); }, token: StructuredDataFactory, providedIn: "root" });
        return StructuredDataFactory;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        StructuredDataFactory.prototype.scriptBuilder;
        /**
         * @type {?}
         * @private
         */
        StructuredDataFactory.prototype.builders;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Factory to build the structure data
     * without any interaction with the UI.
     * @param {?} injector
     * @return {?}
     */
    function getStructuredDataFactory(injector) {
        /** @type {?} */
        var result = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var factory = injector.get(StructuredDataFactory);
            factory.build();
        });
        return result;
    }
    var StructuredDataModule = /** @class */ (function () {
        function StructuredDataModule() {
        }
        StructuredDataModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule],
                        declarations: [JsonLdDirective],
                        exports: [JsonLdDirective],
                        providers: [
                            {
                                provide: core.APP_INITIALIZER,
                                useFactory: getStructuredDataFactory,
                                deps: [core.Injector],
                                multi: true,
                            },
                        ],
                    },] }
        ];
        return StructuredDataModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?} injector
     * @return {?}
     */
    function initSeoService(injector) {
        /** @type {?} */
        var result = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var service = injector.get(SeoMetaService);
            service.init();
        });
        return result;
    }
    var SeoModule = /** @class */ (function () {
        function SeoModule() {
        }
        SeoModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [StructuredDataModule],
                        providers: [
                            {
                                provide: core.APP_INITIALIZER,
                                useFactory: initSeoService,
                                deps: [core.Injector],
                                multi: true,
                            },
                            htmlLangProvider,
                        ],
                    },] }
        ];
        return SeoModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BreadcrumbSchemaBuilder = /** @class */ (function () {
        function BreadcrumbSchemaBuilder(pageMetaService) {
            this.pageMetaService = pageMetaService;
        }
        /**
         * @return {?}
         */
        BreadcrumbSchemaBuilder.prototype.build = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.pageMetaService
                .getMeta()
                .pipe(operators.map((/**
             * @param {?} pageMeta
             * @return {?}
             */
            function (pageMeta) { return _this.collect(pageMeta); })));
        };
        /**
         * @protected
         * @param {?} pageMeta
         * @return {?}
         */
        BreadcrumbSchemaBuilder.prototype.collect = /**
         * @protected
         * @param {?} pageMeta
         * @return {?}
         */
        function (pageMeta) {
            if (!pageMeta.breadcrumbs) {
                return;
            }
            /** @type {?} */
            var crumbs = pageMeta.breadcrumbs.map((/**
             * @param {?} crumb
             * @param {?} index
             * @return {?}
             */
            function (crumb, index) {
                return {
                    '@type': 'ListItem',
                    position: index + 1,
                    item: {
                        '@id': crumb.link,
                        name: crumb.label,
                    },
                };
            }));
            if (pageMeta.title) {
                crumbs.push({
                    '@type': 'ListItem',
                    position: crumbs.length + 1,
                    item: {
                        '@id': pageMeta.title,
                        name: pageMeta.title,
                    },
                });
            }
            return {
                '@context': 'http://schema.org',
                '@type': 'BreadcrumbList',
                itemListElement: crumbs,
            };
        };
        BreadcrumbSchemaBuilder.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        BreadcrumbSchemaBuilder.ctorParameters = function () { return [
            { type: core$1.PageMetaService }
        ]; };
        /** @nocollapse */ BreadcrumbSchemaBuilder.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function BreadcrumbSchemaBuilder_Factory() { return new BreadcrumbSchemaBuilder(core.ɵɵinject(core$1.PageMetaService)); }, token: BreadcrumbSchemaBuilder, providedIn: "root" });
        return BreadcrumbSchemaBuilder;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        BreadcrumbSchemaBuilder.prototype.pageMetaService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Builds the basic structured data for the product, see https://schema.org/product.
     * This builder includes data for sku number, name, description, brand and main image.
     */
    var JsonLdBaseProductBuilder = /** @class */ (function () {
        function JsonLdBaseProductBuilder() {
        }
        /**
         * @param {?} product
         * @return {?}
         */
        JsonLdBaseProductBuilder.prototype.build = /**
         * @param {?} product
         * @return {?}
         */
        function (product) {
            return rxjs.of(__assign({}, this.getProductBase(product), this.getProductBrand(product), this.getProductImage(product)));
        };
        /**
         * @private
         * @param {?} product
         * @return {?}
         */
        JsonLdBaseProductBuilder.prototype.getProductBase = /**
         * @private
         * @param {?} product
         * @return {?}
         */
        function (product) {
            /** @type {?} */
            var result = { sku: product.code };
            if (product.name) {
                result.name = product.name;
            }
            if (product.summary) {
                result.description = product.summary;
            }
            return result;
        };
        /**
         * @private
         * @param {?} product
         * @return {?}
         */
        JsonLdBaseProductBuilder.prototype.getProductImage = /**
         * @private
         * @param {?} product
         * @return {?}
         */
        function (product) {
            return product.images &&
                product.images.PRIMARY &&
                product.images.PRIMARY['zoom'] &&
                product.images.PRIMARY['zoom'].url
                ? {
                    image: product.images.PRIMARY['zoom'].url,
                }
                : {};
        };
        /**
         * @private
         * @param {?} product
         * @return {?}
         */
        JsonLdBaseProductBuilder.prototype.getProductBrand = /**
         * @private
         * @param {?} product
         * @return {?}
         */
        function (product) {
            return product['manufacturer']
                ? {
                    brand: product['manufacturer'],
                }
                : null;
        };
        JsonLdBaseProductBuilder.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */ JsonLdBaseProductBuilder.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function JsonLdBaseProductBuilder_Factory() { return new JsonLdBaseProductBuilder(); }, token: JsonLdBaseProductBuilder, providedIn: "root" });
        return JsonLdBaseProductBuilder;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Builds the structured data for the product offer, see https://schema.org/offers.
     * The data includes the price, currency and availability level.
     */
    var JsonLdProductOfferBuilder = /** @class */ (function () {
        function JsonLdProductOfferBuilder() {
        }
        /**
         * @param {?} product
         * @return {?}
         */
        JsonLdProductOfferBuilder.prototype.build = /**
         * @param {?} product
         * @return {?}
         */
        function (product) {
            /** @type {?} */
            var schema = { '@type': 'Offer' };
            if (product.price) {
                if (product.price.value) {
                    schema.price = product.price.value;
                }
                if (product.price.currencyIso) {
                    schema.priceCurrency = product.price.currencyIso;
                }
            }
            if (product.stock && product.stock.stockLevelStatus) {
                schema.availability =
                    product.stock.stockLevelStatus === 'inStock' ? 'InStock' : 'OutOfStock';
            }
            return rxjs.of({
                offers: schema,
            });
        };
        JsonLdProductOfferBuilder.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */ JsonLdProductOfferBuilder.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function JsonLdProductOfferBuilder_Factory() { return new JsonLdProductOfferBuilder(); }, token: JsonLdProductOfferBuilder, providedIn: "root" });
        return JsonLdProductOfferBuilder;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Builds the structured data for the product reviews, see https://schema.org/Review.
     * The data includes the aggregated product rating and the individual reviews.
     */
    var JsonLdProductReviewBuilder = /** @class */ (function () {
        function JsonLdProductReviewBuilder(reviewService) {
            this.reviewService = reviewService;
        }
        /**
         * @param {?} product
         * @return {?}
         */
        JsonLdProductReviewBuilder.prototype.build = /**
         * @param {?} product
         * @return {?}
         */
        function (product) {
            var _this = this;
            return this.reviewService.getByProductCode(product.code).pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} reviews
             * @return {?}
             */
            function (reviews) {
                return {
                    aggregateRating: _this.buildAggregatedReviews(product, reviews),
                    review: reviews.map((/**
                     * @param {?} review
                     * @return {?}
                     */
                    function (review) { return _this.buildReviews(review); })),
                };
            })));
        };
        /**
         * @private
         * @param {?} product
         * @param {?} reviews
         * @return {?}
         */
        JsonLdProductReviewBuilder.prototype.buildAggregatedReviews = /**
         * @private
         * @param {?} product
         * @param {?} reviews
         * @return {?}
         */
        function (product, reviews) {
            /** @type {?} */
            var aggregated = {
                '@type': 'AggregateRating',
            };
            if (product.averageRating) {
                aggregated.ratingValue = product.averageRating;
            }
            if (reviews) {
                aggregated.ratingCount = reviews.filter((/**
                 * @param {?} rev
                 * @return {?}
                 */
                function (rev) { return !!rev.rating; })).length;
                aggregated.reviewCount = reviews.filter((/**
                 * @param {?} rev
                 * @return {?}
                 */
                function (rev) { return !!rev.comment; })).length;
            }
            return aggregated;
        };
        /**
         * @private
         * @param {?} review
         * @return {?}
         */
        JsonLdProductReviewBuilder.prototype.buildReviews = /**
         * @private
         * @param {?} review
         * @return {?}
         */
        function (review) {
            /** @type {?} */
            var reviewSchema = {
                '@type': 'review',
            };
            if (review.principal && review.principal.name) {
                reviewSchema.author = review.principal.name;
            }
            if (review.date) {
                /** @type {?} */
                var date = new Date(review.date);
                reviewSchema.datePublished = date.getFullYear() + "-" + (date.getMonth() +
                    1) + "-" + date.getDate();
            }
            if (review.headline) {
                reviewSchema.name = review.headline;
            }
            if (review.comment) {
                reviewSchema.description = review.comment;
            }
            if (review.rating) {
                reviewSchema.reviewRating = {
                    '@type': 'Rating',
                    ratingValue: review.rating.toString(),
                };
            }
            return reviewSchema;
        };
        JsonLdProductReviewBuilder.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        JsonLdProductReviewBuilder.ctorParameters = function () { return [
            { type: core$1.ProductReviewService }
        ]; };
        /** @nocollapse */ JsonLdProductReviewBuilder.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function JsonLdProductReviewBuilder_Factory() { return new JsonLdProductReviewBuilder(core.ɵɵinject(core$1.ProductReviewService)); }, token: JsonLdProductReviewBuilder, providedIn: "root" });
        return JsonLdProductReviewBuilder;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        JsonLdProductReviewBuilder.prototype.reviewService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CurrentProductService = /** @class */ (function () {
        function CurrentProductService(routingService, productService, features) {
            this.routingService = routingService;
            this.productService = productService;
            this.features = features;
            this.DEFAULT_PRODUCT_SCOPE = this.features && this.features.isLevel('1.4') ? core$1.ProductScope.DETAILS : '';
        }
        /**
         * @param {?=} scopes
         * @return {?}
         */
        CurrentProductService.prototype.getProduct = /**
         * @param {?=} scopes
         * @return {?}
         */
        function (scopes) {
            var _this = this;
            return this.routingService.getRouterState().pipe(operators.map((/**
             * @param {?} state
             * @return {?}
             */
            function (state) { return state.state.params['productCode']; })), operators.filter(Boolean), operators.switchMap((/**
             * @param {?} productCode
             * @return {?}
             */
            function (productCode) {
                return _this.productService.get(productCode, 
                // TODO deprecated since 1.4 - should be replaced with 'scopes || this.DEFAULT_PRODUCT_SCOPE'
                _this.features && _this.features.isLevel('1.4')
                    ? scopes || _this.DEFAULT_PRODUCT_SCOPE
                    : undefined
                // deprecated END
                );
            })));
        };
        CurrentProductService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CurrentProductService.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.ProductService },
            { type: core$1.FeatureConfigService }
        ]; };
        /** @nocollapse */ CurrentProductService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CurrentProductService_Factory() { return new CurrentProductService(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.ProductService), core.ɵɵinject(core$1.FeatureConfigService)); }, token: CurrentProductService, providedIn: "root" });
        return CurrentProductService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        CurrentProductService.prototype.DEFAULT_PRODUCT_SCOPE;
        /**
         * @type {?}
         * @private
         */
        CurrentProductService.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        CurrentProductService.prototype.productService;
        /**
         * @type {?}
         * @protected
         */
        CurrentProductService.prototype.features;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Adds the minimal structured data for the product, see https://schema.org/product.
     * The actual data collection is delegated to `JsonLdBuilder`s, which can be injected
     * using the `JSONLD_PRODUCT_BUILDER` token.
     */
    var ProductSchemaBuilder = /** @class */ (function () {
        function ProductSchemaBuilder(currentProduct, builders) {
            this.currentProduct = currentProduct;
            this.builders = builders;
        }
        /**
         * @return {?}
         */
        ProductSchemaBuilder.prototype.build = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.currentProduct.getProduct().pipe(operators.startWith((/** @type {?} */ (null))), operators.switchMap((/**
             * @param {?} product
             * @return {?}
             */
            function (product) {
                if (product) {
                    return rxjs.combineLatest(_this.collect(product)).pipe(operators.map((/**
                     * @param {?} res
                     * @return {?}
                     */
                    function (res) { return Object.assign.apply(Object, __spread([{}], res)); })));
                }
                return rxjs.of({});
            })));
        };
        /**
         * @protected
         * @param {?} product
         * @return {?}
         */
        ProductSchemaBuilder.prototype.collect = /**
         * @protected
         * @param {?} product
         * @return {?}
         */
        function (product) {
            if (!product || !product.code) {
                return [];
            }
            /** @type {?} */
            var builders = this.builders
                ? this.builders.map((/**
                 * @param {?} builder
                 * @return {?}
                 */
                function (builder) { return builder.build(product); }))
                : [];
            return __spread([
                rxjs.of({
                    '@context': 'http://schema.org',
                    '@type': 'Product',
                })
            ], builders);
        };
        ProductSchemaBuilder.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        ProductSchemaBuilder.ctorParameters = function () { return [
            { type: CurrentProductService },
            { type: Array, decorators: [{ type: core.Optional }, { type: core.Inject, args: [JSONLD_PRODUCT_BUILDER,] }] }
        ]; };
        /** @nocollapse */ ProductSchemaBuilder.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ProductSchemaBuilder_Factory() { return new ProductSchemaBuilder(core.ɵɵinject(CurrentProductService), core.ɵɵinject(JSONLD_PRODUCT_BUILDER, 8)); }, token: ProductSchemaBuilder, providedIn: "root" });
        return ProductSchemaBuilder;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ProductSchemaBuilder.prototype.currentProduct;
        /**
         * @type {?}
         * @protected
         */
        ProductSchemaBuilder.prototype.builders;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Provides several standard json-ld builders that contribute
     * to colleting and building json-ld data.
     */
    var JsonLdBuilderModule = /** @class */ (function () {
        function JsonLdBuilderModule() {
        }
        JsonLdBuilderModule.decorators = [
            { type: core.NgModule, args: [{
                        providers: [
                            {
                                provide: SCHEMA_BUILDER,
                                useExisting: ProductSchemaBuilder,
                                multi: true,
                            },
                            {
                                provide: SCHEMA_BUILDER,
                                useExisting: BreadcrumbSchemaBuilder,
                                multi: true,
                            },
                            // lower level json-ld builder classes offering fine-graiend control
                            // for product related schema's
                            {
                                provide: JSONLD_PRODUCT_BUILDER,
                                useExisting: JsonLdBaseProductBuilder,
                                multi: true,
                            },
                            {
                                provide: JSONLD_PRODUCT_BUILDER,
                                useExisting: JsonLdProductOfferBuilder,
                                multi: true,
                            },
                            {
                                provide: JSONLD_PRODUCT_BUILDER,
                                useExisting: JsonLdProductReviewBuilder,
                                multi: true,
                            },
                        ],
                    },] }
        ];
        return JsonLdBuilderModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function SchemaBuilder() { }
    if (false) {
        /**
         * @return {?}
         */
        SchemaBuilder.prototype.build = function () { };
    }
    /**
     * @record
     * @template T
     */
    function JsonLdBuilder() { }
    if (false) {
        /**
         * @param {?} data
         * @return {?}
         */
        JsonLdBuilder.prototype.build = function (data) { };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var ASM_ENABLED_LOCAL_STORAGE_KEY = 'asm_enabled';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AsmComponentService = /** @class */ (function () {
        function AsmComponentService(authService, asmAuthService, routingService, winRef) {
            this.authService = authService;
            this.asmAuthService = asmAuthService;
            this.routingService = routingService;
            this.winRef = winRef;
        }
        /**
         * @return {?}
         */
        AsmComponentService.prototype.logoutCustomerSupportAgentAndCustomer = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.authService
                .getUserToken()
                .pipe(operators.take(1))
                .subscribe((/**
             * @param {?} token
             * @return {?}
             */
            function (token) {
                if (_this.asmAuthService.isCustomerEmulationToken(token)) {
                    _this.logoutCustomer();
                }
                _this.asmAuthService.logoutCustomerSupportAgent();
            }));
        };
        /**
         * @return {?}
         */
        AsmComponentService.prototype.logoutCustomer = /**
         * @return {?}
         */
        function () {
            this.authService.logout();
            this.routingService.go({ cxRoute: 'home' });
        };
        /**
         * @return {?}
         */
        AsmComponentService.prototype.isCustomerEmulationSessionInProgress = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.authService
                .getUserToken()
                .pipe(operators.mergeMap((/**
             * @param {?} userToken
             * @return {?}
             */
            function (userToken) {
                return rxjs.of(_this.asmAuthService.isCustomerEmulationToken(userToken));
            })));
        };
        /**
         * We're currently only removing the persisted storage in the browser
         * to ensure the ASM experience isn't loaded on the next visit. There are a few
         * optimsiations we could think of:
         * - drop the `asm` parameter from the URL, in case it's still there
         * - remove the generated UI from the DOM (outlets currently do not support this)
         */
        /**
         * We're currently only removing the persisted storage in the browser
         * to ensure the ASM experience isn't loaded on the next visit. There are a few
         * optimsiations we could think of:
         * - drop the `asm` parameter from the URL, in case it's still there
         * - remove the generated UI from the DOM (outlets currently do not support this)
         * @return {?}
         */
        AsmComponentService.prototype.unload = /**
         * We're currently only removing the persisted storage in the browser
         * to ensure the ASM experience isn't loaded on the next visit. There are a few
         * optimsiations we could think of:
         * - drop the `asm` parameter from the URL, in case it's still there
         * - remove the generated UI from the DOM (outlets currently do not support this)
         * @return {?}
         */
        function () {
            if (this.winRef.localStorage) {
                this.winRef.localStorage.removeItem(ASM_ENABLED_LOCAL_STORAGE_KEY);
            }
        };
        AsmComponentService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        AsmComponentService.ctorParameters = function () { return [
            { type: core$1.AuthService },
            { type: core$1.AsmAuthService },
            { type: core$1.RoutingService },
            { type: core$1.WindowRef }
        ]; };
        /** @nocollapse */ AsmComponentService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function AsmComponentService_Factory() { return new AsmComponentService(core.ɵɵinject(core$1.AuthService), core.ɵɵinject(core$1.AsmAuthService), core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.WindowRef)); }, token: AsmComponentService, providedIn: "root" });
        return AsmComponentService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        AsmComponentService.prototype.authService;
        /**
         * @type {?}
         * @protected
         */
        AsmComponentService.prototype.asmAuthService;
        /**
         * @type {?}
         * @protected
         */
        AsmComponentService.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        AsmComponentService.prototype.winRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AsmMainUiComponent = /** @class */ (function () {
        function AsmMainUiComponent(authService, asmAuthService, userService, asmComponentService, globalMessageService, routingService) {
            this.authService = authService;
            this.asmAuthService = asmAuthService;
            this.userService = userService;
            this.asmComponentService = asmComponentService;
            this.globalMessageService = globalMessageService;
            this.routingService = routingService;
            this.disabled = false;
            this.startingCustomerSession = false;
        }
        /**
         * @return {?}
         */
        AsmMainUiComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.csAgentToken$ = this.asmAuthService.getCustomerSupportAgentToken();
            this.csAgentTokenLoading$ = this.asmAuthService.getCustomerSupportAgentTokenLoading();
            this.customer$ = this.authService.getUserToken().pipe(operators.switchMap((/**
             * @param {?} token
             * @return {?}
             */
            function (token) {
                if (token && !!token.access_token) {
                    _this.handleCustomerSessionStartRedirection(token);
                    return _this.userService.get();
                }
                else {
                    return rxjs.of(undefined);
                }
            })));
        };
        /**
         * @private
         * @param {?} token
         * @return {?}
         */
        AsmMainUiComponent.prototype.handleCustomerSessionStartRedirection = /**
         * @private
         * @param {?} token
         * @return {?}
         */
        function (token) {
            if (this.startingCustomerSession &&
                this.asmAuthService.isCustomerEmulationToken(token)) {
                this.startingCustomerSession = false;
                this.globalMessageService.remove(core$1.GlobalMessageType.MSG_TYPE_ERROR);
                this.routingService.go('/');
            }
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        AsmMainUiComponent.prototype.loginCustomerSupportAgent = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var userId = _a.userId, password = _a.password;
            this.asmAuthService.authorizeCustomerSupportAgent(userId, password);
        };
        /**
         * @return {?}
         */
        AsmMainUiComponent.prototype.logout = /**
         * @return {?}
         */
        function () {
            this.asmComponentService.logoutCustomerSupportAgentAndCustomer();
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        AsmMainUiComponent.prototype.startCustomerEmulationSession = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var _this = this;
            var customerId = _a.customerId;
            this.asmAuthService
                .getCustomerSupportAgentToken()
                .pipe(operators.take(1))
                .subscribe((/**
             * @param {?} customerSupportAgentToken
             * @return {?}
             */
            function (customerSupportAgentToken) {
                return _this.asmAuthService.startCustomerEmulationSession(customerSupportAgentToken, customerId);
            }))
                .unsubscribe();
            this.startingCustomerSession = true;
        };
        /**
         * @return {?}
         */
        AsmMainUiComponent.prototype.hideUi = /**
         * @return {?}
         */
        function () {
            this.disabled = true;
            this.asmComponentService.unload();
        };
        AsmMainUiComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-asm-main-ui',
                        template: "<div class=\"asm-bar\">\n  <div class=\"asm-bar-branding\">\n    <img\n      class=\"logo\"\n      src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAwCAYAAADuFn/PAAAAAXNSR0IArs4c6QAAD7RJREFUeAHtW3twVGcVP7t795V30rwJBBJeASq01NJgnZa2otTW2nHAqrRak+rUKfgYZ/xDW5lRR2e0/mGtAadqq6WjUAdNa4udqVZaEdtCKQ2FQEh5JSQh5Lnvp7/ft9lkd9l7swkhwMiZ3N27937fd8533ufcG9P1L/VE5SpMOwdMmk0iocDzWjAUnnbk/9cITSYx2xwS9Xs3Wzs7NmqhcOT/mh/Tunkw32SzScjr2Vy2v3XDa5tWhbRI5KoHmi4hmGx2ifi8mz8UmvHI9k2VyvVokasWMC38N8HtRHyezUejex5pXbdu1O9r5qsCuLgCUD4fmu/1bq5sbd9wdNMY84lYM10VwMUTAJlvtUnU491c0XZc+fxUZFo0Mn4QjiJMMFREcKJG4xxrC/7ETCQ854+JAtbBny5Mak3d1ab3BsKtCrhhuJ2K9lNpmU+KYAHpWRAFa4K4x7t5NouU5WhS4rRIvt0idotJ3MGIDPgj0usNSZ8vLMOBiIQhJQukoZkpHGOJcGXLiPD0WBNStOmvQ8ETAjp7iN0d++RelBLhBFsAnVQe/fXHZk7wDEuarXaJBrxNFe2nNzLb0VsBMWA0HoyO8WNDDnDxIzOy5ONzcuX6MqdU5VhxLZlYWoUvFJEud0iODQZkb5dXHa19PnEFw2LDBi0QRqqac14BBPnz2yul0GEZxZt68vzhQXm6pS+Gl9xLANL4uUWFsm5hPmiIjiPu2EQqSY8nJCeHAnK4zy+tOLrdQXXTClqVLFLwJKDM7BSLmMD8iN/btCRn3obtm+adz+CElTTlW0YuEDe1qR6M//oNJXJDRVbC0PNPqYFZVrPUFNjU8bHqHGUF3NxLx4ZkZ/uQdLnOF34Acad+To6srDRe/7ML8+T5Q/3KEpNFD5lijVKnWa4tdpxPWIZXeiGM/3S65Y/vD8hbnR6lLBdkEdR8DZrv9zUtyT+wYfu6+YbMJ5mjQZjMZ1H20HXF8s0VZWKjjU4C6IIWgyk8PlqVLY0vnhDGkMTVNJjA3bV5464+t9AhS4vtsqfDBWuiKY0Bk4dIhq5nbFbyWXGWJnfPzZc1NRT0gDy+p1uG/WHlmpJHZvALG6TmR/2epoOFBzccTEg1jWabTXBBpkhYgoGQNCy9Rr6zsnzSzE9ERKZvazknAX9IzFhf4QGuMFofNXmarKjMThye9pwWtqYmV6Jwc2R4fI3Rb/qyKQDGgvsWF8ovVlcJSEOPJsaTUTzkkdGBRMZstorA7SwqXLRBMmQ+STczC/IHwnA3TvlGfdkUbCe2xBsnhmVna79YTQi3YB7x8AhA0LfPzpNsW7JG6yG+BWOLHWYJgwHxNUa/KeUphPqZOfKt+nKlJIk0j+Ib2UPyb8QfMD/q8zYV9/Ru3L7ONK7bSSTZHIUZm6FJDdeXIrsZnynMdBh4jfbuR1B8YnenhBCIVZZFV4GDuLLh2j4xLz+RBsPzylyrspYAlIRrJB1TZAGJBHxmUZFcV5YFRUmDLxU/fpP5aC80Fff1GWY7iTgSzzWa26wCu6yA9I3g7VPDsu1Ar3zQ75MAGEwNLnBoUgtfv2JmriybkSM5SFcJO1p65Z3Tw2JnPgqtiUMIgluGsXUlzviljL7vnF8gLx86h7UShnNdIy3A0NeODcrrHwwqn56LrKv2GtA6K0+K4Pv1wAoF+STw7T05lBy4kibQ8lhkMdvxNZUMD06K+VxSC0NLawtto8xLwjPyYx+Y2bCtVVwjAYrpGvdOBXzlcFSeguVUF9rlzroiuXlOgfzmv2fEwgFwG4kQhitag80xUE8EbgLTZsISOgb9Y3MhzPEE8NapIdmyu0McyNRIDjOcmVC2x1ZXy621BbokLK/KEZQ8CPLJ9I9OwDpm9POR7fzqYPXyjTJBtzO6Dk4QH8MosPQ1goND4DSDNFCKDT4dHk99O8xRRSjKaTnR65Ff7jolX37ufTnT78UYBE1oafygT2Uhd9vcwkT8GZ3noVa4tSY/5tIS1jQBrxFYIWdkqurIAkMdoL2jzyvf/1u7dA8HdKdW5FmlCHEnFozH9qASAfDCYtLYz2+qe7P9gphPAhADEBipTQZwIzTwJ3fVSmm2VTy+kARgNeyiqkDFbzDFooQioh7w4PfovZFxDL7U5Mp8W1pMrLppYXqwBtbFuJ2MF2ptAFEwK4kO0MWkoGPAK/s7hnVnMhZmw30m4eI+aEZgPtzOr+pqTmzYvj25saa7oMENiDIq3UN+gyGxW5+6tkRurM6XHe/2yIstZ6XtrEcJTgOxTOPoluIVbypb+JvK+slF1+jiae/1yuvH+qVx5Yy0Y66tzJX5xVnScsYlrFpZA5AfRkCGcVwEljoKoDOMaz5UxXqgIQ7Aa6lxo1Mxj3l+OOD73eEFKze2rKvX1xa9hdNcx1aicqjLJb0ufZOMzyvPs8nDH62SPzculWceWAJmVUkNAlsAgdwFywhCS0LQstTDz0BfZJebEB/0YM8HA7Jjf7eqpNONYWF4x4JC8QVDav0g8LCvYwS8z3GJ9NDaEY9lfql+Fc4kg/sJJ8wNm20S9nu3+sKBr12Iz0+l10wtOQ2fTa3OFBjUbpqdL9/9xBz5y1eXyVNfWCy0EA0bc6Pw4oZJfPzwwWXdPr9IcrhzHdjV1icHod20LD1YXVes1qCgufZ4AmDKTOFTQUgDafPg+PwNFbIAqaYeuOEKe90B5XIUHgseIwa9W/3RYOPxTat8evMmc121o+m/m/51QlaBSdVFE0sRnVaLmse5LZ0ueeK14/IShKk6nbQvCDiLqd3iYl36uuAC950cFK8/KK9DEAvK0lfJc0uyZHlVrvzzyLmY+xnHAvIg8CpYrQM0ZiGAVF+TJXdDUe6+ttSwC9ra7ZJ+eASVraG3A5+/1VLqbmjfeOf4vlp3l+lvQAAoxHDvNLKDh7e+J1vWf0hmogczGVhSmSNbPr9EnvnPafnB344iINP8o3Lj7AJZDB+uB3va+6V70KcC+T9bz0nDyplpny8wzty1pFRePXQ2IwE8WD9DPgdtN2EiBWBFvMoEXnm/V/xwddnOLHY1n9OGfQ1tP5x65pMW1PgIRjiYYew/MSj3bdkrfz/YkwmdumO+WF8lP753IVLQqEod74LWscDRg1cP9ap+jxWMOgBL6BjQt/JVC4qkIgfv1JBurG8E1PyCLKvkI83OlPknoYgvvtslDjzDDQe8W8H8L7c9cXGYT9qRa2ETPJAZ2OEyTvS65StPvysP//6AvH18wGh/hvfWLq+QtcvLhW5g9aIS3bH96Mf/tw09IygAApL0DvlkdxuqXh0oy7PLzaglmNbGzEBn4CQuM2b86IUjctYFrxD0bTU5LI0Xk/kk0RxhMEs4GCbplnbs7ZC1T74lX9jytvzpzQ45Y6CVentdf1OVrIHLmGkQV/a098mpc24xgfmKDmj2Ky3GFnjX0jIIi3pjbAF6dKW7zjrksR2Hpfm9PtEi/q3RLG3KA246vBrdRCrQWTjgL1kJ/gPM4FGe75Dl8OV3LC6VW5CNVBSMHycWVuTKN1fXpi6f9Jsuh81Atq0JVIAPetwyhEedeToV+sraIvSgnOhank+7WmSCH0eRhv8Ymr8TzwSQ7zxr7rc9dPzxqc129Egy1Xz9paRd8Eeqt+Y1lVNjwzwvRz/l08tnyCNgbhH88YUAU8O2brd0IhX24zlzCVzMbGQ7FLDR06nvbTsodvitR++tmxT6QU9QDqEafuGdTmned0b6fSaxg/mRwa6Hjj/9oH4QmhQ2/UnnWQALFWYbDFpxQfCb+QMrRAqgH02xJ3celdOIF5sbl+NhRHykPiK9O9l2TZbOyleH3ph019fADe05qh8rOOeNw72y+0gv6I7thSnxOaSXp895YGUelfmxTnA4nGKPBrfCrTW2P/3glKea6eiPX9Ms8P9xYMq4/iOzlAvY09qrLttIfDr+QiLtnUMqflM40w3LqgtQNxh3A954v0cebz4szpE2OWnkXpiWMsdnC8XuQLaDgBs1WxoudsBNxyNYQEwAZP6c0hx5dO0SVUTthGlu//cJOXC8X4bx8JouSAkCJsAZOXgW8NAdtcoq0i18sa9lA//NC/WLO+Jnzygbb3Kkvs2haIMgzKhwI0g1oxbrJWE+6dAs9CmAIPzvA7fORsESaxfcc2OVfOrDVXKsa1gOnhyQDrSbB1Ce0y+XoVBbsaBEFs3M/MlWDMvUfjoSNDvdyrRM7i++x8QxJjI/6Hs2rFkveqqZiDf1XFkAU7B55Tny6fpZSfep8XORyfC4IoEtWFp4BBsZAb4wpv45Iuh/1uvvY8CdVp8fpyP+rbH4iSIQrV81B2kfnuxPA/AlgJ9tf0/KUR8sqi6U8kInyn6rCvpMAs6hGDuJVHQ/CrL7bquRuZXjv8KSjmy0/tWTOfV0bmSAcjsh/7OewMC0Zjvp6OM1ja+J1MGVrL1ljt6YKb/ehuD93KvHVJfSjnaB06aJNvLWHRXWj86lF+mpF4IqRTo6WQHwAQULPB4EExtrYL7X6Wg8/utLq/lxpppZUfrQ+37tnTNq4/Ebk/lmoH793TOKeUbzd2EM35jIBvMZcfxgthvxhYfXizYwqmEnnkjxIf+/W7rQqoox0GjNdPdoASw0eZjRzxf4fG+H45L6/FQ6zVS8M2dd8u0nd8v9P/yH/H7nETnd40odZ/ib7NmHfPurP90lbx7uESdyeyPYtb8TjwbBHAiMLpDtcAoifvAa7/Hd0kNoVUyUnjhu9b4n10fANQX8f3BndTa2vXzxGmtxvBP5Nl33pW1KvUCnejWR2laEarQOvnnZvGKpm10olXgUWJhrFxs0lsCxLk9AulG9toBBb0Cj6a/d3qCsva1W5lTQZ6tl1fjEj0Fo+XOvHAUuMHksNiYOSTpnS/tOJAcLZvFhfvo1kyYk/Njd0i1vHxlAbAltc3VlP3C5MZ+kmq574E/n7YquhO+JsuPLgsWJjiaDZLylywk+uI1hMJzpKythK1wGGcrfRi6DYyjIDHgfYyUGBrDmZP6XzWZHO0NCzR6LfX3rb+/Rfwofw3RJPrV4gErErlwBKmDlE3AjDAYMBn1J3V8ykk+9NPaRCTQL/KmXeg16/6Nj1UkGH1iT/48AZBkMHhvCt5Qj4UCzW3NctswntRr5lgmo/DmVBzGeZzJ9WseQ+eFgoNkz5Frf2vzZy1Lz4wxBDM5QAvEZl/m32cJUE8y3kfkNlzXzyUr1XtBlztOMyVNuJ+Rvdg571u+7Apg/IoCM93dZD+S7mnA7f/W4PPdfKcwfEcCV74KU26HPd3vvvxLcTqImX4pWfiL+Cz7nf6ZEI8G/ut3eK8Lnp254pAOTevnK+G0yI4RFQvtzQ9r6vc0NEyvfL5Mt/g8XIbTVhsig+gAAAABJRU5ErkJggg==\"\n      width=\"48\"\n      height=\"24\"\n      alt=\"{{ 'asm.mainLogoLabel' | cxTranslate }}\"\n    />\n\n    <div class=\"asm-title\">\n      {{ 'asm.mainTitle' | cxTranslate }}\n    </div>\n  </div>\n  <div class=\"asm-bar-actions\">\n    <cx-asm-session-timer\n      *ngIf=\"(csAgentToken$ | async)?.access_token\"\n    ></cx-asm-session-timer>\n\n    <a\n      class=\"close\"\n      title=\"{{ 'asm.hideUi' | cxTranslate }}\"\n      *ngIf=\"\n        !(csAgentToken$ | async)?.access_token &&\n        !(csAgentTokenLoading$ | async)\n      \"\n      (click)=\"hideUi()\"\n    ></a>\n\n    <a\n      class=\"logout\"\n      title=\"{{ 'asm.logout' | cxTranslate }}\"\n      *ngIf=\"(csAgentToken$ | async)?.access_token\"\n      (click)=\"logout()\"\n    >\n    </a>\n  </div>\n</div>\n\n<ng-container *ngIf=\"(csAgentToken$ | async)?.access_token; else showLoginForm\">\n  <cx-customer-emulation\n    *ngIf=\"customer$ | async as customer; else showCustomerSelection\"\n  ></cx-customer-emulation>\n  <ng-template #showCustomerSelection>\n    <cx-customer-selection\n      (submitEvent)=\"startCustomerEmulationSession($event)\"\n    ></cx-customer-selection>\n  </ng-template>\n</ng-container>\n\n<ng-template #showLoginForm>\n  <cx-csagent-login-form\n    (submitEvent)=\"loginCustomerSupportAgent($event)\"\n    [csAgentTokenLoading]=\"csAgentTokenLoading$ | async\"\n  ></cx-csagent-login-form>\n</ng-template>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: ["cx-asm-main-ui{font-family:Arial,sans-serif;font-size:14px;width:100%;display:flex;flex-direction:column}cx-asm-main-ui .close,cx-asm-main-ui .logout{cursor:pointer;width:16px;height:16px}cx-asm-main-ui .close{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='white' d='M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z'/%3E%3C/svg%3E\")}cx-asm-main-ui .logout{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23d1e3ff' d='M11,2.7c1.2,0.6,2.2,1.5,2.9,2.6c1.3,1.9,1.5,4.4,0.6,6.5c-0.3,0.8-0.8,1.6-1.5,2.2c-0.6,0.6-1.4,1.1-2.2,1.5 C9.9,15.8,9,16,8,16c-0.9,0-1.9-0.2-2.7-0.5c-0.8-0.4-1.6-0.9-2.2-1.5c-0.6-0.6-1.1-1.4-1.5-2.2C0.7,9.6,0.9,7.2,2.1,5.3 c0.7-1.1,1.7-2,2.9-2.6v1.1C4.1,4.3,3.3,5.1,2.8,6C2.3,6.9,2,7.9,2,9c0,1.6,0.6,3.2,1.8,4.3c0.5,0.5,1.2,1,1.9,1.3 c1.5,0.6,3.2,0.6,4.7,0c0.7-0.3,1.4-0.7,1.9-1.3C13.4,12.1,14,10.6,14,9c0-1.1-0.3-2.1-0.8-3c-0.5-0.9-1.3-1.7-2.2-2.2 C11,3.8,11,2.7,11,2.7z M8,9C7.7,9,7.5,8.9,7.3,8.7C7.1,8.5,7,8.3,7,8V1c0-0.3,0.1-0.5,0.3-0.7c0.4-0.4,1-0.4,1.4,0 C8.9,0.5,9,0.7,9,1v7c0,0.3-0.1,0.5-0.3,0.7C8.5,8.9,8.2,9,8,9z'/%3E%3C/svg%3E%0A\")}cx-asm-main-ui button{padding:0 12px;white-space:nowrap;border-radius:4px;height:36px;font-weight:400;border-style:solid;border-width:1px}cx-asm-main-ui button:disabled{opacity:.4;cursor:not-allowed}cx-asm-main-ui .spinner{display:flex;justify-content:center;width:100%;color:#0a6ed1}cx-asm-main-ui .spinner>div{width:8px;height:8px;margin:6px;border-radius:100%;background-color:currentColor;-webkit-animation:1s infinite spinner-dots-pulse;animation:1s infinite spinner-dots-pulse}cx-asm-main-ui .spinner>div:nth-child(1){-webkit-animation-delay:-.2s;animation-delay:-.2s}@-webkit-keyframes spinner-dots-pulse{0%,100%,60%{-webkit-transform:scale(1);transform:scale(1)}30%{-webkit-transform:scale(2);transform:scale(2)}}@keyframes spinner-dots-pulse{0%,100%,60%{-webkit-transform:scale(1);transform:scale(1)}30%{-webkit-transform:scale(2);transform:scale(2)}}cx-asm-main-ui.hidden{display:none}cx-asm-main-ui .asm-bar{color:#fff;background-color:#354a5f;height:48px;display:flex;padding:0 32px;justify-content:space-between;z-index:1}cx-asm-main-ui .asm-bar-branding{display:flex;align-items:center}cx-asm-main-ui .asm-bar-branding .logo{-webkit-margin-end:8px;margin-inline-end:8px}cx-asm-main-ui .asm-bar-branding .asm-title{font-size:16px;font-weight:700}cx-asm-main-ui .asm-bar-actions{display:flex;justify-content:flex-end;align-items:center}cx-asm-main-ui>:nth-child(2){margin:32px;display:flex;width:calc(100vw - 4rem)}@media (min-width:767px){cx-asm-main-ui>:nth-child(2){width:50vw}}cx-asm-main-ui input{outline:0;border:1px solid #89919a;color:#32363a;background-color:#fff;border-radius:4px;padding:0 12px;height:36px}cx-asm-main-ui input:focus{box-shadow:0 0 0 1px #fafafa}cx-asm-main-ui input:hover{border-color:#085caf}cx-asm-main-ui input::-webkit-input-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input::-moz-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input:-ms-input-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input::-ms-input-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input::placeholder{color:#74777a;font-style:italic}@media (max-width:575px){cx-asm-main-ui .asm-bar-branding .asm-title{display:none}cx-asm-main-ui .asm-alert{margin-top:30px}}"]
                    }] }
        ];
        /** @nocollapse */
        AsmMainUiComponent.ctorParameters = function () { return [
            { type: core$1.AuthService },
            { type: core$1.AsmAuthService },
            { type: core$1.UserService },
            { type: AsmComponentService },
            { type: core$1.GlobalMessageService },
            { type: core$1.RoutingService }
        ]; };
        AsmMainUiComponent.propDecorators = {
            disabled: [{ type: core.HostBinding, args: ['class.hidden',] }]
        };
        return AsmMainUiComponent;
    }());
    if (false) {
        /** @type {?} */
        AsmMainUiComponent.prototype.csAgentToken$;
        /** @type {?} */
        AsmMainUiComponent.prototype.csAgentTokenLoading$;
        /** @type {?} */
        AsmMainUiComponent.prototype.customer$;
        /** @type {?} */
        AsmMainUiComponent.prototype.disabled;
        /**
         * @type {?}
         * @private
         */
        AsmMainUiComponent.prototype.startingCustomerSession;
        /**
         * @type {?}
         * @protected
         */
        AsmMainUiComponent.prototype.authService;
        /**
         * @type {?}
         * @protected
         */
        AsmMainUiComponent.prototype.asmAuthService;
        /**
         * @type {?}
         * @protected
         */
        AsmMainUiComponent.prototype.userService;
        /**
         * @type {?}
         * @protected
         */
        AsmMainUiComponent.prototype.asmComponentService;
        /**
         * @type {?}
         * @protected
         */
        AsmMainUiComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @protected
         */
        AsmMainUiComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * The AsmEnablerService is used to enable ASM for those scenario's
     * where it's actually used. This service is added to avoid any polution
     * of the UI and runtime performance for the ordinary production user.
     */
    var AsmEnablerService = /** @class */ (function () {
        function AsmEnablerService(location, winRef, componentFactoryResolver, outletService) {
            this.location = location;
            this.winRef = winRef;
            this.componentFactoryResolver = componentFactoryResolver;
            this.outletService = outletService;
            /**
             * indicates whether the ASM UI has been added already
             */
            this.isUiAdded = false;
        }
        /**
         * Loads the ASM UI if needed. The ASM UI will be added based on the
         * existence of a URL parameter or previous usage given by local storage.
         */
        /**
         * Loads the ASM UI if needed. The ASM UI will be added based on the
         * existence of a URL parameter or previous usage given by local storage.
         * @return {?}
         */
        AsmEnablerService.prototype.load = /**
         * Loads the ASM UI if needed. The ASM UI will be added based on the
         * existence of a URL parameter or previous usage given by local storage.
         * @return {?}
         */
        function () {
            if (this.isEnabled()) {
                this.addUi();
            }
        };
        /**
         * Indicates whether the ASM module is enabled.
         */
        /**
         * Indicates whether the ASM module is enabled.
         * @private
         * @return {?}
         */
        AsmEnablerService.prototype.isEnabled = /**
         * Indicates whether the ASM module is enabled.
         * @private
         * @return {?}
         */
        function () {
            if (this.isLaunched() && !this.isUsedBefore()) {
                if (this.winRef.localStorage) {
                    this.winRef.localStorage.setItem(ASM_ENABLED_LOCAL_STORAGE_KEY, 'true');
                }
            }
            return this.isLaunched() || this.isUsedBefore();
        };
        /**
         * Indicates whether ASM is launched through the URL,
         * using the asm flag in the URL.
         */
        /**
         * Indicates whether ASM is launched through the URL,
         * using the asm flag in the URL.
         * @private
         * @return {?}
         */
        AsmEnablerService.prototype.isLaunched = /**
         * Indicates whether ASM is launched through the URL,
         * using the asm flag in the URL.
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var params = this.location.path().split('?')[1];
            return params && params.split('&').includes('asm=true');
        };
        /**
         * Evaluates local storage where we persist the usage of ASM.
         */
        /**
         * Evaluates local storage where we persist the usage of ASM.
         * @private
         * @return {?}
         */
        AsmEnablerService.prototype.isUsedBefore = /**
         * Evaluates local storage where we persist the usage of ASM.
         * @private
         * @return {?}
         */
        function () {
            return (this.winRef.localStorage &&
                this.winRef.localStorage.getItem(ASM_ENABLED_LOCAL_STORAGE_KEY) === 'true');
        };
        /**
         * Adds the ASM UI by using the `cx-storefront` outlet.
         */
        /**
         * Adds the ASM UI by using the `cx-storefront` outlet.
         * @private
         * @return {?}
         */
        AsmEnablerService.prototype.addUi = /**
         * Adds the ASM UI by using the `cx-storefront` outlet.
         * @private
         * @return {?}
         */
        function () {
            if (this.isUiAdded) {
                return;
            }
            /** @type {?} */
            var factory = this.componentFactoryResolver.resolveComponentFactory(AsmMainUiComponent);
            this.outletService.add('cx-storefront', factory, OutletPosition.BEFORE);
            this.isUiAdded = true;
        };
        AsmEnablerService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        AsmEnablerService.ctorParameters = function () { return [
            { type: common.Location },
            { type: core$1.WindowRef },
            { type: core.ComponentFactoryResolver },
            { type: OutletService }
        ]; };
        /** @nocollapse */ AsmEnablerService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function AsmEnablerService_Factory() { return new AsmEnablerService(core.ɵɵinject(common.Location), core.ɵɵinject(core$1.WindowRef), core.ɵɵinject(core.ComponentFactoryResolver), core.ɵɵinject(OutletService)); }, token: AsmEnablerService, providedIn: "root" });
        return AsmEnablerService;
    }());
    if (false) {
        /**
         * indicates whether the ASM UI has been added already
         * @type {?}
         * @private
         */
        AsmEnablerService.prototype.isUiAdded;
        /**
         * @type {?}
         * @protected
         */
        AsmEnablerService.prototype.location;
        /**
         * @type {?}
         * @protected
         */
        AsmEnablerService.prototype.winRef;
        /**
         * @type {?}
         * @protected
         */
        AsmEnablerService.prototype.componentFactoryResolver;
        /**
         * @type {?}
         * @protected
         */
        AsmEnablerService.prototype.outletService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * The ASM loader module takes care of loading the ASM UI
     * only in case there's a reason to do so.
     */
    var AsmLoaderModule = /** @class */ (function () {
        function AsmLoaderModule() {
        }
        AsmLoaderModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, PageComponentModule],
                        providers: [
                            {
                                provide: core.APP_INITIALIZER,
                                useFactory: asmFactory,
                                deps: [AsmEnablerService],
                                multi: true,
                            },
                        ],
                    },] }
        ];
        return AsmLoaderModule;
    }());
    /**
     *
     * We do not like to block the UI, which is why we delgate loading of ASM
     * to a real component; the router and state aren't available in an optimized
     * way during the APP_INITIALIZER.
     * @param {?} asmEnablerService
     * @return {?}
     */
    function asmFactory(asmEnablerService) {
        /** @type {?} */
        var isReady = (/**
         * @return {?}
         */
        function () {
            asmEnablerService.load();
        });
        return isReady;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AsmSessionTimerComponent = /** @class */ (function () {
        function AsmSessionTimerComponent(config, asmComponentService, authService, routingService, changeDetectorRef) {
            this.config = config;
            this.asmComponentService = asmComponentService;
            this.authService = authService;
            this.routingService = routingService;
            this.changeDetectorRef = changeDetectorRef;
            this.subscriptions = new rxjs.Subscription();
            this.maxStartDelayInSeconds = 60000;
        }
        /**
         * @return {?}
         */
        AsmSessionTimerComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.timeLeft = this.getTimerStartDelayInSeconds();
            this.interval = setInterval((/**
             * @return {?}
             */
            function () {
                if (_this.timeLeft > 0) {
                    _this.timeLeft--;
                }
                else {
                    clearInterval(_this.interval);
                    _this.asmComponentService.logoutCustomerSupportAgentAndCustomer();
                }
                _this.changeDetectorRef.markForCheck();
            }), 1000);
            this.resetOnNavigate();
            this.resetOnCustomerSessionChange();
        };
        /**
         * @private
         * @return {?}
         */
        AsmSessionTimerComponent.prototype.resetOnNavigate = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscriptions.add(this.routingService.isNavigating().subscribe((/**
             * @param {?} isNavigating
             * @return {?}
             */
            function (isNavigating) {
                if (isNavigating) {
                    _this.resetTimer();
                }
            })));
        };
        /**
         * @private
         * @return {?}
         */
        AsmSessionTimerComponent.prototype.resetOnCustomerSessionChange = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscriptions.add(this.authService
                .getOccUserId()
                .pipe(operators.distinctUntilChanged())
                .subscribe((/**
             * @param {?} _
             * @return {?}
             */
            function (_) { return _this.resetTimer(); })));
        };
        /**
         * @return {?}
         */
        AsmSessionTimerComponent.prototype.resetTimer = /**
         * @return {?}
         */
        function () {
            if (this.timeLeft > 0) {
                this.timeLeft = this.getTimerStartDelayInSeconds();
            }
        };
        /**
         * @private
         * @return {?}
         */
        AsmSessionTimerComponent.prototype.getTimerStartDelayInSeconds = /**
         * @private
         * @return {?}
         */
        function () {
            if (this.config.asm.agentSessionTimer.startingDelayInSeconds >
                this.maxStartDelayInSeconds) {
                return this.maxStartDelayInSeconds;
            }
            else {
                return this.config.asm.agentSessionTimer.startingDelayInSeconds;
            }
        };
        /**
         * @return {?}
         */
        AsmSessionTimerComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscriptions.unsubscribe();
            if (this.interval) {
                clearInterval(this.interval);
            }
        };
        AsmSessionTimerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-asm-session-timer',
                        template: "<span class=\"label\">{{ 'asm.agentSessionTimer.label' | cxTranslate }}:</span>\n<span class=\"time\"\n  >{{ timeLeft | formatTimer }}\n  {{ 'asm.agentSessionTimer.minutes' | cxTranslate }}</span\n>\n<a\n  class=\"reset\"\n  title=\"{{ 'asm.agentSessionTimer.reset' | cxTranslate }}\"\n  (click)=\"resetTimer()\"\n>\n</a>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: ["cx-asm-session-timer{display:flex;align-items:center;height:16px;margin:0 15px}cx-asm-session-timer .label{margin:0 6px}@media (max-width:575px){cx-asm-session-timer .label{display:none}}cx-asm-session-timer .time{font-weight:600}cx-asm-session-timer .reset{margin:0 15px;cursor:pointer;width:16px;height:16px;background:url(\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23d1e3ff' d='M14.9,7.5l-1,0.2c0.2,0.9,0.1,1.7-0.1,2.5c-0.3,1-0.8,2-1.5,2.7c-1.1,1.1-2.7,1.8-4.2,1.8 c-0.8,0-1.5-0.1-2.3-0.4c-1.5-0.6-2.7-1.8-3.3-3.3C2.1,10.2,2,9.5,2,8.7c0-1.6,0.7-3.1,1.8-4.3c0.7-0.8,1.7-1.3,2.7-1.5 c1-0.3,2-0.2,3,0l0,0v-1c-1-0.2-2.1-0.2-3.1,0C4.2,2.4,2.4,4,1.5,6.1C1.2,6.9,1,7.8,1,8.7c0,0.9,0.2,1.8,0.5,2.6 c0.4,0.9,0.9,1.7,1.5,2.3c0.7,0.7,1.4,1.2,2.3,1.5c0.8,0.3,1.7,0.5,2.6,0.5c0.9,0,1.8-0.2,2.6-0.5c2.1-0.9,3.7-2.7,4.2-5 C15,9.3,15,8.4,14.9,7.5z'/%3E%3Cpolygon fill='%23d1e3ff' points='11.5,2.8 9.2,4.5 9.7,0.5 '/%3E%3C/svg%3E%0A\") center center no-repeat}"]
                    }] }
        ];
        /** @nocollapse */
        AsmSessionTimerComponent.ctorParameters = function () { return [
            { type: core$1.AsmConfig },
            { type: AsmComponentService },
            { type: core$1.AuthService },
            { type: core$1.RoutingService },
            { type: core.ChangeDetectorRef }
        ]; };
        return AsmSessionTimerComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.subscriptions;
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.interval;
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.maxStartDelayInSeconds;
        /** @type {?} */
        AsmSessionTimerComponent.prototype.timeLeft;
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.config;
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.asmComponentService;
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.authService;
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        AsmSessionTimerComponent.prototype.changeDetectorRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FormatTimerPipe = /** @class */ (function () {
        function FormatTimerPipe() {
        }
        /**
         * @param {?} totalSeconds
         * @return {?}
         */
        FormatTimerPipe.prototype.transform = /**
         * @param {?} totalSeconds
         * @return {?}
         */
        function (totalSeconds) {
            if (totalSeconds < 0) {
                totalSeconds = 0;
            }
            /** @type {?} */
            var minutes = Math.floor(totalSeconds / 60);
            /** @type {?} */
            var seconds = totalSeconds % 60;
            /** @type {?} */
            var zeroPaddedMinutes;
            if (minutes < 10) {
                zeroPaddedMinutes = ('00' + minutes).slice(-2);
            }
            else {
                zeroPaddedMinutes = minutes + '';
            }
            /** @type {?} */
            var zeroPaddedSeconds = ('00' + seconds).slice(-2);
            return zeroPaddedMinutes + ":" + zeroPaddedSeconds;
        };
        FormatTimerPipe.decorators = [
            { type: core.Pipe, args: [{
                        name: 'formatTimer',
                    },] }
        ];
        return FormatTimerPipe;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CSAgentLoginFormComponent = /** @class */ (function () {
        function CSAgentLoginFormComponent(fb) {
            this.fb = fb;
            this.submitClicked = false;
            this.csAgentTokenLoading = false;
            this.submitEvent = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        CSAgentLoginFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.form = this.fb.group({
                userId: ['', [forms.Validators.required]],
                password: ['', [forms.Validators.required]],
            });
        };
        /**
         * @return {?}
         */
        CSAgentLoginFormComponent.prototype.onSubmit = /**
         * @return {?}
         */
        function () {
            this.submitClicked = true;
            if (this.form.invalid) {
                return;
            }
            this.submitEvent.emit({
                userId: this.form.controls.userId.value,
                password: this.form.controls.password.value,
            });
        };
        /**
         * @param {?} formControlName
         * @return {?}
         */
        CSAgentLoginFormComponent.prototype.isNotValid = /**
         * @param {?} formControlName
         * @return {?}
         */
        function (formControlName) {
            return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);
        };
        CSAgentLoginFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-csagent-login-form',
                        template: "<form (submit)=\"onSubmit()\" [formGroup]=\"form\" *ngIf=\"!csAgentTokenLoading\">\n  <label>\n    <input\n      type=\"text\"\n      [class.is-invalid]=\"isNotValid('userId')\"\n      formControlName=\"userId\"\n      placeholder=\"{{ 'asm.loginForm.userId.label' | cxTranslate }}\"\n    />\n    <div class=\"invalid-feedback\" *ngIf=\"isNotValid('userId')\">\n      <span>{{ 'asm.loginForm.userId.required' | cxTranslate }}</span>\n    </div>\n  </label>\n\n  <label>\n    <input\n      type=\"password\"\n      [class.is-invalid]=\"isNotValid('password')\"\n      placeholder=\"{{ 'asm.loginForm.password.label' | cxTranslate }}\"\n      formControlName=\"password\"\n    />\n    <div class=\"invalid-feedback\" *ngIf=\"isNotValid('password')\">\n      <span>{{ 'asm.loginForm.password.required' | cxTranslate }}</span>\n    </div>\n  </label>\n  <button type=\"submit\">\n    {{ 'asm.loginForm.submit' | cxTranslate }}\n  </button>\n</form>\n\n<div\n  *ngIf=\"csAgentTokenLoading\"\n  class=\"spinner\"\n  aria-hidden=\"false\"\n  aria-label=\"Loading\"\n>\n  <div></div>\n  <div></div>\n  <div></div>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: ["cx-csagent-login-form .invalid-feedback{display:block}cx-csagent-login-form form{display:flex;width:100%}@media (max-width:575px){cx-csagent-login-form form{flex-direction:column}cx-csagent-login-form form>*{margin-bottom:12px}}cx-csagent-login-form form label input{width:100%}cx-csagent-login-form button[type=submit]{color:#fff;border-color:#0a6ed1;background-color:#0a6ed1}cx-csagent-login-form button[type=submit]:hover{background-color:#085caf}@media (min-width:575px){cx-csagent-login-form label:nth-child(2){margin:0 8px}}"]
                    }] }
        ];
        /** @nocollapse */
        CSAgentLoginFormComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder }
        ]; };
        CSAgentLoginFormComponent.propDecorators = {
            csAgentTokenLoading: [{ type: core.Input }],
            submitEvent: [{ type: core.Output }]
        };
        return CSAgentLoginFormComponent;
    }());
    if (false) {
        /** @type {?} */
        CSAgentLoginFormComponent.prototype.form;
        /**
         * @type {?}
         * @private
         */
        CSAgentLoginFormComponent.prototype.submitClicked;
        /** @type {?} */
        CSAgentLoginFormComponent.prototype.csAgentTokenLoading;
        /** @type {?} */
        CSAgentLoginFormComponent.prototype.submitEvent;
        /**
         * @type {?}
         * @private
         */
        CSAgentLoginFormComponent.prototype.fb;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CustomerEmulationComponent = /** @class */ (function () {
        function CustomerEmulationComponent(asmComponentService, userService) {
            this.asmComponentService = asmComponentService;
            this.userService = userService;
            this.subscription = new rxjs.Subscription();
        }
        /**
         * @return {?}
         */
        CustomerEmulationComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscription.add(this.userService.get().subscribe((/**
             * @param {?} user
             * @return {?}
             */
            function (user) { return (_this.customer = user); })));
            this.isCustomerEmulationSessionInProgress$ = this.asmComponentService.isCustomerEmulationSessionInProgress();
        };
        /**
         * @return {?}
         */
        CustomerEmulationComponent.prototype.logoutCustomer = /**
         * @return {?}
         */
        function () {
            this.asmComponentService.logoutCustomer();
        };
        /**
         * @return {?}
         */
        CustomerEmulationComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
        };
        CustomerEmulationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-customer-emulation',
                        template: "<ng-container\n  *ngIf=\"\n    isCustomerEmulationSessionInProgress$ | async;\n    else realCustomerSession\n  \"\n>\n  <input\n    formcontrolname=\"customer\"\n    type=\"text\"\n    disabled=\"true\"\n    placeholder=\"{{ customer?.name }}, {{ customer?.uid }}\"\n  />\n  <button (click)=\"logoutCustomer()\">\n    {{ 'asm.endSession' | cxTranslate }}\n  </button>\n</ng-container>\n\n<ng-template #realCustomerSession>\n  <div class=\"asm-alert\" role=\"alert\">\n    {{ 'asm.standardSessionInProgress' | cxTranslate }}\n  </div>\n</ng-template>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        styles: ["cx-customer-emulation{display:flex}@media (max-width:575px){cx-customer-emulation{flex-direction:column}cx-customer-emulation>*{margin-bottom:12px}}cx-customer-emulation button{padding-left:35px;color:#b00;border-color:#b00;background:url(\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23bb0000' d='M14.8,8c0-3.7-3-6.8-6.8-6.8S1.3,4.2,1.3,8s3,6.8,6.8,6.8S14.8,11.7,14.8,8z M2.6,8c0-3,2.4-5.5,5.5-5.5S13.5,5,13.5,8 s-2.4,5.5-5.5,5.5S2.6,11,2.6,8z M10.7,5.8v4.4c0,0.2-0.2,0.4-0.4,0.4H5.9c-0.2,0-0.4-0.2-0.4-0.4V5.8c0-0.2,0.2-0.4,0.4-0.4h4.4 C10.5,5.4,10.7,5.6,10.7,5.8z'/%3E%3C/svg%3E%0A\") 10px center no-repeat}@media (min-width:575px){cx-customer-emulation input{flex:1}cx-customer-emulation button{-webkit-margin-start:8px;margin-inline-start:8px}}cx-customer-emulation button:hover{background:url(\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='white' d='M14.8,8c0-3.7-3-6.8-6.8-6.8S1.3,4.2,1.3,8s3,6.8,6.8,6.8S14.8,11.7,14.8,8z M2.6,8c0-3,2.4-5.5,5.5-5.5S13.5,5,13.5,8 s-2.4,5.5-5.5,5.5S2.6,11,2.6,8z M10.7,5.8v4.4c0,0.2-0.2,0.4-0.4,0.4H5.9c-0.2,0-0.4-0.2-0.4-0.4V5.8c0-0.2,0.2-0.4,0.4-0.4h4.4 C10.5,5.4,10.7,5.6,10.7,5.8z'/%3E%3C/svg%3E%0A\") 10px center no-repeat #b00;color:#fff;fill:#fff}.asm-alert{padding:9px 12px;border-radius:4px;border:1px solid #89919a;background-color:#f4f4f4;color:#32363a;text-align:center;flex:1}"]
                    }] }
        ];
        /** @nocollapse */
        CustomerEmulationComponent.ctorParameters = function () { return [
            { type: AsmComponentService },
            { type: core$1.UserService }
        ]; };
        return CustomerEmulationComponent;
    }());
    if (false) {
        /** @type {?} */
        CustomerEmulationComponent.prototype.customer;
        /** @type {?} */
        CustomerEmulationComponent.prototype.isCustomerEmulationSessionInProgress$;
        /**
         * @type {?}
         * @private
         */
        CustomerEmulationComponent.prototype.subscription;
        /**
         * @type {?}
         * @protected
         */
        CustomerEmulationComponent.prototype.asmComponentService;
        /**
         * @type {?}
         * @protected
         */
        CustomerEmulationComponent.prototype.userService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CustomerSelectionComponent = /** @class */ (function () {
        function CustomerSelectionComponent(fb, asmService, config) {
            this.fb = fb;
            this.asmService = asmService;
            this.config = config;
            this.subscription = new rxjs.Subscription();
            this.submitEvent = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        CustomerSelectionComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.form = this.fb.group({
                searchTerm: [''],
            });
            this.asmService.customerSearchReset();
            this.searchResultsLoading$ = this.asmService.getCustomerSearchResultsLoading();
            this.searchResults = this.asmService.getCustomerSearchResults();
            this.subscription.add(this.form.controls.searchTerm.valueChanges
                .pipe(operators.debounceTime(300))
                .subscribe((/**
             * @param {?} searchTermValue
             * @return {?}
             */
            function (searchTermValue) {
                _this.handleSearchTerm(searchTermValue);
            })));
        };
        /**
         * @private
         * @param {?} searchTermValue
         * @return {?}
         */
        CustomerSelectionComponent.prototype.handleSearchTerm = /**
         * @private
         * @param {?} searchTermValue
         * @return {?}
         */
        function (searchTermValue) {
            if (Boolean(this.selectedCustomer) &&
                searchTermValue !== this.selectedCustomer.name) {
                this.selectedCustomer = undefined;
            }
            if (Boolean(this.selectedCustomer)) {
                return;
            }
            this.asmService.customerSearchReset();
            if (searchTermValue.trim().length >= 3) {
                this.asmService.customerSearch({
                    query: searchTermValue,
                    pageSize: this.config.asm.customerSearch.maxResults,
                });
            }
        };
        /**
         * @param {?} customer
         * @return {?}
         */
        CustomerSelectionComponent.prototype.selectCustomerFromList = /**
         * @param {?} customer
         * @return {?}
         */
        function (customer) {
            this.selectedCustomer = customer;
            this.form.controls.searchTerm.setValue(this.selectedCustomer.name);
            this.asmService.customerSearchReset();
        };
        /**
         * @return {?}
         */
        CustomerSelectionComponent.prototype.onSubmit = /**
         * @return {?}
         */
        function () {
            if (Boolean(this.selectedCustomer)) {
                this.submitEvent.emit({ customerId: this.selectedCustomer.customerId });
            }
        };
        /**
         * @param {?} event
         * @return {?}
         */
        CustomerSelectionComponent.prototype.onDocumentClick = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (Boolean(this.resultList)) {
                if (this.resultList.nativeElement.contains(event.target) ||
                    this.searchTerm.nativeElement.contains(event.target)) {
                    return;
                }
                else {
                    this.asmService.customerSearchReset();
                }
            }
        };
        /**
         * @return {?}
         */
        CustomerSelectionComponent.prototype.closeResults = /**
         * @return {?}
         */
        function () {
            this.asmService.customerSearchReset();
        };
        /**
         * @return {?}
         */
        CustomerSelectionComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
            this.asmService.customerSearchReset();
        };
        CustomerSelectionComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-customer-selection',
                        template: "<form (submit)=\"onSubmit()\" [formGroup]=\"form\">\n  <input\n    #searchTerm\n    type=\"text\"\n    formControlName=\"searchTerm\"\n    placeholder=\"{{ 'asm.customerSearch.searchTerm.label' | cxTranslate }}\"\n  />\n  <button type=\"submit\" [disabled]=\"!selectedCustomer\">\n    {{ 'asm.customerSearch.submit' | cxTranslate }}\n  </button>\n</form>\n\n<div *ngIf=\"searchResults | async as results\" class=\"asm-results\" #resultList>\n  <a\n    *ngFor=\"let result of results.entries\"\n    (click)=\"selectCustomerFromList(result)\"\n    ><span class=\"result-name\">{{ result.name }}</span>\n    <span class=\"result-id\">{{ result.uid }}</span></a\n  >\n  <a\n    (click)=\"closeResults()\"\n    *ngIf=\"\n      !(searchResultsLoading$ | async) &&\n      searchTerm.value.length >= 3 &&\n      (!!results.entries && results.entries.length <= 0)\n    \"\n    >{{ 'asm.customerSearch.noMatch' | cxTranslate }}</a\n  >\n</div>\n\n<div class=\"asm-results\" *ngIf=\"searchResultsLoading$ | async\">\n  <div class=\"spinner\" aria-hidden=\"false\" aria-label=\"Loading\">\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>\n</div>\n",
                        encapsulation: core.ViewEncapsulation.None,
                        host: {
                            '(document:click)': 'onDocumentClick($event)',
                        },
                        styles: ["cx-customer-selection button[type=submit]{border-color:#0a7e3e;color:#fff;padding-left:35px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAKtmlDQ1BEaXNwbGF5AABIx62Wd1BT+RbHf/fe9EILICAl9N6lSwk9dOkgKiEJJJQYEoKIDZHFFVwLKiKgrugiRcFGkbUgFiwsgg2sC7IoqOtiwYbKu8Aj7L6Z98ebeWfm3N9nzpzf+Z1z7/3NfAGgApZQmA7LAZAhyBKF+3nSY+Pi6fghAAEYEIE+cGaxxUJGWFgQQG12/ad9uIdmo3bbfKoW+N9MnsMVswGAwlBO4ojZGSifQv0ZWyjKAgCpROO6K7KEU9yOsqIIbRDlO1OcMsMjU5w0w1+ncyLDvQDAoFMRKCyWKAUAijoap2ezU9A6lIUoWwk4fAHKU/26sXksDspHUDbLyFg+xf0oGyX9rU7KP2omSWuyWClSnpll2gjefLEwnbUS/L8tI10ye4YB6hSeyD8cXWXQd9aftjxQyoKkkNBZ5nOm86eZJ/GPmmW22Ct+ljks70Dp3vSQoFlO5vsypXWymJGzzBX7RMyyaHm49KxkkRdjllmiuXMlaVHSOI/LlNbP5UXGzHI2PzpklsVpEYFzOV7SuEgSLu2fK/DznDvXVzp7hvhv8/KZ0r1ZvEh/6eysuf65AsZcTXGstDcO19tnLidKmi/M8pSeJUwPk+Zz0/2kcXF2hHRvFvpDzu0Nk77DVFZA2CwDfxAG6MAGWIEcwAcgi5uTNTWE13LhShE/hZdFZ6C3i0tnCtgWZnQbK2snAKbu6syv8K5/+g5CyoS5WGY+AE7ofUCC52JLFwNwvAEAhdC5mMFn9Mqg3+DsdrZElD0Tw0w9sIAEZIEiUAWaQBcYAXO0O3vgAjyADwgAoSASxIGlgA14IAOIwAqwGqwHhaAYbAO7QDnYDw6CGnAUnAAt4Ay4AK6AG6AH3AUPwQAYBi/BGPgAJiAIwkNUiAapQlqQPmQK2UCOkBvkAwVB4VAclAilQAJIAq2GNkDFUAlUDh2AaqHj0GnoAnQN6oXuQ4PQKPQW+gIjMAVWhDVgA9gSdoQZcCAcCS+BU+BMOBcugLfAZXAVfARuhi/AN+C78AD8Eh5HAEJGlBFtxBxxRLyQUCQeSUZEyFqkCClFqpAGpA3pRG4jA8gr5DMGh6Fh6BhzjAvGHxOFYWMyMWsxmzHlmBpMM+YS5jZmEDOG+Y6lYtWxplhnLBMbi03BrsAWYkux1dgm7GXsXeww9gMOh1PGGeIccP64OFwqbhVuM24vrhHXjuvFDeHG8Xi8Kt4U74oPxbPwWfhC/B78Efx5/C38MP4TgUzQItgQfAnxBAEhn1BKqCOcI9wiPCdMEOWI+kRnYiiRQ1xJ3Eo8RGwj3iQOEydI8iRDkispkpRKWk8qIzWQLpMekd6RyWQdshN5EZlPziOXkY+Rr5IHyZ8pChQTihclgSKhbKEcprRT7lPeUalUA6oHNZ6aRd1CraVepD6hfpKhyVjIMGU4MutkKmSaZW7JvJYlyurLMmSXyubKlsqelL0p+0qOKGcg5yXHklsrVyF3Wq5PblyeJm8tHyqfIb9Zvk7+mvyIAl7BQMFHgaNQoHBQ4aLCEA2h6dK8aGzaBtoh2mXasCJO0VCRqZiqWKx4VLFbcUxJQWmBUrRSjlKF0lmlAWVE2UCZqZyuvFX5hPI95S/zNOYx5nHnbZrXMO/WvI8q81U8VLgqRSqNKndVvqjSVX1U01S3q7aoPlbDqJmoLVJbobZP7bLaq/mK813ms+cXzT8x/4E6rG6iHq6+Sv2gepf6uIamhp+GUGOPxkWNV5rKmh6aqZo7Nc9pjmrRtNy0+Fo7tc5rvaAr0Rn0dHoZ/RJ9TFtd219bon1Au1t7QsdQJ0onX6dR57EuSddRN1l3p26H7piell6w3mq9er0H+kR9R32e/m79Tv2PBoYGMQYbDVoMRgxVDJmGuYb1ho+MqEbuRplGVUZ3jHHGjsZpxnuNe0xgEzsTnkmFyU1T2NTelG+617TXDGvmZCYwqzLrM6eYM8yzzevNBy2ULYIs8i1aLF5b6lnGW2637LT8bmVnlW51yOqhtYJ1gHW+dZv1WxsTG7ZNhc0dW6qtr+0621bbNwtMF3AX7FvQb0ezC7bbaNdh983ewV5k32A/6qDnkOhQ6dDnqOgY5rjZ8aoT1snTaZ3TGafPzvbOWc4nnP9yMXdJc6lzGVlouJC78NDCIVcdV5brAdcBN7pbotvPbgPu2u4s9yr3px66HhyPao/nDGNGKuMI47WnlafIs8nzo5ez1xqvdm/E28+7yLvbR8Enyqfc54mvjm+Kb73vmJ+d3yq/dn+sf6D/dv8+pgaTzaxljgU4BKwJuBRICYwILA98GmQSJApqC4aDA4J3BD8K0Q8RhLSEglBm6I7Qx2GGYZlhvy7CLQpbVLHoWbh1+OrwzghaxLKIuogPkZ6RWyMfRhlFSaI6omWjE6Jroz/GeMeUxAzEWsauib0RpxbHj2uNx8dHx1fHjy/2Wbxr8XCCXUJhwr0lhktyllxbqrY0fenZZbLLWMtOJmITYxLrEr+yQllVrPEkZlJl0hjbi72b/ZLjwdnJGeW6cku4z5Ndk0uSR1JcU3akjPLceaW8V3wvfjn/Tap/6v7Uj2mhaYfTJtNj0hszCBmJGacFCoI0waXlmstzlvcKTYWFwoFM58xdmWOiQFG1GBIvEbdmKaKiqEtiJPlBMpjtll2R/WlF9IqTOfI5gpyulSYrN618nuub+8sqzCr2qo7V2qvXrx5cw1hzYC20NmltxzrddQXrhvP88mrWk9anrf8t3yq/JP/9hpgNbQUaBXkFQz/4/VBfKFMoKuzb6LJx/4+YH/k/dm+y3bRn0/ciTtH1Yqvi0uKvm9mbr/9k/VPZT5Nbkrd0b7Xfum8bbptg273t7ttrSuRLckuGdgTvaN5J31m08/2uZbuulS4o3b+btFuye6AsqKx1j96ebXu+lvPK71Z4VjRWqlduqvy4l7P31j6PfQ37NfYX7//yM//n/gN+B5qrDKpKD+IOZh98dij6UOcvjr/UVqtVF1d/Oyw4PFATXnOp1qG2tk69bms9XC+pHz2ScKTnqPfR1gbzhgONyo3Fx8AxybEXxxOP3zsReKLjpOPJhlP6pyqbaE1FzVDzyuaxFl7LQGtca+/pgNMdbS5tTb9a/Hr4jPaZirNKZ7eeI50rODd5Pvf8eLuw/dWFlAtDHcs6Hl6MvXjn0qJL3ZcDL1+94nvlYiej8/xV16tnrjlfO33d8XrLDfsbzV12XU2/2f3W1G3f3XzT4WZrj1NPW+/C3nO33G9duO19+8od5p0bd0Pu9t6Lutffl9A30M/pH7mffv/Ng+wHEw/zHmEfFT2We1z6RP1J1e/GvzcO2A+cHfQe7Hoa8fThEHvo5R/iP74OFzyjPit9rvW8dsRm5Myo72jPi8Uvhl8KX068KvxT/s/K10avT/3l8VfXWOzY8BvRm8m3m9+pvjv8fsH7jvGw8ScfMj5MfCz6pPqp5rPj584vMV+eT6z4iv9a9s34W9v3wO+PJjMmJ4UsEWtaCiCow8nJALw9DAA1DgBaDwCkxTNaetqgGf0/TeC/8YzenjZ7AA55ABCJ6vkQdN2HukEeqklQD5uKewDY1lbq/zZxsq3NTC1yCypNSicn36GaBW8MwLe+ycmJlsnJb9Vosw8AaP8wo+GnTGcMlfreU9SdM5H3n1r6X/dYEDmGJmdAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGL2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyNSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjI3IiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wOS0yNVQxMjoyODo1MS0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0iRGlzcGxheSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZTIyOTVhMC0yYWY0LTQ2Y2UtOThlNy0zZTU2YTM0YjFkZjUiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozYmMzNWI0YS0wNjkxLTRmNDEtODk5OC1lYWFmOTI2NGQ2NmMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZWE4Y2FhMC0yMGU1LTQzN2ItYmQ5YS03YjlmMGZiNmYyZTYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjZWE4Y2FhMC0yMGU1LTQzN2ItYmQ5YS03YjlmMGZiNmYyZTYiIHN0RXZ0OndoZW49IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowZTIyOTVhMC0yYWY0LTQ2Y2UtOThlNy0zZTU2YTM0YjFkZjUiIHN0RXZ0OndoZW49IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuzZx/kAAAEoSURBVDjLY/z//z8DNQATA5UAhkGNe+f8f/757f+09e2kORXkNWR86P75/zCw7cax/6o9If/R1WDDOA368/cvmH7/7dP/tHXt/8k2KGlNy/8dN4/DXbf95rH/anhch9Mgz/kFYE3p6zv+f/j+GSwGokF8sgwCYZBLQC6CAZBL0V1HlEEwnLquDRxmMNfFrmyAqyEpHd1+85jh5Zd3YDYfOzeDlrgi4ehHdpFYi8f/KcdW///7DxKTQAP/e8zLJ81rfgtL/j949wws9vvvn/+9h5f9F212/090YEetqP2/+Nx2eABfeHbrv/WMNNKj/8fvX2D6+++f/+t3z/ov2Ojyn6wECQJHHlz8bzgplrws0rBn9v9XX97/L9zS/5+vwYkoQ0CYcdCVRwBmUrSjUTYI3gAAAABJRU5ErkJggg==) 10px center no-repeat #0a7e3e}cx-customer-selection form{display:flex;width:100%}@media (min-width:575px){cx-customer-selection button[type=submit]{-webkit-margin-start:8px;margin-inline-start:8px}cx-customer-selection form input{flex:1}}@media (max-width:575px){cx-customer-selection form{flex-direction:column}cx-customer-selection form>*{margin-bottom:12px}}cx-customer-selection .spinner{height:42px;align-items:center}cx-customer-selection .asm-results{width:calc(100vw - 4rem);border:1px solid #89919a;position:absolute;z-index:11;margin-top:40px;box-shadow:0 5px 20px 0 #d9d9d9,0 2px 8px 0 #ededed;background-color:#fff;border-radius:4px;min-height:50px}cx-customer-selection .asm-results a{color:#51555a;display:flex;flex-direction:column;cursor:pointer;padding:10px}@media (min-width:767px){cx-customer-selection .asm-results,cx-customer-selection form{width:50vw}cx-customer-selection .asm-results a{flex-direction:row}}cx-customer-selection .asm-results a *{flex:1}cx-customer-selection .asm-results a:hover{color:#32363a;background-color:#fafafa}"]
                    }] }
        ];
        /** @nocollapse */
        CustomerSelectionComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder },
            { type: core$1.AsmService },
            { type: core$1.AsmConfig }
        ]; };
        CustomerSelectionComponent.propDecorators = {
            submitEvent: [{ type: core.Output }],
            resultList: [{ type: core.ViewChild, args: ['resultList', { static: false },] }],
            searchTerm: [{ type: core.ViewChild, args: ['searchTerm', { static: false },] }]
        };
        return CustomerSelectionComponent;
    }());
    if (false) {
        /** @type {?} */
        CustomerSelectionComponent.prototype.form;
        /**
         * @type {?}
         * @private
         */
        CustomerSelectionComponent.prototype.subscription;
        /** @type {?} */
        CustomerSelectionComponent.prototype.searchResultsLoading$;
        /** @type {?} */
        CustomerSelectionComponent.prototype.searchResults;
        /** @type {?} */
        CustomerSelectionComponent.prototype.selectedCustomer;
        /** @type {?} */
        CustomerSelectionComponent.prototype.submitEvent;
        /** @type {?} */
        CustomerSelectionComponent.prototype.resultList;
        /** @type {?} */
        CustomerSelectionComponent.prototype.searchTerm;
        /**
         * @type {?}
         * @private
         */
        CustomerSelectionComponent.prototype.fb;
        /**
         * @type {?}
         * @private
         */
        CustomerSelectionComponent.prototype.asmService;
        /**
         * @type {?}
         * @private
         */
        CustomerSelectionComponent.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AsmModule = /** @class */ (function () {
        function AsmModule() {
        }
        AsmModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            core$1.I18nModule,
                            core$1.AsmModule.forRoot(),
                            AsmLoaderModule,
                        ],
                        declarations: [
                            AsmMainUiComponent,
                            CSAgentLoginFormComponent,
                            CustomerSelectionComponent,
                            AsmSessionTimerComponent,
                            FormatTimerPipe,
                            CustomerEmulationComponent,
                        ],
                        entryComponents: [AsmMainUiComponent],
                    },] }
        ];
        return AsmModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddedToCartDialogComponent = /** @class */ (function () {
        function AddedToCartDialogComponent(modalService, cartService, fb, promotionService) {
            this.modalService = modalService;
            this.cartService = cartService;
            this.fb = fb;
            this.promotionService = promotionService;
            this.iconTypes = ICON_TYPE;
            this.promotionLocation = core$1.PromotionLocation.ActiveCart;
            this.quantity = 0;
            this.modalIsOpen = false;
            this.form = this.fb.group({});
        }
        /**
         * @return {?}
         */
        AddedToCartDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.entry$ = this.entry$.pipe(operators.tap((/**
             * @param {?} entry
             * @return {?}
             */
            function (entry) {
                if (entry) {
                    var code = entry.product.code;
                    if (!_this.form.controls[code]) {
                        _this.form.setControl(code, _this.createEntryFormGroup(entry));
                    }
                    else {
                        /** @type {?} */
                        var entryForm = (/** @type {?} */ (_this.form.controls[code]));
                        entryForm.controls.quantity.setValue(entry.quantity);
                    }
                    _this.form.markAsPristine();
                    if (!_this.modalIsOpen) {
                        _this.modalIsOpen = true;
                    }
                }
            })));
            this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);
        };
        /**
         * @param {?=} reason
         * @return {?}
         */
        AddedToCartDialogComponent.prototype.dismissModal = /**
         * @param {?=} reason
         * @return {?}
         */
        function (reason) {
            this.modalService.dismissActiveModal(reason);
        };
        /**
         * @param {?} item
         * @return {?}
         */
        AddedToCartDialogComponent.prototype.removeEntry = /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            this.cartService.removeEntry(item);
            delete this.form.controls[item.product.code];
            this.dismissModal('Removed');
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        AddedToCartDialogComponent.prototype.updateEntry = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var item = _a.item, updatedQuantity = _a.updatedQuantity;
            this.cartService.updateEntry(item.entryNumber, updatedQuantity);
        };
        /**
         * @private
         * @param {?} entry
         * @return {?}
         */
        AddedToCartDialogComponent.prototype.createEntryFormGroup = /**
         * @private
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            return this.fb.group({
                entryNumber: entry.entryNumber,
                quantity: entry.quantity,
            });
        };
        AddedToCartDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-added-to-cart-dialog',
                        template: "<div #dialog>\n  <!-- Modal Header -->\n  <ng-container *ngIf=\"(loaded$ | async) || modalIsOpen; else loading\">\n    <div class=\"cx-dialog-header modal-header\">\n      <div class=\"cx-dialog-title modal-title\">\n        {{\n          (increment\n            ? 'addToCart.itemsIncrementedInYourCart'\n            : 'addToCart.itemsAddedToYourCart') | cxTranslate\n        }}\n      </div>\n      <button\n        type=\"button\"\n        class=\"close\"\n        aria-label=\"Close\"\n        (click)=\"dismissModal('Cross click')\"\n      >\n        <span aria-hidden=\"true\">\n          <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n        </span>\n      </button>\n    </div>\n    <!-- Modal Body -->\n    <div class=\"cx-dialog-body modal-body\" *ngIf=\"entry$ | async as entry\">\n      <div class=\"cx-dialog-row\">\n        <div class=\"cx-dialog-item col-sm-12 col-md-6\">\n          <cx-cart-item\n            [item]=\"entry\"\n            [compact]=\"true\"\n            [isReadOnly]=\"false\"\n            [parent]=\"form.controls[entry.product.code]\"\n            [cartIsLoading]=\"form.dirty\"\n            [promotionLocation]=\"promotionLocation\"\n            (remove)=\"removeEntry($event)\"\n            (update)=\"updateEntry($event)\"\n            (view)=\"dismissModal('Product selected')\"\n          ></cx-cart-item>\n        </div>\n        <!-- Separator -->\n        <div\n          class=\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\"\n        ></div>\n        <!-- Total container -->\n        <div class=\"cx-dialog-actions col-sm-12 col-md-6\">\n          <div class=\"cx-dialog-total\" *ngIf=\"cart$ | async as cart\">\n            <div>\n              {{\n                'cartItems.cartTotal'\n                  | cxTranslate: { count: cart.deliveryItemsQuantity }\n              }}\n            </div>\n\n            <div>{{ cart.subTotal?.formattedValue }}</div>\n          </div>\n\n          <!-- Promotions -->\n          <ng-container *cxFeatureLevel=\"'1.5'\">\n            <div\n              class=\"cx-dialog-promotions\"\n              *ngIf=\"orderPromotions$ | async as orderPromotions\"\n            >\n              <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\n            </div>\n          </ng-container>\n\n          <!-- Actions -->\n          <div class=\"cx-dialog-buttons\">\n            <a\n              [class.disabled]=\"form.dirty\"\n              [routerLink]=\"{ cxRoute: 'cart' } | cxUrl\"\n              class=\"btn btn-primary\"\n              cxAutoFocus\n              (click)=\"!form.dirty && dismissModal('View Cart click')\"\n              >{{ 'addToCart.viewCart' | cxTranslate }}</a\n            >\n            <a\n              [class.disabled]=\"form.dirty\"\n              [routerLink]=\"{ cxRoute: 'checkout' } | cxUrl\"\n              class=\"btn btn-secondary\"\n              (click)=\"!form.dirty && dismissModal('Proceed To Checkout click')\"\n              >{{ 'addToCart.proceedToCheckout' | cxTranslate }}</a\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-template #loading>\n    <div class=\"cx-dialog-header modal-header\">\n      <div class=\"cx-dialog-title modal-title\">\n        {{ 'addToCart.updatingCart' | cxTranslate }}\n      </div>\n      <button\n        type=\"button\"\n        class=\"close\"\n        aria-label=\"Close\"\n        (click)=\"dismissModal('Cross click')\"\n      >\n        <span aria-hidden=\"true\">\n          <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n        </span>\n      </button>\n    </div>\n    <!-- Modal Body -->\n    <div class=\"cx-dialog-body modal-body\">\n      <div class=\"cx-dialog-row\">\n        <div class=\"col-sm-12\"><cx-spinner></cx-spinner></div>\n      </div>\n    </div>\n  </ng-template>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        AddedToCartDialogComponent.ctorParameters = function () { return [
            { type: ModalService },
            { type: core$1.CartService },
            { type: forms.FormBuilder },
            { type: PromotionService }
        ]; };
        AddedToCartDialogComponent.propDecorators = {
            dialog: [{ type: core.ViewChild, args: ['dialog', { static: false, read: core.ElementRef },] }]
        };
        return AddedToCartDialogComponent;
    }());
    if (false) {
        /** @type {?} */
        AddedToCartDialogComponent.prototype.iconTypes;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.entry$;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.cart$;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.loaded$;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.increment;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.orderPromotions$;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.promotionLocation;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.quantity;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.modalIsOpen;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.dialog;
        /** @type {?} */
        AddedToCartDialogComponent.prototype.form;
        /**
         * @type {?}
         * @protected
         */
        AddedToCartDialogComponent.prototype.modalService;
        /**
         * @type {?}
         * @protected
         */
        AddedToCartDialogComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        AddedToCartDialogComponent.prototype.fb;
        /**
         * @type {?}
         * @protected
         */
        AddedToCartDialogComponent.prototype.promotionService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddToCartComponent = /** @class */ (function () {
        function AddToCartComponent(cartService, modalService, currentProductService, cd) {
            this.cartService = cartService;
            this.modalService = modalService;
            this.currentProductService = currentProductService;
            this.cd = cd;
            this.showQuantity = true;
            this.hasStock = false;
            this.quantity = 1;
            this.increment = false;
        }
        /**
         * @return {?}
         */
        AddToCartComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (this.product) {
                this.productCode = this.product.code;
                this.cartEntry$ = this.cartService.getEntry(this.productCode);
                this.setStockInfo(this.product);
                this.cd.markForCheck();
            }
            else if (this.productCode) {
                this.cartEntry$ = this.cartService.getEntry(this.productCode);
                // force hasStock and quantity for the time being, as we do not have more info:
                this.quantity = 1;
                this.hasStock = true;
                this.cd.markForCheck();
            }
            else {
                this.subscription = this.currentProductService
                    .getProduct()
                    .pipe(operators.filter(Boolean))
                    .subscribe((/**
                 * @param {?} product
                 * @return {?}
                 */
                function (product) {
                    _this.productCode = product.code;
                    _this.setStockInfo(product);
                    _this.cartEntry$ = _this.cartService.getEntry(_this.productCode);
                    _this.cd.markForCheck();
                }));
            }
        };
        /**
         * @private
         * @param {?} product
         * @return {?}
         */
        AddToCartComponent.prototype.setStockInfo = /**
         * @private
         * @param {?} product
         * @return {?}
         */
        function (product) {
            this.quantity = 1;
            this.hasStock =
                product.stock && product.stock.stockLevelStatus !== 'outOfStock';
            if (this.hasStock && product.stock.stockLevel) {
                this.maxQuantity = product.stock.stockLevel;
            }
        };
        /**
         * @param {?} value
         * @return {?}
         */
        AddToCartComponent.prototype.updateCount = /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this.quantity = value;
        };
        /**
         * @return {?}
         */
        AddToCartComponent.prototype.addToCart = /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (!this.productCode || this.quantity <= 0) {
                return;
            }
            // check item is already present in the cart
            // so modal will have proper header text displayed
            this.cartService
                .getEntry(this.productCode)
                .subscribe((/**
             * @param {?} entry
             * @return {?}
             */
            function (entry) {
                if (entry) {
                    _this.increment = true;
                }
                _this.openModal();
                _this.cartService.addEntry(_this.productCode, _this.quantity);
                _this.increment = false;
            }))
                .unsubscribe();
        };
        /**
         * @private
         * @return {?}
         */
        AddToCartComponent.prototype.openModal = /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var modalInstance;
            this.modalRef = this.modalService.open(AddedToCartDialogComponent, {
                centered: true,
                size: 'lg',
            });
            modalInstance = this.modalRef.componentInstance;
            modalInstance.entry$ = this.cartEntry$;
            modalInstance.cart$ = this.cartService.getActive();
            modalInstance.loaded$ = this.cartService.getLoaded();
            modalInstance.quantity = this.quantity;
            modalInstance.increment = this.increment;
        };
        /**
         * @return {?}
         */
        AddToCartComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        AddToCartComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-add-to-cart',
                        template: "<div class=\"quantity\" *ngIf=\"productCode && showQuantity\">\n  <label>{{ 'addToCart.quantity' | cxTranslate }}</label>\n  <cx-item-counter\n    [value]=\"quantity\"\n    isValueChangeable=\"true\"\n    [min]=\"1\"\n    [max]=\"maxQuantity || null\"\n    *ngIf=\"hasStock\"\n    (update)=\"updateCount($event)\"\n  ></cx-item-counter>\n  <span class=\"info\">{{\n    hasStock\n      ? ('addToCart.inStock' | cxTranslate)\n      : ('addToCart.outOfStock' | cxTranslate)\n  }}</span>\n</div>\n<button\n  *ngIf=\"hasStock\"\n  class=\"btn btn-primary btn-block\"\n  type=\"button\"\n  [disabled]=\"quantity <= 0 || quantity > maxQuantity\"\n  (click)=\"addToCart()\"\n>\n  {{ 'addToCart.addToCart' | cxTranslate }}\n</button>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        AddToCartComponent.ctorParameters = function () { return [
            { type: core$1.CartService },
            { type: ModalService },
            { type: CurrentProductService },
            { type: core.ChangeDetectorRef }
        ]; };
        AddToCartComponent.propDecorators = {
            productCode: [{ type: core.Input }],
            showQuantity: [{ type: core.Input }],
            product: [{ type: core.Input }]
        };
        return AddToCartComponent;
    }());
    if (false) {
        /** @type {?} */
        AddToCartComponent.prototype.productCode;
        /** @type {?} */
        AddToCartComponent.prototype.showQuantity;
        /**
         * As long as we do not support #5026, we require product input, as we need
         *  a reference to the product model to fetch the stock data.
         * @type {?}
         */
        AddToCartComponent.prototype.product;
        /** @type {?} */
        AddToCartComponent.prototype.maxQuantity;
        /** @type {?} */
        AddToCartComponent.prototype.modalRef;
        /** @type {?} */
        AddToCartComponent.prototype.hasStock;
        /** @type {?} */
        AddToCartComponent.prototype.quantity;
        /** @type {?} */
        AddToCartComponent.prototype.increment;
        /** @type {?} */
        AddToCartComponent.prototype.cartEntry$;
        /** @type {?} */
        AddToCartComponent.prototype.subscription;
        /**
         * @type {?}
         * @protected
         */
        AddToCartComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        AddToCartComponent.prototype.modalService;
        /**
         * @type {?}
         * @protected
         */
        AddToCartComponent.prototype.currentProductService;
        /**
         * @type {?}
         * @private
         */
        AddToCartComponent.prototype.cd;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PromotionsComponent = /** @class */ (function () {
        function PromotionsComponent() {
        }
        PromotionsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-promotions',
                        template: "<div class=\"cx-promotions\" *ngIf=\"promotions\">\n  <ng-container *cxFeatureLevel=\"'!1.4'\">\n    <strong *ngFor=\"let promotion of promotions\">\n      <li>{{ promotion.description }}</li>\n    </strong>\n  </ng-container>\n\n  <ng-container *cxFeatureLevel=\"'1.4'\">\n    <ul *ngFor=\"let promotion of promotions\">\n      <li>{{ promotion.description }}</li>\n    </ul>\n  </ng-container>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        PromotionsComponent.ctorParameters = function () { return []; };
        PromotionsComponent.propDecorators = {
            promotions: [{ type: core.Input }]
        };
        return PromotionsComponent;
    }());
    if (false) {
        /** @type {?} */
        PromotionsComponent.prototype.promotions;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PromotionsModule = /** @class */ (function () {
        function PromotionsModule() {
        }
        PromotionsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, core$1.FeaturesConfigModule],
                        declarations: [PromotionsComponent],
                        exports: [PromotionsComponent],
                    },] }
        ];
        return PromotionsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AppliedCouponsComponent = /** @class */ (function () {
        function AppliedCouponsComponent(cartVoucherService) {
            this.cartVoucherService = cartVoucherService;
            this.cartIsLoading = false;
            this.isReadOnly = false;
            this.iconTypes = ICON_TYPE;
        }
        Object.defineProperty(AppliedCouponsComponent.prototype, "sortedVouchers", {
            get: /**
             * @return {?}
             */
            function () {
                this.vouchers = this.vouchers || [];
                return this.vouchers.slice().sort((/**
                 * @param {?} a
                 * @param {?} b
                 * @return {?}
                 */
                function (a, b) {
                    return a.code.localeCompare(b.code);
                }));
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} voucherId
         * @return {?}
         */
        AppliedCouponsComponent.prototype.removeVoucher = /**
         * @param {?} voucherId
         * @return {?}
         */
        function (voucherId) {
            this.cartVoucherService.removeVoucher(voucherId);
        };
        AppliedCouponsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-applied-coupons',
                        template: "<div *ngIf=\"isReadOnly; else editableCoupons\">\r\n  <div *ngIf=\"sortedVouchers.length > 0\">\r\n    <div class=\"cx-applied-coupon-title\">\r\n      {{ 'voucher.vouchersApplied' | cxTranslate }}\r\n    </div>\r\n  </div>\r\n  <div\r\n    *ngFor=\"let voucher of sortedVouchers\"\r\n    class=\"coupon-summary cx-coupon-card textonly\"\r\n    role=\"filter\"\r\n  >\r\n    <span class=\"cx-applied-coupon-code\">{{ voucher.voucherCode }}</span>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #editableCoupons>\r\n  <div class=\"row\">\r\n    <div\r\n      *ngFor=\"let voucher of sortedVouchers\"\r\n      class=\"col-sm-12 col-md-6 col-lg-12 cx-coupon-card-grid\"\r\n      role=\"filter\"\r\n    >\r\n      <div class=\"cx-coupon-apply cx-coupon-card cx-coupon-list-wrap\">\r\n        <span class=\"cx-cart-coupon-code\">{{ voucher.voucherCode }}</span>\r\n        <button\r\n          type=\"button\"\r\n          class=\"close\"\r\n          aria-label=\"Close\"\r\n          (click)=\"removeVoucher(voucher.voucherCode)\"\r\n          [disabled]=\"cartIsLoading\"\r\n          [class.disabled]=\"cartIsLoading\"\r\n        >\r\n          <span aria-hidden=\"true\">\r\n            <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\r\n          </span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        AppliedCouponsComponent.ctorParameters = function () { return [
            { type: core$1.CartVoucherService }
        ]; };
        AppliedCouponsComponent.propDecorators = {
            vouchers: [{ type: core.Input }],
            cartIsLoading: [{ type: core.Input }],
            isReadOnly: [{ type: core.Input }]
        };
        return AppliedCouponsComponent;
    }());
    if (false) {
        /** @type {?} */
        AppliedCouponsComponent.prototype.vouchers;
        /** @type {?} */
        AppliedCouponsComponent.prototype.cartIsLoading;
        /** @type {?} */
        AppliedCouponsComponent.prototype.isReadOnly;
        /** @type {?} */
        AppliedCouponsComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @private
         */
        AppliedCouponsComponent.prototype.cartVoucherService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartCouponComponent = /** @class */ (function () {
        function CartCouponComponent(cartService, authService, cartVoucherService, formBuilder, customerCouponService, featureConfig) {
            this.cartService = cartService;
            this.authService = authService;
            this.cartVoucherService = cartVoucherService;
            this.formBuilder = formBuilder;
            this.customerCouponService = customerCouponService;
            this.featureConfig = featureConfig;
            this.MAX_CUSTOMER_COUPON_PAGE = 100;
            this.ignoreCloseEvent = false;
            this.subscription = new Subscription.Subscription();
            this.couponBoxIsActive = false;
        }
        /**
         * @return {?}
         */
        CartCouponComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (this.customerCouponService) {
                this.customerCouponService.loadCustomerCoupons(this.MAX_CUSTOMER_COUPON_PAGE);
            }
            if (this.featureConfig && this.featureConfig.isLevel('1.5')) {
                this.cart$ = rxjs.combineLatest([
                    this.cartService.getActive(),
                    this.authService.getOccUserId(),
                    this.customerCouponService.getCustomerCoupons(this.MAX_CUSTOMER_COUPON_PAGE),
                ]).pipe(operators.tap((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 3), cart = _b[0], userId = _b[1], customerCoupons = _b[2];
                    _this.cartId =
                        userId === core$1.OCC_USER_ID_ANONYMOUS ? cart.guid : cart.code;
                    _this.getApplicableCustomerCoupons(cart, customerCoupons.coupons);
                })), operators.map((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 1), cart = _b[0];
                    return cart;
                })));
            }
            //TODO(issue:#5971) Deprecated since 1.5
            else {
                this.cart$ = rxjs.combineLatest([
                    this.cartService.getActive(),
                    this.authService.getOccUserId(),
                ]).pipe(operators.tap((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 2), cart = _b[0], userId = _b[1];
                    return (_this.cartId =
                        userId === core$1.OCC_USER_ID_ANONYMOUS ? cart.guid : cart.code);
                })), operators.map((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 1), cart = _b[0];
                    return cart;
                })));
            }
            //TODO(issue:#5971) Deprecated since 1.5
            this.cartIsLoading$ = this.cartService
                .getLoaded()
                .pipe(operators.map((/**
             * @param {?} loaded
             * @return {?}
             */
            function (loaded) { return !loaded; })));
            this.cartVoucherService.resetAddVoucherProcessingState();
            this.form = this.formBuilder.group({
                couponCode: ['', [forms.Validators.required]],
            });
            this.submitDisabled$ = rxjs.combineLatest([
                this.cartIsLoading$,
                this.form.valueChanges.pipe(operators.startWith(true), operators.map((/**
                 * @return {?}
                 */
                function () { return _this.form.valid; }))),
                this.cartVoucherService.getAddVoucherResultLoading(),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 3), cartIsLoading = _b[0], btnEnabled = _b[1], addVoucherIsLoading = _b[2];
                return cartIsLoading || !btnEnabled || addVoucherIsLoading;
            })));
            this.subscription.add(this.cartVoucherService
                .getAddVoucherResultSuccess()
                .subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) {
                _this.onSuccess(success);
            })));
            this.subscription.add(this.cartVoucherService.getAddVoucherResultError().subscribe((/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.onError(error);
            })));
        };
        /**
         * @protected
         * @param {?} error
         * @return {?}
         */
        CartCouponComponent.prototype.onError = /**
         * @protected
         * @param {?} error
         * @return {?}
         */
        function (error) {
            if (error) {
                this.customerCouponService.loadCustomerCoupons(this.MAX_CUSTOMER_COUPON_PAGE);
                this.cartVoucherService.resetAddVoucherProcessingState();
            }
        };
        /**
         * @param {?} success
         * @return {?}
         */
        CartCouponComponent.prototype.onSuccess = /**
         * @param {?} success
         * @return {?}
         */
        function (success) {
            if (success) {
                this.form.reset();
                this.cartVoucherService.resetAddVoucherProcessingState();
            }
        };
        /**
         * @protected
         * @param {?} cart
         * @param {?} coupons
         * @return {?}
         */
        CartCouponComponent.prototype.getApplicableCustomerCoupons = /**
         * @protected
         * @param {?} cart
         * @param {?} coupons
         * @return {?}
         */
        function (cart, coupons) {
            var _this = this;
            this.applicableCoupons = coupons || [];
            if (cart.appliedVouchers) {
                cart.appliedVouchers.forEach((/**
                 * @param {?} appliedVoucher
                 * @return {?}
                 */
                function (appliedVoucher) {
                    _this.applicableCoupons = _this.applicableCoupons.filter((/**
                     * @param {?} coupon
                     * @return {?}
                     */
                    function (coupon) { return coupon.couponId !== appliedVoucher.code; }));
                }));
            }
            this.filteredCoupons = this.applicableCoupons;
        };
        /**
         * @return {?}
         */
        CartCouponComponent.prototype.applyVoucher = /**
         * @return {?}
         */
        function () {
            this.cartVoucherService.addVoucher(this.form.value.couponCode, this.cartId);
        };
        /**
         * @param {?} couponId
         * @return {?}
         */
        CartCouponComponent.prototype.applyCustomerCoupon = /**
         * @param {?} couponId
         * @return {?}
         */
        function (couponId) {
            this.cartVoucherService.addVoucher(couponId, this.cartId);
            this.couponBoxIsActive = false;
        };
        /**
         * @param {?} query
         * @return {?}
         */
        CartCouponComponent.prototype.filter = /**
         * @param {?} query
         * @return {?}
         */
        function (query) {
            /** @type {?} */
            var filterValue = query.toLowerCase();
            this.filteredCoupons = this.applicableCoupons.filter((/**
             * @param {?} coupon
             * @return {?}
             */
            function (coupon) { return coupon.couponId.toLowerCase().indexOf(filterValue) > -1; }));
        };
        /**
         * @return {?}
         */
        CartCouponComponent.prototype.open = /**
         * @return {?}
         */
        function () {
            this.filteredCoupons = this.applicableCoupons;
            if (this.applicableCoupons.length > 0) {
                this.couponBoxIsActive = true;
            }
        };
        /**
         * @param {?} event
         * @return {?}
         */
        CartCouponComponent.prototype.close = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (!this.ignoreCloseEvent) {
                this.couponBoxIsActive = false;
                if (event && event.target) {
                    ((/** @type {?} */ (event.target))).blur();
                }
            }
            this.ignoreCloseEvent = false;
        };
        /**
         * @return {?}
         */
        CartCouponComponent.prototype.disableClose = /**
         * @return {?}
         */
        function () {
            this.ignoreCloseEvent = true;
        };
        /**
         * @return {?}
         */
        CartCouponComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
            this.cartVoucherService.resetAddVoucherProcessingState();
        };
        CartCouponComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-cart-coupon',
                        template: "<ng-container *ngIf=\"cart$ | async as cart\">\n  <div class=\"cx-cart-coupon-title\">\n    {{ 'voucher.coupon' | cxTranslate }}\n  </div>\n  <div class=\"form-group \">\n    <ng-container *cxFeatureLevel=\"'1.5'\">\n      <form (submit)=\"applyVoucher()\" [formGroup]=\"form\" autocomplete=\"off\">\n        <div class=\"row\">\n          <div class=\"col-md-8\">\n            <div class=\"cx-apply-voucher\">\n              <input\n                #couponInput\n                class=\"form-control input-coupon-code\"\n                id=\"applyVoucher\"\n                formControlName=\"couponCode\"\n                [placeholder]=\"'voucher.placeholder' | cxTranslate\"\n                aria-label=\"applyVoucher\"\n                (focus)=\"open()\"\n                (input)=\"filter(couponInput.value)\"\n                (blur)=\"close($event)\"\n                (keydown.escape)=\"close($event)\"\n                autocomplete=\"off\"\n              />\n\n              <div [class.couponbox-is-active]=\"couponBoxIsActive\">\n                <div\n                  *ngIf=\"filteredCoupons && filteredCoupons.length > 0\"\n                  class=\"cx-customer-coupons\"\n                  (click)=\"close($event)\"\n                >\n                  <div class=\"coupons\" (mousedown)=\"disableClose()\">\n                    <a\n                      *ngFor=\"let coupon of filteredCoupons\"\n                      (click)=\"applyCustomerCoupon(coupon.couponId)\"\n                    >\n                      <div class=\"coupon-id\">{{ coupon.couponId }}</div>\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"col-md-4\">\n            <button\n              class=\"btn btn-block btn-action apply-coupon-button\"\n              type=\"submit\"\n              [disabled]=\"submitDisabled$ | async\"\n              [class.disabled]=\"submitDisabled$ | async\"\n            >\n              {{ 'voucher.apply' | cxTranslate }}\n            </button>\n          </div>\n        </div>\n      </form>\n    </ng-container>\n\n    <ng-container *cxFeatureLevel=\"'!1.5'\">\n      <form (submit)=\"applyVoucher()\" [formGroup]=\"form\">\n        <div class=\"row\">\n          <div class=\"col-md-8\">\n            <input\n              type=\"text\"\n              class=\"form-control input-coupon-code\"\n              id=\"applyVoucher\"\n              formControlName=\"couponCode\"\n              placeholder=\"{{ 'voucher.placeholder' | cxTranslate }}\"\n            />\n          </div>\n          <div class=\"col-md-4\">\n            <button\n              class=\"btn btn-block btn-action apply-coupon-button\"\n              type=\"submit\"\n              [disabled]=\"submitDisabled$ | async\"\n              [class.disabled]=\"submitDisabled$ | async\"\n            >\n              {{ 'voucher.apply' | cxTranslate }}\n            </button>\n          </div>\n        </div>\n      </form>\n    </ng-container>\n  </div>\n\n  <cx-applied-coupons\n    [vouchers]=\"cart.appliedVouchers\"\n    [cartIsLoading]=\"cartIsLoading$ | async\"\n    [isReadOnly]=\"false\"\n  >\n  </cx-applied-coupons>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        CartCouponComponent.ctorParameters = function () { return [
            { type: core$1.CartService },
            { type: core$1.AuthService },
            { type: core$1.CartVoucherService },
            { type: forms.FormBuilder },
            { type: core$1.CustomerCouponService },
            { type: core$1.FeatureConfigService }
        ]; };
        return CartCouponComponent;
    }());
    if (false) {
        /** @type {?} */
        CartCouponComponent.prototype.MAX_CUSTOMER_COUPON_PAGE;
        /** @type {?} */
        CartCouponComponent.prototype.form;
        /** @type {?} */
        CartCouponComponent.prototype.cartIsLoading$;
        /** @type {?} */
        CartCouponComponent.prototype.submitDisabled$;
        /** @type {?} */
        CartCouponComponent.prototype.cart$;
        /** @type {?} */
        CartCouponComponent.prototype.cartId;
        /** @type {?} */
        CartCouponComponent.prototype.applicableCoupons;
        /** @type {?} */
        CartCouponComponent.prototype.filteredCoupons;
        /**
         * @type {?}
         * @private
         */
        CartCouponComponent.prototype.ignoreCloseEvent;
        /**
         * @type {?}
         * @private
         */
        CartCouponComponent.prototype.subscription;
        /** @type {?} */
        CartCouponComponent.prototype.couponBoxIsActive;
        /**
         * @type {?}
         * @private
         */
        CartCouponComponent.prototype.cartService;
        /**
         * @type {?}
         * @private
         */
        CartCouponComponent.prototype.authService;
        /**
         * @type {?}
         * @private
         */
        CartCouponComponent.prototype.cartVoucherService;
        /**
         * @type {?}
         * @private
         */
        CartCouponComponent.prototype.formBuilder;
        /**
         * @type {?}
         * @protected
         */
        CartCouponComponent.prototype.customerCouponService;
        /**
         * @type {?}
         * @protected
         */
        CartCouponComponent.prototype.featureConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartCouponModule = /** @class */ (function () {
        function CartCouponModule() {
        }
        CartCouponModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [CartCouponComponent, AppliedCouponsComponent],
                        exports: [CartCouponComponent, AppliedCouponsComponent],
                        imports: [
                            core$1.FeaturesConfigModule,
                            common.CommonModule,
                            ngSelect.NgSelectModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            core$1.I18nModule,
                            IconModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CartApplyCouponComponent: {
                                        component: CartCouponComponent,
                                    },
                                },
                            }))),
                        ],
                        entryComponents: [CartCouponComponent],
                    },] }
        ];
        return CartCouponModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartItemListComponent = /** @class */ (function () {
        function CartItemListComponent(cartService, fb, selectiveCartService, featureConfig) {
            this.cartService = cartService;
            this.fb = fb;
            this.selectiveCartService = selectiveCartService;
            this.featureConfig = featureConfig;
            this.isReadOnly = false;
            this.hasHeader = true;
            this.options = {
                isSaveForLater: false,
                optionalBtn: null,
            };
            this.potentialProductPromotions = [];
            this.promotionLocation = core$1.PromotionLocation.ActiveCart;
            this.cartIsLoading = false;
            this.form = this.fb.group({});
            this._items = [];
        }
        Object.defineProperty(CartItemListComponent.prototype, "items", {
            get: /**
             * @return {?}
             */
            function () {
                return this._items;
            },
            set: /**
             * @param {?} _items
             * @return {?}
             */
            function (_items) {
                var _this = this;
                if (_items.every((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.hasOwnProperty('orderEntry'); }))) {
                    this._items = _items.map((/**
                     * @param {?} consignmentEntry
                     * @return {?}
                     */
                    function (consignmentEntry) {
                        /** @type {?} */
                        var entry = Object.assign({}, ((/** @type {?} */ (consignmentEntry))).orderEntry);
                        entry.quantity = consignmentEntry.quantity;
                        return entry;
                    }));
                }
                else {
                    this._items = _items;
                    this.items.forEach((/**
                     * @param {?} item
                     * @return {?}
                     */
                    function (item) {
                        var code = item.product.code;
                        if (!_this.form.controls[code]) {
                            _this.form.setControl(code, _this.createEntryFormGroup(item));
                        }
                        else {
                            /** @type {?} */
                            var entryForm = (/** @type {?} */ (_this.form.controls[code]));
                            entryForm.controls.quantity.setValue(item.quantity);
                        }
                    }));
                }
            },
            enumerable: true,
            configurable: true
        });
        // TODO remove for 2.0 - left to keep backward compatibility
        // TODO remove for 2.0 - left to keep backward compatibility
        /**
         * @return {?}
         */
        CartItemListComponent.prototype.ngOnInit = 
        // TODO remove for 2.0 - left to keep backward compatibility
        /**
         * @return {?}
         */
        function () { };
        //TODO remove feature flag for #5958
        //TODO remove feature flag for #5958
        /**
         * @return {?}
         */
        CartItemListComponent.prototype.isSaveForLaterEnabled = 
        //TODO remove feature flag for #5958
        /**
         * @return {?}
         */
        function () {
            if (this.featureConfig) {
                return this.featureConfig.isEnabled('saveForLater');
            }
            return false;
        };
        //TODO remove feature flag for #5958
        //TODO remove feature flag for #5958
        /**
         * @param {?} item
         * @return {?}
         */
        CartItemListComponent.prototype.removeEntry = 
        //TODO remove feature flag for #5958
        /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (this.selectiveCartService && this.options.isSaveForLater) {
                this.selectiveCartService.removeEntry(item);
            }
            else {
                this.cartService.removeEntry(item);
            }
            delete this.form.controls[item.product.code];
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        CartItemListComponent.prototype.updateEntry = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var item = _a.item, updatedQuantity = _a.updatedQuantity;
            this.cartService.updateEntry(item.entryNumber, updatedQuantity);
        };
        /**
         * @private
         * @param {?} entry
         * @return {?}
         */
        CartItemListComponent.prototype.createEntryFormGroup = /**
         * @private
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            return this.fb.group({
                entryNumber: entry.entryNumber,
                quantity: entry.quantity,
            });
        };
        /**
         * @param {?} item
         * @return {?}
         */
        CartItemListComponent.prototype.getPotentialProductPromotionsForItem = /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            var e_1, _a, e_2, _b;
            /** @type {?} */
            var entryPromotions = [];
            //don't show promotions in saveforlater
            if (this.options.isSaveForLater) {
                return entryPromotions;
            }
            if (this.potentialProductPromotions &&
                this.potentialProductPromotions.length > 0) {
                try {
                    for (var _c = __values(this.potentialProductPromotions), _d = _c.next(); !_d.done; _d = _c.next()) {
                        var promotion = _d.value;
                        if (promotion.description &&
                            promotion.consumedEntries &&
                            promotion.consumedEntries.length > 0) {
                            try {
                                for (var _e = (e_2 = void 0, __values(promotion.consumedEntries)), _f = _e.next(); !_f.done; _f = _e.next()) {
                                    var consumedEntry = _f.value;
                                    if (this.isConsumedByEntry(consumedEntry, item)) {
                                        entryPromotions.push(promotion);
                                    }
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
            return entryPromotions;
        };
        /**
         * @private
         * @param {?} consumedEntry
         * @param {?} entry
         * @return {?}
         */
        CartItemListComponent.prototype.isConsumedByEntry = /**
         * @private
         * @param {?} consumedEntry
         * @param {?} entry
         * @return {?}
         */
        function (consumedEntry, entry) {
            var e_3, _a;
            /** @type {?} */
            var consumedEntryNumber = consumedEntry.orderEntryNumber;
            if (entry.entries && entry.entries.length > 0) {
                try {
                    for (var _b = __values(entry.entries), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var subEntry = _c.value;
                        if (subEntry.entryNumber === consumedEntryNumber) {
                            return true;
                        }
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
                return false;
            }
            else {
                return consumedEntryNumber === entry.entryNumber;
            }
        };
        CartItemListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-cart-item-list',
                        template: "<div *ngIf=\"hasHeader\" class=\"d-none d-md-block d-lg-block d-xl-block\">\n  <div class=\"cx-item-list-header row\">\n    <div class=\"cx-item-list-desc col-md-5 col-lg-5 col-xl-6\">\n      {{ 'cartItems.description' | cxTranslate }}\n    </div>\n    <div class=\"cx-item-list-price col-md-3 col-lg-2 col-xl-2\">\n      {{ 'cartItems.itemPrice' | cxTranslate }}\n    </div>\n    <div class=\"cx-item-list-qty col-md-2 col-lg-3 col-xl-2\">\n      {{ 'cartItems.quantity' | cxTranslate }}\n    </div>\n\n    <ng-container\n      *ngIf=\"\n        isSaveForLaterEnabled() && options.isSaveForLater;\n        else totalHeader\n      \"\n    >\n      <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n        {{ 'saveForLaterItems.stock' | cxTranslate }}\n      </div>\n    </ng-container>\n  </div>\n</div>\n\n<div [formGroup]=\"form\">\n  <div class=\"cx-item-list-row\" *ngFor=\"let item of items\">\n    <div class=\"cx-item-list-items\">\n      <ng-container *cxFeatureLevel=\"'!1.5'\">\n        <cx-cart-item\n          [parent]=\"form.controls[item.product.code]\"\n          [item]=\"item\"\n          [isReadOnly]=\"isReadOnly\"\n          [potentialProductPromotions]=\"\n            getPotentialProductPromotionsForItem(item)\n          \"\n          [cartIsLoading]=\"cartIsLoading\"\n          (remove)=\"removeEntry($event)\"\n          (update)=\"updateEntry($event)\"\n        >\n        </cx-cart-item>\n      </ng-container>\n\n      <ng-container *cxFeatureLevel=\"'1.5'\">\n        <cx-cart-item\n          [parent]=\"form.controls[item.product.code]\"\n          [item]=\"item\"\n          [isReadOnly]=\"isReadOnly\"\n          [promotionLocation]=\"promotionLocation\"\n          [cartIsLoading]=\"cartIsLoading\"\n          (remove)=\"removeEntry($event)\"\n          (update)=\"updateEntry($event)\"\n          [options]=\"options\"\n        >\n        </cx-cart-item>\n      </ng-container>\n    </div>\n  </div>\n</div>\n\n<ng-template #totalHeader>\n  <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n    {{ 'cartItems.total' | cxTranslate }}\n  </div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        CartItemListComponent.ctorParameters = function () { return [
            { type: core$1.CartService },
            { type: forms.FormBuilder },
            { type: core$1.SelectiveCartService },
            { type: core$1.FeatureConfigService }
        ]; };
        CartItemListComponent.propDecorators = {
            isReadOnly: [{ type: core.Input }],
            hasHeader: [{ type: core.Input }],
            options: [{ type: core.Input }],
            potentialProductPromotions: [{ type: core.Input }],
            promotionLocation: [{ type: core.Input }],
            items: [{ type: core.Input }],
            cartIsLoading: [{ type: core.Input }]
        };
        return CartItemListComponent;
    }());
    if (false) {
        /** @type {?} */
        CartItemListComponent.prototype.isReadOnly;
        /** @type {?} */
        CartItemListComponent.prototype.hasHeader;
        /** @type {?} */
        CartItemListComponent.prototype.options;
        /** @type {?} */
        CartItemListComponent.prototype.potentialProductPromotions;
        /** @type {?} */
        CartItemListComponent.prototype.promotionLocation;
        /** @type {?} */
        CartItemListComponent.prototype.cartIsLoading;
        /** @type {?} */
        CartItemListComponent.prototype.form;
        /**
         * @type {?}
         * @private
         */
        CartItemListComponent.prototype._items;
        /**
         * @type {?}
         * @protected
         */
        CartItemListComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        CartItemListComponent.prototype.fb;
        /**
         * @type {?}
         * @protected
         */
        CartItemListComponent.prototype.selectiveCartService;
        /**
         * @type {?}
         * @private
         */
        CartItemListComponent.prototype.featureConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function Item() { }
    if (false) {
        /** @type {?|undefined} */
        Item.prototype.product;
        /** @type {?|undefined} */
        Item.prototype.quantity;
        /** @type {?|undefined} */
        Item.prototype.basePrice;
        /** @type {?|undefined} */
        Item.prototype.totalPrice;
        /** @type {?|undefined} */
        Item.prototype.updateable;
    }
    /**
     * @record
     */
    function CartItemComponentOptions() { }
    if (false) {
        /** @type {?|undefined} */
        CartItemComponentOptions.prototype.isSaveForLater;
        /** @type {?|undefined} */
        CartItemComponentOptions.prototype.optionalBtn;
    }
    var CartItemComponent = /** @class */ (function () {
        function CartItemComponent(promotionService, featureConfig) {
            this.promotionService = promotionService;
            this.featureConfig = featureConfig;
            this.compact = false;
            this.isReadOnly = false;
            this.cartIsLoading = false;
            this.options = {
                isSaveForLater: false,
                optionalBtn: null,
            };
            this.promotionLocation = core$1.PromotionLocation.ActiveCart;
            this.remove = new core.EventEmitter();
            this.update = new core.EventEmitter();
            this.view = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        CartItemComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.appliedProductPromotions$ = this.promotionService.getProductPromotionForEntry(this.item, this.promotionLocation);
        };
        //TODO remove feature flag for #5958
        //TODO remove feature flag for #5958
        /**
         * @return {?}
         */
        CartItemComponent.prototype.isSaveForLaterEnabled = 
        //TODO remove feature flag for #5958
        /**
         * @return {?}
         */
        function () {
            if (this.featureConfig) {
                return this.featureConfig.isEnabled('saveForLater');
            }
            return false;
        };
        //TODO remove feature flag for #5958
        //TODO remove feature flag for #5958
        /**
         * @param {?} product
         * @return {?}
         */
        CartItemComponent.prototype.isProductOutOfStock = 
        //TODO remove feature flag for #5958
        /**
         * @param {?} product
         * @return {?}
         */
        function (product) {
            // TODO Move stocklevelstatuses across the app to an enum
            return (product &&
                product.stock &&
                product.stock.stockLevelStatus === 'outOfStock');
        };
        /**
         * @param {?} updatedQuantity
         * @return {?}
         */
        CartItemComponent.prototype.updateItem = /**
         * @param {?} updatedQuantity
         * @return {?}
         */
        function (updatedQuantity) {
            this.update.emit({ item: this.item, updatedQuantity: updatedQuantity });
        };
        /**
         * @return {?}
         */
        CartItemComponent.prototype.removeItem = /**
         * @return {?}
         */
        function () {
            this.remove.emit(this.item);
        };
        /**
         * @return {?}
         */
        CartItemComponent.prototype.viewItem = /**
         * @return {?}
         */
        function () {
            this.view.emit();
        };
        CartItemComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-cart-item',
                        template: "<div [ngClass]=\"compact ? 'cx-compact row' : 'row'\">\n  <!-- Item Image -->\n  <div class=\"col-2 cx-image-container\">\n    <a\n      [routerLink]=\"{ cxRoute: 'product', params: item.product } | cxUrl\"\n      (click)=\"viewItem()\"\n    >\n      <cx-media\n        [container]=\"item.product.images?.PRIMARY\"\n        format=\"thumbnail\"\n      ></cx-media>\n    </a>\n  </div>\n  <!-- Item Information -->\n  <div class=\"cx-info col-10\">\n    <div class=\"cx-info-container row \">\n      <!-- Item Description -->\n      <div [ngClass]=\"compact ? '' : ' col-md-3 col-lg-3 col-xl-5'\">\n        <div *ngIf=\"item.product.name\" class=\"cx-name\">\n          <a\n            class=\"cx-link\"\n            [routerLink]=\"{ cxRoute: 'product', params: item.product } | cxUrl\"\n            (click)=\"viewItem()\"\n            >{{ item.product.name }}</a\n          >\n        </div>\n        <div *ngIf=\"item.product.code\" class=\"cx-code\">\n          {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\n        </div>\n        <!-- Variants -->\n        <ng-container *cxFeatureLevel=\"'!1.5'\">\n          <div\n            *ngFor=\"let variant of item.product.variantOptionQualifiers\"\n            class=\"cx-property\"\n          >\n            <div class=\"cx-label\">{{ variant.name }}</div>\n            <div class=\"cx-value\">{{ variant.value }}</div>\n          </div>\n        </ng-container>\n        <ng-container *cxFeatureLevel=\"'1.5'\">\n          <ng-container *ngIf=\"item.product.baseOptions?.length\">\n            <div\n              *ngFor=\"\n                let variant of item.product.baseOptions[0]?.selected\n                  ?.variantOptionQualifiers\n              \"\n              class=\"cx-property\"\n            >\n              <div class=\"cx-label\" *ngIf=\"variant.name && variant.value\">\n                {{ variant.name }}: {{ variant.value }}\n              </div>\n            </div>\n          </ng-container>\n        </ng-container>\n      </div>\n      <!-- Item Price -->\n      <div\n        *ngIf=\"item.basePrice\"\n        class=\"cx-price\"\n        [ngClass]=\"compact ? '' : ' col-md-3 col-lg-3 col-xl-2'\"\n      >\n        <div\n          class=\"cx-label\"\n          [ngClass]=\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\"\n        >\n          {{ 'cartItems.itemPrice' | cxTranslate }}\n        </div>\n        <div *ngIf=\"item.basePrice\" class=\"cx-value\">\n          {{ item.basePrice?.formattedValue }}\n        </div>\n      </div>\n      <!-- Item Quantity -->\n      <div class=\"cx-quantity\" [ngClass]=\"compact ? '' : ' col-3'\">\n        <div\n          class=\"cx-label\"\n          [ngClass]=\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\"\n          placement=\"left\"\n          title=\"{{ 'cartItems.quantityTitle' | cxTranslate }}\"\n        >\n          {{ 'cartItems.quantity' | cxTranslate }}\n        </div>\n\n        <div *ngIf=\"isReadOnly\" class=\"cx-value\">\n          {{ item.quantity }}\n        </div>\n        <div\n          *ngIf=\"!isReadOnly && parent\"\n          class=\"cx-value\"\n          [formGroup]=\"parent\"\n        >\n          <cx-item-counter\n            [isValueChangeable]=\"item.updateable\"\n            [step]=\"1\"\n            [min]=\"1\"\n            [max]=\"item.product.stock?.stockLevel || 1000\"\n            (update)=\"updateItem($event)\"\n            [cartIsLoading]=\"cartIsLoading\"\n            formControlName=\"quantity\"\n          >\n          </cx-item-counter>\n        </div>\n      </div>\n      <!-- Total -->\n      <ng-container\n        *ngIf=\"isSaveForLaterEnabled() && options.isSaveForLater; else total\"\n      >\n        <div\n          class=\"cx-total\"\n          [ngClass]=\"compact ? '' : ' col-md-3 col-lg-3 col-xl-2'\"\n        >\n          <div\n            class=\"cx-label\"\n            [ngClass]=\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\"\n          >\n            {{ 'saveForLaterItems.stock' | cxTranslate }}\n          </div>\n          <div\n            *ngIf=\"item.product?.stock?.stockLevel >= 0; else forceInstock\"\n            class=\"cx-value\"\n          >\n            {{ item.product.stock.stockLevel }}\n          </div>\n          <ng-template #forceInstock\n            ><div class=\"cx-value\">\n              {{ 'saveForLaterItems.forceInStock' | cxTranslate }}\n            </div></ng-template\n          >\n        </div>\n      </ng-container>\n    </div>\n    <!-- Availability -->\n    <div\n      *ngIf=\"isProductOutOfStock(item.product)\"\n      class=\"cx-availability col-12\"\n    >\n      {{ 'productSummary.outOfStock' | cxTranslate }}\n    </div>\n    <!-- Promotion -->\n    <ng-container *cxFeatureLevel=\"'!1.5'\">\n      <cx-promotions [promotions]=\"potentialProductPromotions\"></cx-promotions>\n    </ng-container>\n\n    <ng-container *cxFeatureLevel=\"'1.5'\">\n      <ng-container\n        *ngIf=\"appliedProductPromotions$ | async as appliedProductPromotions\"\n      >\n        <cx-promotions [promotions]=\"appliedProductPromotions\"></cx-promotions>\n      </ng-container>\n    </ng-container>\n    <!-- Actions -->\n\n    <div\n      *ngIf=\"(!isReadOnly || options.isSaveForLater) && item.updateable\"\n      class=\"cx-actions col-12\"\n    >\n      <ng-container *ngIf=\"!isProductOutOfStock(item.product)\">\n        <ng-container\n          *ngTemplateOutlet=\"\n            options.optionalBtn;\n            context: { $implicit: { loading: cartIsLoading, item: item } }\n          \"\n        ></ng-container>\n      </ng-container>\n\n      <div class=\"col-md-3 col-lg-3 col-xl-3 cx-remove-btn\">\n        <button class=\"link\" [disabled]=\"cartIsLoading\" (click)=\"removeItem()\">\n          {{ 'common.remove' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-template #total>\n  <div\n    *ngIf=\"item.totalPrice\"\n    class=\"cx-total\"\n    [ngClass]=\"compact ? '' : ' col-md-3 col-lg-3 col-xl-2'\"\n  >\n    <div\n      class=\"cx-label\"\n      [ngClass]=\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\"\n    >\n      {{ 'cartItems.total' | cxTranslate }}\n    </div>\n    <div class=\"cx-value\">{{ item.totalPrice.formattedValue }}</div>\n  </div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        CartItemComponent.ctorParameters = function () { return [
            { type: PromotionService },
            { type: core$1.FeatureConfigService }
        ]; };
        CartItemComponent.propDecorators = {
            compact: [{ type: core.Input }],
            item: [{ type: core.Input }],
            isReadOnly: [{ type: core.Input }],
            cartIsLoading: [{ type: core.Input }],
            options: [{ type: core.Input }],
            promotionLocation: [{ type: core.Input }],
            potentialProductPromotions: [{ type: core.Input }],
            remove: [{ type: core.Output }],
            update: [{ type: core.Output }],
            view: [{ type: core.Output }],
            parent: [{ type: core.Input }]
        };
        return CartItemComponent;
    }());
    if (false) {
        /** @type {?} */
        CartItemComponent.prototype.compact;
        /** @type {?} */
        CartItemComponent.prototype.item;
        /** @type {?} */
        CartItemComponent.prototype.isReadOnly;
        /** @type {?} */
        CartItemComponent.prototype.cartIsLoading;
        /** @type {?} */
        CartItemComponent.prototype.options;
        /** @type {?} */
        CartItemComponent.prototype.promotionLocation;
        /** @type {?} */
        CartItemComponent.prototype.potentialProductPromotions;
        /** @type {?} */
        CartItemComponent.prototype.remove;
        /** @type {?} */
        CartItemComponent.prototype.update;
        /** @type {?} */
        CartItemComponent.prototype.view;
        /** @type {?} */
        CartItemComponent.prototype.parent;
        /** @type {?} */
        CartItemComponent.prototype.appliedProductPromotions$;
        /**
         * @type {?}
         * @protected
         */
        CartItemComponent.prototype.promotionService;
        /**
         * @type {?}
         * @private
         */
        CartItemComponent.prototype.featureConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderSummaryComponent = /** @class */ (function () {
        function OrderSummaryComponent() {
        }
        OrderSummaryComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-summary',
                        template: "<h4>{{ 'orderCost.orderSummary' | cxTranslate }}</h4>\n\n<div class=\"cx-summary-partials\" *ngIf=\"cart\">\n  <div class=\"cx-summary-row\">\n    <div class=\"col-6 cx-summary-label\">\n      {{ 'orderCost.subtotal' | cxTranslate }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{ cart.subTotal?.formattedValue }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row\">\n    <div class=\"col-6 cx-summary-label\">\n      {{ 'orderCost.estimatedShipping' | cxTranslate }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{\n        cart.deliveryCost?.formattedValue\n          ? cart.deliveryCost.formattedValue\n          : 'TBD'\n      }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row\" *ngIf=\"cart.net\">\n    <div class=\"col-6 cx-summary-label\">\n      {{ 'orderCost.salesTax' | cxTranslate }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{ cart.totalTax?.formattedValue }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row cx-summary-total\">\n    <div class=\"col-6 cx-summary-label\">\n      {{ 'orderCost.total' | cxTranslate }}\n    </div>\n    <div class=\"col-6 cx-summary-amount\">\n      {{ cart.totalPriceWithTax?.formattedValue }}\n    </div>\n  </div>\n  <div class=\"cx-summary-row\" *ngIf=\"cart.totalDiscounts?.value > 0\">\n    {{ 'orderCost.discount' | cxTranslate }}\n    {{ cart.totalDiscounts?.formattedValue }}\n  </div>\n  <div class=\"cx-summary-row\" *ngIf=\"!cart.net\">\n    {{ 'orderCost.grossTax' | cxTranslate }}\n    {{ cart.totalTax?.formattedValue }}.\n  </div>\n</div>\n\n<!--\n<cx-promotions\n  *ngIf=\"cart\"\n  [promotions]=\"cart.appliedOrderPromotions\"\n></cx-promotions>\n-->\n\n<ng-container *cxFeatureLevel=\"'1.3'\">\n  <cx-applied-coupons\n    [vouchers]=\"cart.appliedVouchers\"\n    [isReadOnly]=\"true\"\n  ></cx-applied-coupons>\n</ng-container>\n"
                    }] }
        ];
        OrderSummaryComponent.propDecorators = {
            cart: [{ type: core.Input }]
        };
        return OrderSummaryComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderSummaryComponent.prototype.cart;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartSharedModule = /** @class */ (function () {
        function CartSharedModule() {
        }
        CartSharedModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            CartCouponModule,
                            forms.ReactiveFormsModule,
                            core$1.UrlModule,
                            ngBootstrap.NgbModule,
                            PromotionsModule,
                            core$1.I18nModule,
                            MediaModule,
                            ItemCounterModule,
                            core$1.FeaturesConfigModule,
                        ],
                        declarations: [
                            CartItemComponent,
                            OrderSummaryComponent,
                            CartItemListComponent,
                        ],
                        exports: [CartItemComponent, CartItemListComponent, OrderSummaryComponent],
                    },] }
        ];
        return CartSharedModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddToCartModule = /** @class */ (function () {
        function AddToCartModule() {
        }
        AddToCartModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            CartSharedModule,
                            common.CommonModule,
                            router.RouterModule,
                            SpinnerModule,
                            PromotionsModule,
                            core$1.FeaturesConfigModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductAddToCartComponent: {
                                        component: AddToCartComponent,
                                    },
                                },
                            }))),
                            core$1.UrlModule,
                            IconModule,
                            core$1.I18nModule,
                            ItemCounterModule,
                            AutoFocusDirectiveModule,
                        ],
                        declarations: [AddToCartComponent, AddedToCartDialogComponent],
                        entryComponents: [AddToCartComponent, AddedToCartDialogComponent],
                        exports: [AddToCartComponent, AddedToCartDialogComponent],
                    },] }
        ];
        return AddToCartModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartDetailsComponent = /** @class */ (function () {
        function CartDetailsComponent(cartService, promotionService, selectiveCartService, authService, routingService, featureConfig) {
            this.cartService = cartService;
            this.promotionService = promotionService;
            this.selectiveCartService = selectiveCartService;
            this.authService = authService;
            this.routingService = routingService;
            this.featureConfig = featureConfig;
            this.loggedIn = false;
            this.promotionLocation = core$1.PromotionLocation.ActiveCart;
        }
        /**
         * @return {?}
         */
        CartDetailsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.cart$ = this.cartService.getActive();
            /**
             * TODO Remove the check for promotion service
             * Issue: GH-5670
             */
            if (this.promotionService) {
                this.promotions$ = this.promotionService.getOrderPromotionsFromCart();
            }
            this.entries$ = this.cartService
                .getEntries()
                .pipe(operators.filter((/**
             * @param {?} entries
             * @return {?}
             */
            function (entries) { return entries.length > 0; })));
            if (this.isSaveForLaterEnabled()) {
                this.cartLoaded$ = rxjs.combineLatest([
                    this.cartService.getLoaded(),
                    this.selectiveCartService.getLoaded(),
                    this.authService.isUserLoggedIn(),
                ]).pipe(operators.tap((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 3), loggedIn = _b[2];
                    return (_this.loggedIn = loggedIn);
                })), operators.map((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 3), cartLoaded = _b[0], sflLoaded = _b[1], loggedIn = _b[2];
                    return loggedIn ? cartLoaded && sflLoaded : cartLoaded;
                })));
            }
            //TODO remove for #5958
            else {
                this.cartLoaded$ = this.cartService.getLoaded();
            }
            //TODO  remove for #5958 end
            if (this.promotionService) {
                this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);
            }
        };
        //TODO remove feature flag for #5958
        //TODO remove feature flag for #5958
        /**
         * @return {?}
         */
        CartDetailsComponent.prototype.isSaveForLaterEnabled = 
        //TODO remove feature flag for #5958
        /**
         * @return {?}
         */
        function () {
            if (this.featureConfig) {
                return this.featureConfig.isEnabled('saveForLater');
            }
            return false;
        };
        //TODO remove feature flag for #5958 end
        /**
         * @deprecated Since 1.5
         * Use promotionService instead of the promotion inputs.
         * Remove issue: #5670
         */
        //TODO remove feature flag for #5958 end
        /**
         * @deprecated Since 1.5
         * Use promotionService instead of the promotion inputs.
         * Remove issue: #5670
         * @param {?} cart
         * @return {?}
         */
        CartDetailsComponent.prototype.getAllPromotionsForCart = 
        //TODO remove feature flag for #5958 end
        /**
         * @deprecated Since 1.5
         * Use promotionService instead of the promotion inputs.
         * Remove issue: #5670
         * @param {?} cart
         * @return {?}
         */
        function (cart) {
            /** @type {?} */
            var potentialPromotions = [];
            potentialPromotions.push.apply(potentialPromotions, __spread((cart.potentialOrderPromotions || [])));
            potentialPromotions.push.apply(potentialPromotions, __spread((cart.potentialProductPromotions || [])));
            /** @type {?} */
            var appliedPromotions = [];
            appliedPromotions.push.apply(appliedPromotions, __spread((cart.appliedOrderPromotions || [])));
            appliedPromotions.push.apply(appliedPromotions, __spread((cart.appliedProductPromotions || [])));
            return __spread(potentialPromotions, appliedPromotions);
        };
        /**
         * @param {?} item
         * @return {?}
         */
        CartDetailsComponent.prototype.saveForLater = /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (this.loggedIn) {
                this.cartService.removeEntry(item);
                this.selectiveCartService.addEntry(item.product.code, item.quantity);
            }
            else {
                this.routingService.go({ cxRoute: 'login' });
            }
        };
        CartDetailsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-cart-details',
                        template: "<ng-container *ngIf=\"cart$ | async as cart\">\n  <ng-container *ngIf=\"entries$ | async as entries\">\n    <div *ngIf=\"cart.totalItems > 0\" class=\"cart-details-wrapper\">\n      <div class=\"cx-total\">\n        {{ 'cartDetails.cartName' | cxTranslate: { code: cart.code } }}\n      </div>\n\n      <ng-container *cxFeatureLevel=\"'!1.5'\">\n        <cx-promotions [promotions]=\"promotions$ | async\"></cx-promotions>\n\n        <cx-cart-item-list\n          [items]=\"entries\"\n          [cartIsLoading]=\"!(cartLoaded$ | async)\"\n          [potentialProductPromotions]=\"cart.potentialProductPromotions\"\n        ></cx-cart-item-list>\n      </ng-container>\n\n      <ng-container *cxFeatureLevel=\"'1.5'\">\n        <ng-container *ngIf=\"orderPromotions$ | async as orderPromotions\">\n          <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\n        </ng-container>\n\n        <cx-cart-item-list\n          [items]=\"entries\"\n          [cartIsLoading]=\"!(cartLoaded$ | async)\"\n          [promotionLocation]=\"promotionLocation\"\n          [options]=\"{\n            isSaveForLater: false,\n            optionalBtn: isSaveForLaterEnabled() ? saveForLaterBtn : null\n          }\"\n        ></cx-cart-item-list>\n      </ng-container>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template let-ctx #saveForLaterBtn>\n  <div class=\"col-md-3 col-lg-3 col-xl-3 cx-sfl-btn\">\n    <button\n      class=\"link\"\n      [disabled]=\"ctx.loading\"\n      (click)=\"saveForLater(ctx.item)\"\n    >\n      {{ 'saveForLaterItems.saveForLater' | cxTranslate }}\n    </button>\n  </div>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CartDetailsComponent.ctorParameters = function () { return [
            { type: core$1.CartService },
            { type: PromotionService },
            { type: core$1.SelectiveCartService },
            { type: core$1.AuthService },
            { type: core$1.RoutingService },
            { type: core$1.FeatureConfigService }
        ]; };
        return CartDetailsComponent;
    }());
    if (false) {
        /** @type {?} */
        CartDetailsComponent.prototype.cart$;
        /** @type {?} */
        CartDetailsComponent.prototype.entries$;
        /** @type {?} */
        CartDetailsComponent.prototype.cartLoaded$;
        /** @type {?} */
        CartDetailsComponent.prototype.loggedIn;
        /** @type {?} */
        CartDetailsComponent.prototype.orderPromotions$;
        /** @type {?} */
        CartDetailsComponent.prototype.promotionLocation;
        /** @type {?} */
        CartDetailsComponent.prototype.promotions$;
        /**
         * @type {?}
         * @protected
         */
        CartDetailsComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        CartDetailsComponent.prototype.promotionService;
        /**
         * @type {?}
         * @protected
         */
        CartDetailsComponent.prototype.selectiveCartService;
        /**
         * @type {?}
         * @private
         */
        CartDetailsComponent.prototype.authService;
        /**
         * @type {?}
         * @private
         */
        CartDetailsComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        CartDetailsComponent.prototype.featureConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartDetailsModule = /** @class */ (function () {
        function CartDetailsModule() {
        }
        CartDetailsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            CartSharedModule,
                            common.CommonModule,
                            CartCouponModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            PromotionsModule,
                            core$1.FeaturesConfigModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CartComponent: {
                                        component: CartDetailsComponent,
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                        ],
                        declarations: [CartDetailsComponent],
                        exports: [CartDetailsComponent],
                        entryComponents: [CartDetailsComponent],
                    },] }
        ];
        return CartDetailsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartNotEmptyGuard = /** @class */ (function () {
        function CartNotEmptyGuard(cartService, routingService) {
            this.cartService = cartService;
            this.routingService = routingService;
        }
        /**
         * @return {?}
         */
        CartNotEmptyGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return rxjs.combineLatest([
                this.cartService.getActive(),
                this.cartService.getLoaded(),
            ]).pipe(operators.filter((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), _ = _b[0], loaded = _b[1];
                return loaded;
            })), operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), cart = _b[0];
                if (_this.isEmpty(cart)) {
                    _this.routingService.go({ cxRoute: 'home' });
                    return false;
                }
                return true;
            })));
        };
        /**
         * @private
         * @param {?} cart
         * @return {?}
         */
        CartNotEmptyGuard.prototype.isEmpty = /**
         * @private
         * @param {?} cart
         * @return {?}
         */
        function (cart) {
            return cart && !cart.totalItems;
        };
        CartNotEmptyGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CartNotEmptyGuard.ctorParameters = function () { return [
            { type: core$1.CartService },
            { type: core$1.RoutingService }
        ]; };
        /** @nocollapse */ CartNotEmptyGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CartNotEmptyGuard_Factory() { return new CartNotEmptyGuard(core.ɵɵinject(core$1.CartService), core.ɵɵinject(core$1.RoutingService)); }, token: CartNotEmptyGuard, providedIn: "root" });
        return CartNotEmptyGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CartNotEmptyGuard.prototype.cartService;
        /**
         * @type {?}
         * @private
         */
        CartNotEmptyGuard.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartPageLayoutHandler = /** @class */ (function () {
        function CartPageLayoutHandler(cartService, selectiveCartService, featureConfig) {
            this.cartService = cartService;
            this.selectiveCartService = selectiveCartService;
            this.featureConfig = featureConfig;
        }
        /**
         * @param {?} slots$
         * @param {?=} pageTemplate
         * @param {?=} section
         * @return {?}
         */
        CartPageLayoutHandler.prototype.handle = /**
         * @param {?} slots$
         * @param {?=} pageTemplate
         * @param {?=} section
         * @return {?}
         */
        function (slots$, pageTemplate, section) {
            if (pageTemplate === 'CartPageTemplate' && !section) {
                if (this.featureConfig && this.featureConfig.isEnabled('saveForLater')) {
                    return rxjs.combineLatest([
                        slots$,
                        this.cartService.getActive(),
                        this.selectiveCartService.getCart(),
                    ]).pipe(operators.map((/**
                     * @param {?} __0
                     * @return {?}
                     */
                    function (_a) {
                        var _b = __read(_a, 3), slots = _b[0], cart = _b[1], selectiveCart = _b[2];
                        if (cart.totalItems) {
                            return slots.filter((/**
                             * @param {?} slot
                             * @return {?}
                             */
                            function (slot) { return slot !== 'EmptyCartMiddleContent'; }));
                        }
                        else if (selectiveCart.totalItems) {
                            return slots.filter((/**
                             * @param {?} slot
                             * @return {?}
                             */
                            function (slot) {
                                return slot !== 'EmptyCartMiddleContent' &&
                                    slot !== 'CenterRightContentSlot';
                            }));
                        }
                        else {
                            return slots.filter((/**
                             * @param {?} slot
                             * @return {?}
                             */
                            function (slot) {
                                return slot !== 'TopContent' && slot !== 'CenterRightContentSlot';
                            }));
                        }
                    })));
                }
                //TODO remove old code for #5958
                return rxjs.combineLatest([slots$, this.cartService.getActive()]).pipe(operators.map((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 2), slots = _b[0], cart = _b[1];
                    if (cart.totalItems) {
                        return slots.filter((/**
                         * @param {?} slot
                         * @return {?}
                         */
                        function (slot) { return slot !== 'EmptyCartMiddleContent'; }));
                    }
                    else {
                        return slots.filter((/**
                         * @param {?} slot
                         * @return {?}
                         */
                        function (slot) { return slot !== 'TopContent' && slot !== 'CenterRightContentSlot'; }));
                    }
                })));
                ////TODO remove old code for #5958
            }
            return slots$;
        };
        CartPageLayoutHandler.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CartPageLayoutHandler.ctorParameters = function () { return [
            { type: core$1.CartService },
            { type: core$1.SelectiveCartService },
            { type: core$1.FeatureConfigService }
        ]; };
        /** @nocollapse */ CartPageLayoutHandler.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CartPageLayoutHandler_Factory() { return new CartPageLayoutHandler(core.ɵɵinject(core$1.CartService), core.ɵɵinject(core$1.SelectiveCartService), core.ɵɵinject(core$1.FeatureConfigService)); }, token: CartPageLayoutHandler, providedIn: "root" });
        return CartPageLayoutHandler;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CartPageLayoutHandler.prototype.cartService;
        /**
         * @type {?}
         * @private
         */
        CartPageLayoutHandler.prototype.selectiveCartService;
        /**
         * @type {?}
         * @private
         */
        CartPageLayoutHandler.prototype.featureConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartTotalsComponent = /** @class */ (function () {
        function CartTotalsComponent(cartService) {
            this.cartService = cartService;
        }
        /**
         * @return {?}
         */
        CartTotalsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.cart$ = this.cartService.getActive();
            this.entries$ = this.cartService
                .getEntries()
                .pipe(operators.filter((/**
             * @param {?} entries
             * @return {?}
             */
            function (entries) { return entries.length > 0; })));
        };
        CartTotalsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-cart-totals',
                        template: "<ng-container *ngIf=\"cart$ | async as cart\">\n  <ng-container *ngIf=\"entries$ | async as entries\">\n    <cx-order-summary [cart]=\"cart\"></cx-order-summary>\n    <button\n      [routerLink]=\"{ cxRoute: 'checkout' } | cxUrl\"\n      *ngIf=\"entries.length\"\n      class=\"btn btn-primary btn-block\"\n      type=\"button\"\n    >\n      {{ 'cartDetails.proceedToCheckout' | cxTranslate }}\n    </button>\n  </ng-container>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CartTotalsComponent.ctorParameters = function () { return [
            { type: core$1.CartService }
        ]; };
        return CartTotalsComponent;
    }());
    if (false) {
        /** @type {?} */
        CartTotalsComponent.prototype.cart$;
        /** @type {?} */
        CartTotalsComponent.prototype.entries$;
        /**
         * @type {?}
         * @protected
         */
        CartTotalsComponent.prototype.cartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartTotalsModule = /** @class */ (function () {
        function CartTotalsModule() {
        }
        CartTotalsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CartTotalsComponent: {
                                        component: CartTotalsComponent,
                                    },
                                },
                            }))),
                            CartSharedModule,
                            core$1.I18nModule,
                            CartCouponModule,
                        ],
                        declarations: [CartTotalsComponent],
                        exports: [CartTotalsComponent],
                        entryComponents: [CartTotalsComponent],
                    },] }
        ];
        return CartTotalsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MiniCartComponent = /** @class */ (function () {
        function MiniCartComponent(cartService) {
            this.cartService = cartService;
            this.iconTypes = ICON_TYPE;
            this.quantity$ = this.cartService.getActive().pipe(operators.startWith({ deliveryItemsQuantity: 0 }), operators.map((/**
             * @param {?} cart
             * @return {?}
             */
            function (cart) { return cart.deliveryItemsQuantity || 0; })));
            this.total$ = this.cartService.getActive().pipe(operators.filter((/**
             * @param {?} cart
             * @return {?}
             */
            function (cart) { return !!cart.totalPrice; })), operators.map((/**
             * @param {?} cart
             * @return {?}
             */
            function (cart) { return cart.totalPrice.formattedValue; })));
        }
        MiniCartComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-mini-cart',
                        template: "<a\n  [attr.aria-label]=\"\n    'miniCart.item' | cxTranslate: { count: quantity$ | async }\n  \"\n  [routerLink]=\"{ cxRoute: 'cart' } | cxUrl\"\n>\n  <cx-icon [type]=\"iconTypes.CART\"></cx-icon>\n\n  <span class=\"total\">{{ total$ | async }}</span>\n  <span class=\"count\">{{ quantity$ | async }}</span>\n</a>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        MiniCartComponent.ctorParameters = function () { return [
            { type: core$1.CartService }
        ]; };
        return MiniCartComponent;
    }());
    if (false) {
        /** @type {?} */
        MiniCartComponent.prototype.iconTypes;
        /** @type {?} */
        MiniCartComponent.prototype.quantity$;
        /** @type {?} */
        MiniCartComponent.prototype.total$;
        /**
         * @type {?}
         * @protected
         */
        MiniCartComponent.prototype.cartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MiniCartModule = /** @class */ (function () {
        function MiniCartModule() {
        }
        MiniCartModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    MiniCartComponent: {
                                        component: MiniCartComponent,
                                    },
                                },
                            }))),
                            core$1.UrlModule,
                            IconModule,
                            core$1.I18nModule,
                        ],
                        declarations: [MiniCartComponent],
                        exports: [MiniCartComponent],
                        entryComponents: [MiniCartComponent],
                    },] }
        ];
        return MiniCartModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddToWishListComponent = /** @class */ (function () {
        function AddToWishListComponent(wishListService, currentProductService, authService) {
            var _this = this;
            this.wishListService = wishListService;
            this.currentProductService = currentProductService;
            this.authService = authService;
            this.product$ = this.currentProductService.getProduct().pipe(operators.filter((/**
             * @param {?} product
             * @return {?}
             */
            function (product) { return Boolean(product); })), operators.tap((/**
             * @param {?} product
             * @return {?}
             */
            function (product) { return _this.setStockInfo(product); })));
            this.wishListEntries$ = this.wishListService.getWishList().pipe(operators.filter((/**
             * @param {?} wishlist
             * @return {?}
             */
            function (wishlist) { return Boolean(wishlist); })), operators.map((/**
             * @param {?} wishList
             * @return {?}
             */
            function (wishList) { return wishList.entries; })));
            this.userLoggedIn$ = this.authService.isUserLoggedIn();
            this.loading$ = this.wishListService.getWishListLoading();
            this.hasStock = false;
            this.iconTypes = ICON_TYPE;
        }
        /**
         * @param {?} product
         * @return {?}
         */
        AddToWishListComponent.prototype.add = /**
         * @param {?} product
         * @return {?}
         */
        function (product) {
            this.wishListService.addEntry(product.code);
        };
        /**
         * @param {?} entry
         * @return {?}
         */
        AddToWishListComponent.prototype.remove = /**
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            this.wishListService.removeEntry(entry);
        };
        /**
         * @param {?} product
         * @param {?} entries
         * @return {?}
         */
        AddToWishListComponent.prototype.getProductInWishList = /**
         * @param {?} product
         * @param {?} entries
         * @return {?}
         */
        function (product, entries) {
            /** @type {?} */
            var item = entries.find((/**
             * @param {?} entry
             * @return {?}
             */
            function (entry) { return entry.product.code === product.code; }));
            return item;
        };
        /**
         * @private
         * @param {?} product
         * @return {?}
         */
        AddToWishListComponent.prototype.setStockInfo = /**
         * @private
         * @param {?} product
         * @return {?}
         */
        function (product) {
            this.hasStock =
                product.stock && product.stock.stockLevelStatus !== 'outOfStock';
        };
        AddToWishListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-add-to-wishlist',
                        template: "<ng-container *ngIf=\"product$ | async as product\">\n  <ng-container *ngIf=\"userLoggedIn$ | async; else loginPrompt\">\n    <ng-container *ngIf=\"wishListEntries$ | async as entries\">\n      <ng-container *ngIf=\"hasStock\">\n        <div\n          *ngIf=\"getProductInWishList(product, entries) as entry; else addItem\"\n        >\n          <button\n            class=\"btn btn-link button-remove\"\n            (click)=\"remove(entry)\"\n            [disabled]=\"loading$ | async\"\n          >\n            <cx-icon [type]=\"iconTypes.HEART\"></cx-icon>\n            <span class=\"button-text\">{{\n              'addToWishList.remove' | cxTranslate\n            }}</span>\n          </button>\n        </div>\n        <ng-template #addItem>\n          <button\n            class=\"btn btn-link button-add\"\n            (click)=\"add(product)\"\n            [disabled]=\"loading$ | async\"\n          >\n            <cx-icon [type]=\"iconTypes.EMPTY_HEART\"></cx-icon>\n            <span class=\"button-text\">{{\n              'addToWishList.add' | cxTranslate\n            }}</span>\n          </button>\n        </ng-template>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #loginPrompt>\n  <ng-container *ngIf=\"hasStock\">\n    <a\n      class=\"btn btn-link button-add-link\"\n      [routerLink]=\"{ cxRoute: 'login' } | cxUrl\"\n    >\n      <cx-icon [type]=\"iconTypes.EMPTY_HEART\"></cx-icon>\n      <span class=\"button-text\">{{\n        'addToWishList.anonymous' | cxTranslate\n      }}</span>\n    </a>\n  </ng-container>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        AddToWishListComponent.ctorParameters = function () { return [
            { type: core$1.WishListService },
            { type: CurrentProductService },
            { type: core$1.AuthService }
        ]; };
        return AddToWishListComponent;
    }());
    if (false) {
        /** @type {?} */
        AddToWishListComponent.prototype.product$;
        /** @type {?} */
        AddToWishListComponent.prototype.wishListEntries$;
        /** @type {?} */
        AddToWishListComponent.prototype.userLoggedIn$;
        /** @type {?} */
        AddToWishListComponent.prototype.loading$;
        /** @type {?} */
        AddToWishListComponent.prototype.hasStock;
        /** @type {?} */
        AddToWishListComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @protected
         */
        AddToWishListComponent.prototype.wishListService;
        /**
         * @type {?}
         * @protected
         */
        AddToWishListComponent.prototype.currentProductService;
        /**
         * @type {?}
         * @protected
         */
        AddToWishListComponent.prototype.authService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddToWishListModule = /** @class */ (function () {
        function AddToWishListModule() {
        }
        AddToWishListModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    AddToWishListComponent: {
                                        component: AddToWishListComponent,
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                            IconModule,
                            router.RouterModule,
                            core$1.UrlModule,
                        ],
                        declarations: [AddToWishListComponent],
                        entryComponents: [AddToWishListComponent],
                        exports: [AddToWishListComponent],
                    },] }
        ];
        return AddToWishListModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SaveForLaterComponent = /** @class */ (function () {
        function SaveForLaterComponent(cmsService, cartService, selectiveCartService) {
            this.cmsService = cmsService;
            this.cartService = cartService;
            this.selectiveCartService = selectiveCartService;
        }
        /**
         * @return {?}
         */
        SaveForLaterComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.isCartEmpty$ = this.cartService
                .getActive()
                .pipe(operators.map((/**
             * @param {?} cart
             * @return {?}
             */
            function (cart) { return !(cart && cart.totalItems && cart.totalItems > 0); })));
            this.saveForLater$ = this.selectiveCartService.getCart();
            this.entries$ = this.selectiveCartService
                .getEntries()
                .pipe(operators.filter((/**
             * @param {?} entries
             * @return {?}
             */
            function (entries) { return entries.length > 0; })));
            this.cartLoaded$ = rxjs.combineLatest([
                this.cartService.getLoaded(),
                this.selectiveCartService.getLoaded(),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), cartLoaded = _b[0], sflLoaded = _b[1];
                return cartLoaded && sflLoaded;
            })));
            this.data$ = this.cmsService.getComponentData('EmptyCartParagraphComponent');
        };
        /**
         * @param {?} item
         * @return {?}
         */
        SaveForLaterComponent.prototype.moveToCart = /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            this.selectiveCartService.removeEntry(item);
            this.cartService.addEntry(item.product.code, item.quantity);
        };
        SaveForLaterComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-save-for-later',
                        template: "<ng-container *ngIf=\"isCartEmpty$ | async\">\n  <p\n    *ngIf=\"data$ | async as data\"\n    [innerHTML]=\"data.content\"\n    class=\"cx-empty-cart-info\"\n  ></p>\n</ng-container>\n\n<ng-container *ngIf=\"saveForLater$ | async as saveForLater\">\n  <ng-container *ngIf=\"entries$ | async as entries\">\n    <div *ngIf=\"saveForLater.totalItems > 0\" class=\"cart-details-wrapper\">\n      <div class=\"cx-total\">\n        {{\n          'saveForLaterItems.itemTotal'\n            | cxTranslate: { count: saveForLater.totalItems }\n        }}\n      </div>\n      <cx-cart-item-list\n        [items]=\"entries\"\n        [isReadOnly]=\"true\"\n        [cartIsLoading]=\"!(cartLoaded$ | async)\"\n        [options]=\"{\n          isSaveForLater: true,\n          optionalBtn: moveToCartBtn\n        }\"\n      ></cx-cart-item-list>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template let-ctx #moveToCartBtn>\n  <div class=\"col-md-3 col-lg-3 col-xl-3 cx-sfl-btn\">\n    <button\n      class=\"link\"\n      [disabled]=\"ctx.loading\"\n      (click)=\"moveToCart(ctx.item)\"\n    >\n      {{ 'saveForLaterItems.moveToCart' | cxTranslate }}\n    </button>\n  </div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        SaveForLaterComponent.ctorParameters = function () { return [
            { type: core$1.CmsService },
            { type: core$1.ActiveCartService },
            { type: core$1.SelectiveCartService }
        ]; };
        return SaveForLaterComponent;
    }());
    if (false) {
        /** @type {?} */
        SaveForLaterComponent.prototype.saveForLater$;
        /** @type {?} */
        SaveForLaterComponent.prototype.cart$;
        /** @type {?} */
        SaveForLaterComponent.prototype.entries$;
        /** @type {?} */
        SaveForLaterComponent.prototype.cartLoaded$;
        /** @type {?} */
        SaveForLaterComponent.prototype.data$;
        /** @type {?} */
        SaveForLaterComponent.prototype.isCartEmpty$;
        /**
         * @type {?}
         * @protected
         */
        SaveForLaterComponent.prototype.cmsService;
        /**
         * @type {?}
         * @protected
         */
        SaveForLaterComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        SaveForLaterComponent.prototype.selectiveCartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SaveForLaterModule = /** @class */ (function () {
        function SaveForLaterModule() {
        }
        SaveForLaterModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    SaveForLaterComponent: {
                                        component: SaveForLaterComponent,
                                    },
                                },
                                features: {
                                    saveForLater: '1.5',
                                },
                            }))),
                            core$1.I18nModule,
                            CartSharedModule,
                        ],
                        declarations: [SaveForLaterComponent],
                        exports: [SaveForLaterComponent],
                        entryComponents: [SaveForLaterComponent],
                    },] }
        ];
        return SaveForLaterModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CartComponentModule = /** @class */ (function () {
        function CartComponentModule() {
        }
        CartComponentModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            ngBootstrap.NgbModule,
                            CartDetailsModule,
                            CartTotalsModule,
                            CartSharedModule,
                            SaveForLaterModule,
                        ],
                        exports: [
                            AddToWishListModule,
                            CartDetailsModule,
                            CartTotalsModule,
                            CartSharedModule,
                            AddToCartModule,
                            MiniCartModule,
                            core$1.CartModule,
                            SaveForLaterModule,
                        ],
                        declarations: [],
                        providers: [
                            {
                                provide: PAGE_LAYOUT_HANDLER,
                                useExisting: CartPageLayoutHandler,
                                multi: true,
                            },
                        ],
                    },] }
        ];
        return CartComponentModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var DeliveryModePreferences = {
        FREE: 'FREE',
        LEAST_EXPENSIVE: 'LEAST_EXPENSIVE',
        MOST_EXPENSIVE: 'MOST_EXPENSIVE',
    };
    /**
     * @abstract
     */
    var   /**
     * @abstract
     */
    CheckoutConfig = /** @class */ (function () {
        function CheckoutConfig() {
        }
        return CheckoutConfig;
    }());
    if (false) {
        /** @type {?} */
        CheckoutConfig.prototype.checkout;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var CheckoutStepType = {
        SHIPPING_ADDRESS: 'shippingAddress',
        DELIVERY_MODE: 'deliveryMode',
        PAYMENT_DETAILS: 'paymentDetails',
        REVIEW_ORDER: 'reviewOrder',
    };
    /**
     * @record
     */
    function CheckoutStep() { }
    if (false) {
        /** @type {?} */
        CheckoutStep.prototype.id;
        /** @type {?} */
        CheckoutStep.prototype.name;
        /** @type {?} */
        CheckoutStep.prototype.routeName;
        /** @type {?} */
        CheckoutStep.prototype.type;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaultCheckoutConfig = {
        checkout: {
            steps: [
                {
                    id: 'shippingAddress',
                    name: 'checkoutProgress.shippingAddress',
                    routeName: 'checkoutShippingAddress',
                    type: [CheckoutStepType.SHIPPING_ADDRESS],
                },
                {
                    id: 'deliveryMode',
                    name: 'checkoutProgress.deliveryMode',
                    routeName: 'checkoutDeliveryMode',
                    type: [CheckoutStepType.DELIVERY_MODE],
                },
                {
                    id: 'paymentDetails',
                    name: 'checkoutProgress.paymentDetails',
                    routeName: 'checkoutPaymentDetails',
                    type: [CheckoutStepType.PAYMENT_DETAILS],
                },
                {
                    id: 'reviewOrder',
                    name: 'checkoutProgress.reviewOrder',
                    routeName: 'checkoutReviewOrder',
                    type: [CheckoutStepType.REVIEW_ORDER],
                },
            ],
            express: false,
            defaultDeliveryMode: [DeliveryModePreferences.FREE],
            guest: false,
        },
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutConfigService = /** @class */ (function () {
        function CheckoutConfigService(checkoutConfig, routingConfigService) {
            this.checkoutConfig = checkoutConfig;
            this.routingConfigService = routingConfigService;
            this.steps = this.checkoutConfig.checkout.steps;
            this.express = this.checkoutConfig.checkout.express;
            this.guest = this.checkoutConfig.checkout.guest;
            this.defaultDeliveryMode = this.checkoutConfig.checkout.defaultDeliveryMode || [];
        }
        /**
         * @param {?} currentStepType
         * @return {?}
         */
        CheckoutConfigService.prototype.getCheckoutStep = /**
         * @param {?} currentStepType
         * @return {?}
         */
        function (currentStepType) {
            return this.steps[this.getCheckoutStepIndex('type', currentStepType)];
        };
        /**
         * @param {?} currentStepType
         * @return {?}
         */
        CheckoutConfigService.prototype.getCheckoutStepRoute = /**
         * @param {?} currentStepType
         * @return {?}
         */
        function (currentStepType) {
            return this.getCheckoutStep(currentStepType).routeName;
        };
        /**
         * @return {?}
         */
        CheckoutConfigService.prototype.getFirstCheckoutStepRoute = /**
         * @return {?}
         */
        function () {
            return this.steps[0].routeName;
        };
        /**
         * @param {?} activatedRoute
         * @return {?}
         */
        CheckoutConfigService.prototype.getNextCheckoutStepUrl = /**
         * @param {?} activatedRoute
         * @return {?}
         */
        function (activatedRoute) {
            /** @type {?} */
            var stepIndex = this.getCurrentStepIndex(activatedRoute);
            return stepIndex >= 0 && this.steps[stepIndex + 1]
                ? this.getStepUrlFromStepRoute(this.steps[stepIndex + 1].routeName)
                : null;
        };
        /**
         * @param {?} activatedRoute
         * @return {?}
         */
        CheckoutConfigService.prototype.getPreviousCheckoutStepUrl = /**
         * @param {?} activatedRoute
         * @return {?}
         */
        function (activatedRoute) {
            /** @type {?} */
            var stepIndex = this.getCurrentStepIndex(activatedRoute);
            return stepIndex >= 0 && this.steps[stepIndex - 1]
                ? this.getStepUrlFromStepRoute(this.steps[stepIndex - 1].routeName)
                : null;
        };
        /**
         * @param {?} activatedRoute
         * @return {?}
         */
        CheckoutConfigService.prototype.getCurrentStepIndex = /**
         * @param {?} activatedRoute
         * @return {?}
         */
        function (activatedRoute) {
            var e_1, _a;
            /** @type {?} */
            var currentStepUrl = this.getStepUrlFromActivatedRoute(activatedRoute);
            /** @type {?} */
            var stepIndex;
            /** @type {?} */
            var index = 0;
            try {
                for (var _b = __values(this.steps), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var step = _c.value;
                    if (currentStepUrl === "/" + this.getStepUrlFromStepRoute(step.routeName)) {
                        stepIndex = index;
                    }
                    else {
                        index++;
                    }
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return stepIndex >= 0 ? stepIndex : null;
        };
        /**
         * @protected
         * @param {?} deliveryMode1
         * @param {?} deliveryMode2
         * @return {?}
         */
        CheckoutConfigService.prototype.compareDeliveryCost = /**
         * @protected
         * @param {?} deliveryMode1
         * @param {?} deliveryMode2
         * @return {?}
         */
        function (deliveryMode1, deliveryMode2) {
            if (deliveryMode1.deliveryCost.value > deliveryMode2.deliveryCost.value) {
                return 1;
            }
            else if (deliveryMode1.deliveryCost.value < deliveryMode2.deliveryCost.value) {
                return -1;
            }
            return 0;
        };
        /**
         * @protected
         * @param {?} deliveryModes
         * @param {?=} index
         * @return {?}
         */
        CheckoutConfigService.prototype.findMatchingDeliveryMode = /**
         * @protected
         * @param {?} deliveryModes
         * @param {?=} index
         * @return {?}
         */
        function (deliveryModes, index) {
            var _this = this;
            if (index === void 0) { index = 0; }
            switch (this.defaultDeliveryMode[index]) {
                case DeliveryModePreferences.FREE:
                    if (deliveryModes[0].deliveryCost.value === 0) {
                        return deliveryModes[0].code;
                    }
                    break;
                case DeliveryModePreferences.LEAST_EXPENSIVE:
                    /** @type {?} */
                    var leastExpensiveFound = deliveryModes.find((/**
                     * @param {?} deliveryMode
                     * @return {?}
                     */
                    function (deliveryMode) { return deliveryMode.deliveryCost.value !== 0; }));
                    if (leastExpensiveFound) {
                        return leastExpensiveFound.code;
                    }
                    break;
                case DeliveryModePreferences.MOST_EXPENSIVE:
                    return deliveryModes[deliveryModes.length - 1].code;
                default:
                    /** @type {?} */
                    var codeFound = deliveryModes.find((/**
                     * @param {?} deliveryMode
                     * @return {?}
                     */
                    function (deliveryMode) { return deliveryMode.code === _this.defaultDeliveryMode[index]; }));
                    if (codeFound) {
                        return codeFound.code;
                    }
            }
            /** @type {?} */
            var lastMode = this.defaultDeliveryMode.length - 1 <= index;
            return lastMode
                ? deliveryModes[0].code
                : this.findMatchingDeliveryMode(deliveryModes, index + 1);
        };
        /**
         * @param {?} deliveryModes
         * @return {?}
         */
        CheckoutConfigService.prototype.getPreferredDeliveryMode = /**
         * @param {?} deliveryModes
         * @return {?}
         */
        function (deliveryModes) {
            deliveryModes.sort(this.compareDeliveryCost);
            return this.findMatchingDeliveryMode(deliveryModes);
        };
        /**
         * @return {?}
         */
        CheckoutConfigService.prototype.isExpressCheckout = /**
         * @return {?}
         */
        function () {
            return this.express;
        };
        /**
         * @return {?}
         */
        CheckoutConfigService.prototype.isGuestCheckout = /**
         * @return {?}
         */
        function () {
            return this.guest;
        };
        /**
         * @private
         * @param {?} activatedRoute
         * @return {?}
         */
        CheckoutConfigService.prototype.getStepUrlFromActivatedRoute = /**
         * @private
         * @param {?} activatedRoute
         * @return {?}
         */
        function (activatedRoute) {
            return activatedRoute &&
                activatedRoute.snapshot &&
                activatedRoute.snapshot.url
                ? "/" + activatedRoute.snapshot.url.join('/')
                : null;
        };
        /**
         * @private
         * @param {?} stepRoute
         * @return {?}
         */
        CheckoutConfigService.prototype.getStepUrlFromStepRoute = /**
         * @private
         * @param {?} stepRoute
         * @return {?}
         */
        function (stepRoute) {
            return this.routingConfigService.getRouteConfig(stepRoute).paths[0];
        };
        /**
         * @private
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        CheckoutConfigService.prototype.getCheckoutStepIndex = /**
         * @private
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        function (key, value) {
            return key && value
                ? this.steps.findIndex((/**
                 * @param {?} step
                 * @return {?}
                 */
                function (step) { return step[key].includes(value); }))
                : null;
        };
        CheckoutConfigService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CheckoutConfigService.ctorParameters = function () { return [
            { type: CheckoutConfig },
            { type: core$1.RoutingConfigService }
        ]; };
        /** @nocollapse */ CheckoutConfigService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CheckoutConfigService_Factory() { return new CheckoutConfigService(core.ɵɵinject(CheckoutConfig), core.ɵɵinject(core$1.RoutingConfigService)); }, token: CheckoutConfigService, providedIn: "root" });
        return CheckoutConfigService;
    }());
    if (false) {
        /** @type {?} */
        CheckoutConfigService.prototype.steps;
        /**
         * @type {?}
         * @private
         */
        CheckoutConfigService.prototype.express;
        /**
         * @type {?}
         * @private
         */
        CheckoutConfigService.prototype.guest;
        /**
         * @type {?}
         * @private
         */
        CheckoutConfigService.prototype.defaultDeliveryMode;
        /**
         * @type {?}
         * @private
         */
        CheckoutConfigService.prototype.checkoutConfig;
        /**
         * @type {?}
         * @private
         */
        CheckoutConfigService.prototype.routingConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutAuthGuard = /** @class */ (function () {
        function CheckoutAuthGuard(routingService, authService, authRedirectService, cartService, checkoutConfigService) {
            this.routingService = routingService;
            this.authService = authService;
            this.authRedirectService = authRedirectService;
            this.cartService = cartService;
            this.checkoutConfigService = checkoutConfigService;
        }
        /**
         * @return {?}
         */
        CheckoutAuthGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return rxjs.combineLatest([
                this.authService.getUserToken(),
                this.cartService.getAssignedUser(),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), token = _b[0], user = _b[1];
                if (!token.access_token) {
                    if (_this.cartService.isGuestCart()) {
                        return Boolean(user);
                    }
                    if (_this.checkoutConfigService.isGuestCheckout()) {
                        _this.routingService.go({ cxRoute: 'login' }, { forced: true });
                    }
                    else {
                        _this.routingService.go({ cxRoute: 'login' });
                    }
                    _this.authRedirectService.reportAuthGuard();
                }
                return !!token.access_token;
            })));
        };
        CheckoutAuthGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CheckoutAuthGuard.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.AuthService },
            { type: core$1.AuthRedirectService },
            { type: core$1.CartService },
            { type: CheckoutConfigService }
        ]; };
        /** @nocollapse */ CheckoutAuthGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CheckoutAuthGuard_Factory() { return new CheckoutAuthGuard(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.AuthService), core.ɵɵinject(core$1.AuthRedirectService), core.ɵɵinject(core$1.CartService), core.ɵɵinject(CheckoutConfigService)); }, token: CheckoutAuthGuard, providedIn: "root" });
        return CheckoutAuthGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CheckoutAuthGuard.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        CheckoutAuthGuard.prototype.authService;
        /**
         * @type {?}
         * @private
         */
        CheckoutAuthGuard.prototype.authRedirectService;
        /**
         * @type {?}
         * @private
         */
        CheckoutAuthGuard.prototype.cartService;
        /**
         * @type {?}
         * @private
         */
        CheckoutAuthGuard.prototype.checkoutConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutDetailsService = /** @class */ (function () {
        function CheckoutDetailsService(checkoutService, checkoutDeliveryService, checkoutPaymentService, cartService) {
            var _this = this;
            this.checkoutService = checkoutService;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.checkoutPaymentService = checkoutPaymentService;
            this.cartService = cartService;
            this.cartId$ = this.cartService.getActive().pipe(operators.map((/**
             * @param {?} cartData
             * @return {?}
             */
            function (cartData) {
                if ((cartData.user && cartData.user.uid === core$1.OCC_USER_ID_ANONYMOUS) ||
                    _this.cartService.isGuestCart()) {
                    return cartData.guid;
                }
                return cartData.code;
            })), operators.filter((/**
             * @param {?} cartId
             * @return {?}
             */
            function (cartId) { return !!cartId; })));
            this.getCheckoutDetailsLoaded$ = this.cartId$.pipe(operators.tap((/**
             * @param {?} cartId
             * @return {?}
             */
            function (cartId) { return _this.checkoutService.loadCheckoutDetails(cartId); })), operators.shareReplay(1), operators.switchMap((/**
             * @return {?}
             */
            function () { return _this.checkoutService.getCheckoutDetailsLoaded(); })), operators.skipWhile((/**
             * @param {?} loaded
             * @return {?}
             */
            function (loaded) { return !loaded; })));
        }
        /**
         * @return {?}
         */
        CheckoutDetailsService.prototype.getDeliveryAddress = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.getCheckoutDetailsLoaded$.pipe(operators.switchMap((/**
             * @return {?}
             */
            function () { return _this.checkoutDeliveryService.getDeliveryAddress(); })));
        };
        /**
         * @return {?}
         */
        CheckoutDetailsService.prototype.getSelectedDeliveryModeCode = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.getCheckoutDetailsLoaded$.pipe(operators.switchMap((/**
             * @return {?}
             */
            function () {
                return _this.checkoutDeliveryService.getSelectedDeliveryModeCode();
            })));
        };
        /**
         * @return {?}
         */
        CheckoutDetailsService.prototype.getPaymentDetails = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.getCheckoutDetailsLoaded$.pipe(operators.switchMap((/**
             * @return {?}
             */
            function () { return _this.checkoutPaymentService.getPaymentDetails(); })));
        };
        CheckoutDetailsService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CheckoutDetailsService.ctorParameters = function () { return [
            { type: core$1.CheckoutService },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.CheckoutPaymentService },
            { type: core$1.CartService }
        ]; };
        /** @nocollapse */ CheckoutDetailsService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CheckoutDetailsService_Factory() { return new CheckoutDetailsService(core.ɵɵinject(core$1.CheckoutService), core.ɵɵinject(core$1.CheckoutDeliveryService), core.ɵɵinject(core$1.CheckoutPaymentService), core.ɵɵinject(core$1.CartService)); }, token: CheckoutDetailsService, providedIn: "root" });
        return CheckoutDetailsService;
    }());
    if (false) {
        /** @type {?} */
        CheckoutDetailsService.prototype.cartId$;
        /** @type {?} */
        CheckoutDetailsService.prototype.getCheckoutDetailsLoaded$;
        /**
         * @type {?}
         * @private
         */
        CheckoutDetailsService.prototype.checkoutService;
        /**
         * @type {?}
         * @private
         */
        CheckoutDetailsService.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @private
         */
        CheckoutDetailsService.prototype.checkoutPaymentService;
        /**
         * @type {?}
         * @private
         */
        CheckoutDetailsService.prototype.cartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ExpressCheckoutService = /** @class */ (function () {
        function ExpressCheckoutService(userAddressService, userPaymentService, checkoutDeliveryService, checkoutPaymentService, checkoutDetailsService, checkoutConfigService) {
            this.userAddressService = userAddressService;
            this.userPaymentService = userPaymentService;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.checkoutPaymentService = checkoutPaymentService;
            this.checkoutDetailsService = checkoutDetailsService;
            this.checkoutConfigService = checkoutConfigService;
            this.setShippingAddress();
            this.setDeliveryMode();
            this.setPaymentMethod();
        }
        /**
         * @protected
         * @return {?}
         */
        ExpressCheckoutService.prototype.setShippingAddress = /**
         * @protected
         * @return {?}
         */
        function () {
            var _this = this;
            this.shippingAddressSet$ = rxjs.combineLatest([
                this.userAddressService.getAddresses(),
                this.userAddressService.getAddressesLoadedSuccess(),
                this.checkoutDeliveryService.getSetDeliveryAddressProcess(),
            ]).pipe(operators.debounceTime(0), operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), addressesLoadedSuccess = _b[1];
                if (!addressesLoadedSuccess) {
                    _this.userAddressService.loadAddresses();
                }
            })), operators.filter((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), addressesLoadedSuccess = _b[1];
                return addressesLoadedSuccess;
            })), operators.switchMap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 3), addresses = _b[0], setDeliveryAddressProcess = _b[2];
                /** @type {?} */
                var defaultAddress = addresses.find((/**
                 * @param {?} address
                 * @return {?}
                 */
                function (address) { return address.defaultAddress; })) || addresses[0];
                if (defaultAddress && Object.keys(defaultAddress).length) {
                    if (!(setDeliveryAddressProcess.success ||
                        setDeliveryAddressProcess.error ||
                        setDeliveryAddressProcess.loading)) {
                        _this.checkoutDeliveryService.setDeliveryAddress(defaultAddress);
                    }
                    return rxjs.of(setDeliveryAddressProcess).pipe(operators.filter((/**
                     * @param {?} setDeliveryAddressProcessState
                     * @return {?}
                     */
                    function (setDeliveryAddressProcessState) {
                        return ((setDeliveryAddressProcessState.success ||
                            setDeliveryAddressProcessState.error) &&
                            !setDeliveryAddressProcessState.loading);
                    })), operators.switchMap((/**
                     * @param {?} setDeliveryAddressProcessState
                     * @return {?}
                     */
                    function (setDeliveryAddressProcessState) {
                        if (setDeliveryAddressProcessState.success) {
                            return _this.checkoutDetailsService.getDeliveryAddress();
                        }
                        return rxjs.of(false);
                    })), operators.map((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) { return Boolean(data && Object.keys(data).length); })));
                }
                return rxjs.of(false);
            })));
        };
        /**
         * @protected
         * @return {?}
         */
        ExpressCheckoutService.prototype.setPaymentMethod = /**
         * @protected
         * @return {?}
         */
        function () {
            var _this = this;
            this.paymentMethodSet$ = rxjs.combineLatest([
                this.userPaymentService.getPaymentMethods(),
                this.userPaymentService.getPaymentMethodsLoadedSuccess(),
                this.checkoutPaymentService.getSetPaymentDetailsResultProcess(),
            ]).pipe(operators.debounceTime(0), operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), paymentMethodsLoadedSuccess = _b[1];
                if (!paymentMethodsLoadedSuccess) {
                    _this.userPaymentService.loadPaymentMethods();
                }
            })), operators.filter((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), success = _b[1];
                return success;
            })), operators.switchMap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 3), payments = _b[0], setPaymentDetailsProcess = _b[2];
                /** @type {?} */
                var defaultPayment = payments.find((/**
                 * @param {?} address
                 * @return {?}
                 */
                function (address) { return address.defaultPayment; })) || payments[0];
                if (defaultPayment && Object.keys(defaultPayment).length) {
                    if (!(setPaymentDetailsProcess.success ||
                        setPaymentDetailsProcess.error ||
                        setPaymentDetailsProcess.loading)) {
                        _this.checkoutPaymentService.setPaymentDetails(defaultPayment);
                    }
                    return rxjs.of(setPaymentDetailsProcess).pipe(operators.filter((/**
                     * @param {?} setPaymentDetailsProcessState
                     * @return {?}
                     */
                    function (setPaymentDetailsProcessState) {
                        return ((setPaymentDetailsProcessState.success ||
                            setPaymentDetailsProcessState.error) &&
                            !setPaymentDetailsProcessState.loading);
                    })), operators.switchMap((/**
                     * @param {?} setPaymentDetailsProcessState
                     * @return {?}
                     */
                    function (setPaymentDetailsProcessState) {
                        if (setPaymentDetailsProcessState.success) {
                            return _this.checkoutDetailsService.getPaymentDetails();
                        }
                        return rxjs.of(false);
                    })), operators.map((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) { return Boolean(data && Object.keys(data).length); })));
                }
                return rxjs.of(false);
            })));
        };
        /**
         * @protected
         * @return {?}
         */
        ExpressCheckoutService.prototype.setDeliveryMode = /**
         * @protected
         * @return {?}
         */
        function () {
            var _this = this;
            this.deliveryModeSet$ = rxjs.combineLatest([
                this.shippingAddressSet$,
                this.checkoutDeliveryService.getSupportedDeliveryModes(),
                this.checkoutDeliveryService.getSetDeliveryModeProcess(),
                this.checkoutDeliveryService.getLoadSupportedDeliveryModeProcess(),
            ]).pipe(operators.debounceTime(0), operators.switchMap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 4), addressSet = _b[0], supportedDeliveryModes = _b[1], setDeliveryModeStatusFlag = _b[2], loadSupportedDeliveryModeStatus = _b[3];
                if (addressSet) {
                    return rxjs.of([
                        supportedDeliveryModes,
                        setDeliveryModeStatusFlag,
                        loadSupportedDeliveryModeStatus,
                    ]).pipe(operators.filter((/**
                     * @param {?} __0
                     * @return {?}
                     */
                    function (_a) {
                        var _b = __read(_a, 3), supportedDeliveryModeStatus = _b[2];
                        return supportedDeliveryModeStatus.success;
                    })), operators.switchMap((/**
                     * @param {?} __0
                     * @return {?}
                     */
                    function (_a) {
                        var _b = __read(_a, 3), deliveryModes = _b[0], setDeliveryModeStatus = _b[1];
                        if (Boolean(deliveryModes.length)) {
                            /** @type {?} */
                            var preferredDeliveryMode = _this.checkoutConfigService.getPreferredDeliveryMode(deliveryModes);
                            return rxjs.of([
                                preferredDeliveryMode,
                                setDeliveryModeStatus,
                            ]).pipe(operators.tap((/**
                             * @param {?} __0
                             * @return {?}
                             */
                            function (_a) {
                                var _b = __read(_a, 2), deliveryMode = _b[0], deliveryModeLoadingStatus = _b[1];
                                if (deliveryMode &&
                                    !(deliveryModeLoadingStatus.success ||
                                        deliveryModeLoadingStatus.error ||
                                        deliveryModeLoadingStatus.loading)) {
                                    _this.checkoutDeliveryService.setDeliveryMode(deliveryMode);
                                }
                            })), operators.filter((/**
                             * @param {?} __0
                             * @return {?}
                             */
                            function (_a) {
                                var _b = __read(_a, 2), deliveryModeLoadingStatus = _b[1];
                                return ((deliveryModeLoadingStatus.success ||
                                    deliveryModeLoadingStatus.error) &&
                                    !deliveryModeLoadingStatus.loading);
                            })), operators.switchMap((/**
                             * @param {?} __0
                             * @return {?}
                             */
                            function (_a) {
                                var _b = __read(_a, 2), deliveryModeLoadingStatus = _b[1];
                                if (deliveryModeLoadingStatus.success) {
                                    return _this.checkoutDetailsService.getSelectedDeliveryModeCode();
                                }
                                return rxjs.of(false);
                            })), operators.map((/**
                             * @param {?} data
                             * @return {?}
                             */
                            function (data) { return Boolean(data); })));
                        }
                        return rxjs.of(false);
                    })));
                }
                else {
                    return rxjs.of(false);
                }
            })));
        };
        /**
         * @protected
         * @return {?}
         */
        ExpressCheckoutService.prototype.resetCheckoutProcesses = /**
         * @protected
         * @return {?}
         */
        function () {
            this.checkoutDeliveryService.resetSetDeliveryAddressProcess();
            this.checkoutPaymentService.resetSetPaymentDetailsProcess();
            this.checkoutDeliveryService.resetSetDeliveryModeProcess();
        };
        /**
         * @return {?}
         */
        ExpressCheckoutService.prototype.trySetDefaultCheckoutDetails = /**
         * @return {?}
         */
        function () {
            this.resetCheckoutProcesses();
            return rxjs.combineLatest([this.deliveryModeSet$, this.paymentMethodSet$]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), deliveryModeSet = _b[0], paymentMethodSet = _b[1];
                return Boolean(deliveryModeSet && paymentMethodSet);
            })));
        };
        ExpressCheckoutService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        ExpressCheckoutService.ctorParameters = function () { return [
            { type: core$1.UserAddressService },
            { type: core$1.UserPaymentService },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.CheckoutPaymentService },
            { type: CheckoutDetailsService },
            { type: CheckoutConfigService }
        ]; };
        /** @nocollapse */ ExpressCheckoutService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ExpressCheckoutService_Factory() { return new ExpressCheckoutService(core.ɵɵinject(core$1.UserAddressService), core.ɵɵinject(core$1.UserPaymentService), core.ɵɵinject(core$1.CheckoutDeliveryService), core.ɵɵinject(core$1.CheckoutPaymentService), core.ɵɵinject(CheckoutDetailsService), core.ɵɵinject(CheckoutConfigService)); }, token: ExpressCheckoutService, providedIn: "root" });
        return ExpressCheckoutService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ExpressCheckoutService.prototype.shippingAddressSet$;
        /**
         * @type {?}
         * @private
         */
        ExpressCheckoutService.prototype.deliveryModeSet$;
        /**
         * @type {?}
         * @private
         */
        ExpressCheckoutService.prototype.paymentMethodSet$;
        /**
         * @type {?}
         * @protected
         */
        ExpressCheckoutService.prototype.userAddressService;
        /**
         * @type {?}
         * @protected
         */
        ExpressCheckoutService.prototype.userPaymentService;
        /**
         * @type {?}
         * @protected
         */
        ExpressCheckoutService.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @protected
         */
        ExpressCheckoutService.prototype.checkoutPaymentService;
        /**
         * @type {?}
         * @protected
         */
        ExpressCheckoutService.prototype.checkoutDetailsService;
        /**
         * @type {?}
         * @protected
         */
        ExpressCheckoutService.prototype.checkoutConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutGuard = /** @class */ (function () {
        function CheckoutGuard(router, config, routingConfigService, checkoutConfigService, expressCheckoutService, cartService) {
            this.router = router;
            this.config = config;
            this.routingConfigService = routingConfigService;
            this.checkoutConfigService = checkoutConfigService;
            this.expressCheckoutService = expressCheckoutService;
            this.cartService = cartService;
            /**
             * TODO(issue:#4309) Deprecated since 1.2.0
             */
            if (this.checkoutConfigService) {
                this.firstStep$ = rxjs.of(this.router.parseUrl(this.routingConfigService.getRouteConfig(this.checkoutConfigService.getFirstCheckoutStepRoute()).paths[0]));
            }
            else {
                this.firstStep$ = rxjs.of(this.router.parseUrl(this.routingConfigService.getRouteConfig(this.config.checkout.steps[0].routeName).paths[0]));
            }
        }
        /**
         * @return {?}
         */
        CheckoutGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            /**
             * TODO(issue:#4309) Deprecated since 1.2.0
             */
            if (this.checkoutConfigService &&
                this.expressCheckoutService &&
                this.cartService) {
                if (this.checkoutConfigService.isExpressCheckout() &&
                    !this.cartService.isGuestCart()) {
                    return this.expressCheckoutService.trySetDefaultCheckoutDetails().pipe(operators.switchMap((/**
                     * @param {?} expressCheckoutPossible
                     * @return {?}
                     */
                    function (expressCheckoutPossible) {
                        return expressCheckoutPossible
                            ? rxjs.of(_this.router.parseUrl(_this.routingConfigService.getRouteConfig(_this.checkoutConfigService.getCheckoutStepRoute(CheckoutStepType.REVIEW_ORDER)).paths[0]))
                            : _this.firstStep$;
                    })));
                }
            }
            return this.firstStep$;
        };
        CheckoutGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CheckoutGuard.ctorParameters = function () { return [
            { type: router.Router },
            { type: CheckoutConfig },
            { type: core$1.RoutingConfigService },
            { type: CheckoutConfigService },
            { type: ExpressCheckoutService },
            { type: core$1.CartService }
        ]; };
        /** @nocollapse */ CheckoutGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CheckoutGuard_Factory() { return new CheckoutGuard(core.ɵɵinject(router.Router), core.ɵɵinject(CheckoutConfig), core.ɵɵinject(core$1.RoutingConfigService), core.ɵɵinject(CheckoutConfigService), core.ɵɵinject(ExpressCheckoutService), core.ɵɵinject(core$1.CartService)); }, token: CheckoutGuard, providedIn: "root" });
        return CheckoutGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CheckoutGuard.prototype.firstStep$;
        /**
         * @type {?}
         * @private
         */
        CheckoutGuard.prototype.router;
        /**
         * @type {?}
         * @private
         */
        CheckoutGuard.prototype.config;
        /**
         * @type {?}
         * @private
         */
        CheckoutGuard.prototype.routingConfigService;
        /**
         * @type {?}
         * @protected
         */
        CheckoutGuard.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @protected
         */
        CheckoutGuard.prototype.expressCheckoutService;
        /**
         * @type {?}
         * @protected
         */
        CheckoutGuard.prototype.cartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutOrchestratorComponent = /** @class */ (function () {
        function CheckoutOrchestratorComponent() {
        }
        CheckoutOrchestratorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-checkout-orchestrator',
                        template: "",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CheckoutOrchestratorComponent.ctorParameters = function () { return []; };
        return CheckoutOrchestratorComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutOrchestratorModule = /** @class */ (function () {
        function CheckoutOrchestratorModule() {
        }
        CheckoutOrchestratorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig(defaultCheckoutConfig),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutOrchestrator: {
                                        component: CheckoutOrchestratorComponent,
                                        guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutGuard],
                                    },
                                },
                            }))),
                        ],
                        providers: [{ provide: CheckoutConfig, useExisting: core$1.Config }],
                        declarations: [CheckoutOrchestratorComponent],
                        entryComponents: [CheckoutOrchestratorComponent],
                        exports: [CheckoutOrchestratorComponent],
                    },] }
        ];
        return CheckoutOrchestratorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutOrderSummaryComponent = /** @class */ (function () {
        function CheckoutOrderSummaryComponent(cartService) {
            this.cartService = cartService;
            this.cart$ = this.cartService.getActive();
        }
        CheckoutOrderSummaryComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-checkout-order-summary',
                        template: "<cx-order-summary [cart]=\"cart$ | async\"></cx-order-summary>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CheckoutOrderSummaryComponent.ctorParameters = function () { return [
            { type: core$1.CartService }
        ]; };
        return CheckoutOrderSummaryComponent;
    }());
    if (false) {
        /** @type {?} */
        CheckoutOrderSummaryComponent.prototype.cart$;
        /**
         * @type {?}
         * @protected
         */
        CheckoutOrderSummaryComponent.prototype.cartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutOrderSummaryModule = /** @class */ (function () {
        function CheckoutOrderSummaryModule() {
        }
        CheckoutOrderSummaryModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CartSharedModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutOrderSummary: {
                                        component: CheckoutOrderSummaryComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [CheckoutOrderSummaryComponent],
                        entryComponents: [CheckoutOrderSummaryComponent],
                        exports: [CheckoutOrderSummaryComponent],
                    },] }
        ];
        return CheckoutOrderSummaryModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutProgressMobileBottomComponent = /** @class */ (function () {
        function CheckoutProgressMobileBottomComponent(config, routingService, routingConfigService) {
            this.config = config;
            this.routingService = routingService;
            this.routingConfigService = routingConfigService;
        }
        /**
         * @return {?}
         */
        CheckoutProgressMobileBottomComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.steps = this.config.checkout.steps;
            this.routerState$ = this.routingService.getRouterState().pipe(operators.tap((/**
             * @param {?} router
             * @return {?}
             */
            function (router) {
                _this.activeStepUrl = router.state.context.id;
                _this.steps.forEach((/**
                 * @param {?} step
                 * @param {?} index
                 * @return {?}
                 */
                function (step, index) {
                    /** @type {?} */
                    var routeUrl = "/" + _this.routingConfigService.getRouteConfig(step.routeName).paths[0];
                    if (routeUrl === _this.activeStepUrl) {
                        _this.activeStepIndex = index;
                    }
                }));
            })));
        };
        CheckoutProgressMobileBottomComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-checkout-progress-mobile-bottom',
                        template: "<div *ngIf=\"routerState$ | async as routerState\">\n  <div class=\"cx-media\">\n    <div *ngFor=\"let step of steps; let i = index\">\n      <div class=\"cx-list-media\" *ngIf=\"i > activeStepIndex\">\n        <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\n      </div>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        CheckoutProgressMobileBottomComponent.ctorParameters = function () { return [
            { type: CheckoutConfig },
            { type: core$1.RoutingService },
            { type: core$1.RoutingConfigService }
        ]; };
        return CheckoutProgressMobileBottomComponent;
    }());
    if (false) {
        /** @type {?} */
        CheckoutProgressMobileBottomComponent.prototype.steps;
        /** @type {?} */
        CheckoutProgressMobileBottomComponent.prototype.routerState$;
        /** @type {?} */
        CheckoutProgressMobileBottomComponent.prototype.activeStepIndex;
        /** @type {?} */
        CheckoutProgressMobileBottomComponent.prototype.activeStepUrl;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressMobileBottomComponent.prototype.config;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressMobileBottomComponent.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressMobileBottomComponent.prototype.routingConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutProgressMobileBottomModule = /** @class */ (function () {
        function CheckoutProgressMobileBottomModule() {
        }
        CheckoutProgressMobileBottomModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                            router.RouterModule,
                            core$1.ConfigModule.withConfig(defaultCheckoutConfig),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutProgressMobileBottom: {
                                        component: CheckoutProgressMobileBottomComponent,
                                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],
                                    },
                                },
                            }))),
                        ],
                        declarations: [CheckoutProgressMobileBottomComponent],
                        entryComponents: [CheckoutProgressMobileBottomComponent],
                        exports: [CheckoutProgressMobileBottomComponent],
                    },] }
        ];
        return CheckoutProgressMobileBottomModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutProgressMobileTopComponent = /** @class */ (function () {
        function CheckoutProgressMobileTopComponent(config, routingService, cartService, routingConfigService) {
            this.config = config;
            this.routingService = routingService;
            this.cartService = cartService;
            this.routingConfigService = routingConfigService;
        }
        /**
         * @return {?}
         */
        CheckoutProgressMobileTopComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.steps = this.config.checkout.steps;
            this.cart$ = this.cartService.getActive();
            this.routerState$ = this.routingService.getRouterState().pipe(operators.tap((/**
             * @param {?} router
             * @return {?}
             */
            function (router) {
                _this.activeStepUrl = router.state.context.id;
                _this.steps.forEach((/**
                 * @param {?} step
                 * @param {?} index
                 * @return {?}
                 */
                function (step, index) {
                    /** @type {?} */
                    var routeUrl = "/" + _this.routingConfigService.getRouteConfig(step.routeName).paths[0];
                    if (routeUrl === _this.activeStepUrl) {
                        _this.activeStepIndex = index;
                    }
                }));
            })));
        };
        CheckoutProgressMobileTopComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-checkout-progress-mobile-top',
                        template: "<div *ngIf=\"routerState$ | async as routerState\">\n  <div *ngIf=\"cart$ | async as cart\">\n    <div class=\"cx-media\">\n      <div class=\"cx-list-media\" *ngIf=\"cart?.totalItems && cart?.subTotal\">\n        {{ 'cartItems.cartTotal' | cxTranslate: { count: cart.totalItems } }}:\n        {{ cart.subTotal.formattedValue }}\n      </div>\n      <div *ngFor=\"let step of steps; let i = index\">\n        <div class=\"cx-list-media\" *ngIf=\"i < activeStepIndex\">\n          <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\n          <button\n            class=\"btn btn-link\"\n            [routerLink]=\"{ cxRoute: step.routeName } | cxUrl\"\n          >\n            {{ 'common.edit' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"cx-list-media is-active\" *ngIf=\"i === activeStepIndex\">\n          <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        CheckoutProgressMobileTopComponent.ctorParameters = function () { return [
            { type: CheckoutConfig },
            { type: core$1.RoutingService },
            { type: core$1.CartService },
            { type: core$1.RoutingConfigService }
        ]; };
        return CheckoutProgressMobileTopComponent;
    }());
    if (false) {
        /** @type {?} */
        CheckoutProgressMobileTopComponent.prototype.steps;
        /** @type {?} */
        CheckoutProgressMobileTopComponent.prototype.routerState$;
        /** @type {?} */
        CheckoutProgressMobileTopComponent.prototype.cart$;
        /** @type {?} */
        CheckoutProgressMobileTopComponent.prototype.activeStepIndex;
        /** @type {?} */
        CheckoutProgressMobileTopComponent.prototype.activeStepUrl;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressMobileTopComponent.prototype.config;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressMobileTopComponent.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressMobileTopComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressMobileTopComponent.prototype.routingConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutProgressMobileTopModule = /** @class */ (function () {
        function CheckoutProgressMobileTopModule() {
        }
        CheckoutProgressMobileTopModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                            router.RouterModule,
                            core$1.ConfigModule.withConfig(defaultCheckoutConfig),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutProgressMobileTop: {
                                        component: CheckoutProgressMobileTopComponent,
                                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],
                                    },
                                },
                            }))),
                        ],
                        declarations: [CheckoutProgressMobileTopComponent],
                        entryComponents: [CheckoutProgressMobileTopComponent],
                        exports: [CheckoutProgressMobileTopComponent],
                    },] }
        ];
        return CheckoutProgressMobileTopModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutProgressComponent = /** @class */ (function () {
        function CheckoutProgressComponent(config, routingService, routingConfigService) {
            this.config = config;
            this.routingService = routingService;
            this.routingConfigService = routingConfigService;
        }
        /**
         * @return {?}
         */
        CheckoutProgressComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.steps = this.config.checkout.steps;
            this.routerState$ = this.routingService.getRouterState().pipe(operators.tap((/**
             * @param {?} router
             * @return {?}
             */
            function (router) {
                _this.activeStepUrl = router.state.context.id;
                _this.steps.forEach((/**
                 * @param {?} step
                 * @param {?} index
                 * @return {?}
                 */
                function (step, index) {
                    /** @type {?} */
                    var routeUrl = "/" + _this.routingConfigService.getRouteConfig(step.routeName).paths[0];
                    if (routeUrl === _this.activeStepUrl) {
                        _this.activeStepIndex = index;
                    }
                }));
            })));
        };
        CheckoutProgressComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-checkout-progress',
                        template: "<section *ngIf=\"routerState$ | async as routerState\">\n  <div class=\"cx-nav d-none d-lg-block d-xl-block\">\n    <ul class=\"cx-list\">\n      <li class=\"cx-item\" *ngFor=\"let step of steps; let i = index\">\n        <a\n          [routerLink]=\"{ cxRoute: step.routeName } | cxUrl\"\n          class=\"cx-link\"\n          [ngClass]=\"{\n            ' is-active': i === activeStepIndex,\n            ' is-disabled': i > activeStepIndex\n          }\"\n        >\n          {{ i + 1 }}. {{ step.name | cxTranslate }}\n        </a>\n      </li>\n    </ul>\n  </div>\n</section>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CheckoutProgressComponent.ctorParameters = function () { return [
            { type: CheckoutConfig },
            { type: core$1.RoutingService },
            { type: core$1.RoutingConfigService }
        ]; };
        return CheckoutProgressComponent;
    }());
    if (false) {
        /** @type {?} */
        CheckoutProgressComponent.prototype.steps;
        /** @type {?} */
        CheckoutProgressComponent.prototype.routerState$;
        /** @type {?} */
        CheckoutProgressComponent.prototype.activeStepIndex;
        /** @type {?} */
        CheckoutProgressComponent.prototype.activeStepUrl;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressComponent.prototype.config;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressComponent.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        CheckoutProgressComponent.prototype.routingConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutProgressModule = /** @class */ (function () {
        function CheckoutProgressModule() {
        }
        CheckoutProgressModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                            router.RouterModule,
                            core$1.ConfigModule.withConfig(defaultCheckoutConfig),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutProgress: {
                                        component: CheckoutProgressComponent,
                                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],
                                    },
                                },
                            }))),
                        ],
                        declarations: [CheckoutProgressComponent],
                        entryComponents: [CheckoutProgressComponent],
                        exports: [CheckoutProgressComponent],
                        providers: [{ provide: CheckoutConfig, useExisting: core$1.Config }],
                    },] }
        ];
        return CheckoutProgressModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ShippingAddressSetGuard = /** @class */ (function () {
        function ShippingAddressSetGuard(checkoutDetailsService, checkoutConfigService, routingConfigService, router) {
            this.checkoutDetailsService = checkoutDetailsService;
            this.checkoutConfigService = checkoutConfigService;
            this.routingConfigService = routingConfigService;
            this.router = router;
        }
        /**
         * @return {?}
         */
        ShippingAddressSetGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            /** @type {?} */
            var checkoutStep = this.checkoutConfigService.getCheckoutStep(CheckoutStepType.SHIPPING_ADDRESS);
            if (!checkoutStep && core.isDevMode()) {
                console.warn("Missing step with type " + CheckoutStepType.SHIPPING_ADDRESS + " in checkout configuration.");
            }
            return this.checkoutDetailsService
                .getDeliveryAddress()
                .pipe(operators.map((/**
             * @param {?} deliveryAddress
             * @return {?}
             */
            function (deliveryAddress) {
                return deliveryAddress && Object.keys(deliveryAddress).length
                    ? true
                    : _this.router.parseUrl(checkoutStep &&
                        _this.routingConfigService.getRouteConfig(checkoutStep.routeName).paths[0]);
            })));
        };
        ShippingAddressSetGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        ShippingAddressSetGuard.ctorParameters = function () { return [
            { type: CheckoutDetailsService },
            { type: CheckoutConfigService },
            { type: core$1.RoutingConfigService },
            { type: router.Router }
        ]; };
        /** @nocollapse */ ShippingAddressSetGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ShippingAddressSetGuard_Factory() { return new ShippingAddressSetGuard(core.ɵɵinject(CheckoutDetailsService), core.ɵɵinject(CheckoutConfigService), core.ɵɵinject(core$1.RoutingConfigService), core.ɵɵinject(router.Router)); }, token: ShippingAddressSetGuard, providedIn: "root" });
        return ShippingAddressSetGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ShippingAddressSetGuard.prototype.checkoutDetailsService;
        /**
         * @type {?}
         * @private
         */
        ShippingAddressSetGuard.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @private
         */
        ShippingAddressSetGuard.prototype.routingConfigService;
        /**
         * @type {?}
         * @private
         */
        ShippingAddressSetGuard.prototype.router;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DeliveryModeComponent = /** @class */ (function () {
        function DeliveryModeComponent(fb, checkoutDeliveryService, routingService, checkoutConfigService, activatedRoute) {
            this.fb = fb;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.routingService = routingService;
            this.checkoutConfigService = checkoutConfigService;
            this.activatedRoute = activatedRoute;
            this.allowRedirect = false;
            this.mode = this.fb.group({
                deliveryModeId: ['', forms.Validators.required],
            });
        }
        /**
         * @return {?}
         */
        DeliveryModeComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);
            this.checkoutStepUrlPrevious = this.checkoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute);
            this.supportedDeliveryModes$ = this.checkoutDeliveryService.getSupportedDeliveryModes();
            this.deliveryModeSub = this.supportedDeliveryModes$
                .pipe(operators.withLatestFrom(this.checkoutDeliveryService
                .getSelectedDeliveryMode()
                .pipe(operators.map((/**
             * @param {?} deliveryMode
             * @return {?}
             */
            function (deliveryMode) {
                return deliveryMode && deliveryMode.code ? deliveryMode.code : null;
            })))))
                .subscribe((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), deliveryModes = _b[0], code = _b[1];
                if (!code && deliveryModes && deliveryModes.length) {
                    code = _this.checkoutConfigService.getPreferredDeliveryMode(deliveryModes);
                }
                if (_this.allowRedirect &&
                    !!code &&
                    code === _this.currentDeliveryModeId) {
                    _this.routingService.go(_this.checkoutStepUrlNext);
                }
                _this.currentDeliveryModeId = code;
                if (code) {
                    _this.mode.controls['deliveryModeId'].setValue(code);
                }
            }));
        };
        /**
         * @param {?} code
         * @return {?}
         */
        DeliveryModeComponent.prototype.changeMode = /**
         * @param {?} code
         * @return {?}
         */
        function (code) {
            if (code !== this.currentDeliveryModeId) {
                this.currentDeliveryModeId = code;
            }
        };
        /**
         * @return {?}
         */
        DeliveryModeComponent.prototype.next = /**
         * @return {?}
         */
        function () {
            this.allowRedirect = true;
            if (this.mode.valid && this.mode.value) {
                if (!this.currentDeliveryModeId) {
                    this.currentDeliveryModeId = this.mode.value.deliveryModeId;
                }
                this.checkoutDeliveryService.setDeliveryMode(this.currentDeliveryModeId);
            }
            this.routingService.go(this.checkoutStepUrlNext);
        };
        /**
         * @return {?}
         */
        DeliveryModeComponent.prototype.back = /**
         * @return {?}
         */
        function () {
            this.routingService.go(this.checkoutStepUrlPrevious);
        };
        Object.defineProperty(DeliveryModeComponent.prototype, "deliveryModeInvalid", {
            get: /**
             * @return {?}
             */
            function () {
                return this.mode.controls['deliveryModeId'].invalid;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        DeliveryModeComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.deliveryModeSub) {
                this.deliveryModeSub.unsubscribe();
            }
        };
        DeliveryModeComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-delivery-mode',
                        template: "<div [formGroup]=\"mode\">\n  <div class=\"row\">\n    <div class=\"col-md-12 col-lg-9\">\n      <h3 class=\"cx-checkout-title d-none d-lg-block d-xl-block\">\n        {{ 'checkoutShipping.shippingMethod' | cxTranslate }}\n      </h3>\n\n      <ng-container\n        *ngIf=\"(supportedDeliveryModes$ | async)?.length; else loading\"\n      >\n        <div\n          class=\"form-check\"\n          *ngFor=\"let mode of supportedDeliveryModes$ | async\"\n        >\n          <input\n            class=\"form-check-input\"\n            role=\"radio\"\n            type=\"radio\"\n            id=\"deliveryMode-{{ mode.code }}\"\n            aria-checked=\"true\"\n            (change)=\"changeMode(mode.code)\"\n            [value]=\"mode.code\"\n            formControlName=\"deliveryModeId\"\n          />\n          <label\n            class=\"cx-delivery-label form-check-label\n                form-radio-label\"\n            for=\"deliveryMode-{{ mode.code }}\"\n          >\n            <div class=\"cx-delivery-mode\">{{ mode.name }}</div>\n            <div class=\"cx-delivery-price\">\n              {{ mode.deliveryCost.formattedValue }}\n            </div>\n            <div class=\"cx-delivery-details\">{{ mode.description }}</div>\n          </label>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n\n  <div class=\"row cx-checkout-btns\">\n    <div class=\"col-md-12 col-lg-6\">\n      <button class=\"btn btn-block btn-action\" (click)=\"back()\">\n        {{ 'common.back' | cxTranslate }}\n      </button>\n    </div>\n    <div class=\"col-md-12 col-lg-6\">\n      <button\n        class=\"btn btn-block btn-primary\"\n        [disabled]=\"deliveryModeInvalid\"\n        (click)=\"next()\"\n      >\n        {{ 'common.continue' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n\n<ng-template #loading>\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        DeliveryModeComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.RoutingService },
            { type: CheckoutConfigService },
            { type: router.ActivatedRoute }
        ]; };
        return DeliveryModeComponent;
    }());
    if (false) {
        /** @type {?} */
        DeliveryModeComponent.prototype.supportedDeliveryModes$;
        /** @type {?} */
        DeliveryModeComponent.prototype.selectedDeliveryMode$;
        /** @type {?} */
        DeliveryModeComponent.prototype.currentDeliveryModeId;
        /** @type {?} */
        DeliveryModeComponent.prototype.checkoutStepUrlNext;
        /** @type {?} */
        DeliveryModeComponent.prototype.checkoutStepUrlPrevious;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeComponent.prototype.allowRedirect;
        /** @type {?} */
        DeliveryModeComponent.prototype.deliveryModeSub;
        /** @type {?} */
        DeliveryModeComponent.prototype.mode;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeComponent.prototype.fb;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeComponent.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeComponent.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeComponent.prototype.activatedRoute;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DeliveryModeModule = /** @class */ (function () {
        function DeliveryModeModule() {
        }
        DeliveryModeModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            core$1.I18nModule,
                            SpinnerModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutDeliveryMode: {
                                        component: DeliveryModeComponent,
                                        guards: [
                                            CheckoutAuthGuard,
                                            CartNotEmptyGuard,
                                            ShippingAddressSetGuard,
                                        ],
                                    },
                                },
                            }))),
                        ],
                        declarations: [DeliveryModeComponent],
                        entryComponents: [DeliveryModeComponent],
                        exports: [DeliveryModeComponent],
                    },] }
        ];
        return DeliveryModeModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var DeliveryModeSetGuard = /** @class */ (function () {
        function DeliveryModeSetGuard(checkoutDetailsService, checkoutConfigService, routingConfigService, router) {
            this.checkoutDetailsService = checkoutDetailsService;
            this.checkoutConfigService = checkoutConfigService;
            this.routingConfigService = routingConfigService;
            this.router = router;
        }
        /**
         * @return {?}
         */
        DeliveryModeSetGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            /** @type {?} */
            var checkoutStep = this.checkoutConfigService.getCheckoutStep(CheckoutStepType.DELIVERY_MODE);
            if (!checkoutStep && core.isDevMode()) {
                console.warn("Missing step with type " + CheckoutStepType.DELIVERY_MODE + " in checkout configuration.");
            }
            return this.checkoutDetailsService
                .getSelectedDeliveryModeCode()
                .pipe(operators.map((/**
             * @param {?} mode
             * @return {?}
             */
            function (mode) {
                return mode && mode.length
                    ? true
                    : _this.router.parseUrl(checkoutStep &&
                        _this.routingConfigService.getRouteConfig(checkoutStep.routeName).paths[0]);
            })));
        };
        DeliveryModeSetGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        DeliveryModeSetGuard.ctorParameters = function () { return [
            { type: CheckoutDetailsService },
            { type: CheckoutConfigService },
            { type: core$1.RoutingConfigService },
            { type: router.Router }
        ]; };
        /** @nocollapse */ DeliveryModeSetGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function DeliveryModeSetGuard_Factory() { return new DeliveryModeSetGuard(core.ɵɵinject(CheckoutDetailsService), core.ɵɵinject(CheckoutConfigService), core.ɵɵinject(core$1.RoutingConfigService), core.ɵɵinject(router.Router)); }, token: DeliveryModeSetGuard, providedIn: "root" });
        return DeliveryModeSetGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        DeliveryModeSetGuard.prototype.checkoutDetailsService;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeSetGuard.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeSetGuard.prototype.routingConfigService;
        /**
         * @type {?}
         * @private
         */
        DeliveryModeSetGuard.prototype.router;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillingAddressFormComponent = /** @class */ (function () {
        function BillingAddressFormComponent(userAddressService) {
            this.userAddressService = userAddressService;
            this.selectedCountry$ = new rxjs.BehaviorSubject('');
        }
        /**
         * @return {?}
         */
        BillingAddressFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.regions$ = this.selectedCountry$.pipe(operators.switchMap((/**
             * @param {?} country
             * @return {?}
             */
            function (country) { return _this.userAddressService.getRegions(country); })), operators.tap((/**
             * @param {?} regions
             * @return {?}
             */
            function (regions) {
                /** @type {?} */
                var regionControl = _this.billingAddress.get('region.isocodeShort');
                if (regions.length > 0) {
                    regionControl.enable();
                }
                else {
                    regionControl.disable();
                }
            })));
        };
        /**
         * @param {?} country
         * @return {?}
         */
        BillingAddressFormComponent.prototype.countrySelected = /**
         * @param {?} country
         * @return {?}
         */
        function (country) {
            this.billingAddress['controls'].country['controls'].isocode.setValue(country.isocode);
            this.selectedCountry$.next(country.isocode);
        };
        /**
         * @param {?} region
         * @return {?}
         */
        BillingAddressFormComponent.prototype.regionSelected = /**
         * @param {?} region
         * @return {?}
         */
        function (region) {
            this.billingAddress['controls'].region['controls'].isocodeShort.setValue(region.isocodeShort);
        };
        BillingAddressFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-billing-address-form',
                        template: "<div [formGroup]=\"billingAddress\">\n  <div class=\"form-group\">\n    <ng-container *ngIf=\"countries$ | async as countries\">\n      <div *ngIf=\"countries.length !== 0\">\n        <label aria-required=\"true\">\n          <span class=\"label-content required\">{{\n            'addressForm.country' | cxTranslate\n          }}</span>\n          <ng-select\n            [searchable]=\"true\"\n            [clearable]=\"false\"\n            [items]=\"countries\"\n            bindLabel=\"name\"\n            bindValue=\"isocode\"\n            placeholder=\"{{ 'addressForm.selectOne' | cxTranslate }}\"\n            (change)=\"countrySelected($event)\"\n          >\n          </ng-select>\n        </label>\n      </div>\n    </ng-container>\n  </div>\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content required\">{{\n        'addressForm.firstName.label' | cxTranslate\n      }}</span>\n      <input\n        class=\"form-control\"\n        type=\"text\"\n        required\n        placeholder=\"{{ 'addressForm.firstName.placeholder' | cxTranslate }}\"\n        formControlName=\"firstName\"\n      />\n    </label>\n  </div>\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content required\">{{\n        'addressForm.lastName.label' | cxTranslate\n      }}</span>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        required\n        placeholder=\"{{ 'addressForm.lastName.placeholder' | cxTranslate }}\"\n        formControlName=\"lastName\"\n      />\n    </label>\n  </div>\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content required\">{{\n        'addressForm.address1' | cxTranslate\n      }}</span>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        required\n        placeholder=\"{{ 'addressForm.streetAddress' | cxTranslate }}\"\n        formControlName=\"line1\"\n      />\n    </label>\n  </div>\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'addressForm.address2' | cxTranslate\n      }}</span>\n      <input\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\"{{ 'addressForm.aptSuite' | cxTranslate }}\"\n        formControlName=\"line2\"\n      />\n    </label>\n  </div>\n  <div class=\"row\">\n    <div class=\"form-group col-md-6\">\n      <label>\n        <span class=\"label-content required\">{{\n          'addressForm.city.label' | cxTranslate\n        }}</span>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          required\n          placeholder=\"{{ 'addressForm.city.placeholder' | cxTranslate }}\"\n          formControlName=\"town\"\n        />\n      </label>\n    </div>\n    <div class=\"form-group col-md-6\">\n      <ng-container *ngIf=\"regions$ | async as regions\" formGroupName=\"region\">\n        <div *ngIf=\"regions.length !== 0\">\n          <label aria-required=\"true\">\n            <span class=\"label-content required\">{{\n              'addressForm.state' | cxTranslate\n            }}</span>\n            <ng-select\n              class=\"region-select\"\n              formControlName=\"isocodeShort\"\n              [searchable]=\"true\"\n              [clearable]=\"false\"\n              [items]=\"regions\"\n              bindLabel=\"{{ regions[0].name ? 'name' : 'isocodeShort' }}\"\n              bindValue=\"{{ regions[0].name ? 'isocodeShort' : 'region' }}\"\n              placeholder=\"{{ 'addressForm.selectOne' | cxTranslate }}\"\n              (change)=\"regionSelected($event)\"\n            >\n            </ng-select>\n          </label>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"form-group col-md-6\">\n      <label>\n        <span class=\"label-content required\">{{\n          'addressForm.zipCode.label' | cxTranslate\n        }}</span>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          required\n          placeholder=\"{{ 'addressForm.zipCode.placeholder' | cxTranslate }}\"\n          formControlName=\"postalCode\"\n        />\n      </label>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        BillingAddressFormComponent.ctorParameters = function () { return [
            { type: core$1.UserAddressService }
        ]; };
        BillingAddressFormComponent.propDecorators = {
            billingAddress: [{ type: core.Input }],
            countries$: [{ type: core.Input }]
        };
        return BillingAddressFormComponent;
    }());
    if (false) {
        /** @type {?} */
        BillingAddressFormComponent.prototype.regions$;
        /** @type {?} */
        BillingAddressFormComponent.prototype.billingAddress;
        /** @type {?} */
        BillingAddressFormComponent.prototype.countries$;
        /** @type {?} */
        BillingAddressFormComponent.prototype.selectedCountry$;
        /**
         * @type {?}
         * @protected
         */
        BillingAddressFormComponent.prototype.userAddressService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BillingAddressFormModule = /** @class */ (function () {
        function BillingAddressFormModule() {
        }
        BillingAddressFormModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            forms.FormsModule,
                            router.RouterModule,
                            ngSelect.NgSelectModule,
                            core$1.I18nModule,
                        ],
                        declarations: [BillingAddressFormComponent],
                        exports: [BillingAddressFormComponent],
                    },] }
        ];
        return BillingAddressFormModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SuggestedAddressDialogComponent = /** @class */ (function () {
        function SuggestedAddressDialogComponent(modalService) {
            this.modalService = modalService;
            this.iconTypes = ICON_TYPE;
        }
        /**
         * @return {?}
         */
        SuggestedAddressDialogComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.selectedAddress = this.suggestedAddresses.length
                ? this.suggestedAddresses[0]
                : this.enteredAddress;
        };
        /**
         * @param {?=} reason
         * @return {?}
         */
        SuggestedAddressDialogComponent.prototype.closeModal = /**
         * @param {?=} reason
         * @return {?}
         */
        function (reason) {
            this.modalService.closeActiveModal(reason);
        };
        SuggestedAddressDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-suggested-addresses-dialog',
                        template: "<div class=\"cx-dialog-header modal-header\">\n  <div class=\"cx-dialog-title modal-title\">\n    {{ 'checkoutAddress.verifyYourAddress' | cxTranslate }}\n  </div>\n  <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"closeModal()\">\n    <span aria-hidden=\"true\">\n      <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n    </span>\n  </button>\n</div>\n<div class=\"cx-dialog-body modal-body\" ngForm>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"cx-dialog-info col-md-12\">\n        <p>\n          {{ 'checkoutAddress.ensureAccuracySuggestChange' | cxTranslate }}\n          {{ 'checkoutAddress.chooseAddressToUse' | cxTranslate }}\n        </p>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"cx-dialog-options col-md-12\">\n        <div\n          class=\"form-check\"\n          *ngFor=\"let suggestedAddress of suggestedAddresses; let i = index\"\n        >\n          <input\n            class=\"form-check-input\"\n            type=\"radio\"\n            name=\"selectedAddress\"\n            [(ngModel)]=\"selectedAddress\"\n            [value]=\"suggestedAddress\"\n            [id]=\"'suggested-addresses--suggested-' + i\"\n          />\n          <label\n            class=\"form-check-label cx-dialog-label\"\n            [for]=\"'suggested-addresses--suggested-' + i\"\n          >\n            {{ 'checkoutAddress.suggestedAddress' | cxTranslate }}\n            {{ suggestedAddresses?.length > 1 ? i + 1 : null }}\n          </label>\n          <div class=\"cx-dialog-suggested\">\n            {{ suggestedAddress?.firstName }} {{ suggestedAddress?.lastName\n            }}<br />\n            {{ suggestedAddress?.line1 }}<br />\n            <span>{{ suggestedAddress?.line2 }}</span\n            ><br />\n            {{ suggestedAddress?.town }} {{ suggestedAddress?.region?.isocode\n            }}<br />\n            {{ suggestedAddress?.postalCode }}\n          </div>\n        </div>\n        <div class=\"form-check\">\n          <input\n            class=\"form-check-input\"\n            type=\"radio\"\n            name=\"selectedAddress\"\n            [(ngModel)]=\"selectedAddress\"\n            [value]=\"enteredAddress\"\n            id=\"suggested-addresses--entered\"\n          />\n          <label\n            class=\"form-check-label cx-dialog-label\"\n            for=\"suggested-addresses--entered\"\n          >\n            {{ 'checkoutAddress.enteredAddress' | cxTranslate }}\n          </label>\n          <div class=\"cx-dialog-entered\">\n            {{ enteredAddress?.firstName }} {{ enteredAddress?.lastName }}<br />\n            {{ enteredAddress?.line1 }}<br />\n            <span>{{ enteredAddress?.line2 }}</span\n            ><br />\n            {{ enteredAddress?.town }} {{ enteredAddress?.region?.isocode\n            }}<br />\n            {{ enteredAddress?.postalCode }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"cx-dialog-actions col-sm-12 col-md-6 offset-md-6\">\n        <button\n          class=\"btn btn-secondary btn-block cx-dialog-buttons\"\n          (click)=\"closeModal()\"\n        >\n          {{ 'checkoutAddress.editAddress' | cxTranslate }}\n        </button>\n        <button\n          cxAutoFocus\n          class=\"btn btn-primary btn-block cx-dialog-buttons\"\n          (click)=\"closeModal(selectedAddress)\"\n        >\n          {{ 'checkoutAddress.saveAddress' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        SuggestedAddressDialogComponent.ctorParameters = function () { return [
            { type: ModalService }
        ]; };
        SuggestedAddressDialogComponent.propDecorators = {
            suggestedAddresses: [{ type: core.Input }],
            enteredAddress: [{ type: core.Input }]
        };
        return SuggestedAddressDialogComponent;
    }());
    if (false) {
        /** @type {?} */
        SuggestedAddressDialogComponent.prototype.iconTypes;
        /** @type {?} */
        SuggestedAddressDialogComponent.prototype.suggestedAddresses;
        /** @type {?} */
        SuggestedAddressDialogComponent.prototype.enteredAddress;
        /** @type {?} */
        SuggestedAddressDialogComponent.prototype.selectedAddress;
        /**
         * @type {?}
         * @protected
         */
        SuggestedAddressDialogComponent.prototype.modalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PaymentFormComponent = /** @class */ (function () {
        function PaymentFormComponent(checkoutPaymentService, checkoutDeliveryService, userPaymentService, globalMessageService, fb, modalService) {
            this.checkoutPaymentService = checkoutPaymentService;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.userPaymentService = userPaymentService;
            this.globalMessageService = globalMessageService;
            this.fb = fb;
            this.modalService = modalService;
            this.iconTypes = ICON_TYPE;
            this.months = [];
            this.years = [];
            this.sameAsShippingAddress = true;
            this.goBack = new core.EventEmitter();
            this.closeForm = new core.EventEmitter();
            this.setPaymentDetails = new core.EventEmitter();
            this.payment = this.fb.group({
                defaultPayment: [false],
                accountHolderName: ['', forms.Validators.required],
                cardNumber: ['', forms.Validators.required],
                cardType: this.fb.group({
                    code: ['', forms.Validators.required],
                }),
                expiryMonth: ['', forms.Validators.required],
                expiryYear: ['', forms.Validators.required],
                cvn: ['', forms.Validators.required],
            });
            this.billingAddress = this.fb.group({
                firstName: ['', forms.Validators.required],
                lastName: ['', forms.Validators.required],
                line1: ['', forms.Validators.required],
                line2: [''],
                town: ['', forms.Validators.required],
                region: this.fb.group({
                    isocodeShort: [null, forms.Validators.required],
                }),
                country: this.fb.group({
                    isocode: [null, forms.Validators.required],
                }),
                postalCode: ['', forms.Validators.required],
            });
        }
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.expMonthAndYear();
            this.countries$ = this.userPaymentService.getAllBillingCountries().pipe(operators.tap((/**
             * @param {?} countries
             * @return {?}
             */
            function (countries) {
                // If the store is empty fetch countries. This is also used when changing language.
                if (Object.keys(countries).length === 0) {
                    _this.userPaymentService.loadBillingCountries();
                }
            })));
            this.cardTypes$ = this.checkoutPaymentService.getCardTypes().pipe(operators.tap((/**
             * @param {?} cardTypes
             * @return {?}
             */
            function (cardTypes) {
                if (Object.keys(cardTypes).length === 0) {
                    _this.checkoutPaymentService.loadSupportedCardTypes();
                }
            })));
            this.shippingAddress$ = this.checkoutDeliveryService.getDeliveryAddress();
            this.loading$ = this.checkoutPaymentService.getSetPaymentDetailsResultProcess();
            this.checkboxSub = this.showSameAsShippingAddressCheckbox().subscribe((/**
             * @param {?} shouldShowCheckbox
             * @return {?}
             */
            function (shouldShowCheckbox) {
                // this operation makes sure the checkbox is not checked if not shown and vice versa
                _this.sameAsShippingAddress = shouldShowCheckbox;
            }));
            // verify the new added address
            this.addressVerifySub = this.checkoutDeliveryService
                .getAddressVerificationResults()
                .subscribe((/**
             * @param {?} results
             * @return {?}
             */
            function (results) {
                if (results.decision === 'FAIL') {
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                }
                else if (results.decision === 'ACCEPT') {
                    _this.next();
                }
                else if (results.decision === 'REJECT') {
                    _this.globalMessageService.add({ key: 'addressForm.invalidAddress' }, core$1.GlobalMessageType.MSG_TYPE_ERROR);
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                }
                else if (results.decision === 'REVIEW') {
                    _this.openSuggestedAddress(results);
                }
            }));
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.expMonthAndYear = /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var year = new Date().getFullYear();
            for (var i = 0; i < 10; i++) {
                this.years.push({ id: i + 1, name: year + i });
            }
            for (var j = 1; j <= 12; j++) {
                if (j < 10) {
                    this.months.push({ id: j, name: '0' + j.toString() });
                }
                else {
                    this.months.push({ id: j, name: j.toString() });
                }
            }
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.toggleDefaultPaymentMethod = /**
         * @return {?}
         */
        function () {
            this.payment.value.defaultPayment = !this.payment.value.defaultPayment;
        };
        /**
         * @param {?} card
         * @return {?}
         */
        PaymentFormComponent.prototype.paymentSelected = /**
         * @param {?} card
         * @return {?}
         */
        function (card) {
            this.payment['controls'].cardType['controls'].code.setValue(card.code);
        };
        /**
         * @param {?} month
         * @return {?}
         */
        PaymentFormComponent.prototype.monthSelected = /**
         * @param {?} month
         * @return {?}
         */
        function (month) {
            this.payment['controls'].expiryMonth.setValue(month.name);
        };
        /**
         * @param {?} year
         * @return {?}
         */
        PaymentFormComponent.prototype.yearSelected = /**
         * @param {?} year
         * @return {?}
         */
        function (year) {
            this.payment['controls'].expiryYear.setValue(year.name);
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.toggleSameAsShippingAddress = /**
         * @return {?}
         */
        function () {
            this.sameAsShippingAddress = !this.sameAsShippingAddress;
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.isContinueButtonDisabled = /**
         * @return {?}
         */
        function () {
            return (this.payment.invalid ||
                (!this.sameAsShippingAddress && this.billingAddress.invalid));
        };
        /**
         * Check if the shipping address can also be a billing address
         *
         * @memberof PaymentFormComponent
         */
        /**
         * Check if the shipping address can also be a billing address
         *
         * \@memberof PaymentFormComponent
         * @return {?}
         */
        PaymentFormComponent.prototype.showSameAsShippingAddressCheckbox = /**
         * Check if the shipping address can also be a billing address
         *
         * \@memberof PaymentFormComponent
         * @return {?}
         */
        function () {
            return rxjs.combineLatest([this.countries$, this.shippingAddress$]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), countries = _b[0], address = _b[1];
                return (address !== undefined &&
                    address.country !== undefined &&
                    !!countries.filter((/**
                     * @param {?} country
                     * @return {?}
                     */
                    function (country) {
                        return country.isocode === address.country.isocode;
                    })).length);
            })));
        };
        /**
         * @param {?} address
         * @return {?}
         */
        PaymentFormComponent.prototype.getAddressCardContent = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            /** @type {?} */
            var region = '';
            if (address.region && address.region.isocode) {
                region = address.region.isocode + ', ';
            }
            return {
                textBold: address.firstName + ' ' + address.lastName,
                text: [
                    address.line1,
                    address.line2,
                    address.town + ', ' + region + address.country.isocode,
                    address.postalCode,
                    address.phone,
                ],
            };
        };
        /**
         * @param {?} results
         * @return {?}
         */
        PaymentFormComponent.prototype.openSuggestedAddress = /**
         * @param {?} results
         * @return {?}
         */
        function (results) {
            var _this = this;
            if (!this.suggestedAddressModalRef) {
                this.suggestedAddressModalRef = this.modalService.open(SuggestedAddressDialogComponent, { centered: true, size: 'lg' });
                this.suggestedAddressModalRef.componentInstance.enteredAddress = this.billingAddress.value;
                this.suggestedAddressModalRef.componentInstance.suggestedAddresses =
                    results.suggestedAddresses;
                this.suggestedAddressModalRef.result
                    .then((/**
                 * @return {?}
                 */
                function () {
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                    _this.suggestedAddressModalRef = null;
                }))
                    .catch((/**
                 * @return {?}
                 */
                function () {
                    // this  callback is called when modal is closed with Esc key or clicking backdrop
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                    _this.suggestedAddressModalRef = null;
                }));
            }
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.close = /**
         * @return {?}
         */
        function () {
            this.closeForm.emit();
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.back = /**
         * @return {?}
         */
        function () {
            this.goBack.emit();
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.verifyAddress = /**
         * @return {?}
         */
        function () {
            if (this.sameAsShippingAddress) {
                this.next();
            }
            else {
                this.checkoutDeliveryService.verifyAddress(this.billingAddress.value);
            }
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.next = /**
         * @return {?}
         */
        function () {
            this.setPaymentDetails.emit({
                paymentDetails: this.payment.value,
                billingAddress: this.sameAsShippingAddress
                    ? null
                    : this.billingAddress.value,
            });
        };
        /**
         * @return {?}
         */
        PaymentFormComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.checkboxSub) {
                this.checkboxSub.unsubscribe();
            }
            if (this.addressVerifySub) {
                this.addressVerifySub.unsubscribe();
            }
        };
        PaymentFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-payment-form',
                        template: "<!-- FORM -->\n<div *ngIf=\"!(loading$ | async).loading; else spinner\" [formGroup]=\"payment\">\n  <div class=\"row\">\n    <div class=\"col-md-12 col-lg-9\">\n      <div class=\"form-group\">\n        <ng-container *ngIf=\"cardTypes$ | async as cardTypes\">\n          <div *ngIf=\"cardTypes.length !== 0\">\n            <label aria-required=\"true\">\n              <span class=\"label-content required\">{{\n                'paymentForm.paymentType' | cxTranslate\n              }}</span>\n              <ng-select\n                [searchable]=\"false\"\n                [clearable]=\"false\"\n                [items]=\"cardTypes\"\n                bindLabel=\"name\"\n                bindValue=\"code\"\n                placeholder=\"{{ 'paymentForm.selectOne' | cxTranslate }}\"\n                (change)=\"paymentSelected($event)\"\n              >\n              </ng-select>\n            </label>\n          </div>\n        </ng-container>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'paymentForm.accountHolderName.label' | cxTranslate\n          }}</span>\n          <input\n            class=\"form-control\"\n            type=\"text\"\n            required\n            placeholder=\"{{\n              'paymentForm.accountHolderName.placeholder' | cxTranslate\n            }}\"\n            formControlName=\"accountHolderName\"\n          />\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'paymentForm.cardNumber' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            required\n            formControlName=\"cardNumber\"\n          />\n        </label>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"form-group col-md-6\">\n          <label>\n            <span class=\"label-content\">{{\n              'paymentForm.expirationDate' | cxTranslate\n            }}</span>\n          </label>\n          <div class=\"cx-payment-form-exp-date row\">\n            <div class=\"col-sm-6 col-md-5\">\n              <ng-select\n                [searchable]=\"false\"\n                [clearable]=\"false\"\n                [items]=\"months\"\n                bindLabel=\"name\"\n                bindValue=\"expiryMonth\"\n                placeholder=\"{{ 'paymentForm.monthMask' | cxTranslate }}\"\n                (change)=\"monthSelected($event)\"\n              >\n              </ng-select>\n            </div>\n            <div class=\"col-sm-6 col-md-7\">\n              <ng-select\n                [searchable]=\"false\"\n                [clearable]=\"false\"\n                [items]=\"years\"\n                bindLabel=\"name\"\n                bindValue=\"expiryYear\"\n                placeholder=\"{{ 'paymentForm.yearMask' | cxTranslate }}\"\n                (change)=\"yearSelected($event)\"\n              >\n              </ng-select>\n            </div>\n          </div>\n        </div>\n        <div class=\"form-group col-md-6\">\n          <label>\n            <span class=\"label-content\">\n              {{ 'paymentForm.securityCode' | cxTranslate }}\n              <cx-icon\n                [type]=\"iconTypes.INFO\"\n                class=\"cx-payment-form-tooltip\"\n                placement=\"right\"\n                title=\"{{ 'paymentForm.securityCodeTitle' | cxTranslate }}\"\n                alt=\"\"\n              ></cx-icon>\n            </span>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              id=\"cVVNumber\"\n              required\n              formControlName=\"cvn\"\n            />\n          </label>\n        </div>\n      </div>\n\n      <div class=\"form-group\" *ngIf=\"setAsDefaultField\">\n        <div class=\"form-check\">\n          <label>\n            <input\n              type=\"checkbox\"\n              class=\"form-check-input\"\n              (change)=\"toggleDefaultPaymentMethod()\"\n            />\n            <span class=\"form-check-label\">{{\n              'paymentForm.setAsDefault' | cxTranslate\n            }}</span>\n          </label>\n        </div>\n      </div>\n\n      <!-- BILLING -->\n      <div class=\"cx-payment-form-billing\">\n        <div class=\"cx-payment-form-billing-address\">\n          {{ 'paymentForm.billingAddress' | cxTranslate }}\n        </div>\n\n        <!-- SAME AS SHIPPING CHECKBOX -->\n        <ng-container *ngIf=\"showSameAsShippingAddressCheckbox() | async\">\n          <div class=\"form-group\">\n            <div class=\"form-check\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  class=\"form-check-input\"\n                  [checked]=\"sameAsShippingAddress\"\n                  (change)=\"toggleSameAsShippingAddress()\"\n                />\n                <span class=\"form-check-label\">{{\n                  'paymentForm.sameAsShippingAddress' | cxTranslate\n                }}</span>\n              </label>\n            </div>\n          </div>\n        </ng-container>\n\n        <!-- BILLING INFO COMPONENT -->\n        <ng-container\n          *ngIf=\"\n            sameAsShippingAddress && shippingAddress$\n              | async as shippingAddress;\n            else billingAddressForm\n          \"\n        >\n          <cx-card [content]=\"getAddressCardContent(shippingAddress)\"></cx-card>\n        </ng-container>\n\n        <ng-template #billingAddressForm>\n          <cx-billing-address-form\n            [billingAddress]=\"billingAddress\"\n            [countries$]=\"countries$\"\n          >\n          </cx-billing-address-form>\n        </ng-template>\n      </div>\n    </div>\n  </div>\n\n  <!-- BUTTON SECTION -->\n  <div class=\"cx-checkout-btns row\">\n    <div class=\"col-md-12 col-lg-6\">\n      <button\n        *ngIf=\"paymentMethodsCount === 0\"\n        class=\"btn btn-block btn-action\"\n        (click)=\"back()\"\n      >\n        {{ 'common.back' | cxTranslate }}\n      </button>\n      <button\n        *ngIf=\"paymentMethodsCount > 0\"\n        class=\"btn btn-block btn-action\"\n        (click)=\"close()\"\n      >\n        {{ 'paymentForm.changePayment' | cxTranslate }}\n      </button>\n    </div>\n    <div class=\"col-md-12 col-lg-6\">\n      <button\n        class=\"btn btn-block btn-primary\"\n        [disabled]=\"isContinueButtonDisabled()\"\n        (click)=\"next()\"\n      >\n        {{ 'common.continue' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n\n<ng-template #spinner>\n  <cx-spinner></cx-spinner>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        PaymentFormComponent.ctorParameters = function () { return [
            { type: core$1.CheckoutPaymentService },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.UserPaymentService },
            { type: core$1.GlobalMessageService },
            { type: forms.FormBuilder },
            { type: ModalService }
        ]; };
        PaymentFormComponent.propDecorators = {
            setAsDefaultField: [{ type: core.Input }],
            paymentMethodsCount: [{ type: core.Input }],
            goBack: [{ type: core.Output }],
            closeForm: [{ type: core.Output }],
            setPaymentDetails: [{ type: core.Output }]
        };
        return PaymentFormComponent;
    }());
    if (false) {
        /** @type {?} */
        PaymentFormComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @private
         */
        PaymentFormComponent.prototype.checkboxSub;
        /**
         * @type {?}
         * @private
         */
        PaymentFormComponent.prototype.addressVerifySub;
        /** @type {?} */
        PaymentFormComponent.prototype.suggestedAddressModalRef;
        /** @type {?} */
        PaymentFormComponent.prototype.months;
        /** @type {?} */
        PaymentFormComponent.prototype.years;
        /** @type {?} */
        PaymentFormComponent.prototype.cardTypes$;
        /** @type {?} */
        PaymentFormComponent.prototype.shippingAddress$;
        /** @type {?} */
        PaymentFormComponent.prototype.countries$;
        /** @type {?} */
        PaymentFormComponent.prototype.loading$;
        /** @type {?} */
        PaymentFormComponent.prototype.sameAsShippingAddress;
        /** @type {?} */
        PaymentFormComponent.prototype.setAsDefaultField;
        /** @type {?} */
        PaymentFormComponent.prototype.paymentMethodsCount;
        /** @type {?} */
        PaymentFormComponent.prototype.goBack;
        /** @type {?} */
        PaymentFormComponent.prototype.closeForm;
        /** @type {?} */
        PaymentFormComponent.prototype.setPaymentDetails;
        /** @type {?} */
        PaymentFormComponent.prototype.payment;
        /** @type {?} */
        PaymentFormComponent.prototype.billingAddress;
        /**
         * @type {?}
         * @protected
         */
        PaymentFormComponent.prototype.checkoutPaymentService;
        /**
         * @type {?}
         * @protected
         */
        PaymentFormComponent.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @protected
         */
        PaymentFormComponent.prototype.userPaymentService;
        /**
         * @type {?}
         * @protected
         */
        PaymentFormComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        PaymentFormComponent.prototype.fb;
        /**
         * @type {?}
         * @private
         */
        PaymentFormComponent.prototype.modalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PaymentFormModule = /** @class */ (function () {
        function PaymentFormModule() {
        }
        PaymentFormModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            ngSelect.NgSelectModule,
                            CardModule,
                            BillingAddressFormModule,
                            core$1.I18nModule,
                            IconModule,
                            SpinnerModule,
                        ],
                        declarations: [PaymentFormComponent],
                        entryComponents: [PaymentFormComponent],
                        exports: [PaymentFormComponent],
                    },] }
        ];
        return PaymentFormModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PaymentMethodComponent = /** @class */ (function () {
        function PaymentMethodComponent(userPaymentService, checkoutService, checkoutDeliveryService, checkoutPaymentService, globalMessageService, routingService, checkoutConfigService, activatedRoute, translation, cartService) {
            this.userPaymentService = userPaymentService;
            this.checkoutService = checkoutService;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.checkoutPaymentService = checkoutPaymentService;
            this.globalMessageService = globalMessageService;
            this.routingService = routingService;
            this.checkoutConfigService = checkoutConfigService;
            this.activatedRoute = activatedRoute;
            this.translation = translation;
            this.cartService = cartService;
            this.iconTypes = ICON_TYPE;
            this.newPaymentFormManuallyOpened = false;
            this.isGuestCheckout = false;
        }
        /**
         * @return {?}
         */
        PaymentMethodComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.allowRouting = false;
            this.isLoading$ = this.userPaymentService.getPaymentMethodsLoading();
            if (!this.cartService.isGuestCart()) {
                this.userPaymentService.loadPaymentMethods();
            }
            else {
                this.isGuestCheckout = true;
            }
            this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);
            this.checkoutStepUrlPrevious = this.checkoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute);
            this.checkoutDeliveryService
                .getDeliveryAddress()
                .pipe(operators.take(1))
                .subscribe((/**
             * @param {?} address
             * @return {?}
             */
            function (address) {
                _this.deliveryAddress = address;
            }));
            this.existingPaymentMethods$ = this.userPaymentService.getPaymentMethods();
            this.getPaymentDetailsSub = this.checkoutPaymentService
                .getPaymentDetails()
                .pipe(operators.filter((/**
             * @param {?} paymentInfo
             * @return {?}
             */
            function (paymentInfo) { return paymentInfo && !!Object.keys(paymentInfo).length; })))
                .subscribe((/**
             * @param {?} paymentInfo
             * @return {?}
             */
            function (paymentInfo) {
                if (_this.allowRouting) {
                    _this.routingService.go(_this.checkoutStepUrlNext);
                }
                if (!paymentInfo['hasError']) {
                    _this.selectedPayment = paymentInfo;
                }
                else {
                    Object.keys(paymentInfo).forEach((/**
                     * @param {?} key
                     * @return {?}
                     */
                    function (key) {
                        if (key.startsWith('InvalidField')) {
                            _this.sendPaymentMethodFailGlobalMessage(paymentInfo[key]);
                        }
                    }));
                    _this.checkoutService.clearCheckoutStep(3);
                }
            }));
        };
        /**
         * @param {?} payment
         * @return {?}
         */
        PaymentMethodComponent.prototype.getCardContent = /**
         * @param {?} payment
         * @return {?}
         */
        function (payment) {
            var _this = this;
            if (!this.selectedPayment && payment.defaultPayment) {
                this.selectedPayment = payment;
            }
            return rxjs.combineLatest([
                this.translation.translate('paymentCard.expires', {
                    month: payment.expiryMonth,
                    year: payment.expiryYear,
                }),
                this.translation.translate('paymentForm.useThisPayment'),
                this.translation.translate('paymentCard.defaultPaymentMethod'),
                this.translation.translate('paymentCard.selected'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 4), textExpires = _b[0], textUseThisPayment = _b[1], textDefaultPaymentMethod = _b[2], textSelected = _b[3];
                return _this.createCard(payment, {
                    textExpires: textExpires,
                    textUseThisPayment: textUseThisPayment,
                    textDefaultPaymentMethod: textDefaultPaymentMethod,
                    textSelected: textSelected,
                });
            })));
        };
        /**
         * @param {?} paymentDetails
         * @return {?}
         */
        PaymentMethodComponent.prototype.selectPaymentMethod = /**
         * @param {?} paymentDetails
         * @return {?}
         */
        function (paymentDetails) {
            this.selectedPayment = paymentDetails;
        };
        /**
         * @return {?}
         */
        PaymentMethodComponent.prototype.showNewPaymentForm = /**
         * @return {?}
         */
        function () {
            this.newPaymentFormManuallyOpened = true;
        };
        /**
         * @return {?}
         */
        PaymentMethodComponent.prototype.hideNewPaymentForm = /**
         * @return {?}
         */
        function () {
            this.newPaymentFormManuallyOpened = false;
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        PaymentMethodComponent.prototype.setPaymentDetails = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var paymentDetails = _a.paymentDetails, billingAddress = _a.billingAddress, _b = _a.isNewPayment, isNewPayment = _b === void 0 ? true : _b;
            /** @type {?} */
            var details = __assign({}, paymentDetails);
            details.billingAddress = billingAddress || this.deliveryAddress;
            if (isNewPayment) {
                this.checkoutPaymentService.createPaymentDetails(details);
            }
            else if (this.selectedPayment && this.selectedPayment.id === details.id) {
                this.checkoutPaymentService.setPaymentDetails(details);
            }
            this.allowRouting = true;
        };
        /**
         * @return {?}
         */
        PaymentMethodComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.getPaymentDetailsSub) {
                this.getPaymentDetailsSub.unsubscribe();
            }
            this.checkoutPaymentService.paymentProcessSuccess();
        };
        /**
         * @protected
         * @param {?} code
         * @return {?}
         */
        PaymentMethodComponent.prototype.getCardIcon = /**
         * @protected
         * @param {?} code
         * @return {?}
         */
        function (code) {
            /** @type {?} */
            var ccIcon;
            if (code === 'visa') {
                ccIcon = this.iconTypes.VISA;
            }
            else if (code === 'master' || code === 'mastercard_eurocard') {
                ccIcon = this.iconTypes.MASTER_CARD;
            }
            else if (code === 'diners') {
                ccIcon = this.iconTypes.DINERS_CLUB;
            }
            else if (code === 'amex') {
                ccIcon = this.iconTypes.AMEX;
            }
            else {
                ccIcon = this.iconTypes.CREDIT_CARD;
            }
            return ccIcon;
        };
        /**
         * @protected
         * @param {?} msg
         * @return {?}
         */
        PaymentMethodComponent.prototype.sendPaymentMethodFailGlobalMessage = /**
         * @protected
         * @param {?} msg
         * @return {?}
         */
        function (msg) {
            this.globalMessageService.add({
                key: 'paymentMethods.invalidField',
                params: { field: msg },
            }, core$1.GlobalMessageType.MSG_TYPE_ERROR);
        };
        /**
         * @protected
         * @param {?} paymentDetails
         * @param {?} cardLabels
         * @return {?}
         */
        PaymentMethodComponent.prototype.createCard = /**
         * @protected
         * @param {?} paymentDetails
         * @param {?} cardLabels
         * @return {?}
         */
        function (paymentDetails, cardLabels) {
            return {
                title: paymentDetails.defaultPayment
                    ? cardLabels.textDefaultPaymentMethod
                    : '',
                textBold: paymentDetails.accountHolderName,
                text: [paymentDetails.cardNumber, cardLabels.textExpires],
                img: this.getCardIcon(paymentDetails.cardType.code),
                actions: [{ name: cardLabels.textUseThisPayment, event: 'send' }],
                header: this.selectedPayment && this.selectedPayment.id === paymentDetails.id
                    ? cardLabels.textSelected
                    : undefined,
            };
        };
        /**
         * @return {?}
         */
        PaymentMethodComponent.prototype.goNext = /**
         * @return {?}
         */
        function () {
            this.setPaymentDetails({
                paymentDetails: this.selectedPayment,
                isNewPayment: false,
            });
        };
        /**
         * @return {?}
         */
        PaymentMethodComponent.prototype.goPrevious = /**
         * @return {?}
         */
        function () {
            this.routingService.go(this.checkoutStepUrlPrevious);
        };
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goNext() instead.
         * TODO(issue:#4992) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goNext() instead.
         * TODO(issue:#4992) deprecated since 1.3
         * @return {?}
         */
        PaymentMethodComponent.prototype.next = /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goNext() instead.
         * TODO(issue:#4992) deprecated since 1.3
         * @return {?}
         */
        function () {
            this.goNext();
        };
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goPrevious() instead.
         * TODO(issue:#4992) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goPrevious() instead.
         * TODO(issue:#4992) deprecated since 1.3
         * @return {?}
         */
        PaymentMethodComponent.prototype.back = /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goPrevious() instead.
         * TODO(issue:#4992) deprecated since 1.3
         * @return {?}
         */
        function () {
            this.goPrevious();
        };
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use selectPaymentMethod() instead.
         * TODO(issue:#4992) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use selectPaymentMethod() instead.
         * TODO(issue:#4992) deprecated since 1.3
         * @param {?} paymentDetails
         * @return {?}
         */
        PaymentMethodComponent.prototype.paymentMethodSelected = /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use selectPaymentMethod() instead.
         * TODO(issue:#4992) deprecated since 1.3
         * @param {?} paymentDetails
         * @return {?}
         */
        function (paymentDetails) {
            this.selectPaymentMethod(paymentDetails);
        };
        PaymentMethodComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-payment-method',
                        template: "<ng-container *ngIf=\"existingPaymentMethods$ | async as existingPaymentMethods\">\n  <h3 class=\"cx-checkout-title d-none d-lg-block d-xl-block\">\n    {{ 'paymentForm.payment' | cxTranslate }}\n  </h3>\n  <ng-container *ngIf=\"!(isLoading$ | async); else loading\">\n    <ng-container\n      *ngIf=\"\n        (existingPaymentMethods$ | async).length &&\n          !newPaymentFormManuallyOpened;\n        else newPaymentForm\n      \"\n    >\n      <p class=\"cx-checkout-text\">\n        {{ 'paymentForm.choosePaymentMethod' | cxTranslate }}\n      </p>\n      <div class=\"cx-checkout-btns row\">\n        <div class=\"col-md-12 col-lg-6\">\n          <button\n            class=\"btn btn-block btn-action\"\n            (click)=\"showNewPaymentForm()\"\n          >\n            {{ 'paymentForm.addNewPayment' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"cx-checkout-body row\">\n        <div\n          class=\"cx-payment-card col-md-12 col-lg-6\"\n          *ngFor=\"let method of existingPaymentMethods; let i = index\"\n        >\n          <div class=\"cx-payment-card-inner\">\n            <cx-card\n              [border]=\"true\"\n              [fitToContainer]=\"true\"\n              [content]=\"getCardContent(method) | async\"\n              (sendCard)=\"paymentMethodSelected(method)\"\n            ></cx-card>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row cx-checkout-btns\">\n        <div class=\"col-md-12 col-lg-6\">\n          <button class=\"btn btn-block btn-action\" (click)=\"back()\">\n            {{ 'common.back' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"col-md-12 col-lg-6\">\n          <button\n            class=\"btn btn-block btn-primary\"\n            [disabled]=\"!selectedPayment\"\n            (click)=\"next()\"\n          >\n            {{ 'common.continue' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </ng-container>\n\n    <ng-template #newPaymentForm>\n      <cx-payment-form\n        (setPaymentDetails)=\"setPaymentDetails($event)\"\n        (closeForm)=\"hideNewPaymentForm()\"\n        (goBack)=\"back()\"\n        [paymentMethodsCount]=\"existingPaymentMethods?.length || 0\"\n        [setAsDefaultField]=\"!isGuestCheckout\"\n      ></cx-payment-form>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #loading>\n    <div class=\"cx-spinner\"><cx-spinner></cx-spinner></div>\n  </ng-template>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        PaymentMethodComponent.ctorParameters = function () { return [
            { type: core$1.UserPaymentService },
            { type: core$1.CheckoutService },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.CheckoutPaymentService },
            { type: core$1.GlobalMessageService },
            { type: core$1.RoutingService },
            { type: CheckoutConfigService },
            { type: router.ActivatedRoute },
            { type: core$1.TranslationService },
            { type: core$1.CartService }
        ]; };
        return PaymentMethodComponent;
    }());
    if (false) {
        /** @type {?} */
        PaymentMethodComponent.prototype.iconTypes;
        /** @type {?} */
        PaymentMethodComponent.prototype.newPaymentFormManuallyOpened;
        /** @type {?} */
        PaymentMethodComponent.prototype.existingPaymentMethods$;
        /** @type {?} */
        PaymentMethodComponent.prototype.isLoading$;
        /** @type {?} */
        PaymentMethodComponent.prototype.selectedPayment;
        /** @type {?} */
        PaymentMethodComponent.prototype.allowRouting;
        /** @type {?} */
        PaymentMethodComponent.prototype.isGuestCheckout;
        /**
         * @type {?}
         * @private
         */
        PaymentMethodComponent.prototype.getPaymentDetailsSub;
        /**
         * @type {?}
         * @private
         */
        PaymentMethodComponent.prototype.deliveryAddress;
        /**
         * @type {?}
         * @private
         */
        PaymentMethodComponent.prototype.checkoutStepUrlNext;
        /**
         * @type {?}
         * @private
         */
        PaymentMethodComponent.prototype.checkoutStepUrlPrevious;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.userPaymentService;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.checkoutService;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.checkoutPaymentService;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.activatedRoute;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.translation;
        /**
         * @type {?}
         * @protected
         */
        PaymentMethodComponent.prototype.cartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PaymentMethodModule = /** @class */ (function () {
        function PaymentMethodModule() {
        }
        PaymentMethodModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            PaymentFormModule,
                            CardModule,
                            SpinnerModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutPaymentDetails: {
                                        component: PaymentMethodComponent,
                                        guards: [
                                            CheckoutAuthGuard,
                                            CartNotEmptyGuard,
                                            ShippingAddressSetGuard,
                                            DeliveryModeSetGuard,
                                        ],
                                    },
                                },
                            }))),
                        ],
                        providers: [core$1.UserService],
                        declarations: [PaymentMethodComponent],
                        entryComponents: [PaymentMethodComponent],
                        exports: [PaymentMethodComponent],
                    },] }
        ];
        return PaymentMethodModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PlaceOrderComponent = /** @class */ (function () {
        function PlaceOrderComponent(checkoutService, routingService) {
            this.checkoutService = checkoutService;
            this.routingService = routingService;
            this.tAndCToggler = false;
        }
        /**
         * @return {?}
         */
        PlaceOrderComponent.prototype.toggleTAndC = /**
         * @return {?}
         */
        function () {
            this.tAndCToggler = !this.tAndCToggler;
        };
        /**
         * @return {?}
         */
        PlaceOrderComponent.prototype.placeOrder = /**
         * @return {?}
         */
        function () {
            this.checkoutService.placeOrder();
        };
        /**
         * @return {?}
         */
        PlaceOrderComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.placeOrderSubscription = this.checkoutService
                .getOrderDetails()
                .pipe(operators.filter((/**
             * @param {?} order
             * @return {?}
             */
            function (order) { return Object.keys(order).length !== 0; })))
                .subscribe((/**
             * @return {?}
             */
            function () {
                _this.routingService.go({ cxRoute: 'orderConfirmation' });
            }));
        };
        /**
         * @return {?}
         */
        PlaceOrderComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.placeOrderSubscription) {
                this.placeOrderSubscription.unsubscribe();
            }
        };
        PlaceOrderComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-place-order',
                        template: "<div class=\"cx-place-order-form form-check\">\n  <label>\n    <input class=\"form-check-input\" type=\"checkbox\" (change)=\"toggleTAndC()\" />\n    <span class=\"form-check-label\">\n      {{ 'checkoutReview.confirmThatRead' | cxTranslate }}\n      <a\n        [routerLink]=\"{ cxRoute: 'termsAndConditions' } | cxUrl\"\n        class=\"cx-tc-link\"\n        target=\"_blank\"\n      >\n        {{ 'checkoutReview.termsAndConditions' | cxTranslate }}\n      </a>\n    </span>\n  </label>\n</div>\n<button\n  [disabled]=\"!tAndCToggler\"\n  (click)=\"placeOrder()\"\n  class=\"btn btn-primary btn-block\"\n>\n  {{ 'checkoutReview.placeOrder' | cxTranslate }}\n</button>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        PlaceOrderComponent.ctorParameters = function () { return [
            { type: core$1.CheckoutService },
            { type: core$1.RoutingService }
        ]; };
        return PlaceOrderComponent;
    }());
    if (false) {
        /** @type {?} */
        PlaceOrderComponent.prototype.tAndCToggler;
        /** @type {?} */
        PlaceOrderComponent.prototype.placeOrderSubscription;
        /**
         * @type {?}
         * @private
         */
        PlaceOrderComponent.prototype.checkoutService;
        /**
         * @type {?}
         * @private
         */
        PlaceOrderComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PlaceOrderModule = /** @class */ (function () {
        function PlaceOrderModule() {
        }
        PlaceOrderModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutPlaceOrder: {
                                        component: PlaceOrderComponent,
                                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],
                                    },
                                },
                            }))),
                        ],
                        declarations: [PlaceOrderComponent],
                        entryComponents: [PlaceOrderComponent],
                        exports: [PlaceOrderComponent],
                    },] }
        ];
        return PlaceOrderModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PaymentDetailsSetGuard = /** @class */ (function () {
        function PaymentDetailsSetGuard(checkoutDetailsService, checkoutConfigService, routingConfigService, router) {
            this.checkoutDetailsService = checkoutDetailsService;
            this.checkoutConfigService = checkoutConfigService;
            this.routingConfigService = routingConfigService;
            this.router = router;
        }
        /**
         * @return {?}
         */
        PaymentDetailsSetGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            /** @type {?} */
            var checkoutStep = this.checkoutConfigService.getCheckoutStep(CheckoutStepType.PAYMENT_DETAILS);
            if (!checkoutStep && core.isDevMode()) {
                console.warn("Missing step with type " + CheckoutStepType.PAYMENT_DETAILS + " in checkout configuration.");
            }
            return this.checkoutDetailsService
                .getPaymentDetails()
                .pipe(operators.map((/**
             * @param {?} paymentDetails
             * @return {?}
             */
            function (paymentDetails) {
                return paymentDetails && Object.keys(paymentDetails).length !== 0
                    ? true
                    : _this.router.parseUrl(checkoutStep &&
                        _this.routingConfigService.getRouteConfig(checkoutStep.routeName).paths[0]);
            })));
        };
        PaymentDetailsSetGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        PaymentDetailsSetGuard.ctorParameters = function () { return [
            { type: CheckoutDetailsService },
            { type: CheckoutConfigService },
            { type: core$1.RoutingConfigService },
            { type: router.Router }
        ]; };
        /** @nocollapse */ PaymentDetailsSetGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function PaymentDetailsSetGuard_Factory() { return new PaymentDetailsSetGuard(core.ɵɵinject(CheckoutDetailsService), core.ɵɵinject(CheckoutConfigService), core.ɵɵinject(core$1.RoutingConfigService), core.ɵɵinject(router.Router)); }, token: PaymentDetailsSetGuard, providedIn: "root" });
        return PaymentDetailsSetGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        PaymentDetailsSetGuard.prototype.checkoutDetailsService;
        /**
         * @type {?}
         * @private
         */
        PaymentDetailsSetGuard.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @private
         */
        PaymentDetailsSetGuard.prototype.routingConfigService;
        /**
         * @type {?}
         * @private
         */
        PaymentDetailsSetGuard.prototype.router;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReviewSubmitComponent = /** @class */ (function () {
        function ReviewSubmitComponent(checkoutDeliveryService, checkoutPaymentService, userAddressService, cartService, translation, checkoutConfigService, promotionService) {
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.checkoutPaymentService = checkoutPaymentService;
            this.userAddressService = userAddressService;
            this.cartService = cartService;
            this.translation = translation;
            this.checkoutConfigService = checkoutConfigService;
            this.promotionService = promotionService;
            this.checkoutStepType = CheckoutStepType;
            this.promotionLocation = core$1.PromotionLocation.ActiveCart;
        }
        /**
         * @return {?}
         */
        ReviewSubmitComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.cart$ = this.cartService.getActive();
            this.entries$ = this.cartService.getEntries();
            this.deliveryAddress$ = this.checkoutDeliveryService.getDeliveryAddress();
            this.paymentDetails$ = this.checkoutPaymentService.getPaymentDetails();
            this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);
            this.deliveryMode$ = this.checkoutDeliveryService
                .getSelectedDeliveryMode()
                .pipe(operators.tap((/**
             * @param {?} selected
             * @return {?}
             */
            function (selected) {
                if (selected === null) {
                    _this.checkoutDeliveryService.loadSupportedDeliveryModes();
                }
            })));
            this.countryName$ = this.deliveryAddress$.pipe(operators.switchMap((/**
             * @param {?} address
             * @return {?}
             */
            function (address) {
                return _this.userAddressService.getCountry(address.country.isocode);
            })), operators.tap((/**
             * @param {?} country
             * @return {?}
             */
            function (country) {
                if (country === null) {
                    _this.userAddressService.loadDeliveryCountries();
                }
            })), operators.map((/**
             * @param {?} country
             * @return {?}
             */
            function (country) { return country && country.name; })));
        };
        /**
         * @param {?} deliveryAddress
         * @param {?} countryName
         * @return {?}
         */
        ReviewSubmitComponent.prototype.getShippingAddressCard = /**
         * @param {?} deliveryAddress
         * @param {?} countryName
         * @return {?}
         */
        function (deliveryAddress, countryName) {
            return rxjs.combineLatest([
                this.translation.translate('addressCard.shipTo'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), textTitle = _b[0];
                if (!countryName) {
                    countryName = deliveryAddress.country.isocode;
                }
                /** @type {?} */
                var region = '';
                if (deliveryAddress.region && deliveryAddress.region.isocode) {
                    region = deliveryAddress.region.isocode + ', ';
                }
                return {
                    title: textTitle,
                    textBold: deliveryAddress.firstName + ' ' + deliveryAddress.lastName,
                    text: [
                        deliveryAddress.line1,
                        deliveryAddress.line2,
                        deliveryAddress.town + ', ' + region + countryName,
                        deliveryAddress.postalCode,
                        deliveryAddress.phone,
                    ],
                };
            })));
        };
        /**
         * @param {?} deliveryMode
         * @return {?}
         */
        ReviewSubmitComponent.prototype.getDeliveryModeCard = /**
         * @param {?} deliveryMode
         * @return {?}
         */
        function (deliveryMode) {
            return rxjs.combineLatest([
                this.translation.translate('checkoutShipping.shippingMethod'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), textTitle = _b[0];
                return {
                    title: textTitle,
                    textBold: deliveryMode.name,
                    text: [deliveryMode.description],
                };
            })));
        };
        /**
         * @param {?} paymentDetails
         * @return {?}
         */
        ReviewSubmitComponent.prototype.getPaymentMethodCard = /**
         * @param {?} paymentDetails
         * @return {?}
         */
        function (paymentDetails) {
            return rxjs.combineLatest([
                this.translation.translate('paymentForm.payment'),
                this.translation.translate('paymentCard.expires', {
                    month: paymentDetails.expiryMonth,
                    year: paymentDetails.expiryYear,
                }),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), textTitle = _b[0], textExpires = _b[1];
                return {
                    title: textTitle,
                    textBold: paymentDetails.accountHolderName,
                    text: [paymentDetails.cardNumber, textExpires],
                };
            })));
        };
        /**
         * @param {?} stepType
         * @return {?}
         */
        ReviewSubmitComponent.prototype.getCheckoutStepUrl = /**
         * @param {?} stepType
         * @return {?}
         */
        function (stepType) {
            // TODO(issue:#4121) Deprecated since 1.1.0
            if (this.checkoutConfigService) {
                /** @type {?} */
                var step = this.checkoutConfigService.getCheckoutStep(stepType);
                return step && step.routeName;
            }
        };
        ReviewSubmitComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-review-submit',
                        template: "<div class=\"cx-review\">\n  <!-- TITLE -->\n  <h3 class=\"cx-review-title d-none d-lg-block d-xl-block\">\n    {{ 'checkoutReview.review' | cxTranslate }}\n  </h3>\n  <div class=\"cx-review-summary row\">\n    <!-- SHIPPING ADDRESS SECTION -->\n    <div class=\"col-md-12 col-lg-6 col-xl-4\">\n      <div class=\"cx-review-summary-wrapper\">\n        <div class=\"cx-review-summary-card cx-review-card-address\">\n          <cx-card\n            [content]=\"\n              getShippingAddressCard(\n                deliveryAddress$ | async,\n                countryName$ | async\n              ) | async\n            \"\n          ></cx-card>\n        </div>\n        <div *cxFeatureLevel=\"'1.1'\" class=\"cx-review-summary-edit-step\">\n          <a\n            [routerLink]=\"\n              {\n                cxRoute: getCheckoutStepUrl(checkoutStepType.SHIPPING_ADDRESS)\n              } | cxUrl\n            \"\n            >{{ 'checkoutReview.editShippingAddress' | cxTranslate }}</a\n          >\n        </div>\n      </div>\n    </div>\n\n    <!-- DELIVERY MODE SECTION -->\n    <div class=\"col-md-12 col-lg-6 col-xl-4\">\n      <div class=\"cx-review-summary-wrapper\">\n        <div class=\"cx-review-summary-card cx-review-card-shipping\">\n          <cx-card\n            *ngIf=\"deliveryMode$ | async as deliveryMode\"\n            [content]=\"getDeliveryModeCard(deliveryMode) | async\"\n          ></cx-card>\n        </div>\n        <div *cxFeatureLevel=\"'1.1'\" class=\"cx-review-summary-edit-step\">\n          <a\n            [routerLink]=\"\n              { cxRoute: getCheckoutStepUrl(checkoutStepType.DELIVERY_MODE) }\n                | cxUrl\n            \"\n            >{{ 'checkoutReview.editShippingMethod' | cxTranslate }}</a\n          >\n        </div>\n      </div>\n    </div>\n\n    <!-- PAYMENT METHOD SECTION -->\n    <div class=\"col-md-12 col-lg-6 col-xl-4\">\n      <div class=\"cx-review-summary-wrapper\">\n        <div class=\"cx-review-summary-card cx-review-card-payment\">\n          <cx-card\n            [content]=\"getPaymentMethodCard(paymentDetails$ | async) | async\"\n          ></cx-card>\n        </div>\n        <div *cxFeatureLevel=\"'1.1'\" class=\"cx-review-summary-edit-step\">\n          <a\n            [routerLink]=\"\n              { cxRoute: getCheckoutStepUrl(checkoutStepType.PAYMENT_DETAILS) }\n                | cxUrl\n            \"\n            >{{ 'checkoutReview.editPaymentMethod' | cxTranslate }}</a\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- CART ITEM SECTION -->\n  <ng-container *ngIf=\"cart$ | async as cart\">\n    <div class=\"cx-review-cart-total d-none d-lg-block d-xl-block\">\n      {{\n        'cartItems.cartTotal'\n          | cxTranslate: { count: cart.deliveryItemsQuantity }\n      }}:\n      {{ cart.totalPrice?.formattedValue }}\n    </div>\n    <h4 class=\"cx-review-cart-heading d-block d-lg-none d-xl-none\">\n      {{ 'checkoutReview.placeOrder' | cxTranslate }}\n    </h4>\n    <div\n      class=\"cx-review-cart-item col-md-12\"\n      *ngIf=\"entries$ | async as entries\"\n    >\n      <ng-container *cxFeatureLevel=\"'!1.5'\">\n        <cx-cart-item-list\n          [items]=\"entries\"\n          [isReadOnly]=\"true\"\n          [potentialProductPromotions]=\"cart.potentialProductPromotions\"\n        ></cx-cart-item-list>\n      </ng-container>\n\n      <ng-container *cxFeatureLevel=\"'1.5'\">\n        <ng-container *ngIf=\"orderPromotions$ | async as orderPromotions\">\n          <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\n        </ng-container>\n\n        <cx-cart-item-list\n          [items]=\"entries\"\n          [isReadOnly]=\"true\"\n          [promotionLocation]=\"promotionLocation\"\n        ></cx-cart-item-list>\n      </ng-container>\n    </div>\n  </ng-container>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ReviewSubmitComponent.ctorParameters = function () { return [
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.CheckoutPaymentService },
            { type: core$1.UserAddressService },
            { type: core$1.CartService },
            { type: core$1.TranslationService },
            { type: CheckoutConfigService },
            { type: PromotionService }
        ]; };
        return ReviewSubmitComponent;
    }());
    if (false) {
        /** @type {?} */
        ReviewSubmitComponent.prototype.checkoutStepType;
        /** @type {?} */
        ReviewSubmitComponent.prototype.entries$;
        /** @type {?} */
        ReviewSubmitComponent.prototype.cart$;
        /** @type {?} */
        ReviewSubmitComponent.prototype.deliveryMode$;
        /** @type {?} */
        ReviewSubmitComponent.prototype.countryName$;
        /** @type {?} */
        ReviewSubmitComponent.prototype.deliveryAddress$;
        /** @type {?} */
        ReviewSubmitComponent.prototype.paymentDetails$;
        /** @type {?} */
        ReviewSubmitComponent.prototype.orderPromotions$;
        /** @type {?} */
        ReviewSubmitComponent.prototype.promotionLocation;
        /**
         * @type {?}
         * @protected
         */
        ReviewSubmitComponent.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @protected
         */
        ReviewSubmitComponent.prototype.checkoutPaymentService;
        /**
         * @type {?}
         * @protected
         */
        ReviewSubmitComponent.prototype.userAddressService;
        /**
         * @type {?}
         * @protected
         */
        ReviewSubmitComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        ReviewSubmitComponent.prototype.translation;
        /**
         * @type {?}
         * @protected
         */
        ReviewSubmitComponent.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @protected
         */
        ReviewSubmitComponent.prototype.promotionService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReviewSubmitModule = /** @class */ (function () {
        function ReviewSubmitModule() {
        }
        ReviewSubmitModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CardModule,
                            CartSharedModule,
                            core$1.I18nModule,
                            core$1.UrlModule,
                            router.RouterModule,
                            PromotionsModule,
                            core$1.FeaturesConfigModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutReviewOrder: {
                                        component: ReviewSubmitComponent,
                                        guards: [
                                            CheckoutAuthGuard,
                                            CartNotEmptyGuard,
                                            ShippingAddressSetGuard,
                                            DeliveryModeSetGuard,
                                            PaymentDetailsSetGuard,
                                        ],
                                    },
                                },
                            }))),
                        ],
                        declarations: [ReviewSubmitComponent],
                        entryComponents: [ReviewSubmitComponent],
                        exports: [ReviewSubmitComponent],
                    },] }
        ];
        return ReviewSubmitModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddressFormComponent = /** @class */ (function () {
        function AddressFormComponent(fb, checkoutDeliveryService, userService, userAddressService, globalMessageService, modalService) {
            this.fb = fb;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.userService = userService;
            this.userAddressService = userAddressService;
            this.globalMessageService = globalMessageService;
            this.modalService = modalService;
            this.selectedCountry$ = new rxjs.BehaviorSubject('');
            this.showCancelBtn = true;
            this.submitAddress = new core.EventEmitter();
            this.backToAddress = new core.EventEmitter();
            this.address = this.fb.group({
                defaultAddress: [false],
                titleCode: [''],
                firstName: ['', forms.Validators.required],
                lastName: ['', forms.Validators.required],
                line1: ['', forms.Validators.required],
                line2: [''],
                town: ['', forms.Validators.required],
                region: this.fb.group({
                    isocode: [null, forms.Validators.required],
                }),
                country: this.fb.group({
                    isocode: [null, forms.Validators.required],
                }),
                postalCode: ['', forms.Validators.required],
                phone: '',
            });
        }
        /**
         * @return {?}
         */
        AddressFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            // Fetching countries
            this.countries$ = this.userAddressService.getDeliveryCountries().pipe(operators.tap((/**
             * @param {?} countries
             * @return {?}
             */
            function (countries) {
                if (Object.keys(countries).length === 0) {
                    _this.userAddressService.loadDeliveryCountries();
                }
            })));
            // Fetching titles
            this.titles$ = this.userService.getTitles().pipe(operators.tap((/**
             * @param {?} titles
             * @return {?}
             */
            function (titles) {
                if (Object.keys(titles).length === 0) {
                    _this.userService.loadTitles();
                }
            })), operators.map((/**
             * @param {?} titles
             * @return {?}
             */
            function (titles) {
                titles.sort(sortTitles);
                /** @type {?} */
                var noneTitle = { code: '', name: 'Title' };
                return __spread([noneTitle], titles);
            })));
            // Fetching regions
            this.regions$ = this.selectedCountry$.pipe(operators.switchMap((/**
             * @param {?} country
             * @return {?}
             */
            function (country) { return _this.userAddressService.getRegions(country); })), operators.tap((/**
             * @param {?} regions
             * @return {?}
             */
            function (regions) {
                /** @type {?} */
                var regionControl = _this.address.get('region.isocode');
                if (regions && regions.length > 0) {
                    regionControl.enable();
                }
                else {
                    regionControl.disable();
                }
            })));
            // verify the new added address
            this.addressVerifySub = this.checkoutDeliveryService
                .getAddressVerificationResults()
                .subscribe((/**
             * @param {?} results
             * @return {?}
             */
            function (results) {
                if (results.decision === 'FAIL') {
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                }
                else if (results.decision === 'ACCEPT') {
                    _this.submitAddress.emit(_this.address.value);
                }
                else if (results.decision === 'REJECT') {
                    // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)
                    if (results.errors.errors.some((/**
                     * @param {?} error
                     * @return {?}
                     */
                    function (error) { return error.subject === 'titleCode'; }))) {
                        _this.globalMessageService.add({ key: 'addressForm.titleRequired' }, core$1.GlobalMessageType.MSG_TYPE_ERROR);
                    }
                    else {
                        _this.globalMessageService.add({ key: 'addressForm.invalidAddress' }, core$1.GlobalMessageType.MSG_TYPE_ERROR);
                    }
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                }
                else if (results.decision === 'REVIEW') {
                    _this.openSuggestedAddress(results);
                }
            }));
            if (this.addressData && Object.keys(this.addressData).length !== 0) {
                this.address.patchValue(this.addressData);
                this.countrySelected(this.addressData.country);
                if (this.addressData.region) {
                    this.regionSelected(this.addressData.region);
                }
            }
        };
        /**
         * @param {?} title
         * @return {?}
         */
        AddressFormComponent.prototype.titleSelected = /**
         * @param {?} title
         * @return {?}
         */
        function (title) {
            this.address['controls'].titleCode.setValue(title.code);
        };
        /**
         * @param {?} country
         * @return {?}
         */
        AddressFormComponent.prototype.countrySelected = /**
         * @param {?} country
         * @return {?}
         */
        function (country) {
            this.address['controls'].country['controls'].isocode.setValue(country.isocode);
            this.selectedCountry$.next(country.isocode);
        };
        /**
         * @param {?} region
         * @return {?}
         */
        AddressFormComponent.prototype.regionSelected = /**
         * @param {?} region
         * @return {?}
         */
        function (region) {
            this.address['controls'].region['controls'].isocode.setValue(region.isocode);
        };
        /**
         * @return {?}
         */
        AddressFormComponent.prototype.toggleDefaultAddress = /**
         * @return {?}
         */
        function () {
            this.address['controls'].defaultAddress.setValue(this.address.value.defaultAddress);
        };
        /**
         * @return {?}
         */
        AddressFormComponent.prototype.back = /**
         * @return {?}
         */
        function () {
            this.backToAddress.emit();
        };
        /**
         * @return {?}
         */
        AddressFormComponent.prototype.verifyAddress = /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (this.address.controls['region'].value.isocode) {
                this.regionsSub = this.regions$.pipe(operators.take(1)).subscribe((/**
                 * @param {?} regions
                 * @return {?}
                 */
                function (regions) {
                    /** @type {?} */
                    var obj = regions.find((/**
                     * @param {?} region
                     * @return {?}
                     */
                    function (region) {
                        return region.isocode === _this.address.controls['region'].value.isocode;
                    }));
                    Object.assign(_this.address.value.region, {
                        isocodeShort: obj.isocodeShort,
                    });
                }));
            }
            if (this.address.dirty) {
                this.checkoutDeliveryService.verifyAddress(this.address.value);
            }
            else {
                // address form value not changed
                // ignore duplicate address
                this.submitAddress.emit(undefined);
            }
        };
        /**
         * @param {?} results
         * @return {?}
         */
        AddressFormComponent.prototype.openSuggestedAddress = /**
         * @param {?} results
         * @return {?}
         */
        function (results) {
            var _this = this;
            if (!this.suggestedAddressModalRef) {
                this.suggestedAddressModalRef = this.modalService.open(SuggestedAddressDialogComponent, { centered: true, size: 'lg' });
                this.suggestedAddressModalRef.componentInstance.enteredAddress = this.address.value;
                this.suggestedAddressModalRef.componentInstance.suggestedAddresses =
                    results.suggestedAddresses;
                this.suggestedAddressModalRef.result
                    .then((/**
                 * @param {?} address
                 * @return {?}
                 */
                function (address) {
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                    if (address) {
                        address = Object.assign({
                            titleCode: _this.address.value.titleCode,
                            phone: _this.address.value.phone,
                            selected: true,
                        }, address);
                        _this.submitAddress.emit(address);
                    }
                    _this.suggestedAddressModalRef = null;
                }))
                    .catch((/**
                 * @return {?}
                 */
                function () {
                    // this  callback is called when modal is closed with Esc key or clicking backdrop
                    _this.checkoutDeliveryService.clearAddressVerificationResults();
                    /** @type {?} */
                    var address = Object.assign({
                        selected: true,
                    }, _this.address.value);
                    _this.submitAddress.emit(address);
                    _this.suggestedAddressModalRef = null;
                }));
            }
        };
        /**
         * @return {?}
         */
        AddressFormComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.checkoutDeliveryService.clearAddressVerificationResults();
            if (this.addressVerifySub) {
                this.addressVerifySub.unsubscribe();
            }
            if (this.regionsSub) {
                this.regionsSub.unsubscribe();
            }
        };
        AddressFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-address-form',
                        template: "<div [formGroup]=\"address\">\n  <div class=\"row\">\n    <div class=\"col-md-12 col-lg-9\">\n      <div class=\"form-group\" formGroupName=\"country\">\n        <ng-container *ngIf=\"countries$ | async as countries\">\n          <div *ngIf=\"countries.length !== 0\">\n            <label aria-required=\"true\">\n              <span class=\"label-content required\">{{\n                'addressForm.country' | cxTranslate\n              }}</span>\n              <ng-select\n                class=\"country-select\"\n                formControlName=\"isocode\"\n                [searchable]=\"true\"\n                [clearable]=\"false\"\n                [items]=\"countries\"\n                bindLabel=\"name\"\n                bindValue=\"isocode\"\n                placeholder=\"{{ 'addressForm.selectOne' | cxTranslate }}\"\n                (change)=\"countrySelected($event)\"\n              >\n              </ng-select>\n            </label>\n          </div>\n        </ng-container>\n      </div>\n      <div class=\"form-group\" *ngIf=\"showTitleCode\">\n        <ng-container *ngIf=\"titles$ | async as titles\">\n          <div *ngIf=\"titles.length !== 0\">\n            <label aria-required=\"true\">\n              <span class=\"label-content required\">{{\n                'addressForm.title' | cxTranslate\n              }}</span>\n              <ng-select\n                formControlName=\"titleCode\"\n                [searchable]=\"false\"\n                [clearable]=\"false\"\n                [items]=\"titles\"\n                bindLabel=\"name\"\n                bindValue=\"code\"\n                (change)=\"titleSelected($event)\"\n              >\n              </ng-select>\n            </label>\n          </div>\n        </ng-container>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content required\">{{\n            'addressForm.firstName.label' | cxTranslate\n          }}</span>\n          <input\n            class=\"form-control\"\n            type=\"text\"\n            required\n            placeholder=\"{{\n              'addressForm.firstName.placeholder' | cxTranslate\n            }}\"\n            formControlName=\"firstName\"\n          />\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content required\">{{\n            'addressForm.lastName.label' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            required\n            placeholder=\"{{ 'addressForm.lastName.placeholder' | cxTranslate }}\"\n            formControlName=\"lastName\"\n          />\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content required\">{{\n            'addressForm.address1' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            required\n            placeholder=\"{{ 'addressForm.streetAddress' | cxTranslate }}\"\n            formControlName=\"line1\"\n          />\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'addressForm.address2' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"{{ 'addressForm.aptSuite' | cxTranslate }}\"\n            formControlName=\"line2\"\n          />\n        </label>\n      </div>\n      <div class=\"row\">\n        <div class=\"form-group col-md-6\">\n          <label>\n            <span class=\"label-content required\">{{\n              'addressForm.city.label' | cxTranslate\n            }}</span>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              required\n              placeholder=\"{{ 'addressForm.city.placeholder' | cxTranslate }}\"\n              formControlName=\"town\"\n            />\n          </label>\n        </div>\n        <div class=\"form-group col-md-6\">\n          <ng-container\n            *ngIf=\"regions$ | async as regions\"\n            formGroupName=\"region\"\n          >\n            <div *ngIf=\"regions.length !== 0\">\n              <label aria-required=\"true\">\n                <span class=\"label-content required\">{{\n                  'addressForm.state' | cxTranslate\n                }}</span>\n                <ng-select\n                  class=\"region-select\"\n                  formControlName=\"isocode\"\n                  [searchable]=\"true\"\n                  [clearable]=\"false\"\n                  [items]=\"regions\"\n                  bindLabel=\"{{ regions[0].name ? 'name' : 'isocode' }}\"\n                  bindValue=\"{{ regions[0].name ? 'isocode' : 'region' }}\"\n                  placeholder=\"{{ 'addressForm.selectOne' | cxTranslate }}\"\n                  (change)=\"regionSelected($event)\"\n                >\n                </ng-select>\n              </label>\n            </div>\n          </ng-container>\n        </div>\n        <div class=\"form-group col-md-6\">\n          <label>\n            <span class=\"label-content required\">{{\n              'addressForm.zipCode.label' | cxTranslate\n            }}</span>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              required\n              placeholder=\"{{\n                'addressForm.zipCode.placeholder' | cxTranslate\n              }}\"\n              formControlName=\"postalCode\"\n            />\n          </label>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'addressForm.phoneNumber.label' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"{{\n              'addressForm.phoneNumber.placeholder' | cxTranslate\n            }}\"\n            formControlName=\"phone\"\n          />\n        </label>\n      </div>\n      <div class=\"form-group\" *ngIf=\"setAsDefaultField\">\n        <div class=\"form-check\">\n          <label>\n            <input\n              type=\"checkbox\"\n              class=\"form-check-input\"\n              formControlName=\"defaultAddress\"\n              (change)=\"toggleDefaultAddress()\"\n            />\n            <span class=\"form-check-label\">{{\n              'addressForm.setAsDefault' | cxTranslate\n            }}</span>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"cx-checkout-btns row\">\n    <div class=\"col-md-12 col-lg-6\" *ngIf=\"showCancelBtn\">\n      <button class=\"btn btn-block btn-action\" (click)=\"back()\">\n        {{ cancelBtnLabel || ('addressForm.chooseAddress' | cxTranslate) }}\n      </button>\n    </div>\n    <div class=\"col-md-12 col-lg-6\">\n      <button\n        class=\"btn btn-block btn-primary\"\n        [disabled]=\"address.invalid\"\n        (click)=\"verifyAddress()\"\n      >\n        {{ actionBtnLabel || ('common.continue' | cxTranslate) }}\n      </button>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        AddressFormComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.UserService },
            { type: core$1.UserAddressService },
            { type: core$1.GlobalMessageService },
            { type: ModalService }
        ]; };
        AddressFormComponent.propDecorators = {
            addressData: [{ type: core.Input }],
            actionBtnLabel: [{ type: core.Input }],
            cancelBtnLabel: [{ type: core.Input }],
            setAsDefaultField: [{ type: core.Input }],
            showTitleCode: [{ type: core.Input }],
            showCancelBtn: [{ type: core.Input }],
            submitAddress: [{ type: core.Output }],
            backToAddress: [{ type: core.Output }]
        };
        return AddressFormComponent;
    }());
    if (false) {
        /** @type {?} */
        AddressFormComponent.prototype.countries$;
        /** @type {?} */
        AddressFormComponent.prototype.titles$;
        /** @type {?} */
        AddressFormComponent.prototype.regions$;
        /** @type {?} */
        AddressFormComponent.prototype.selectedCountry$;
        /** @type {?} */
        AddressFormComponent.prototype.addressData;
        /** @type {?} */
        AddressFormComponent.prototype.actionBtnLabel;
        /** @type {?} */
        AddressFormComponent.prototype.cancelBtnLabel;
        /** @type {?} */
        AddressFormComponent.prototype.setAsDefaultField;
        /** @type {?} */
        AddressFormComponent.prototype.showTitleCode;
        /** @type {?} */
        AddressFormComponent.prototype.showCancelBtn;
        /** @type {?} */
        AddressFormComponent.prototype.submitAddress;
        /** @type {?} */
        AddressFormComponent.prototype.backToAddress;
        /** @type {?} */
        AddressFormComponent.prototype.addressVerifySub;
        /** @type {?} */
        AddressFormComponent.prototype.regionsSub;
        /** @type {?} */
        AddressFormComponent.prototype.suggestedAddressModalRef;
        /** @type {?} */
        AddressFormComponent.prototype.address;
        /**
         * @type {?}
         * @private
         */
        AddressFormComponent.prototype.fb;
        /**
         * @type {?}
         * @protected
         */
        AddressFormComponent.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @protected
         */
        AddressFormComponent.prototype.userService;
        /**
         * @type {?}
         * @protected
         */
        AddressFormComponent.prototype.userAddressService;
        /**
         * @type {?}
         * @protected
         */
        AddressFormComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        AddressFormComponent.prototype.modalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddressFormModule = /** @class */ (function () {
        function AddressFormModule() {
        }
        AddressFormModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            forms.FormsModule,
                            router.RouterModule,
                            ngSelect.NgSelectModule,
                            IconModule,
                            core$1.I18nModule,
                            AutoFocusDirectiveModule,
                        ],
                        declarations: [AddressFormComponent, SuggestedAddressDialogComponent],
                        entryComponents: [SuggestedAddressDialogComponent],
                        exports: [AddressFormComponent, SuggestedAddressDialogComponent],
                    },] }
        ];
        return AddressFormModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutDetailsLoadedGuard = /** @class */ (function () {
        function CheckoutDetailsLoadedGuard(checkoutDetailsService) {
            this.checkoutDetailsService = checkoutDetailsService;
        }
        /**
         * @return {?}
         */
        CheckoutDetailsLoadedGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            return this.checkoutDetailsService.getCheckoutDetailsLoaded$;
        };
        CheckoutDetailsLoadedGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        CheckoutDetailsLoadedGuard.ctorParameters = function () { return [
            { type: CheckoutDetailsService }
        ]; };
        /** @nocollapse */ CheckoutDetailsLoadedGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function CheckoutDetailsLoadedGuard_Factory() { return new CheckoutDetailsLoadedGuard(core.ɵɵinject(CheckoutDetailsService)); }, token: CheckoutDetailsLoadedGuard, providedIn: "root" });
        return CheckoutDetailsLoadedGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        CheckoutDetailsLoadedGuard.prototype.checkoutDetailsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function CardWithAddress() { }
    if (false) {
        /** @type {?} */
        CardWithAddress.prototype.card;
        /** @type {?} */
        CardWithAddress.prototype.address;
    }
    var ShippingAddressComponent = /** @class */ (function () {
        function ShippingAddressComponent(userAddressService, cartService, routingService, checkoutDeliveryService, checkoutConfigService, activatedRoute, translation) {
            this.userAddressService = userAddressService;
            this.cartService = cartService;
            this.routingService = routingService;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.checkoutConfigService = checkoutConfigService;
            this.activatedRoute = activatedRoute;
            this.translation = translation;
            this.newAddressFormManuallyOpened = false;
            this.forceLoader = false; // this helps with smoother steps transition
            // this helps with smoother steps transition
            /**
             * @deprecated since version 1.3
             * This variable will no longer be in use. Use cards$ observable instead.
             * TODO(issue:#3921) deprecated since 1.3
             */
            this.cards = [];
            /**
             * @deprecated since version 1.3
             * This variable will no longer be in use. Avoid using it.
             * TODO(issue:#3921) deprecated since 1.3
             */
            this.goTo = null;
            /**
             * @deprecated since version 1.3
             * This variable will no longer be in use. Use CheckoutConfigService.getNextCheckoutStepUrl(this.activatedRoute) instead.
             * TODO(issue:#3921) deprecated since 1.3
             */
            this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);
            /**
             * @deprecated since version 1.3
             * This variable will no longer be in use. Use CheckoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute) instead.
             * TODO(issue:#3921) deprecated since 1.3
             */
            this.checkoutStepUrlPrevious = 'cart';
            this.isGuestCheckout = false;
        }
        /**
         * @return {?}
         */
        ShippingAddressComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.goTo = null;
            this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);
            this.checkoutStepUrlPrevious = 'cart';
            this.isLoading$ = this.userAddressService.getAddressesLoading();
            this.existingAddresses$ = this.userAddressService.getAddresses();
            this.selectedAddress$ = this.checkoutDeliveryService.getDeliveryAddress();
            this.cards$ = rxjs.combineLatest([
                this.existingAddresses$,
                this.selectedAddress$,
                this.translation.translate('checkoutAddress.defaultShippingAddress'),
                this.translation.translate('checkoutAddress.shipToThisAddress'),
                this.translation.translate('addressCard.selected'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 5), addresses = _b[0], selected = _b[1], textDefaultShippingAddress = _b[2], textShipToThisAddress = _b[3], textSelected = _b[4];
                // Select default address if none selected
                if (addresses.length &&
                    (!selected ||
                        Object.keys(selected).length === 0 ||
                        !_this.selectedAddress)) {
                    /** @type {?} */
                    var defaultAddress = addresses.find((/**
                     * @param {?} address
                     * @return {?}
                     */
                    function (address) { return address.defaultAddress; }));
                    selected = defaultAddress;
                    _this.selectAddress(defaultAddress);
                }
                return addresses.map((/**
                 * @param {?} address
                 * @return {?}
                 */
                function (address) {
                    /** @type {?} */
                    var card = _this.getCardContent(address, selected, textDefaultShippingAddress, textShipToThisAddress, textSelected);
                    return {
                        address: address,
                        card: card,
                    };
                }));
            })));
            if (!this.cartService.isGuestCart()) {
                this.userAddressService.loadAddresses();
            }
            else {
                this.isGuestCheckout = true;
            }
        };
        /**
         * @param {?} address
         * @param {?} selected
         * @param {?} textDefaultShippingAddress
         * @param {?} textShipToThisAddress
         * @param {?} textSelected
         * @return {?}
         */
        ShippingAddressComponent.prototype.getCardContent = /**
         * @param {?} address
         * @param {?} selected
         * @param {?} textDefaultShippingAddress
         * @param {?} textShipToThisAddress
         * @param {?} textSelected
         * @return {?}
         */
        function (address, selected, textDefaultShippingAddress, textShipToThisAddress, textSelected) {
            /** @type {?} */
            var region = '';
            if (address.region && address.region.isocode) {
                region = address.region.isocode + ', ';
            }
            return {
                title: address.defaultAddress ? textDefaultShippingAddress : '',
                textBold: address.firstName + ' ' + address.lastName,
                text: [
                    address.line1,
                    address.line2,
                    address.town + ', ' + region + address.country.isocode,
                    address.postalCode,
                    address.phone,
                ],
                actions: [{ name: textShipToThisAddress, event: 'send' }],
                header: selected && selected.id === address.id ? textSelected : '',
            };
        };
        /**
         * @param {?} address
         * @return {?}
         */
        ShippingAddressComponent.prototype.selectAddress = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.selectedAddress = address;
            this.checkoutDeliveryService.setDeliveryAddress(address);
        };
        /**
         * @param {?} address
         * @return {?}
         */
        ShippingAddressComponent.prototype.addAddress = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            var _this = this;
            // TODO(issue:#3921) deprecated since 1.3 - Remove temp address
            /** @type {?} */
            var tempAddress = address['address']
                ? address['address']
                : address;
            /** @type {?} */
            var selectedSub = this.selectedAddress$.subscribe((/**
             * @param {?} selected
             * @return {?}
             */
            function (selected) {
                if (selected && selected.shippingAddress) {
                    _this.goNext();
                    selectedSub.unsubscribe();
                }
            }));
            this.forceLoader = true;
            // TODO(issue:#3921) deprecated since 1.3 - Remove this condition
            if (address['address'] || address['newAddress']) {
                address['newAddress']
                    ? this.checkoutDeliveryService.createAndSetAddress(tempAddress)
                    : this.selectAddress(tempAddress);
            }
            else {
                // TODO(issue:#3921) deprecated since 1.3 - Use instead of condition
                this.existingAddresses$.pipe(operators.take(1)).subscribe((/**
                 * @param {?} addresses
                 * @return {?}
                 */
                function (addresses) {
                    addresses.includes(tempAddress)
                        ? _this.selectAddress(tempAddress)
                        : _this.checkoutDeliveryService.createAndSetAddress(tempAddress);
                }));
            }
        };
        /**
         * @return {?}
         */
        ShippingAddressComponent.prototype.showNewAddressForm = /**
         * @return {?}
         */
        function () {
            this.newAddressFormManuallyOpened = true;
        };
        /**
         * @param {?=} goPrevious
         * @return {?}
         */
        ShippingAddressComponent.prototype.hideNewAddressForm = /**
         * @param {?=} goPrevious
         * @return {?}
         */
        function (goPrevious) {
            if (goPrevious === void 0) { goPrevious = false; }
            this.newAddressFormManuallyOpened = false;
            if (goPrevious) {
                this.goPrevious();
            }
        };
        /**
         * @return {?}
         */
        ShippingAddressComponent.prototype.goNext = /**
         * @return {?}
         */
        function () {
            this.routingService.go(this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute));
        };
        /**
         * @return {?}
         */
        ShippingAddressComponent.prototype.goPrevious = /**
         * @return {?}
         */
        function () {
            this.routingService.go(this.checkoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute) || 'cart');
        };
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use selectAddress(address: Address) instead.
         * TODO(issue:#3921) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use selectAddress(address: Address) instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @param {?} address
         * @return {?}
         */
        ShippingAddressComponent.prototype.addressSelected = /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use selectAddress(address: Address) instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.selectAddress(address);
        };
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goPrevious() instead.
         * TODO(issue:#3921) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goPrevious() instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @return {?}
         */
        ShippingAddressComponent.prototype.back = /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goPrevious() instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @return {?}
         */
        function () {
            this.goPrevious();
        };
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goNext() instead.
         * TODO(issue:#3921) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goNext() instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @return {?}
         */
        ShippingAddressComponent.prototype.next = /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use goNext() instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @return {?}
         */
        function () {
            this.goNext();
        };
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use addAddress(address: Address) instead.
         * TODO(issue:#3921) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use addAddress(address: Address) instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @param {?} address
         * @return {?}
         */
        ShippingAddressComponent.prototype.addNewAddress = /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Use addAddress(address: Address) instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.addAddress(address);
        };
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Remove.
         * TODO(issue:#3921) deprecated since 1.3
         */
        /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Remove.
         * TODO(issue:#3921) deprecated since 1.3
         * @return {?}
         */
        ShippingAddressComponent.prototype.ngOnDestroy = /**
         * @deprecated since version 1.3
         * This method will no longer be in use. Remove.
         * TODO(issue:#3921) deprecated since 1.3
         * @return {?}
         */
        function () {
            if (this.setAddressSub) {
                this.setAddressSub.unsubscribe();
            }
            if (this.selectedAddressSub) {
                this.selectedAddressSub.unsubscribe();
            }
        };
        ShippingAddressComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-shipping-address',
                        template: "<ng-container *ngIf=\"cards$ | async as cards\">\n  <h3 class=\"cx-checkout-title d-none d-lg-block d-xl-block\">\n    {{ 'checkoutAddress.shippingAddress' | cxTranslate }}\n  </h3>\n  <ng-container *ngIf=\"!forceLoader && !(isLoading$ | async); else loading\">\n    <ng-container\n      *ngIf=\"\n        cards?.length && !newAddressFormManuallyOpened;\n        else newAddressForm\n      \"\n    >\n      <p class=\"cx-checkout-text\">\n        {{ 'checkoutAddress.selectYourShippingAddress' | cxTranslate }}\n      </p>\n      <div class=\"cx-checkout-btns row\">\n        <div class=\"col-sm-12 col-md-12 col-lg-6\">\n          <button\n            class=\"btn btn-block btn-action\"\n            (click)=\"showNewAddressForm()\"\n          >\n            {{ 'checkoutAddress.addNewAddress' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"cx-checkout-body row\">\n        <div\n          class=\"cx-shipping-address-card col-md-12 col-lg-6\"\n          *ngFor=\"let card of cards; let i = index\"\n        >\n          <div\n            class=\"cx-shipping-address-card-inner\"\n            (click)=\"addressSelected(card.address)\"\n          >\n            <cx-card\n              [border]=\"true\"\n              [fitToContainer]=\"true\"\n              [content]=\"card.card\"\n              (sendCard)=\"addressSelected(card.address)\"\n            ></cx-card>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"cx-checkout-btns row\">\n        <div class=\"col-md-12 col-lg-6\">\n          <button class=\"cx-btn btn btn-block btn-action\" (click)=\"back()\">\n            {{ 'checkout.backToCart' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"col-md-12 col-lg-6\">\n          <button\n            class=\"cx-btn btn btn-block btn-primary\"\n            [disabled]=\"\n              (!selectedAddress || !selectedAddress.id) &&\n              !(selectedAddress$ | async)?.shippingAddress\n            \"\n            (click)=\"next()\"\n          >\n            {{ 'common.continue' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </ng-container>\n\n    <ng-template #newAddressForm>\n      <ng-container *ngIf=\"cards.length; else initialAddressForm\">\n        <cx-address-form\n          [showTitleCode]=\"true\"\n          (backToAddress)=\"hideNewAddressForm(false)\"\n          (submitAddress)=\"addAddress($event)\"\n        ></cx-address-form>\n      </ng-container>\n      <ng-template #initialAddressForm>\n        <cx-address-form\n          [showTitleCode]=\"true\"\n          [setAsDefaultField]=\"!isGuestCheckout\"\n          [addressData]=\"setAddress\"\n          cancelBtnLabel=\"{{ 'checkout.backToCart' | cxTranslate }}\"\n          (backToAddress)=\"hideNewAddressForm(true)\"\n          (submitAddress)=\"addAddress($event)\"\n        ></cx-address-form>\n      </ng-template>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #loading>\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </ng-template>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ShippingAddressComponent.ctorParameters = function () { return [
            { type: core$1.UserAddressService },
            { type: core$1.CartService },
            { type: core$1.RoutingService },
            { type: core$1.CheckoutDeliveryService },
            { type: CheckoutConfigService },
            { type: router.ActivatedRoute },
            { type: core$1.TranslationService }
        ]; };
        return ShippingAddressComponent;
    }());
    if (false) {
        /** @type {?} */
        ShippingAddressComponent.prototype.existingAddresses$;
        /** @type {?} */
        ShippingAddressComponent.prototype.newAddressFormManuallyOpened;
        /** @type {?} */
        ShippingAddressComponent.prototype.isLoading$;
        /** @type {?} */
        ShippingAddressComponent.prototype.cards$;
        /** @type {?} */
        ShippingAddressComponent.prototype.selectedAddress$;
        /** @type {?} */
        ShippingAddressComponent.prototype.forceLoader;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use cards$ observable instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.cards;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Avoid using it.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.goTo;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use selectAddress(address: Address) instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.setAddress;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Avoid using it.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.setAddressSub;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use selectedAddress$ observable instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.selectedAddressSub;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use CheckoutConfigService.getNextCheckoutStepUrl(this.activatedRoute) instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.checkoutStepUrlNext;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use CheckoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute) instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.checkoutStepUrlPrevious;
        /** @type {?} */
        ShippingAddressComponent.prototype.isGuestCheckout;
        /**
         * @deprecated since version 1.3
         * This variable will no longer be in use. Use selectedAddress$ observable instead.
         * TODO(issue:#3921) deprecated since 1.3
         * @type {?}
         */
        ShippingAddressComponent.prototype.selectedAddress;
        /**
         * @type {?}
         * @protected
         */
        ShippingAddressComponent.prototype.userAddressService;
        /**
         * @type {?}
         * @protected
         */
        ShippingAddressComponent.prototype.cartService;
        /**
         * @type {?}
         * @protected
         */
        ShippingAddressComponent.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        ShippingAddressComponent.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @private
         */
        ShippingAddressComponent.prototype.checkoutConfigService;
        /**
         * @type {?}
         * @private
         */
        ShippingAddressComponent.prototype.activatedRoute;
        /**
         * @type {?}
         * @private
         */
        ShippingAddressComponent.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ShippingAddressModule = /** @class */ (function () {
        function ShippingAddressModule() {
        }
        ShippingAddressModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            AddressFormModule,
                            CardModule,
                            SpinnerModule,
                            core$1.I18nModule,
                            CheckoutProgressMobileTopModule,
                            CheckoutProgressMobileBottomModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CheckoutShippingAddress: {
                                        component: ShippingAddressComponent,
                                        guards: [
                                            CheckoutAuthGuard,
                                            CartNotEmptyGuard,
                                            CheckoutDetailsLoadedGuard,
                                        ],
                                    },
                                },
                            }))),
                        ],
                        declarations: [ShippingAddressComponent],
                        entryComponents: [ShippingAddressComponent],
                        exports: [ShippingAddressComponent],
                    },] }
        ];
        return ShippingAddressModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutComponentModule = /** @class */ (function () {
        function CheckoutComponentModule() {
        }
        CheckoutComponentModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CheckoutOrchestratorModule,
                            CheckoutOrderSummaryModule,
                            CheckoutProgressModule,
                            CheckoutProgressMobileTopModule,
                            CheckoutProgressMobileBottomModule,
                            DeliveryModeModule,
                            PaymentMethodModule,
                            PlaceOrderModule,
                            PromotionsModule,
                            ReviewSubmitModule,
                            ShippingAddressModule,
                        ],
                    },] }
        ];
        return CheckoutComponentModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NotCheckoutAuthGuard = /** @class */ (function () {
        function NotCheckoutAuthGuard(routingService, authService, cartService) {
            this.routingService = routingService;
            this.authService = authService;
            this.cartService = cartService;
        }
        /**
         * @return {?}
         */
        NotCheckoutAuthGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.authService.getUserToken().pipe(operators.map((/**
             * @param {?} token
             * @return {?}
             */
            function (token) {
                if (token.access_token) {
                    _this.routingService.go({ cxRoute: 'home' });
                }
                else if (_this.cartService.isGuestCart()) {
                    _this.routingService.go({ cxRoute: 'cart' });
                    return false;
                }
                return !token.access_token;
            })));
        };
        NotCheckoutAuthGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        NotCheckoutAuthGuard.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.AuthService },
            { type: core$1.CartService }
        ]; };
        /** @nocollapse */ NotCheckoutAuthGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function NotCheckoutAuthGuard_Factory() { return new NotCheckoutAuthGuard(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.AuthService), core.ɵɵinject(core$1.CartService)); }, token: NotCheckoutAuthGuard, providedIn: "root" });
        return NotCheckoutAuthGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        NotCheckoutAuthGuard.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        NotCheckoutAuthGuard.prototype.authService;
        /**
         * @type {?}
         * @private
         */
        NotCheckoutAuthGuard.prototype.cartService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var HamburgerMenuService = /** @class */ (function () {
        function HamburgerMenuService(router$1) {
            var _this = this;
            this.isExpanded = new rxjs.BehaviorSubject(false);
            router$1.events
                .pipe(operators.filter((/**
             * @param {?} event
             * @return {?}
             */
            function (event) { return event instanceof router.NavigationStart; })))
                .subscribe((/**
             * @return {?}
             */
            function () {
                _this.toggle(true);
            }));
        }
        /**
         * toggles the expand state of the hamburger menu
         */
        /**
         * toggles the expand state of the hamburger menu
         * @param {?=} forceCollapse
         * @return {?}
         */
        HamburgerMenuService.prototype.toggle = /**
         * toggles the expand state of the hamburger menu
         * @param {?=} forceCollapse
         * @return {?}
         */
        function (forceCollapse) {
            if (forceCollapse) {
                this.isExpanded.next(false);
            }
            else {
                this.isExpanded.next(!this.isExpanded.value);
            }
        };
        HamburgerMenuService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        HamburgerMenuService.ctorParameters = function () { return [
            { type: router.Router }
        ]; };
        /** @nocollapse */ HamburgerMenuService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function HamburgerMenuService_Factory() { return new HamburgerMenuService(core.ɵɵinject(router.Router)); }, token: HamburgerMenuService, providedIn: "root" });
        return HamburgerMenuService;
    }());
    if (false) {
        /** @type {?} */
        HamburgerMenuService.prototype.isExpanded;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var HamburgerMenuComponent = /** @class */ (function () {
        function HamburgerMenuComponent(hamburgerMenuService) {
            this.hamburgerMenuService = hamburgerMenuService;
        }
        /**
         * @return {?}
         */
        HamburgerMenuComponent.prototype.toggle = /**
         * @return {?}
         */
        function () {
            this.hamburgerMenuService.toggle();
        };
        Object.defineProperty(HamburgerMenuComponent.prototype, "isExpanded", {
            get: /**
             * @return {?}
             */
            function () {
                return this.hamburgerMenuService.isExpanded;
            },
            enumerable: true,
            configurable: true
        });
        HamburgerMenuComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-hamburger-menu',
                        template: "<button\n  class=\"cx-hamburger\"\n  type=\"button\"\n  (click)=\"toggle()\"\n  [class.is-active]=\"isExpanded | async\"\n  [attr.aria-expanded]=\"isExpanded | async\"\n  aria-label=\"Menu\"\n  aria-controls=\"header-account-container, header-categories-container, header-locale-container\"\n>\n  <span class=\"hamburger-box\">\n    <span class=\"hamburger-inner\"></span>\n  </span>\n</button>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        HamburgerMenuComponent.ctorParameters = function () { return [
            { type: HamburgerMenuService }
        ]; };
        return HamburgerMenuComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        HamburgerMenuComponent.prototype.hamburgerMenuService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var HamburgerMenuModule = /** @class */ (function () {
        function HamburgerMenuModule() {
        }
        HamburgerMenuModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    HamburgerMenuComponent: {
                                        component: HamburgerMenuComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [HamburgerMenuComponent],
                        exports: [HamburgerMenuComponent],
                        entryComponents: [HamburgerMenuComponent],
                    },] }
        ];
        return HamburgerMenuModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LayoutModule = /** @class */ (function () {
        function LayoutModule() {
        }
        LayoutModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [OutletRefModule],
                        providers: [{ provide: LayoutConfig, useExisting: core$1.Config }],
                        exports: [OutletRefModule],
                    },] }
        ];
        return LayoutModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ConsentManagementFormComponent = /** @class */ (function () {
        function ConsentManagementFormComponent() {
            this.consentGiven = false;
            this.requiredConsents = [];
            this.isAnonymousConsentsEnabled = false;
            // TODO(issue:4989) Anonymous consents - remove
            this.isLevel13 = false;
            this.consentChanged = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        ConsentManagementFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            if (this.isAnonymousConsentsEnabled && this.consent) {
                this.consentGiven = Boolean(this.consent.consentState === core$1.ANONYMOUS_CONSENT_STATUS.GIVEN);
            }
            else {
                if (this.consentTemplate && this.consentTemplate.currentConsent) {
                    if (this.consentTemplate.currentConsent.consentWithdrawnDate) {
                        this.consentGiven = false;
                    }
                    else if (this.consentTemplate.currentConsent.consentGivenDate) {
                        this.consentGiven = true;
                    }
                }
            }
        };
        /**
         * @return {?}
         */
        ConsentManagementFormComponent.prototype.onConsentChange = /**
         * @return {?}
         */
        function () {
            this.consentGiven = !this.consentGiven;
            this.consentChanged.emit({
                given: this.consentGiven,
                template: this.consentTemplate,
            });
        };
        /**
         * @param {?} templateId
         * @return {?}
         */
        ConsentManagementFormComponent.prototype.isRequired = /**
         * @param {?} templateId
         * @return {?}
         */
        function (templateId) {
            return this.isAnonymousConsentsEnabled
                ? this.requiredConsents.includes(templateId)
                : false;
        };
        ConsentManagementFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-consent-management-form',
                        template: "<div class=\"form-check\">\n  <label>\n    <input\n      type=\"checkbox\"\n      class=\"form-check-input\"\n      (change)=\"onConsentChange()\"\n      [checked]=\"consentGiven\"\n      [disabled]=\"isRequired(consentTemplate?.id)\"\n    />\n    <!-- TODO(issue:4989) Anonymous consents - remove the *ngIf=\"isLevel13\" -->\n    <span *ngIf=\"isLevel13\" class=\"form-check-label cx-be-bold\">\n      {{ consentTemplate?.name }}\n    </span>\n    <!-- TODO(issue:4989) Anonymous consents - remove the *ngIf=\"isLevel13\" -->\n    <br *ngIf=\"isLevel13\" />\n    <span class=\"form-check-label\">\n      {{ consentTemplate?.description }}\n    </span>\n  </label>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        ConsentManagementFormComponent.ctorParameters = function () { return []; };
        ConsentManagementFormComponent.propDecorators = {
            consentTemplate: [{ type: core.Input }],
            requiredConsents: [{ type: core.Input }],
            isAnonymousConsentsEnabled: [{ type: core.Input }],
            consent: [{ type: core.Input }],
            isLevel13: [{ type: core.Input }],
            consentChanged: [{ type: core.Output }]
        };
        return ConsentManagementFormComponent;
    }());
    if (false) {
        /** @type {?} */
        ConsentManagementFormComponent.prototype.consentGiven;
        /** @type {?} */
        ConsentManagementFormComponent.prototype.consentTemplate;
        /** @type {?} */
        ConsentManagementFormComponent.prototype.requiredConsents;
        /** @type {?} */
        ConsentManagementFormComponent.prototype.isAnonymousConsentsEnabled;
        /** @type {?} */
        ConsentManagementFormComponent.prototype.consent;
        /** @type {?} */
        ConsentManagementFormComponent.prototype.isLevel13;
        /** @type {?} */
        ConsentManagementFormComponent.prototype.consentChanged;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ConsentManagementComponent = /** @class */ (function () {
        function ConsentManagementComponent(userConsentService, globalMessageService, anonymousConsentsConfig, anonymousConsentsService, authService) {
            this.userConsentService = userConsentService;
            this.globalMessageService = globalMessageService;
            this.anonymousConsentsConfig = anonymousConsentsConfig;
            this.anonymousConsentsService = anonymousConsentsService;
            this.authService = authService;
            this.subscriptions = new rxjs.Subscription();
            this.allConsentsLoading = new rxjs.BehaviorSubject(false);
            this.requiredConsents = [];
            this.isAnonymousConsentsEnabled = core$1.isFeatureEnabled(this.anonymousConsentsConfig, core$1.ANONYMOUS_CONSENTS_FEATURE);
            // TODO(issue:4989) Anonymous consents - remove
            this.isLevel13 = core$1.isFeatureLevel(this.anonymousConsentsConfig, '1.3');
        }
        /**
         * @return {?}
         */
        ConsentManagementComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.loading$ = rxjs.combineLatest([
                this.userConsentService.getConsentsResultLoading(),
                this.userConsentService.getGiveConsentResultLoading(),
                this.userConsentService.getWithdrawConsentResultLoading(),
                this.authService.isUserLoggedIn(),
                this.allConsentsLoading,
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 5), consentLoading = _b[0], giveConsentLoading = _b[1], withdrawConsentLoading = _b[2], isUserLoggedIn = _b[3], allConsentsLoading = _b[4];
                return consentLoading ||
                    giveConsentLoading ||
                    withdrawConsentLoading ||
                    !isUserLoggedIn ||
                    allConsentsLoading;
            })));
            this.consentListInit();
            this.giveConsentInit();
            this.withdrawConsentInit();
        };
        /**
         * @private
         * @return {?}
         */
        ConsentManagementComponent.prototype.consentListInit = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.templateList$ = this.userConsentService.getConsents().pipe(operators.withLatestFrom(this.anonymousConsentsService.getTemplates(), this.authService.isUserLoggedIn()), operators.filter((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 3), _templateList = _b[0], _anonymousTemplates = _b[1], isUserLoggedIn = _b[2];
                return isUserLoggedIn;
            })), operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), templateList = _b[0], _anonymousTemplates = _b[1];
                if (!_this.consentsExists(templateList)) {
                    _this.userConsentService.loadConsents();
                }
            })), operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), templateList = _b[0], anonymousTemplates = _b[1];
                if (!_this.isAnonymousConsentsEnabled) {
                    return templateList;
                }
                if (Boolean(_this.anonymousConsentsConfig.anonymousConsents)) {
                    if (Boolean(_this.anonymousConsentsConfig.anonymousConsents.requiredConsents)) {
                        _this.requiredConsents = _this.anonymousConsentsConfig.anonymousConsents.requiredConsents;
                    }
                    if (Boolean(_this.anonymousConsentsConfig.anonymousConsents
                        .consentManagementPage)) {
                        return _this.hideAnonymousConsents(templateList, anonymousTemplates);
                    }
                }
                return templateList;
            })));
        };
        /**
         * @private
         * @param {?} templateList
         * @param {?=} anonymousTemplates
         * @return {?}
         */
        ConsentManagementComponent.prototype.hideAnonymousConsents = /**
         * @private
         * @param {?} templateList
         * @param {?=} anonymousTemplates
         * @return {?}
         */
        function (templateList, anonymousTemplates) {
            if (anonymousTemplates === void 0) { anonymousTemplates = []; }
            /** @type {?} */
            var hideTemplateIds = [];
            if (!this.anonymousConsentsConfig.anonymousConsents.consentManagementPage
                .showAnonymousConsents) {
                hideTemplateIds = anonymousTemplates.map((/**
                 * @param {?} template
                 * @return {?}
                 */
                function (template) { return template.id; }));
                return this.userConsentService.filterConsentTemplates(templateList, hideTemplateIds);
            }
            if (Boolean(this.anonymousConsentsConfig.anonymousConsents.consentManagementPage
                .hideConsents) &&
                this.anonymousConsentsConfig.anonymousConsents.consentManagementPage
                    .hideConsents.length > 0) {
                hideTemplateIds = this.anonymousConsentsConfig.anonymousConsents
                    .consentManagementPage.hideConsents;
            }
            return this.userConsentService.filterConsentTemplates(templateList, hideTemplateIds);
        };
        /**
         * @private
         * @return {?}
         */
        ConsentManagementComponent.prototype.giveConsentInit = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.userConsentService.resetGiveConsentProcessState();
            this.subscriptions.add(this.userConsentService
                .getGiveConsentResultSuccess()
                .subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) { return _this.onConsentGivenSuccess(success); })));
        };
        /**
         * @private
         * @return {?}
         */
        ConsentManagementComponent.prototype.withdrawConsentInit = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.userConsentService.resetWithdrawConsentProcessState();
            this.subscriptions.add(this.userConsentService
                .getWithdrawConsentResultLoading()
                .pipe(operators.skipWhile(Boolean), operators.withLatestFrom(this.userConsentService.getWithdrawConsentResultSuccess()), operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), withdrawalSuccess = _b[1];
                return withdrawalSuccess;
            })), operators.tap((/**
             * @param {?} withdrawalSuccess
             * @return {?}
             */
            function (withdrawalSuccess) {
                if (withdrawalSuccess) {
                    _this.userConsentService.loadConsents();
                }
            })))
                .subscribe((/**
             * @param {?} withdrawalSuccess
             * @return {?}
             */
            function (withdrawalSuccess) {
                return _this.onConsentWithdrawnSuccess(withdrawalSuccess);
            })));
        };
        /**
         * @private
         * @param {?} templateList
         * @return {?}
         */
        ConsentManagementComponent.prototype.consentsExists = /**
         * @private
         * @param {?} templateList
         * @return {?}
         */
        function (templateList) {
            return Boolean(templateList) && templateList.length > 0;
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        ConsentManagementComponent.prototype.onConsentChange = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var given = _a.given, template = _a.template;
            if (given) {
                this.userConsentService.giveConsent(template.id, template.version);
            }
            else {
                this.userConsentService.withdrawConsent(template.currentConsent.code);
            }
        };
        /**
         * @private
         * @param {?} success
         * @return {?}
         */
        ConsentManagementComponent.prototype.onConsentGivenSuccess = /**
         * @private
         * @param {?} success
         * @return {?}
         */
        function (success) {
            if (success) {
                this.userConsentService.resetGiveConsentProcessState();
                this.globalMessageService.add({ key: 'consentManagementForm.message.success.given' }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
            }
        };
        /**
         * @private
         * @param {?} success
         * @return {?}
         */
        ConsentManagementComponent.prototype.onConsentWithdrawnSuccess = /**
         * @private
         * @param {?} success
         * @return {?}
         */
        function (success) {
            if (success) {
                this.userConsentService.resetWithdrawConsentProcessState();
                this.globalMessageService.add({ key: 'consentManagementForm.message.success.withdrawn' }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
            }
        };
        /**
         * @param {?=} templates
         * @return {?}
         */
        ConsentManagementComponent.prototype.rejectAll = /**
         * @param {?=} templates
         * @return {?}
         */
        function (templates) {
            var _this = this;
            if (templates === void 0) { templates = []; }
            /** @type {?} */
            var consentsToWithdraw = [];
            templates.forEach((/**
             * @param {?} template
             * @return {?}
             */
            function (template) {
                if (_this.userConsentService.isConsentGiven(template.currentConsent)) {
                    if (_this.isRequiredConsent(template)) {
                        return;
                    }
                    consentsToWithdraw.push(template);
                }
            }));
            this.allConsentsLoading.next(true);
            this.subscriptions.add(this.setupWithdrawalStream(consentsToWithdraw)
                .pipe(operators.tap((/**
             * @param {?} _timesLoaded
             * @return {?}
             */
            function (_timesLoaded) { return _this.allConsentsLoading.next(false); })))
                .subscribe());
        };
        /**
         * @private
         * @param {?=} consentsToWithdraw
         * @return {?}
         */
        ConsentManagementComponent.prototype.setupWithdrawalStream = /**
         * @private
         * @param {?=} consentsToWithdraw
         * @return {?}
         */
        function (consentsToWithdraw) {
            var _this = this;
            if (consentsToWithdraw === void 0) { consentsToWithdraw = []; }
            /** @type {?} */
            var loading$ = rxjs.concat(this.userConsentService.getWithdrawConsentResultLoading()).pipe(operators.distinctUntilChanged(), operators.filter((/**
             * @param {?} loading
             * @return {?}
             */
            function (loading) { return !loading; })));
            /** @type {?} */
            var count$ = loading$.pipe(operators.scan((/**
             * @param {?} acc
             * @param {?} _value
             * @return {?}
             */
            function (acc, _value) { return acc + 1; }), -1));
            /** @type {?} */
            var withdraw$ = count$.pipe(operators.tap((/**
             * @param {?} i
             * @return {?}
             */
            function (i) {
                if (i < consentsToWithdraw.length) {
                    _this.userConsentService.withdrawConsent(consentsToWithdraw[i].currentConsent.code);
                }
            })));
            /** @type {?} */
            var checkTimesLoaded$ = withdraw$.pipe(operators.filter((/**
             * @param {?} timesLoaded
             * @return {?}
             */
            function (timesLoaded) { return timesLoaded === consentsToWithdraw.length; })));
            return checkTimesLoaded$;
        };
        /**
         * @param {?=} templates
         * @return {?}
         */
        ConsentManagementComponent.prototype.allowAll = /**
         * @param {?=} templates
         * @return {?}
         */
        function (templates) {
            var _this = this;
            if (templates === void 0) { templates = []; }
            /** @type {?} */
            var consentsToGive = [];
            templates.forEach((/**
             * @param {?} template
             * @return {?}
             */
            function (template) {
                if (_this.userConsentService.isConsentWithdrawn(template.currentConsent)) {
                    if (_this.isRequiredConsent(template)) {
                        return;
                    }
                    consentsToGive.push(template);
                }
            }));
            this.allConsentsLoading.next(true);
            this.subscriptions.add(this.setupGiveStream(consentsToGive)
                .pipe(operators.tap((/**
             * @param {?} _timesLoaded
             * @return {?}
             */
            function (_timesLoaded) { return _this.allConsentsLoading.next(false); })))
                .subscribe());
        };
        /**
         * @private
         * @param {?=} consentsToGive
         * @return {?}
         */
        ConsentManagementComponent.prototype.setupGiveStream = /**
         * @private
         * @param {?=} consentsToGive
         * @return {?}
         */
        function (consentsToGive) {
            var _this = this;
            if (consentsToGive === void 0) { consentsToGive = []; }
            /** @type {?} */
            var loading$ = rxjs.concat(this.userConsentService.getGiveConsentResultLoading()).pipe(operators.distinctUntilChanged(), operators.filter((/**
             * @param {?} loading
             * @return {?}
             */
            function (loading) { return !loading; })));
            /** @type {?} */
            var count$ = loading$.pipe(operators.scan((/**
             * @param {?} acc
             * @param {?} _value
             * @return {?}
             */
            function (acc, _value) { return acc + 1; }), -1));
            /** @type {?} */
            var giveConsent$ = count$.pipe(operators.tap((/**
             * @param {?} i
             * @return {?}
             */
            function (i) {
                if (i < consentsToGive.length) {
                    _this.userConsentService.giveConsent(consentsToGive[i].id, consentsToGive[i].version);
                }
            })));
            /** @type {?} */
            var checkTimesLoaded$ = giveConsent$.pipe(operators.filter((/**
             * @param {?} timesLoaded
             * @return {?}
             */
            function (timesLoaded) { return timesLoaded === consentsToGive.length; })));
            return checkTimesLoaded$;
        };
        /**
         * @private
         * @param {?} template
         * @return {?}
         */
        ConsentManagementComponent.prototype.isRequiredConsent = /**
         * @private
         * @param {?} template
         * @return {?}
         */
        function (template) {
            if (!this.isAnonymousConsentsEnabled) {
                return false;
            }
            return (Boolean(this.anonymousConsentsConfig.anonymousConsents) &&
                Boolean(this.anonymousConsentsConfig.anonymousConsents.requiredConsents) &&
                this.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(template.id));
        };
        /**
         * @return {?}
         */
        ConsentManagementComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscriptions.unsubscribe();
            this.allConsentsLoading.unsubscribe();
            this.userConsentService.resetGiveConsentProcessState();
            this.userConsentService.resetWithdrawConsentProcessState();
        };
        ConsentManagementComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-consent-management',
                        template: "<!-- TODO(issue:4989) Anonymous consents - remove the wrapping `<ng-container *ngIf=\"isLevel13; else legacyConsentManagementPage\">` -->\n<ng-container *ngIf=\"isLevel13; else legacyConsentManagementPage\">\n  <div *ngIf=\"loading$ | async; else consentManagementForm\">\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n\n  <ng-template #consentManagementForm>\n    <ng-container *ngIf=\"templateList$ | async as templateList\">\n      <div class=\"cx-consent-action-links\">\n        <div class=\"col-sm-12 col-md-8 col-lg-6\">\n          <a\n            tabindex=\"0\"\n            class=\"btn-link cx-action-link\"\n            (click)=\"rejectAll(templateList)\"\n            >{{ 'consentManagementForm.clearAll' | cxTranslate }}</a\n          >\n          <a\n            tabindex=\"0\"\n            class=\"btn-link cx-action-link\"\n            (click)=\"allowAll(templateList)\"\n            >{{ 'consentManagementForm.selectAll' | cxTranslate }}</a\n          >\n        </div>\n      </div>\n\n      <div class=\"cx-consent-toggles\">\n        <div class=\"col-sm-12 col-md-8 col-lg-6\">\n          <cx-consent-management-form\n            *ngFor=\"let consentTemplate of templateList\"\n            [consentTemplate]=\"consentTemplate\"\n            [requiredConsents]=\"requiredConsents\"\n            [isAnonymousConsentsEnabled]=\"isAnonymousConsentsEnabled\"\n            [isLevel13]=\"isLevel13\"\n            (consentChanged)=\"onConsentChange($event)\"\n          ></cx-consent-management-form>\n        </div>\n      </div>\n    </ng-container>\n  </ng-template>\n</ng-container>\n\n<!-- TODO(issue:4989) Anonymous consents - remove this whole `<ng-template>` -->\n<ng-template #legacyConsentManagementPage>\n  <div *ngIf=\"loading$ | async; else consentManagementForm\">\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n\n  <ng-template #consentManagementForm>\n    <div class=\"row d-flex justify-content-center\">\n      <div class=\"col-md-8\">\n        <cx-consent-management-form\n          *ngFor=\"let consentTemplate of templateList$ | async\"\n          [consentTemplate]=\"consentTemplate\"\n          (consentChanged)=\"onConsentChange($event)\"\n        ></cx-consent-management-form>\n      </div>\n    </div>\n  </ng-template>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        ConsentManagementComponent.ctorParameters = function () { return [
            { type: core$1.UserConsentService },
            { type: core$1.GlobalMessageService },
            { type: core$1.AnonymousConsentsConfig },
            { type: core$1.AnonymousConsentsService },
            { type: core$1.AuthService }
        ]; };
        return ConsentManagementComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ConsentManagementComponent.prototype.subscriptions;
        /**
         * @type {?}
         * @private
         */
        ConsentManagementComponent.prototype.allConsentsLoading;
        /** @type {?} */
        ConsentManagementComponent.prototype.templateList$;
        /** @type {?} */
        ConsentManagementComponent.prototype.loading$;
        /** @type {?} */
        ConsentManagementComponent.prototype.requiredConsents;
        /** @type {?} */
        ConsentManagementComponent.prototype.isAnonymousConsentsEnabled;
        /** @type {?} */
        ConsentManagementComponent.prototype.isLevel13;
        /**
         * @type {?}
         * @private
         */
        ConsentManagementComponent.prototype.userConsentService;
        /**
         * @type {?}
         * @private
         */
        ConsentManagementComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        ConsentManagementComponent.prototype.anonymousConsentsConfig;
        /**
         * @type {?}
         * @private
         */
        ConsentManagementComponent.prototype.anonymousConsentsService;
        /**
         * @type {?}
         * @private
         */
        ConsentManagementComponent.prototype.authService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ConsentManagementModule = /** @class */ (function () {
        function ConsentManagementModule() {
        }
        ConsentManagementModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            SpinnerModule,
                            core$1.I18nModule,
                            IconModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ConsentManagementComponent: {
                                        component: ConsentManagementComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                        ],
                        declarations: [ConsentManagementComponent, ConsentManagementFormComponent],
                        exports: [ConsentManagementComponent, ConsentManagementFormComponent],
                        entryComponents: [ConsentManagementComponent],
                    },] }
        ];
        return ConsentManagementModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AnonymousConsentsModule = /** @class */ (function () {
        function AnonymousConsentsModule() {
        }
        AnonymousConsentsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.I18nModule,
                            IconModule,
                            SpinnerModule,
                            ConsentManagementModule,
                        ],
                        declarations: [AnonymousConsentDialogComponent],
                        entryComponents: [AnonymousConsentDialogComponent],
                        exports: [AnonymousConsentDialogComponent],
                    },] }
        ];
        return AnonymousConsentsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StorefrontComponent = /** @class */ (function () {
        function StorefrontComponent(hamburgerMenuService, routingService) {
            this.hamburgerMenuService = hamburgerMenuService;
            this.routingService = routingService;
            this.isExpanded$ = this.hamburgerMenuService.isExpanded;
        }
        /**
         * @return {?}
         */
        StorefrontComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.navigateSubscription = this.routingService
                .isNavigating()
                .subscribe((/**
             * @param {?} val
             * @return {?}
             */
            function (val) {
                _this.startNavigating = val === true;
                _this.stopNavigating = val === false;
            }));
        };
        /**
         * @param {?} event
         * @return {?}
         */
        StorefrontComponent.prototype.collapseMenuIfClickOutside = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (((/** @type {?} */ (event.target))).className.includes('is-expanded')) {
                this.collapseMenu();
            }
        };
        /**
         * @return {?}
         */
        StorefrontComponent.prototype.collapseMenu = /**
         * @return {?}
         */
        function () {
            this.hamburgerMenuService.toggle(true);
        };
        /**
         * @return {?}
         */
        StorefrontComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.navigateSubscription) {
                this.navigateSubscription.unsubscribe();
            }
        };
        StorefrontComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-storefront',
                        template: "<ng-template cxOutlet=\"cx-storefront\">\n  <ng-template cxOutlet=\"cx-header\">\n    <header\n      [class.is-expanded]=\"isExpanded$ | async\"\n      (keydown.escape)=\"collapseMenu()\"\n      (click)=\"collapseMenuIfClickOutside($event)\"\n    >\n      <cx-page-layout section=\"header\"></cx-page-layout>\n      <cx-page-layout section=\"navigation\"></cx-page-layout>\n    </header>\n    <cx-page-slot position=\"BottomHeaderSlot\"></cx-page-slot>\n    <cx-global-message></cx-global-message>\n  </ng-template>\n\n  <router-outlet></router-outlet>\n\n  <ng-template cxOutlet=\"cx-footer\">\n    <footer>\n      <cx-page-layout section=\"footer\"></cx-page-layout>\n    </footer>\n  </ng-template>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        StorefrontComponent.ctorParameters = function () { return [
            { type: HamburgerMenuService },
            { type: core$1.RoutingService }
        ]; };
        StorefrontComponent.propDecorators = {
            startNavigating: [{ type: core.HostBinding, args: ['class.start-navigating',] }],
            stopNavigating: [{ type: core.HostBinding, args: ['class.stop-navigating',] }]
        };
        return StorefrontComponent;
    }());
    if (false) {
        /** @type {?} */
        StorefrontComponent.prototype.navigateSubscription;
        /** @type {?} */
        StorefrontComponent.prototype.isExpanded$;
        /** @type {?} */
        StorefrontComponent.prototype.startNavigating;
        /** @type {?} */
        StorefrontComponent.prototype.stopNavigating;
        /**
         * @type {?}
         * @private
         */
        StorefrontComponent.prototype.hamburgerMenuService;
        /**
         * @type {?}
         * @private
         */
        StorefrontComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MainModule = /** @class */ (function () {
        function MainModule() {
        }
        MainModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            GlobalMessageComponentModule,
                            OutletModule,
                            OutletRefModule,
                            PwaModule,
                            PageLayoutModule,
                            SeoModule,
                            PageSlotModule,
                            AnonymousConsentsModule,
                            core$1.FeaturesConfigModule,
                        ],
                        declarations: [StorefrontComponent],
                        exports: [StorefrontComponent],
                    },] }
        ];
        return MainModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * Generic carousel that renders CMS Components.
     */
    var BannerCarouselComponent = /** @class */ (function () {
        function BannerCarouselComponent(componentData, cmsService) {
            var _this = this;
            this.componentData = componentData;
            this.cmsService = cmsService;
            this.componentData$ = this.componentData.data$.pipe(operators.filter(Boolean), operators.tap((/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return (_this.theme = d.effect + "-theme"); })));
            this.items$ = this.componentData$.pipe(operators.map((/**
             * @param {?} data
             * @return {?}
             */
            function (data) { return data.banners.trim().split(' '); })), operators.map((/**
             * @param {?} codes
             * @return {?}
             */
            function (codes) { return codes.map((/**
             * @param {?} code
             * @return {?}
             */
            function (code) { return _this.cmsService.getComponentData(code); })); })));
            /**
             * Adds a specific theme for the carousel. The effect can be
             * used in CSS customisations.
             */
            this.theme = '';
        }
        /**
         * Returns an Obervable with an Array of Observables. This is done, so that
         * the component UI could consider to lazy load the UI components when they're
         * in the viewpoint.
         */
        /**
         * Returns an Obervable with an Array of Observables. This is done, so that
         * the component UI could consider to lazy load the UI components when they're
         * in the viewpoint.
         * @return {?}
         */
        BannerCarouselComponent.prototype.getItems = /**
         * Returns an Obervable with an Array of Observables. This is done, so that
         * the component UI could consider to lazy load the UI components when they're
         * in the viewpoint.
         * @return {?}
         */
        function () {
            return this.items$;
        };
        BannerCarouselComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-banner-carousel',
                        template: "<cx-carousel\n  [items]=\"getItems() | async\"\n  [template]=\"template\"\n  itemWidth=\"100%\"\n  class=\"inline-navigation\"\n></cx-carousel>\n\n<ng-template #template let-item=\"item\">\n  <ng-container\n    [cxComponentWrapper]=\"{\n      flexType: item.typeCode,\n      typeCode: item.typeCode,\n      uid: item?.uid\n    }\"\n  >\n  </ng-container>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        BannerCarouselComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: core$1.CmsService }
        ]; };
        BannerCarouselComponent.propDecorators = {
            theme: [{ type: core.HostBinding, args: ['class',] }]
        };
        return BannerCarouselComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        BannerCarouselComponent.prototype.componentData$;
        /**
         * @type {?}
         * @private
         */
        BannerCarouselComponent.prototype.items$;
        /**
         * Adds a specific theme for the carousel. The effect can be
         * used in CSS customisations.
         * @type {?}
         */
        BannerCarouselComponent.prototype.theme;
        /**
         * @type {?}
         * @private
         */
        BannerCarouselComponent.prototype.componentData;
        /**
         * @type {?}
         * @private
         */
        BannerCarouselComponent.prototype.cmsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BannerCarouselModule = /** @class */ (function () {
        function BannerCarouselModule() {
        }
        BannerCarouselModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    RotatingImagesComponent: {
                                        component: BannerCarouselComponent,
                                    },
                                },
                            }))),
                            PageComponentModule,
                            CarouselModule,
                            MediaModule,
                        ],
                        declarations: [BannerCarouselComponent],
                        entryComponents: [BannerCarouselComponent],
                        exports: [BannerCarouselComponent],
                    },] }
        ];
        return BannerCarouselModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BannerComponent = /** @class */ (function () {
        function BannerComponent(component) {
            this.component = component;
        }
        BannerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-banner',
                        template: "<ng-container *ngIf=\"component.data$ | async as data\">\n  <cx-generic-link\n    [url]=\"data.urlLink\"\n    [target]=\"data.external ? '_blank' : null\"\n    [title]=\"data.media?.altText\"\n  >\n    <p *ngIf=\"data.headline\" [innerHTML]=\"data.headline\"></p>\n    <cx-media [container]=\"data.media\"></cx-media>\n    <p *ngIf=\"data.content\" [innerHTML]=\"data.content\"></p>\n  </cx-generic-link>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        BannerComponent.ctorParameters = function () { return [
            { type: CmsComponentData }
        ]; };
        return BannerComponent;
    }());
    if (false) {
        /** @type {?} */
        BannerComponent.prototype.component;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BannerModule = /** @class */ (function () {
        function BannerModule() {
        }
        BannerModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            GenericLinkModule,
                            MediaModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    SimpleResponsiveBannerComponent: {
                                        component: BannerComponent,
                                    },
                                    BannerComponent: {
                                        component: BannerComponent,
                                    },
                                    SimpleBannerComponent: {
                                        component: BannerComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [BannerComponent],
                        entryComponents: [BannerComponent],
                        exports: [BannerComponent],
                    },] }
        ];
        return BannerModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LinkComponent = /** @class */ (function () {
        function LinkComponent(component) {
            this.component = component;
        }
        LinkComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-link',
                        template: "<cx-generic-link\n  *ngIf=\"component.data$ | async as data\"\n  [url]=\"data.url\"\n  [style]=\"data.styleAttributes\"\n  >{{ data.linkName }}</cx-generic-link\n>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        LinkComponent.ctorParameters = function () { return [
            { type: CmsComponentData }
        ]; };
        return LinkComponent;
    }());
    if (false) {
        /** @type {?} */
        LinkComponent.prototype.component;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LinkModule = /** @class */ (function () {
        function LinkModule() {
        }
        LinkModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            GenericLinkModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CMSLinkComponent: { component: LinkComponent },
                                },
                            }))),
                        ],
                        declarations: [LinkComponent],
                        exports: [LinkComponent],
                        entryComponents: [LinkComponent],
                    },] }
        ];
        return LinkModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ParagraphComponent = /** @class */ (function () {
        function ParagraphComponent(component) {
            this.component = component;
        }
        ParagraphComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-paragraph',
                        template: "<p *ngIf=\"component.data$ | async as data\" [innerHTML]=\"data.content\"></p>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ParagraphComponent.ctorParameters = function () { return [
            { type: CmsComponentData }
        ]; };
        return ParagraphComponent;
    }());
    if (false) {
        /** @type {?} */
        ParagraphComponent.prototype.component;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CmsParagraphModule = /** @class */ (function () {
        function CmsParagraphModule() {
        }
        CmsParagraphModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CMSParagraphComponent: {
                                        component: ParagraphComponent,
                                    },
                                    CMSTabParagraphComponent: {
                                        component: ParagraphComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ParagraphComponent],
                        exports: [ParagraphComponent],
                        entryComponents: [ParagraphComponent],
                    },] }
        ];
        return CmsParagraphModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var TabParagraphContainerComponent = /** @class */ (function () {
        function TabParagraphContainerComponent(componentData, cmsService, winRef) {
            var _this = this;
            this.componentData = componentData;
            this.cmsService = cmsService;
            this.winRef = winRef;
            this.activeTabNum = 0;
            this.tabTitleParams = [];
            this.components$ = this.componentData.data$.pipe(operators.distinctUntilKeyChanged('components'), operators.switchMap((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                return rxjs.combineLatest(data.components.split(' ').map((/**
                 * @param {?} component
                 * @return {?}
                 */
                function (component) {
                    return _this.cmsService.getComponentData(component).pipe(operators.distinctUntilChanged(), operators.map((/**
                     * @param {?} tab
                     * @return {?}
                     */
                    function (tab) {
                        if (!tab.flexType) {
                            tab = __assign({}, tab, { flexType: tab.typeCode });
                        }
                        return __assign({}, tab, { title: data.uid + ".tabs." + tab.uid });
                    })));
                })));
            })));
        }
        /**
         * @param {?} tabNum
         * @return {?}
         */
        TabParagraphContainerComponent.prototype.select = /**
         * @param {?} tabNum
         * @return {?}
         */
        function (tabNum) {
            this.activeTabNum = tabNum;
        };
        /**
         * @return {?}
         */
        TabParagraphContainerComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            if (this.winRef && this.winRef.nativeWindow) {
                /** @type {?} */
                var routeState = this.winRef.nativeWindow.history &&
                    this.winRef.nativeWindow.history.state;
                if (routeState && routeState['activeTab']) {
                    this.activeTabNum = routeState['activeTab'];
                }
            }
        };
        /**
         * @return {?}
         */
        TabParagraphContainerComponent.prototype.ngAfterViewInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            // If the sub cms components data exist, the components created before ngAfterViewInit are called.
            // In this case, the title parameters are directly pulled from them.
            // If the sub cms components data does not exist, it should should be loaded first.
            // In this case, listen to the changes to wait for them to be created.
            if (this.children.length > 0) {
                this.getTitleParams(this.children);
            }
            else {
                this.subscription = this.children.changes.subscribe((/**
                 * @param {?} tabComps
                 * @return {?}
                 */
                function (tabComps) {
                    return _this.getTitleParams(tabComps);
                }));
            }
        };
        /**
         * @private
         * @param {?} children
         * @return {?}
         */
        TabParagraphContainerComponent.prototype.getTitleParams = /**
         * @private
         * @param {?} children
         * @return {?}
         */
        function (children) {
            var _this = this;
            children.forEach((/**
             * @param {?} comp
             * @return {?}
             */
            function (comp) {
                if (comp.cmpRef && comp.cmpRef.instance.tabTitleParam$) {
                    _this.tabTitleParams.push(comp.cmpRef.instance.tabTitleParam$);
                }
                else {
                    _this.tabTitleParams.push(null);
                }
            }));
        };
        /**
         * @return {?}
         */
        TabParagraphContainerComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        TabParagraphContainerComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-tab-paragraph-container',
                        template: "<ng-container *ngFor=\"let component of components$ | async; let i = index\">\n  <h3 [class.active]=\"i === activeTabNum\" (click)=\"select(i)\">\n    {{ component.title | cxTranslate: { param: tabTitleParams[i] | async } }}\n  </h3>\n  <div [class.active]=\"i === activeTabNum\">\n    <ng-template [cxOutlet]=\"component.flexType\" [cxOutletContext]=\"{}\">\n      <ng-container [cxComponentWrapper]=\"component\"></ng-container>\n    </ng-template>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        TabParagraphContainerComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: core$1.CmsService },
            { type: core$1.WindowRef }
        ]; };
        TabParagraphContainerComponent.propDecorators = {
            children: [{ type: core.ViewChildren, args: [ComponentWrapperDirective,] }]
        };
        return TabParagraphContainerComponent;
    }());
    if (false) {
        /** @type {?} */
        TabParagraphContainerComponent.prototype.activeTabNum;
        /** @type {?} */
        TabParagraphContainerComponent.prototype.children;
        /** @type {?} */
        TabParagraphContainerComponent.prototype.tabTitleParams;
        /** @type {?} */
        TabParagraphContainerComponent.prototype.subscription;
        /** @type {?} */
        TabParagraphContainerComponent.prototype.components$;
        /** @type {?} */
        TabParagraphContainerComponent.prototype.componentData;
        /**
         * @type {?}
         * @private
         */
        TabParagraphContainerComponent.prototype.cmsService;
        /**
         * @type {?}
         * @private
         */
        TabParagraphContainerComponent.prototype.winRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var TabParagraphContainerModule = /** @class */ (function () {
        function TabParagraphContainerModule() {
        }
        TabParagraphContainerModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CMSTabParagraphContainer: {
                                        component: TabParagraphContainerComponent,
                                    },
                                },
                            }))),
                            PageComponentModule,
                            OutletModule,
                            core$1.I18nModule,
                        ],
                        declarations: [TabParagraphContainerComponent],
                        entryComponents: [TabParagraphContainerComponent],
                        exports: [TabParagraphContainerComponent],
                    },] }
        ];
        return TabParagraphContainerModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddressBookComponentService = /** @class */ (function () {
        function AddressBookComponentService(userAddressService, checkoutDeliveryService, featureConfigService) {
            this.userAddressService = userAddressService;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.featureConfigService = featureConfigService;
        }
        /**
         * @return {?}
         */
        AddressBookComponentService.prototype.getAddresses = /**
         * @return {?}
         */
        function () {
            return this.userAddressService.getAddresses();
        };
        /**
         * @return {?}
         */
        AddressBookComponentService.prototype.getAddressesStateLoading = /**
         * @return {?}
         */
        function () {
            return this.userAddressService.getAddressesLoading();
        };
        /**
         * @return {?}
         */
        AddressBookComponentService.prototype.loadAddresses = /**
         * @return {?}
         */
        function () {
            this.userAddressService.loadAddresses();
        };
        /**
         * @param {?} address
         * @return {?}
         */
        AddressBookComponentService.prototype.addUserAddress = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.userAddressService.addUserAddress(address);
        };
        /**
         * @param {?} addressId
         * @param {?} address
         * @return {?}
         */
        AddressBookComponentService.prototype.updateUserAddress = /**
         * @param {?} addressId
         * @param {?} address
         * @return {?}
         */
        function (addressId, address) {
            this.userAddressService.updateUserAddress(addressId, address);
            /**
             * TODO(issue:#4309) Deprecated since 1.2.0
             */
            if (this.featureConfigService &&
                this.featureConfigService.isLevel('1.2') &&
                this.checkoutDeliveryService) {
                this.checkoutDeliveryService.clearCheckoutDeliveryDetails();
            }
        };
        AddressBookComponentService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        AddressBookComponentService.ctorParameters = function () { return [
            { type: core$1.UserAddressService },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.FeatureConfigService }
        ]; };
        return AddressBookComponentService;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        AddressBookComponentService.prototype.userAddressService;
        /**
         * @type {?}
         * @protected
         */
        AddressBookComponentService.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @private
         */
        AddressBookComponentService.prototype.featureConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddressBookComponent = /** @class */ (function () {
        function AddressBookComponent(service) {
            this.service = service;
            this.showAddAddressForm = false;
            this.showEditAddressForm = false;
        }
        /**
         * @return {?}
         */
        AddressBookComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.addresses$ = this.service.getAddresses();
            this.addressesStateLoading$ = this.service.getAddressesStateLoading();
            this.service.loadAddresses();
        };
        /**
         * @return {?}
         */
        AddressBookComponent.prototype.addAddressButtonHandle = /**
         * @return {?}
         */
        function () {
            this.showEditAddressForm = false;
            this.showAddAddressForm = true;
        };
        /**
         * @param {?} address
         * @return {?}
         */
        AddressBookComponent.prototype.editAddressButtonHandle = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.showAddAddressForm = false;
            this.showEditAddressForm = true;
            this.currentAddress = address;
        };
        /**
         * @param {?} address
         * @return {?}
         */
        AddressBookComponent.prototype.addAddressSubmit = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.showAddAddressForm = false;
            this.service.addUserAddress(address);
        };
        /**
         * @return {?}
         */
        AddressBookComponent.prototype.addAddressCancel = /**
         * @return {?}
         */
        function () {
            this.showAddAddressForm = false;
        };
        /**
         * @param {?} address
         * @return {?}
         */
        AddressBookComponent.prototype.editAddressSubmit = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.showEditAddressForm = false;
            this.service.updateUserAddress(this.currentAddress['id'], address);
        };
        /**
         * @return {?}
         */
        AddressBookComponent.prototype.editAddressCancel = /**
         * @return {?}
         */
        function () {
            this.showEditAddressForm = false;
        };
        AddressBookComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-address-book',
                        template: "<div class=\"cx-section\">\n  <ng-container\n    *ngIf=\"\n      (addresses$ | async).length &&\n      !(showAddAddressForm || showEditAddressForm)\n    \"\n  >\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <button\n          class=\"btn btn-block btn-action\"\n          (click)=\"addAddressButtonHandle()\"\n        >\n          {{ 'addressBook.addNewAddress' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n\n    <div\n      class=\"row cx-address-deck\"\n      *ngIf=\"!(addressesStateLoading$ | async); else loading\"\n    >\n      <div\n        *ngFor=\"let address of addresses$ | async\"\n        class=\"col-md-6 cx-address-card\"\n      >\n        <cx-address-card\n          (editEvent)=\"editAddressButtonHandle(address)\"\n          [address]=\"address\"\n        ></cx-address-card>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"!(addresses$ | async).length || showAddAddressForm\">\n    <section>\n      <p class=\"cx-section-msg\">\n        {{ 'addressBook.addNewShippingAddress' | cxTranslate }}\n      </p>\n      <cx-address-form\n        class=\"cx-form\"\n        showTitleCode=\"true\"\n        [showCancelBtn]=\"!((addresses$ | async).length === 0)\"\n        actionBtnLabel=\"{{ 'addressBook.addAddress' | cxTranslate }}\"\n        cancelBtnLabel=\"{{ 'addressBook.backToAddressList' | cxTranslate }}\"\n        [setAsDefaultField]=\"!((addresses$ | async).length === 0)\"\n        (submitAddress)=\"addAddressSubmit($event)\"\n        (backToAddress)=\"addAddressCancel()\"\n      ></cx-address-form>\n    </section>\n  </ng-container>\n\n  <ng-container *ngIf=\"showEditAddressForm\">\n    <section>\n      <p class=\"cx-section-msg\">\n        {{ 'addressBook.editShippingAddress' | cxTranslate }}\n      </p>\n      <cx-address-form\n        showTitleCode=\"true\"\n        actionBtnLabel=\"{{ 'addressBook.updateAddress' | cxTranslate }}\"\n        cancelBtnLabel=\"{{ 'addressBook.backToAddressList' | cxTranslate }}\"\n        [addressData]=\"currentAddress\"\n        (submitAddress)=\"editAddressSubmit($event)\"\n        (backToAddress)=\"editAddressCancel()\"\n      ></cx-address-form>\n    </section>\n  </ng-container>\n</div>\n\n<ng-template #loading>\n  <div class=\"col-md-12 cx-address-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        AddressBookComponent.ctorParameters = function () { return [
            { type: AddressBookComponentService }
        ]; };
        return AddressBookComponent;
    }());
    if (false) {
        /** @type {?} */
        AddressBookComponent.prototype.addresses$;
        /** @type {?} */
        AddressBookComponent.prototype.addressesStateLoading$;
        /** @type {?} */
        AddressBookComponent.prototype.currentAddress;
        /** @type {?} */
        AddressBookComponent.prototype.showAddAddressForm;
        /** @type {?} */
        AddressBookComponent.prototype.showEditAddressForm;
        /** @type {?} */
        AddressBookComponent.prototype.service;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddressCardComponent = /** @class */ (function () {
        function AddressCardComponent(userAddressService, checkoutDeliveryService, featureConfigService) {
            this.userAddressService = userAddressService;
            this.checkoutDeliveryService = checkoutDeliveryService;
            this.featureConfigService = featureConfigService;
            this.editEvent = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        AddressCardComponent.prototype.openEditFormEvent = /**
         * @return {?}
         */
        function () {
            this.editEvent.emit();
        };
        /**
         * @return {?}
         */
        AddressCardComponent.prototype.cancelEdit = /**
         * @return {?}
         */
        function () {
            this.editMode = false;
        };
        /**
         * @return {?}
         */
        AddressCardComponent.prototype.setEditMode = /**
         * @return {?}
         */
        function () {
            this.editMode = true;
        };
        /**
         * @param {?} addressId
         * @return {?}
         */
        AddressCardComponent.prototype.setAddressAsDefault = /**
         * @param {?} addressId
         * @return {?}
         */
        function (addressId) {
            this.userAddressService.setAddressAsDefault(addressId);
            /**
             * TODO(issue:#4309) Deprecated since 1.2.0
             */
            if (this.featureConfigService &&
                this.featureConfigService.isLevel('1.2') &&
                this.checkoutDeliveryService) {
                this.checkoutDeliveryService.clearCheckoutDeliveryDetails();
            }
        };
        /**
         * @param {?} addressId
         * @return {?}
         */
        AddressCardComponent.prototype.deleteAddress = /**
         * @param {?} addressId
         * @return {?}
         */
        function (addressId) {
            this.userAddressService.deleteUserAddress(addressId);
            /**
             * TODO(issue:#4309) Deprecated since 1.2.0
             */
            if (this.featureConfigService &&
                this.featureConfigService.isLevel('1.2') &&
                this.checkoutDeliveryService) {
                this.checkoutDeliveryService.clearCheckoutDeliveryDetails();
            }
        };
        AddressCardComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-address-card',
                        template: "<div class=\"card\">\n  <div class=\"card-header\" *ngIf=\"address?.defaultAddress && !editMode\">\n    &#10003; {{ 'addressCard.default' | cxTranslate }}\n  </div>\n  <div\n    class=\"card-body cx-card-body\"\n    [class.cx-address-card-delete-mode]=\"editMode\"\n  >\n    <div *ngIf=\"editMode\" class=\"cx-address-card-delete-msg\">\n      {{ 'addressBook.areYouSureToDeleteAddress' | cxTranslate }}\n    </div>\n    <div class=\"cx-address-data\">\n      <div class=\"cx-address-card-label-name\">\n        {{ address?.firstName }} {{ address?.lastName }}\n      </div>\n      <div class=\"cx-address-card-label\">{{ address?.line1 }}</div>\n      <div class=\"cx-address-card-label\">{{ address?.line2 }}</div>\n      <div class=\"cx-address-card-label\">\n        {{ address?.town }},\n        <span *ngIf=\"!address?.region?.isocode\">{{\n          address?.country?.isocode\n        }}</span\n        ><span>{{ address?.region?.isocode }}</span>\n      </div>\n      <div class=\"cx-address-card-label\">{{ address?.postalCode }}</div>\n      <div class=\"cx-address-card-label\">{{ address?.phone }}</div>\n    </div>\n\n    <div *ngIf=\"editMode\" class=\"row cx-address-card-delete\">\n      <div class=\"col-md-6\">\n        <button class=\"btn btn-block btn-secondary\" (click)=\"cancelEdit()\">\n          {{ 'common.cancel' | cxTranslate }}\n        </button>\n      </div>\n      <div class=\"col-md-6\">\n        <button\n          (click)=\"deleteAddress(address.id)\"\n          class=\"btn btn-block btn-primary\"\n        >\n          {{ 'common.delete' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <div *ngIf=\"!editMode\" class=\"card-actions\">\n      <a\n        *ngIf=\"!address?.defaultAddress\"\n        (click)=\"setAddressAsDefault(address.id)\"\n        class=\"card-link btn-link set-default\"\n        >{{ 'addressCard.setAsDefault' | cxTranslate }}</a\n      >\n      <a (click)=\"openEditFormEvent()\" class=\"card-link btn-link edit\">{{\n        'common.edit' | cxTranslate\n      }}</a>\n      <a (click)=\"setEditMode()\" class=\"card-link btn-link delete\">{{\n        'common.delete' | cxTranslate\n      }}</a>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        AddressCardComponent.ctorParameters = function () { return [
            { type: core$1.UserAddressService },
            { type: core$1.CheckoutDeliveryService },
            { type: core$1.FeatureConfigService }
        ]; };
        AddressCardComponent.propDecorators = {
            address: [{ type: core.Input }],
            editEvent: [{ type: core.Output }]
        };
        return AddressCardComponent;
    }());
    if (false) {
        /** @type {?} */
        AddressCardComponent.prototype.editMode;
        /** @type {?} */
        AddressCardComponent.prototype.isDefault;
        /** @type {?} */
        AddressCardComponent.prototype.address;
        /** @type {?} */
        AddressCardComponent.prototype.editEvent;
        /**
         * @type {?}
         * @private
         */
        AddressCardComponent.prototype.userAddressService;
        /**
         * @type {?}
         * @protected
         */
        AddressCardComponent.prototype.checkoutDeliveryService;
        /**
         * @type {?}
         * @private
         */
        AddressCardComponent.prototype.featureConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AddressBookModule = /** @class */ (function () {
        function AddressBookModule() {
        }
        AddressBookModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    AccountAddressBookComponent: {
                                        component: AddressBookComponent,
                                        providers: [
                                            {
                                                provide: AddressBookComponentService,
                                                useClass: AddressBookComponentService,
                                                deps: [core$1.UserAddressService],
                                            },
                                        ],
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            CardModule,
                            AddressFormModule,
                            SpinnerModule,
                            core$1.I18nModule,
                        ],
                        declarations: [AddressBookComponent, AddressCardComponent],
                        exports: [AddressBookComponent, AddressCardComponent],
                        providers: [core$1.UserAddressService, AddressBookComponentService],
                        entryComponents: [AddressBookComponent],
                    },] }
        ];
        return AddressBookModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CloseAccountModalComponent = /** @class */ (function () {
        function CloseAccountModalComponent(modalService, userService, authService, globalMessageService, routingService, translationService) {
            this.modalService = modalService;
            this.userService = userService;
            this.authService = authService;
            this.globalMessageService = globalMessageService;
            this.routingService = routingService;
            this.translationService = translationService;
            this.iconTypes = ICON_TYPE;
            this.subscription = new rxjs.Subscription();
        }
        /**
         * @return {?}
         */
        CloseAccountModalComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.userToken$ = this.authService.getUserToken();
            this.userService.resetRemoveUserProcessState();
            this.subscription.add(this.userService
                .getRemoveUserResultSuccess()
                .subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) { return _this.onSuccess(success); })));
            this.subscription.add(this.userService
                .getRemoveUserResultError()
                .subscribe((/**
             * @param {?} error
             * @return {?}
             */
            function (error) { return _this.onError(error); })));
            this.isLoading$ = this.userService.getRemoveUserResultLoading();
        };
        /**
         * @param {?} success
         * @return {?}
         */
        CloseAccountModalComponent.prototype.onSuccess = /**
         * @param {?} success
         * @return {?}
         */
        function (success) {
            var _this = this;
            if (success) {
                this.dismissModal();
                this.translationService
                    .translate('closeAccount.accountClosedSuccessfully')
                    .pipe(operators.first())
                    .subscribe((/**
                 * @param {?} text
                 * @return {?}
                 */
                function (text) {
                    _this.globalMessageService.add(text, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
                }));
                this.routingService.go({ cxRoute: 'home' });
            }
        };
        /**
         * @param {?} error
         * @return {?}
         */
        CloseAccountModalComponent.prototype.onError = /**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            var _this = this;
            if (error) {
                this.dismissModal();
                this.translationService
                    .translate('closeAccount.accountClosedFailure')
                    .pipe(operators.first())
                    .subscribe((/**
                 * @param {?} text
                 * @return {?}
                 */
                function (text) {
                    _this.globalMessageService.add(text, core$1.GlobalMessageType.MSG_TYPE_ERROR);
                }));
            }
        };
        /**
         * @param {?=} reason
         * @return {?}
         */
        CloseAccountModalComponent.prototype.dismissModal = /**
         * @param {?=} reason
         * @return {?}
         */
        function (reason) {
            this.modalService.dismissActiveModal(reason);
        };
        /**
         * @return {?}
         */
        CloseAccountModalComponent.prototype.closeAccount = /**
         * @return {?}
         */
        function () {
            this.userService.remove();
        };
        /**
         * @return {?}
         */
        CloseAccountModalComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        CloseAccountModalComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-close-account-modal',
                        template: "<ng-container *ngIf=\"userToken$ | async as userToken\">\n  <div class=\"modal-header cx-dialog-header\">\n    <h3 class=\"modal-title\">\n      {{ 'closeAccount.confirmAccountClosure' | cxTranslate }}\n    </h3>\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"dismissModal()\"\n    >\n      <span aria-hidden=\"true\">\n        <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n      </span>\n    </button>\n  </div>\n\n  <div *ngIf=\"isLoading$ | async; else loaded\">\n    <div class=\"cx-spinner\">\n      <cx-spinner> </cx-spinner>\n    </div>\n  </div>\n\n  <ng-template #loaded>\n    <div class=\"modal-body\">\n      <div class=\"cx-row\">\n        <p class=\"cx-confirmation\">\n          {{ 'closeAccount.confirmAccountClosureMessage' | cxTranslate }}\n        </p>\n      </div>\n      <div class=\"cx-row\">\n        <div class=\"cx-btn-group\">\n          <button class=\"btn btn-primary\" (click)=\"closeAccount()\">\n            {{ 'closeAccount.closeMyAccount' | cxTranslate }}\n          </button>\n          <button (click)=\"dismissModal()\" class=\"btn btn-block btn-secondary\">\n            {{ 'common.cancel' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </ng-template>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CloseAccountModalComponent.ctorParameters = function () { return [
            { type: ModalService },
            { type: core$1.UserService },
            { type: core$1.AuthService },
            { type: core$1.GlobalMessageService },
            { type: core$1.RoutingService },
            { type: core$1.TranslationService }
        ]; };
        return CloseAccountModalComponent;
    }());
    if (false) {
        /** @type {?} */
        CloseAccountModalComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @private
         */
        CloseAccountModalComponent.prototype.subscription;
        /** @type {?} */
        CloseAccountModalComponent.prototype.userToken$;
        /** @type {?} */
        CloseAccountModalComponent.prototype.isLoading$;
        /**
         * @type {?}
         * @protected
         */
        CloseAccountModalComponent.prototype.modalService;
        /**
         * @type {?}
         * @private
         */
        CloseAccountModalComponent.prototype.userService;
        /**
         * @type {?}
         * @private
         */
        CloseAccountModalComponent.prototype.authService;
        /**
         * @type {?}
         * @private
         */
        CloseAccountModalComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        CloseAccountModalComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        CloseAccountModalComponent.prototype.translationService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CloseAccountComponent = /** @class */ (function () {
        function CloseAccountComponent(modalService) {
            this.modalService = modalService;
        }
        /**
         * @return {?}
         */
        CloseAccountComponent.prototype.openModal = /**
         * @return {?}
         */
        function () {
            this.modal = this.modalService.open(CloseAccountModalComponent, {
                centered: true,
            }).componentInstance;
        };
        CloseAccountComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-close-account',
                        template: "<div class=\"col-lg-8 col-md-9\">\n  <div class=\"row cx-btn-group\">\n    <div class=\"col-sm-3\">\n      <a\n        [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n        class=\"btn btn-block btn-secondary\"\n        >{{ 'common.cancel' | cxTranslate }}</a\n      >\n    </div>\n    <div class=\"col-sm-6\">\n      <button class=\"btn btn-primary\" (click)=\"openModal()\">\n        {{ 'closeAccount.closeMyAccount' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CloseAccountComponent.ctorParameters = function () { return [
            { type: ModalService }
        ]; };
        return CloseAccountComponent;
    }());
    if (false) {
        /** @type {?} */
        CloseAccountComponent.prototype.modal;
        /**
         * @type {?}
         * @private
         */
        CloseAccountComponent.prototype.modalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CloseAccountModule = /** @class */ (function () {
        function CloseAccountModule() {
        }
        CloseAccountModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                            IconModule,
                            SpinnerModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CloseAccountComponent: {
                                        component: CloseAccountComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                        ],
                        declarations: [CloseAccountComponent, CloseAccountModalComponent],
                        exports: [CloseAccountComponent, CloseAccountModalComponent],
                        entryComponents: [CloseAccountComponent, CloseAccountModalComponent],
                    },] }
        ];
        return CloseAccountModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ForgotPasswordComponent = /** @class */ (function () {
        function ForgotPasswordComponent(fb, userService, routingService) {
            this.fb = fb;
            this.userService = userService;
            this.routingService = routingService;
            this.submited = false;
        }
        /**
         * @return {?}
         */
        ForgotPasswordComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.form = this.fb.group({
                userEmail: [
                    '',
                    [forms.Validators.required, CustomFormValidators.emailValidator],
                ],
            });
        };
        /**
         * @return {?}
         */
        ForgotPasswordComponent.prototype.requestForgotPasswordEmail = /**
         * @return {?}
         */
        function () {
            this.submited = true;
            if (this.form.invalid) {
                return;
            }
            this.userService.requestForgotPasswordEmail(this.form.value.userEmail);
            this.routingService.go({ cxRoute: 'login' });
        };
        ForgotPasswordComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-forgot-password',
                        template: "<form (submit)=\"requestForgotPasswordEmail()\" [formGroup]=\"form\">\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'forgottenPassword.emailAddress.label' | cxTranslate\n      }}</span>\n      <input\n        type=\"email\"\n        class=\"form-control\"\n        placeholder=\"{{\n          'forgottenPassword.emailAddress.placeholder' | cxTranslate\n        }}\"\n        formControlName=\"userEmail\"\n        [ngClass]=\"{\n          'is-invalid':\n            form.controls['userEmail'].invalid &&\n            (submited ||\n              (form.controls['userEmail'].touched &&\n                form.controls['userEmail'].dirty))\n        }\"\n      />\n      <div\n        class=\"invalid-feedback\"\n        *ngIf=\"\n          form.controls['userEmail'].invalid &&\n          (submited ||\n            (form.controls['userEmail'].touched &&\n              form.controls['userEmail'].dirty))\n        \"\n      >\n        <span>{{ 'forgottenPassword.enterValidEmail' | cxTranslate }}</span>\n      </div>\n    </label>\n  </div>\n\n  <button type=\"submit\" class=\"btn btn-block btn-primary\">\n    {{ 'common.submit' | cxTranslate }}\n  </button>\n  <a\n    class=\"btn btn-block btn-secondary\"\n    [routerLink]=\"{ cxRoute: 'login' } | cxUrl\"\n    >{{ 'common.cancel' | cxTranslate }}</a\n  >\n</form>\n"
                    }] }
        ];
        /** @nocollapse */
        ForgotPasswordComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder },
            { type: core$1.UserService },
            { type: core$1.RoutingService }
        ]; };
        return ForgotPasswordComponent;
    }());
    if (false) {
        /** @type {?} */
        ForgotPasswordComponent.prototype.form;
        /** @type {?} */
        ForgotPasswordComponent.prototype.submited;
        /**
         * @type {?}
         * @private
         */
        ForgotPasswordComponent.prototype.fb;
        /**
         * @type {?}
         * @private
         */
        ForgotPasswordComponent.prototype.userService;
        /**
         * @type {?}
         * @private
         */
        ForgotPasswordComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ForgotPasswordModule = /** @class */ (function () {
        function ForgotPasswordModule() {
        }
        ForgotPasswordModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ForgotPasswordComponent: {
                                        component: ForgotPasswordComponent,
                                        guards: [core$1.NotAuthGuard],
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                        ],
                        declarations: [ForgotPasswordComponent],
                        exports: [ForgotPasswordComponent],
                        entryComponents: [ForgotPasswordComponent],
                    },] }
        ];
        return ForgotPasswordModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AmendOrderActionsComponent = /** @class */ (function () {
        function AmendOrderActionsComponent() {
            this.styles = 'row';
        }
        AmendOrderActionsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-amend-order-actions',
                        template: "<div class=\"col-xs-12 col-md-4 col-lg-3\">\n  <a\n    [routerLink]=\"\n      {\n        cxRoute: backRoute,\n        params: { code: orderCode }\n      } | cxUrl\n    \"\n    class=\"btn btn-block btn-action\"\n  >\n    {{ 'common.back' | cxTranslate }}\n  </a>\n</div>\n<div class=\"col-xs-12 col-md-4 col-lg-3\">\n  <a\n    *ngIf=\"forwardRoute\"\n    class=\"btn btn-block btn-primary\"\n    [class.disabled]=\"!isValid\"\n    [routerLink]=\"\n      {\n        cxRoute: forwardRoute,\n        params: { code: orderCode }\n      } | cxUrl\n    \"\n  >\n    {{ 'common.continue' | cxTranslate }}\n  </a>\n\n  <button\n    *ngIf=\"!forwardRoute\"\n    class=\"btn btn-block btn-primary\"\n    type=\"submit\"\n    [disabled]=\"!isValid\"\n  >\n    {{ 'orderDetails.cancellationAndReturn.submit' | cxTranslate }}\n  </button>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        AmendOrderActionsComponent.propDecorators = {
            orderCode: [{ type: core.Input }],
            isValid: [{ type: core.Input }],
            backRoute: [{ type: core.Input }],
            forwardRoute: [{ type: core.Input }],
            styles: [{ type: core.HostBinding, args: ['class',] }]
        };
        return AmendOrderActionsComponent;
    }());
    if (false) {
        /** @type {?} */
        AmendOrderActionsComponent.prototype.orderCode;
        /** @type {?} */
        AmendOrderActionsComponent.prototype.isValid;
        /** @type {?} */
        AmendOrderActionsComponent.prototype.backRoute;
        /** @type {?} */
        AmendOrderActionsComponent.prototype.forwardRoute;
        /** @type {?} */
        AmendOrderActionsComponent.prototype.styles;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AmendOrderActionsModule = /** @class */ (function () {
        function AmendOrderActionsModule() {
        }
        AmendOrderActionsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, router.RouterModule, core$1.UrlModule, core$1.I18nModule],
                        declarations: [AmendOrderActionsComponent],
                        exports: [AmendOrderActionsComponent],
                    },] }
        ];
        return AmendOrderActionsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {number} */
    var AmendOrderType = {
        CANCEL: 0,
        RETURN: 1,
    };
    AmendOrderType[AmendOrderType.CANCEL] = 'CANCEL';
    AmendOrderType[AmendOrderType.RETURN] = 'RETURN';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @param {?} control
     * @return {?}
     */
    function ValidateQuantity(control) {
        /** @type {?} */
        var q = 0;
        Object.keys(control.value).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) { return (q += control.value[key]); }));
        return q > 0 ? null : { required: true };
    }
    /**
     * @abstract
     */
    var OrderAmendService = /** @class */ (function () {
        function OrderAmendService(orderDetailsService) {
            this.orderDetailsService = orderDetailsService;
        }
        /**
         * Returns entries with an amended quantity.
         */
        /**
         * Returns entries with an amended quantity.
         * @return {?}
         */
        OrderAmendService.prototype.getAmendedEntries = /**
         * Returns entries with an amended quantity.
         * @return {?}
         */
        function () {
            var _this = this;
            return this.getForm().pipe(operators.switchMap((/**
             * @param {?} form
             * @return {?}
             */
            function (form) {
                return _this.getEntries().pipe(operators.map((/**
                 * @param {?} entries
                 * @return {?}
                 */
                function (entries) {
                    return entries.filter((/**
                     * @param {?} entry
                     * @return {?}
                     */
                    function (entry) { return _this.getFormControl(form, entry).value > 0; }));
                })));
            })));
        };
        /**
         * @return {?}
         */
        OrderAmendService.prototype.getOrder = /**
         * @return {?}
         */
        function () {
            return this.orderDetailsService.getOrderDetails();
        };
        /**
         * returns the form with form data at runtime
         */
        /**
         * returns the form with form data at runtime
         * @return {?}
         */
        OrderAmendService.prototype.getForm = /**
         * returns the form with form data at runtime
         * @return {?}
         */
        function () {
            var _this = this;
            return this.getOrder().pipe(operators.tap((/**
             * @param {?} order
             * @return {?}
             */
            function (order) {
                if (!_this.form || _this.form.get('orderCode').value !== order.code) {
                    _this.buildForm(order);
                }
            })), operators.map((/**
             * @return {?}
             */
            function () { return _this.form; })));
        };
        /**
         * @private
         * @param {?} order
         * @return {?}
         */
        OrderAmendService.prototype.buildForm = /**
         * @private
         * @param {?} order
         * @return {?}
         */
        function (order) {
            var _this = this;
            this.form = new forms.FormGroup({});
            this.form.addControl('orderCode', new forms.FormControl(order.code));
            /** @type {?} */
            var entryGroup = new forms.FormGroup({}, { validators: [ValidateQuantity] });
            this.form.addControl('entries', entryGroup);
            (order.entries || []).forEach((/**
             * @param {?} entry
             * @return {?}
             */
            function (entry) {
                /** @type {?} */
                var key = entry.entryNumber.toString();
                entryGroup.addControl(key, new forms.FormControl(0, {
                    validators: [
                        forms.Validators.min(0),
                        forms.Validators.max(_this.getMaxAmendQuantity(entry)),
                    ],
                }));
            }));
        };
        /**
         * @protected
         * @param {?} form
         * @param {?} entry
         * @return {?}
         */
        OrderAmendService.prototype.getFormControl = /**
         * @protected
         * @param {?} form
         * @param {?} entry
         * @return {?}
         */
        function (form, entry) {
            return (/** @type {?} */ (form.get('entries').get(entry.entryNumber.toString())));
        };
        /**
         * As discussed, this calculation is moved to SPA side.
         * The calculation and validation should be in backend facade layer.
         */
        /**
         * As discussed, this calculation is moved to SPA side.
         * The calculation and validation should be in backend facade layer.
         * @param {?} entry
         * @return {?}
         */
        OrderAmendService.prototype.getAmendedPrice = /**
         * As discussed, this calculation is moved to SPA side.
         * The calculation and validation should be in backend facade layer.
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            /** @type {?} */
            var amendedQuantity = this.getFormControl(this.form, entry).value;
            /** @type {?} */
            var amendedPrice = Object.assign({}, entry.basePrice);
            amendedPrice.value =
                Math.round(entry.basePrice.value * amendedQuantity * 100) / 100;
            amendedPrice.formattedValue = common.formatCurrency(amendedPrice.value, 
            // TODO: user current language
            'en', common.getCurrencySymbol(amendedPrice.currencyIso, 'narrow'), amendedPrice.currencyIso);
            return amendedPrice;
        };
        /**
         * @param {?} entry
         * @return {?}
         */
        OrderAmendService.prototype.getMaxAmendQuantity = /**
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            return ((this.isCancellation()
                ? entry.cancellableQuantity
                : entry.returnableQuantity) || entry.quantity);
        };
        /**
         * @return {?}
         */
        OrderAmendService.prototype.isCancellation = /**
         * @return {?}
         */
        function () {
            return this.amendType === AmendOrderType.CANCEL;
        };
        OrderAmendService.decorators = [
            { type: core.Injectable }
        ];
        /** @nocollapse */
        OrderAmendService.ctorParameters = function () { return [
            { type: OrderDetailsService }
        ]; };
        return OrderAmendService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        OrderAmendService.prototype.amendType;
        /**
         * @type {?}
         * @protected
         */
        OrderAmendService.prototype.form;
        /**
         * @type {?}
         * @protected
         */
        OrderAmendService.prototype.orderDetailsService;
        /**
         * Returns entries for the given order.
         * @abstract
         * @return {?}
         */
        OrderAmendService.prototype.getEntries = function () { };
        /**
         * Submits the amended order.
         * @abstract
         * @return {?}
         */
        OrderAmendService.prototype.save = function () { };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CancelOrReturnItemsComponent = /** @class */ (function () {
        function CancelOrReturnItemsComponent(orderAmendService) {
            this.orderAmendService = orderAmendService;
            this.isConfirmation = false;
            this.form$ = this.orderAmendService.getForm();
        }
        /**
         * @param {?} form
         * @param {?} entry
         * @return {?}
         */
        CancelOrReturnItemsComponent.prototype.getControl = /**
         * @param {?} form
         * @param {?} entry
         * @return {?}
         */
        function (form, entry) {
            return (/** @type {?} */ (form.get('entries').get(entry.entryNumber.toString())));
        };
        /**
         * @param {?} form
         * @return {?}
         */
        CancelOrReturnItemsComponent.prototype.setAll = /**
         * @param {?} form
         * @return {?}
         */
        function (form) {
            var _this = this;
            this.entries.forEach((/**
             * @param {?} entry
             * @return {?}
             */
            function (entry) {
                return _this.getControl(form, entry).setValue(_this.getMaxAmendQuantity(entry));
            }));
        };
        /**
         * @param {?} entry
         * @return {?}
         */
        CancelOrReturnItemsComponent.prototype.getItemPrice = /**
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            return this.orderAmendService.getAmendedPrice(entry);
        };
        /**
         * @param {?} entry
         * @return {?}
         */
        CancelOrReturnItemsComponent.prototype.getMaxAmendQuantity = /**
         * @param {?} entry
         * @return {?}
         */
        function (entry) {
            return this.orderAmendService.getMaxAmendQuantity(entry);
        };
        /**
         * @return {?}
         */
        CancelOrReturnItemsComponent.prototype.isCancellation = /**
         * @return {?}
         */
        function () {
            return this.orderAmendService.isCancellation();
        };
        CancelOrReturnItemsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-amend-order-items',
                        template: "<div *ngIf=\"form$ | async as form\">\n  <button\n    *ngIf=\"!isConfirmation\"\n    class=\"btn btn-link cx-action-link\"\n    (click)=\"setAll(form)\"\n  >\n    {{ 'orderDetails.cancellationAndReturn.setAll' | cxTranslate }}\n  </button>\n\n  <div class=\"d-none d-md-block\">\n    <div class=\"cx-item-list-header row\">\n      <div class=\"cx-item-list-desc col-md-5 col-xl-6\">\n        {{ 'orderDetails.cancellationAndReturn.item' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-price col-2\">\n        {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n      </div>\n      <div *ngIf=\"!isConfirmation\" class=\"cx-item-list-qty col-md-3 col-xl-2\">\n        {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-qty col-2\">\n        {{\n          (isCancellation()\n            ? 'orderDetails.cancellationAndReturn.cancelQty'\n            : 'orderDetails.cancellationAndReturn.returnQty') | cxTranslate\n        }}\n      </div>\n      <div *ngIf=\"isConfirmation\" class=\"cx-item-list-total col-md-3  col-xl-2\">\n        {{ 'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate }}\n      </div>\n    </div>\n  </div>\n\n  <div class=\"cx-item-list-row\" *ngFor=\"let item of entries; let i = index\">\n    <div class=\"row cx-item-list-items\">\n      <!-- Item Image -->\n      <cx-media\n        class=\"col-2 cx-image-container\"\n        [container]=\"item.product.images?.PRIMARY\"\n        format=\"thumbnail\"\n      ></cx-media>\n\n      <!-- Item Information -->\n      <div class=\"cx-info col-10\">\n        <div class=\"cx-info-container row\">\n          <!-- Item Description -->\n          <div class=\"col-md-3 col-xl-5\">\n            <div *ngIf=\"item.product.name\" class=\"cx-name\">\n              {{ item.product.name }}\n            </div>\n            <div *ngIf=\"item.product.code\" class=\"cx-code\">\n              {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\n            </div>\n            <!-- Variants -->\n            <ng-container *cxFeatureLevel=\"'!1.5'\">\n              <div\n                *ngFor=\"let variant of item.product.variantOptionQualifiers\"\n                class=\"cx-property\"\n              >\n                <div class=\"cx-label\">{{ variant.name }}</div>\n                <div class=\"cx-value\">{{ variant.value }}</div>\n              </div>\n            </ng-container>\n            <ng-container *cxFeatureLevel=\"'1.5'\">\n              <ng-container *ngIf=\"item.product.baseOptions?.length\">\n                <div\n                  *ngFor=\"\n                    let variant of item.product.baseOptions[0]?.selected\n                      ?.variantOptionQualifiers\n                  \"\n                  class=\"cx-property\"\n                >\n                  <div class=\"cx-label\" *ngIf=\"variant.name\">\n                    {{ variant.name }}:\n                  </div>\n                  <div class=\"cx-value\" *ngIf=\"variant.value\">\n                    {{ variant.value }}\n                  </div>\n                </div>\n              </ng-container>\n            </ng-container>\n          </div>\n          <!-- Price -->\n          <div\n            *ngIf=\"item.basePrice\"\n            class=\"cx-price col-md-3 col-lg-3 col-xl-2\"\n          >\n            <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n              {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\n            </div>\n            <div *ngIf=\"item.basePrice\" class=\"cx-value\">\n              {{ item.basePrice?.formattedValue }}\n            </div>\n          </div>\n          <!-- item Quantity -->\n          <div *ngIf=\"!isConfirmation\" class=\"cx-request-qty col-md-3\">\n            <div\n              class=\"cx-label d-block d-md-none d-lg-none d-xl-none\"\n              placement=\"left\"\n              title=\"{{ 'cartItems.quantityTitle' | cxTranslate }}\"\n            >\n              {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\n            </div>\n            <div class=\"cx-value\">\n              {{ getMaxAmendQuantity(item) }}\n            </div>\n          </div>\n          <!-- Amended Quantity -->\n          <div class=\"cx-quantity col-md-3 col-xl-2\">\n            <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n              {{\n                (isCancellation()\n                  ? 'orderDetails.cancellationAndReturn.cancelQty'\n                  : 'orderDetails.cancellationAndReturn.returnQty')\n                  | cxTranslate\n              }}\n            </div>\n\n            <cx-item-counter\n              [min]=\"0\"\n              [max]=\"getMaxAmendQuantity(item)\"\n              [isValueChangeable]=\"!isConfirmation\"\n              [formControl]=\"getControl(form, item)\"\n            >\n            </cx-item-counter>\n          </div>\n          <!-- Total Price -->\n          <div *ngIf=\"isConfirmation\" class=\"cx-total col-3\">\n            <div class=\"cx-label d-block d-md-none\">\n              {{\n                'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate\n              }}\n            </div>\n            <div class=\"cx-value\">\n              {{ getItemPrice(item)?.formattedValue }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CancelOrReturnItemsComponent.ctorParameters = function () { return [
            { type: OrderAmendService }
        ]; };
        CancelOrReturnItemsComponent.propDecorators = {
            entries: [{ type: core.Input }],
            isConfirmation: [{ type: core.Input }]
        };
        return CancelOrReturnItemsComponent;
    }());
    if (false) {
        /** @type {?} */
        CancelOrReturnItemsComponent.prototype.entries;
        /** @type {?} */
        CancelOrReturnItemsComponent.prototype.isConfirmation;
        /** @type {?} */
        CancelOrReturnItemsComponent.prototype.form$;
        /**
         * @type {?}
         * @protected
         */
        CancelOrReturnItemsComponent.prototype.orderAmendService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AmendOrderItemsModule = /** @class */ (function () {
        function AmendOrderItemsModule() {
        }
        AmendOrderItemsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            core$1.I18nModule,
                            MediaModule,
                            ItemCounterModule,
                            core$1.FeaturesConfigModule,
                        ],
                        declarations: [CancelOrReturnItemsComponent],
                        exports: [CancelOrReturnItemsComponent],
                        entryComponents: [CancelOrReturnItemsComponent],
                    },] }
        ];
        return AmendOrderItemsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CancelOrderConfirmationComponent = /** @class */ (function () {
        function CancelOrderConfirmationComponent(orderAmendService) {
            var _this = this;
            this.orderAmendService = orderAmendService;
            this.form$ = this.orderAmendService
                .getForm()
                .pipe(operators.tap((/**
             * @param {?} form
             * @return {?}
             */
            function (form) { return (_this.orderCode = form.value.orderCode); })));
            this.entries$ = this.orderAmendService.getAmendedEntries();
        }
        /**
         * @param {?} form
         * @return {?}
         */
        CancelOrderConfirmationComponent.prototype.submit = /**
         * @param {?} form
         * @return {?}
         */
        function (form) {
            form.disable();
            this.orderAmendService.save();
        };
        CancelOrderConfirmationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-cancel-order-confirmation',
                        template: "<form\n  *ngIf=\"form$ | async as form\"\n  [formGroup]=\"form\"\n  (ngSubmit)=\"submit(form)\"\n>\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items\n    *ngIf=\"entries$ | async as entries\"\n    [entries]=\"entries\"\n    [isConfirmation]=\"true\"\n  >\n  </cx-amend-order-items>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [isValid]=\"form.valid\"\n      backRoute=\"orderCancel\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</form>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CancelOrderConfirmationComponent.ctorParameters = function () { return [
            { type: OrderAmendService }
        ]; };
        return CancelOrderConfirmationComponent;
    }());
    if (false) {
        /** @type {?} */
        CancelOrderConfirmationComponent.prototype.orderCode;
        /** @type {?} */
        CancelOrderConfirmationComponent.prototype.form$;
        /** @type {?} */
        CancelOrderConfirmationComponent.prototype.entries$;
        /**
         * @type {?}
         * @protected
         */
        CancelOrderConfirmationComponent.prototype.orderAmendService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderCancellationService = /** @class */ (function (_super) {
        __extends(OrderCancellationService, _super);
        function OrderCancellationService(orderDetailsService, userOrderService, routing, globalMessageService) {
            var _this = _super.call(this, orderDetailsService) || this;
            _this.orderDetailsService = orderDetailsService;
            _this.userOrderService = userOrderService;
            _this.routing = routing;
            _this.globalMessageService = globalMessageService;
            _this.amendType = AmendOrderType.CANCEL;
            return _this;
        }
        /**
         * Return cancellable order entries.
         */
        /**
         * Return cancellable order entries.
         * @return {?}
         */
        OrderCancellationService.prototype.getEntries = /**
         * Return cancellable order entries.
         * @return {?}
         */
        function () {
            return this.getOrder().pipe(operators.filter((/**
             * @param {?} order
             * @return {?}
             */
            function (order) { return Boolean(order); })), operators.map((/**
             * @param {?} order
             * @return {?}
             */
            function (order) {
                return order.entries.filter((/**
                 * @param {?} entry
                 * @return {?}
                 */
                function (entry) { return entry.entryNumber !== -1 && entry.cancellableQuantity > 0; }));
            })));
        };
        /**
         * @return {?}
         */
        OrderCancellationService.prototype.save = /**
         * @return {?}
         */
        function () {
            var _this = this;
            /** @type {?} */
            var orderCode = this.form.value.orderCode;
            /** @type {?} */
            var entries = this.form.value.entries;
            /** @type {?} */
            var inputs = Object.keys(entries)
                .filter((/**
             * @param {?} entryNumber
             * @return {?}
             */
            function (entryNumber) { return (/** @type {?} */ (entries[entryNumber])) > 0; }))
                .map((/**
             * @param {?} entryNumber
             * @return {?}
             */
            function (entryNumber) {
                return ((/** @type {?} */ ({
                    orderEntryNumber: Number(entryNumber),
                    quantity: (/** @type {?} */ (entries[entryNumber])),
                })));
            }));
            this.form.reset();
            this.userOrderService.cancelOrder(orderCode, {
                cancellationRequestEntryInputs: inputs,
            });
            this.userOrderService
                .getCancelOrderSuccess()
                .pipe(operators.first(Boolean))
                .subscribe((/**
             * @return {?}
             */
            function () { return _this.afterSave(orderCode); }));
        };
        /**
         * @private
         * @param {?} orderCode
         * @return {?}
         */
        OrderCancellationService.prototype.afterSave = /**
         * @private
         * @param {?} orderCode
         * @return {?}
         */
        function (orderCode) {
            this.userOrderService.resetCancelOrderProcessState();
            this.globalMessageService.add({
                key: 'orderDetails.cancellationAndReturn.cancelSuccess',
                params: { orderCode: orderCode },
            }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
            this.routing.go({
                cxRoute: 'orders',
            });
        };
        OrderCancellationService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        OrderCancellationService.ctorParameters = function () { return [
            { type: OrderDetailsService },
            { type: core$1.UserOrderService },
            { type: core$1.RoutingService },
            { type: core$1.GlobalMessageService }
        ]; };
        /** @nocollapse */ OrderCancellationService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function OrderCancellationService_Factory() { return new OrderCancellationService(core.ɵɵinject(OrderDetailsService), core.ɵɵinject(core$1.UserOrderService), core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.GlobalMessageService)); }, token: OrderCancellationService, providedIn: "root" });
        return OrderCancellationService;
    }(OrderAmendService));
    if (false) {
        /** @type {?} */
        OrderCancellationService.prototype.amendType;
        /**
         * @type {?}
         * @protected
         */
        OrderCancellationService.prototype.orderDetailsService;
        /**
         * @type {?}
         * @protected
         */
        OrderCancellationService.prototype.userOrderService;
        /**
         * @type {?}
         * @protected
         */
        OrderCancellationService.prototype.routing;
        /**
         * @type {?}
         * @protected
         */
        OrderCancellationService.prototype.globalMessageService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderCancellationGuard = /** @class */ (function () {
        function OrderCancellationGuard(routing, orderAmendService) {
            this.routing = routing;
            this.orderAmendService = orderAmendService;
        }
        /**
         * @return {?}
         */
        OrderCancellationGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.orderAmendService.getForm().pipe(operators.map((/**
             * @param {?} form
             * @return {?}
             */
            function (form) {
                if (!form.valid) {
                    // the order code is not available in the route
                    // as long as we're inside a guard, hence we redirect
                    // to the common orders page.
                    _this.routing.go({ cxRoute: 'orders' });
                    return false;
                }
                else {
                    return true;
                }
            })));
        };
        OrderCancellationGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        OrderCancellationGuard.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: OrderCancellationService }
        ]; };
        /** @nocollapse */ OrderCancellationGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function OrderCancellationGuard_Factory() { return new OrderCancellationGuard(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(OrderCancellationService)); }, token: OrderCancellationGuard, providedIn: "root" });
        return OrderCancellationGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        OrderCancellationGuard.prototype.routing;
        /**
         * @type {?}
         * @protected
         */
        OrderCancellationGuard.prototype.orderAmendService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$1 = {
        cxRoute: 'orderCancelConfirmation',
    };
    var CancelOrderConfirmationModule = /** @class */ (function () {
        function CancelOrderConfirmationModule() {
        }
        CancelOrderConfirmationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$1,
                                },
                            ]),
                            forms.ReactiveFormsModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CancelOrderConfirmationComponent: {
                                        component: CancelOrderConfirmationComponent,
                                        guards: [core$1.AuthGuard, OrderCancellationGuard],
                                        providers: [
                                            {
                                                provide: OrderAmendService,
                                                useExisting: OrderCancellationService,
                                            },
                                        ],
                                    },
                                },
                            }))),
                            AmendOrderItemsModule,
                            AmendOrderActionsModule,
                        ],
                        declarations: [CancelOrderConfirmationComponent],
                        exports: [CancelOrderConfirmationComponent],
                        entryComponents: [CancelOrderConfirmationComponent],
                    },] }
        ];
        return CancelOrderConfirmationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CancelOrderComponent = /** @class */ (function () {
        function CancelOrderComponent(orderAmendService) {
            var _this = this;
            this.orderAmendService = orderAmendService;
            this.form$ = this.orderAmendService
                .getForm()
                .pipe(operators.tap((/**
             * @param {?} form
             * @return {?}
             */
            function (form) { return (_this.orderCode = form.value.orderCode); })));
            this.entries$ = this.orderAmendService.getEntries();
        }
        CancelOrderComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-cancel-order',
                        template: "<ng-container *ngIf=\"form$ | async as form\">\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items *ngIf=\"entries$ | async as entries\" [entries]=\"entries\">\n  </cx-amend-order-items>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [isValid]=\"form.valid\"\n      backRoute=\"orderDetails\"\n      forwardRoute=\"orderCancelConfirmation\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CancelOrderComponent.ctorParameters = function () { return [
            { type: OrderAmendService }
        ]; };
        return CancelOrderComponent;
    }());
    if (false) {
        /** @type {?} */
        CancelOrderComponent.prototype.orderCode;
        /** @type {?} */
        CancelOrderComponent.prototype.form$;
        /** @type {?} */
        CancelOrderComponent.prototype.entries$;
        /**
         * @type {?}
         * @protected
         */
        CancelOrderComponent.prototype.orderAmendService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$2 = {
        cxRoute: 'orderCancel',
    };
    var CancelOrderModule = /** @class */ (function () {
        function CancelOrderModule() {
        }
        CancelOrderModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$2,
                                },
                            ]),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CancelOrderComponent: {
                                        component: CancelOrderComponent,
                                        guards: [core$1.AuthGuard],
                                        providers: [
                                            {
                                                provide: OrderAmendService,
                                                useExisting: OrderCancellationService,
                                            },
                                        ],
                                    },
                                },
                            }))),
                            AmendOrderItemsModule,
                            AmendOrderActionsModule,
                        ],
                        declarations: [CancelOrderComponent],
                        exports: [CancelOrderComponent],
                        entryComponents: [CancelOrderComponent],
                    },] }
        ];
        return CancelOrderModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderCancellationModule = /** @class */ (function () {
        function OrderCancellationModule() {
        }
        OrderCancellationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [CancelOrderModule, CancelOrderConfirmationModule],
                    },] }
        ];
        return OrderCancellationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderReturnService = /** @class */ (function (_super) {
        __extends(OrderReturnService, _super);
        function OrderReturnService(orderDetailsService, returnRequestService, routing, globalMessageService) {
            var _this = _super.call(this, orderDetailsService) || this;
            _this.orderDetailsService = orderDetailsService;
            _this.returnRequestService = returnRequestService;
            _this.routing = routing;
            _this.globalMessageService = globalMessageService;
            _this.amendType = AmendOrderType.RETURN;
            return _this;
        }
        /**
         * @return {?}
         */
        OrderReturnService.prototype.getEntries = /**
         * @return {?}
         */
        function () {
            return this.getOrder().pipe(operators.filter((/**
             * @param {?} order
             * @return {?}
             */
            function (order) { return !!order.entries; })), operators.map((/**
             * @param {?} order
             * @return {?}
             */
            function (order) {
                return order.entries.filter((/**
                 * @param {?} entry
                 * @return {?}
                 */
                function (entry) { return entry.entryNumber !== -1 && entry.returnableQuantity > 0; }));
            })));
        };
        /**
         * @return {?}
         */
        OrderReturnService.prototype.save = /**
         * @return {?}
         */
        function () {
            var _this = this;
            /** @type {?} */
            var orderCode = this.form.value.orderCode;
            /** @type {?} */
            var entries = this.form.value.entries;
            /** @type {?} */
            var inputs = Object.keys(entries)
                .filter((/**
             * @param {?} entryNumber
             * @return {?}
             */
            function (entryNumber) { return (/** @type {?} */ (entries[entryNumber])) > 0; }))
                .map((/**
             * @param {?} entryNumber
             * @return {?}
             */
            function (entryNumber) {
                return ((/** @type {?} */ ({
                    orderEntryNumber: Number(entryNumber),
                    quantity: (/** @type {?} */ (entries[entryNumber])),
                })));
            }));
            this.form.reset();
            this.returnRequestService.createOrderReturnRequest({
                orderCode: orderCode,
                returnRequestEntryInputs: inputs,
            });
            this.returnRequestService
                .getReturnRequestSuccess()
                .pipe(operators.first(Boolean))
                .subscribe((/**
             * @return {?}
             */
            function () { return _this.afterSave(); }));
        };
        /**
         * @private
         * @return {?}
         */
        OrderReturnService.prototype.afterSave = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.returnRequestService
                .getOrderReturnRequest()
                .pipe(operators.first((/**
             * @param {?} r
             * @return {?}
             */
            function (r) { return !!r; })))
                .subscribe((/**
             * @param {?} returnRequest
             * @return {?}
             */
            function (returnRequest) {
                /** @type {?} */
                var rma = returnRequest.rma;
                _this.globalMessageService.add({
                    key: 'orderDetails.cancellationAndReturn.returnSuccess',
                    params: { rma: rma },
                }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
                _this.routing.go({
                    cxRoute: 'returnRequestDetails',
                    params: { rma: rma },
                });
            }));
        };
        OrderReturnService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        OrderReturnService.ctorParameters = function () { return [
            { type: OrderDetailsService },
            { type: core$1.OrderReturnRequestService },
            { type: core$1.RoutingService },
            { type: core$1.GlobalMessageService }
        ]; };
        /** @nocollapse */ OrderReturnService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function OrderReturnService_Factory() { return new OrderReturnService(core.ɵɵinject(OrderDetailsService), core.ɵɵinject(core$1.OrderReturnRequestService), core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.GlobalMessageService)); }, token: OrderReturnService, providedIn: "root" });
        return OrderReturnService;
    }(OrderAmendService));
    if (false) {
        /** @type {?} */
        OrderReturnService.prototype.amendType;
        /**
         * @type {?}
         * @protected
         */
        OrderReturnService.prototype.orderDetailsService;
        /**
         * @type {?}
         * @protected
         */
        OrderReturnService.prototype.returnRequestService;
        /**
         * @type {?}
         * @protected
         */
        OrderReturnService.prototype.routing;
        /**
         * @type {?}
         * @protected
         */
        OrderReturnService.prototype.globalMessageService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderReturnGuard = /** @class */ (function () {
        function OrderReturnGuard(routing, orderAmendService) {
            this.routing = routing;
            this.orderAmendService = orderAmendService;
        }
        /**
         * @return {?}
         */
        OrderReturnGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.orderAmendService.getForm().pipe(operators.map((/**
             * @param {?} form
             * @return {?}
             */
            function (form) {
                if (!form.valid) {
                    // the order code is not available in the route
                    // as long as we're inside a guard, hence we redirect
                    // to the common orders page.
                    _this.routing.go({ cxRoute: 'orders' });
                    return false;
                }
                else {
                    return true;
                }
            })));
        };
        OrderReturnGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        OrderReturnGuard.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: OrderReturnService }
        ]; };
        /** @nocollapse */ OrderReturnGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function OrderReturnGuard_Factory() { return new OrderReturnGuard(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(OrderReturnService)); }, token: OrderReturnGuard, providedIn: "root" });
        return OrderReturnGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        OrderReturnGuard.prototype.routing;
        /**
         * @type {?}
         * @protected
         */
        OrderReturnGuard.prototype.orderAmendService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReturnOrderConfirmationComponent = /** @class */ (function () {
        function ReturnOrderConfirmationComponent(orderAmendService) {
            var _this = this;
            this.orderAmendService = orderAmendService;
            this.form$ = this.orderAmendService
                .getForm()
                .pipe(operators.tap((/**
             * @param {?} form
             * @return {?}
             */
            function (form) { return (_this.orderCode = form.value.orderCode); })));
            this.entries$ = this.orderAmendService.getAmendedEntries();
        }
        /**
         * @param {?} form
         * @return {?}
         */
        ReturnOrderConfirmationComponent.prototype.submit = /**
         * @param {?} form
         * @return {?}
         */
        function (form) {
            form.disable();
            this.orderAmendService.save();
        };
        ReturnOrderConfirmationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-return-order-confirmation',
                        template: "<form\n  *ngIf=\"form$ | async as form\"\n  [formGroup]=\"form\"\n  (ngSubmit)=\"submit(form)\"\n>\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items\n    *ngIf=\"entries$ | async as entries\"\n    [entries]=\"entries\"\n    [isConfirmation]=\"true\"\n  >\n  </cx-amend-order-items>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [isValid]=\"form.valid\"\n      backRoute=\"orderReturn\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</form>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ReturnOrderConfirmationComponent.ctorParameters = function () { return [
            { type: OrderAmendService }
        ]; };
        return ReturnOrderConfirmationComponent;
    }());
    if (false) {
        /** @type {?} */
        ReturnOrderConfirmationComponent.prototype.orderCode;
        /** @type {?} */
        ReturnOrderConfirmationComponent.prototype.form$;
        /** @type {?} */
        ReturnOrderConfirmationComponent.prototype.entries$;
        /**
         * @type {?}
         * @protected
         */
        ReturnOrderConfirmationComponent.prototype.orderAmendService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$3 = {
        cxRoute: 'orderReturnConfirmation',
    };
    var ReturnOrderConfirmationModule = /** @class */ (function () {
        function ReturnOrderConfirmationModule() {
        }
        ReturnOrderConfirmationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$3,
                                },
                            ]),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ReturnOrderConfirmationComponent: {
                                        component: ReturnOrderConfirmationComponent,
                                        guards: [core$1.AuthGuard, OrderReturnGuard],
                                        providers: [
                                            {
                                                provide: OrderAmendService,
                                                useExisting: OrderReturnService,
                                            },
                                        ],
                                    },
                                },
                            }))),
                            AmendOrderItemsModule,
                            core$1.I18nModule,
                            forms.ReactiveFormsModule,
                            AmendOrderActionsModule,
                        ],
                        declarations: [ReturnOrderConfirmationComponent],
                        exports: [ReturnOrderConfirmationComponent],
                        entryComponents: [ReturnOrderConfirmationComponent],
                    },] }
        ];
        return ReturnOrderConfirmationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReturnOrderComponent = /** @class */ (function () {
        function ReturnOrderComponent(orderAmendService) {
            var _this = this;
            this.orderAmendService = orderAmendService;
            this.form$ = this.orderAmendService
                .getForm()
                .pipe(operators.tap((/**
             * @param {?} form
             * @return {?}
             */
            function (form) { return (_this.orderCode = form.value.orderCode); })));
            this.entries$ = this.orderAmendService.getEntries();
        }
        ReturnOrderComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-return-order',
                        template: "<ng-container *ngIf=\"form$ | async as form\">\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <cx-amend-order-items *ngIf=\"entries$ | async as entries\" [entries]=\"entries\">\n  </cx-amend-order-items>\n\n  <ng-container *ngTemplateOutlet=\"actions\"></ng-container>\n\n  <ng-template #actions>\n    <cx-amend-order-actions\n      *ngIf=\"orderCode\"\n      [orderCode]=\"orderCode\"\n      [isValid]=\"form.valid\"\n      backRoute=\"orderDetails\"\n      forwardRoute=\"orderReturnConfirmation\"\n    ></cx-amend-order-actions>\n  </ng-template>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ReturnOrderComponent.ctorParameters = function () { return [
            { type: OrderAmendService }
        ]; };
        return ReturnOrderComponent;
    }());
    if (false) {
        /** @type {?} */
        ReturnOrderComponent.prototype.orderCode;
        /** @type {?} */
        ReturnOrderComponent.prototype.form$;
        /** @type {?} */
        ReturnOrderComponent.prototype.entries$;
        /**
         * @type {?}
         * @protected
         */
        ReturnOrderComponent.prototype.orderAmendService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$4 = {
        cxRoute: 'orderReturn',
    };
    var ReturnOrderModule = /** @class */ (function () {
        function ReturnOrderModule() {
        }
        ReturnOrderModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$4,
                                },
                            ]),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ReturnOrderComponent: {
                                        component: ReturnOrderComponent,
                                        guards: [core$1.AuthGuard],
                                        providers: [
                                            {
                                                provide: OrderAmendService,
                                                useExisting: OrderReturnService,
                                            },
                                        ],
                                    },
                                },
                            }))),
                            AmendOrderItemsModule,
                            AmendOrderActionsModule,
                        ],
                        declarations: [ReturnOrderComponent],
                        exports: [ReturnOrderComponent],
                        entryComponents: [ReturnOrderComponent],
                    },] }
        ];
        return ReturnOrderModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderReturnModule = /** @class */ (function () {
        function OrderReturnModule() {
        }
        OrderReturnModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [ReturnOrderModule, ReturnOrderConfirmationModule],
                    },] }
        ];
        return OrderReturnModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderDetailHeadlineComponent = /** @class */ (function () {
        function OrderDetailHeadlineComponent(orderDetailsService) {
            this.orderDetailsService = orderDetailsService;
        }
        /**
         * @return {?}
         */
        OrderDetailHeadlineComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.order$ = this.orderDetailsService.getOrderDetails();
        };
        OrderDetailHeadlineComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-details-headline',
                        template: "<ng-container *ngIf=\"order$ | async as order\">\n  <div class=\"cx-header row\">\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'orderDetails.orderId' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">{{ order?.code }}</div>\n    </div>\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'orderDetails.placed' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">{{ order?.created | cxDate }}</div>\n    </div>\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'orderDetails.status' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\" *ngIf=\"order?.statusDisplay\">\n        {{\n          'orderDetails.statusDisplay'\n            | cxTranslate: { context: order?.statusDisplay }\n        }}\n      </div>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        OrderDetailHeadlineComponent.ctorParameters = function () { return [
            { type: OrderDetailsService }
        ]; };
        return OrderDetailHeadlineComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderDetailHeadlineComponent.prototype.order$;
        /**
         * @type {?}
         * @private
         */
        OrderDetailHeadlineComponent.prototype.orderDetailsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var completedValues = ['DELIVERY_COMPLETED', 'PICKUP_COMPLETE'];
    /** @type {?} */
    var cancelledValues = ['CANCELLED'];

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderDetailItemsComponent = /** @class */ (function () {
        function OrderDetailItemsComponent(orderDetailsService, promotionService) {
            this.orderDetailsService = orderDetailsService;
            this.promotionService = promotionService;
            this.promotionLocation = core$1.PromotionLocation.Order;
            this.order$ = this.orderDetailsService.getOrderDetails();
        }
        /**
         * @return {?}
         */
        OrderDetailItemsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);
            this.others$ = this.getOtherStatus.apply(this, __spread(completedValues, cancelledValues));
            this.completed$ = this.getExactStatus(completedValues);
            this.cancel$ = this.getExactStatus(cancelledValues);
        };
        /**
         * @private
         * @param {?} consignmentStatus
         * @return {?}
         */
        OrderDetailItemsComponent.prototype.getExactStatus = /**
         * @private
         * @param {?} consignmentStatus
         * @return {?}
         */
        function (consignmentStatus) {
            return this.order$.pipe(operators.map((/**
             * @param {?} order
             * @return {?}
             */
            function (order) {
                if (Boolean(order.consignments)) {
                    return order.consignments.filter((/**
                     * @param {?} consignment
                     * @return {?}
                     */
                    function (consignment) {
                        return consignmentStatus.includes(consignment.status);
                    }));
                }
            })));
        };
        /**
         * @private
         * @param {...?} consignmentStatus
         * @return {?}
         */
        OrderDetailItemsComponent.prototype.getOtherStatus = /**
         * @private
         * @param {...?} consignmentStatus
         * @return {?}
         */
        function () {
            var consignmentStatus = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                consignmentStatus[_i] = arguments[_i];
            }
            return this.order$.pipe(operators.map((/**
             * @param {?} order
             * @return {?}
             */
            function (order) {
                if (Boolean(order.consignments)) {
                    return order.consignments.filter((/**
                     * @param {?} consignment
                     * @return {?}
                     */
                    function (consignment) { return !consignmentStatus.includes(consignment.status); }));
                }
            })));
        };
        /**
         * @deprecated
         * NOTE: This function will be removed in version 2.0
         */
        /**
         * @deprecated
         * NOTE: This function will be removed in version 2.0
         * @param {?} consignment
         * @return {?}
         */
        OrderDetailItemsComponent.prototype.getConsignmentProducts = /**
         * @deprecated
         * NOTE: This function will be removed in version 2.0
         * @param {?} consignment
         * @return {?}
         */
        function (consignment) {
            /** @type {?} */
            var products = [];
            consignment.entries.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                products.push(element.orderEntry);
            }));
            return products;
        };
        OrderDetailItemsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-details-items',
                        template: "<ng-container *ngIf=\"order$ | async as order\">\n  <!-- consigned entries -->\n  <div *cxFeatureLevel=\"'1.4'\">\n    <ng-container *ngIf=\"orderPromotions$ | async as orderPromotions\">\n      <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\n    </ng-container>\n\n    <cx-order-consigned-entries\n      *ngIf=\"others$ | async as others\"\n      [order]=\"order\"\n      [consignments]=\"others\"\n    ></cx-order-consigned-entries>\n\n    <cx-order-consigned-entries\n      *ngIf=\"completed$ | async as completed\"\n      [order]=\"order\"\n      [consignments]=\"completed\"\n    ></cx-order-consigned-entries>\n\n    <cx-order-consigned-entries\n      *ngIf=\"cancel$ | async as cancel\"\n      [order]=\"order\"\n      [consignments]=\"cancel\"\n    ></cx-order-consigned-entries>\n  </div>\n\n  <div *cxFeatureLevel=\"'!1.4'\">\n    <div *ngFor=\"let consignment of order.consignments\" class=\"cx-list row\">\n      <div class=\"cx-list-header col-12\">\n        <div class=\"cx-list-status\">\n          <span *ngIf=\"consignment\">\n            {{\n              'orderDetails.deliveryStatus'\n                | cxTranslate: { context: consignment.status }\n            }}\n          </span>\n        </div>\n        <div *ngIf=\"consignment?.statusDate\" class=\"cx-list-date\">\n          <div>{{ 'orderDetails.shippedOn' | cxTranslate }}&nbsp;</div>\n          <div>{{ consignment?.statusDate | cxDate }}</div>\n        </div>\n\n        <cx-consignment-tracking\n          [orderCode]=\"order.code\"\n          [consignment]=\"consignment\"\n          *cxFeature=\"'consignmentTracking'\"\n        >\n        </cx-consignment-tracking>\n      </div>\n      <div class=\"cx-list-item col-12\">\n        <ng-container *cxFeatureLevel=\"'1.5'\">\n          <ng-container *ngIf=\"orderPromotions$ | async as orderPromotions\">\n            <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\n          </ng-container>\n        </ng-container>\n\n        <cx-cart-item-list\n          [items]=\"consignment.entries\"\n          [isReadOnly]=\"true\"\n          [promotionLocation]=\"promotionLocation\"\n        ></cx-cart-item-list>\n      </div>\n    </div>\n  </div>\n  <!-- unconsigned entries -->\n  <div *ngIf=\"order.unconsignedEntries?.length\" class=\"cx-list row\">\n    <div class=\"cx-list-header col-12\">\n      <div class=\"cx-list-status\">\n        {{ 'orderDetails.pending' | cxTranslate }}\n      </div>\n    </div>\n    <div class=\"cx-list-item col-12\">\n      <ng-container *ngIf=\"orderPromotions$ | async as orderPromotions\">\n        <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\n      </ng-container>\n\n      <cx-cart-item-list\n        [items]=\"order?.unconsignedEntries\"\n        [isReadOnly]=\"true\"\n        [promotionLocation]=\"promotionLocation\"\n      ></cx-cart-item-list>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        OrderDetailItemsComponent.ctorParameters = function () { return [
            { type: OrderDetailsService },
            { type: PromotionService }
        ]; };
        return OrderDetailItemsComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderDetailItemsComponent.prototype.promotionLocation;
        /** @type {?} */
        OrderDetailItemsComponent.prototype.order$;
        /** @type {?} */
        OrderDetailItemsComponent.prototype.orderPromotions$;
        /** @type {?} */
        OrderDetailItemsComponent.prototype.others$;
        /** @type {?} */
        OrderDetailItemsComponent.prototype.completed$;
        /** @type {?} */
        OrderDetailItemsComponent.prototype.cancel$;
        /**
         * @type {?}
         * @private
         */
        OrderDetailItemsComponent.prototype.orderDetailsService;
        /**
         * @type {?}
         * @protected
         */
        OrderDetailItemsComponent.prototype.promotionService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderDetailShippingComponent = /** @class */ (function () {
        function OrderDetailShippingComponent(orderDetailsService, translation) {
            this.orderDetailsService = orderDetailsService;
            this.translation = translation;
        }
        /**
         * @return {?}
         */
        OrderDetailShippingComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.order$ = this.orderDetailsService.getOrderDetails();
        };
        /**
         * @param {?} address
         * @return {?}
         */
        OrderDetailShippingComponent.prototype.getAddressCardContent = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            return rxjs.combineLatest([
                this.translation.translate('addressCard.shipTo'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), textTitle = _b[0];
                return {
                    title: textTitle,
                    textBold: address.firstName + " " + address.lastName,
                    text: [
                        address.line1,
                        address.line2,
                        address.town + ", " + address.country.isocode + ", " + address.postalCode,
                        address.phone,
                    ],
                };
            })));
        };
        /**
         * @param {?} billingAddress
         * @return {?}
         */
        OrderDetailShippingComponent.prototype.getBillingAddressCardContent = /**
         * @param {?} billingAddress
         * @return {?}
         */
        function (billingAddress) {
            return rxjs.combineLatest([
                this.translation.translate('addressCard.billTo'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), textTitle = _b[0];
                return {
                    title: textTitle,
                    textBold: billingAddress.firstName + " " + billingAddress.lastName,
                    text: [
                        billingAddress.line1,
                        billingAddress.line2,
                        billingAddress.town + ", " + billingAddress.country.isocode + ", " + billingAddress.postalCode,
                        billingAddress.phone,
                    ],
                };
            })));
        };
        /**
         * @param {?} payment
         * @return {?}
         */
        OrderDetailShippingComponent.prototype.getPaymentCardContent = /**
         * @param {?} payment
         * @return {?}
         */
        function (payment) {
            return rxjs.combineLatest([
                this.translation.translate('paymentForm.payment'),
                this.translation.translate('paymentCard.expires', {
                    month: payment.expiryMonth,
                    year: payment.expiryYear,
                }),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), textTitle = _b[0], textExpires = _b[1];
                return {
                    title: textTitle,
                    textBold: payment.accountHolderName,
                    text: [payment.cardType.name, payment.cardNumber, textExpires],
                };
            })));
        };
        /**
         * @param {?} shipping
         * @return {?}
         */
        OrderDetailShippingComponent.prototype.getShippingMethodCardContent = /**
         * @param {?} shipping
         * @return {?}
         */
        function (shipping) {
            return rxjs.combineLatest([
                this.translation.translate('checkoutShipping.shippingMethod'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), textTitle = _b[0];
                return {
                    title: textTitle,
                    textBold: shipping.name,
                    text: [shipping.description],
                };
            })));
        };
        OrderDetailShippingComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-details-shipping',
                        template: "<ng-container *ngIf=\"order$ | async as order\">\n  <div class=\"cx-account-summary row\">\n    <div\n      *ngIf=\"order.deliveryAddress\"\n      class=\"cx-summary-card col-sm-12 col-md-4\"\n    >\n      <cx-card\n        [content]=\"getAddressCardContent(order.deliveryAddress) | async\"\n      ></cx-card>\n    </div>\n    <div\n      *ngIf=\"order.paymentInfo?.billingAddress\"\n      class=\"cx-summary-card col-sm-12 col-md-4\"\n    >\n      <cx-card\n        [content]=\"\n          getBillingAddressCardContent(order.paymentInfo.billingAddress) | async\n        \"\n      ></cx-card>\n    </div>\n    <div *ngIf=\"order.paymentInfo\" class=\"cx-summary-card col-sm-12 col-md-4\">\n      <cx-card\n        [content]=\"getPaymentCardContent(order.paymentInfo) | async\"\n      ></cx-card>\n    </div>\n    <div *ngIf=\"order.deliveryMode\" class=\"cx-summary-card col-sm-12 col-md-4\">\n      <cx-card\n        [content]=\"getShippingMethodCardContent(order.deliveryMode) | async\"\n      ></cx-card>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        OrderDetailShippingComponent.ctorParameters = function () { return [
            { type: OrderDetailsService },
            { type: core$1.TranslationService }
        ]; };
        return OrderDetailShippingComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderDetailShippingComponent.prototype.order$;
        /**
         * @type {?}
         * @private
         */
        OrderDetailShippingComponent.prototype.orderDetailsService;
        /**
         * @type {?}
         * @private
         */
        OrderDetailShippingComponent.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderDetailTotalsComponent = /** @class */ (function () {
        function OrderDetailTotalsComponent(orderDetailsService) {
            this.orderDetailsService = orderDetailsService;
        }
        /**
         * @return {?}
         */
        OrderDetailTotalsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.order$ = this.orderDetailsService.getOrderDetails();
        };
        OrderDetailTotalsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-details-totals',
                        template: "<ng-container *ngIf=\"order$ | async as order\">\n  <div class=\"row justify-content-end\">\n    <div class=\"cx-summary col-sm-12 col-md-6 col-lg-5 col-xl-4\">\n      <cx-order-summary [cart]=\"order\"></cx-order-summary>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        OrderDetailTotalsComponent.ctorParameters = function () { return [
            { type: OrderDetailsService }
        ]; };
        return OrderDetailTotalsComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderDetailTotalsComponent.prototype.order$;
        /**
         * @type {?}
         * @protected
         */
        OrderDetailTotalsComponent.prototype.orderDetailsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var TrackingEventsComponent = /** @class */ (function () {
        function TrackingEventsComponent(activeModal, userOrderService) {
            this.activeModal = activeModal;
            this.userOrderService = userOrderService;
        }
        /**
         * @return {?}
         */
        TrackingEventsComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.userOrderService.clearConsignmentTracking();
        };
        TrackingEventsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-tracking-events',
                        template: "<div class=\"cx-consignment-tracking-dialog\">\n  <!-- Modal Header -->\n  <ng-container *ngIf=\"tracking$ | async as consignmentTracking; else loading\">\n    <div class=\"header modal-header\">\n      <div class=\"title modal-title\">\n        {{ 'orderDetails.consignmentTracking.dialog.header' | cxTranslate }}\n      </div>\n      <button\n        type=\"button\"\n        class=\"close\"\n        aria-label=\"Close\"\n        (click)=\"activeModal.dismiss('Cross click')\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <!-- Modal Body -->\n    <!-- shipment header -->\n    <ng-container\n      *ngIf=\"\n        consignmentTracking?.carrierDetails && consignmentTracking?.trackingID;\n        else noTracking\n      \"\n    >\n      <div class=\"shipment-heading\" data-test=\"head-track\">\n        <div class=\"row\">\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title \">\n              {{\n                'orderDetails.consignmentTracking.dialog.shipped' | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              {{ shipDate | cxDate: 'medium' }}\n            </div>\n          </div>\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title\">\n              {{\n                'orderDetails.consignmentTracking.dialog.estimate' | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              {{ consignmentTracking?.targetArrivalDate | cxDate: 'medium' }}\n            </div>\n          </div>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title\">\n              {{\n                'orderDetails.consignmentTracking.dialog.carrier' | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              {{ consignmentTracking?.carrierDetails?.name }}\n            </div>\n          </div>\n          <div class=\"col-sm-12 col-md-6\">\n            <div class=\"shipment-title\">\n              {{\n                'orderDetails.consignmentTracking.dialog.trackingId'\n                  | cxTranslate\n              }}\n            </div>\n            <div class=\"shipment-content\">\n              <label>\n                {{ consignmentTracking?.trackingID }}\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n\n    <!-- tracking events -->\n    <div class=\"events modal-body\">\n      <ng-container\n        *ngFor=\"let consignmentEvent of consignmentTracking.trackingEvents\"\n      >\n        <div class=\"event-body\" data-test=\"body-event\">\n          <div class=\"event-content\">\n            {{ consignmentEvent.eventDate | cxDate: 'medium' }}\n          </div>\n          <div class=\"event-title\">\n            {{ consignmentEvent.referenceCode }}\n          </div>\n          <div class=\"event-content\">{{ consignmentEvent.detail }}</div>\n          <div class=\"event-city\">\n            location: {{ consignmentEvent.location }}\n          </div>\n        </div>\n      </ng-container>\n    </div>\n  </ng-container>\n\n  <ng-template #noTracking>\n    <div class=\"no-tracking-heading\" data-test=\"head-notrack\">\n      <div class=\"shipment-content\">\n        {{ 'orderDetails.consignmentTracking.dialog.noTracking' | cxTranslate }}\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template #loading>\n    <div class=\"tracking-loading\" data-test=\"loading-track\">\n      <div class=\"header modal-header\">\n        <div class=\"title modal-title\">\n          {{\n            'orderDetails.consignmentTracking.dialog.loadingHeader'\n              | cxTranslate\n          }}\n        </div>\n        <button\n          type=\"button\"\n          class=\"close\"\n          aria-label=\"Close\"\n          data-test=\"btn-dismiss\"\n          (click)=\"activeModal.dismiss('Cross click')\"\n        >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <!-- Modal Body -->\n      <div class=\"body modal-body\">\n        <div class=\"row\">\n          <div class=\"col-sm-12\">\n            <cx-spinner></cx-spinner>\n          </div>\n        </div>\n      </div>\n    </div>\n  </ng-template>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        TrackingEventsComponent.ctorParameters = function () { return [
            { type: ngBootstrap.NgbActiveModal },
            { type: core$1.UserOrderService }
        ]; };
        return TrackingEventsComponent;
    }());
    if (false) {
        /** @type {?} */
        TrackingEventsComponent.prototype.tracking$;
        /** @type {?} */
        TrackingEventsComponent.prototype.shipDate;
        /** @type {?} */
        TrackingEventsComponent.prototype.consignmentCode;
        /** @type {?} */
        TrackingEventsComponent.prototype.activeModal;
        /**
         * @type {?}
         * @private
         */
        TrackingEventsComponent.prototype.userOrderService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ConsignmentTrackingComponent = /** @class */ (function () {
        function ConsignmentTrackingComponent(userOrderService, modalService) {
            this.userOrderService = userOrderService;
            this.modalService = modalService;
            this.consignmentStatus = [
                'SHIPPED',
                'IN_TRANSIT',
                'DELIVERY_COMPLETED',
                'DELIVERY_REJECTED',
                'DELIVERING',
            ];
        }
        /**
         * @return {?}
         */
        ConsignmentTrackingComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.consignmentTracking$ = this.userOrderService.getConsignmentTracking();
        };
        /**
         * @param {?} consignment
         * @return {?}
         */
        ConsignmentTrackingComponent.prototype.openTrackingDialog = /**
         * @param {?} consignment
         * @return {?}
         */
        function (consignment) {
            this.userOrderService.loadConsignmentTracking(this.orderCode, consignment.code);
            /** @type {?} */
            var modalInstance;
            this.modalRef = this.modalService.open(TrackingEventsComponent, {
                centered: true,
                size: 'lg',
            });
            modalInstance = this.modalRef.componentInstance;
            modalInstance.tracking$ = this.consignmentTracking$;
            modalInstance.shipDate = consignment.statusDate;
            modalInstance.consignmentCode = consignment.code;
        };
        /**
         * @return {?}
         */
        ConsignmentTrackingComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.userOrderService.clearConsignmentTracking();
        };
        ConsignmentTrackingComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-consignment-tracking',
                        template: "<ng-container *ngIf=\"consignment && consignment.status\">\n  <div *ngIf=\"consignmentStatus.includes(consignment.status)\">\n    <button\n      (click)=\"openTrackingDialog(consignment)\"\n      class=\"btn btn-action\"\n      data-test=\"btn-events\"\n    >\n      {{ 'orderDetails.consignmentTracking.action' | cxTranslate }}\n    </button>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        ConsignmentTrackingComponent.ctorParameters = function () { return [
            { type: core$1.UserOrderService },
            { type: ModalService }
        ]; };
        ConsignmentTrackingComponent.propDecorators = {
            consignment: [{ type: core.Input }],
            orderCode: [{ type: core.Input }]
        };
        return ConsignmentTrackingComponent;
    }());
    if (false) {
        /** @type {?} */
        ConsignmentTrackingComponent.prototype.consignmentStatus;
        /** @type {?} */
        ConsignmentTrackingComponent.prototype.modalRef;
        /** @type {?} */
        ConsignmentTrackingComponent.prototype.consignment;
        /** @type {?} */
        ConsignmentTrackingComponent.prototype.orderCode;
        /** @type {?} */
        ConsignmentTrackingComponent.prototype.consignmentTracking$;
        /**
         * @type {?}
         * @private
         */
        ConsignmentTrackingComponent.prototype.userOrderService;
        /**
         * @type {?}
         * @private
         */
        ConsignmentTrackingComponent.prototype.modalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderDetailActionsComponent = /** @class */ (function () {
        function OrderDetailActionsComponent(orderDetailsService) {
            this.orderDetailsService = orderDetailsService;
            this.order$ = this.orderDetailsService.getOrderDetails();
        }
        OrderDetailActionsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-details-actions',
                        template: "<ng-container *ngIf=\"order$ | async as order\">\n  <div class=\"cx-nav row\">\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <button\n        [routerLink]=\"{ cxRoute: 'orders' } | cxUrl\"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'common.back' | cxTranslate }}\n      </button>\n    </div>\n\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <a\n        *ngIf=\"order.cancellable\"\n        [routerLink]=\"\n          {\n            cxRoute: 'orderCancel',\n            params: order\n          } | cxUrl\n        \"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'orderDetails.cancellationAndReturn.cancelAction' | cxTranslate }}\n      </a>\n\n      <a\n        *ngIf=\"order.returnable\"\n        [routerLink]=\"\n          {\n            cxRoute: 'orderReturn',\n            params: order\n          } | cxUrl\n        \"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'orderDetails.cancellationAndReturn.returnAction' | cxTranslate }}\n      </a>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        OrderDetailActionsComponent.ctorParameters = function () { return [
            { type: OrderDetailsService }
        ]; };
        return OrderDetailActionsComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderDetailActionsComponent.prototype.order$;
        /**
         * @type {?}
         * @protected
         */
        OrderDetailActionsComponent.prototype.orderDetailsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderConsignedEntriesComponent = /** @class */ (function () {
        function OrderConsignedEntriesComponent() {
            this.promotionLocation = core$1.PromotionLocation.Order;
        }
        /**
         * @param {?} consignment
         * @return {?}
         */
        OrderConsignedEntriesComponent.prototype.getConsignmentProducts = /**
         * @param {?} consignment
         * @return {?}
         */
        function (consignment) {
            /** @type {?} */
            var products = [];
            consignment.entries.forEach((/**
             * @param {?} element
             * @return {?}
             */
            function (element) {
                products.push(element.orderEntry);
            }));
            return products;
        };
        OrderConsignedEntriesComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-consigned-entries',
                        template: "<div *ngFor=\"let consignment of consignments\" class=\"cx-list row\">\n  <div class=\"cx-list-header col-12\">\n    <div class=\"cx-list-status\">\n      <span *ngIf=\"consignment\">\n        {{\n          'orderDetails.deliveryStatus'\n            | cxTranslate: { context: consignment.status }\n        }}\n      </span>\n    </div>\n    <div *ngIf=\"consignment?.statusDate\" class=\"cx-list-date\">\n      <div>{{ consignment?.statusDate | cxDate }}</div>\n    </div>\n\n    <cx-consignment-tracking\n      [orderCode]=\"order.code\"\n      [consignment]=\"consignment\"\n      *cxFeature=\"'consignmentTracking'\"\n    >\n    </cx-consignment-tracking>\n  </div>\n  <div class=\"cx-list-item col-12\">\n    <cx-cart-item-list\n      [items]=\"consignment.entries\"\n      [isReadOnly]=\"true\"\n      [promotionLocation]=\"promotionLocation\"\n    ></cx-cart-item-list>\n  </div>\n</div>\n"
                    }] }
        ];
        OrderConsignedEntriesComponent.propDecorators = {
            consignments: [{ type: core.Input }],
            order: [{ type: core.Input }]
        };
        return OrderConsignedEntriesComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderConsignedEntriesComponent.prototype.consignments;
        /** @type {?} */
        OrderConsignedEntriesComponent.prototype.order;
        /** @type {?} */
        OrderConsignedEntriesComponent.prototype.promotionLocation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var moduleComponents = [
        OrderDetailActionsComponent,
        OrderDetailHeadlineComponent,
        OrderDetailItemsComponent,
        OrderDetailTotalsComponent,
        OrderDetailShippingComponent,
        TrackingEventsComponent,
        ConsignmentTrackingComponent,
        OrderConsignedEntriesComponent,
    ];
    var ɵ0$5 = { pageLabel: 'order', cxRoute: 'orderGuest' }, ɵ1 = { cxRoute: 'orderDetails' };
    var OrderDetailsModule = /** @class */ (function () {
        function OrderDetailsModule() {
        }
        OrderDetailsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            CartSharedModule,
                            CardModule,
                            common.CommonModule,
                            core$1.I18nModule,
                            core$1.FeaturesConfigModule,
                            PromotionsModule,
                            core$1.UrlModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$5,
                                },
                                {
                                    path: null,
                                    canActivate: [core$1.AuthGuard, CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ1,
                                },
                            ]),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    AccountOrderDetailsActionsComponent: {
                                        component: OrderDetailActionsComponent,
                                    },
                                    AccountOrderDetailsHeadlineComponent: {
                                        component: OrderDetailHeadlineComponent,
                                    },
                                    AccountOrderDetailsItemsComponent: {
                                        component: OrderDetailItemsComponent,
                                    },
                                    AccountOrderDetailsTotalsComponent: {
                                        component: OrderDetailTotalsComponent,
                                    },
                                    AccountOrderDetailsShippingComponent: {
                                        component: OrderDetailShippingComponent,
                                    },
                                },
                                features: {
                                    consignmentTracking: '1.2',
                                },
                            }))),
                            SpinnerModule,
                        ],
                        providers: [OrderDetailsService],
                        declarations: __spread(moduleComponents),
                        exports: __spread(moduleComponents),
                        entryComponents: __spread(moduleComponents),
                    },] }
        ];
        return OrderDetailsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderHistoryComponent = /** @class */ (function () {
        function OrderHistoryComponent(routing, userOrderService, translation) {
            var _this = this;
            this.routing = routing;
            this.userOrderService = userOrderService;
            this.translation = translation;
            this.PAGE_SIZE = 5;
            this.orders$ = this.userOrderService.getOrderHistoryList(this.PAGE_SIZE).pipe(operators.tap((/**
             * @param {?} orders
             * @return {?}
             */
            function (orders) {
                if (orders.pagination) {
                    _this.sortType = orders.pagination.sort;
                }
            })));
            this.isLoaded$ = this.userOrderService.getOrderHistoryListLoaded();
            /**
             * When "Order Return" feature is enabled, this component becomes one tab in
             * TabParagraphContainerComponent. This can be read from TabParagraphContainer.
             */
            this.tabTitleParam$ = this.orders$.pipe(operators.map((/**
             * @param {?} order
             * @return {?}
             */
            function (order) { return order.pagination.totalResults; })), operators.filter((/**
             * @param {?} totalResults
             * @return {?}
             */
            function (totalResults) { return totalResults !== undefined; })), operators.take(1));
        }
        /**
         * @return {?}
         */
        OrderHistoryComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.userOrderService.clearOrderList();
        };
        /**
         * @param {?} sortCode
         * @return {?}
         */
        OrderHistoryComponent.prototype.changeSortCode = /**
         * @param {?} sortCode
         * @return {?}
         */
        function (sortCode) {
            /** @type {?} */
            var event = {
                sortCode: sortCode,
                currentPage: 0,
            };
            this.sortType = sortCode;
            this.fetchOrders(event);
        };
        /**
         * @param {?} page
         * @return {?}
         */
        OrderHistoryComponent.prototype.pageChange = /**
         * @param {?} page
         * @return {?}
         */
        function (page) {
            /** @type {?} */
            var event = {
                sortCode: this.sortType,
                currentPage: page,
            };
            this.fetchOrders(event);
        };
        /**
         * @param {?} order
         * @return {?}
         */
        OrderHistoryComponent.prototype.goToOrderDetail = /**
         * @param {?} order
         * @return {?}
         */
        function (order) {
            this.routing.go({
                cxRoute: 'orderDetails',
                params: order,
            });
        };
        /**
         * @return {?}
         */
        OrderHistoryComponent.prototype.getSortLabels = /**
         * @return {?}
         */
        function () {
            return rxjs.combineLatest([
                this.translation.translate('sorting.date'),
                this.translation.translate('sorting.orderNumber'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), textByDate = _b[0], textByOrderNumber = _b[1];
                return {
                    byDate: textByDate,
                    byOrderNumber: textByOrderNumber,
                };
            })));
        };
        /**
         * @private
         * @param {?} event
         * @return {?}
         */
        OrderHistoryComponent.prototype.fetchOrders = /**
         * @private
         * @param {?} event
         * @return {?}
         */
        function (event) {
            this.userOrderService.loadOrderList(this.PAGE_SIZE, event.currentPage, event.sortCode);
        };
        OrderHistoryComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-history',
                        template: "<ng-container *ngIf=\"orders$ | async as orders\">\n  <div class=\"container\">\n    <!-- HEADER -->\n    <div class=\"cx-order-history-header\">\n      <h3>{{ 'orderHistory.orderHistory' | cxTranslate }}</h3>\n    </div>\n\n    <!-- BODY -->\n    <div class=\"cx-order-history-body\">\n      <ng-container *ngIf=\"orders.pagination.totalResults > 0; else noOrder\">\n        <!-- Select Form and Pagination Top -->\n        <div class=\"cx-order-history-sort top row\">\n          <div\n            class=\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\"\n          >\n            <cx-sorting\n              [sortOptions]=\"orders.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"orders.pagination.sort\"\n              placeholder=\"{{ 'orderHistory.sortByMostRecent' | cxTranslate }}\"\n            ></cx-sorting>\n          </div>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"orders.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n        <!-- TABLE -->\n        <table class=\"table cx-order-history-table\">\n          <thead class=\"cx-order-history-thead-mobile\">\n            <th scope=\"col\">\n              {{ 'orderHistory.orderId' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'orderHistory.date' | cxTranslate }}</th>\n            <th scope=\"col\">\n              {{ 'orderHistory.status' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'orderHistory.total' | cxTranslate }}</th>\n          </thead>\n          <tbody>\n            <tr\n              *ngFor=\"let order of orders.orders\"\n              (click)=\"goToOrderDetail(order)\"\n            >\n              <td class=\"cx-order-history-code\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'orderHistory.orderId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'orderDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ order?.code }}</a\n                >\n              </td>\n              <td class=\"cx-order-history-placed\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'orderHistory.date' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'orderDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                  >{{ order?.placed | cxDate: 'longDate' }}</a\n                >\n              </td>\n              <td class=\"cx-order-history-status\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'orderHistory.status' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'orderDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{\n                    'orderDetails.statusDisplay'\n                      | cxTranslate: { context: order?.statusDisplay }\n                  }}</a\n                >\n              </td>\n              <td class=\"cx-order-history-total\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'orderHistory.total' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'orderDetails',\n                      params: order\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ order?.total.formattedValue }}</a\n                >\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <!-- Select Form and Pagination Bottom -->\n        <div class=\"cx-order-history-sort bottom row\">\n          <div\n            class=\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\"\n          >\n            <cx-sorting\n              [sortOptions]=\"orders.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"orders.pagination.sort\"\n              placeholder=\"{{ 'orderHistory.sortByMostRecent' | cxTranslate }}\"\n            ></cx-sorting>\n          </div>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"orders.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n      </ng-container>\n\n      <!-- NO ORDER CONTAINER -->\n      <ng-template #noOrder>\n        <div class=\"cx-order-history-no-order row\" *ngIf=\"isLoaded$ | async\">\n          <div class=\"col-sm-12 col-md-6 col-lg-4\">\n            <div>{{ 'orderHistory.noOrders' | cxTranslate }}</div>\n            <a\n              [routerLink]=\"{ cxRoute: 'home' } | cxUrl\"\n              routerLinkActive=\"active\"\n              class=\"btn btn-primary btn-block\"\n              >{{ 'orderHistory.startShopping' | cxTranslate }}</a\n            >\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        OrderHistoryComponent.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.UserOrderService },
            { type: core$1.TranslationService }
        ]; };
        return OrderHistoryComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        OrderHistoryComponent.prototype.PAGE_SIZE;
        /** @type {?} */
        OrderHistoryComponent.prototype.sortType;
        /** @type {?} */
        OrderHistoryComponent.prototype.orders$;
        /** @type {?} */
        OrderHistoryComponent.prototype.isLoaded$;
        /**
         * When "Order Return" feature is enabled, this component becomes one tab in
         * TabParagraphContainerComponent. This can be read from TabParagraphContainer.
         * @type {?}
         */
        OrderHistoryComponent.prototype.tabTitleParam$;
        /**
         * @type {?}
         * @private
         */
        OrderHistoryComponent.prototype.routing;
        /**
         * @type {?}
         * @private
         */
        OrderHistoryComponent.prototype.userOrderService;
        /**
         * @type {?}
         * @private
         */
        OrderHistoryComponent.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$6 = { cxRoute: 'orders' };
    var OrderHistoryModule = /** @class */ (function () {
        function OrderHistoryModule() {
        }
        OrderHistoryModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [core$1.AuthGuard, CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$6,
                                },
                            ]),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    AccountOrderHistoryComponent: {
                                        component: OrderHistoryComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            router.RouterModule,
                            forms.FormsModule,
                            ngSelect.NgSelectModule,
                            ListNavigationModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                        ],
                        declarations: [OrderHistoryComponent],
                        exports: [OrderHistoryComponent],
                        providers: [core$1.UserService],
                        entryComponents: [OrderHistoryComponent],
                    },] }
        ];
        return OrderHistoryModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReturnRequestService = /** @class */ (function () {
        function ReturnRequestService(routingService, returnRequestService, globalMessageService) {
            this.routingService = routingService;
            this.returnRequestService = returnRequestService;
            this.globalMessageService = globalMessageService;
        }
        Object.defineProperty(ReturnRequestService.prototype, "isCancelling$", {
            get: /**
             * @return {?}
             */
            function () {
                return this.returnRequestService.getCancelReturnRequestLoading();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ReturnRequestService.prototype, "isCancelSuccess$", {
            get: /**
             * @return {?}
             */
            function () {
                return this.returnRequestService.getCancelReturnRequestSuccess();
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        ReturnRequestService.prototype.getReturnRequest = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return rxjs.combineLatest([
                this.routingService.getRouterState(),
                this.returnRequestService.getOrderReturnRequest(),
                this.returnRequestService.getReturnRequestLoading(),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 3), routingState = _b[0], returnRequest = _b[1], isLoading = _b[2];
                return [
                    routingState.state.params['returnCode'],
                    returnRequest,
                    isLoading,
                ];
            })), operators.filter((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), returnCode = _b[0];
                return Boolean(returnCode);
            })), operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 3), returnCode = _b[0], returnRequest = _b[1], isLoading = _b[2];
                if ((returnRequest === undefined || returnRequest.rma !== returnCode) &&
                    !isLoading) {
                    _this.returnRequestService.loadOrderReturnRequestDetail(returnCode);
                }
            })), operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), _ = _b[0], returnRequest = _b[1];
                return returnRequest;
            })), operators.filter(Boolean), operators.distinctUntilChanged());
        };
        /**
         * @return {?}
         */
        ReturnRequestService.prototype.clearReturnRequest = /**
         * @return {?}
         */
        function () {
            this.returnRequestService.clearOrderReturnRequestDetail();
        };
        /**
         * @param {?} returnRequestCode
         * @return {?}
         */
        ReturnRequestService.prototype.cancelReturnRequest = /**
         * @param {?} returnRequestCode
         * @return {?}
         */
        function (returnRequestCode) {
            this.returnRequestService.cancelOrderReturnRequest(returnRequestCode, {
                status: 'CANCELLING',
            });
        };
        /**
         * @param {?} rma
         * @return {?}
         */
        ReturnRequestService.prototype.cancelSuccess = /**
         * @param {?} rma
         * @return {?}
         */
        function (rma) {
            this.returnRequestService.resetCancelReturnRequestProcessState();
            this.globalMessageService.add({
                key: 'returnRequest.cancelSuccess',
                params: { rma: rma },
            }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
            this.routingService.go({
                cxRoute: 'orders',
            });
        };
        /**
         * @return {?}
         */
        ReturnRequestService.prototype.backToList = /**
         * @return {?}
         */
        function () {
            this.routingService.go({ cxRoute: 'orders' }, null, {
                state: {
                    activeTab: 1,
                },
            });
        };
        ReturnRequestService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        ReturnRequestService.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.OrderReturnRequestService },
            { type: core$1.GlobalMessageService }
        ]; };
        /** @nocollapse */ ReturnRequestService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ReturnRequestService_Factory() { return new ReturnRequestService(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.OrderReturnRequestService), core.ɵɵinject(core$1.GlobalMessageService)); }, token: ReturnRequestService, providedIn: "root" });
        return ReturnRequestService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        ReturnRequestService.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        ReturnRequestService.prototype.returnRequestService;
        /**
         * @type {?}
         * @protected
         */
        ReturnRequestService.prototype.globalMessageService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReturnRequestOverviewComponent = /** @class */ (function () {
        function ReturnRequestOverviewComponent(returnRequestService) {
            var _this = this;
            this.returnRequestService = returnRequestService;
            this.returnRequest$ = this.returnRequestService
                .getReturnRequest()
                .pipe(operators.tap((/**
             * @param {?} returnRequest
             * @return {?}
             */
            function (returnRequest) { return (_this.rma = returnRequest.rma); })));
            this.isCancelling$ = this.returnRequestService.isCancelling$;
        }
        /**
         * @return {?}
         */
        ReturnRequestOverviewComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscription = this.returnRequestService.isCancelSuccess$.subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) {
                if (success) {
                    _this.returnRequestService.cancelSuccess(_this.rma);
                }
            }));
        };
        /**
         * @param {?} returnRequestCode
         * @return {?}
         */
        ReturnRequestOverviewComponent.prototype.cancelReturn = /**
         * @param {?} returnRequestCode
         * @return {?}
         */
        function (returnRequestCode) {
            this.returnRequestService.cancelReturnRequest(returnRequestCode);
        };
        /**
         * @return {?}
         */
        ReturnRequestOverviewComponent.prototype.back = /**
         * @return {?}
         */
        function () {
            this.returnRequestService.backToList();
        };
        /**
         * @return {?}
         */
        ReturnRequestOverviewComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        ReturnRequestOverviewComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-return-request-overview',
                        template: "<ng-container *ngIf=\"returnRequest$ | async as returnRequest\">\n  <div class=\"cx-nav row\">\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <button (click)=\"back()\" class=\"btn btn-block btn-action\">\n        {{ 'common.back' | cxTranslate }}\n      </button>\n    </div>\n\n    <div class=\"col-xs-12 col-md-4 col-lg-3\">\n      <button\n        *ngIf=\"returnRequest.cancellable\"\n        class=\"btn btn-block btn-primary\"\n        (click)=\"cancelReturn(returnRequest.rma)\"\n        [disabled]=\"isCancelling$ | async\"\n      >\n        {{ 'returnRequest.cancel' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n  <div class=\"cx-header row\">\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'returnRequest.returnRequestId' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">{{ returnRequest.rma }}</div>\n    </div>\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'returnRequest.orderCode' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">{{ returnRequest.order?.code }}</div>\n    </div>\n    <div class=\"cx-detail col-sm-12 col-md-4\">\n      <div class=\"cx-detail-label\">\n        {{ 'returnRequest.status' | cxTranslate }}\n      </div>\n      <div class=\"cx-detail-value\">\n        {{\n          'returnRequestList.statusDisplay'\n            | cxTranslate: { context: returnRequest.status }\n        }}\n      </div>\n    </div>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ReturnRequestOverviewComponent.ctorParameters = function () { return [
            { type: ReturnRequestService }
        ]; };
        return ReturnRequestOverviewComponent;
    }());
    if (false) {
        /** @type {?} */
        ReturnRequestOverviewComponent.prototype.rma;
        /** @type {?} */
        ReturnRequestOverviewComponent.prototype.subscription;
        /** @type {?} */
        ReturnRequestOverviewComponent.prototype.returnRequest$;
        /** @type {?} */
        ReturnRequestOverviewComponent.prototype.isCancelling$;
        /**
         * @type {?}
         * @protected
         */
        ReturnRequestOverviewComponent.prototype.returnRequestService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReturnRequestItemsComponent = /** @class */ (function () {
        function ReturnRequestItemsComponent(returnRequestService) {
            this.returnRequestService = returnRequestService;
            this.returnRequest$ = this.returnRequestService.getReturnRequest();
        }
        ReturnRequestItemsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-return-request-items',
                        template: "<ng-container *ngIf=\"returnRequest$ | async as returnRequest\">\n  <div class=\"d-none d-md-block d-lg-block d-xl-block\">\n    <div class=\"cx-item-list-header row\">\n      <div class=\"cx-item-list-desc col-md-5 col-lg-5 col-xl-6\">\n        {{ 'returnRequest.item' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-price col-md-2 col-lg-2 col-xl-2\">\n        {{ 'returnRequest.itemPrice' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-qty col-md-3 col-lg-3 col-xl-2\">\n        {{ 'returnRequest.returnQty' | cxTranslate }}\n      </div>\n      <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n        {{ 'returnRequest.total' | cxTranslate }}\n      </div>\n    </div>\n  </div>\n\n  <div\n    class=\"cx-item-list-row\"\n    *ngFor=\"let returnEntry of returnRequest.returnEntries; let i = index\"\n  >\n    <div class=\"cx-item-list-items\">\n      <div class=\"row\">\n        <!-- Item Image -->\n        <div class=\"col-2 cx-image-container\">\n          <cx-media\n            [container]=\"returnEntry.orderEntry?.product.images?.PRIMARY\"\n            format=\"thumbnail\"\n          ></cx-media>\n        </div>\n        <!-- Item Information -->\n        <div class=\"cx-info col-10\">\n          <div class=\"cx-info-container row \">\n            <!-- Item Description -->\n            <div class=\"col-md-3 col-lg-4 col-xl-5\">\n              <div *ngIf=\"returnEntry.orderEntry?.product.name\" class=\"cx-name\">\n                {{ returnEntry.orderEntry?.product.name }}\n              </div>\n              <div *ngIf=\"returnEntry.orderEntry?.product.code\" class=\"cx-code\">\n                {{ 'cartItems.id' | cxTranslate }}\n                {{ returnEntry.orderEntry?.product.code }}\n              </div>\n              <!-- Variants -->\n              <ng-container *cxFeatureLevel=\"'!1.5'\">\n                <div\n                  *ngFor=\"\n                    let variant of returnEntry.orderEntry?.product\n                      .variantOptionQualifiers\n                  \"\n                  class=\"cx-property\"\n                >\n                  <div class=\"cx-label\">{{ variant.name }}</div>\n                  <div class=\"cx-value\">{{ variant.value }}</div>\n                </div>\n              </ng-container>\n              <ng-container *cxFeatureLevel=\"'1.5'\">\n                <div\n                  *ngFor=\"\n                    let variant of (returnEntry.orderEntry?.product\n                      .baseOptions)[0]?.selected?.variantOptionQualifiers\n                  \"\n                  class=\"cx-property\"\n                >\n                  <div class=\"cx-label\" *ngIf=\"variant.name\">\n                    {{ variant.name }}:\n                  </div>\n                  <div class=\"cx-value\" *ngIf=\"variant.value\">\n                    {{ variant.value }}\n                  </div>\n                </div>\n              </ng-container>\n            </div>\n            <!-- Item Price -->\n            <div\n              *ngIf=\"returnEntry.orderEntry?.basePrice\"\n              class=\"cx-price col-md-3 col-lg-2 col-xl-2\"\n            >\n              <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n                {{ 'returnRequest.itemPrice' | cxTranslate }}\n              </div>\n              <div class=\"cx-value\">\n                {{ returnEntry.orderEntry?.basePrice?.formattedValue }}\n              </div>\n            </div>\n            <!-- return Quantity -->\n            <div class=\"cx-quantity col-md-3 col-lg-3 col-xl-3\">\n              <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n                {{ 'returnRequest.returnQty' | cxTranslate }}\n              </div>\n              <div class=\"cx-value\">\n                {{ returnEntry.expectedQuantity }}\n              </div>\n            </div>\n            <!-- Total Price -->\n            <div class=\"cx-total col-md-3 col-lg-3 col-xl-2\">\n              <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n                {{ 'returnRequest.total' | cxTranslate }}\n              </div>\n              <div class=\"cx-value\">\n                {{ returnEntry.refundAmount?.formattedValue }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ReturnRequestItemsComponent.ctorParameters = function () { return [
            { type: ReturnRequestService }
        ]; };
        return ReturnRequestItemsComponent;
    }());
    if (false) {
        /** @type {?} */
        ReturnRequestItemsComponent.prototype.returnRequest$;
        /**
         * @type {?}
         * @protected
         */
        ReturnRequestItemsComponent.prototype.returnRequestService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReturnRequestTotalsComponent = /** @class */ (function () {
        function ReturnRequestTotalsComponent(returnRequestService) {
            this.returnRequestService = returnRequestService;
            this.returnRequest$ = this.returnRequestService.getReturnRequest();
        }
        /**
         * @return {?}
         */
        ReturnRequestTotalsComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.returnRequestService.clearReturnRequest();
        };
        ReturnRequestTotalsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-return-request-totals',
                        template: "<ng-container *ngIf=\"returnRequest$ | async as returnRequest\">\n  <div class=\"row justify-content-end\">\n    <div class=\"cx-summary col-sm-12 col-md-6 col-lg-5 col-xl-4\">\n      <h4>{{ 'returnRequest.summary' | cxTranslate }}</h4>\n      <div class=\"cx-summary-row\">\n        <div class=\"col-6 cx-summary-label\">\n          {{ 'returnRequest.subtotal' | cxTranslate }}\n        </div>\n        <div class=\"col-6 cx-summary-amount\">\n          {{ returnRequest.subTotal?.formattedValue }}\n        </div>\n      </div>\n      <div class=\"cx-summary-row\">\n        <div class=\"col-6 cx-summary-label\">\n          {{ 'returnRequest.deliveryCode' | cxTranslate }}\n        </div>\n        <div class=\"col-6 cx-summary-amount\">\n          {{ returnRequest.deliveryCost?.formattedValue }}\n        </div>\n      </div>\n      <div class=\"cx-summary-row cx-summary-total\">\n        <div class=\"col-6 cx-summary-label\">\n          {{ 'returnRequest.estimatedRefund' | cxTranslate }}\n        </div>\n        <div class=\"col-6 cx-summary-amount\">\n          {{ returnRequest.totalPrice?.formattedValue }}\n        </div>\n      </div>\n      <div class=\"cx-summary-row cx-footnote\">\n        {{ 'returnRequest.note' | cxTranslate }}\n      </div>\n    </div>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ReturnRequestTotalsComponent.ctorParameters = function () { return [
            { type: ReturnRequestService }
        ]; };
        return ReturnRequestTotalsComponent;
    }());
    if (false) {
        /** @type {?} */
        ReturnRequestTotalsComponent.prototype.returnRequest$;
        /**
         * @type {?}
         * @protected
         */
        ReturnRequestTotalsComponent.prototype.returnRequestService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var components = [
        ReturnRequestOverviewComponent,
        ReturnRequestItemsComponent,
        ReturnRequestTotalsComponent,
    ];
    var ɵ0$7 = { cxRoute: 'returnRequestDetails' };
    var ReturnRequestDetailModule = /** @class */ (function () {
        function ReturnRequestDetailModule() {
        }
        ReturnRequestDetailModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [core$1.AuthGuard, CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$7,
                                },
                            ]),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ReturnRequestOverviewComponent: {
                                        component: ReturnRequestOverviewComponent,
                                    },
                                    ReturnRequestItemsComponent: {
                                        component: ReturnRequestItemsComponent,
                                    },
                                    ReturnRequestTotalsComponent: {
                                        component: ReturnRequestTotalsComponent,
                                    },
                                },
                            }))),
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                            MediaModule,
                            core$1.FeaturesConfigModule,
                        ],
                        declarations: __spread(components),
                        exports: __spread(components),
                        entryComponents: __spread(components),
                    },] }
        ];
        return ReturnRequestDetailModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderReturnRequestListComponent = /** @class */ (function () {
        function OrderReturnRequestListComponent(returnRequestService, translation) {
            var _this = this;
            this.returnRequestService = returnRequestService;
            this.translation = translation;
            this.PAGE_SIZE = 5;
            this.returnRequests$ = this.returnRequestService.getOrderReturnRequestList(this.PAGE_SIZE).pipe(operators.tap((/**
             * @param {?} requestList
             * @return {?}
             */
            function (requestList) {
                if (requestList.pagination) {
                    _this.sortType = requestList.pagination.sort;
                }
            })));
            /**
             * When "Order Return" feature is enabled, this component becomes one tab in
             * TabParagraphContainerComponent. This can be read from TabParagraphContainer.
             */
            this.tabTitleParam$ = this.returnRequests$.pipe(operators.map((/**
             * @param {?} returnRequests
             * @return {?}
             */
            function (returnRequests) { return returnRequests.pagination.totalResults; })), operators.filter((/**
             * @param {?} totalResults
             * @return {?}
             */
            function (totalResults) { return totalResults !== undefined; })), operators.take(1));
        }
        /**
         * @return {?}
         */
        OrderReturnRequestListComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.returnRequestService.clearOrderReturnRequestList();
        };
        /**
         * @param {?} sortCode
         * @return {?}
         */
        OrderReturnRequestListComponent.prototype.changeSortCode = /**
         * @param {?} sortCode
         * @return {?}
         */
        function (sortCode) {
            /** @type {?} */
            var event = {
                sortCode: sortCode,
                currentPage: 0,
            };
            this.sortType = sortCode;
            this.fetchReturnRequests(event);
        };
        /**
         * @param {?} page
         * @return {?}
         */
        OrderReturnRequestListComponent.prototype.pageChange = /**
         * @param {?} page
         * @return {?}
         */
        function (page) {
            /** @type {?} */
            var event = {
                sortCode: this.sortType,
                currentPage: page,
            };
            this.fetchReturnRequests(event);
        };
        /**
         * @return {?}
         */
        OrderReturnRequestListComponent.prototype.getSortLabels = /**
         * @return {?}
         */
        function () {
            return rxjs.combineLatest([
                this.translation.translate('sorting.date'),
                this.translation.translate('sorting.rma'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), textByDate = _b[0], textByRma = _b[1];
                return {
                    byDate: textByDate,
                    byRMA: textByRma,
                };
            })));
        };
        /**
         * @private
         * @param {?} event
         * @return {?}
         */
        OrderReturnRequestListComponent.prototype.fetchReturnRequests = /**
         * @private
         * @param {?} event
         * @return {?}
         */
        function (event) {
            this.returnRequestService.loadOrderReturnRequestList(this.PAGE_SIZE, event.currentPage, event.sortCode);
        };
        OrderReturnRequestListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-return-request-list',
                        template: "<ng-container *ngIf=\"returnRequests$ | async as returnRequests\">\n  <div class=\"container\">\n    <!-- BODY -->\n    <div class=\"cx-order-history-body\">\n      <ng-container *ngIf=\"returnRequests.pagination.totalResults > 0\">\n        <!-- Select Form and Pagination Top -->\n        <div class=\"cx-order-history-sort top row\">\n          <div\n            class=\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\"\n          >\n            <cx-sorting\n              [sortOptions]=\"returnRequests.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"returnRequests.pagination.sort\"\n              placeholder=\"{{\n                'returnRequestList.sortByMostRecent' | cxTranslate\n              }}\"\n            ></cx-sorting>\n          </div>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"returnRequests.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n        <!-- TABLE -->\n        <table class=\"table cx-order-history-table\">\n          <thead class=\"cx-order-history-thead-mobile\">\n            <th scope=\"col\">\n              {{ 'returnRequestList.returnRequestId' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'returnRequestList.orderId' | cxTranslate }}</th>\n            <th scope=\"col\">\n              {{ 'returnRequestList.date' | cxTranslate }}\n            </th>\n            <th scope=\"col\">{{ 'returnRequestList.status' | cxTranslate }}</th>\n          </thead>\n          <tbody>\n            <tr *ngFor=\"let return of returnRequests.returnRequests\">\n              <td class=\"cx-order-history-code\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.returnRequestId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'returnRequestDetails',\n                      params: return\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ return?.rma }}</a\n                >\n              </td>\n              <td class=\"cx-order-history-code\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.orderId' | cxTranslate }}\n                </div>\n                <a\n                  [routerLink]=\"\n                    {\n                      cxRoute: 'orderDetails',\n                      params: return?.order\n                    } | cxUrl\n                  \"\n                  class=\"cx-order-history-value\"\n                >\n                  {{ return?.order?.code }}</a\n                >\n              </td>\n\n              <td class=\"cx-order-history-placed\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.date' | cxTranslate }}\n                </div>\n                {{ return?.creationTime | cxDate: 'longDate' }}\n              </td>\n              <td class=\"cx-order-history-status\">\n                <div class=\"d-md-none cx-order-history-label\">\n                  {{ 'returnRequestList.status' | cxTranslate }}\n                </div>\n                {{\n                  'returnRequestList.statusDisplay'\n                    | cxTranslate: { context: return?.status }\n                }}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <!-- Select Form and Pagination Bottom -->\n        <div class=\"cx-order-history-sort bottom row\">\n          <div\n            class=\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\"\n          >\n            <cx-sorting\n              [sortOptions]=\"returnRequests.sorts\"\n              [sortLabels]=\"getSortLabels() | async\"\n              (sortListEvent)=\"changeSortCode($event)\"\n              [selectedOption]=\"returnRequests.pagination.sort\"\n              placeholder=\"{{\n                'returnRequestList.sortByMostRecent' | cxTranslate\n              }}\"\n            ></cx-sorting>\n          </div>\n          <div class=\"cx-order-history-pagination\">\n            <cx-pagination\n              [pagination]=\"returnRequests.pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n      </ng-container>\n    </div>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        OrderReturnRequestListComponent.ctorParameters = function () { return [
            { type: core$1.OrderReturnRequestService },
            { type: core$1.TranslationService }
        ]; };
        return OrderReturnRequestListComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        OrderReturnRequestListComponent.prototype.PAGE_SIZE;
        /** @type {?} */
        OrderReturnRequestListComponent.prototype.sortType;
        /** @type {?} */
        OrderReturnRequestListComponent.prototype.returnRequests$;
        /**
         * When "Order Return" feature is enabled, this component becomes one tab in
         * TabParagraphContainerComponent. This can be read from TabParagraphContainer.
         * @type {?}
         */
        OrderReturnRequestListComponent.prototype.tabTitleParam$;
        /**
         * @type {?}
         * @private
         */
        OrderReturnRequestListComponent.prototype.returnRequestService;
        /**
         * @type {?}
         * @private
         */
        OrderReturnRequestListComponent.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ReturnRequestListModule = /** @class */ (function () {
        function ReturnRequestListModule() {
        }
        ReturnRequestListModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    OrderReturnRequestListComponent: {
                                        component: OrderReturnRequestListComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            router.RouterModule,
                            ListNavigationModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                        ],
                        declarations: [OrderReturnRequestListComponent],
                        exports: [OrderReturnRequestListComponent],
                        entryComponents: [OrderReturnRequestListComponent],
                    },] }
        ];
        return ReturnRequestListModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderModule = /** @class */ (function () {
        function OrderModule() {
        }
        OrderModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            OrderHistoryModule,
                            OrderDetailsModule,
                            OrderCancellationModule,
                            OrderReturnModule,
                            ReturnRequestListModule,
                            ReturnRequestDetailModule,
                        ],
                    },] }
        ];
        return OrderModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PaymentMethodsComponent = /** @class */ (function () {
        function PaymentMethodsComponent(userPaymentService, translation) {
            this.userPaymentService = userPaymentService;
            this.translation = translation;
            this.iconTypes = ICON_TYPE;
        }
        /**
         * @return {?}
         */
        PaymentMethodsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.paymentMethods$ = this.userPaymentService.getPaymentMethods().pipe(operators.tap((/**
             * @param {?} paymentDetails
             * @return {?}
             */
            function (paymentDetails) {
                // Set first payment method to DEFAULT if none is set
                if (paymentDetails.length > 0 &&
                    !paymentDetails.find((/**
                     * @param {?} paymentDetail
                     * @return {?}
                     */
                    function (paymentDetail) { return paymentDetail.defaultPayment; }))) {
                    _this.setDefaultPaymentMethod(paymentDetails[0]);
                }
            })));
            this.editCard = null;
            this.loading$ = this.userPaymentService.getPaymentMethodsLoading();
            this.userPaymentService.loadPaymentMethods();
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        PaymentMethodsComponent.prototype.getCardContent = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var _this = this;
            var defaultPayment = _a.defaultPayment, accountHolderName = _a.accountHolderName, expiryMonth = _a.expiryMonth, expiryYear = _a.expiryYear, cardNumber = _a.cardNumber, cardType = _a.cardType;
            return rxjs.combineLatest([
                this.translation.translate('paymentCard.setAsDefault'),
                this.translation.translate('common.delete'),
                this.translation.translate('paymentCard.deleteConfirmation'),
                this.translation.translate('paymentCard.expires', {
                    month: expiryMonth,
                    year: expiryYear,
                }),
                this.translation.translate('paymentCard.defaultPaymentMethod'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 5), textSetAsDefault = _b[0], textDelete = _b[1], textDeleteConfirmation = _b[2], textExpires = _b[3], textDefaultPaymentMethod = _b[4];
                /** @type {?} */
                var actions = [];
                if (!defaultPayment) {
                    actions.push({ name: textSetAsDefault, event: 'default' });
                }
                actions.push({ name: textDelete, event: 'edit' });
                /** @type {?} */
                var card = {
                    header: defaultPayment ? textDefaultPaymentMethod : null,
                    textBold: accountHolderName,
                    text: [cardNumber, textExpires],
                    actions: actions,
                    deleteMsg: textDeleteConfirmation,
                    img: _this.getCardIcon(cardType.code),
                };
                return card;
            })));
        };
        /**
         * @param {?} paymentMethod
         * @return {?}
         */
        PaymentMethodsComponent.prototype.deletePaymentMethod = /**
         * @param {?} paymentMethod
         * @return {?}
         */
        function (paymentMethod) {
            this.userPaymentService.deletePaymentMethod(paymentMethod.id);
            this.editCard = null;
        };
        /**
         * @param {?} paymentMethod
         * @return {?}
         */
        PaymentMethodsComponent.prototype.setEdit = /**
         * @param {?} paymentMethod
         * @return {?}
         */
        function (paymentMethod) {
            this.editCard = paymentMethod.id;
        };
        /**
         * @return {?}
         */
        PaymentMethodsComponent.prototype.cancelCard = /**
         * @return {?}
         */
        function () {
            this.editCard = null;
        };
        /**
         * @param {?} paymentMethod
         * @return {?}
         */
        PaymentMethodsComponent.prototype.setDefaultPaymentMethod = /**
         * @param {?} paymentMethod
         * @return {?}
         */
        function (paymentMethod) {
            this.userPaymentService.setPaymentMethodAsDefault(paymentMethod.id);
        };
        /**
         * @param {?} code
         * @return {?}
         */
        PaymentMethodsComponent.prototype.getCardIcon = /**
         * @param {?} code
         * @return {?}
         */
        function (code) {
            /** @type {?} */
            var ccIcon;
            if (code === 'visa') {
                ccIcon = this.iconTypes.VISA;
            }
            else if (code === 'master' || code === 'mastercard_eurocard') {
                ccIcon = this.iconTypes.MASTER_CARD;
            }
            else if (code === 'diners') {
                ccIcon = this.iconTypes.DINERS_CLUB;
            }
            else if (code === 'amex') {
                ccIcon = this.iconTypes.AMEX;
            }
            else {
                ccIcon = this.iconTypes.CREDIT_CARD;
            }
            return ccIcon;
        };
        PaymentMethodsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-payment-methods',
                        template: "<ng-container *ngIf=\"paymentMethods$ | async as paymentMethods\">\n  <div class=\"cx-payment container\">\n    <div class=\"cx-header\">\n      <h3>{{ 'paymentMethods.paymentMethods' | cxTranslate }}</h3>\n    </div>\n\n    <div class=\"cx-body\">\n      <div class=\"cx-msg\">\n        {{\n          'paymentMethods.newPaymentMethodsAreAddedDuringCheckout' | cxTranslate\n        }}\n      </div>\n      <div *ngIf=\"loading$ | async; else cards\"><cx-spinner></cx-spinner></div>\n      <ng-template #cards>\n        <div class=\"cx-existing row\">\n          <div\n            class=\"cx-payment-card col-sm-12 col-md-12 col-lg-6\"\n            *ngFor=\"let paymentMethod of paymentMethods\"\n          >\n            <div class=\"cx-payment-inner\">\n              <cx-card\n                [border]=\"true\"\n                [fitToContainer]=\"true\"\n                [content]=\"getCardContent(paymentMethod) | async\"\n                (deleteCard)=\"deletePaymentMethod(paymentMethod)\"\n                (setDefaultCard)=\"setDefaultPaymentMethod(paymentMethod)\"\n                (editCard)=\"setEdit(paymentMethod)\"\n                [editMode]=\"editCard === paymentMethod.id\"\n                (cancelCard)=\"cancelCard()\"\n              ></cx-card>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        PaymentMethodsComponent.ctorParameters = function () { return [
            { type: core$1.UserPaymentService },
            { type: core$1.TranslationService }
        ]; };
        return PaymentMethodsComponent;
    }());
    if (false) {
        /** @type {?} */
        PaymentMethodsComponent.prototype.paymentMethods$;
        /** @type {?} */
        PaymentMethodsComponent.prototype.editCard;
        /** @type {?} */
        PaymentMethodsComponent.prototype.iconTypes;
        /** @type {?} */
        PaymentMethodsComponent.prototype.loading$;
        /**
         * @type {?}
         * @private
         */
        PaymentMethodsComponent.prototype.userPaymentService;
        /**
         * @type {?}
         * @private
         */
        PaymentMethodsComponent.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var PaymentMethodsModule = /** @class */ (function () {
        function PaymentMethodsModule() {
        }
        PaymentMethodsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CardModule,
                            SpinnerModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    AccountPaymentDetailsComponent: {
                                        component: PaymentMethodsComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                        ],
                        providers: [core$1.UserService],
                        declarations: [PaymentMethodsComponent],
                        exports: [PaymentMethodsComponent],
                        entryComponents: [PaymentMethodsComponent],
                    },] }
        ];
        return PaymentMethodsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ResetPasswordFormComponent = /** @class */ (function () {
        function ResetPasswordFormComponent(fb, routingService, userService) {
            this.fb = fb;
            this.routingService = routingService;
            this.userService = userService;
            this.subscription = new rxjs.Subscription();
            this.submited = false;
            this.form = this.fb.group({
                password: [
                    '',
                    [forms.Validators.required, CustomFormValidators.passwordValidator],
                ],
                repassword: ['', [forms.Validators.required]],
            }, { validator: this.matchPassword });
        }
        /**
         * @return {?}
         */
        ResetPasswordFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscription.add(this.routingService
                .getRouterState()
                .subscribe((/**
             * @param {?} state
             * @return {?}
             */
            function (state) { return (_this.token = state.state.queryParams['token']); })));
            this.subscription.add(this.userService.isPasswordReset().subscribe((/**
             * @param {?} reset
             * @return {?}
             */
            function (reset) {
                if (reset) {
                    _this.routingService.go({ cxRoute: 'login' });
                }
            })));
        };
        /**
         * @return {?}
         */
        ResetPasswordFormComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        /**
         * @return {?}
         */
        ResetPasswordFormComponent.prototype.resetPassword = /**
         * @return {?}
         */
        function () {
            this.submited = true;
            if (this.form.invalid) {
                return;
            }
            /** @type {?} */
            var password = this.form.value['password'];
            this.userService.resetPassword(this.token, password);
        };
        /**
         * @private
         * @param {?} ac
         * @return {?}
         */
        ResetPasswordFormComponent.prototype.matchPassword = /**
         * @private
         * @param {?} ac
         * @return {?}
         */
        function (ac) {
            if (ac.get('password').value !== ac.get('repassword').value) {
                return { NotEqual: true };
            }
        };
        ResetPasswordFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-reset-password-form',
                        template: "<form\n  (submit)=\"resetPassword()\"\n  [formGroup]=\"form\"\n  class=\"cx-reset-password-form-component\"\n>\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'register.newPassword' | cxTranslate\n      }}</span>\n      <input\n        class=\"form-control\"\n        [class.is-invalid]=\"\n          form.get('password').invalid &&\n          (submited ||\n            (form.get('password').dirty && form.get('password').touched))\n        \"\n        type=\"password\"\n        name=\"password\"\n        placeholder=\"{{ 'register.password.placeholder' | cxTranslate }}\"\n        formControlName=\"password\"\n      />\n      <div\n        class=\"invalid-feedback\"\n        *ngIf=\"\n          form.get('password').invalid &&\n          (submited ||\n            (form.get('password').dirty && form.get('password').touched))\n        \"\n      >\n        <span>{{ 'register.passwordMinRequirements' | cxTranslate }}</span>\n      </div>\n    </label>\n  </div>\n\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'register.passwordMinRequirements' | cxTranslate\n      }}</span>\n      <input\n        class=\"form-control\"\n        [class.is-invalid]=\"\n          form.hasError('NotEqual') &&\n          (submited ||\n            (form.get('repassword').dirty && form.get('repassword').touched))\n        \"\n        type=\"password\"\n        name=\"confirmpassword\"\n        placeholder=\"{{ 'register.confirmPassword.placeholder' | cxTranslate }}\"\n        formControlName=\"repassword\"\n      />\n      <div\n        class=\"invalid-feedback\"\n        *ngIf=\"\n          form.hasError('NotEqual') &&\n          (submited ||\n            (form.get('repassword').dirty && form.get('repassword').touched))\n        \"\n      >\n        <span>{{ 'register.bothPasswordMustMatch' | cxTranslate }}</span>\n      </div>\n    </label>\n  </div>\n\n  <div class=\"form-group\">\n    <button class=\"btn btn-block btn-primary\" type=\"submit\">\n      {{ 'register.resetPassword' | cxTranslate }}\n    </button>\n  </div>\n</form>\n"
                    }] }
        ];
        /** @nocollapse */
        ResetPasswordFormComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder },
            { type: core$1.RoutingService },
            { type: core$1.UserService }
        ]; };
        return ResetPasswordFormComponent;
    }());
    if (false) {
        /** @type {?} */
        ResetPasswordFormComponent.prototype.token;
        /** @type {?} */
        ResetPasswordFormComponent.prototype.subscription;
        /** @type {?} */
        ResetPasswordFormComponent.prototype.submited;
        /** @type {?} */
        ResetPasswordFormComponent.prototype.form;
        /**
         * @type {?}
         * @private
         */
        ResetPasswordFormComponent.prototype.fb;
        /**
         * @type {?}
         * @private
         */
        ResetPasswordFormComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        ResetPasswordFormComponent.prototype.userService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ResetPasswordModule = /** @class */ (function () {
        function ResetPasswordModule() {
        }
        ResetPasswordModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ResetPasswordComponent: {
                                        component: ResetPasswordFormComponent,
                                        guards: [core$1.NotAuthGuard],
                                    },
                                },
                            }))),
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            router.RouterModule,
                            core$1.I18nModule,
                        ],
                        declarations: [ResetPasswordFormComponent],
                        exports: [ResetPasswordFormComponent],
                        entryComponents: [ResetPasswordFormComponent],
                    },] }
        ];
        return ResetPasswordModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdateEmailFormComponent = /** @class */ (function () {
        function UpdateEmailFormComponent(fb) {
            this.fb = fb;
            this.submited = false;
            this.saveEmail = new core.EventEmitter();
            this.cancelEmail = new core.EventEmitter();
            this.form = this.fb.group({
                email: ['', [forms.Validators.required, CustomFormValidators.emailValidator]],
                confirmEmail: ['', [forms.Validators.required]],
                password: ['', [forms.Validators.required]],
            }, { validator: this.matchEmail });
        }
        /**
         * @param {?} formControlName
         * @return {?}
         */
        UpdateEmailFormComponent.prototype.isEmailConfirmNotValid = /**
         * @param {?} formControlName
         * @return {?}
         */
        function (formControlName) {
            return (this.form.hasError('NotEqual') &&
                (this.submited ||
                    (this.form.get(formControlName).touched &&
                        this.form.get(formControlName).dirty)));
        };
        /**
         * @param {?} formControlName
         * @return {?}
         */
        UpdateEmailFormComponent.prototype.isNotValid = /**
         * @param {?} formControlName
         * @return {?}
         */
        function (formControlName) {
            return FormUtils.isNotValidField(this.form, formControlName, this.submited);
        };
        /**
         * @return {?}
         */
        UpdateEmailFormComponent.prototype.onSubmit = /**
         * @return {?}
         */
        function () {
            this.submited = true;
            if (this.form.invalid) {
                return;
            }
            /** @type {?} */
            var newUid = this.form.value.confirmEmail;
            /** @type {?} */
            var password = this.form.value.password;
            this.saveEmail.emit({ newUid: newUid, password: password });
        };
        /**
         * @return {?}
         */
        UpdateEmailFormComponent.prototype.onCancel = /**
         * @return {?}
         */
        function () {
            this.cancelEmail.emit();
        };
        /**
         * @private
         * @param {?} ac
         * @return {?}
         */
        UpdateEmailFormComponent.prototype.matchEmail = /**
         * @private
         * @param {?} ac
         * @return {?}
         */
        function (ac) {
            if (ac.get('email').value !== ac.get('confirmEmail').value) {
                return { NotEqual: true };
            }
        };
        UpdateEmailFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-update-email-form',
                        template: "<form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n  <div class=\"form-group row\">\n    <div class=\"col-md-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updateEmailForm.newEmailAddress.label' | cxTranslate\n        }}</span>\n        <input\n          type=\"email\"\n          name=\"email\"\n          formControlName=\"email\"\n          placeholder=\"{{\n            'updateEmailForm.newEmailAddress.placeholder' | cxTranslate\n          }}\"\n          class=\"form-control\"\n          [class.is-invalid]=\"isNotValid('email')\"\n        />\n        <div class=\"invalid-feedback\" *ngIf=\"isNotValid('email')\">\n          <span>{{ 'updateEmailForm.enterValidEmail' | cxTranslate }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n\n  <div class=\"form-group row\">\n    <div class=\"col-sm-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updateEmailForm.confirmNewEmailAddress.label' | cxTranslate\n        }}</span>\n        <input\n          type=\"email\"\n          name=\"confirmEmail\"\n          formControlName=\"confirmEmail\"\n          placeholder=\"{{\n            'updateEmailForm.confirmNewEmailAddress.placeholder' | cxTranslate\n          }}\"\n          class=\"form-control\"\n          [class.is-invalid]=\"isEmailConfirmNotValid('confirmEmail')\"\n        />\n        <div\n          class=\"invalid-feedback\"\n          *ngIf=\"isEmailConfirmNotValid('confirmEmail')\"\n        >\n          <span>{{ 'updateEmailForm.bothEmailMustMatch' | cxTranslate }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n\n  <div class=\"form-group row\">\n    <div class=\"col-sm-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updateEmailForm.password.label' | cxTranslate\n        }}</span>\n        <input\n          type=\"password\"\n          name=\"password\"\n          formControlName=\"password\"\n          placeholder=\"{{\n            'updateEmailForm.password.placeholder' | cxTranslate\n          }}\"\n          class=\"form-control\"\n          [class.is-invalid]=\"isNotValid('password')\"\n          autocomplete=\"new-password\"\n        />\n        <div class=\"invalid-feedback\" *ngIf=\"isNotValid('password')\">\n          <span>{{ 'updateEmailForm.pleaseInputPassword' | cxTranslate }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n\n  <div class=\"form-group row\">\n    <div class=\"col-lg-6\">\n      <button\n        class=\"btn btn-block btn-secondary\"\n        type=\"button\"\n        (click)=\"onCancel()\"\n      >\n        {{ 'common.cancel' | cxTranslate }}\n      </button>\n    </div>\n    <div class=\"col-lg-6\">\n      <button class=\"btn btn-block btn-primary\" type=\"submit\">\n        {{ 'common.save' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</form>\n"
                    }] }
        ];
        /** @nocollapse */
        UpdateEmailFormComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder }
        ]; };
        UpdateEmailFormComponent.propDecorators = {
            saveEmail: [{ type: core.Output }],
            cancelEmail: [{ type: core.Output }]
        };
        return UpdateEmailFormComponent;
    }());
    if (false) {
        /** @type {?} */
        UpdateEmailFormComponent.prototype.submited;
        /** @type {?} */
        UpdateEmailFormComponent.prototype.saveEmail;
        /** @type {?} */
        UpdateEmailFormComponent.prototype.cancelEmail;
        /** @type {?} */
        UpdateEmailFormComponent.prototype.form;
        /**
         * @type {?}
         * @private
         */
        UpdateEmailFormComponent.prototype.fb;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdateEmailComponent = /** @class */ (function () {
        function UpdateEmailComponent(routingService, globalMessageService, userService, authService) {
            this.routingService = routingService;
            this.globalMessageService = globalMessageService;
            this.userService = userService;
            this.authService = authService;
            this.subscription = new rxjs.Subscription();
        }
        /**
         * @return {?}
         */
        UpdateEmailComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.userService.resetUpdateEmailResultState();
            this.subscription.add(this.userService
                .getUpdateEmailResultSuccess()
                .subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) { return _this.onSuccess(success); })));
            this.isLoading$ = this.userService.getUpdateEmailResultLoading();
        };
        /**
         * @return {?}
         */
        UpdateEmailComponent.prototype.onCancel = /**
         * @return {?}
         */
        function () {
            this.routingService.go({ cxRoute: 'home' });
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        UpdateEmailComponent.prototype.onSubmit = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var newUid = _a.newUid, password = _a.password;
            this.newUid = newUid;
            this.userService.updateEmail(password, newUid);
        };
        /**
         * @param {?} success
         * @return {?}
         */
        UpdateEmailComponent.prototype.onSuccess = /**
         * @param {?} success
         * @return {?}
         */
        function (success) {
            if (success) {
                this.globalMessageService.add({
                    key: 'updateEmailForm.emailUpdateSuccess',
                    params: { newUid: this.newUid },
                }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
                this.authService.logout();
                this.routingService.go({ cxRoute: 'login' }, null, {
                    state: {
                        newUid: this.newUid,
                    },
                });
            }
        };
        /**
         * @return {?}
         */
        UpdateEmailComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
            this.userService.resetUpdateEmailResultState();
        };
        UpdateEmailComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-update-email',
                        template: "<ng-container>\n  <div *ngIf=\"isLoading$ | async; else loaded\">\n    <div class=\"cx-spinner\">\n      <cx-spinner> </cx-spinner>\n    </div>\n  </div>\n\n  <ng-template #loaded>\n    <div class=\"container\">\n      <div class=\"row d-flex justify-content-center\">\n        <cx-update-email-form\n          class=\"col-md-6\"\n          (saveEmail)=\"onSubmit($event)\"\n          (cancelEmail)=\"onCancel()\"\n        >\n        </cx-update-email-form>\n      </div>\n    </div>\n  </ng-template>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        UpdateEmailComponent.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.GlobalMessageService },
            { type: core$1.UserService },
            { type: core$1.AuthService }
        ]; };
        return UpdateEmailComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        UpdateEmailComponent.prototype.subscription;
        /**
         * @type {?}
         * @private
         */
        UpdateEmailComponent.prototype.newUid;
        /** @type {?} */
        UpdateEmailComponent.prototype.isLoading$;
        /**
         * @type {?}
         * @private
         */
        UpdateEmailComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        UpdateEmailComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        UpdateEmailComponent.prototype.userService;
        /**
         * @type {?}
         * @private
         */
        UpdateEmailComponent.prototype.authService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdateEmailModule = /** @class */ (function () {
        function UpdateEmailModule() {
        }
        UpdateEmailModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    UpdateEmailComponent: {
                                        component: UpdateEmailComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            SpinnerModule,
                            core$1.I18nModule,
                        ],
                        declarations: [UpdateEmailFormComponent, UpdateEmailComponent],
                        exports: [UpdateEmailComponent, UpdateEmailFormComponent],
                        entryComponents: [UpdateEmailComponent],
                    },] }
        ];
        return UpdateEmailModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdatePasswordFormComponent = /** @class */ (function () {
        function UpdatePasswordFormComponent(fb) {
            this.fb = fb;
            this.submitClicked = false;
            this.submited = new core.EventEmitter();
            this.cancelled = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        UpdatePasswordFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.form = this.fb.group({
                oldPassword: ['', [forms.Validators.required]],
                newPassword: [
                    '',
                    [forms.Validators.required, CustomFormValidators.passwordValidator],
                ],
                newPasswordConfirm: ['', [forms.Validators.required]],
            }, { validator: this.matchPassword });
        };
        /**
         * @param {?} formControlName
         * @return {?}
         */
        UpdatePasswordFormComponent.prototype.isNotValid = /**
         * @param {?} formControlName
         * @return {?}
         */
        function (formControlName) {
            return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);
        };
        /**
         * @return {?}
         */
        UpdatePasswordFormComponent.prototype.isPasswordConfirmNotValid = /**
         * @return {?}
         */
        function () {
            return (this.form.hasError('NotEqual') &&
                (this.submitClicked ||
                    (this.form.get('newPasswordConfirm').touched &&
                        this.form.get('newPasswordConfirm').dirty)));
        };
        /**
         * @return {?}
         */
        UpdatePasswordFormComponent.prototype.onSubmit = /**
         * @return {?}
         */
        function () {
            this.submitClicked = true;
            if (this.form.invalid) {
                return;
            }
            this.submited.emit({
                oldPassword: this.form.value.oldPassword,
                newPassword: this.form.value.newPassword,
            });
        };
        /**
         * @return {?}
         */
        UpdatePasswordFormComponent.prototype.onCancel = /**
         * @return {?}
         */
        function () {
            this.cancelled.emit();
        };
        /**
         * @private
         * @param {?} abstractControl
         * @return {?}
         */
        UpdatePasswordFormComponent.prototype.matchPassword = /**
         * @private
         * @param {?} abstractControl
         * @return {?}
         */
        function (abstractControl) {
            if (abstractControl.get('newPassword').value !==
                abstractControl.get('newPasswordConfirm').value) {
                return { NotEqual: true };
            }
            return null;
        };
        UpdatePasswordFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-update-password-form',
                        template: "<form\n  (ngSubmit)=\"onSubmit()\"\n  [formGroup]=\"form\"\n  class=\"cx-update-password-component \"\n>\n  <div class=\"form-group row\">\n    <div class=\"col-md-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updatePasswordForm.oldPassword.label' | cxTranslate\n        }}</span>\n        <input\n          class=\"form-control\"\n          [class.is-invalid]=\"isNotValid('oldPassword')\"\n          type=\"password\"\n          name=\"oldPassword\"\n          placeholder=\"{{\n            'updatePasswordForm.oldPassword.placeholder' | cxTranslate\n          }}\"\n          formControlName=\"oldPassword\"\n        />\n        <div class=\"invalid-feedback\" *ngIf=\"isNotValid('oldPassword')\">\n          <span>{{\n            'updatePasswordForm.oldPasswordIsRequired' | cxTranslate\n          }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n  <div class=\"form-group row\">\n    <div class=\"col-md-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updatePasswordForm.newPassword.label' | cxTranslate\n        }}</span>\n        <input\n          class=\"form-control\"\n          [class.is-invalid]=\"isNotValid('newPassword')\"\n          type=\"password\"\n          name=\"newPassword\"\n          placeholder=\"{{\n            'updatePasswordForm.newPassword.placeholder' | cxTranslate\n          }}\"\n          formControlName=\"newPassword\"\n        />\n        <div class=\"invalid-feedback\" *ngIf=\"isNotValid('newPassword')\">\n          <span>{{\n            'updatePasswordForm.passwordMinRequirements' | cxTranslate\n          }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n  <div class=\"form-group row\">\n    <div class=\"col-md-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updatePasswordForm.confirmPassword.label' | cxTranslate\n        }}</span>\n        <input\n          class=\"form-control\"\n          [class.is-invalid]=\"isPasswordConfirmNotValid()\"\n          type=\"password\"\n          name=\"newPasswordConfirm\"\n          placeholder=\"{{\n            'updatePasswordForm.confirmPassword.placeholder' | cxTranslate\n          }}\"\n          formControlName=\"newPasswordConfirm\"\n        />\n        <div class=\"invalid-feedback\" *ngIf=\"isPasswordConfirmNotValid()\">\n          <span>{{\n            'updatePasswordForm.bothPasswordMustMatch' | cxTranslate\n          }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n  <div class=\"form-group row\">\n    <div class=\"col-lg-6 col-md-12\">\n      <button\n        class=\"btn btn-block btn-secondary\"\n        type=\"button\"\n        (click)=\"onCancel()\"\n      >\n        {{ 'common.cancel' | cxTranslate }}\n      </button>\n    </div>\n    <div class=\"col-lg-6 col-md-12\">\n      <button class=\"btn btn-block btn-primary\" type=\"submit\">\n        {{ 'common.save' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</form>\n"
                    }] }
        ];
        /** @nocollapse */
        UpdatePasswordFormComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder }
        ]; };
        UpdatePasswordFormComponent.propDecorators = {
            submited: [{ type: core.Output }],
            cancelled: [{ type: core.Output }]
        };
        return UpdatePasswordFormComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        UpdatePasswordFormComponent.prototype.submitClicked;
        /** @type {?} */
        UpdatePasswordFormComponent.prototype.form;
        /** @type {?} */
        UpdatePasswordFormComponent.prototype.submited;
        /** @type {?} */
        UpdatePasswordFormComponent.prototype.cancelled;
        /**
         * @type {?}
         * @private
         */
        UpdatePasswordFormComponent.prototype.fb;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdatePasswordComponent = /** @class */ (function () {
        function UpdatePasswordComponent(routingService, userService, globalMessageService) {
            this.routingService = routingService;
            this.userService = userService;
            this.globalMessageService = globalMessageService;
            this.subscription = new rxjs.Subscription();
        }
        /**
         * @return {?}
         */
        UpdatePasswordComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.userService.resetUpdatePasswordProcessState();
            this.loading$ = this.userService.getUpdatePasswordResultLoading();
            this.subscription.add(this.userService
                .getUpdatePasswordResultSuccess()
                .subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) { return _this.onSuccess(success); })));
        };
        /**
         * @param {?} success
         * @return {?}
         */
        UpdatePasswordComponent.prototype.onSuccess = /**
         * @param {?} success
         * @return {?}
         */
        function (success) {
            if (success) {
                this.globalMessageService.add({ key: 'updatePasswordForm.passwordUpdateSuccess' }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
                this.routingService.go({ cxRoute: 'home' });
            }
        };
        /**
         * @return {?}
         */
        UpdatePasswordComponent.prototype.onCancel = /**
         * @return {?}
         */
        function () {
            this.routingService.go({ cxRoute: 'home' });
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        UpdatePasswordComponent.prototype.onSubmit = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var oldPassword = _a.oldPassword, newPassword = _a.newPassword;
            this.userService.updatePassword(oldPassword, newPassword);
        };
        /**
         * @return {?}
         */
        UpdatePasswordComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
            this.userService.resetUpdatePasswordProcessState();
        };
        UpdatePasswordComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-update-password',
                        template: "<ng-container>\n  <div *ngIf=\"loading$ | async; else updateForm\">\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n\n  <ng-template #updateForm>\n    <div class=\"container\">\n      <div class=\"row d-flex justify-content-center\">\n        <cx-update-password-form\n          class=\"col-md-6\"\n          (cancelled)=\"onCancel()\"\n          (submited)=\"onSubmit($event)\"\n        ></cx-update-password-form>\n      </div>\n    </div>\n  </ng-template>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        UpdatePasswordComponent.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.UserService },
            { type: core$1.GlobalMessageService }
        ]; };
        return UpdatePasswordComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        UpdatePasswordComponent.prototype.subscription;
        /** @type {?} */
        UpdatePasswordComponent.prototype.loading$;
        /**
         * @type {?}
         * @private
         */
        UpdatePasswordComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        UpdatePasswordComponent.prototype.userService;
        /**
         * @type {?}
         * @private
         */
        UpdatePasswordComponent.prototype.globalMessageService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdatePasswordModule = /** @class */ (function () {
        function UpdatePasswordModule() {
        }
        UpdatePasswordModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    UpdatePasswordComponent: {
                                        component: UpdatePasswordComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            SpinnerModule,
                            core$1.I18nModule,
                        ],
                        declarations: [UpdatePasswordComponent, UpdatePasswordFormComponent],
                        exports: [UpdatePasswordComponent, UpdatePasswordFormComponent],
                        entryComponents: [UpdatePasswordComponent],
                    },] }
        ];
        return UpdatePasswordModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdateProfileFormComponent = /** @class */ (function () {
        function UpdateProfileFormComponent(fb) {
            this.fb = fb;
            this.submited = new core.EventEmitter();
            this.cancelled = new core.EventEmitter();
            this.form = this.fb.group({
                titleCode: [''],
                firstName: ['', forms.Validators.required],
                lastName: ['', forms.Validators.required],
            });
            this.submitClicked = false;
        }
        /**
         * @return {?}
         */
        UpdateProfileFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            if (this.user) {
                this.form.patchValue(this.user);
            }
        };
        /**
         * @param {?} formControlName
         * @return {?}
         */
        UpdateProfileFormComponent.prototype.isNotValid = /**
         * @param {?} formControlName
         * @return {?}
         */
        function (formControlName) {
            return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);
        };
        /**
         * @return {?}
         */
        UpdateProfileFormComponent.prototype.onSubmit = /**
         * @return {?}
         */
        function () {
            this.submitClicked = true;
            if (this.form.invalid) {
                return;
            }
            this.submited.emit({
                userUpdates: __assign({}, this.form.value),
            });
        };
        /**
         * @return {?}
         */
        UpdateProfileFormComponent.prototype.onCancel = /**
         * @return {?}
         */
        function () {
            this.cancelled.emit();
        };
        UpdateProfileFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-update-profile-form',
                        template: "<form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n  <div class=\"form-group row\">\n    <div class=\"col-md-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updateProfileForm.title' | cxTranslate\n        }}</span>\n        <select formControlName=\"titleCode\" class=\"form-control\">\n          <option value=\"\">{{ 'updateProfileForm.none' | cxTranslate }}</option>\n          <option *ngFor=\"let title of titles\" [value]=\"title.code\">{{\n            title.name\n          }}</option>\n        </select>\n      </label>\n    </div>\n  </div>\n  <div class=\"form-group row\">\n    <div class=\"col-md-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updateProfileForm.firstName.label' | cxTranslate\n        }}</span>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          name=\"firstName\"\n          placeholder=\"{{\n            'updateProfileForm.firstName.placeholder' | cxTranslate\n          }}\"\n          formControlName=\"firstName\"\n          [class.is-invalid]=\"isNotValid('firstName')\"\n        />\n        <div class=\"invalid-feedback\" *ngIf=\"isNotValid('firstName')\">\n          <span>{{\n            'updateProfileForm.firstNameIsRequired' | cxTranslate\n          }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n  <div class=\"form-group row\">\n    <div class=\"col-md-12\">\n      <label>\n        <span class=\"label-content\">{{\n          'updateProfileForm.lastName.label' | cxTranslate\n        }}</span>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          name=\"lastName\"\n          placeholder=\"{{\n            'updateProfileForm.lastName.placeholder' | cxTranslate\n          }}\"\n          formControlName=\"lastName\"\n          [class.is-invalid]=\"isNotValid('lastName')\"\n        />\n        <div class=\"invalid-feedback\" *ngIf=\"isNotValid('lastName')\">\n          <span>{{\n            'updateProfileForm.lastNameIsRequired' | cxTranslate\n          }}</span>\n        </div>\n      </label>\n    </div>\n  </div>\n\n  <div class=\"form-group row\">\n    <div class=\"col-lg-6 col-md-12\">\n      <button\n        class=\"btn btn-block btn-secondary\"\n        type=\"button\"\n        (click)=\"onCancel()\"\n      >\n        {{ 'common.cancel' | cxTranslate }}\n      </button>\n    </div>\n    <div class=\"col-lg-6 col-md-12\">\n      <button class=\"btn btn-block btn-primary\" type=\"submit\">\n        {{ 'common.save' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</form>\n"
                    }] }
        ];
        /** @nocollapse */
        UpdateProfileFormComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder }
        ]; };
        UpdateProfileFormComponent.propDecorators = {
            user: [{ type: core.Input }],
            titles: [{ type: core.Input }],
            submited: [{ type: core.Output }],
            cancelled: [{ type: core.Output }]
        };
        return UpdateProfileFormComponent;
    }());
    if (false) {
        /** @type {?} */
        UpdateProfileFormComponent.prototype.user;
        /** @type {?} */
        UpdateProfileFormComponent.prototype.titles;
        /** @type {?} */
        UpdateProfileFormComponent.prototype.submited;
        /** @type {?} */
        UpdateProfileFormComponent.prototype.cancelled;
        /** @type {?} */
        UpdateProfileFormComponent.prototype.form;
        /**
         * @type {?}
         * @private
         */
        UpdateProfileFormComponent.prototype.submitClicked;
        /**
         * @type {?}
         * @private
         */
        UpdateProfileFormComponent.prototype.fb;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdateProfileComponent = /** @class */ (function () {
        function UpdateProfileComponent(routingService, userService, globalMessageService) {
            this.routingService = routingService;
            this.userService = userService;
            this.globalMessageService = globalMessageService;
            this.subscription = new rxjs.Subscription();
        }
        /**
         * @return {?}
         */
        UpdateProfileComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            // reset the previous form processing state
            this.userService.resetUpdatePersonalDetailsProcessingState();
            this.user$ = this.userService.get();
            this.titles$ = this.userService.getTitles().pipe(operators.tap((/**
             * @param {?} titles
             * @return {?}
             */
            function (titles) {
                if (Object.keys(titles).length === 0) {
                    _this.userService.loadTitles();
                }
            })));
            this.loading$ = this.userService.getUpdatePersonalDetailsResultLoading();
            this.subscription.add(this.userService
                .getUpdatePersonalDetailsResultSuccess()
                .subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) { return _this.onSuccess(success); })));
        };
        /**
         * @param {?} success
         * @return {?}
         */
        UpdateProfileComponent.prototype.onSuccess = /**
         * @param {?} success
         * @return {?}
         */
        function (success) {
            if (success) {
                this.globalMessageService.add({ key: 'updateProfileForm.profileUpdateSuccess' }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
                this.routingService.go({ cxRoute: 'home' });
            }
        };
        /**
         * @return {?}
         */
        UpdateProfileComponent.prototype.onCancel = /**
         * @return {?}
         */
        function () {
            this.routingService.go({ cxRoute: 'home' });
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        UpdateProfileComponent.prototype.onSubmit = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var userUpdates = _a.userUpdates;
            this.userService.updatePersonalDetails(userUpdates);
        };
        /**
         * @return {?}
         */
        UpdateProfileComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
            // clean up the state
            this.userService.resetUpdatePersonalDetailsProcessingState();
        };
        UpdateProfileComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-update-profile',
                        template: "<ng-container>\n  <div *ngIf=\"loading$ | async; else updateForm\">\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n\n  <ng-template #updateForm>\n    <div class=\"container\">\n      <div class=\"row d-flex justify-content-center\">\n        <cx-update-profile-form\n          *ngIf=\"(user$ | async)?.uid\"\n          class=\"col-md-6\"\n          [user]=\"user$ | async\"\n          [titles]=\"titles$ | async\"\n          (cancelled)=\"onCancel()\"\n          (submited)=\"onSubmit($event)\"\n        ></cx-update-profile-form>\n      </div>\n    </div>\n  </ng-template>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        UpdateProfileComponent.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.UserService },
            { type: core$1.GlobalMessageService }
        ]; };
        return UpdateProfileComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        UpdateProfileComponent.prototype.subscription;
        /** @type {?} */
        UpdateProfileComponent.prototype.titles$;
        /** @type {?} */
        UpdateProfileComponent.prototype.user$;
        /** @type {?} */
        UpdateProfileComponent.prototype.loading$;
        /**
         * @type {?}
         * @private
         */
        UpdateProfileComponent.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        UpdateProfileComponent.prototype.userService;
        /**
         * @type {?}
         * @private
         */
        UpdateProfileComponent.prototype.globalMessageService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UpdateProfileModule = /** @class */ (function () {
        function UpdateProfileModule() {
        }
        UpdateProfileModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    UpdateProfileComponent: {
                                        component: UpdateProfileComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            SpinnerModule,
                            core$1.I18nModule,
                        ],
                        declarations: [UpdateProfileComponent, UpdateProfileFormComponent],
                        exports: [UpdateProfileComponent, UpdateProfileFormComponent],
                        entryComponents: [UpdateProfileComponent],
                    },] }
        ];
        return UpdateProfileModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MyCouponsComponentService = /** @class */ (function () {
        function MyCouponsComponentService(routingService, translation) {
            this.routingService = routingService;
            this.translation = translation;
            this.RELEVANCE = ':relevance';
            this.CUSTOMER_COUPON_CODE = ':customerCouponCode:';
        }
        /**
         * @param {?} coupon
         * @return {?}
         */
        MyCouponsComponentService.prototype.launchSearchPage = /**
         * @param {?} coupon
         * @return {?}
         */
        function (coupon) {
            this.routingService.go({
                cxRoute: 'search',
                params: { query: this.buildSearchParam(coupon) },
            }, { couponcode: coupon.couponId });
        };
        /**
         * @private
         * @param {?} coupon
         * @return {?}
         */
        MyCouponsComponentService.prototype.buildSearchParam = /**
         * @private
         * @param {?} coupon
         * @return {?}
         */
        function (coupon) {
            return coupon.allProductsApplicable
                ? this.RELEVANCE
                : this.RELEVANCE + this.CUSTOMER_COUPON_CODE + coupon.couponId;
        };
        /**
         * @return {?}
         */
        MyCouponsComponentService.prototype.getSortLabels = /**
         * @return {?}
         */
        function () {
            return rxjs.combineLatest([
                this.translation.translate('myCoupons.startDateAsc'),
                this.translation.translate('myCoupons.startDateDesc'),
                this.translation.translate('myCoupons.endDateAsc'),
                this.translation.translate('myCoupons.endDateDesc'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 4), textByStartDateAsc = _b[0], textByStartDateDesc = _b[1], textByEndDateAsc = _b[2], textByEndDateDesc = _b[3];
                return {
                    byStartDateAsc: textByStartDateAsc,
                    byStartDateDesc: textByStartDateDesc,
                    byEndDateAsc: textByEndDateAsc,
                    byEndDateDesc: textByEndDateDesc,
                };
            })));
        };
        MyCouponsComponentService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        MyCouponsComponentService.ctorParameters = function () { return [
            { type: core$1.RoutingService },
            { type: core$1.TranslationService }
        ]; };
        /** @nocollapse */ MyCouponsComponentService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function MyCouponsComponentService_Factory() { return new MyCouponsComponentService(core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.TranslationService)); }, token: MyCouponsComponentService, providedIn: "root" });
        return MyCouponsComponentService;
    }());
    if (false) {
        /** @type {?} */
        MyCouponsComponentService.prototype.sortLabels;
        /**
         * @type {?}
         * @protected
         */
        MyCouponsComponentService.prototype.RELEVANCE;
        /**
         * @type {?}
         * @protected
         */
        MyCouponsComponentService.prototype.CUSTOMER_COUPON_CODE;
        /**
         * @type {?}
         * @protected
         */
        MyCouponsComponentService.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        MyCouponsComponentService.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MyCouponsComponent = /** @class */ (function () {
        function MyCouponsComponent(couponService, myCouponsComponentService) {
            this.couponService = couponService;
            this.myCouponsComponentService = myCouponsComponentService;
            this.iconTypes = ICON_TYPE;
            this.subscriptions = new rxjs.Subscription();
            this.PAGE_SIZE = 10;
            this.sortMapping = {
                byStartDateAsc: 'startDate:asc',
                byStartDateDesc: 'startDate:desc',
                byEndDateAsc: 'endDate:asc',
                byEndDateDesc: 'endDate:desc',
            };
            this.sort = 'byStartDateAsc';
            this.sortOptions = [
                {
                    code: 'byStartDateAsc',
                    selected: false,
                },
                {
                    code: 'byStartDateDesc',
                    selected: false,
                },
                {
                    code: 'byEndDateAsc',
                    selected: false,
                },
                {
                    code: 'byEndDateDesc',
                    selected: false,
                },
            ];
        }
        /**
         * @return {?}
         */
        MyCouponsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.couponService.loadCustomerCoupons(this.PAGE_SIZE);
            this.couponResult$ = this.couponService
                .getCustomerCoupons(this.PAGE_SIZE)
                .pipe(operators.tap((/**
             * @param {?} coupons
             * @return {?}
             */
            function (coupons) {
                return (_this.pagination = {
                    currentPage: coupons.pagination.page,
                    pageSize: coupons.pagination.count,
                    totalPages: coupons.pagination.totalPages,
                    totalResults: coupons.pagination.totalCount,
                    sort: _this.sort,
                });
            })));
            this.couponsLoading$ = this.couponService.getCustomerCouponsLoading();
            this.couponSubscriptionLoading$ = rxjs.combineLatest([
                this.couponService.getSubscribeCustomerCouponResultLoading(),
                this.couponService.getUnsubscribeCustomerCouponResultLoading(),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), subscribing = _b[0], unsubscribing = _b[1];
                return subscribing || unsubscribing;
            })));
            this.sortLabels = this.myCouponsComponentService.getSortLabels();
            this.subscriptions
                .add(this.couponService
                .getSubscribeCustomerCouponResultError()
                .subscribe((/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subscriptionFail(error);
            })))
                .add(this.couponService
                .getUnsubscribeCustomerCouponResultError()
                .subscribe((/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                _this.subscriptionFail(error);
            })));
        };
        /**
         * @private
         * @param {?} error
         * @return {?}
         */
        MyCouponsComponent.prototype.subscriptionFail = /**
         * @private
         * @param {?} error
         * @return {?}
         */
        function (error) {
            if (error) {
                this.couponService.loadCustomerCoupons(this.PAGE_SIZE);
            }
        };
        /**
         * @param {?} sort
         * @return {?}
         */
        MyCouponsComponent.prototype.sortChange = /**
         * @param {?} sort
         * @return {?}
         */
        function (sort) {
            this.sort = sort;
            this.couponService.loadCustomerCoupons(this.PAGE_SIZE, this.pagination.currentPage, this.sortMapping[sort]);
        };
        /**
         * @param {?} page
         * @return {?}
         */
        MyCouponsComponent.prototype.pageChange = /**
         * @param {?} page
         * @return {?}
         */
        function (page) {
            this.couponService.loadCustomerCoupons(this.PAGE_SIZE, page, this.sortMapping[this.sort]);
        };
        /**
         * @param {?} __0
         * @return {?}
         */
        MyCouponsComponent.prototype.notificationChange = /**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var couponId = _a.couponId, notification = _a.notification;
            if (notification) {
                this.couponService.subscribeCustomerCoupon(couponId);
            }
            else {
                this.couponService.unsubscribeCustomerCoupon(couponId);
            }
        };
        /**
         * @return {?}
         */
        MyCouponsComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscriptions.unsubscribe();
        };
        MyCouponsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-my-coupons',
                        template: "<div class=\"cx-section\">\n  <ng-container *ngIf=\"!(couponsLoading$ | async); else loading\">\n    <ng-container *ngIf=\"couponResult$ | async as couponResult\">\n      <div class=\"cx-my-coupons-header\">\n        <h3>{{ 'myCoupons.myCoupons' | cxTranslate }}</h3>\n      </div>\n\n      <ng-container\n        *ngIf=\"couponResult.pagination.totalCount > 0; else noCoupons\"\n      >\n        <div class=\"cx-my-coupons-sort top row\">\n          <div\n            class=\"cx-my-coupons-form-group form-group col-sm-12 col-md-4 col-lg-4\"\n          >\n            <cx-sorting\n              [sortOptions]=\"sortOptions\"\n              [sortLabels]=\"sortLabels | async\"\n              (sortListEvent)=\"sortChange($event)\"\n              [selectedOption]=\"sort\"\n            >\n            </cx-sorting>\n          </div>\n          <div class=\"cx-my-coupons-pagination cx-mycoupon-thead-mobile\">\n            <cx-pagination\n              [pagination]=\"pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n\n        <div class=\"row cx-coupon-deck\">\n          <div\n            *ngFor=\"let coupon of couponResult.coupons\"\n            class=\"col-md-6 cx-coupon-card\"\n          >\n            <cx-coupon-card\n              [coupon]=\"coupon\"\n              [couponSubscriptionLoading$]=\"couponSubscriptionLoading$\"\n              (notificationChanged)=\"notificationChange($event)\"\n            ></cx-coupon-card>\n          </div>\n        </div>\n\n        <div class=\"cx-my-coupons-sort bottom row\">\n          <div\n            class=\"cx-my-coupons-form-group form-group cx-mycoupon-thead-mobile col-sm-12 col-md-4 col-lg-4\"\n          >\n            <cx-sorting\n              [sortOptions]=\"sortOptions\"\n              [sortLabels]=\"sortLabels | async\"\n              (sortListEvent)=\"sortChange($event)\"\n              [selectedOption]=\"sort\"\n              placeholder=\"{{ 'myCoupons.sortByMostRecent' | cxTranslate }}\"\n            >\n            </cx-sorting>\n          </div>\n          <div class=\"cx-my-coupons-pagination\">\n            <cx-pagination\n              [pagination]=\"pagination\"\n              (viewPageEvent)=\"pageChange($event)\"\n            ></cx-pagination>\n          </div>\n        </div>\n        <div class=\"cx-my-coupons-notes\">\n          <span>\n            <cx-icon [type]=\"iconTypes.INFO\"></cx-icon>\n            {{ 'myCoupons.notesPreffix' | cxTranslate\n            }}<a [routerLink]=\"['/my-account/notification-preference']\">{{\n              'myCoupons.notesLink' | cxTranslate\n            }}</a\n            >{{ 'myCoupons.notesSuffix' | cxTranslate }}</span\n          >\n        </div>\n      </ng-container>\n    </ng-container>\n\n    <ng-template #noCoupons>\n      <section>\n        <p class=\"cx-section-msg\">\n          {{ 'myCoupons.noCouponsMessage' | cxTranslate }}\n        </p>\n      </section>\n    </ng-template>\n  </ng-container>\n\n  <ng-template #loading>\n    <div class=\"col-md-12 cx-coupon-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </ng-template>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        MyCouponsComponent.ctorParameters = function () { return [
            { type: core$1.CustomerCouponService },
            { type: MyCouponsComponentService }
        ]; };
        return MyCouponsComponent;
    }());
    if (false) {
        /** @type {?} */
        MyCouponsComponent.prototype.couponResult$;
        /** @type {?} */
        MyCouponsComponent.prototype.couponsLoading$;
        /** @type {?} */
        MyCouponsComponent.prototype.couponSubscriptionLoading$;
        /** @type {?} */
        MyCouponsComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @private
         */
        MyCouponsComponent.prototype.subscriptions;
        /**
         * @type {?}
         * @private
         */
        MyCouponsComponent.prototype.PAGE_SIZE;
        /**
         * @type {?}
         * @private
         */
        MyCouponsComponent.prototype.sortMapping;
        /** @type {?} */
        MyCouponsComponent.prototype.sort;
        /** @type {?} */
        MyCouponsComponent.prototype.sortOptions;
        /** @type {?} */
        MyCouponsComponent.prototype.pagination;
        /** @type {?} */
        MyCouponsComponent.prototype.sortLabels;
        /**
         * @type {?}
         * @protected
         */
        MyCouponsComponent.prototype.couponService;
        /**
         * @type {?}
         * @protected
         */
        MyCouponsComponent.prototype.myCouponsComponentService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CouponDialogComponent = /** @class */ (function () {
        function CouponDialogComponent(modalService) {
            this.modalService = modalService;
            this.iconTypes = ICON_TYPE;
        }
        /**
         * @param {?=} reason
         * @return {?}
         */
        CouponDialogComponent.prototype.dismissModal = /**
         * @param {?=} reason
         * @return {?}
         */
        function (reason) {
            this.modalService.dismissActiveModal(reason);
        };
        CouponDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-coupon-dialog',
                        template: "<div #dialog>\n  <!-- Modal Header -->\n\n  <div class=\"cx-dialog-header modal-header\">\n    <div class=\"cx-dialog-title modal-title\">\n      {{ 'myCoupons.dialogTitle' | cxTranslate }}\n    </div>\n    <button\n      type=\"button\"\n      class=\"close\"\n      aria-label=\"Close\"\n      (click)=\"dismissModal('Cross click')\"\n    >\n      <span aria-hidden=\"true\">\n        <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n      </span>\n    </button>\n  </div>\n  <!-- Modal Body -->\n  <div class=\"cx-dialog-body modal-body\">\n    <div class=\"cx-dialog-row\">\n      <div class=\"cx-dialog-item col-sm-12 col-md-12\">\n        <div class=\"cx-coupon-card-head\">\n          <span class=\"card-label-bold cx-coupon-card-id\">{{\n            coupon?.couponId\n          }}</span>\n          <span>: {{ coupon?.name }}</span>\n        </div>\n        <div class=\"cx-coupon-description\">{{ coupon?.description }}</div>\n\n        <div class=\"cx-coupon-dialog-date\">\n          <p>{{ 'myCoupons.effectiveTitle' | cxTranslate }}</p>\n          <div class=\"cx-coupon-date\">\n            {{ coupon?.startDate | cxDate: 'medium' }} -\n            {{ coupon?.endDate | cxDate: 'medium' }}\n          </div>\n        </div>\n\n        <div class=\"cx-coupon-dialog-status\">\n          <p>{{ 'myCoupons.status' | cxTranslate }}</p>\n          <div class=\"cx-coupon-status {{ coupon?.status | lowercase }}\">\n            {{ 'myCoupons.' + coupon?.status | cxTranslate }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        CouponDialogComponent.ctorParameters = function () { return [
            { type: ModalService }
        ]; };
        CouponDialogComponent.propDecorators = {
            dialog: [{ type: core.ViewChild, args: ['dialog', { static: false, read: core.ElementRef },] }]
        };
        return CouponDialogComponent;
    }());
    if (false) {
        /** @type {?} */
        CouponDialogComponent.prototype.iconTypes;
        /** @type {?} */
        CouponDialogComponent.prototype.coupon;
        /** @type {?} */
        CouponDialogComponent.prototype.dialog;
        /**
         * @type {?}
         * @protected
         */
        CouponDialogComponent.prototype.modalService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CouponCardComponent = /** @class */ (function () {
        function CouponCardComponent(modalService, myCouponsComponentService) {
            this.modalService = modalService;
            this.myCouponsComponentService = myCouponsComponentService;
            this.notificationChanged = new core.EventEmitter();
        }
        /**
         * @return {?}
         */
        CouponCardComponent.prototype.onSubscriptionChange = /**
         * @return {?}
         */
        function () {
            this.notificationChanged.emit({
                couponId: this.coupon.couponId,
                notification: !this.coupon.notificationOn,
            });
        };
        /**
         * @return {?}
         */
        CouponCardComponent.prototype.readMore = /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var modalInstance;
            this.modalRef = this.modalService.open(CouponDialogComponent, {
                centered: true,
                size: 'lg',
            });
            modalInstance = this.modalRef.componentInstance;
            modalInstance.coupon = this.coupon;
        };
        /**
         * @return {?}
         */
        CouponCardComponent.prototype.findProducts = /**
         * @return {?}
         */
        function () {
            this.myCouponsComponentService.launchSearchPage(this.coupon);
        };
        CouponCardComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-coupon-card',
                        template: "<div class=\"card\">\n  <div class=\"card-body cx-card-body\">\n    <div class=\"cx-coupon-data\">\n      <div class=\"cx-coupon-card-row top\">\n        <div class=\"cx-coupon-card-head\">\n          <span class=\"card-label-bold cx-coupon-card-id\">{{\n            coupon?.couponId\n          }}</span>\n          <span>: {{ coupon?.name }}</span>\n        </div>\n\n        <div class=\"cx-coupon-status {{ coupon?.status | lowercase }}\">\n          {{ 'myCoupons.' + coupon?.status | cxTranslate }}\n        </div>\n      </div>\n\n      <div class=\"cx-coupon-card-date\">\n        <p>{{ 'myCoupons.effectiveTitle' | cxTranslate }}</p>\n        <div class=\"cx-coupon-date\">\n          <div class=\"cx-coupon-date-start\">\n            {{ coupon?.startDate | cxDate: 'medium' }} -&nbsp;\n          </div>\n          <div class=\"cx-coupon-date-end\">\n            {{ coupon?.endDate | cxDate: 'medium' }}\n          </div>\n        </div>\n      </div>\n\n      <a (click)=\"readMore()\" class=\"cx-card-read-more\">{{\n        'myCoupons.readMore' | cxTranslate\n      }}</a>\n\n      <div class=\"cx-coupon-card-row bottom\">\n        <div class=\"cx-coupon-notification form-check\">\n          <label>\n            <input\n              type=\"checkbox\"\n              class=\"form-check-input\"\n              [checked]=\"coupon?.notificationOn\"\n              [class.disabled]=\"couponSubscriptionLoading$ | async\"\n              [disabled]=\"couponSubscriptionLoading$ | async\"\n              (change)=\"onSubscriptionChange()\"\n            />\n            <span class=\"form-check-label\">\n              {{ 'myCoupons.notification' | cxTranslate }}\n            </span>\n          </label>\n        </div>\n\n        <div class=\"cx-coupon-find-product col-lg-6 col-md-12 col-sm-6\">\n          <button class=\"btn btn-block btn-action\" (click)=\"findProducts()\">\n            {{ 'myCoupons.findProducts' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        CouponCardComponent.ctorParameters = function () { return [
            { type: ModalService },
            { type: MyCouponsComponentService }
        ]; };
        CouponCardComponent.propDecorators = {
            coupon: [{ type: core.Input }],
            couponSubscriptionLoading$: [{ type: core.Input }],
            notificationChanged: [{ type: core.Output }]
        };
        return CouponCardComponent;
    }());
    if (false) {
        /** @type {?} */
        CouponCardComponent.prototype.coupon;
        /** @type {?} */
        CouponCardComponent.prototype.couponSubscriptionLoading$;
        /** @type {?} */
        CouponCardComponent.prototype.modalRef;
        /** @type {?} */
        CouponCardComponent.prototype.notificationChanged;
        /**
         * @type {?}
         * @protected
         */
        CouponCardComponent.prototype.modalService;
        /**
         * @type {?}
         * @protected
         */
        CouponCardComponent.prototype.myCouponsComponentService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CouponClaimComponent = /** @class */ (function () {
        function CouponClaimComponent(couponService, routingService, messageService) {
            this.couponService = couponService;
            this.routingService = routingService;
            this.messageService = messageService;
        }
        /**
         * @return {?}
         */
        CouponClaimComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.routingService
                .getRouterState()
                .subscribe((/**
             * @param {?} k
             * @return {?}
             */
            function (k) {
                /** @type {?} */
                var couponCode = k.state.params.couponCode;
                if (couponCode) {
                    _this.couponService.claimCustomerCoupon(couponCode);
                    _this.subscription = _this.couponService
                        .getClaimCustomerCouponResultSuccess()
                        .subscribe((/**
                     * @param {?} success
                     * @return {?}
                     */
                    function (success) {
                        if (success) {
                            _this.messageService.add({ key: 'myCoupons.claimCustomerCoupon' }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
                        }
                        _this.routingService.go({ cxRoute: 'coupons' });
                    }));
                }
                else {
                    _this.routingService.go({ cxRoute: 'notFound' });
                }
            }))
                .unsubscribe();
        };
        /**
         * @return {?}
         */
        CouponClaimComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        CouponClaimComponent.decorators = [
            { type: core.Component, args: [{
                        template: "",
                        selector: 'cx-coupon-claim'
                    }] }
        ];
        /** @nocollapse */
        CouponClaimComponent.ctorParameters = function () { return [
            { type: core$1.CustomerCouponService },
            { type: core$1.RoutingService },
            { type: core$1.GlobalMessageService }
        ]; };
        return CouponClaimComponent;
    }());
    if (false) {
        /** @type {?} */
        CouponClaimComponent.prototype.subscription;
        /**
         * @type {?}
         * @protected
         */
        CouponClaimComponent.prototype.couponService;
        /**
         * @type {?}
         * @protected
         */
        CouponClaimComponent.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        CouponClaimComponent.prototype.messageService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$8 = { cxRoute: 'couponClaim' };
    var MyCouponsModule = /** @class */ (function () {
        function MyCouponsModule() {
        }
        MyCouponsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CardModule,
                            SpinnerModule,
                            core$1.I18nModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            IconModule,
                            ListNavigationModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    MyCouponsComponent: {
                                        component: MyCouponsComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                    CouponClaimComponent: {
                                        component: CouponClaimComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [core$1.AuthGuard, CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$8,
                                },
                            ]),
                        ],
                        declarations: [
                            MyCouponsComponent,
                            CouponCardComponent,
                            CouponDialogComponent,
                            CouponClaimComponent,
                        ],
                        exports: [MyCouponsComponent, CouponClaimComponent],
                        entryComponents: [
                            MyCouponsComponent,
                            CouponDialogComponent,
                            CouponClaimComponent,
                        ],
                    },] }
        ];
        return MyCouponsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NotificationPreferenceComponent = /** @class */ (function () {
        function NotificationPreferenceComponent(notificationPreferenceService) {
            this.notificationPreferenceService = notificationPreferenceService;
            this.preferences = [];
        }
        /**
         * @return {?}
         */
        NotificationPreferenceComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.notificationPreferenceService.resetNotificationPreferences();
            this.preferences$ = this.notificationPreferenceService
                .getPreferences()
                .pipe(operators.tap((/**
             * @param {?} preferences
             * @return {?}
             */
            function (preferences) { return (_this.preferences = preferences); })));
            this.notificationPreferenceService.loadPreferences();
            this.isLoading$ = rxjs.combineLatest([
                this.notificationPreferenceService.getPreferencesLoading(),
                this.notificationPreferenceService.getUpdatePreferencesResultLoading(),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), prefsLoading = _b[0], updateLoading = _b[1];
                return prefsLoading || updateLoading;
            })));
        };
        /**
         * @param {?} preference
         * @return {?}
         */
        NotificationPreferenceComponent.prototype.updatePreference = /**
         * @param {?} preference
         * @return {?}
         */
        function (preference) {
            /** @type {?} */
            var updatedPreferences = [];
            this.preferences.forEach((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                if (p.channel === preference.channel) {
                    updatedPreferences.push(__assign({}, p, { enabled: !p.enabled }));
                }
                else {
                    updatedPreferences.push(p);
                }
            }));
            this.notificationPreferenceService.updatePreferences(updatedPreferences);
        };
        NotificationPreferenceComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-notification-preference',
                        template: "<ng-container *ngIf=\"preferences$ | async as preferences\">\n  <div *ngIf=\"preferences.length > 0; else loading\">\n    <div class=\"row d-flex justify-content-center\">\n      <div class=\"col-md-8\">\n        <div class=\"pref-header\">\n          {{ 'notificationPreference.message' | cxTranslate }}\n        </div>\n        <div class=\"form-check cx-notification-channels\">\n          <ng-container *ngFor=\"let preference of preferences\">\n            <label *ngIf=\"preference.visible\" class=\"pref-channel\">\n              <input\n                class=\"form-check-input cx-np-checkbox\"\n                role=\"checkbox\"\n                type=\"checkbox\"\n                [checked]=\"preference.enabled\"\n                (change)=\"updatePreference(preference)\"\n                [disabled]=\"isLoading$ | async\"\n              />\n              <span class=\"form-check-label\">\n                {{\n                  'notificationPreference.' + preference.channel | cxTranslate\n                }}\n                {{ preference.value }}\n              </span>\n            </label>\n          </ng-container>\n        </div>\n        <label class=\"pref-note\"\n          ><strong>{{ 'notificationPreference.note' | cxTranslate }}</strong\n          >{{ 'notificationPreference.noteMessage' | cxTranslate }}\n        </label>\n      </div>\n    </div>\n  </div>\n\n  <ng-template #loading>\n    <div class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </ng-template>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        NotificationPreferenceComponent.ctorParameters = function () { return [
            { type: core$1.UserNotificationPreferenceService }
        ]; };
        return NotificationPreferenceComponent;
    }());
    if (false) {
        /** @type {?} */
        NotificationPreferenceComponent.prototype.preferences$;
        /** @type {?} */
        NotificationPreferenceComponent.prototype.isLoading$;
        /**
         * @type {?}
         * @protected
         */
        NotificationPreferenceComponent.prototype.preferences;
        /**
         * @type {?}
         * @private
         */
        NotificationPreferenceComponent.prototype.notificationPreferenceService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NotificationPreferenceModule = /** @class */ (function () {
        function NotificationPreferenceModule() {
        }
        NotificationPreferenceModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [NotificationPreferenceComponent],
                        imports: [
                            common.CommonModule,
                            SpinnerModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    NotificationPreferenceComponent: {
                                        component: NotificationPreferenceComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                        ],
                        exports: [NotificationPreferenceComponent],
                        entryComponents: [NotificationPreferenceComponent],
                    },] }
        ];
        return NotificationPreferenceModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function ProductInterestSearchResultUI() { }
    if (false) {
        /** @type {?|undefined} */
        ProductInterestSearchResultUI.prototype.results;
    }
    var MyInterestsComponent = /** @class */ (function () {
        function MyInterestsComponent(productInterestService, translationService, productService) {
            this.productInterestService = productInterestService;
            this.translationService = translationService;
            this.productService = productService;
            this.DEFAULT_PAGE_SIZE = 10;
            this.sortMapping = {
                byNameAsc: 'name:asc',
                byNameDesc: 'name:desc',
            };
            this.sort = 'byNameAsc';
            this.sortOptions = [
                {
                    code: 'byNameAsc',
                    selected: false,
                },
                {
                    code: 'byNameDesc',
                    selected: false,
                },
            ];
        }
        /**
         * @return {?}
         */
        MyInterestsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.interests$ = this.productInterestService
                .getAndLoadProductInterests(this.DEFAULT_PAGE_SIZE)
                .pipe(operators.tap((/**
             * @param {?} interests
             * @return {?}
             */
            function (interests) {
                return (_this.pagination = {
                    currentPage: interests.pagination.page,
                    pageSize: interests.pagination.count,
                    totalPages: interests.pagination.totalPages,
                    totalResults: interests.pagination.totalCount,
                    sort: 'byNameAsc',
                });
            })), operators.map((/**
             * @param {?} interest
             * @return {?}
             */
            function (interest) { return (__assign({}, interest, { results: interest.results
                    ? interest.results.map((/**
                     * @param {?} result
                     * @return {?}
                     */
                    function (result) { return (__assign({}, result, { product$: _this.getProduct(result) })); }))
                    : interest.results })); })));
            this.getInterestsloading$ = this.productInterestService.getProdutInterestsLoading();
            this.isRemoveDisabled$ = rxjs.combineLatest([
                this.getInterestsloading$,
                this.productInterestService.getRemoveProdutInterestLoading(),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), getLoading = _b[0], removeLoading = _b[1];
                return getLoading || removeLoading;
            })));
            this.sortLabels = this.getSortLabels();
        };
        /**
         * @private
         * @return {?}
         */
        MyInterestsComponent.prototype.getSortLabels = /**
         * @private
         * @return {?}
         */
        function () {
            return rxjs.combineLatest([
                this.translationService.translate('myInterests.sorting.byNameAsc'),
                this.translationService.translate('myInterests.sorting.byNameDesc'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), asc = _b[0], desc = _b[1];
                return {
                    byNameAsc: asc,
                    byNameDesc: desc,
                };
            })));
        };
        /**
         * @private
         * @param {?} interest
         * @return {?}
         */
        MyInterestsComponent.prototype.getProduct = /**
         * @private
         * @param {?} interest
         * @return {?}
         */
        function (interest) {
            return this.productService.get(interest.product.code, core$1.ProductScope.DETAILS);
        };
        /**
         * @param {?} relation
         * @return {?}
         */
        MyInterestsComponent.prototype.removeInterest = /**
         * @param {?} relation
         * @return {?}
         */
        function (relation) {
            this.productInterestService.removeProdutInterest({
                product: relation.product,
                productInterestEntry: relation.productInterestEntry,
            });
        };
        /**
         * @param {?} sort
         * @return {?}
         */
        MyInterestsComponent.prototype.sortChange = /**
         * @param {?} sort
         * @return {?}
         */
        function (sort) {
            this.sort = sort;
            this.productInterestService.loadProductInterests(this.DEFAULT_PAGE_SIZE, 0, this.sortMapping[sort]);
        };
        /**
         * @param {?} page
         * @return {?}
         */
        MyInterestsComponent.prototype.pageChange = /**
         * @param {?} page
         * @return {?}
         */
        function (page) {
            this.productInterestService.loadProductInterests(this.DEFAULT_PAGE_SIZE, page, this.sortMapping[this.sort]);
        };
        /**
         * @return {?}
         */
        MyInterestsComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.productInterestService.clearProductInterests();
            this.productInterestService.resetRemoveInterestState();
        };
        MyInterestsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-my-interests',
                        template: "<div *ngIf=\"interests$ | async as interests\" class=\"container\">\n  <div class=\"cx-product-interests-title h3\">\n    <h3>{{ 'myInterests.header' | cxTranslate }}</h3>\n  </div>\n  <div\n    class=\"cx-product-interests-body\"\n    *ngIf=\"!(getInterestsloading$ | async); else loading\"\n  >\n    <ng-container *ngIf=\"interests.pagination.totalCount > 0; else noInterest\">\n      <div class=\"cx-product-interests-sort top row\">\n        <div\n          class=\"cx-product-interests-form-group form-group col-sm-12 col-md-4 col-lg-4\"\n        >\n          <cx-sorting\n            [sortOptions]=\"sortOptions\"\n            [sortLabels]=\"sortLabels | async\"\n            (sortListEvent)=\"sortChange($event)\"\n            [selectedOption]=\"sort\"\n            placeholder=\"{{ 'myInterests.sortByMostRecent' | cxTranslate }}\"\n          >\n          </cx-sorting>\n        </div>\n        <div\n          class=\"cx-product-interests-pagination cx-product-interests-thead-mobile\"\n        >\n          <cx-pagination\n            [pagination]=\"pagination\"\n            (viewPageEvent)=\"pageChange($event)\"\n          ></cx-pagination>\n        </div>\n      </div>\n      <table class=\"table cx-product-interests-table\">\n        <thead class=\"cx-product-interests-thead-mobile\">\n          <th scope=\"col\">\n            {{ 'myInterests.item' | cxTranslate }}\n          </th>\n          <th scope=\"col\"></th>\n          <th scope=\"col\">\n            {{ 'myInterests.price' | cxTranslate }}\n          </th>\n          <th scope=\"col\">\n            {{ 'myInterests.notifications' | cxTranslate }}\n          </th>\n          <th scope=\"col\"></th>\n        </thead>\n        <tbody>\n          <tr\n            *ngFor=\"let interest of interests.results\"\n            class=\"cx-product-interests-product-item\"\n          >\n            <ng-container *ngIf=\"interest.product$ | async as product\">\n              <td>\n                <div class=\"cx-product-interests-label\">\n                  <a\n                    class=\"cx-product-interests-product-image-link\"\n                    [routerLink]=\"\n                      { cxRoute: 'product', params: product } | cxUrl\n                    \"\n                  >\n                    <cx-media\n                      [container]=\"product.images?.PRIMARY\"\n                      format=\"thumbnail\"\n                    ></cx-media>\n                  </a>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-info col-10\">\n                  <div class=\"cx-info-container row \">\n                    <div>\n                      <div *ngIf=\"product.name\" class=\"cx-name\">\n                        <a\n                          class=\"cx-link cx-product-interests-product-code-link\"\n                          [routerLink]=\"\n                            { cxRoute: 'product', params: product } | cxUrl\n                          \"\n                        >\n                          {{ product.name }}\n                        </a>\n                      </div>\n                      <div *ngIf=\"product.code\" class=\"cx-code\">\n                        <span>{{\n                          'myInterests.productId'\n                            | cxTranslate: { code: product.code }\n                        }}</span>\n                      </div>\n\n                      <ng-container\n                        *ngFor=\"let baseOptions of product.baseOptions\"\n                      >\n                        <div\n                          *ngFor=\"\n                            let variant of baseOptions.selected\n                              ?.variantOptionQualifiers\n                          \"\n                          class=\"cx-property\"\n                        >\n                          <div\n                            class=\"cx-label cx-product-interests-variant-name\"\n                          >\n                            {{ variant.name }}\n                          </div>\n                          <div\n                            class=\"cx-value cx-product-interests-variant-value\"\n                          >\n                            {{ variant.value }}\n                          </div>\n                        </div>\n                      </ng-container>\n                      <div\n                        class=\"cx-property\"\n                        *ngIf=\"product.stock.stockLevelStatus === 'outOfStock'\"\n                      >\n                        <div\n                          class=\"cx-label cx-product-interests-product-stock\"\n                        >\n                          {{ 'myInterests.outOfStock' | cxTranslate }}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-product-interests-product-price\">\n                  <div class=\"d-md-none cx-product-interests-label\">\n                    {{ 'myInterests.price' | cxTranslate }}\n                  </div>\n                  <span>{{ product.price.formattedValue }}</span>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-product-interests-subscriptions\">\n                  <div class=\"d-md-none cx-product-interests-label\">\n                    {{ 'myInterests.notifications' | cxTranslate }}\n                  </div>\n                  <div\n                    class=\"cx-product-interests-notification\"\n                    *ngFor=\"let interestEntry of interest.productInterestEntry\"\n                  >\n                    <span class=\"cx-product-interests-type\">\n                      {{\n                        'myInterests.' + interestEntry.interestType\n                          | cxTranslate\n                      }}\n                    </span>\n                    <span class=\"cx-product-interests-expiration-date\">\n                      {{\n                        'myInterests.expirationDate'\n                          | cxTranslate\n                            : {\n                                expirationDate:\n                                  interestEntry.expirationDate | date\n                              }\n                      }}\n                    </span>\n                  </div>\n                </div>\n              </td>\n              <td>\n                <div class=\"cx-actions cx-product-interests-remove-button\">\n                  <button\n                    type=\"button\"\n                    class=\"link cx-product-interests-remove-btn\"\n                    [disabled]=\"isRemoveDisabled$ | async\"\n                    (click)=\"removeInterest(interest)\"\n                  >\n                    {{ 'myInterests.remove' | cxTranslate }}\n                  </button>\n                </div>\n              </td>\n            </ng-container>\n          </tr>\n        </tbody>\n      </table>\n      <div class=\"cx-product-interests-sort bottom row\">\n        <div\n          class=\"cx-product-interests-form-group cx-product-interests-thead-mobile form-group col-sm-12 col-md-4 col-lg-4\"\n        >\n          <cx-sorting\n            [sortOptions]=\"sortOptions\"\n            [sortLabels]=\"sortLabels | async\"\n            (sortListEvent)=\"sortChange($event)\"\n            [selectedOption]=\"sort\"\n            placeholder=\"{{ 'myInterests.sortByMostRecent' | cxTranslate }}\"\n          >\n          </cx-sorting>\n        </div>\n        <div class=\"cx-product-interests-pagination\">\n          <cx-pagination\n            [pagination]=\"pagination\"\n            (viewPageEvent)=\"pageChange($event)\"\n          ></cx-pagination>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>\n<ng-template #noInterest>\n  <div class=\"cx-product-interests-message\">\n    {{ 'myInterests.noInterests' | cxTranslate }}\n  </div>\n</ng-template>\n<ng-template #loading>\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        MyInterestsComponent.ctorParameters = function () { return [
            { type: core$1.UserInterestsService },
            { type: core$1.TranslationService },
            { type: core$1.ProductService }
        ]; };
        return MyInterestsComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        MyInterestsComponent.prototype.DEFAULT_PAGE_SIZE;
        /**
         * @type {?}
         * @private
         */
        MyInterestsComponent.prototype.sortMapping;
        /** @type {?} */
        MyInterestsComponent.prototype.sort;
        /** @type {?} */
        MyInterestsComponent.prototype.sortOptions;
        /** @type {?} */
        MyInterestsComponent.prototype.pagination;
        /** @type {?} */
        MyInterestsComponent.prototype.interests$;
        /** @type {?} */
        MyInterestsComponent.prototype.isRemoveDisabled$;
        /** @type {?} */
        MyInterestsComponent.prototype.getInterestsloading$;
        /** @type {?} */
        MyInterestsComponent.prototype.sortLabels;
        /**
         * @type {?}
         * @private
         */
        MyInterestsComponent.prototype.productInterestService;
        /**
         * @type {?}
         * @private
         */
        MyInterestsComponent.prototype.translationService;
        /**
         * @type {?}
         * @private
         */
        MyInterestsComponent.prototype.productService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var MyInterestsModule = /** @class */ (function () {
        function MyInterestsModule() {
        }
        MyInterestsModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [MyInterestsComponent],
                        imports: [
                            common.CommonModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    MyInterestsComponent: {
                                        component: MyInterestsComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            router.RouterModule,
                            ListNavigationModule,
                            core$1.I18nModule,
                            core$1.UrlModule,
                            MediaModule,
                            SpinnerModule,
                        ],
                        exports: [MyInterestsComponent],
                        entryComponents: [MyInterestsComponent],
                    },] }
        ];
        return MyInterestsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BreadcrumbComponent = /** @class */ (function () {
        function BreadcrumbComponent(component, pageMetaService, translation) {
            this.component = component;
            this.pageMetaService = pageMetaService;
            this.translation = translation;
        }
        /**
         * @return {?}
         */
        BreadcrumbComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.setTitle();
            this.setCrumbs();
        };
        /**
         * @private
         * @return {?}
         */
        BreadcrumbComponent.prototype.setTitle = /**
         * @private
         * @return {?}
         */
        function () {
            this.title$ = this.pageMetaService.getMeta().pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} meta
             * @return {?}
             */
            function (meta) { return meta.heading || meta.title; })));
        };
        /**
         * @private
         * @return {?}
         */
        BreadcrumbComponent.prototype.setCrumbs = /**
         * @private
         * @return {?}
         */
        function () {
            this.crumbs$ = rxjs.combineLatest([
                this.pageMetaService.getMeta(),
                this.translation.translate('common.home'),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), meta = _b[0], textHome = _b[1];
                return meta && meta.breadcrumbs
                    ? meta.breadcrumbs
                    : [{ label: textHome, link: '/' }];
            })));
        };
        BreadcrumbComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-breadcrumb',
                        template: "<nav>\n  <span *ngFor=\"let crumb of crumbs$ | async\">\n    <a [routerLink]=\"crumb.link\" [innerHTML]=\"crumb.label\"></a>\n  </span>\n</nav>\n<h1>{{ title$ | async }}</h1>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        BreadcrumbComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: core$1.PageMetaService },
            { type: core$1.TranslationService }
        ]; };
        return BreadcrumbComponent;
    }());
    if (false) {
        /** @type {?} */
        BreadcrumbComponent.prototype.title$;
        /** @type {?} */
        BreadcrumbComponent.prototype.crumbs$;
        /** @type {?} */
        BreadcrumbComponent.prototype.component;
        /**
         * @type {?}
         * @protected
         */
        BreadcrumbComponent.prototype.pageMetaService;
        /**
         * @type {?}
         * @private
         */
        BreadcrumbComponent.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var BreadcrumbModule = /** @class */ (function () {
        function BreadcrumbModule() {
        }
        BreadcrumbModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    BreadcrumbComponent: {
                                        component: BreadcrumbComponent,
                                    },
                                },
                            }))),
                            core$1.CmsPageTitleModule,
                        ],
                        declarations: [BreadcrumbComponent],
                        exports: [BreadcrumbComponent],
                        entryComponents: [BreadcrumbComponent],
                    },] }
        ];
        return BreadcrumbModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NavigationService = /** @class */ (function () {
        function NavigationService(cmsService, semanticPathService) {
            this.cmsService = cmsService;
            this.semanticPathService = semanticPathService;
        }
        /**
         * @param {?} data$
         * @return {?}
         */
        NavigationService.prototype.createNavigation = /**
         * @param {?} data$
         * @return {?}
         */
        function (data$) {
            return rxjs.combineLatest([data$, this.getNavigationNode(data$)]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), data = _b[0], nav = _b[1];
                return {
                    title: data.name,
                    children: [nav],
                };
            })));
        };
        /**
         * returns an observable with the `NavigationNode` for the given `CmsNavigationComponent`.
         * This function will load the navigation underlying entries and childs if they haven't been
         * loaded so far.
         */
        /**
         * returns an observable with the `NavigationNode` for the given `CmsNavigationComponent`.
         * This function will load the navigation underlying entries and childs if they haven't been
         * loaded so far.
         * @param {?} data$
         * @return {?}
         */
        NavigationService.prototype.getNavigationNode = /**
         * returns an observable with the `NavigationNode` for the given `CmsNavigationComponent`.
         * This function will load the navigation underlying entries and childs if they haven't been
         * loaded so far.
         * @param {?} data$
         * @return {?}
         */
        function (data$) {
            var _this = this;
            if (!data$) {
                return rxjs.of();
            }
            return data$.pipe(operators.filter((/**
             * @param {?} data
             * @return {?}
             */
            function (data) { return !!data; })), operators.switchMap((/**
             * @param {?} data
             * @return {?}
             */
            function (data) {
                /** @type {?} */
                var navigation = data.navigationNode ? data.navigationNode : data;
                return _this.cmsService.getNavigationEntryItems(navigation.uid).pipe(operators.tap((/**
                 * @param {?} items
                 * @return {?}
                 */
                function (items) {
                    if (items === undefined) {
                        _this.loadNavigationEntryItems(navigation, true);
                    }
                    else {
                        // we should check whether the existing node items are what expected
                        /** @type {?} */
                        var expectedItems = [];
                        _this.loadNavigationEntryItems(navigation, false, expectedItems);
                        /** @type {?} */
                        var existingItems_1 = Object.keys(items).map((/**
                         * @param {?} key
                         * @return {?}
                         */
                        function (key) { return items[key].uid; }));
                        /** @type {?} */
                        var missingItems = expectedItems.filter((/**
                         * @param {?} it
                         * @return {?}
                         */
                        function (it) { return !existingItems_1.includes(it.id); }));
                        if (missingItems.length > 0) {
                            _this.cmsService.loadNavigationItems(navigation.uid, missingItems);
                        }
                    }
                })), operators.filter(Boolean), operators.map((/**
                 * @param {?} items
                 * @return {?}
                 */
                function (items) { return _this.populateNavigationNode(navigation, items); })));
            })));
        };
        /**
         * Loads all navigation entry items' type and id. Dispatch action to load all these items
         * @param nodeData
         * @param root
         * @param itemsList
         */
        /**
         * Loads all navigation entry items' type and id. Dispatch action to load all these items
         * @private
         * @param {?} nodeData
         * @param {?} root
         * @param {?=} itemsList
         * @return {?}
         */
        NavigationService.prototype.loadNavigationEntryItems = /**
         * Loads all navigation entry items' type and id. Dispatch action to load all these items
         * @private
         * @param {?} nodeData
         * @param {?} root
         * @param {?=} itemsList
         * @return {?}
         */
        function (nodeData, root, itemsList) {
            var _this = this;
            if (itemsList === void 0) { itemsList = []; }
            if (nodeData.entries && nodeData.entries.length > 0) {
                nodeData.entries.forEach((/**
                 * @param {?} entry
                 * @return {?}
                 */
                function (entry) {
                    itemsList.push({
                        superType: entry.itemSuperType,
                        id: entry.itemId,
                    });
                }));
            }
            if (nodeData.children && nodeData.children.length > 0) {
                nodeData.children.forEach((/**
                 * @param {?} child
                 * @return {?}
                 */
                function (child) {
                    return _this.loadNavigationEntryItems(child, false, itemsList);
                }));
            }
            if (root) {
                this.cmsService.loadNavigationItems(nodeData.uid, itemsList);
            }
        };
        /**
         * Create a new node tree for the view
         * @param nodeData
         * @param items
         */
        /**
         * Create a new node tree for the view
         * @private
         * @param {?} nodeData
         * @param {?} items
         * @return {?}
         */
        NavigationService.prototype.populateNavigationNode = /**
         * Create a new node tree for the view
         * @private
         * @param {?} nodeData
         * @param {?} items
         * @return {?}
         */
        function (nodeData, items) {
            var _this = this;
            /** @type {?} */
            var node = {};
            if (nodeData.title) {
                // the node title will be populated by the first entry (if any)
                // if there's no nodeData.title available
                node.title = nodeData.title;
            }
            if (nodeData.entries && nodeData.entries.length > 0) {
                this.populateLink(node, nodeData.entries[0], items);
            }
            if (nodeData.children && nodeData.children.length > 0) {
                /** @type {?} */
                var children = nodeData.children
                    .map((/**
                 * @param {?} child
                 * @return {?}
                 */
                function (child) { return _this.populateNavigationNode(child, items); }))
                    .filter(Boolean);
                if (children.length > 0) {
                    node.children = children;
                }
            }
            // return null in case there are no children
            return Object.keys(node).length === 0 ? null : node;
        };
        /**
         * The node link is driven by the first entry.
         */
        /**
         * The node link is driven by the first entry.
         * @private
         * @param {?} node
         * @param {?} entry
         * @param {?} items
         * @return {?}
         */
        NavigationService.prototype.populateLink = /**
         * The node link is driven by the first entry.
         * @private
         * @param {?} node
         * @param {?} entry
         * @param {?} items
         * @return {?}
         */
        function (node, entry, items) {
            /** @type {?} */
            var item = items[entry.itemId + "_" + entry.itemSuperType];
            // now we only consider CMSLinkComponent
            if (item && entry.itemType === 'CMSLinkComponent') {
                if (!node.title) {
                    node.title = item.linkName;
                }
                /** @type {?} */
                var url = this.getLink(item);
                // only populate the node link if we have a visible node
                if (node.title && url) {
                    node.url = url;
                    // the backend provide boolean value for the target
                    // in case the link should be opened in a new window
                    node.target = !!item.target ? '_blank' : '';
                }
            }
        };
        /**
         *
         * Gets the URL or link to a related item (category)
         */
        /**
         *
         * Gets the URL or link to a related item (category)
         * @private
         * @param {?} item
         * @return {?}
         */
        NavigationService.prototype.getLink = /**
         *
         * Gets the URL or link to a related item (category)
         * @private
         * @param {?} item
         * @return {?}
         */
        function (item) {
            if (item.url) {
                return item.url;
            }
            else if (item.categoryCode) {
                return this.semanticPathService.transform({
                    cxRoute: 'category',
                    params: {
                        code: item.categoryCode,
                        name: item.name,
                    },
                });
            }
        };
        NavigationService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        NavigationService.ctorParameters = function () { return [
            { type: core$1.CmsService },
            { type: core$1.SemanticPathService }
        ]; };
        /** @nocollapse */ NavigationService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function NavigationService_Factory() { return new NavigationService(core.ɵɵinject(core$1.CmsService), core.ɵɵinject(core$1.SemanticPathService)); }, token: NavigationService, providedIn: "root" });
        return NavigationService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        NavigationService.prototype.cmsService;
        /**
         * @type {?}
         * @protected
         */
        NavigationService.prototype.semanticPathService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CategoryNavigationComponent = /** @class */ (function () {
        function CategoryNavigationComponent(componentData, service) {
            this.componentData = componentData;
            this.service = service;
            this.node$ = this.service.getNavigationNode(this.componentData.data$);
            this.data$ = this.componentData.data$;
        }
        CategoryNavigationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-category-navigation',
                        template: "<cx-navigation-ui\n  *ngIf=\"data$ | async as data\"\n  [node]=\"node$ | async\"\n  [ngClass]=\"data.styleClass\"\n  [wrapAfter]=\"data.wrapAfter\"\n  [allowAlignToRight]=\"true\"\n></cx-navigation-ui>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        CategoryNavigationComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: NavigationService }
        ]; };
        return CategoryNavigationComponent;
    }());
    if (false) {
        /** @type {?} */
        CategoryNavigationComponent.prototype.node$;
        /** @type {?} */
        CategoryNavigationComponent.prototype.data$;
        /**
         * @type {?}
         * @protected
         */
        CategoryNavigationComponent.prototype.componentData;
        /**
         * @type {?}
         * @protected
         */
        CategoryNavigationComponent.prototype.service;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NavigationUIComponent = /** @class */ (function () {
        function NavigationUIComponent(router$1, renderer, elemRef) {
            var _this = this;
            this.router = router$1;
            this.renderer = renderer;
            this.elemRef = elemRef;
            this.allowAlignToRight = false;
            /**
             * the icon type that will be used for navigation nodes
             * with children.
             */
            this.iconType = ICON_TYPE;
            /**
             * Indicates whether the navigation should support flyout.
             * If flyout is set to true, the
             * nested child navitation nodes will only appear on hover or focus.
             */
            this.flyout = true;
            this.isOpen = false;
            this.openNodes = [];
            this.subscriptions = new rxjs.Subscription();
            this.resize = new core.EventEmitter();
            this.subscriptions.add(this.router.events
                .pipe(operators.filter((/**
             * @param {?} event
             * @return {?}
             */
            function (event) { return event instanceof router.NavigationEnd; })))
                .subscribe((/**
             * @return {?}
             */
            function () { return _this.clear(); })));
            this.subscriptions.add(this.resize.pipe(operators.debounceTime(50)).subscribe((/**
             * @return {?}
             */
            function () {
                _this.alignWrappersToRightIfStickOut();
            })));
        }
        /**
         * @return {?}
         */
        NavigationUIComponent.prototype.onResize = /**
         * @return {?}
         */
        function () {
            this.resize.next();
        };
        /**
         * @param {?} event
         * @return {?}
         */
        NavigationUIComponent.prototype.toggleOpen = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var node = (/** @type {?} */ (event.currentTarget));
            if (this.openNodes.includes(node)) {
                this.openNodes = this.openNodes.filter((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return n !== node; }));
                this.renderer.removeClass(node, 'is-open');
            }
            else {
                this.openNodes.push(node);
            }
            this.updateClasses();
            event.stopImmediatePropagation();
            event.stopPropagation();
        };
        /**
         * @return {?}
         */
        NavigationUIComponent.prototype.back = /**
         * @return {?}
         */
        function () {
            this.renderer.removeClass(this.openNodes[this.openNodes.length - 1], 'is-open');
            this.openNodes.pop();
            this.updateClasses();
        };
        /**
         * @return {?}
         */
        NavigationUIComponent.prototype.clear = /**
         * @return {?}
         */
        function () {
            this.openNodes = [];
            this.updateClasses();
        };
        /**
         * @param {?} event
         * @return {?}
         */
        NavigationUIComponent.prototype.onMouseEnter = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            this.alignWrapperToRightIfStickOut((/** @type {?} */ (event.currentTarget)));
            this.focusAfterPreviousClicked(event);
        };
        /**
         * @param {?} node
         * @param {?=} depth
         * @return {?}
         */
        NavigationUIComponent.prototype.getDepth = /**
         * @param {?} node
         * @param {?=} depth
         * @return {?}
         */
        function (node, depth) {
            var _this = this;
            if (depth === void 0) { depth = 0; }
            if (node.children && node.children.length > 0) {
                return Math.max.apply(Math, __spread(node.children.map((/**
                 * @param {?} n
                 * @return {?}
                 */
                function (n) { return _this.getDepth(n, depth + 1); }))));
            }
            else {
                return depth;
            }
        };
        /**
         * @param {?} length
         * @return {?}
         */
        NavigationUIComponent.prototype.getColumnCount = /**
         * @param {?} length
         * @return {?}
         */
        function (length) {
            return Math.round(length / (this.wrapAfter || length));
        };
        /**
         * @param {?} event
         * @return {?}
         */
        NavigationUIComponent.prototype.focusAfterPreviousClicked = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            /** @type {?} */
            var target = (/** @type {?} */ (((event.target || event.relatedTarget))));
            if (target.ownerDocument.activeElement.matches('nav[tabindex]') &&
                target.parentElement.matches('.flyout')) {
                target.focus();
            }
            return target.ownerDocument;
        };
        /**
         * @return {?}
         */
        NavigationUIComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscriptions) {
                this.subscriptions.unsubscribe();
            }
        };
        /**
         * @private
         * @param {?} node
         * @return {?}
         */
        NavigationUIComponent.prototype.alignWrapperToRightIfStickOut = /**
         * @private
         * @param {?} node
         * @return {?}
         */
        function (node) {
            if (this.allowAlignToRight) {
                /** @type {?} */
                var wrapper = (/** @type {?} */ (node.querySelector('.wrapper')));
                /** @type {?} */
                var navBar = (/** @type {?} */ (this.elemRef.nativeElement));
                if (wrapper) {
                    this.renderer.removeStyle(wrapper, 'margin-left');
                    if (wrapper.offsetLeft + wrapper.offsetWidth >
                        navBar.offsetLeft + navBar.offsetWidth) {
                        this.renderer.setStyle(wrapper, 'margin-left', node.offsetWidth - wrapper.offsetWidth + "px");
                    }
                }
            }
        };
        /**
         * @private
         * @return {?}
         */
        NavigationUIComponent.prototype.alignWrappersToRightIfStickOut = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            /** @type {?} */
            var navs = (/** @type {?} */ (this.elemRef.nativeElement.childNodes));
            Array.from(navs)
                .filter((/**
             * @param {?} node
             * @return {?}
             */
            function (node) { return node.tagName === 'NAV'; }))
                .forEach((/**
             * @param {?} nav
             * @return {?}
             */
            function (nav) { return _this.alignWrapperToRightIfStickOut((/** @type {?} */ (nav))); }));
        };
        /**
         * @private
         * @return {?}
         */
        NavigationUIComponent.prototype.updateClasses = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.openNodes.forEach((/**
             * @param {?} node
             * @param {?} i
             * @return {?}
             */
            function (node, i) {
                if (i + 1 < _this.openNodes.length) {
                    _this.renderer.addClass(node, 'is-opened');
                    _this.renderer.removeClass(node, 'is-open');
                }
                else {
                    _this.renderer.removeClass(node, 'is-opened');
                    _this.renderer.addClass(node, 'is-open');
                }
            }));
            this.isOpen = this.openNodes.length > 0;
        };
        NavigationUIComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-navigation-ui',
                        template: "<div\n  *ngIf=\"flyout && node?.children.length > 1\"\n  class=\"back is-open\"\n  (click)=\"back()\"\n>\n  <h5>\n    <cx-icon [type]=\"iconType.CARET_LEFT\"></cx-icon>\n    {{ 'common.back' | cxTranslate }}\n  </h5>\n</div>\n\n<ng-container *ngFor=\"let child of node?.children\">\n  <ng-container *ngTemplateOutlet=\"nav; context: { node: child }\">\n  </ng-container>\n</ng-container>\n\n<!-- we generate links in a recursive manner -->\n<ng-template #nav let-node=\"node\">\n  <nav\n    tabindex=\"0\"\n    (click)=\"toggleOpen($event)\"\n    (mouseenter)=\"onMouseEnter($event)\"\n  >\n    <cx-generic-link\n      *ngIf=\"\n        node.url && (!node.children || node.children?.length === 0);\n        else heading\n      \"\n      [url]=\"node.url\"\n      [target]=\"node.target\"\n    >\n      {{ node.title }}\n      <cx-icon\n        *ngIf=\"flyout && node.children?.length > 0\"\n        [type]=\"iconType.CARET_DOWN\"\n      ></cx-icon>\n    </cx-generic-link>\n\n    <ng-template #heading>\n      <h5 [attr.aria-label]=\"node.title\">\n        {{ node.title }}\n        <cx-icon\n          *ngIf=\"flyout && node.children?.length > 0\"\n          [type]=\"iconType.CARET_DOWN\"\n        ></cx-icon>\n      </h5>\n    </ng-template>\n\n    <!-- we add a wrapper to allow for better layout handling in CSS -->\n    <div class=\"wrapper\" *ngIf=\"node.children?.length > 0\">\n      <cx-generic-link\n        *ngIf=\"node.url\"\n        [url]=\"node.url\"\n        [target]=\"node.target\"\n        class=\"all\"\n      >\n        {{ 'navigation.shopAll' | cxTranslate: { navNode: node.title } }}\n      </cx-generic-link>\n      <div\n        class=\"childs\"\n        [attr.depth]=\"getDepth(node)\"\n        [attr.wrap-after]=\"node.children?.length > wrapAfter ? wrapAfter : null\"\n        [attr.columns]=\"getColumnCount(node.children?.length)\"\n      >\n        <ng-container *ngFor=\"let child of node.children\">\n          <ng-container *ngTemplateOutlet=\"nav; context: { node: child }\">\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n  </nav>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        NavigationUIComponent.ctorParameters = function () { return [
            { type: router.Router },
            { type: core.Renderer2 },
            { type: core.ElementRef }
        ]; };
        NavigationUIComponent.propDecorators = {
            node: [{ type: core.Input }],
            wrapAfter: [{ type: core.Input }],
            allowAlignToRight: [{ type: core.Input }],
            flyout: [{ type: core.Input }, { type: core.HostBinding, args: ['class.flyout',] }],
            isOpen: [{ type: core.Input }, { type: core.HostBinding, args: ['class.is-open',] }],
            onResize: [{ type: core.HostListener, args: ['window:resize',] }]
        };
        return NavigationUIComponent;
    }());
    if (false) {
        /**
         * The navigation node to render.
         * @type {?}
         */
        NavigationUIComponent.prototype.node;
        /**
         * The number of child nodes that must be wrapped.
         * @type {?}
         */
        NavigationUIComponent.prototype.wrapAfter;
        /** @type {?} */
        NavigationUIComponent.prototype.allowAlignToRight;
        /**
         * the icon type that will be used for navigation nodes
         * with children.
         * @type {?}
         */
        NavigationUIComponent.prototype.iconType;
        /**
         * Indicates whether the navigation should support flyout.
         * If flyout is set to true, the
         * nested child navitation nodes will only appear on hover or focus.
         * @type {?}
         */
        NavigationUIComponent.prototype.flyout;
        /** @type {?} */
        NavigationUIComponent.prototype.isOpen;
        /**
         * @type {?}
         * @private
         */
        NavigationUIComponent.prototype.openNodes;
        /**
         * @type {?}
         * @private
         */
        NavigationUIComponent.prototype.subscriptions;
        /**
         * @type {?}
         * @private
         */
        NavigationUIComponent.prototype.resize;
        /**
         * @type {?}
         * @private
         */
        NavigationUIComponent.prototype.router;
        /**
         * @type {?}
         * @private
         */
        NavigationUIComponent.prototype.renderer;
        /**
         * @type {?}
         * @private
         */
        NavigationUIComponent.prototype.elemRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NavigationComponent = /** @class */ (function () {
        function NavigationComponent(componentData, service) {
            this.componentData = componentData;
            this.service = service;
            this.node$ = this.service.createNavigation(this.componentData.data$);
            this.styleClass$ = this.componentData.data$.pipe(operators.map((/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return d.styleClass; })));
        }
        NavigationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-navigation',
                        template: "<cx-navigation-ui [node]=\"node$ | async\" [ngClass]=\"styleClass$ | async\">\n</cx-navigation-ui>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        NavigationComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: NavigationService }
        ]; };
        return NavigationComponent;
    }());
    if (false) {
        /** @type {?} */
        NavigationComponent.prototype.node$;
        /** @type {?} */
        NavigationComponent.prototype.styleClass$;
        /**
         * @type {?}
         * @protected
         */
        NavigationComponent.prototype.componentData;
        /**
         * @type {?}
         * @protected
         */
        NavigationComponent.prototype.service;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var NavigationModule = /** @class */ (function () {
        function NavigationModule() {
        }
        NavigationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            IconModule,
                            GenericLinkModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    NavigationComponent: {
                                        component: NavigationComponent,
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                        ],
                        declarations: [NavigationComponent, NavigationUIComponent],
                        entryComponents: [NavigationComponent],
                        exports: [NavigationComponent, NavigationUIComponent],
                    },] }
        ];
        return NavigationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CategoryNavigationModule = /** @class */ (function () {
        function CategoryNavigationModule() {
        }
        CategoryNavigationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            NavigationModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CategoryNavigationComponent: {
                                        component: CategoryNavigationComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [CategoryNavigationComponent],
                        entryComponents: [CategoryNavigationComponent],
                        exports: [CategoryNavigationComponent],
                    },] }
        ];
        return CategoryNavigationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FooterNavigationComponent = /** @class */ (function () {
        function FooterNavigationComponent(componentData, service, anonymousConsentsConfig) {
            var _this = this;
            this.componentData = componentData;
            this.service = service;
            this.anonymousConsentsConfig = anonymousConsentsConfig;
            this.node$ = this.service.getNavigationNode(this.componentData.data$);
            this.styleClass$ = this.componentData.data$.pipe(operators.map((/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return d.styleClass; })));
            // in order to preserve the backwards compatibility, this should render only if anonymous consents feature is disabled
            this.data$ = this.componentData.data$.pipe(operators.filter((/**
             * @param {?} _
             * @return {?}
             */
            function (_) {
                return !core$1.isFeatureEnabled(_this.anonymousConsentsConfig, core$1.ANONYMOUS_CONSENTS_FEATURE);
            })));
        }
        FooterNavigationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-footer-navigation',
                        template: "<cx-navigation-ui\n  [node]=\"node$ | async\"\n  [flyout]=\"false\"\n  [ngClass]=\"styleClass$ | async\"\n></cx-navigation-ui>\n\n<div class=\"notice\" *ngIf=\"data$ | async as data\">\n  {{ data.notice }}\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        FooterNavigationComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: NavigationService },
            { type: core$1.AnonymousConsentsConfig }
        ]; };
        return FooterNavigationComponent;
    }());
    if (false) {
        /** @type {?} */
        FooterNavigationComponent.prototype.node$;
        /** @type {?} */
        FooterNavigationComponent.prototype.styleClass$;
        /** @type {?} */
        FooterNavigationComponent.prototype.data$;
        /**
         * @type {?}
         * @protected
         */
        FooterNavigationComponent.prototype.componentData;
        /**
         * @type {?}
         * @protected
         */
        FooterNavigationComponent.prototype.service;
        /**
         * @type {?}
         * @protected
         */
        FooterNavigationComponent.prototype.anonymousConsentsConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var FooterNavigationModule = /** @class */ (function () {
        function FooterNavigationModule() {
        }
        FooterNavigationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            NavigationModule,
                            GenericLinkModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    FooterNavigationComponent: {
                                        component: FooterNavigationComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [FooterNavigationComponent],
                        entryComponents: [FooterNavigationComponent],
                        exports: [FooterNavigationComponent],
                    },] }
        ];
        return FooterNavigationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function NavigationNode() { }
    if (false) {
        /** @type {?|undefined} */
        NavigationNode.prototype.title;
        /**
         * The url or route (parts)
         * @type {?|undefined}
         */
        NavigationNode.prototype.url;
        /** @type {?|undefined} */
        NavigationNode.prototype.target;
        /** @type {?|undefined} */
        NavigationNode.prototype.children;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var HAS_SEARCH_RESULT_CLASS = 'has-searchbox-results';
    var SearchBoxComponentService = /** @class */ (function () {
        function SearchBoxComponentService(searchService, routingService, translationService, winRef) {
            this.searchService = searchService;
            this.routingService = routingService;
            this.translationService = translationService;
            this.winRef = winRef;
        }
        /**
         * Executes the search for products and suggestions,
         * unless the configuration is setup to not search for
         * products or suggestions.
         */
        /**
         * Executes the search for products and suggestions,
         * unless the configuration is setup to not search for
         * products or suggestions.
         * @param {?} query
         * @param {?} config
         * @return {?}
         */
        SearchBoxComponentService.prototype.search = /**
         * Executes the search for products and suggestions,
         * unless the configuration is setup to not search for
         * products or suggestions.
         * @param {?} query
         * @param {?} config
         * @return {?}
         */
        function (query, config) {
            if (!query || query === '') {
                this.clearResults();
                return;
            }
            if (config.minCharactersBeforeRequest &&
                query.length < config.minCharactersBeforeRequest) {
                return;
            }
            if (config.displayProducts) {
                this.searchService.search(query, {
                    pageSize: config.maxProducts,
                });
            }
            if (config.displaySuggestions) {
                this.searchService.searchSuggestions(query, {
                    pageSize: config.maxSuggestions,
                });
            }
        };
        /**
         * Returns an observable with the SearchResults. When there's any
         * result, the body tag will get a classname, so that specific style
         * rules can be applied.
         */
        /**
         * Returns an observable with the SearchResults. When there's any
         * result, the body tag will get a classname, so that specific style
         * rules can be applied.
         * @param {?} config
         * @return {?}
         */
        SearchBoxComponentService.prototype.getResults = /**
         * Returns an observable with the SearchResults. When there's any
         * result, the body tag will get a classname, so that specific style
         * rules can be applied.
         * @param {?} config
         * @return {?}
         */
        function (config) {
            var _this = this;
            return rxjs.combineLatest([
                this.getProductResults(config),
                this.getProductSuggestions(config),
                this.getSearchMessage(config),
            ]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 3), productResults = _b[0], suggestions = _b[1], message = _b[2];
                return {
                    products: productResults ? productResults.products : null,
                    suggestions: suggestions,
                    message: message,
                };
            })), operators.tap((/**
             * @param {?} results
             * @return {?}
             */
            function (results) {
                return _this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, _this.hasResults(results));
            })));
        };
        /**
         * Clears the searchbox results, so that old values are
         * no longer emited upon next search.
         */
        /**
         * Clears the searchbox results, so that old values are
         * no longer emited upon next search.
         * @return {?}
         */
        SearchBoxComponentService.prototype.clearResults = /**
         * Clears the searchbox results, so that old values are
         * no longer emited upon next search.
         * @return {?}
         */
        function () {
            this.searchService.clearResults();
            this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, false);
        };
        /**
         * @param {?} className
         * @return {?}
         */
        SearchBoxComponentService.prototype.hasBodyClass = /**
         * @param {?} className
         * @return {?}
         */
        function (className) {
            return this.winRef.document.body.classList.contains(className);
        };
        /**
         * @param {?} className
         * @param {?=} add
         * @return {?}
         */
        SearchBoxComponentService.prototype.toggleBodyClass = /**
         * @param {?} className
         * @param {?=} add
         * @return {?}
         */
        function (className, add) {
            if (add === undefined) {
                this.winRef.document.body.classList.toggle(className);
            }
            else {
                add
                    ? this.winRef.document.body.classList.add(className)
                    : this.winRef.document.body.classList.remove(className);
            }
        };
        /**
         * @private
         * @param {?} results
         * @return {?}
         */
        SearchBoxComponentService.prototype.hasResults = /**
         * @private
         * @param {?} results
         * @return {?}
         */
        function (results) {
            return ((!!results.products && results.products.length > 0) ||
                (!!results.suggestions && results.suggestions.length > 0) ||
                !!results.message);
        };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        SearchBoxComponentService.prototype.getProductResults = /**
         * @private
         * @param {?} config
         * @return {?}
         */
        function (config) {
            if (config.displayProducts) {
                return this.searchService.getResults();
            }
            else {
                return rxjs.of({});
            }
        };
        /**
         * Loads suggestions from the backend. In case there's no suggestion
         * available, we try to get an exact match suggestion.
         */
        /**
         * Loads suggestions from the backend. In case there's no suggestion
         * available, we try to get an exact match suggestion.
         * @private
         * @param {?} config
         * @return {?}
         */
        SearchBoxComponentService.prototype.getProductSuggestions = /**
         * Loads suggestions from the backend. In case there's no suggestion
         * available, we try to get an exact match suggestion.
         * @private
         * @param {?} config
         * @return {?}
         */
        function (config) {
            var _this = this;
            if (!config.displaySuggestions) {
                return rxjs.of([]);
            }
            else {
                return this.searchService.getSuggestionResults().pipe(operators.map((/**
                 * @param {?} res
                 * @return {?}
                 */
                function (res) { return res.map((/**
                 * @param {?} suggestion
                 * @return {?}
                 */
                function (suggestion) { return suggestion.value; })); })), operators.switchMap((/**
                 * @param {?} suggestions
                 * @return {?}
                 */
                function (suggestions) {
                    if (suggestions.length === 0) {
                        return _this.getExactSuggestion(config).pipe(operators.map((/**
                         * @param {?} match
                         * @return {?}
                         */
                        function (match) { return (match ? [match] : []); })));
                    }
                    else {
                        return rxjs.of(suggestions);
                    }
                })));
            }
        };
        /**
         * whenever there is at least 1 product, we simulate
         * a suggestion to provide easy access to the search result page
         */
        /**
         * whenever there is at least 1 product, we simulate
         * a suggestion to provide easy access to the search result page
         * @private
         * @param {?} config
         * @return {?}
         */
        SearchBoxComponentService.prototype.getExactSuggestion = /**
         * whenever there is at least 1 product, we simulate
         * a suggestion to provide easy access to the search result page
         * @private
         * @param {?} config
         * @return {?}
         */
        function (config) {
            var _this = this;
            return this.getProductResults(config).pipe(operators.switchMap((/**
             * @param {?} productResult
             * @return {?}
             */
            function (productResult) {
                return productResult.products && productResult.products.length > 0
                    ? _this.fetchTranslation('searchBox.help.exactMatch', {
                        term: productResult.freeTextSearch,
                    })
                    : rxjs.of(null);
            })));
        };
        /**
         * @private
         * @param {?} config
         * @return {?}
         */
        SearchBoxComponentService.prototype.getSearchMessage = /**
         * @private
         * @param {?} config
         * @return {?}
         */
        function (config) {
            var _this = this;
            return rxjs.combineLatest([
                this.getProductResults(config),
                this.getProductSuggestions(config),
            ]).pipe(operators.switchMap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), productResult = _b[0], suggestions = _b[1];
                if (productResult &&
                    productResult.products &&
                    productResult.products.length === 0 &&
                    (suggestions && suggestions.length === 0)) {
                    return _this.fetchTranslation('searchBox.help.noMatch');
                }
                else {
                    return rxjs.of(null);
                }
            })));
        };
        /**
         * Navigates to the search result page with a given query
         */
        /**
         * Navigates to the search result page with a given query
         * @param {?} query
         * @return {?}
         */
        SearchBoxComponentService.prototype.launchSearchPage = /**
         * Navigates to the search result page with a given query
         * @param {?} query
         * @return {?}
         */
        function (query) {
            this.routingService.go({
                cxRoute: 'search',
                params: { query: query },
            });
        };
        /**
         * @private
         * @param {?} translationKey
         * @param {?=} options
         * @return {?}
         */
        SearchBoxComponentService.prototype.fetchTranslation = /**
         * @private
         * @param {?} translationKey
         * @param {?=} options
         * @return {?}
         */
        function (translationKey, options) {
            return this.translationService.translate(translationKey, options);
        };
        SearchBoxComponentService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        SearchBoxComponentService.ctorParameters = function () { return [
            { type: core$1.SearchboxService },
            { type: core$1.RoutingService },
            { type: core$1.TranslationService },
            { type: core$1.WindowRef }
        ]; };
        /** @nocollapse */ SearchBoxComponentService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function SearchBoxComponentService_Factory() { return new SearchBoxComponentService(core.ɵɵinject(core$1.SearchboxService), core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.TranslationService), core.ɵɵinject(core$1.WindowRef)); }, token: SearchBoxComponentService, providedIn: "root" });
        return SearchBoxComponentService;
    }());
    if (false) {
        /** @type {?} */
        SearchBoxComponentService.prototype.searchService;
        /**
         * @type {?}
         * @protected
         */
        SearchBoxComponentService.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        SearchBoxComponentService.prototype.translationService;
        /**
         * @type {?}
         * @protected
         */
        SearchBoxComponentService.prototype.winRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DEFAULT_SEARCHBOX_CONFIG = {
        minCharactersBeforeRequest: 1,
        displayProducts: true,
        displaySuggestions: true,
        maxProducts: 5,
        maxSuggestions: 5,
        displayProductImages: true,
    };
    var SearchBoxComponent = /** @class */ (function () {
        /**
         * The component data is optional, so that this component
         * can be reused without CMS integration.
         */
        function SearchBoxComponent(searchBoxComponentService, componentData) {
            var _this = this;
            this.searchBoxComponentService = searchBoxComponentService;
            this.componentData = componentData;
            this.iconTypes = ICON_TYPE;
            /**
             * In some occasions we need to ignore the close event,
             * for example when we click inside the search result section.
             */
            this.ignoreCloseEvent = false;
            this.results$ = this.config$.pipe(operators.tap((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return (_this.config = c); })), operators.switchMap((/**
             * @param {?} config
             * @return {?}
             */
            function (config) { return _this.searchBoxComponentService.getResults(config); })));
        }
        Object.defineProperty(SearchBoxComponent.prototype, "queryText", {
            /**
             * Sets the search box input field
             */
            set: /**
             * Sets the search box input field
             * @param {?} value
             * @return {?}
             */
            function (value) {
                if (value) {
                    this.search(value);
                }
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(SearchBoxComponent.prototype, "config$", {
            /**
             * Returns the backend configuration or default configuration for the searchbox.
             */
            get: /**
             * Returns the backend configuration or default configuration for the searchbox.
             * @private
             * @return {?}
             */
            function () {
                if (this.componentData) {
                    return (/** @type {?} */ (this.componentData.data$.pipe(
                    // Since the backend returns string values (i.e. displayProducts: "true") for
                    // boolean values, we replace them with boolean values.
                    operators.map((/**
                     * @param {?} c
                     * @return {?}
                     */
                    function (c) {
                        return __assign({}, c, { displayProducts: (/** @type {?} */ (c.displayProducts)) === 'true' || c.displayProducts === true, displayProductImages: (/** @type {?} */ (c.displayProductImages)) === 'true' ||
                                c.displayProductImages === true, displaySuggestions: (/** @type {?} */ (c.displaySuggestions)) === 'true' ||
                                c.displaySuggestions === true });
                    })))));
                }
                else {
                    return rxjs.of(DEFAULT_SEARCHBOX_CONFIG);
                }
            },
            enumerable: true,
            configurable: true
        });
        /**
         * Closes the searchbox and opens the search result page.
         */
        /**
         * Closes the searchbox and opens the search result page.
         * @param {?} query
         * @return {?}
         */
        SearchBoxComponent.prototype.search = /**
         * Closes the searchbox and opens the search result page.
         * @param {?} query
         * @return {?}
         */
        function (query) {
            this.searchBoxComponentService.search(query, this.config);
            // force the searchbox to open
            this.open();
        };
        /**
         * Opens the typeahead searchbox
         */
        /**
         * Opens the typeahead searchbox
         * @return {?}
         */
        SearchBoxComponent.prototype.open = /**
         * Opens the typeahead searchbox
         * @return {?}
         */
        function () {
            this.searchBoxComponentService.toggleBodyClass('searchbox-is-active', true);
        };
        /**
         * Closes the typehead searchbox.
         */
        /**
         * Closes the typehead searchbox.
         * @param {?} event
         * @return {?}
         */
        SearchBoxComponent.prototype.close = /**
         * Closes the typehead searchbox.
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (!this.ignoreCloseEvent) {
                this.searchBoxComponentService.toggleBodyClass('searchbox-is-active', false);
                if (event && event.target) {
                    ((/** @type {?} */ (event.target))).blur();
                }
            }
            this.ignoreCloseEvent = false;
        };
        /**
         * Especially in mobile we do not want the search icon
         * to focus the input again when it's already open.
         * */
        /**
         * Especially in mobile we do not want the search icon
         * to focus the input again when it's already open.
         *
         * @param {?} event
         * @return {?}
         */
        SearchBoxComponent.prototype.avoidReopen = /**
         * Especially in mobile we do not want the search icon
         * to focus the input again when it's already open.
         *
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (this.searchBoxComponentService.hasBodyClass('searchbox-is-active')) {
                this.close(event);
                event.preventDefault();
            }
        };
        /**
         * Opens the PLP with the given query.
         *
         * TODO: if there's a single product match, we could open the PDP.
         */
        /**
         * Opens the PLP with the given query.
         *
         * TODO: if there's a single product match, we could open the PDP.
         * @param {?} event
         * @param {?} query
         * @return {?}
         */
        SearchBoxComponent.prototype.launchSearchResult = /**
         * Opens the PLP with the given query.
         *
         * TODO: if there's a single product match, we could open the PDP.
         * @param {?} event
         * @param {?} query
         * @return {?}
         */
        function (event, query) {
            if (!query || query.trim().length === 0) {
                return;
            }
            this.close(event);
            this.searchBoxComponentService.launchSearchPage(query);
        };
        /**
         * Disables closing the search result list.
         */
        /**
         * Disables closing the search result list.
         * @return {?}
         */
        SearchBoxComponent.prototype.disableClose = /**
         * Disables closing the search result list.
         * @return {?}
         */
        function () {
            this.ignoreCloseEvent = true;
        };
        /**
         * Clears the search box input field
         */
        /**
         * Clears the search box input field
         * @param {?} el
         * @return {?}
         */
        SearchBoxComponent.prototype.clear = /**
         * Clears the search box input field
         * @param {?} el
         * @return {?}
         */
        function (el) {
            this.disableClose();
            el.value = '';
            this.searchBoxComponentService.clearResults();
        };
        SearchBoxComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-searchbox',
                        template: "<label class=\"searchbox\" [class.dirty]=\"!!searchInput.value\">\n  <input\n    #searchInput\n    [placeholder]=\"'searchBox.placeholder' | cxTranslate\"\n    aria-label=\"search\"\n    (focus)=\"open()\"\n    (input)=\"search(searchInput.value)\"\n    (blur)=\"close($event)\"\n    (keydown.escape)=\"close($event)\"\n    (keydown.enter)=\"launchSearchResult($event, searchInput.value)\"\n  />\n\n  <cx-icon\n    [type]=\"iconTypes.RESET\"\n    aria-label=\"reset\"\n    (mousedown)=\"clear(searchInput)\"\n    class=\"reset\"\n  ></cx-icon>\n\n  <cx-icon\n    [type]=\"iconTypes.SEARCH\"\n    aria-label=\"search\"\n    class=\"search\"\n    (mousedown)=\"avoidReopen($event)\"\n  ></cx-icon>\n</label>\n\n<div *ngIf=\"results$ | async as result\" class=\"results\" (click)=\"close($event)\">\n  <div\n    *ngIf=\"result.message\"\n    class=\"message\"\n    [innerHTML]=\"result.message\"\n  ></div>\n\n  <div class=\"suggestions\" (mousedown)=\"disableClose()\">\n    <a\n      *ngFor=\"let suggestion of result.suggestions\"\n      [innerHTML]=\"suggestion | cxHighlight: searchInput.value\"\n      [routerLink]=\"\n        {\n          cxRoute: 'search',\n          params: { query: suggestion }\n        } | cxUrl\n      \"\n    >\n    </a>\n  </div>\n\n  <div class=\"products\" (mousedown)=\"disableClose()\" *ngIf=\"result.products\">\n    <a\n      *ngFor=\"let product of result.products\"\n      [routerLink]=\"\n        {\n          cxRoute: 'product',\n          params: product\n        } | cxUrl\n      \"\n      [class.has-media]=\"config.displayProductImages\"\n    >\n      <cx-media\n        *ngIf=\"config.displayProductImages\"\n        [container]=\"product.images?.PRIMARY\"\n        format=\"thumbnail\"\n        [alt]=\"product.summary\"\n      ></cx-media>\n      <h4 class=\"name\" [innerHTML]=\"product.nameHtml\"></h4>\n      <span class=\"price\">{{ product.price?.formattedValue }}</span>\n    </a>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        SearchBoxComponent.ctorParameters = function () { return [
            { type: SearchBoxComponentService },
            { type: CmsComponentData, decorators: [{ type: core.Optional }] }
        ]; };
        SearchBoxComponent.propDecorators = {
            queryText: [{ type: core.Input, args: ['queryText',] }]
        };
        return SearchBoxComponent;
    }());
    if (false) {
        /** @type {?} */
        SearchBoxComponent.prototype.config;
        /** @type {?} */
        SearchBoxComponent.prototype.iconTypes;
        /**
         * In some occasions we need to ignore the close event,
         * for example when we click inside the search result section.
         * @type {?}
         * @private
         */
        SearchBoxComponent.prototype.ignoreCloseEvent;
        /** @type {?} */
        SearchBoxComponent.prototype.results$;
        /**
         * @type {?}
         * @protected
         */
        SearchBoxComponent.prototype.searchBoxComponentService;
        /**
         * @type {?}
         * @protected
         */
        SearchBoxComponent.prototype.componentData;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function SearchBoxConfig() { }
    if (false) {
        /** @type {?} */
        SearchBoxConfig.prototype.displaySuggestions;
        /** @type {?} */
        SearchBoxConfig.prototype.displayProducts;
        /** @type {?|undefined} */
        SearchBoxConfig.prototype.displayProductImages;
        /** @type {?|undefined} */
        SearchBoxConfig.prototype.maxProducts;
        /** @type {?|undefined} */
        SearchBoxConfig.prototype.maxSuggestions;
        /** @type {?|undefined} */
        SearchBoxConfig.prototype.minCharactersBeforeRequest;
    }
    /**
     * @record
     */
    function SearchResults() { }
    if (false) {
        /** @type {?|undefined} */
        SearchResults.prototype.message;
        /** @type {?|undefined} */
        SearchResults.prototype.products;
        /** @type {?|undefined} */
        SearchResults.prototype.suggestions;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var HighlightPipe = /** @class */ (function () {
        function HighlightPipe() {
        }
        /**
         * @param {?} text
         * @param {?=} match
         * @return {?}
         */
        HighlightPipe.prototype.transform = /**
         * @param {?} text
         * @param {?=} match
         * @return {?}
         */
        function (text, match) {
            if (!match) {
                return text;
            }
            return text.replace(match.trim(), "<span class=\"highlight\">" + match.trim() + "</span>");
        };
        HighlightPipe.decorators = [
            { type: core.Pipe, args: [{ name: 'cxHighlight' },] }
        ];
        return HighlightPipe;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var SearchBoxModule = /** @class */ (function () {
        function SearchBoxModule() {
        }
        SearchBoxModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            MediaModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    SearchBoxComponent: {
                                        component: SearchBoxComponent,
                                    },
                                },
                            }))),
                            IconModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                        ],
                        declarations: [SearchBoxComponent, HighlightPipe],
                        entryComponents: [SearchBoxComponent],
                        exports: [SearchBoxComponent],
                    },] }
        ];
        return SearchBoxModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderConfirmationItemsComponent = /** @class */ (function () {
        function OrderConfirmationItemsComponent(checkoutService, promotionService) {
            this.checkoutService = checkoutService;
            this.promotionService = promotionService;
            this.promotionLocation = core$1.PromotionLocation.Checkout;
        }
        /**
         * @return {?}
         */
        OrderConfirmationItemsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.order$ = this.checkoutService.getOrderDetails();
            this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);
        };
        /**
         * @return {?}
         */
        OrderConfirmationItemsComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.checkoutService.clearCheckoutData();
        };
        OrderConfirmationItemsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-confirmation-items',
                        template: "<div class=\"cx-order-items container\" *ngIf=\"order$ | async as order\">\n  <h4 class=\"cx-order-items-header\">\n    {{ 'checkoutOrderConfirmation.orderItems' | cxTranslate }}\n  </h4>\n\n  <ng-container *cxFeatureLevel=\"'1.5'\">\n    <ng-container *ngIf=\"orderPromotions$ | async as orderPromotions\">\n      <cx-promotions [promotions]=\"orderPromotions\"></cx-promotions>\n    </ng-container>\n  </ng-container>\n\n  <cx-cart-item-list\n    [items]=\"order.entries\"\n    [isReadOnly]=\"true\"\n    [promotionLocation]=\"promotionLocation\"\n  >\n  </cx-cart-item-list>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        OrderConfirmationItemsComponent.ctorParameters = function () { return [
            { type: core$1.CheckoutService },
            { type: PromotionService }
        ]; };
        return OrderConfirmationItemsComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderConfirmationItemsComponent.prototype.promotionLocation;
        /** @type {?} */
        OrderConfirmationItemsComponent.prototype.order$;
        /** @type {?} */
        OrderConfirmationItemsComponent.prototype.orderPromotions$;
        /**
         * @type {?}
         * @protected
         */
        OrderConfirmationItemsComponent.prototype.checkoutService;
        /**
         * @type {?}
         * @protected
         */
        OrderConfirmationItemsComponent.prototype.promotionService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderConfirmationOverviewComponent = /** @class */ (function () {
        function OrderConfirmationOverviewComponent(checkoutService, translation) {
            this.checkoutService = checkoutService;
            this.translation = translation;
        }
        /**
         * @return {?}
         */
        OrderConfirmationOverviewComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.order$ = this.checkoutService.getOrderDetails();
        };
        /**
         * @return {?}
         */
        OrderConfirmationOverviewComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.checkoutService.clearCheckoutData();
        };
        /**
         * @param {?} deliveryAddress
         * @return {?}
         */
        OrderConfirmationOverviewComponent.prototype.getAddressCardContent = /**
         * @param {?} deliveryAddress
         * @return {?}
         */
        function (deliveryAddress) {
            return this.translation.translate('addressCard.shipTo').pipe(operators.filter((/**
             * @param {?} _
             * @return {?}
             */
            function (_) { return Boolean(deliveryAddress); })), operators.map((/**
             * @param {?} textTitle
             * @return {?}
             */
            function (textTitle) { return ({
                title: textTitle,
                textBold: deliveryAddress.firstName + " " + deliveryAddress.lastName,
                text: [
                    deliveryAddress.line1,
                    deliveryAddress.line2,
                    deliveryAddress.town + ", " + deliveryAddress.country.isocode + ", " + deliveryAddress.postalCode,
                    deliveryAddress.phone,
                ],
            }); })));
        };
        /**
         * @param {?} deliveryMode
         * @return {?}
         */
        OrderConfirmationOverviewComponent.prototype.getDeliveryModeCardContent = /**
         * @param {?} deliveryMode
         * @return {?}
         */
        function (deliveryMode) {
            return this.translation.translate('checkoutShipping.shippingMethod').pipe(operators.filter((/**
             * @param {?} _
             * @return {?}
             */
            function (_) { return Boolean(deliveryMode); })), operators.map((/**
             * @param {?} textTitle
             * @return {?}
             */
            function (textTitle) { return ({
                title: textTitle,
                textBold: deliveryMode.name,
                text: [deliveryMode.description],
            }); })));
        };
        /**
         * @param {?} billingAddress
         * @return {?}
         */
        OrderConfirmationOverviewComponent.prototype.getBillingAddressCardContent = /**
         * @param {?} billingAddress
         * @return {?}
         */
        function (billingAddress) {
            return this.translation.translate('addressCard.billTo').pipe(operators.filter((/**
             * @param {?} _
             * @return {?}
             */
            function (_) { return Boolean(billingAddress); })), operators.map((/**
             * @param {?} textTitle
             * @return {?}
             */
            function (textTitle) { return ({
                title: textTitle,
                textBold: billingAddress.firstName + " " + billingAddress.lastName,
                text: [
                    billingAddress.line1,
                    billingAddress.line2,
                    billingAddress.town + ", " + billingAddress.country.isocode + ", " + billingAddress.postalCode,
                    billingAddress.phone,
                ],
            }); })));
        };
        /**
         * @param {?} payment
         * @return {?}
         */
        OrderConfirmationOverviewComponent.prototype.getPaymentInfoCardContent = /**
         * @param {?} payment
         * @return {?}
         */
        function (payment) {
            return rxjs.combineLatest([
                this.translation.translate('paymentForm.payment'),
                this.translation.translate('paymentCard.expires', {
                    month: Boolean(payment) ? payment.expiryMonth : '',
                    year: Boolean(payment) ? payment.expiryYear : '',
                }),
            ]).pipe(operators.filter((/**
             * @param {?} _
             * @return {?}
             */
            function (_) { return Boolean(payment); })), operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), textTitle = _b[0], textExpires = _b[1];
                return ({
                    title: textTitle,
                    textBold: payment.accountHolderName,
                    text: [payment.cardNumber, textExpires],
                });
            })));
        };
        OrderConfirmationOverviewComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-confirmation-overview',
                        template: "<div class=\"cx-order-review-summary\" *ngIf=\"order$ | async as order\">\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-sm-12 col-md-4 col-lg-3\">\n        <div class=\"summary-card\">\n          <cx-card\n            [content]=\"getAddressCardContent(order?.deliveryAddress) | async\"\n          ></cx-card>\n        </div>\n      </div>\n\n      <div class=\"col-sm-12 col-md-4 col-lg-3\">\n        <div class=\"summary-card\">\n          <cx-card\n            [content]=\"\n              getBillingAddressCardContent(order?.paymentInfo?.billingAddress)\n                | async\n            \"\n          ></cx-card>\n        </div>\n      </div>\n\n      <div class=\"col-sm-12 col-md-4 col-lg-3\">\n        <div class=\"summary-card\">\n          <cx-card\n            [content]=\"getDeliveryModeCardContent(order?.deliveryMode) | async\"\n          ></cx-card>\n        </div>\n      </div>\n\n      <div class=\"col-sm-12 col-md-4 col-lg-3\">\n        <div class=\"summary-card\">\n          <cx-card\n            [content]=\"getPaymentInfoCardContent(order?.paymentInfo) | async\"\n          ></cx-card>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        OrderConfirmationOverviewComponent.ctorParameters = function () { return [
            { type: core$1.CheckoutService },
            { type: core$1.TranslationService }
        ]; };
        return OrderConfirmationOverviewComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderConfirmationOverviewComponent.prototype.order$;
        /**
         * @type {?}
         * @protected
         */
        OrderConfirmationOverviewComponent.prototype.checkoutService;
        /**
         * @type {?}
         * @private
         */
        OrderConfirmationOverviewComponent.prototype.translation;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderConfirmationThankYouMessageComponent = /** @class */ (function () {
        function OrderConfirmationThankYouMessageComponent(checkoutService) {
            this.checkoutService = checkoutService;
            this.isGuestCustomer = false;
        }
        /**
         * @return {?}
         */
        OrderConfirmationThankYouMessageComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.order$ = this.checkoutService.getOrderDetails().pipe(operators.tap((/**
             * @param {?} order
             * @return {?}
             */
            function (order) {
                _this.isGuestCustomer = order.guestCustomer;
                _this.orderGuid = order.guid;
            })));
        };
        /**
         * @return {?}
         */
        OrderConfirmationThankYouMessageComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.checkoutService.clearCheckoutData();
        };
        OrderConfirmationThankYouMessageComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-confirmation-thank-you-message',
                        template: "<ng-container *ngIf=\"order$ | async as order\">\n  <header class=\"cx-page-header\">\n    <h1 class=\"cx-page-title\">\n      {{ 'checkoutOrderConfirmation.confirmationOfOrder' | cxTranslate }}\n      {{ order.code }}\n    </h1>\n  </header>\n\n  <div class=\"cx-order-confirmation-message\">\n    <h2>{{ 'checkoutOrderConfirmation.thankYou' | cxTranslate }}</h2>\n    <p>\n      {{ 'checkoutOrderConfirmation.invoiceHasBeenSentByEmail' | cxTranslate }}\n    </p>\n    <!-- <a href=\"#\" class=\"btn-link\">Print Page</a> -->\n  </div>\n\n  <div *ngIf=\"isGuestCustomer\">\n    <cx-guest-register-form\n      [guid]=\"orderGuid\"\n      [email]=\"order.paymentInfo.billingAddress.email\"\n    ></cx-guest-register-form>\n  </div>\n\n  <cx-add-to-home-screen-banner></cx-add-to-home-screen-banner>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        OrderConfirmationThankYouMessageComponent.ctorParameters = function () { return [
            { type: core$1.CheckoutService }
        ]; };
        return OrderConfirmationThankYouMessageComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderConfirmationThankYouMessageComponent.prototype.order$;
        /** @type {?} */
        OrderConfirmationThankYouMessageComponent.prototype.isGuestCustomer;
        /** @type {?} */
        OrderConfirmationThankYouMessageComponent.prototype.orderGuid;
        /**
         * @type {?}
         * @protected
         */
        OrderConfirmationThankYouMessageComponent.prototype.checkoutService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderConfirmationTotalsComponent = /** @class */ (function () {
        function OrderConfirmationTotalsComponent(checkoutService) {
            this.checkoutService = checkoutService;
        }
        /**
         * @return {?}
         */
        OrderConfirmationTotalsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.order$ = this.checkoutService.getOrderDetails();
        };
        /**
         * @return {?}
         */
        OrderConfirmationTotalsComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.checkoutService.clearCheckoutData();
        };
        OrderConfirmationTotalsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-order-confirmation-totals',
                        template: "<div class=\"cx-order-summary container\" *ngIf=\"order$ | async as order\">\n  <div class=\"row justify-content-end\">\n    <div class=\"col-sm-12 col-md-6 col-lg-5 col-xl-4\">\n      <cx-order-summary [cart]=\"order\"></cx-order-summary>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        OrderConfirmationTotalsComponent.ctorParameters = function () { return [
            { type: core$1.CheckoutService }
        ]; };
        return OrderConfirmationTotalsComponent;
    }());
    if (false) {
        /** @type {?} */
        OrderConfirmationTotalsComponent.prototype.order$;
        /**
         * @type {?}
         * @protected
         */
        OrderConfirmationTotalsComponent.prototype.checkoutService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var GuestRegisterFormComponent = /** @class */ (function () {
        function GuestRegisterFormComponent(userService, routingService, authService, fb) {
            this.userService = userService;
            this.routingService = routingService;
            this.authService = authService;
            this.fb = fb;
            this.guestRegisterForm = this.fb.group({
                password: [
                    '',
                    [forms.Validators.required, CustomFormValidators.passwordValidator],
                ],
                passwordconf: ['', forms.Validators.required],
            }, { validator: CustomFormValidators.matchPassword });
        }
        /**
         * @return {?}
         */
        GuestRegisterFormComponent.prototype.submit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.userService.registerGuest(this.guid, this.guestRegisterForm.value.password);
            if (!this.subscription) {
                this.subscription = this.authService.getUserToken().subscribe((/**
                 * @param {?} token
                 * @return {?}
                 */
                function (token) {
                    if (token.access_token) {
                        _this.routingService.go({ cxRoute: 'home' });
                    }
                }));
            }
        };
        /**
         * @return {?}
         */
        GuestRegisterFormComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        GuestRegisterFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-guest-register-form',
                        template: "<div class=\"register-guest\">\n  <div class=\"col-md-6 col-lg-4\">\n    <h3>{{ 'checkoutOrderConfirmation.createAccount' | cxTranslate }}</h3>\n    <p>\n      {{\n        'checkoutOrderConfirmation.createAccountForNext'\n          | cxTranslate: { email: email }\n      }}\n    </p>\n\n    <form [formGroup]=\"guestRegisterForm\">\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'register.password.label' | cxTranslate\n          }}</span>\n          <input\n            class=\"form-control\"\n            [class.is-invalid]=\"\n              guestRegisterForm.get('password').invalid &&\n              guestRegisterForm.get('password').dirty\n            \"\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"{{ 'register.password.placeholder' | cxTranslate }}\"\n            formControlName=\"password\"\n          />\n          <div\n            class=\"invalid-feedback\"\n            *ngIf=\"\n              guestRegisterForm.get('password').invalid &&\n              guestRegisterForm.get('password').dirty\n            \"\n          >\n            <span>{{ 'register.passwordMinRequirements' | cxTranslate }}</span>\n          </div>\n        </label>\n      </div>\n\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'register.confirmPassword.label' | cxTranslate\n          }}</span>\n          <input\n            class=\"form-control\"\n            [class.is-invalid]=\"\n              guestRegisterForm.get('password').value !==\n              guestRegisterForm.get('passwordconf').value\n            \"\n            type=\"password\"\n            name=\"confirmpassword\"\n            placeholder=\"{{\n              'register.confirmPassword.placeholder' | cxTranslate\n            }}\"\n            formControlName=\"passwordconf\"\n          />\n          <div\n            class=\"invalid-feedback\"\n            *ngIf=\"\n              guestRegisterForm.get('password').value !==\n                guestRegisterForm.get('passwordconf').value &&\n              guestRegisterForm.get('passwordconf').value\n            \"\n          >\n            <span>{{ 'register.bothPasswordMustMatch' | cxTranslate }}</span>\n          </div>\n        </label>\n      </div>\n\n      <button\n        type=\"submit\"\n        (click)=\"submit()\"\n        [disabled]=\"guestRegisterForm.invalid\"\n        class=\"btn btn-block btn-primary\"\n      >\n        {{ 'common.submit' | cxTranslate }}\n      </button>\n    </form>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        GuestRegisterFormComponent.ctorParameters = function () { return [
            { type: core$1.UserService },
            { type: core$1.RoutingService },
            { type: core$1.AuthService },
            { type: forms.FormBuilder }
        ]; };
        GuestRegisterFormComponent.propDecorators = {
            guid: [{ type: core.Input }],
            email: [{ type: core.Input }]
        };
        return GuestRegisterFormComponent;
    }());
    if (false) {
        /** @type {?} */
        GuestRegisterFormComponent.prototype.guid;
        /** @type {?} */
        GuestRegisterFormComponent.prototype.email;
        /** @type {?} */
        GuestRegisterFormComponent.prototype.subscription;
        /** @type {?} */
        GuestRegisterFormComponent.prototype.guestRegisterForm;
        /**
         * @type {?}
         * @protected
         */
        GuestRegisterFormComponent.prototype.userService;
        /**
         * @type {?}
         * @protected
         */
        GuestRegisterFormComponent.prototype.routingService;
        /**
         * @type {?}
         * @protected
         */
        GuestRegisterFormComponent.prototype.authService;
        /**
         * @type {?}
         * @protected
         */
        GuestRegisterFormComponent.prototype.fb;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var OrderConfirmationGuard = /** @class */ (function () {
        function OrderConfirmationGuard(checkoutService, router, semanticPathService) {
            this.checkoutService = checkoutService;
            this.router = router;
            this.semanticPathService = semanticPathService;
        }
        /**
         * @return {?}
         */
        OrderConfirmationGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.checkoutService.getOrderDetails().pipe(operators.map((/**
             * @param {?} orderDetails
             * @return {?}
             */
            function (orderDetails) {
                if (orderDetails && Object.keys(orderDetails).length !== 0) {
                    return true;
                }
                else {
                    return _this.router.parseUrl(_this.semanticPathService.get('orders'));
                }
            })));
        };
        OrderConfirmationGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        OrderConfirmationGuard.ctorParameters = function () { return [
            { type: core$1.CheckoutService },
            { type: router.Router },
            { type: core$1.SemanticPathService }
        ]; };
        /** @nocollapse */ OrderConfirmationGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function OrderConfirmationGuard_Factory() { return new OrderConfirmationGuard(core.ɵɵinject(core$1.CheckoutService), core.ɵɵinject(router.Router), core.ɵɵinject(core$1.SemanticPathService)); }, token: OrderConfirmationGuard, providedIn: "root" });
        return OrderConfirmationGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        OrderConfirmationGuard.prototype.checkoutService;
        /**
         * @type {?}
         * @private
         */
        OrderConfirmationGuard.prototype.router;
        /**
         * @type {?}
         * @private
         */
        OrderConfirmationGuard.prototype.semanticPathService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var orderConfirmationComponents = [
        OrderConfirmationItemsComponent,
        OrderConfirmationOverviewComponent,
        OrderConfirmationThankYouMessageComponent,
        OrderConfirmationTotalsComponent,
        GuestRegisterFormComponent,
    ];
    var OrderConfirmationModule = /** @class */ (function () {
        function OrderConfirmationModule() {
        }
        OrderConfirmationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CartSharedModule,
                            CardModule,
                            PwaModule,
                            PromotionsModule,
                            core$1.I18nModule,
                            forms.ReactiveFormsModule,
                            core$1.FeaturesConfigModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    OrderConfirmationThankMessageComponent: {
                                        component: OrderConfirmationThankYouMessageComponent,
                                        guards: [OrderConfirmationGuard],
                                    },
                                    OrderConfirmationItemsComponent: {
                                        component: OrderConfirmationItemsComponent,
                                        guards: [OrderConfirmationGuard],
                                    },
                                    OrderConfirmationTotalsComponent: {
                                        component: OrderConfirmationTotalsComponent,
                                        guards: [OrderConfirmationGuard],
                                    },
                                    OrderConfirmationOverviewComponent: {
                                        component: OrderConfirmationOverviewComponent,
                                        guards: [OrderConfirmationGuard],
                                    },
                                },
                            }))),
                        ],
                        declarations: __spread(orderConfirmationComponents),
                        exports: __spread(orderConfirmationComponents),
                        entryComponents: __spread(orderConfirmationComponents),
                    },] }
        ];
        return OrderConfirmationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function ProductCarouselItem() { }
    if (false) {
        /** @type {?|undefined} */
        ProductCarouselItem.prototype.title;
        /** @type {?|undefined} */
        ProductCarouselItem.prototype.media;
        /** @type {?|undefined} */
        ProductCarouselItem.prototype.price;
        /** @type {?|undefined} */
        ProductCarouselItem.prototype.route;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductCarouselService = /** @class */ (function () {
        function ProductCarouselService(productService, referenceService, semanticPathService) {
            this.productService = productService;
            this.referenceService = referenceService;
            this.semanticPathService = semanticPathService;
        }
        /**
         * Loads the product data and converts it `CarouselItem`.
         */
        /**
         * Loads the product data and converts it `CarouselItem`.
         * @param {?} code
         * @return {?}
         */
        ProductCarouselService.prototype.loadProduct = /**
         * Loads the product data and converts it `CarouselItem`.
         * @param {?} code
         * @return {?}
         */
        function (code) {
            var _this = this;
            return this.productService.get(code).pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} product
             * @return {?}
             */
            function (product) { return _this.convertProduct(product); })));
        };
        /**
         * @param {?} code
         * @param {?} referenceType
         * @param {?} displayTitle
         * @param {?} displayProductPrices
         * @return {?}
         */
        ProductCarouselService.prototype.getProductReferences = /**
         * @param {?} code
         * @param {?} referenceType
         * @param {?} displayTitle
         * @param {?} displayProductPrices
         * @return {?}
         */
        function (code, referenceType, displayTitle, displayProductPrices) {
            var _this = this;
            return this.referenceService.get(code, referenceType).pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} refs
             * @return {?}
             */
            function (refs) {
                return refs.map((/**
                 * @param {?} ref
                 * @return {?}
                 */
                function (ref) {
                    return _this.convertProduct(ref.target, displayTitle, displayProductPrices);
                }));
            })));
        };
        /**
         * Converts the product to a generic CarouselItem
         */
        /**
         * Converts the product to a generic CarouselItem
         * @private
         * @param {?} source
         * @param {?=} displayTitle
         * @param {?=} displayProductPrices
         * @return {?}
         */
        ProductCarouselService.prototype.convertProduct = /**
         * Converts the product to a generic CarouselItem
         * @private
         * @param {?} source
         * @param {?=} displayTitle
         * @param {?=} displayProductPrices
         * @return {?}
         */
        function (source, displayTitle, displayProductPrices) {
            if (displayTitle === void 0) { displayTitle = true; }
            if (displayProductPrices === void 0) { displayProductPrices = true; }
            /** @type {?} */
            var item = {};
            if (displayTitle) {
                item.title = source.name;
            }
            if (displayProductPrices && source.price && source.price.formattedValue) {
                item.price = source.price.formattedValue;
            }
            if (source.images && source.images.PRIMARY) {
                item.media = {
                    container: source.images.PRIMARY,
                    format: 'product',
                };
            }
            item.route = this.semanticPathService.transform({
                cxRoute: 'product',
                params: source,
            });
            return item;
        };
        ProductCarouselService.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        ProductCarouselService.ctorParameters = function () { return [
            { type: core$1.ProductService },
            { type: core$1.ProductReferenceService },
            { type: core$1.SemanticPathService }
        ]; };
        /** @nocollapse */ ProductCarouselService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ProductCarouselService_Factory() { return new ProductCarouselService(core.ɵɵinject(core$1.ProductService), core.ɵɵinject(core$1.ProductReferenceService), core.ɵɵinject(core$1.SemanticPathService)); }, token: ProductCarouselService, providedIn: "root" });
        return ProductCarouselService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        ProductCarouselService.prototype.productService;
        /**
         * @type {?}
         * @protected
         */
        ProductCarouselService.prototype.referenceService;
        /**
         * @type {?}
         * @protected
         */
        ProductCarouselService.prototype.semanticPathService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductCarouselComponent = /** @class */ (function () {
        function ProductCarouselComponent(componentData, productService, features) {
            var _this = this;
            this.componentData = componentData;
            this.productService = productService;
            this.features = features;
            this.PRODUCT_SCOPE = this.features && this.features.isLevel('1.4') ? core$1.ProductScope.LIST : '';
            this.componentData$ = this.componentData.data$.pipe(operators.filter(Boolean));
            /**
             * returns an Obervable string for the title.
             */
            this.title$ = this.componentData$.pipe(operators.map((/**
             * @param {?} data
             * @return {?}
             */
            function (data) { return data.title; })));
            /**
             * Obervable that holds an Array of Observables. This is done, so that
             * the component UI could consider to lazy load the UI components when they're
             * in the viewpoint.
             */
            this.items$ = this.componentData$.pipe(operators.map((/**
             * @param {?} data
             * @return {?}
             */
            function (data) { return data.productCodes.trim().split(' '); })), operators.map((/**
             * @param {?} codes
             * @return {?}
             */
            function (codes) {
                return codes.map((/**
                 * @param {?} code
                 * @return {?}
                 */
                function (code) { return _this.productService.get(code, _this.PRODUCT_SCOPE); }));
            })));
        }
        ProductCarouselComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-carousel',
                        template: "<cx-carousel\n  [items]=\"items$ | async\"\n  [title]=\"title$ | async\"\n  [template]=\"carouselItem\"\n  itemWidth=\"285px\"\n>\n</cx-carousel>\n\n<ng-template #carouselItem let-item=\"item\">\n  <a tabindex=\"0\" [routerLink]=\"{ cxRoute: 'product', params: item } | cxUrl\">\n    <cx-media\n      *ngIf=\"item.images?.PRIMARY\"\n      [container]=\"item.images.PRIMARY\"\n      format=\"product\"\n    >\n    </cx-media>\n    <h4>{{ item.name }}</h4>\n    <div class=\"price\">{{ item.price?.formattedValue }}</div>\n  </a>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductCarouselComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: core$1.ProductService },
            { type: core$1.FeatureConfigService }
        ]; };
        return ProductCarouselComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        ProductCarouselComponent.prototype.PRODUCT_SCOPE;
        /**
         * @type {?}
         * @private
         */
        ProductCarouselComponent.prototype.componentData$;
        /**
         * returns an Obervable string for the title.
         * @type {?}
         */
        ProductCarouselComponent.prototype.title$;
        /**
         * Obervable that holds an Array of Observables. This is done, so that
         * the component UI could consider to lazy load the UI components when they're
         * in the viewpoint.
         * @type {?}
         */
        ProductCarouselComponent.prototype.items$;
        /**
         * @type {?}
         * @protected
         */
        ProductCarouselComponent.prototype.componentData;
        /**
         * @type {?}
         * @protected
         */
        ProductCarouselComponent.prototype.productService;
        /**
         * @type {?}
         * @protected
         */
        ProductCarouselComponent.prototype.features;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductCarouselModule = /** @class */ (function () {
        function ProductCarouselModule() {
        }
        ProductCarouselModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CarouselModule,
                            MediaModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductCarouselComponent: {
                                        component: ProductCarouselComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ProductCarouselComponent],
                        entryComponents: [ProductCarouselComponent],
                        exports: [ProductCarouselComponent],
                    },] }
        ];
        return ProductCarouselModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductReferencesComponent = /** @class */ (function () {
        function ProductReferencesComponent(component, current, referenceService) {
            var _this = this;
            this.component = component;
            this.current = current;
            this.referenceService = referenceService;
            /**
             * returns an Obervable string for the title
             */
            this.title$ = this.component.data$.pipe(operators.map((/**
             * @param {?} d
             * @return {?}
             */
            function (d) { return d.title; })));
            this.currentProductCode$ = this.current.getProduct().pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.code; })), operators.distinctUntilChanged(), operators.tap((/**
             * @return {?}
             */
            function () { return _this.referenceService.cleanReferences(); })));
            /**
             * Obervable with an Array of Observables. This is done, so that
             * the component UI could consider to lazy load the UI components when they're
             * in the viewpoint.
             */
            this.items$ = rxjs.combineLatest([
                this.currentProductCode$,
                this.component.data$,
            ]).pipe(operators.switchMap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), code = _b[0], data = _b[1];
                return _this.getProductReferences(code, data.productReferenceTypes);
            })));
        }
        /**
         * @private
         * @param {?} code
         * @param {?} referenceType
         * @return {?}
         */
        ProductReferencesComponent.prototype.getProductReferences = /**
         * @private
         * @param {?} code
         * @param {?} referenceType
         * @return {?}
         */
        function (code, referenceType) {
            return this.referenceService.get(code, referenceType).pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} refs
             * @return {?}
             */
            function (refs) { return refs.map((/**
             * @param {?} ref
             * @return {?}
             */
            function (ref) { return rxjs.of(ref.target); })); })));
        };
        ProductReferencesComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-references',
                        template: "<cx-carousel\n  [title]=\"title$ | async\"\n  [items]=\"items$ | async\"\n  [template]=\"carouselItem\"\n>\n</cx-carousel>\n\n<ng-template #carouselItem let-item=\"item\">\n  <a tabindex=\"0\" [routerLink]=\"{ cxRoute: 'product', params: item } | cxUrl\">\n    <cx-media\n      *ngIf=\"item.images?.PRIMARY\"\n      [container]=\"item.images.PRIMARY\"\n      format=\"product\"\n    >\n    </cx-media>\n    <h4>{{ item.name }}</h4>\n    <div class=\"price\">{{ item.price?.formattedValue }}</div>\n  </a>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductReferencesComponent.ctorParameters = function () { return [
            { type: CmsComponentData },
            { type: CurrentProductService },
            { type: core$1.ProductReferenceService }
        ]; };
        return ProductReferencesComponent;
    }());
    if (false) {
        /**
         * returns an Obervable string for the title
         * @type {?}
         */
        ProductReferencesComponent.prototype.title$;
        /**
         * @type {?}
         * @private
         */
        ProductReferencesComponent.prototype.currentProductCode$;
        /**
         * Obervable with an Array of Observables. This is done, so that
         * the component UI could consider to lazy load the UI components when they're
         * in the viewpoint.
         * @type {?}
         */
        ProductReferencesComponent.prototype.items$;
        /**
         * @type {?}
         * @protected
         */
        ProductReferencesComponent.prototype.component;
        /**
         * @type {?}
         * @protected
         */
        ProductReferencesComponent.prototype.current;
        /**
         * @type {?}
         * @protected
         */
        ProductReferencesComponent.prototype.referenceService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductReferencesModule = /** @class */ (function () {
        function ProductReferencesModule() {
        }
        ProductReferencesModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            CarouselModule,
                            MediaModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductReferencesComponent: {
                                        component: ProductReferencesComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ProductReferencesComponent],
                        entryComponents: [ProductReferencesComponent],
                        exports: [ProductReferencesComponent],
                    },] }
        ];
        return ProductReferencesModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaultScrollConfig = {
        view: {
            infiniteScroll: {
                active: false,
                productLimit: 0,
                showMoreButton: false,
            },
        },
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductImagesComponent = /** @class */ (function () {
        function ProductImagesComponent(currentProductService) {
            var _this = this;
            this.currentProductService = currentProductService;
            this.mainMediaContainer = new rxjs.BehaviorSubject(null);
            this.product$ = this.currentProductService.getProduct().pipe(operators.filter(Boolean), operators.distinctUntilChanged(), operators.tap((/**
             * @param {?} p
             * @return {?}
             */
            function (p) {
                return _this.mainMediaContainer.next(p.images ? p.images.PRIMARY : {});
            })));
            this.thumbs$ = this.product$.pipe(operators.map((/**
             * @param {?} product
             * @return {?}
             */
            function (product) { return _this.createThumbs(product); })), 
            // TODO: deprecated, remove the below tap (issue:#6166)
            operators.tap((/**
             * @param {?} thumbs
             * @return {?}
             */
            function (thumbs) {
                _this.isThumbsEmpty = thumbs.length === 0;
            })));
            this.mainImage$ = rxjs.combineLatest([this.product$, this.mainMediaContainer]).pipe(operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), container = _b[1];
                return container;
            })));
        }
        /**
         * @param {?} item
         * @return {?}
         */
        ProductImagesComponent.prototype.openImage = /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            this.mainMediaContainer.next(item);
        };
        /**
         * @param {?} thumbnail
         * @return {?}
         */
        ProductImagesComponent.prototype.isActive = /**
         * @param {?} thumbnail
         * @return {?}
         */
        function (thumbnail) {
            return this.mainMediaContainer.pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} container
             * @return {?}
             */
            function (container) {
                return (container.zoom &&
                    container.zoom.url &&
                    thumbnail.zoom &&
                    thumbnail.zoom.url &&
                    container.zoom.url === thumbnail.zoom.url);
            })));
        };
        /** find the index of the main media in the list of media */
        /**
         * find the index of the main media in the list of media
         * @param {?} thumbs
         * @return {?}
         */
        ProductImagesComponent.prototype.getActive = /**
         * find the index of the main media in the list of media
         * @param {?} thumbs
         * @return {?}
         */
        function (thumbs) {
            return this.mainMediaContainer.pipe(operators.filter(Boolean), operators.map((/**
             * @param {?} container
             * @return {?}
             */
            function (container) {
                /** @type {?} */
                var current = thumbs.find((/**
                 * @param {?} t
                 * @return {?}
                 */
                function (t) {
                    return t.media &&
                        container.zoom &&
                        t.media.container &&
                        t.media.container.zoom &&
                        t.media.container.zoom.url === container.zoom.url;
                }));
                return thumbs.indexOf(current);
            })));
        };
        /**
         * Return an array of CarouselItems for the product thumbnails.
         * In case there are less then 2 thumbs, we return null.
         */
        /**
         * Return an array of CarouselItems for the product thumbnails.
         * In case there are less then 2 thumbs, we return null.
         * @private
         * @param {?} product
         * @return {?}
         */
        ProductImagesComponent.prototype.createThumbs = /**
         * Return an array of CarouselItems for the product thumbnails.
         * In case there are less then 2 thumbs, we return null.
         * @private
         * @param {?} product
         * @return {?}
         */
        function (product) {
            if (!product.images ||
                !product.images.GALLERY ||
                product.images.GALLERY.length < 2) {
                return [];
            }
            return ((/** @type {?} */ (product.images.GALLERY))).map((/**
             * @param {?} c
             * @return {?}
             */
            function (c) { return rxjs.of({ container: c }); }));
        };
        ProductImagesComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-images',
                        template: "<ng-container *ngIf=\"mainImage$ | async as main\">\n  <cx-media [container]=\"main\" format=\"zoom\"> </cx-media>\n</ng-container>\n\n<ng-container *ngIf=\"thumbs$ | async as thumbs\">\n  <cx-carousel\n    *ngIf=\"thumbs.length\"\n    class=\"thumbs\"\n    [items]=\"thumbs\"\n    itemWidth=\"120px\"\n    [hideIndicators]=\"false\"\n    [template]=\"thumb\"\n  ></cx-carousel>\n</ng-container>\n\n<ng-template #thumb let-item=\"item\">\n  <cx-media\n    [container]=\"item.container\"\n    tabindex=\"0\"\n    format=\"thumbnail\"\n    (focus)=\"openImage(item.container)\"\n    [class.is-active]=\"isActive(item.container) | async\"\n  >\n  </cx-media>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductImagesComponent.ctorParameters = function () { return [
            { type: CurrentProductService }
        ]; };
        return ProductImagesComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ProductImagesComponent.prototype.mainMediaContainer;
        /**
         * @type {?}
         * @private
         */
        ProductImagesComponent.prototype.product$;
        /**
         * @deprecated since version 1.5
         * This variable will no longer be in use. Use thumbs$ observable instead.
         * TODO(issue:#6166).
         * @type {?}
         */
        ProductImagesComponent.prototype.isThumbsEmpty;
        /** @type {?} */
        ProductImagesComponent.prototype.thumbs$;
        /** @type {?} */
        ProductImagesComponent.prototype.mainImage$;
        /**
         * @type {?}
         * @private
         */
        ProductImagesComponent.prototype.currentProductService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductImagesModule = /** @class */ (function () {
        function ProductImagesModule() {
        }
        ProductImagesModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            MediaModule,
                            OutletModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductImagesComponent: {
                                        component: ProductImagesComponent,
                                    },
                                },
                            }))),
                            CarouselModule,
                        ],
                        declarations: [ProductImagesComponent],
                        entryComponents: [ProductImagesComponent],
                        exports: [ProductImagesComponent],
                    },] }
        ];
        return ProductImagesModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductIntroComponent = /** @class */ (function () {
        function ProductIntroComponent(currentProductService, translationService, winRef) {
            this.currentProductService = currentProductService;
            this.translationService = translationService;
            this.winRef = winRef;
            this.reviewsTabAvailable = new rxjs.BehaviorSubject(false);
            this.product$ = this.currentProductService.getProduct();
        }
        /**
         * @return {?}
         */
        ProductIntroComponent.prototype.ngAfterContentChecked = /**
         * @return {?}
         */
        function () {
            this.reviewsTabAvailable.next(!!this.getReviewsComponent());
        };
        // Scroll to views component on page and click "Reviews" tab
        // Scroll to views component on page and click "Reviews" tab
        /**
         * @return {?}
         */
        ProductIntroComponent.prototype.showReviews = 
        // Scroll to views component on page and click "Reviews" tab
        /**
         * @return {?}
         */
        function () {
            var _this = this;
            // Use translated label for Reviews tab reference
            this.translationService
                .translate('TabPanelContainer.tabs.ProductReviewsTabComponent')
                .subscribe((/**
             * @param {?} reviewsTabLabel
             * @return {?}
             */
            function (reviewsTabLabel) {
                /** @type {?} */
                var tabsComponent = _this.getTabsComponent();
                /** @type {?} */
                var reviewsTab = _this.getTabByLabel(reviewsTabLabel, tabsComponent);
                /** @type {?} */
                var reviewsComponent = _this.getReviewsComponent();
                if (reviewsTab && reviewsComponent) {
                    _this.clickTabIfInactive(reviewsTab);
                    setTimeout((/**
                     * @return {?}
                     */
                    function () { return reviewsComponent.scrollIntoView({ behavior: 'smooth' }); }), 0);
                }
            }))
                .unsubscribe();
        };
        // NOTE: Does not currently exists as its own component
        // but part of tabs component. This is likely to change in refactor.
        // NOTE: Does not currently exists as its own component
        // but part of tabs component. This is likely to change in refactor.
        /**
         * @private
         * @return {?}
         */
        ProductIntroComponent.prototype.getReviewsComponent = 
        // NOTE: Does not currently exists as its own component
        // but part of tabs component. This is likely to change in refactor.
        /**
         * @private
         * @return {?}
         */
        function () {
            return this.winRef.document.querySelector('cx-product-reviews');
        };
        // Get Tabs Component if exists on page
        // Get Tabs Component if exists on page
        /**
         * @private
         * @return {?}
         */
        ProductIntroComponent.prototype.getTabsComponent = 
        // Get Tabs Component if exists on page
        /**
         * @private
         * @return {?}
         */
        function () {
            return this.winRef.document.querySelector('cx-tab-paragraph-container');
        };
        // Click to activate tab if not already active
        // Click to activate tab if not already active
        /**
         * @private
         * @param {?} tab
         * @return {?}
         */
        ProductIntroComponent.prototype.clickTabIfInactive = 
        // Click to activate tab if not already active
        /**
         * @private
         * @param {?} tab
         * @return {?}
         */
        function (tab) {
            if (!tab.classList.contains('active') ||
                tab.classList.contains('toggled')) {
                tab.click();
            }
        };
        // Get Tab by label if exists on page
        // Get Tab by label if exists on page
        /**
         * @private
         * @param {?} label
         * @param {?} tabsComponent
         * @return {?}
         */
        ProductIntroComponent.prototype.getTabByLabel = 
        // Get Tab by label if exists on page
        /**
         * @private
         * @param {?} label
         * @param {?} tabsComponent
         * @return {?}
         */
        function (label, tabsComponent) {
            var e_1, _a;
            if (tabsComponent) {
                // NOTE: Reads through h3 tags to click on correct tab
                // There may be a better way of doing this now/after refactor
                /** @type {?} */
                var h3Elements = tabsComponent.getElementsByTagName('h3');
                try {
                    // Look through h3 tab elements until finding tab with label
                    for (var _b = __values(Array.from(h3Elements)), _c = _b.next(); !_c.done; _c = _b.next()) {
                        var h3Element = _c.value;
                        if (h3Element.innerHTML.includes(label)) {
                            return h3Element;
                        }
                    }
                }
                catch (e_1_1) { e_1 = { error: e_1_1 }; }
                finally {
                    try {
                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                    }
                    finally { if (e_1) throw e_1.error; }
                }
            }
        };
        ProductIntroComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-intro',
                        template: "<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"rating\" *ngIf=\"product.averageRating\">\n    <cx-star-rating\n      [rating]=\"product?.averageRating\"\n      [disabled]=\"true\"\n    ></cx-star-rating>\n    <div class=\"count\">({{ product?.numberOfReviews }})</div>\n    <a\n      class=\"btn-link\"\n      *ngIf=\"reviewsTabAvailable | async\"\n      (click)=\"showReviews()\"\n      >{{ 'productSummary.showReviews' | cxTranslate }}</a\n    >\n  </div>\n  <div class=\"rating\" *ngIf=\"!product.averageRating\">\n    {{ 'productDetails.noReviews' | cxTranslate }}\n  </div>\n  <div class=\"code\">\n    {{ 'productSummary.id' | cxTranslate }} {{ product?.code }}\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductIntroComponent.ctorParameters = function () { return [
            { type: CurrentProductService },
            { type: core$1.TranslationService },
            { type: core$1.WindowRef }
        ]; };
        return ProductIntroComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductIntroComponent.prototype.reviewsTabAvailable;
        /** @type {?} */
        ProductIntroComponent.prototype.product$;
        /**
         * @type {?}
         * @protected
         */
        ProductIntroComponent.prototype.currentProductService;
        /**
         * @type {?}
         * @private
         */
        ProductIntroComponent.prototype.translationService;
        /**
         * @type {?}
         * @protected
         */
        ProductIntroComponent.prototype.winRef;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductIntroModule = /** @class */ (function () {
        function ProductIntroModule() {
        }
        ProductIntroModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.I18nModule,
                            StarRatingModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductIntroComponent: {
                                        component: ProductIntroComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ProductIntroComponent],
                        exports: [ProductIntroComponent],
                        entryComponents: [ProductIntroComponent],
                    },] }
        ];
        return ProductIntroModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function ProductListRouteParams() { }
    if (false) {
        /** @type {?|undefined} */
        ProductListRouteParams.prototype.brandCode;
        /** @type {?|undefined} */
        ProductListRouteParams.prototype.categoryCode;
        /** @type {?|undefined} */
        ProductListRouteParams.prototype.query;
    }
    /**
     * @record
     */
    function SearchCriteria() { }
    if (false) {
        /** @type {?|undefined} */
        SearchCriteria.prototype.currentPage;
        /** @type {?|undefined} */
        SearchCriteria.prototype.pageSize;
        /** @type {?|undefined} */
        SearchCriteria.prototype.sortCode;
        /** @type {?|undefined} */
        SearchCriteria.prototype.query;
    }
    var ProductListComponentService = /** @class */ (function () {
        function ProductListComponentService(productSearchService, routing, activatedRoute, currencyService, languageService, router) {
            var _this = this;
            this.productSearchService = productSearchService;
            this.routing = routing;
            this.activatedRoute = activatedRoute;
            this.currencyService = currencyService;
            this.languageService = languageService;
            this.router = router;
            this.defaultPageSize = 10;
            this.RELEVANCE_CATEGORY = ':relevance:category:';
            this.RELEVANCE_BRAND = ':relevance:brand:';
            this.searchResults$ = this.productSearchService
                .getResults()
                .pipe(operators.filter((/**
             * @param {?} searchResult
             * @return {?}
             */
            function (searchResult) { return Object.keys(searchResult).length > 0; })));
            this.searchByRouting$ = rxjs.combineLatest([
                this.routing.getRouterState().pipe(operators.distinctUntilChanged((/**
                 * @param {?} x
                 * @param {?} y
                 * @return {?}
                 */
                function (x, y) {
                    // router emits new value also when the anticipated `nextState` changes
                    // but we want to perform search only when current url changes
                    return x.state.url === y.state.url;
                }))),
                // also trigger search on site context changes
                this.languageService.getActive(),
                this.currencyService.getActive(),
            ]).pipe(operators.pluck(0, 'state'), operators.tap((/**
             * @param {?} state
             * @return {?}
             */
            function (state) {
                /** @type {?} */
                var criteria = _this.getCriteriaFromRoute(state.params, state.queryParams);
                _this.search(criteria);
            })));
            /**
             * This stream should be used only on the Product Listing Page.
             *
             * It not only emits search results, but also performs a search on every change
             * of the route (i.e. route params or query params).
             *
             * When a user leaves the PLP route, the PLP component unsubscribes from this stream
             * so no longer the search is performed on route change.
             */
            this.model$ = rxjs.combineLatest([
                this.searchResults$,
                this.searchByRouting$,
            ]).pipe(operators.pluck(0), operators.shareReplay({ bufferSize: 1, refCount: true }));
        }
        /**
         * @return {?}
         */
        ProductListComponentService.prototype.clearSearchResults = /**
         * @return {?}
         */
        function () {
            this.productSearchService.clearResults();
        };
        /**
         * @private
         * @param {?} routeParams
         * @param {?} queryParams
         * @return {?}
         */
        ProductListComponentService.prototype.getCriteriaFromRoute = /**
         * @private
         * @param {?} routeParams
         * @param {?} queryParams
         * @return {?}
         */
        function (routeParams, queryParams) {
            return {
                query: queryParams.query || this.getQueryFromRouteParams(routeParams),
                pageSize: queryParams.pageSize || this.defaultPageSize,
                currentPage: queryParams.currentPage,
                sortCode: queryParams.sortCode,
            };
        };
        /**
         * @private
         * @param {?} __0
         * @return {?}
         */
        ProductListComponentService.prototype.getQueryFromRouteParams = /**
         * @private
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var brandCode = _a.brandCode, categoryCode = _a.categoryCode, query = _a.query;
            if (query) {
                return query;
            }
            if (categoryCode) {
                return this.RELEVANCE_CATEGORY + categoryCode;
            }
            if (brandCode) {
                return this.RELEVANCE_BRAND + brandCode;
            }
        };
        /**
         * @private
         * @param {?} criteria
         * @return {?}
         */
        ProductListComponentService.prototype.search = /**
         * @private
         * @param {?} criteria
         * @return {?}
         */
        function (criteria) {
            /** @type {?} */
            var query = criteria.query;
            /** @type {?} */
            var searchConfig = this.getSearchConfig(criteria);
            this.productSearchService.search(query, searchConfig);
        };
        /**
         * @private
         * @param {?} criteria
         * @return {?}
         */
        ProductListComponentService.prototype.getSearchConfig = /**
         * @private
         * @param {?} criteria
         * @return {?}
         */
        function (criteria) {
            /** @type {?} */
            var result = {
                currentPage: criteria.currentPage,
                pageSize: criteria.pageSize,
                sortCode: criteria.sortCode,
            };
            // drop empty keys
            Object.keys(result).forEach((/**
             * @param {?} key
             * @return {?}
             */
            function (key) { return !result[key] && delete result[key]; }));
            return result;
        };
        /**
         * @param {?} query
         * @return {?}
         */
        ProductListComponentService.prototype.setQuery = /**
         * @param {?} query
         * @return {?}
         */
        function (query) {
            this.setQueryParams({ query: query, currentPage: undefined });
        };
        /**
         * @param {?} pageNumber
         * @return {?}
         */
        ProductListComponentService.prototype.viewPage = /**
         * @param {?} pageNumber
         * @return {?}
         */
        function (pageNumber) {
            this.setQueryParams({ currentPage: pageNumber });
        };
        /**
         * Get items from a given page without using navigation
         */
        /**
         * Get items from a given page without using navigation
         * @param {?} pageNumber
         * @return {?}
         */
        ProductListComponentService.prototype.getPageItems = /**
         * Get items from a given page without using navigation
         * @param {?} pageNumber
         * @return {?}
         */
        function (pageNumber) {
            var _this = this;
            this.routing
                .getRouterState()
                .subscribe((/**
             * @param {?} route
             * @return {?}
             */
            function (route) {
                /** @type {?} */
                var routeCriteria = _this.getCriteriaFromRoute(route.state.params, route.state.queryParams);
                /** @type {?} */
                var criteria = __assign({}, routeCriteria, { currentPage: pageNumber });
                _this.search(criteria);
            }))
                .unsubscribe();
        };
        /**
         * @param {?} sortCode
         * @return {?}
         */
        ProductListComponentService.prototype.sort = /**
         * @param {?} sortCode
         * @return {?}
         */
        function (sortCode) {
            this.setQueryParams({ sortCode: sortCode });
        };
        /**
         * @private
         * @param {?} queryParams
         * @return {?}
         */
        ProductListComponentService.prototype.setQueryParams = /**
         * @private
         * @param {?} queryParams
         * @return {?}
         */
        function (queryParams) {
            this.router.navigate([], {
                queryParams: queryParams,
                queryParamsHandling: 'merge',
                relativeTo: this.activatedRoute,
            });
        };
        ProductListComponentService.decorators = [
            { type: core.Injectable, args: [{ providedIn: 'root' },] }
        ];
        /** @nocollapse */
        ProductListComponentService.ctorParameters = function () { return [
            { type: core$1.ProductSearchService },
            { type: core$1.RoutingService },
            { type: router.ActivatedRoute },
            { type: core$1.CurrencyService },
            { type: core$1.LanguageService },
            { type: router.Router }
        ]; };
        /** @nocollapse */ ProductListComponentService.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ProductListComponentService_Factory() { return new ProductListComponentService(core.ɵɵinject(core$1.ProductSearchService), core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(router.ActivatedRoute), core.ɵɵinject(core$1.CurrencyService), core.ɵɵinject(core$1.LanguageService), core.ɵɵinject(router.Router)); }, token: ProductListComponentService, providedIn: "root" });
        return ProductListComponentService;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.defaultPageSize;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.sub;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.RELEVANCE_CATEGORY;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.RELEVANCE_BRAND;
        /**
         * @type {?}
         * @private
         */
        ProductListComponentService.prototype.searchResults$;
        /**
         * @type {?}
         * @private
         */
        ProductListComponentService.prototype.searchByRouting$;
        /**
         * This stream should be used only on the Product Listing Page.
         *
         * It not only emits search results, but also performs a search on every change
         * of the route (i.e. route params or query params).
         *
         * When a user leaves the PLP route, the PLP component unsubscribes from this stream
         * so no longer the search is performed on route change.
         * @type {?}
         */
        ProductListComponentService.prototype.model$;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.productSearchService;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.routing;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.activatedRoute;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.currencyService;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.languageService;
        /**
         * @type {?}
         * @protected
         */
        ProductListComponentService.prototype.router;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var ViewModes = {
        Grid: 'grid',
        List: 'list',
    };
    var ProductViewComponent = /** @class */ (function () {
        function ProductViewComponent() {
            this.iconTypes = ICON_TYPE;
            this.modeChange = new core.EventEmitter();
        }
        Object.defineProperty(ProductViewComponent.prototype, "buttonClass", {
            get: /**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var viewName = this.viewMode.toLowerCase();
                return "cx-product-" + viewName;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ProductViewComponent.prototype, "viewMode", {
            /**
             *   Display icons inversely to allow users
             *   to see the view they will navigate to
             */
            get: /**
             *   Display icons inversely to allow users
             *   to see the view they will navigate to
             * @return {?}
             */
            function () {
                if (this.mode === 'list') {
                    return this.iconTypes.GRID;
                }
                else if (this.mode === 'grid') {
                    return this.iconTypes.LIST;
                }
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        ProductViewComponent.prototype.changeMode = /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var newMode = this.mode === ViewModes.Grid ? ViewModes.List : ViewModes.Grid;
            this.modeChange.emit(newMode);
        };
        ProductViewComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-view',
                        template: "<div class=\"cx-product-layout\" (click)=\"changeMode()\">\n  <div [ngClass]=\"buttonClass\">\n    <cx-icon\n      *ngIf=\"viewMode === iconTypes.GRID\"\n      [type]=\"iconTypes.GRID\"\n    ></cx-icon>\n    <cx-icon\n      *ngIf=\"viewMode === iconTypes.LIST\"\n      [type]=\"iconTypes.LIST\"\n    ></cx-icon>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        ProductViewComponent.propDecorators = {
            mode: [{ type: core.Input }],
            modeChange: [{ type: core.Output }]
        };
        return ProductViewComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductViewComponent.prototype.iconTypes;
        /** @type {?} */
        ProductViewComponent.prototype.mode;
        /** @type {?} */
        ProductViewComponent.prototype.modeChange;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductListComponent = /** @class */ (function () {
        function ProductListComponent(pageLayoutService, productListComponentService, scrollConfig) {
            this.pageLayoutService = pageLayoutService;
            this.productListComponentService = productListComponentService;
            this.scrollConfig = scrollConfig;
            this.subscription = new rxjs.Subscription();
            this.model$ = this.productListComponentService
                .model$;
            this.viewMode$ = new rxjs.BehaviorSubject(ViewModes.Grid);
            this.ViewModes = ViewModes;
        }
        /**
         * @return {?}
         */
        ProductListComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.isInfiniteScroll = this.scrollConfig.view.infiniteScroll.active;
            this.productListComponentService.clearSearchResults();
            this.subscription.add(this.pageLayoutService.templateName$.pipe(operators.take(1)).subscribe((/**
             * @param {?} template
             * @return {?}
             */
            function (template) {
                _this.viewMode$.next(template === 'ProductGridPageTemplate'
                    ? ViewModes.Grid
                    : ViewModes.List);
            })));
        };
        /**
         * @param {?} pageNumber
         * @return {?}
         */
        ProductListComponent.prototype.viewPage = /**
         * @param {?} pageNumber
         * @return {?}
         */
        function (pageNumber) {
            this.productListComponentService.viewPage(pageNumber);
        };
        /**
         * @param {?} sortCode
         * @return {?}
         */
        ProductListComponent.prototype.sortList = /**
         * @param {?} sortCode
         * @return {?}
         */
        function (sortCode) {
            this.productListComponentService.sort(sortCode);
        };
        /**
         * @param {?} mode
         * @return {?}
         */
        ProductListComponent.prototype.setViewMode = /**
         * @param {?} mode
         * @return {?}
         */
        function (mode) {
            this.viewMode$.next(mode);
        };
        /**
         * @return {?}
         */
        ProductListComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
        };
        ProductListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-list',
                        template: "<div class=\"cx-page\" *ngIf=\"model$ | async as model\">\n  <section class=\"cx-page-section\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-12 col-lg-12\" *ngIf=\"viewMode$ | async as viewMode\">\n          <div class=\"cx-sorting top\">\n            <div class=\"row\">\n              <div class=\"col-12 col-lg-4 mr-auto\">\n                <div class=\"form-group cx-sort-dropdown\">\n                  <cx-sorting\n                    [sortOptions]=\"model.sorts\"\n                    (sortListEvent)=\"sortList($event)\"\n                    [selectedOption]=\"model.pagination.sort\"\n                    placeholder=\"{{\n                      'productList.sortByRelevance' | cxTranslate\n                    }}\"\n                  ></cx-sorting>\n                </div>\n              </div>\n              <div *ngIf=\"!isInfiniteScroll\" class=\"col-auto\">\n                <div\n                  class=\"cx-pagination\"\n                  aria-label=\"product search pagination\"\n                >\n                  <cx-pagination\n                    [pagination]=\"model.pagination\"\n                    (viewPageEvent)=\"viewPage($event)\"\n                  ></cx-pagination>\n                </div>\n              </div>\n              <div class=\"col-auto ml-auto ml-lg-0\">\n                <cx-product-view\n                  (modeChange)=\"setViewMode($event)\"\n                  [mode]=\"viewMode\"\n                ></cx-product-view>\n              </div>\n            </div>\n          </div>\n          <div class=\"cx-product-container\">\n            <!-- Product list when using pagination -->\n            <ng-container *ngIf=\"!isInfiniteScroll; else infiniteScroll\">\n              <ng-container *ngIf=\"viewMode === ViewModes.Grid\">\n                <div class=\"row\">\n                  <cx-product-grid-item\n                    *ngFor=\"let product of model?.products\"\n                    [product]=\"product\"\n                    class=\"col-12 col-sm-6 col-md-4\"\n                  ></cx-product-grid-item>\n                </div>\n              </ng-container>\n\n              <ng-container *ngIf=\"viewMode === ViewModes.List\">\n                <cx-product-list-item\n                  *ngFor=\"let product of model?.products\"\n                  [product]=\"product\"\n                  class=\"cx-product-search-list\"\n                ></cx-product-list-item>\n              </ng-container>\n            </ng-container>\n\n            <!-- Product list when using infinite scroll -->\n            <ng-template #infiniteScroll>\n              <cx-product-scroll\n                [scrollConfig]=\"scrollConfig\"\n                [model]=\"model\"\n                [inputViewMode]=\"viewMode\"\n              ></cx-product-scroll>\n            </ng-template>\n          </div>\n          <div class=\"cx-sorting bottom\">\n            <div class=\"row\">\n              <div class=\"col-12 col-lg-4 mr-auto\">\n                <div class=\"form-group cx-sort-dropdown\">\n                  <cx-sorting\n                    [sortOptions]=\"model.sorts\"\n                    (sortListEvent)=\"sortList($event)\"\n                    [selectedOption]=\"model.pagination.sort\"\n                    placeholder=\"{{\n                      'productList.sortByRelevance' | cxTranslate\n                    }}\"\n                  ></cx-sorting>\n                </div>\n              </div>\n              <div\n                *ngIf=\"!isInfiniteScroll\"\n                class=\"col-auto\"\n                aria-label=\"product search pagination\"\n              >\n                <div class=\"cx-pagination\">\n                  <cx-pagination\n                    [pagination]=\"model.pagination\"\n                    (viewPageEvent)=\"viewPage($event)\"\n                  ></cx-pagination>\n                </div>\n              </div>\n              <div class=\"col-auto ml-auto ml-lg-0\">\n                <cx-product-view\n                  (modeChange)=\"setViewMode($event)\"\n                  [mode]=\"viewMode\"\n                ></cx-product-view>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        ProductListComponent.ctorParameters = function () { return [
            { type: PageLayoutService },
            { type: ProductListComponentService },
            { type: ViewConfig }
        ]; };
        return ProductListComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ProductListComponent.prototype.subscription;
        /** @type {?} */
        ProductListComponent.prototype.isInfiniteScroll;
        /** @type {?} */
        ProductListComponent.prototype.model$;
        /** @type {?} */
        ProductListComponent.prototype.viewMode$;
        /** @type {?} */
        ProductListComponent.prototype.ViewModes;
        /**
         * @type {?}
         * @private
         */
        ProductListComponent.prototype.pageLayoutService;
        /**
         * @type {?}
         * @private
         */
        ProductListComponent.prototype.productListComponentService;
        /** @type {?} */
        ProductListComponent.prototype.scrollConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductScrollComponent = /** @class */ (function () {
        function ProductScrollComponent(productListComponentService, ref) {
            this.productListComponentService = productListComponentService;
            this.ref = ref;
            this.subscription = new rxjs.Subscription();
            this.ViewModes = ViewModes;
            this.appendProducts = false;
            this.resetList = false;
            this.isMaxProducts = false;
            this.isLastPage = false;
            this.isEmpty = false;
        }
        Object.defineProperty(ProductScrollComponent.prototype, "setConfig", {
            set: /**
             * @param {?} inputConfig
             * @return {?}
             */
            function (inputConfig) {
                this.setComponentConfigurations(inputConfig);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ProductScrollComponent.prototype, "setModel", {
            set: /**
             * @param {?} inputModel
             * @return {?}
             */
            function (inputModel) {
                this.infiniteScrollOperations(inputModel);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(ProductScrollComponent.prototype, "setViewMode", {
            set: /**
             * @param {?} inputViewMode
             * @return {?}
             */
            function (inputViewMode) {
                this.inputViewMode = inputViewMode;
                //If viewMode is already set (meaning it is not the first load)
                //Reset the product list
                if (this.viewMode) {
                    this.resetListOnViewModeChange();
                }
                else {
                    //If viewMode is not set (meaning it is the first load)
                    //Set the viewMode
                    this.viewMode = inputViewMode;
                }
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} pageNumber
         * @return {?}
         */
        ProductScrollComponent.prototype.scrollPage = /**
         * @param {?} pageNumber
         * @return {?}
         */
        function (pageNumber) {
            this.appendProducts = true;
            this.ref.markForCheck();
            this.productListComponentService.getPageItems(pageNumber);
        };
        /**
         * @param {?} pageNumber
         * @return {?}
         */
        ProductScrollComponent.prototype.loadNextPage = /**
         * @param {?} pageNumber
         * @return {?}
         */
        function (pageNumber) {
            this.isMaxProducts = false;
            this.scrollPage(pageNumber);
        };
        /**
         * @return {?}
         */
        ProductScrollComponent.prototype.scrollToTop = /**
         * @return {?}
         */
        function () {
            window.scroll(0, 0);
        };
        /**
         * @private
         * @param {?} scrollConfig
         * @return {?}
         */
        ProductScrollComponent.prototype.setComponentConfigurations = /**
         * @private
         * @param {?} scrollConfig
         * @return {?}
         */
        function (scrollConfig) {
            /** @type {?} */
            var isButton = scrollConfig.view.infiniteScroll.showMoreButton;
            /** @type {?} */
            var configProductLimit = scrollConfig.view.infiniteScroll.productLimit;
            //Display "show more" button every time when button configuration is true
            //Otherwise, only display "show more" when the configuration product limit is reached
            this.productLimit = isButton ? 1 : configProductLimit;
        };
        /**
         * @private
         * @param {?} inputModel
         * @return {?}
         */
        ProductScrollComponent.prototype.infiniteScrollOperations = /**
         * @private
         * @param {?} inputModel
         * @return {?}
         */
        function (inputModel) {
            if (this.isSamePage(inputModel)) {
                return;
            }
            if (this.appendProducts) {
                this.model = __assign({}, inputModel, { products: this.model.products.concat(inputModel.products) });
            }
            else {
                this.model = inputModel;
                this.maxProducts = this.productLimit;
            }
            this.setConditions();
            this.ref.markForCheck();
        };
        /**
         * @private
         * @return {?}
         */
        ProductScrollComponent.prototype.resetListOnViewModeChange = /**
         * @private
         * @return {?}
         */
        function () {
            this.scrollToTop();
            this.resetList = true;
            this.productListComponentService.getPageItems(0);
        };
        //Set booleans after model has been retrieved
        //Set booleans after model has been retrieved
        /**
         * @private
         * @return {?}
         */
        ProductScrollComponent.prototype.setConditions = 
        //Set booleans after model has been retrieved
        /**
         * @private
         * @return {?}
         */
        function () {
            this.isEmpty = !this.model.products || this.model.products.length === 0;
            this.isLastPage =
                this.model.pagination.currentPage ===
                    this.model.pagination.totalPages - 1;
            this.isMaxProducts =
                this.productLimit &&
                    this.productLimit !== 0 &&
                    this.model.products.length >= this.maxProducts;
            //Add the productLimit to the current number of products to determine the next max number of products
            if (this.isMaxProducts) {
                this.maxProducts = this.model.products.length + this.productLimit;
            }
            //Only change viewMode once the new model is set
            //This prevents flickering issues
            if (this.viewMode !== this.inputViewMode) {
                this.viewMode = this.inputViewMode;
            }
            this.resetList = false;
            this.appendProducts = false;
        };
        /**
         * @deprecated at release 2.0.
         * If the new list is the same and it is not intended to reset the list then return true
         * Return false otherwise.
         */
        /**
         * @deprecated at release 2.0.
         * If the new list is the same and it is not intended to reset the list then return true
         * Return false otherwise.
         * @private
         * @param {?} inputModel
         * @return {?}
         */
        ProductScrollComponent.prototype.isSamePage = /**
         * @deprecated at release 2.0.
         * If the new list is the same and it is not intended to reset the list then return true
         * Return false otherwise.
         * @private
         * @param {?} inputModel
         * @return {?}
         */
        function (inputModel) {
            if (!this.resetList &&
                this.model &&
                this.model.breadcrumbs &&
                inputModel.breadcrumbs &&
                this.model.breadcrumbs.length > 0 &&
                inputModel.breadcrumbs.length > 0) {
                if (this.model.breadcrumbs.length === inputModel.breadcrumbs.length) {
                    for (var i = 0; i < this.model.breadcrumbs.length; i++) {
                        if (this.model.breadcrumbs[i].facetCode ===
                            inputModel.breadcrumbs[i].facetCode &&
                            this.model.breadcrumbs[i].facetValueCode ===
                                inputModel.breadcrumbs[i].facetValueCode &&
                            this.model.breadcrumbs[i].removeQuery.query.value ===
                                inputModel.breadcrumbs[i].removeQuery.query.value &&
                            this.model.pagination.currentPage ===
                                inputModel.pagination.currentPage) {
                            return true;
                        }
                    }
                }
            }
            return false;
        };
        /**
         * @return {?}
         */
        ProductScrollComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
        };
        ProductScrollComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-scroll',
                        template: "<ng-container *ngIf=\"viewMode === ViewModes.Grid\">\n  <div\n    infiniteScroll\n    [infiniteScrollDistance]=\"5\"\n    [infiniteScrollThrottle]=\"50\"\n    [infiniteScrollDisabled]=\"isMaxProducts || isLastPage || isEmpty\"\n    (scrolled)=\"scrollPage(model?.pagination?.currentPage + 1)\"\n  >\n    <div class=\"row\">\n      <cx-product-grid-item\n        *ngFor=\"let product of model?.products\"\n        [product]=\"product\"\n        class=\"col-12 col-sm-6 col-md-4\"\n      ></cx-product-grid-item>\n    </div>\n    <div\n      [className]=\"\n        !isLastPage && model?.pagination?.currentPage > 0\n          ? 'cx-double-btn-container grid-btn-padding'\n          : 'cx-single-btn-container grid-btn-padding'\n      \"\n    >\n      <div\n        *ngIf=\"\n          (isMaxProducts || isLastPage) && model?.pagination?.currentPage > 0\n        \"\n        (click)=\"scrollToTop()\"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'productList.backToTopBtn' | cxTranslate }}\n      </div>\n      <div\n        *ngIf=\"isMaxProducts && !isLastPage\"\n        (click)=\"loadNextPage(model?.pagination?.currentPage + 1)\"\n        class=\"btn btn-block btn-action align-btn\"\n      >\n        {{ 'productList.showMoreBtn' | cxTranslate }}\n      </div>\n    </div>\n    <div *ngIf=\"appendProducts\" class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n</ng-container>\n\n<ng-container *ngIf=\"viewMode === ViewModes.List\">\n  <div\n    infiniteScroll\n    [infiniteScrollDistance]=\"3\"\n    [infiniteScrollThrottle]=\"50\"\n    [infiniteScrollDisabled]=\"isMaxProducts || isLastPage || isEmpty\"\n    (scrolled)=\"scrollPage(model?.pagination?.currentPage + 1)\"\n  >\n    <cx-product-list-item\n      *ngFor=\"let product of model?.products\"\n      [product]=\"product\"\n      class=\"cx-product-search-list\"\n    ></cx-product-list-item>\n    <div\n      [className]=\"\n        !isLastPage && model?.pagination?.currentPage > 0\n          ? 'cx-double-btn-container'\n          : 'cx-single-btn-container'\n      \"\n    >\n      <div\n        *ngIf=\"\n          (isMaxProducts || isLastPage) && model?.pagination?.currentPage > 0\n        \"\n        (click)=\"scrollToTop()\"\n        class=\"btn btn-block btn-action\"\n      >\n        {{ 'productList.backToTopBtn' | cxTranslate }}\n      </div>\n      <div\n        *ngIf=\"isMaxProducts && !isLastPage\"\n        (click)=\"loadNextPage(model?.pagination?.currentPage + 1)\"\n        class=\"btn btn-block btn-action align-btn\"\n      >\n        {{ 'productList.showMoreBtn' | cxTranslate }}\n      </div>\n    </div>\n    <div *ngIf=\"appendProducts\" class=\"cx-spinner\">\n      <cx-spinner></cx-spinner>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        ProductScrollComponent.ctorParameters = function () { return [
            { type: ProductListComponentService },
            { type: core.ChangeDetectorRef }
        ]; };
        ProductScrollComponent.propDecorators = {
            setConfig: [{ type: core.Input, args: ['scrollConfig',] }],
            setModel: [{ type: core.Input, args: ['model',] }],
            setViewMode: [{ type: core.Input, args: ['inputViewMode',] }]
        };
        return ProductScrollComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ProductScrollComponent.prototype.subscription;
        /** @type {?} */
        ProductScrollComponent.prototype.model;
        /** @type {?} */
        ProductScrollComponent.prototype.inputViewMode;
        /** @type {?} */
        ProductScrollComponent.prototype.viewMode;
        /** @type {?} */
        ProductScrollComponent.prototype.productLimit;
        /** @type {?} */
        ProductScrollComponent.prototype.maxProducts;
        /** @type {?} */
        ProductScrollComponent.prototype.ViewModes;
        /** @type {?} */
        ProductScrollComponent.prototype.appendProducts;
        /** @type {?} */
        ProductScrollComponent.prototype.resetList;
        /** @type {?} */
        ProductScrollComponent.prototype.isMaxProducts;
        /** @type {?} */
        ProductScrollComponent.prototype.isLastPage;
        /** @type {?} */
        ProductScrollComponent.prototype.isEmpty;
        /**
         * @type {?}
         * @private
         */
        ProductScrollComponent.prototype.productListComponentService;
        /**
         * @type {?}
         * @private
         */
        ProductScrollComponent.prototype.ref;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductFacetNavigationComponent = /** @class */ (function () {
        function ProductFacetNavigationComponent(modalService, activatedRoute, productListComponentService) {
            this.modalService = modalService;
            this.activatedRoute = activatedRoute;
            this.productListComponentService = productListComponentService;
            this.iconTypes = ICON_TYPE;
            this.minPerFacet = 6;
            this.collapsedFacets = new Set();
            this.showAllPerFacetMap = new Map();
            this.queryCodec = new http.HttpUrlEncodingCodec();
        }
        /**
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.sub = this.activatedRoute.params.subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                _this.activeFacetValueCode = params.categoryCode || params.brandCode;
            }));
            this.searchResult$ = this.productListComponentService.model$.pipe(operators.tap((/**
             * @param {?} searchResult
             * @return {?}
             */
            function (searchResult) {
                if (searchResult.facets) {
                    searchResult.facets.forEach((/**
                     * @param {?} el
                     * @return {?}
                     */
                    function (el) {
                        _this.showAllPerFacetMap.set(el.name, false);
                    }));
                }
            })));
            this.visibleFacets$ = this.searchResult$.pipe(operators.map((/**
             * @param {?} searchResult
             * @return {?}
             */
            function (searchResult) {
                return searchResult.facets
                    ? searchResult.facets.filter((/**
                     * @param {?} facet
                     * @return {?}
                     */
                    function (facet) { return facet.visible; }))
                    : [];
            })));
        };
        /**
         * @param {?} content
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.openFilterModal = /**
         * @param {?} content
         * @return {?}
         */
        function (content) {
            this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title' });
        };
        /**
         * @param {?} query
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.toggleValue = /**
         * @param {?} query
         * @return {?}
         */
        function (query) {
            this.productListComponentService.setQuery(this.queryCodec.decodeValue(query));
        };
        /**
         * @param {?} facetName
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.showLess = /**
         * @param {?} facetName
         * @return {?}
         */
        function (facetName) {
            this.updateShowAllPerFacetMap(facetName, false);
        };
        /**
         * @param {?} facetName
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.showMore = /**
         * @param {?} facetName
         * @return {?}
         */
        function (facetName) {
            this.updateShowAllPerFacetMap(facetName, true);
        };
        /**
         * @private
         * @param {?} facetName
         * @param {?} showAll
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.updateShowAllPerFacetMap = /**
         * @private
         * @param {?} facetName
         * @param {?} showAll
         * @return {?}
         */
        function (facetName, showAll) {
            this.showAllPerFacetMap.set(facetName, showAll);
        };
        /**
         * @param {?} facetName
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.isFacetCollapsed = /**
         * @param {?} facetName
         * @return {?}
         */
        function (facetName) {
            return this.collapsedFacets.has(facetName);
        };
        /**
         * @param {?} facetName
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.toggleFacet = /**
         * @param {?} facetName
         * @return {?}
         */
        function (facetName) {
            if (this.collapsedFacets.has(facetName)) {
                this.collapsedFacets.delete(facetName);
            }
            else {
                this.collapsedFacets.add(facetName);
            }
        };
        /**
         * @param {?} facet
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.getVisibleFacetValues = /**
         * @param {?} facet
         * @return {?}
         */
        function (facet) {
            return facet.values.slice(0, this.showAllPerFacetMap.get(facet.name)
                ? facet.values.length
                : this.minPerFacet);
        };
        /**
         * @return {?}
         */
        ProductFacetNavigationComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.sub) {
                this.sub.unsubscribe();
            }
        };
        ProductFacetNavigationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-facet-navigation',
                        template: "<ng-container *ngIf=\"searchResult$ | async as searchResult\">\n  <div class=\"cx-search-facet\">\n    <ng-container *ngIf=\"searchResult.breadcrumbs?.length\">\n      <h4 class=\"cx-facet-filter-header\">\n        {{ 'productList.filterBy.label' | cxTranslate }}\n      </h4>\n      <div class=\"cx-facet-filter-container\">\n        <div\n          *ngFor=\"let breadcrumb of searchResult.breadcrumbs\"\n          [hidden]=\"breadcrumb.facetValueCode === activeFacetValueCode\"\n          class=\"cx-facet-filter-pill\"\n          role=\"filter\"\n        >\n          <span class=\"cx-facet-pill-value\">{{\n            breadcrumb.facetValueName\n          }}</span>\n          <button\n            type=\"button\"\n            class=\"close\"\n            aria-label=\"Close\"\n            (click)=\"toggleValue(breadcrumb.removeQuery.query.value)\"\n          >\n            <span aria-hidden=\"true\">\n              <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n            </span>\n          </button>\n        </div>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"visibleFacets$ | async as visibleFacets\">\n      <ng-container *ngFor=\"let facet of visibleFacets; let facetId = index\">\n        <div class=\"cx-facet-group\">\n          <div class=\"cx-facet-header\">\n            <a\n              class=\"cx-facet-header-link\"\n              (click)=\"toggleFacet(facet.name)\"\n              [attr.aria-expanded]=\"!isFacetCollapsed(facet.name)\"\n              aria-controls=\"\"\n            >\n              {{ facet.name }}\n              <cx-icon\n                [type]=\"\n                  isFacetCollapsed(facet.name)\n                    ? iconTypes.EXPAND\n                    : iconTypes.COLLAPSE\n                \"\n              ></cx-icon>\n            </a>\n          </div>\n          <ng-container *ngIf=\"!isFacetCollapsed(facet.name)\">\n            <ul class=\"cx-facet-list\">\n              <li\n                *ngFor=\"\n                  let value of getVisibleFacetValues(facet);\n                  index as facetValueId\n                \"\n              >\n                <div class=\"form-check\">\n                  <label class=\"form-checkbox cx-facet-label\">\n                    <input\n                      class=\"form-check-input cx-facet-checkbox\"\n                      role=\"checkbox\"\n                      type=\"checkbox\"\n                      aria-checked=\"true\"\n                      [checked]=\"value.selected\"\n                      (change)=\"toggleValue(value.query.query.value)\"\n                    />\n                    <span class=\"cx-facet-text\"\n                      >{{ value.name }} ({{ value.count }})</span\n                    >\n                  </label>\n                </div>\n              </li>\n              <li\n                class=\"cx-facet-toggle-btn\"\n                (click)=\"showLess(facet.name)\"\n                *ngIf=\"showAllPerFacetMap.get(facet.name)\"\n              >\n                {{ 'productList.showLess' | cxTranslate }}\n              </li>\n              <li\n                class=\"cx-facet-toggle-btn\"\n                (click)=\"showMore(facet.name)\"\n                *ngIf=\"\n                  !showAllPerFacetMap.get(facet.name) &&\n                  facet.values.length > minPerFacet\n                \"\n              >\n                {{ 'productList.showMore' | cxTranslate }}\n              </li>\n            </ul>\n          </ng-container>\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n\n  <div class=\"cx-facet-mobile\">\n    <div class=\"container\">\n      <button\n        class=\"btn btn-action btn-block cx-facet-mobile-btn\"\n        (click)=\"openFilterModal(content)\"\n      >\n        {{ 'productList.filterBy.action' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n\n  <!-- START ONLY SHOW FILTER SECTION IN MOBILE WHEN THEY ARE SELECTED -->\n  <div class=\"container\">\n    <div class=\"cx-facet-mobile\" *ngIf=\"searchResult.breadcrumbs?.length\">\n      <div class=\"cx-facet-filter-container\">\n        <h4 class=\"cx-facet-filter-header\">\n          {{ 'productList.appliedFilter' | cxTranslate }}\n        </h4>\n        <div\n          class=\"cx-facet-filter-pill\"\n          role=\"filter\"\n          *ngFor=\"let breadcrumb of searchResult.breadcrumbs\"\n        >\n          <span class=\"cx-facet-pill-value\">\n            {{ breadcrumb.facetValueName }}\n          </span>\n          <button\n            type=\"button\"\n            class=\"close\"\n            aria-label=\"Close\"\n            (click)=\"toggleValue(breadcrumb.removeQuery.query.value)\"\n          >\n            <span aria-hidden=\"true\">\n              <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n            </span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- END ONLY SHOW FILTER SECTION IN MOBILE WHEN THEY ARE SELECTED -->\n\n  <ng-template #content let-c=\"close\" let-d=\"dismiss\">\n    <div class=\"modal-header\">\n      <h4 class=\"cx-facet-modal-title\" id=\"modal-title\">\n        {{ 'productList.filterBy.label' | cxTranslate }}\n      </h4>\n      <button\n        type=\"button\"\n        class=\"close\"\n        aria-label=\"Close\"\n        (click)=\"d('Cross click')\"\n      >\n        <span aria-hidden=\"true\">\n          <cx-icon [type]=\"iconTypes.CLOSE\"></cx-icon>\n        </span>\n      </button>\n    </div>\n    <div class=\"modal-body cx-facet-modal-body\">\n      <form>\n        <div\n          class=\"form-group\"\n          *ngFor=\"let facet of searchResult.facets; index as facetId\"\n        >\n          <h4 class=\"cx-facet-modal-label\" for=\"megapixels\">\n            {{ facet.name }}\n          </h4>\n          <div class=\"input-group\">\n            <ul class=\"cx-facet-list\">\n              <li *ngFor=\"let value of facet.values; index as facetValueId\">\n                <div class=\"form-check\">\n                  <label class=\"form-checkbox cx-facet-label\">\n                    <input\n                      class=\"form-check-input cx-facet-checkbox\"\n                      role=\"checkbox\"\n                      type=\"checkbox\"\n                      aria-checked=\"true\"\n                      [checked]=\"value.selected\"\n                      (change)=\"toggleValue(value.query.query.value)\"\n                    />\n                    <span class=\"cx-facet-text\"\n                      >{{ value.name }} ({{ value.count }})</span\n                    >\n                  </label>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </form>\n    </div>\n  </ng-template>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductFacetNavigationComponent.ctorParameters = function () { return [
            { type: ModalService },
            { type: router.ActivatedRoute },
            { type: ProductListComponentService }
        ]; };
        return ProductFacetNavigationComponent;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ProductFacetNavigationComponent.prototype.sub;
        /** @type {?} */
        ProductFacetNavigationComponent.prototype.iconTypes;
        /** @type {?} */
        ProductFacetNavigationComponent.prototype.activeFacetValueCode;
        /** @type {?} */
        ProductFacetNavigationComponent.prototype.searchResult;
        /** @type {?} */
        ProductFacetNavigationComponent.prototype.minPerFacet;
        /** @type {?} */
        ProductFacetNavigationComponent.prototype.showAllPerFacetMap;
        /**
         * @type {?}
         * @protected
         */
        ProductFacetNavigationComponent.prototype.queryCodec;
        /**
         * @type {?}
         * @private
         */
        ProductFacetNavigationComponent.prototype.collapsedFacets;
        /** @type {?} */
        ProductFacetNavigationComponent.prototype.searchResult$;
        /** @type {?} */
        ProductFacetNavigationComponent.prototype.visibleFacets$;
        /**
         * @type {?}
         * @private
         */
        ProductFacetNavigationComponent.prototype.modalService;
        /**
         * @type {?}
         * @private
         */
        ProductFacetNavigationComponent.prototype.activatedRoute;
        /**
         * @type {?}
         * @private
         */
        ProductFacetNavigationComponent.prototype.productListComponentService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductGridItemComponent = /** @class */ (function () {
        function ProductGridItemComponent() {
        }
        ProductGridItemComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-grid-item',
                        template: "<a\n  [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n  class=\"cx-product-image-container\"\n>\n  <cx-media\n    class=\"cx-product-image\"\n    [container]=\"product.images?.PRIMARY\"\n    format=\"product\"\n    [alt]=\"product.summary\"\n  ></cx-media>\n</a>\n<a\n  [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n  class=\"cx-product-name\"\n  [innerHTML]=\"product.nameHtml\"\n></a>\n\n<div class=\"cx-product-rating\">\n  <cx-star-rating\n    *ngIf=\"product.averageRating\"\n    [rating]=\"product?.averageRating\"\n    [disabled]=\"true\"\n  ></cx-star-rating>\n  <div *ngIf=\"!product.averageRating\">\n    {{ 'productDetails.noReviews' | cxTranslate }}\n  </div>\n</div>\n<div class=\"cx-product-price-container\">\n  <div class=\"cx-product-price\" aria-label=\"Product price\">\n    {{ product.price?.formattedValue }}\n  </div>\n</div>\n\n<ng-container *cxFeatureLevel=\"'1.5'\">\n  <div class=\"cx-variant-style-icons\" *ngIf=\"product.variantOptions\">\n    <cx-variant-style-icons\n      [variants]=\"product.variantOptions\"\n    ></cx-variant-style-icons>\n  </div>\n</ng-container>\n\n<cx-add-to-cart\n  *ngIf=\"product.stock?.stockLevelStatus !== 'outOfStock'\"\n  [showQuantity]=\"false\"\n  [product]=\"product\"\n></cx-add-to-cart>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        ProductGridItemComponent.propDecorators = {
            product: [{ type: core.Input }]
        };
        return ProductGridItemComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductGridItemComponent.prototype.product;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductListItemComponent = /** @class */ (function () {
        function ProductListItemComponent() {
        }
        ProductListItemComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-list-item',
                        template: "<div class=\"row\">\n  <div class=\"col-12 col-md-4\">\n    <a\n      [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n      class=\"cx-product-image-container\"\n    >\n      <cx-media\n        class=\"cx-product-image\"\n        [container]=\"product.images?.PRIMARY\"\n        format=\"product\"\n        [alt]=\"product.summary\"\n      ></cx-media>\n    </a>\n  </div>\n  <div class=\"col-12 col-md-8\">\n    <a\n      [routerLink]=\"{ cxRoute: 'product', params: product } | cxUrl\"\n      class=\"cx-product-name\"\n      [innerHtml]=\"product.nameHtml\"\n    ></a>\n    <cx-star-rating\n      *ngIf=\"product.averageRating\"\n      [rating]=\"product?.averageRating\"\n      [disabled]=\"true\"\n    ></cx-star-rating>\n    <div *ngIf=\"!product.averageRating\" class=\"cx-product-no-review\">\n      {{ 'productDetails.noReviews' | cxTranslate }}\n    </div>\n    <div class=\"cx-product-price\" aria-label=\"Product price\">\n      {{ product.price?.formattedValue }}\n    </div>\n\n    <ng-container *cxFeatureLevel=\"'1.5'\">\n      <cx-variant-style-icons\n        *ngIf=\"product.variantOptions\"\n        [variants]=\"product.variantOptions\"\n      ></cx-variant-style-icons>\n    </ng-container>\n\n    <div class=\"row\">\n      <div class=\"col-12 col-md-8\">\n        <p class=\"cx-product-summary\" [innerHtml]=\"product.summary\">\n          {{ product.summary }}\n        </p>\n      </div>\n      <div class=\"col-12 col-md-4\">\n        <cx-add-to-cart\n          *ngIf=\"product.stock?.stockLevelStatus !== 'outOfStock'\"\n          [showQuantity]=\"false\"\n          [product]=\"product\"\n        ></cx-add-to-cart>\n      </div>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        ProductListItemComponent.propDecorators = {
            product: [{ type: core.Input }]
        };
        return ProductListItemComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductListItemComponent.prototype.product;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductVariantsComponent = /** @class */ (function () {
        function ProductVariantsComponent(currentProductService) {
            this.currentProductService = currentProductService;
            this.variants = [];
            this.variantType = core$1.VariantType;
        }
        /**
         * @return {?}
         */
        ProductVariantsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.product$ = this.currentProductService.getProduct().pipe(operators.filter((/**
             * @param {?} product
             * @return {?}
             */
            function (product) { return !!(product && product.baseOptions); })), operators.distinctUntilChanged(), operators.tap((/**
             * @param {?} product
             * @return {?}
             */
            function (product) {
                product.baseOptions.forEach((/**
                 * @param {?} option
                 * @return {?}
                 */
                function (option) {
                    if (option && option.variantType) {
                        _this.variants[option.variantType] = option;
                    }
                }));
            })));
        };
        ProductVariantsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-variants',
                        template: "<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"variant-section\" *ngIf=\"product.baseOptions?.length\">\n    <cx-variant-style-selector\n      *ngIf=\"variants[variantType.STYLE]\"\n      [variants]=\"variants[variantType.STYLE]\"\n    ></cx-variant-style-selector>\n    <cx-variant-size-selector\n      *ngIf=\"variants[variantType.SIZE]\"\n      [product]=\"product\"\n      [variants]=\"variants[variantType.SIZE]\"\n    ></cx-variant-size-selector>\n    <cx-variant-color-selector\n      *ngIf=\"variants[variantType.COLOR]\"\n      [product]=\"product\"\n      [variants]=\"variants[variantType.COLOR]\"\n    ></cx-variant-color-selector>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductVariantsComponent.ctorParameters = function () { return [
            { type: CurrentProductService }
        ]; };
        return ProductVariantsComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductVariantsComponent.prototype.variants;
        /** @type {?} */
        ProductVariantsComponent.prototype.variantType;
        /** @type {?} */
        ProductVariantsComponent.prototype.product$;
        /**
         * @type {?}
         * @private
         */
        ProductVariantsComponent.prototype.currentProductService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantStyleSelectorComponent = /** @class */ (function () {
        function VariantStyleSelectorComponent(config, productService, routingService) {
            this.config = config;
            this.productService = productService;
            this.routingService = routingService;
            this.variantQualifier = core$1.VariantQualifier;
        }
        /**
         * @param {?} qualifiers
         * @return {?}
         */
        VariantStyleSelectorComponent.prototype.getVariantOptionValue = /**
         * @param {?} qualifiers
         * @return {?}
         */
        function (qualifiers) {
            /** @type {?} */
            var obj = qualifiers.find((/**
             * @param {?} q
             * @return {?}
             */
            function (q) { return q.qualifier === core$1.VariantQualifier.STYLE; }));
            return obj ? obj.value : '';
        };
        /**
         * @param {?} variantOptionQualifiers
         * @return {?}
         */
        VariantStyleSelectorComponent.prototype.getVariantThumbnailUrl = /**
         * @param {?} variantOptionQualifiers
         * @return {?}
         */
        function (variantOptionQualifiers) {
            /** @type {?} */
            var qualifier = variantOptionQualifiers.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.image; }));
            return qualifier
                ? "" + this.config.backend.occ.baseUrl + qualifier.image.url
                : '';
        };
        /**
         * @param {?} code
         * @return {?}
         */
        VariantStyleSelectorComponent.prototype.changeStyle = /**
         * @param {?} code
         * @return {?}
         */
        function (code) {
            var _this = this;
            if (code) {
                this.productService
                    .get(code, core$1.ProductScope.LIST)
                    .pipe(
                // below call might looks redundant but in fact this data is going to be loaded anyways
                // we're just calling it earlier and storing
                operators.filter(Boolean), operators.take(1))
                    .subscribe((/**
                 * @param {?} product
                 * @return {?}
                 */
                function (product) {
                    _this.routingService.go({
                        cxRoute: 'product',
                        params: product,
                    });
                }));
            }
            return null;
        };
        VariantStyleSelectorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-variant-style-selector',
                        template: "<ng-container>\n  <div class=\"variant-selector\">\n    <div *ngIf=\"variants.selected\" class=\"variant-name\">\n      {{ 'variant.style' | cxTranslate }}:\n      <span class=\"style-name\">{{\n        getVariantOptionValue(variants?.selected.variantOptionQualifiers)\n      }}</span>\n    </div>\n    <ul class=\"variant-list\">\n      <li\n        *ngFor=\"let v of variants?.options\"\n        [ngClass]=\"{\n          'selected-variant': v.code === variants?.selected.code\n        }\"\n      >\n        <img\n          (click)=\"changeStyle(v.code)\"\n          src=\"{{ getVariantThumbnailUrl(v.variantOptionQualifiers) }}\"\n          title=\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\"\n          alt=\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\"\n        />\n      </li>\n    </ul>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        VariantStyleSelectorComponent.ctorParameters = function () { return [
            { type: core$1.OccConfig },
            { type: core$1.ProductService },
            { type: core$1.RoutingService }
        ]; };
        VariantStyleSelectorComponent.propDecorators = {
            variants: [{ type: core.Input }]
        };
        return VariantStyleSelectorComponent;
    }());
    if (false) {
        /** @type {?} */
        VariantStyleSelectorComponent.prototype.variantQualifier;
        /** @type {?} */
        VariantStyleSelectorComponent.prototype.variants;
        /**
         * @type {?}
         * @private
         */
        VariantStyleSelectorComponent.prototype.config;
        /**
         * @type {?}
         * @private
         */
        VariantStyleSelectorComponent.prototype.productService;
        /**
         * @type {?}
         * @private
         */
        VariantStyleSelectorComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantStyleSelectorModule = /** @class */ (function () {
        function VariantStyleSelectorModule() {
        }
        VariantStyleSelectorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, router.RouterModule, core$1.UrlModule, core$1.I18nModule],
                        declarations: [VariantStyleSelectorComponent],
                        entryComponents: [VariantStyleSelectorComponent],
                        exports: [VariantStyleSelectorComponent],
                    },] }
        ];
        return VariantStyleSelectorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantSizeSelectorComponent = /** @class */ (function () {
        function VariantSizeSelectorComponent(productService, routingService) {
            this.productService = productService;
            this.routingService = routingService;
        }
        /**
         * @param {?} code
         * @return {?}
         */
        VariantSizeSelectorComponent.prototype.changeSize = /**
         * @param {?} code
         * @return {?}
         */
        function (code) {
            var _this = this;
            if (code) {
                this.productService
                    .get(code, core$1.ProductScope.LIST)
                    .pipe(
                // below call might looks redundant but in fact this data is going to be loaded anyways
                // we're just calling it earlier and storing
                operators.filter(Boolean), operators.take(1))
                    .subscribe((/**
                 * @param {?} product
                 * @return {?}
                 */
                function (product) {
                    _this.routingService.go({
                        cxRoute: 'product',
                        params: product,
                    });
                }));
            }
            return null;
        };
        /**
         * @param {?} qualifiers
         * @return {?}
         */
        VariantSizeSelectorComponent.prototype.getVariantOptionValue = /**
         * @param {?} qualifiers
         * @return {?}
         */
        function (qualifiers) {
            /** @type {?} */
            var obj = qualifiers.find((/**
             * @param {?} q
             * @return {?}
             */
            function (q) { return q.qualifier === core$1.VariantQualifier.SIZE; }));
            return obj ? obj.value : '';
        };
        VariantSizeSelectorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-variant-size-selector',
                        template: "<ng-container>\n  <div class=\"variant-selector\">\n    <div class=\"variant-name\">{{ 'variant.size' | cxTranslate }}:</div>\n    <select\n      (change)=\"changeSize($event.target.value)\"\n      class=\"form-control variant-select\"\n    >\n      <option\n        *ngFor=\"let v of variants?.options\"\n        value=\"{{ v.code }}\"\n        [selected]=\"v.code === product?.code\"\n        >{{ getVariantOptionValue(v.variantOptionQualifiers) }}</option\n      >\n    </select>\n    <a\n      href=\"#\"\n      class=\"size-guide\"\n      title=\"{{ 'variant.sizeGuideLabel' | cxTranslate }}\"\n    >\n      {{ 'variant.sizeGuideLabel' | cxTranslate }}\n    </a>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        VariantSizeSelectorComponent.ctorParameters = function () { return [
            { type: core$1.ProductService },
            { type: core$1.RoutingService }
        ]; };
        VariantSizeSelectorComponent.propDecorators = {
            product: [{ type: core.Input }],
            variants: [{ type: core.Input }]
        };
        return VariantSizeSelectorComponent;
    }());
    if (false) {
        /** @type {?} */
        VariantSizeSelectorComponent.prototype.product;
        /** @type {?} */
        VariantSizeSelectorComponent.prototype.variants;
        /**
         * @type {?}
         * @private
         */
        VariantSizeSelectorComponent.prototype.productService;
        /**
         * @type {?}
         * @private
         */
        VariantSizeSelectorComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantSizeSelectorModule = /** @class */ (function () {
        function VariantSizeSelectorModule() {
        }
        VariantSizeSelectorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, router.RouterModule, core$1.UrlModule, core$1.I18nModule],
                        declarations: [VariantSizeSelectorComponent],
                        entryComponents: [VariantSizeSelectorComponent],
                        exports: [VariantSizeSelectorComponent],
                    },] }
        ];
        return VariantSizeSelectorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantColorSelectorComponent = /** @class */ (function () {
        function VariantColorSelectorComponent(routingService) {
            this.routingService = routingService;
        }
        /**
         * @param {?} code
         * @param {?} name
         * @return {?}
         */
        VariantColorSelectorComponent.prototype.changeColor = /**
         * @param {?} code
         * @param {?} name
         * @return {?}
         */
        function (code, name) {
            if (code) {
                this.routingService.go({
                    cxRoute: 'product',
                    params: { code: code, name: name },
                });
            }
            return null;
        };
        /**
         * @param {?} qualifiers
         * @return {?}
         */
        VariantColorSelectorComponent.prototype.getVariantOptionValue = /**
         * @param {?} qualifiers
         * @return {?}
         */
        function (qualifiers) {
            /** @type {?} */
            var obj = qualifiers.find((/**
             * @param {?} q
             * @return {?}
             */
            function (q) { return q.qualifier === core$1.VariantQualifier.COLOR; }));
            return obj ? obj.value : '';
        };
        VariantColorSelectorComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-variant-color-selector',
                        template: "<ng-container>\n  <div class=\"variant-selector\">\n    <div class=\"variant-name\">{{ 'variant.color' | cxTranslate }}:</div>\n\n    <select\n      (change)=\"changeColor($event.target.value, product?.name)\"\n      class=\"form-control variant-select\"\n    >\n      <option\n        *ngFor=\"let v of variants?.options\"\n        value=\"{{ v.code }}\"\n        [selected]=\"v.code === product?.code\"\n        >{{ getVariantOptionValue(v.variantOptionQualifiers) }}</option\n      >\n    </select>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        VariantColorSelectorComponent.ctorParameters = function () { return [
            { type: core$1.RoutingService }
        ]; };
        VariantColorSelectorComponent.propDecorators = {
            product: [{ type: core.Input }],
            variants: [{ type: core.Input }]
        };
        return VariantColorSelectorComponent;
    }());
    if (false) {
        /** @type {?} */
        VariantColorSelectorComponent.prototype.product;
        /** @type {?} */
        VariantColorSelectorComponent.prototype.variants;
        /**
         * @type {?}
         * @private
         */
        VariantColorSelectorComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantColorSelectorModule = /** @class */ (function () {
        function VariantColorSelectorModule() {
        }
        VariantColorSelectorModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, router.RouterModule, core$1.UrlModule, core$1.I18nModule],
                        declarations: [VariantColorSelectorComponent],
                        entryComponents: [VariantColorSelectorComponent],
                        exports: [VariantColorSelectorComponent],
                    },] }
        ];
        return VariantColorSelectorModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantStyleIconsComponent = /** @class */ (function () {
        function VariantStyleIconsComponent(config) {
            this.config = config;
            this.variantNames = {};
        }
        /**
         * @return {?}
         */
        VariantStyleIconsComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.variants.forEach((/**
             * @param {?} variant
             * @return {?}
             */
            function (variant) {
                _this.variantNames[variant.code] = _this.getVariantName(variant.variantOptionQualifiers);
            }));
        };
        /**
         * @param {?} variantOptionQualifiers
         * @return {?}
         */
        VariantStyleIconsComponent.prototype.getVariantThumbnailUrl = /**
         * @param {?} variantOptionQualifiers
         * @return {?}
         */
        function (variantOptionQualifiers) {
            /** @type {?} */
            var thumbnail = variantOptionQualifiers.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.qualifier === core$1.VariantQualifier.THUMBNAIL; }));
            return thumbnail
                ? "" + this.config.backend.occ.baseUrl + thumbnail.image.url
                : '';
        };
        /**
         * @private
         * @param {?} variantOptionQualifiers
         * @return {?}
         */
        VariantStyleIconsComponent.prototype.getVariantName = /**
         * @private
         * @param {?} variantOptionQualifiers
         * @return {?}
         */
        function (variantOptionQualifiers) {
            /** @type {?} */
            var rollupProperty = variantOptionQualifiers.find((/**
             * @param {?} item
             * @return {?}
             */
            function (item) { return item.qualifier === core$1.VariantQualifier.ROLLUP_PROPERTY; }));
            /** @type {?} */
            var property = rollupProperty
                ? variantOptionQualifiers.find((/**
                 * @param {?} item
                 * @return {?}
                 */
                function (item) { return item.qualifier === rollupProperty.value; }))
                : null;
            return property ? property.value : '';
        };
        VariantStyleIconsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-variant-style-icons',
                        template: "<ul class=\"variant-list\">\n  <li *ngFor=\"let v of variants\">\n    <img\n      [attr.src]=\"getVariantThumbnailUrl(v.variantOptionQualifiers)\"\n      [attr.title]=\"variantNames[v.code]\"\n      [attr.alt]=\"variantNames[v.code]\"\n    />\n  </li>\n</ul>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush,
                        styles: ["ul{padding:0;white-space:nowrap;overflow:hidden}ul li{display:inline}ul li img{width:50px}"]
                    }] }
        ];
        /** @nocollapse */
        VariantStyleIconsComponent.ctorParameters = function () { return [
            { type: core$1.OccConfig }
        ]; };
        VariantStyleIconsComponent.propDecorators = {
            variants: [{ type: core.Input }]
        };
        return VariantStyleIconsComponent;
    }());
    if (false) {
        /** @type {?} */
        VariantStyleIconsComponent.prototype.variants;
        /** @type {?} */
        VariantStyleIconsComponent.prototype.variantNames;
        /**
         * @type {?}
         * @private
         */
        VariantStyleIconsComponent.prototype.config;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var VariantStyleIconsModule = /** @class */ (function () {
        function VariantStyleIconsModule() {
        }
        VariantStyleIconsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, router.RouterModule, core$1.UrlModule, core$1.I18nModule],
                        declarations: [VariantStyleIconsComponent],
                        entryComponents: [VariantStyleIconsComponent],
                        exports: [VariantStyleIconsComponent],
                    },] }
        ];
        return VariantStyleIconsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductVariantGuard = /** @class */ (function () {
        function ProductVariantGuard(productService, routingService, cmsService) {
            this.productService = productService;
            this.routingService = routingService;
            this.cmsService = cmsService;
        }
        /**
         * @return {?}
         */
        ProductVariantGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            return this.routingService.getRouterState().pipe(operators.map((/**
             * @param {?} state
             * @return {?}
             */
            function (state) { return state.nextState.params.productCode; })), operators.switchMap((/**
             * @param {?} productCode
             * @return {?}
             */
            function (productCode) {
                // if open pdp from smartedit
                if (_this.cmsService.isLaunchInSmartEdit() && !productCode) {
                    return rxjs.of(true);
                }
                return _this.productService.get(productCode, core$1.ProductScope.VARIANTS).pipe(operators.filter(Boolean), operators.map((/**
                 * @param {?} product
                 * @return {?}
                 */
                function (product) {
                    if (!product.purchasable) {
                        /** @type {?} */
                        var variant = _this.findVariant(product.variantOptions);
                        // below call might looks redundant but in fact this data is going to be loaded anyways
                        // we're just calling it earlier and storing
                        _this.productService
                            .get(variant.code, core$1.ProductScope.LIST)
                            .pipe(operators.filter(Boolean), operators.take(1))
                            .subscribe((/**
                         * @param {?} _product
                         * @return {?}
                         */
                        function (_product) {
                            _this.routingService.go({
                                cxRoute: 'product',
                                params: _product,
                            });
                        }));
                        return false;
                    }
                    else {
                        return true;
                    }
                })));
            })));
        };
        /**
         * @param {?} variants
         * @return {?}
         */
        ProductVariantGuard.prototype.findVariant = /**
         * @param {?} variants
         * @return {?}
         */
        function (variants) {
            /** @type {?} */
            var results = variants.filter((/**
             * @param {?} variant
             * @return {?}
             */
            function (variant) {
                return variant.stock && variant.stock.stockLevel ? variant : false;
            }));
            return !results.length && variants.length ? variants[0] : results[0];
        };
        ProductVariantGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        ProductVariantGuard.ctorParameters = function () { return [
            { type: core$1.ProductService },
            { type: core$1.RoutingService },
            { type: core$1.CmsService }
        ]; };
        /** @nocollapse */ ProductVariantGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function ProductVariantGuard_Factory() { return new ProductVariantGuard(core.ɵɵinject(core$1.ProductService), core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.CmsService)); }, token: ProductVariantGuard, providedIn: "root" });
        return ProductVariantGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @private
         */
        ProductVariantGuard.prototype.productService;
        /**
         * @type {?}
         * @private
         */
        ProductVariantGuard.prototype.routingService;
        /**
         * @type {?}
         * @private
         */
        ProductVariantGuard.prototype.cmsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductVariantsModule = /** @class */ (function () {
        function ProductVariantsModule() {
        }
        ProductVariantsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductVariantSelectorComponent: {
                                        component: ProductVariantsComponent,
                                        guards: [ProductVariantGuard],
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                            VariantStyleSelectorModule,
                            VariantSizeSelectorModule,
                            VariantColorSelectorModule,
                            VariantStyleIconsModule,
                        ],
                        declarations: [ProductVariantsComponent],
                        entryComponents: [ProductVariantsComponent],
                        exports: [VariantStyleIconsComponent],
                    },] }
        ];
        return ProductVariantsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductListModule = /** @class */ (function () {
        function ProductListModule() {
        }
        ProductListModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ (defaultScrollConfig))),
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    CMSProductListComponent: {
                                        component: ProductListComponent,
                                    },
                                    ProductGridComponent: {
                                        component: ProductListComponent,
                                    },
                                    SearchResultsListComponent: {
                                        component: ProductListComponent,
                                    },
                                    ProductRefinementComponent: {
                                        component: ProductFacetNavigationComponent,
                                    },
                                },
                            }))),
                            router.RouterModule,
                            MediaModule,
                            AddToCartModule,
                            ItemCounterModule,
                            ListNavigationModule,
                            core$1.UrlModule,
                            core$1.I18nModule,
                            StarRatingModule,
                            IconModule,
                            SpinnerModule,
                            ngxInfiniteScroll.InfiniteScrollModule,
                            ViewConfigModule,
                            ProductVariantsModule,
                            core$1.FeaturesConfigModule,
                        ],
                        declarations: [
                            ProductListComponent,
                            ProductFacetNavigationComponent,
                            ProductListItemComponent,
                            ProductGridItemComponent,
                            ProductViewComponent,
                            ProductScrollComponent,
                        ],
                        exports: [
                            ProductListComponent,
                            ProductFacetNavigationComponent,
                            ProductListItemComponent,
                            ProductGridItemComponent,
                            ProductViewComponent,
                            ProductScrollComponent,
                        ],
                        entryComponents: [ProductListComponent, ProductFacetNavigationComponent],
                    },] }
        ];
        return ProductListModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @enum {string} */
    var ProductDetailOutlets = {
        INTRO: 'PDP.INTRO',
        PRICE: 'PDP.PRICE',
        SHARE: 'PDP.SHARE',
        SUMMARY: 'PDP.SUMMARY',
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductSummaryComponent = /** @class */ (function () {
        function ProductSummaryComponent(currentProductService) {
            this.currentProductService = currentProductService;
            this.outlets = ProductDetailOutlets;
            this.product$ = this.currentProductService.getProduct();
        }
        ProductSummaryComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-summary',
                        template: "<ng-container *ngIf=\"product$ | async as product\">\n  <ng-template\n    [cxOutlet]=\"outlets.PRICE\"\n    [cxOutletContext]=\"{ product: product }\"\n  >\n    <div class=\"price\" aria-label=\"new item price\">\n      {{ product?.price?.formattedValue }}\n    </div>\n  </ng-template>\n\n  <ng-template\n    [cxOutlet]=\"outlets.SUMMARY\"\n    [cxOutletContext]=\"{ product: product }\"\n  >\n    <p [innerHTML]=\"product?.summary\" class=\"summary\"></p>\n  </ng-template>\n\n  <!-- @TODO: Temp. Comment out share link while not in use by CMS -->\n  <!-- <ng-container *cxOutlet=\"outlets.SHARE\">\n        <div>\n          <a href=\"#\" class=\"share btn-link\">\n            {{ 'productSummary.share' | cxTranslate }}\n          </a>\n        </div>\n      </ng-container> -->\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductSummaryComponent.ctorParameters = function () { return [
            { type: CurrentProductService }
        ]; };
        return ProductSummaryComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductSummaryComponent.prototype.outlets;
        /** @type {?} */
        ProductSummaryComponent.prototype.product$;
        /**
         * @type {?}
         * @protected
         */
        ProductSummaryComponent.prototype.currentProductService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductSummaryModule = /** @class */ (function () {
        function ProductSummaryModule() {
        }
        ProductSummaryModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            OutletModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductSummaryComponent: {
                                        component: ProductSummaryComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ProductSummaryComponent],
                        entryComponents: [ProductSummaryComponent],
                        exports: [ProductSummaryComponent],
                    },] }
        ];
        return ProductSummaryModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductAttributesComponent = /** @class */ (function () {
        function ProductAttributesComponent(currentProductService) {
            this.currentProductService = currentProductService;
            this.product$ = this.currentProductService.getProduct(core$1.ProductScope.ATTRIBUTES);
        }
        // TODO deprecated since 1.4, remove
        // TODO deprecated since 1.4, remove
        /**
         * @return {?}
         */
        ProductAttributesComponent.prototype.ngOnInit = 
        // TODO deprecated since 1.4, remove
        /**
         * @return {?}
         */
        function () { };
        ProductAttributesComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-attributes',
                        template: "<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"container\">\n    <h2>{{ 'productDetails.specification' | cxTranslate }}</h2>\n    <table *ngFor=\"let class of product?.classifications\">\n      <th>\n        <h3>{{ class.name }}</h3>\n      </th>\n      <tr *ngFor=\"let feature of class.features\">\n        <td>{{ feature.name }}</td>\n        <td>\n          <ul>\n            <li *ngFor=\"let featureValue of feature?.featureValues\">\n              {{ featureValue?.value }}\n            </li>\n          </ul>\n        </td>\n      </tr>\n    </table>\n  </div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductAttributesComponent.ctorParameters = function () { return [
            { type: CurrentProductService }
        ]; };
        return ProductAttributesComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductAttributesComponent.prototype.product$;
        /**
         * @type {?}
         * @protected
         */
        ProductAttributesComponent.prototype.currentProductService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductAttributesModule = /** @class */ (function () {
        function ProductAttributesModule() {
        }
        ProductAttributesModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.I18nModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductSpecsTabComponent: {
                                        component: ProductAttributesComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ProductAttributesComponent],
                        entryComponents: [ProductAttributesComponent],
                        exports: [ProductAttributesComponent],
                    },] }
        ];
        return ProductAttributesModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductDetailsTabComponent = /** @class */ (function () {
        function ProductDetailsTabComponent(currentProductService) {
            this.currentProductService = currentProductService;
        }
        /**
         * @return {?}
         */
        ProductDetailsTabComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.product$ = this.currentProductService.getProduct();
        };
        ProductDetailsTabComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-details-tab',
                        template: "<ng-container *ngIf=\"product$ | async as product\">\n  <div class=\"container\" [innerHTML]=\"product?.description\"></div>\n</ng-container>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductDetailsTabComponent.ctorParameters = function () { return [
            { type: CurrentProductService }
        ]; };
        return ProductDetailsTabComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductDetailsTabComponent.prototype.product$;
        /**
         * @type {?}
         * @protected
         */
        ProductDetailsTabComponent.prototype.currentProductService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductDetailsTabModule = /** @class */ (function () {
        function ProductDetailsTabModule() {
        }
        ProductDetailsTabModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductDetailsTabComponent: {
                                        component: ProductDetailsTabComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ProductDetailsTabComponent],
                        entryComponents: [ProductDetailsTabComponent],
                        exports: [ProductDetailsTabComponent],
                    },] }
        ];
        return ProductDetailsTabModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductReviewsComponent = /** @class */ (function () {
        function ProductReviewsComponent(reviewService, currentProductService, fb) {
            var _this = this;
            this.reviewService = reviewService;
            this.currentProductService = currentProductService;
            this.fb = fb;
            this.isWritingReview = false;
            // TODO: configurable
            this.initialMaxListItems = 5;
            this.product$ = this.currentProductService.getProduct();
            this.reviews$ = this.product$.pipe(operators.filter((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return !!p; })), operators.map((/**
             * @param {?} p
             * @return {?}
             */
            function (p) { return p.code; })), operators.distinctUntilChanged(), operators.switchMap((/**
             * @param {?} productCode
             * @return {?}
             */
            function (productCode) { return _this.reviewService.getByProductCode(productCode); })), operators.tap((/**
             * @return {?}
             */
            function () {
                _this.resetReviewForm();
                _this.maxListItems = _this.initialMaxListItems;
            })));
        }
        /**
         * @return {?}
         */
        ProductReviewsComponent.prototype.initiateWriteReview = /**
         * @return {?}
         */
        function () {
            this.isWritingReview = true;
        };
        /**
         * @return {?}
         */
        ProductReviewsComponent.prototype.cancelWriteReview = /**
         * @return {?}
         */
        function () {
            this.isWritingReview = false;
            this.resetReviewForm();
        };
        /**
         * @param {?} rating
         * @return {?}
         */
        ProductReviewsComponent.prototype.setRating = /**
         * @param {?} rating
         * @return {?}
         */
        function (rating) {
            this.reviewForm.controls.rating.setValue(rating);
        };
        /**
         * @param {?} product
         * @return {?}
         */
        ProductReviewsComponent.prototype.submitReview = /**
         * @param {?} product
         * @return {?}
         */
        function (product) {
            /** @type {?} */
            var reviewFormControls = this.reviewForm.controls;
            /** @type {?} */
            var review = {
                headline: reviewFormControls.title.value,
                comment: reviewFormControls.comment.value,
                rating: reviewFormControls.rating.value,
                alias: reviewFormControls.reviewerName.value,
            };
            this.reviewService.add(product.code, review);
            this.isWritingReview = false;
            this.resetReviewForm();
        };
        /**
         * @private
         * @return {?}
         */
        ProductReviewsComponent.prototype.resetReviewForm = /**
         * @private
         * @return {?}
         */
        function () {
            this.reviewForm = this.fb.group({
                title: ['', forms.Validators.required],
                comment: ['', forms.Validators.required],
                rating: [0, [forms.Validators.min(1), forms.Validators.max(5)]],
                reviewerName: '',
            });
        };
        ProductReviewsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-product-reviews',
                        template: "<div class=\"container\" *ngIf=\"product$ | async as product\">\n  <h2>\n    {{ 'productDetails.reviews' | cxTranslate }} ({{ product.numberOfReviews }})\n  </h2>\n  <ng-container *ngIf=\"!isWritingReview; else writeReview\">\n    <div class=\"header\">\n      <h3>{{ 'productReview.overallRating' | cxTranslate }}</h3>\n      <button class=\"btn btn-primary\" (click)=\"initiateWriteReview()\">\n        {{ 'productReview.writeReview' | cxTranslate }}\n      </button>\n      <cx-star-rating\n        *ngIf=\"product.averageRating\"\n        class=\"rating\"\n        [rating]=\"product.averageRating\"\n        [disabled]=\"true\"\n      ></cx-star-rating>\n      <div class=\"rating\" *ngIf=\"!product.averageRating\">\n        {{ 'productDetails.noReviews' | cxTranslate }}\n      </div>\n    </div>\n\n    <ng-container *ngIf=\"!isWritingReview; else writeReview\">\n      <ng-container *ngIf=\"reviews$ | async as reviews\">\n        <div\n          class=\"review\"\n          tabindex=\"0\"\n          *ngFor=\"let review of reviews | slice: 0:maxListItems\"\n        >\n          <div class=\"title\">{{ review.headline }}</div>\n          <cx-star-rating\n            [rating]=\"review.rating\"\n            [disabled]=\"true\"\n          ></cx-star-rating>\n          <div class=\"name\">\n            {{ review.alias ? review.alias : review.principal?.name }}\n          </div>\n          <div class=\"date\">{{ review.date | cxDate }}</div>\n          <div class=\"text\">{{ review.comment }}</div>\n        </div>\n        <div *ngIf=\"reviews.length > initialMaxListItems\">\n          <button\n            class=\"btn btn-primary\"\n            (click)=\"maxListItems = reviews.length\"\n            *ngIf=\"maxListItems === initialMaxListItems\"\n          >\n            {{ 'productReview.more' | cxTranslate }}\n          </button>\n          <button\n            class=\"btn btn-primary\"\n            (click)=\"maxListItems = initialMaxListItems\"\n            *ngIf=\"maxListItems !== initialMaxListItems\"\n          >\n            {{ 'productReview.less' | cxTranslate }}\n          </button>\n        </div>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n\n  <ng-template #writeReview>\n    <form [formGroup]=\"reviewForm\" (ngSubmit)=\"submitReview(product)\">\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.reviewTitle' | cxTranslate\n          }}</span>\n          <input type=\"text\" class=\"form-control\" formControlName=\"title\" />\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.writeYourComments' | cxTranslate\n          }}</span>\n          <textarea\n            class=\"form-control\"\n            rows=\"3\"\n            formControlName=\"comment\"\n          ></textarea>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.rating' | cxTranslate\n          }}</span>\n          <cx-star-rating (change)=\"setRating($event)\"></cx-star-rating>\n        </label>\n      </div>\n      <div class=\"form-group\">\n        <label>\n          <span class=\"label-content\">{{\n            'productReview.reviewerName' | cxTranslate\n          }}</span>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            formControlName=\"reviewerName\"\n          />\n        </label>\n      </div>\n      <div class=\"form-group row\">\n        <div class=\"col-12 col-md-4\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-block btn-secondary\"\n            (click)=\"cancelWriteReview()\"\n          >\n            {{ 'common.cancel' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"col-12 col-md-4\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-block btn-primary\"\n            [ngClass]=\"{ 'submit-btn': reviewForm.valid }\"\n            [disabled]=\"!reviewForm.valid\"\n          >\n            {{ 'common.submit' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </form>\n  </ng-template>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        ProductReviewsComponent.ctorParameters = function () { return [
            { type: core$1.ProductReviewService },
            { type: CurrentProductService },
            { type: forms.FormBuilder }
        ]; };
        return ProductReviewsComponent;
    }());
    if (false) {
        /** @type {?} */
        ProductReviewsComponent.prototype.isWritingReview;
        /** @type {?} */
        ProductReviewsComponent.prototype.initialMaxListItems;
        /** @type {?} */
        ProductReviewsComponent.prototype.maxListItems;
        /** @type {?} */
        ProductReviewsComponent.prototype.reviewForm;
        /** @type {?} */
        ProductReviewsComponent.prototype.product$;
        /** @type {?} */
        ProductReviewsComponent.prototype.reviews$;
        /**
         * @type {?}
         * @protected
         */
        ProductReviewsComponent.prototype.reviewService;
        /**
         * @type {?}
         * @protected
         */
        ProductReviewsComponent.prototype.currentProductService;
        /**
         * @type {?}
         * @private
         */
        ProductReviewsComponent.prototype.fb;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductReviewsModule = /** @class */ (function () {
        function ProductReviewsModule() {
        }
        ProductReviewsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            forms.FormsModule,
                            core$1.I18nModule,
                            StarRatingModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ProductReviewsTabComponent: {
                                        component: ProductReviewsComponent,
                                    },
                                },
                            }))),
                        ],
                        declarations: [ProductReviewsComponent],
                        entryComponents: [ProductReviewsComponent],
                        exports: [ProductReviewsComponent],
                    },] }
        ];
        return ProductReviewsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ProductTabsModule = /** @class */ (function () {
        function ProductTabsModule() {
        }
        ProductTabsModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            ProductAttributesModule,
                            ProductDetailsTabModule,
                            ProductReviewsModule,
                        ],
                    },] }
        ];
        return ProductTabsModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StockNotificationDialogComponent = /** @class */ (function () {
        function StockNotificationDialogComponent(modalService, interestsService) {
            this.modalService = modalService;
            this.interestsService = interestsService;
            this.enabledPrefs = [];
        }
        /**
         * @return {?}
         */
        StockNotificationDialogComponent.prototype.close = /**
         * @return {?}
         */
        function () {
            this.modalService.dismissActiveModal();
        };
        /**
         * @return {?}
         */
        StockNotificationDialogComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            var _this = this;
            if (this.subscribeSuccess$) {
                this.subscribeSuccess$
                    .subscribe((/**
                 * @param {?} success
                 * @return {?}
                 */
                function (success) {
                    if (success) {
                        _this.interestsService.resetAddInterestState();
                    }
                }))
                    .unsubscribe();
            }
        };
        StockNotificationDialogComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-stock-notification-dialog',
                        template: "<div class=\"cx-dialog-header modal-header\">\n  <div class=\"cx-dialog-title modal-title\">\n    {{ 'stockNotification.subscriptionDialog.header' | cxTranslate }}\n  </div>\n  <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"close()\">\n    <span aria-hidden=\"true\">&times;</span>\n  </button>\n</div>\n\n<ng-container *ngIf=\"subscribeSuccess$ | async; else loading\">\n  <div class=\"cx-dialog-body modal-body\">\n    <div class=\"container\">\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.notifiedPrefix' | cxTranslate\n        }}\n      </p>\n      <p *ngFor=\"let preference of enabledPrefs\" class=\"channels\">\n        <span>{{ preference.channel }}</span\n        ><span *ngIf=\"preference.value\">{{ ': ' + preference.value }}</span>\n      </p>\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.notifiedSuffix' | cxTranslate\n        }}\n      </p>\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.manageChannelsPrefix'\n            | cxTranslate\n        }}\n        <a\n          (click)=\"close()\"\n          [routerLink]=\"['/my-account/notification-preference']\"\n          class=\"link-prefs\"\n        >\n          {{\n            'stockNotification.subscriptionDialog.manageChannelsLink'\n              | cxTranslate\n          }}</a\n        >\n        {{\n          'stockNotification.subscriptionDialog.manageChannelsSuffix'\n            | cxTranslate\n        }}\n      </p>\n\n      <p>\n        {{\n          'stockNotification.subscriptionDialog.manageSubscriptionsPrefix'\n            | cxTranslate\n        }}\n        <a\n          (click)=\"close()\"\n          [routerLink]=\"['/my-account/my-interests']\"\n          class=\"link-interests\"\n        >\n          {{\n            'stockNotification.subscriptionDialog.manageSubscriptionsLink'\n              | cxTranslate\n          }}</a\n        >\n        {{\n          'stockNotification.subscriptionDialog.manageSubscriptionsSuffix'\n            | cxTranslate\n        }}\n      </p>\n      <div class=\"row\">\n        <div class=\"cx-dialog-actions col-sm-12 col-md-3 offset-md-9\">\n          <button\n            class=\"btn btn-primary btn-block btn-ok\"\n            type=\"button\"\n            (click)=\"close()\"\n          >\n            {{ 'stockNotification.subscriptionDialog.okBtn' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-container>\n\n<ng-template #loading>\n  <div class=\"cx-dialog-body modal-body\">\n    <p>\n      {{ 'stockNotification.subscriptionDialog.subscribing' | cxTranslate }}\n    </p>\n    <div class=\"cx-dialog-row\">\n      <div class=\"col-sm-12\">\n        <cx-spinner></cx-spinner>\n      </div>\n    </div>\n  </div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        StockNotificationDialogComponent.ctorParameters = function () { return [
            { type: ModalService },
            { type: core$1.UserInterestsService }
        ]; };
        return StockNotificationDialogComponent;
    }());
    if (false) {
        /** @type {?} */
        StockNotificationDialogComponent.prototype.subscribeSuccess$;
        /** @type {?} */
        StockNotificationDialogComponent.prototype.enabledPrefs;
        /**
         * @type {?}
         * @private
         */
        StockNotificationDialogComponent.prototype.modalService;
        /**
         * @type {?}
         * @private
         */
        StockNotificationDialogComponent.prototype.interestsService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StockNotificationComponent = /** @class */ (function () {
        function StockNotificationComponent(authService, currentProductService, globalMessageService, translationService, interestsService, modalService, notificationPrefService) {
            this.authService = authService;
            this.currentProductService = currentProductService;
            this.globalMessageService = globalMessageService;
            this.translationService = translationService;
            this.interestsService = interestsService;
            this.modalService = modalService;
            this.notificationPrefService = notificationPrefService;
            this.anonymous = true;
            this.enabledPrefs = [];
            this.subscriptions = new rxjs.Subscription();
        }
        /**
         * @return {?}
         */
        StockNotificationComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.outOfStock$ = rxjs.combineLatest([
                this.currentProductService.getProduct().pipe(operators.filter(Boolean)),
                this.authService.getOccUserId(),
            ]).pipe(operators.tap((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 2), product = _b[0], userId = _b[1];
                _this.productCode = product.code;
                if (userId !== core$1.OCC_USER_ID_ANONYMOUS) {
                    _this.anonymous = false;
                    _this.notificationPrefService.loadPreferences();
                    _this.interestsService.loadProductInterests(null, null, null, product.code, core$1.NotificationType.BACK_IN_STOCK);
                }
            })), operators.map((/**
             * @param {?} __0
             * @return {?}
             */
            function (_a) {
                var _b = __read(_a, 1), product = _b[0];
                return !!product.stock && product.stock.stockLevelStatus === 'outOfStock';
            })));
            this.hasProductInterests$ = this.interestsService
                .getProductInterests()
                .pipe(operators.map((/**
             * @param {?} interests
             * @return {?}
             */
            function (interests) { return !!interests.results && interests.results.length === 1; })));
            this.subscribeSuccess$ = this.interestsService.getAddProductInterestSuccess();
            this.isRemoveInterestLoading$ = this.interestsService.getRemoveProdutInterestLoading();
            this.prefsEnabled$ = this.notificationPrefService
                .getEnabledPreferences()
                .pipe(operators.tap((/**
             * @param {?} prefs
             * @return {?}
             */
            function (prefs) { return (_this.enabledPrefs = prefs); })), operators.map((/**
             * @param {?} prefs
             * @return {?}
             */
            function (prefs) { return prefs.length > 0; })));
            this.subscriptions.add(this.interestsService.getAddProductInterestError().subscribe((/**
             * @param {?} error
             * @return {?}
             */
            function (error) {
                if (error) {
                    _this.onInterestAddingError();
                }
            })));
            this.subscriptions.add(this.interestsService
                .getRemoveProdutInterestSuccess()
                .subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) {
                if (success) {
                    _this.onInterestRemovingSuccess();
                }
            })));
        };
        /**
         * @return {?}
         */
        StockNotificationComponent.prototype.subscribe = /**
         * @return {?}
         */
        function () {
            this.openDialog();
            this.interestsService.addProductInterest(this.productCode, core$1.NotificationType.BACK_IN_STOCK);
        };
        /**
         * @return {?}
         */
        StockNotificationComponent.prototype.unsubscribe = /**
         * @return {?}
         */
        function () {
            this.interestsService.removeProdutInterest({
                product: {
                    code: this.productCode,
                },
                productInterestEntry: [
                    {
                        interestType: core$1.NotificationType.BACK_IN_STOCK,
                    },
                ],
            }, true);
        };
        /**
         * @private
         * @return {?}
         */
        StockNotificationComponent.prototype.onInterestRemovingSuccess = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscriptions.add(this.translationService
                .translate('stockNotification.unsubscribeSuccess')
                .pipe(operators.first())
                .subscribe((/**
             * @param {?} text
             * @return {?}
             */
            function (text) {
                return _this.globalMessageService.add(text, core$1.GlobalMessageType.MSG_TYPE_INFO);
            })));
            this.interestsService.resetRemoveInterestState();
        };
        /**
         * @private
         * @return {?}
         */
        StockNotificationComponent.prototype.onInterestAddingError = /**
         * @private
         * @return {?}
         */
        function () {
            this.modalService.dismissActiveModal();
            this.interestsService.resetAddInterestState();
        };
        /**
         * @private
         * @return {?}
         */
        StockNotificationComponent.prototype.openDialog = /**
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var modalInstance = this.modalService.open(StockNotificationDialogComponent, {
                centered: true,
                size: 'lg',
            }).componentInstance;
            modalInstance.subscribeSuccess$ = this.subscribeSuccess$;
            modalInstance.enabledPrefs = this.enabledPrefs;
        };
        /**
         * @return {?}
         */
        StockNotificationComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscriptions.unsubscribe();
            this.interestsService.clearProductInterests();
            this.notificationPrefService.clearPreferences();
        };
        StockNotificationComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-stock-notification',
                        template: "<ng-container *ngIf=\"outOfStock$ | async\">\n  <ng-container *ngIf=\"!(hasProductInterests$ | async); else stopNotify\">\n    <ng-container *ngIf=\"prefsEnabled$ | async; else disableNotify\">\n      <div class=\"stock-notification-notes\">\n        <label>{{ 'stockNotification.getNotified' | cxTranslate }}</label>\n      </div>\n      <button\n        class=\"btn btn-primary btn-block btn-notify\"\n        type=\"button\"\n        (click)=\"subscribe()\"\n      >\n        {{ 'stockNotification.notifyMe' | cxTranslate }}\n      </button>\n    </ng-container>\n  </ng-container>\n</ng-container>\n\n<ng-template #disableNotify>\n  <div class=\"stock-notification-notes\">\n    <label>\n      <ng-container *ngIf=\"anonymous; else loggedIn\">\n        <a [routerLink]=\"{ cxRoute: 'login' } | cxUrl\">\n          {{ 'miniLogin.signInRegister' | cxTranslate }}</a\n        >\n        {{ 'stockNotification.getNotifySuffix' | cxTranslate }}<br />\n      </ng-container>\n      <ng-template #loggedIn>\n        {{ 'stockNotification.getNotify' | cxTranslate }}<br />\n        {{ 'stockNotification.activateChannelsPrefix' | cxTranslate\n        }}<a [routerLink]=\"['/my-account/notification-preference']\">{{\n          'stockNotification.channelsLink' | cxTranslate\n        }}</a\n        >{{ 'stockNotification.activateChannelsSuffix' | cxTranslate }}\n      </ng-template>\n    </label>\n  </div>\n  <button\n    class=\"btn btn-primary btn-block btn-notify\"\n    type=\"button\"\n    disabled=\"true\"\n  >\n    {{ 'stockNotification.notifyMe' | cxTranslate }}\n  </button>\n</ng-template>\n\n<ng-template #stopNotify>\n  <ng-container *ngIf=\"!(isRemoveInterestLoading$ | async); else loading\">\n    <div class=\"stock-notification-notes\">\n      <label>{{ 'stockNotification.notified' | cxTranslate }}</label>\n    </div>\n    <button\n      class=\"btn btn-primary btn-block btn-stop-notify\"\n      type=\"button\"\n      (click)=\"unsubscribe()\"\n    >\n      {{ 'stockNotification.stopNotify' | cxTranslate }}\n    </button>\n  </ng-container>\n</ng-template>\n\n<ng-template #loading>\n  <div class=\"cx-dialog-body modal-body\">\n    <div class=\"cx-dialog-row\">\n      <div class=\"col-sm-12\">\n        <cx-spinner></cx-spinner>\n      </div>\n    </div>\n  </div>\n</ng-template>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        /** @nocollapse */
        StockNotificationComponent.ctorParameters = function () { return [
            { type: core$1.AuthService },
            { type: CurrentProductService },
            { type: core$1.GlobalMessageService },
            { type: core$1.TranslationService },
            { type: core$1.UserInterestsService },
            { type: ModalService },
            { type: core$1.UserNotificationPreferenceService }
        ]; };
        return StockNotificationComponent;
    }());
    if (false) {
        /** @type {?} */
        StockNotificationComponent.prototype.hasProductInterests$;
        /** @type {?} */
        StockNotificationComponent.prototype.prefsEnabled$;
        /** @type {?} */
        StockNotificationComponent.prototype.outOfStock$;
        /** @type {?} */
        StockNotificationComponent.prototype.isRemoveInterestLoading$;
        /** @type {?} */
        StockNotificationComponent.prototype.anonymous;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.enabledPrefs;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.productCode;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.subscribeSuccess$;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.subscriptions;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.authService;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.currentProductService;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.translationService;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.interestsService;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.modalService;
        /**
         * @type {?}
         * @private
         */
        StockNotificationComponent.prototype.notificationPrefService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StockNotificationModule = /** @class */ (function () {
        function StockNotificationModule() {
        }
        StockNotificationModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [StockNotificationComponent, StockNotificationDialogComponent],
                        imports: [
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    StockNotificationComponent: {
                                        component: StockNotificationComponent,
                                    },
                                },
                            }))),
                            router.RouterModule,
                            core$1.I18nModule,
                            SpinnerModule,
                            core$1.UrlModule,
                        ],
                        entryComponents: [
                            StockNotificationComponent,
                            StockNotificationDialogComponent,
                        ],
                        exports: [StockNotificationComponent, StockNotificationDialogComponent],
                    },] }
        ];
        return StockNotificationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var WEEK_DAYS_NUMBER = 7;
    var ScheduleComponent = /** @class */ (function () {
        function ScheduleComponent(storeDataService) {
            this.storeDataService = storeDataService;
            this.displayDays = null;
        }
        /**
         * @param {?} changes
         * @return {?}
         */
        ScheduleComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
        function (changes) {
            if (changes.location && this.location) {
                /** @type {?} */
                var initialDate = this.getInitialDate();
                this.displayDays = [];
                for (var i = 0; i < WEEK_DAYS_NUMBER; i++) {
                    /** @type {?} */
                    var date = new Date(initialDate.valueOf());
                    date.setDate(date.getDate() + i);
                    this.displayDays.push(date);
                }
            }
        };
        /**
         * Returns the store's opening time for the given date
         * @param date date
         */
        /**
         * Returns the store's opening time for the given date
         * @param {?} date date
         * @return {?}
         */
        ScheduleComponent.prototype.getStoreOpeningTime = /**
         * Returns the store's opening time for the given date
         * @param {?} date date
         * @return {?}
         */
        function (date) {
            return this.storeDataService.getStoreOpeningTime(this.location, date);
        };
        /**
         * Returns the store's closing time for the given date
         * @param date date
         */
        /**
         * Returns the store's closing time for the given date
         * @param {?} date date
         * @return {?}
         */
        ScheduleComponent.prototype.getStoreClosingTime = /**
         * Returns the store's closing time for the given date
         * @param {?} date date
         * @return {?}
         */
        function (date) {
            return this.storeDataService.getStoreClosingTime(this.location, date);
        };
        /**
         * return initial (first) date to be displayed in the schedule
         */
        /**
         * return initial (first) date to be displayed in the schedule
         * @private
         * @return {?}
         */
        ScheduleComponent.prototype.getInitialDate = /**
         * return initial (first) date to be displayed in the schedule
         * @private
         * @return {?}
         */
        function () {
            /** @type {?} */
            var currentDate = new Date();
            currentDate.setDate(currentDate.getDate() - currentDate.getDay());
            return currentDate;
        };
        ScheduleComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-schedule',
                        template: "<ng-content></ng-content>\n<div class=\"container cx-store-hours\" *ngIf=\"location.openingHours\">\n  <div *ngFor=\"let day of displayDays\" class=\"row\">\n    <div class=\"cx-days col-4\">{{ day | cxDate: 'EEE' }}</div>\n    <div *ngIf=\"getStoreOpeningTime(day) !== 'closed'\" class=\"cx-hours col-8\">\n      {{ getStoreOpeningTime(day) }} -\n      {{ getStoreClosingTime(day) }}\n    </div>\n    <div\n      *ngIf=\"getStoreOpeningTime(day) === 'closed'\"\n      class=\"cx-hours col-8 closed\"\n    >\n      {{ 'storeFinder.closed' | cxTranslate }}\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        ScheduleComponent.ctorParameters = function () { return [
            { type: core$1.StoreDataService }
        ]; };
        ScheduleComponent.propDecorators = {
            location: [{ type: core.Input }]
        };
        return ScheduleComponent;
    }());
    if (false) {
        /** @type {?} */
        ScheduleComponent.prototype.location;
        /** @type {?} */
        ScheduleComponent.prototype.displayDays;
        /**
         * @type {?}
         * @private
         */
        ScheduleComponent.prototype.storeDataService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderGridComponent = /** @class */ (function () {
        function StoreFinderGridComponent(storeFinderService, route, routingService) {
            this.storeFinderService = storeFinderService;
            this.route = route;
            this.routingService = routingService;
        }
        /**
         * @return {?}
         */
        StoreFinderGridComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.isLoading$ = this.storeFinderService.getViewAllStoresLoading();
            this.locations$ = this.storeFinderService.getViewAllStoresEntities();
            this.defaultLocation = {};
            if (this.route.snapshot.params.country) {
                this.storeFinderService.findStoresAction('', {
                    pageSize: -1,
                }, undefined, this.route.snapshot.params.country);
            }
        };
        /**
         * @param {?} location
         * @return {?}
         */
        StoreFinderGridComponent.prototype.viewStore = /**
         * @param {?} location
         * @return {?}
         */
        function (location) {
            this.routingService.go([this.prepareRouteUrl(location)]);
        };
        /**
         * @param {?} location
         * @return {?}
         */
        StoreFinderGridComponent.prototype.prepareRouteUrl = /**
         * @param {?} location
         * @return {?}
         */
        function (location) {
            /** @type {?} */
            var countryParam = this.route.snapshot.params.country
                ? "country/" + this.route.snapshot.params.country + "/"
                : '';
            /** @type {?} */
            var regionParam = this.route.snapshot.params.region
                ? "region/" + this.route.snapshot.params.region + "/"
                : '';
            return "store-finder/" + countryParam + regionParam + location.name;
        };
        /**
         * @return {?}
         */
        StoreFinderGridComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () { };
        StoreFinderGridComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-grid',
                        template: "<ng-container\n  *ngIf=\"\n    !(isLoading$ | async) && (locations$ | async) as locations;\n    else loading\n  \"\n>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div\n        class=\"col-sm-4 col-md-4 col-lg-3 item\"\n        *ngFor=\"let location of locations?.stores\"\n        (click)=\"viewStore(location)\"\n      >\n        <cx-store-finder-list-item\n          [location]=\"location\"\n        ></cx-store-finder-list-item>\n      </div>\n    </div>\n  </div>\n</ng-container>\n\n<ng-template #loading>\n  <div class=\"cx-spinner\"><cx-spinner></cx-spinner></div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderGridComponent.ctorParameters = function () { return [
            { type: core$1.StoreFinderService },
            { type: router.ActivatedRoute },
            { type: core$1.RoutingService }
        ]; };
        return StoreFinderGridComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderGridComponent.prototype.locations$;
        /** @type {?} */
        StoreFinderGridComponent.prototype.isLoading$;
        /** @type {?} */
        StoreFinderGridComponent.prototype.defaultLocation;
        /** @type {?} */
        StoreFinderGridComponent.prototype.country;
        /** @type {?} */
        StoreFinderGridComponent.prototype.region;
        /**
         * @type {?}
         * @private
         */
        StoreFinderGridComponent.prototype.storeFinderService;
        /**
         * @type {?}
         * @private
         */
        StoreFinderGridComponent.prototype.route;
        /**
         * @type {?}
         * @private
         */
        StoreFinderGridComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderHeaderComponent = /** @class */ (function () {
        function StoreFinderHeaderComponent() {
        }
        StoreFinderHeaderComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-header',
                        template: "<ng-container>\n  <cx-store-finder-search></cx-store-finder-search>\n</ng-container>\n"
                    }] }
        ];
        return StoreFinderHeaderComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var AbstractStoreItemComponent = /** @class */ (function () {
        function AbstractStoreItemComponent(storeDataService) {
            this.storeDataService = storeDataService;
        }
        /**
         * @param {?} location
         * @return {?}
         */
        AbstractStoreItemComponent.prototype.getDirections = /**
         * @param {?} location
         * @return {?}
         */
        function (location) {
            /** @type {?} */
            var google_map_url = 'https://www.google.com/maps/dir/Current+Location/';
            /** @type {?} */
            var latitude = this.storeDataService.getStoreLatitude(location);
            /** @type {?} */
            var longitude = this.storeDataService.getStoreLongitude(location);
            return google_map_url + latitude + ',' + longitude;
        };
        /**
         * @param {?} addressParts
         * @return {?}
         */
        AbstractStoreItemComponent.prototype.getFormattedStoreAddress = /**
         * @param {?} addressParts
         * @return {?}
         */
        function (addressParts) {
            return addressParts.filter(Boolean).join(', ');
        };
        AbstractStoreItemComponent.propDecorators = {
            location: [{ type: core.Input }]
        };
        return AbstractStoreItemComponent;
    }());
    if (false) {
        /** @type {?} */
        AbstractStoreItemComponent.prototype.location;
        /**
         * @type {?}
         * @protected
         */
        AbstractStoreItemComponent.prototype.storeDataService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderListItemComponent = /** @class */ (function (_super) {
        __extends(StoreFinderListItemComponent, _super);
        function StoreFinderListItemComponent(storeDataService) {
            var _this = _super.call(this, storeDataService) || this;
            _this.storeDataService = storeDataService;
            _this.locationIndex = null;
            _this.storeItemClick = new core.EventEmitter();
            return _this;
        }
        /**
         * @return {?}
         */
        StoreFinderListItemComponent.prototype.handleStoreItemClick = /**
         * @return {?}
         */
        function () {
            if (this.locationIndex !== null) {
                this.storeItemClick.emit(this.locationIndex);
            }
        };
        StoreFinderListItemComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-list-item',
                        template: "<ng-container>\n  <div (click)=\"handleStoreItemClick()\">\n    <div class=\"cx-store-list-order\">\n      {{ listOrderLabel }}\n    </div>\n    <div class=\"cx-store-name\">\n      {{ location.displayName || location.name }}\n    </div>\n    <div class=\"cx-store-address\" *ngIf=\"location.address\">\n      <div class=\"cx-store-address-street\">\n        {{ location.address.line1 }} {{ location.address.line2 }}\n      </div>\n      {{\n        getFormattedStoreAddress([\n          location.address.town,\n          location.address.postalCode,\n          location.address.country.isocode\n        ])\n      }}\n      <div\n        class=\"cx-store-distance\"\n        *ngIf=\"location.formattedDistance && displayDistance\"\n      >\n        {{ location.formattedDistance }}\n      </div>\n    </div>\n    <a\n      href=\"{{ getDirections(location) }}\"\n      target=\"_blank\"\n      class=\"btn btn-sm btn-action btn-block cx-button\"\n      (click)=\"$event.stopPropagation()\"\n      >{{ 'storeFinder.getDirections' | cxTranslate }}</a\n    >\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderListItemComponent.ctorParameters = function () { return [
            { type: core$1.StoreDataService }
        ]; };
        StoreFinderListItemComponent.propDecorators = {
            locationIndex: [{ type: core.Input }],
            listOrderLabel: [{ type: core.Input }],
            displayDistance: [{ type: core.Input }],
            storeItemClick: [{ type: core.Output }]
        };
        return StoreFinderListItemComponent;
    }(AbstractStoreItemComponent));
    if (false) {
        /** @type {?} */
        StoreFinderListItemComponent.prototype.locationIndex;
        /** @type {?} */
        StoreFinderListItemComponent.prototype.listOrderLabel;
        /** @type {?} */
        StoreFinderListItemComponent.prototype.displayDistance;
        /** @type {?} */
        StoreFinderListItemComponent.prototype.storeItemClick;
        /**
         * @type {?}
         * @protected
         */
        StoreFinderListItemComponent.prototype.storeDataService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderMapComponent = /** @class */ (function () {
        function StoreFinderMapComponent(googleMapRendererService) {
            this.googleMapRendererService = googleMapRendererService;
            this.selectedStoreItem = new core.EventEmitter();
        }
        /**
         * @param {?} changes
         * @return {?}
         */
        StoreFinderMapComponent.prototype.ngOnChanges = /**
         * @param {?} changes
         * @return {?}
         */
        function (changes) {
            if (changes.locations && this.locations) {
                this.renderMap();
            }
        };
        /**
         * Sets the center of the map to the given location
         * @param latitude latitude of the new center
         * @param longitude longitude of the new center
         */
        /**
         * Sets the center of the map to the given location
         * @param {?} latitude latitude of the new center
         * @param {?} longitude longitude of the new center
         * @return {?}
         */
        StoreFinderMapComponent.prototype.centerMap = /**
         * Sets the center of the map to the given location
         * @param {?} latitude latitude of the new center
         * @param {?} longitude longitude of the new center
         * @return {?}
         */
        function (latitude, longitude) {
            this.googleMapRendererService.centerMap(latitude, longitude);
        };
        /**
         * @return {?}
         */
        StoreFinderMapComponent.prototype.renderMap = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.googleMapRendererService.renderMap(this.mapElement.nativeElement, this.locations, (/**
             * @param {?} markerIndex
             * @return {?}
             */
            function (markerIndex) {
                _this.selectStoreItemClickHandle(markerIndex);
            }));
        };
        /**
         * @private
         * @param {?} markerIndex
         * @return {?}
         */
        StoreFinderMapComponent.prototype.selectStoreItemClickHandle = /**
         * @private
         * @param {?} markerIndex
         * @return {?}
         */
        function (markerIndex) {
            this.selectedStoreItem.emit(markerIndex);
        };
        StoreFinderMapComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-map',
                        template: "<div #mapElement class=\"cx-store-map\"></div>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderMapComponent.ctorParameters = function () { return [
            { type: core$1.GoogleMapRendererService }
        ]; };
        StoreFinderMapComponent.propDecorators = {
            mapElement: [{ type: core.ViewChild, args: ['mapElement', { static: true },] }],
            locations: [{ type: core.Input }],
            selectedStoreItem: [{ type: core.Output }]
        };
        return StoreFinderMapComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderMapComponent.prototype.mapElement;
        /** @type {?} */
        StoreFinderMapComponent.prototype.locations;
        /** @type {?} */
        StoreFinderMapComponent.prototype.selectedStoreItem;
        /**
         * @type {?}
         * @private
         */
        StoreFinderMapComponent.prototype.googleMapRendererService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderPaginationDetailsComponent = /** @class */ (function () {
        function StoreFinderPaginationDetailsComponent() {
        }
        /**
         * @return {?}
         */
        StoreFinderPaginationDetailsComponent.prototype.getResultsPerPage = /**
         * @return {?}
         */
        function () {
            if (this.pagination.totalResults > this.pagination.pageSize) {
                /** @type {?} */
                var firstItem = this.pagination.currentPage * this.pagination.pageSize + 1;
                /** @type {?} */
                var resultsPerPage = (this.pagination.currentPage + 1) * this.pagination.pageSize;
                if (resultsPerPage > this.pagination.totalResults) {
                    resultsPerPage = this.pagination.totalResults;
                }
                return firstItem + " - " + resultsPerPage;
            }
            else {
                return "1 - " + this.pagination.totalResults;
            }
        };
        StoreFinderPaginationDetailsComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-pagination-details',
                        template: "<span class=\"cx-pagination-details\">\n  {{ getResultsPerPage() }}\n  {{\n    'storeFinder.fromStoresFound'\n      | cxTranslate: { count: pagination.totalResults }\n  }}\n</span>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderPaginationDetailsComponent.ctorParameters = function () { return []; };
        StoreFinderPaginationDetailsComponent.propDecorators = {
            pagination: [{ type: core.Input }]
        };
        return StoreFinderPaginationDetailsComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderPaginationDetailsComponent.prototype.pagination;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderListComponent = /** @class */ (function () {
        function StoreFinderListComponent(storeDataService, document) {
            this.storeDataService = storeDataService;
            this.document = document;
            this.iconTypes = ICON_TYPE;
            this.isDetailsModeVisible = false;
        }
        /**
         * @param {?} index
         * @param {?} location
         * @return {?}
         */
        StoreFinderListComponent.prototype.centerStoreOnMapByIndex = /**
         * @param {?} index
         * @param {?} location
         * @return {?}
         */
        function (index, location) {
            this.showStoreDetails(location);
            this.selectedStoreIndex = index;
            this.selectedStore = location;
            this.storeMap.centerMap(this.storeDataService.getStoreLatitude(this.locations.stores[index]), this.storeDataService.getStoreLongitude(this.locations.stores[index]));
        };
        /**
         * @param {?} index
         * @return {?}
         */
        StoreFinderListComponent.prototype.selectStoreItemList = /**
         * @param {?} index
         * @return {?}
         */
        function (index) {
            this.selectedStoreIndex = index;
            /** @type {?} */
            var storeListItem = this.document.getElementById('item-' + index);
            storeListItem.scrollIntoView({
                behavior: 'smooth',
                block: 'center',
            });
        };
        /**
         * @param {?} location
         * @return {?}
         */
        StoreFinderListComponent.prototype.showStoreDetails = /**
         * @param {?} location
         * @return {?}
         */
        function (location) {
            this.isDetailsModeVisible = true;
            this.storeDetails = location;
        };
        /**
         * @return {?}
         */
        StoreFinderListComponent.prototype.hideStoreDetails = /**
         * @return {?}
         */
        function () {
            this.isDetailsModeVisible = false;
            this.selectedStoreIndex = undefined;
            this.selectedStore = undefined;
            this.storeMap.renderMap();
        };
        StoreFinderListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-list',
                        template: "<ng-container *ngIf=\"locations\">\n  <div class=\"container mb-2\">\n    <div class=\"row\" *ngIf=\"locations?.pagination\">\n      <div class=\"col-md-12\">\n        <cx-store-finder-pagination-details\n          [pagination]=\"locations.pagination\"\n        ></cx-store-finder-pagination-details>\n      </div>\n      <div class=\"col-md-2 text-left cx-back-wrapper\">\n        <button\n          class=\"btn btn-block btn-action\"\n          *ngIf=\"isDetailsModeVisible\"\n          (click)=\"hideStoreDetails()\"\n        >\n          <cx-icon [type]=\"iconTypes.CARET_LEFT\"></cx-icon>\n          {{ 'storeFinder.backToList' | cxTranslate }}\n        </button>\n      </div>\n    </div>\n    <div *ngIf=\"locations?.stores\" class=\"row cx-columns\">\n      <div class=\"col-md-4 cx-address-col\">\n        <div class=\"cx-store-details\" *ngIf=\"isDetailsModeVisible\">\n          <cx-store-finder-store-description\n            [location]=\"storeDetails\"\n            [disableMap]=\"true\"\n          ></cx-store-finder-store-description>\n        </div>\n        <ol class=\"cx-list\" *ngIf=\"!isDetailsModeVisible\">\n          <li\n            *ngFor=\"let location of locations?.stores; let i = index\"\n            id=\"{{ 'item-' + i }}\"\n            [ngClass]=\"{\n              'cx-selected-item': selectedStoreIndex === i\n            }\"\n            class=\"cx-list-items\"\n          >\n            <cx-store-finder-list-item\n              [location]=\"location\"\n              [locationIndex]=\"i\"\n              [displayDistance]=\"useMylocation\"\n              (storeItemClick)=\"centerStoreOnMapByIndex($event, location)\"\n              [listOrderLabel]=\"\n                i +\n                locations.pagination.currentPage *\n                  locations.pagination.pageSize +\n                1\n              \"\n            ></cx-store-finder-list-item>\n          </li>\n        </ol>\n      </div>\n      <div class=\"col-md-8 cx-map-col\">\n        <cx-store-finder-map\n          #storeMap\n          [locations]=\"locations.stores\"\n          (selectedStoreItem)=\"selectStoreItemList($event)\"\n        ></cx-store-finder-map>\n      </div>\n    </div>\n\n    <!-- mobile tabs for column set only -->\n\n    <div *ngIf=\"locations?.stores\" class=\"cx-columns-mobile\">\n      <ngb-tabset justify=\"center\">\n        <ngb-tab>\n          <ng-template ngbTabTitle>\n            {{ 'storeFinder.listView' | cxTranslate }}\n          </ng-template>\n          <ng-template ngbTabContent>\n            <div class=\"cx-address-col\">\n              <div class=\"cx-store-details\" *ngIf=\"isDetailsModeVisible\">\n                <cx-store-finder-store-description\n                  [location]=\"storeDetails\"\n                  [disableMap]=\"true\"\n                ></cx-store-finder-store-description>\n              </div>\n              <ol class=\"cx-list\" *ngIf=\"!isDetailsModeVisible\">\n                <li\n                  *ngFor=\"let location of locations?.stores; let i = index\"\n                  id=\"{{ 'item-' + i }}\"\n                  [ngClass]=\"{\n                    'cx-selected-item': selectedStoreIndex === i\n                  }\"\n                  class=\"cx-list-items\"\n                >\n                  <cx-store-finder-list-item\n                    [location]=\"location\"\n                    [locationIndex]=\"i\"\n                    [displayDistance]=\"useMylocation\"\n                    (storeItemClick)=\"centerStoreOnMapByIndex($event, location)\"\n                    [listOrderLabel]=\"\n                      i +\n                      locations.pagination.currentPage *\n                        locations.pagination.pageSize +\n                      1\n                    \"\n                  ></cx-store-finder-list-item>\n                </li>\n              </ol>\n            </div>\n          </ng-template>\n        </ngb-tab>\n        <ngb-tab>\n          <ng-template ngbTabTitle>\n            {{ 'storeFinder.mapView' | cxTranslate }}\n          </ng-template>\n          <ng-template ngbTabContent>\n            <div class=\"cx-map-col\">\n              <cx-store-finder-map\n                #storeMap\n                [locations]=\"selectedStore ? [selectedStore] : locations.stores\"\n                (selectedStoreItem)=\"selectStoreItemList($event)\"\n              ></cx-store-finder-map>\n            </div>\n          </ng-template>\n        </ngb-tab>\n      </ngb-tabset>\n    </div>\n\n    <!-- mobile tabs end -->\n\n    <div *ngIf=\"!locations?.stores\" class=\"row\">\n      <div class=\"col-md-12 cx-not-found\">\n        {{ 'storeFinder.noStoreFound' | cxTranslate }}\n      </div>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderListComponent.ctorParameters = function () { return [
            { type: core$1.StoreDataService },
            { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] }
        ]; };
        StoreFinderListComponent.propDecorators = {
            locations: [{ type: core.Input }],
            useMylocation: [{ type: core.Input }],
            storeMap: [{ type: core.ViewChild, args: ['storeMap', { static: false },] }]
        };
        return StoreFinderListComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderListComponent.prototype.locations;
        /** @type {?} */
        StoreFinderListComponent.prototype.useMylocation;
        /** @type {?} */
        StoreFinderListComponent.prototype.storeMap;
        /** @type {?} */
        StoreFinderListComponent.prototype.selectedStore;
        /** @type {?} */
        StoreFinderListComponent.prototype.selectedStoreIndex;
        /** @type {?} */
        StoreFinderListComponent.prototype.isDetailsModeVisible;
        /** @type {?} */
        StoreFinderListComponent.prototype.storeDetails;
        /** @type {?} */
        StoreFinderListComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @private
         */
        StoreFinderListComponent.prototype.storeDataService;
        /**
         * @type {?}
         * @private
         */
        StoreFinderListComponent.prototype.document;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderSearchResultComponent = /** @class */ (function () {
        function StoreFinderSearchResultComponent(storeFinderService, route) {
            this.storeFinderService = storeFinderService;
            this.route = route;
            this.countryCode = null;
            this.searchConfig = {
                currentPage: 0,
            };
        }
        /**
         * @return {?}
         */
        StoreFinderSearchResultComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.subscription = this.route.queryParams.subscribe((/**
             * @param {?} params
             * @return {?}
             */
            function (params) {
                return _this.initialize(params);
            }));
        };
        /**
         * @return {?}
         */
        StoreFinderSearchResultComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.subscription) {
                this.subscription.unsubscribe();
            }
        };
        /**
         * @param {?} pageNumber
         * @return {?}
         */
        StoreFinderSearchResultComponent.prototype.viewPage = /**
         * @param {?} pageNumber
         * @return {?}
         */
        function (pageNumber) {
            this.searchConfig = __assign({}, this.searchConfig, { currentPage: pageNumber });
            this.storeFinderService.findStoresAction(this.searchQuery.queryText, this.searchConfig, this.geolocation, this.countryCode, this.useMyLocation);
        };
        /**
         * @private
         * @param {?} params
         * @return {?}
         */
        StoreFinderSearchResultComponent.prototype.initialize = /**
         * @private
         * @param {?} params
         * @return {?}
         */
        function (params) {
            this.searchQuery = this.parseParameters(params);
            this.useMyLocation = params && params.useMyLocation ? true : false;
            this.searchConfig = __assign({}, this.searchConfig, { currentPage: 0 });
            this.storeFinderService.findStoresAction(this.searchQuery.queryText, this.searchConfig, this.geolocation, this.countryCode, this.useMyLocation);
            this.isLoading$ = this.storeFinderService.getStoresLoading();
            this.locations$ = this.storeFinderService.getFindStoresEntities();
        };
        /**
         * @private
         * @param {?} queryParams
         * @return {?}
         */
        StoreFinderSearchResultComponent.prototype.parseParameters = /**
         * @private
         * @param {?} queryParams
         * @return {?}
         */
        function (queryParams) {
            /** @type {?} */
            var searchQuery;
            if (queryParams.query) {
                searchQuery = { queryText: queryParams.query };
            }
            else {
                searchQuery = { queryText: '' };
            }
            searchQuery.useMyLocation =
                queryParams.useMyLocation != null &&
                    queryParams.useMyLocation.toUpperCase() === 'TRUE';
            return searchQuery;
        };
        StoreFinderSearchResultComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-search-result',
                        template: "<div\n  *ngIf=\"\n    !(isLoading$ | async) && (locations$ | async) as locations;\n    else loading\n  \"\n>\n  <div *ngIf=\"locations?.stores.length\">\n    <div class=\"cx-pagination\">\n      <cx-pagination\n        [pagination]=\"locations.pagination\"\n        (viewPageEvent)=\"viewPage($event)\"\n      ></cx-pagination>\n    </div>\n  </div>\n  <cx-store-finder-list\n    *ngIf=\"locations?.stores.length\"\n    [locations]=\"locations\"\n    [useMylocation]=\"useMyLocation\"\n  ></cx-store-finder-list>\n  <div class=\"container\" *ngIf=\"!locations?.stores.length\">\n    <div class=\"row\">\n      <span class=\"cx-no-stores\">{{\n        'storeFinder.noStoresMessage' | cxTranslate\n      }}</span>\n    </div>\n  </div>\n</div>\n<ng-template #loading>\n  <div class=\"cx-spinner\">\n    <cx-spinner></cx-spinner>\n  </div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderSearchResultComponent.ctorParameters = function () { return [
            { type: core$1.StoreFinderService },
            { type: router.ActivatedRoute }
        ]; };
        return StoreFinderSearchResultComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.locations;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.searchQuery;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.locations$;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.isLoading$;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.geolocation;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.subscription;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.useMyLocation;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.countryCode;
        /** @type {?} */
        StoreFinderSearchResultComponent.prototype.searchConfig;
        /**
         * @type {?}
         * @private
         */
        StoreFinderSearchResultComponent.prototype.storeFinderService;
        /**
         * @type {?}
         * @private
         */
        StoreFinderSearchResultComponent.prototype.route;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderSearchComponent = /** @class */ (function () {
        function StoreFinderSearchComponent(routingService) {
            this.routingService = routingService;
            this.searchBox = new forms.FormControl();
            this.iconTypes = ICON_TYPE;
        }
        /**
         * @param {?} address
         * @return {?}
         */
        StoreFinderSearchComponent.prototype.findStores = /**
         * @param {?} address
         * @return {?}
         */
        function (address) {
            this.routingService.go(['store-finder/find'], { query: address });
        };
        /**
         * @return {?}
         */
        StoreFinderSearchComponent.prototype.viewStoresWithMyLoc = /**
         * @return {?}
         */
        function () {
            this.routingService.go(['store-finder/find'], { useMyLocation: true });
        };
        /**
         * @param {?} event
         * @return {?}
         */
        StoreFinderSearchComponent.prototype.onKey = /**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            if (this.searchBox.value &&
                this.searchBox.value.length &&
                event.key === 'Enter') {
                this.findStores(this.searchBox.value);
            }
        };
        StoreFinderSearchComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-search',
                        template: "<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col-md-12 col-lg-7\">\n      <div class=\"form-group search-wrapper\">\n        <input\n          #queryInput\n          [formControl]=\"searchBox\"\n          (keyup)=\"onKey($event)\"\n          type=\"text\"\n          class=\"form-control\"\n          placeholder=\"{{ 'storeFinder.searchBox' | cxTranslate }}\"\n          required\n        />\n        <cx-icon\n          [type]=\"iconTypes.SEARCH\"\n          aria-label=\"search\"\n          class=\"search\"\n          [routerLink]=\"['/store-finder/find']\"\n          [queryParams]=\"{ query: queryInput.value }\"\n          [ngClass]=\"{\n            'disabled-action': !(queryInput.value && queryInput.value.length)\n          }\"\n        ></cx-icon>\n      </div>\n    </div>\n    <div class=\"col-md-12 col-lg-5\">\n      <div class=\"row cx-search-links mb-3\">\n        <div class=\"col-6\">\n          <button\n            (click)=\"viewStoresWithMyLoc()\"\n            class=\"btn btn-primary btn-block\"\n          >\n            {{ 'storeFinder.useMyLocation' | cxTranslate }}\n          </button>\n        </div>\n        <div class=\"col-6\">\n          <button\n            [routerLink]=\"['/store-finder/view-all']\"\n            class=\"btn btn-primary btn-block\"\n          >\n            {{ 'storeFinder.viewAllStores' | cxTranslate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderSearchComponent.ctorParameters = function () { return [
            { type: core$1.RoutingService }
        ]; };
        return StoreFinderSearchComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderSearchComponent.prototype.searchBox;
        /** @type {?} */
        StoreFinderSearchComponent.prototype.iconTypes;
        /**
         * @type {?}
         * @private
         */
        StoreFinderSearchComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderStoreDescriptionComponent = /** @class */ (function (_super) {
        __extends(StoreFinderStoreDescriptionComponent, _super);
        function StoreFinderStoreDescriptionComponent(storeDataService) {
            var _this = _super.call(this, storeDataService) || this;
            _this.storeDataService = storeDataService;
            return _this;
        }
        StoreFinderStoreDescriptionComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-store-description',
                        template: "<ng-container *ngIf=\"location\">\n  <div class=\"container\">\n    <div class=\"row\">\n      <article class=\"cx-store col-md-4\">\n        <h2>{{ location.displayName || location.name }}</h2>\n\n        <p *ngIf=\"location.address\" class=\"cx-store-description-address\">\n          {{ location.address.line1 }} {{ location.address.line2 }} <br />\n          {{\n            getFormattedStoreAddress([\n              location.address.town,\n              location.address.postalCode,\n              location.address.country.isocode\n            ])\n          }}\n        </p>\n\n        <section class=\"cx-contact\">\n          <ul class=\"cx-list\">\n            <li class=\"cx-item\">\n              <a\n                class=\"cx-link\"\n                [href]=\"getDirections(location)\"\n                target=\"_blank\"\n                >{{ 'storeFinder.getDirections' | cxTranslate }}</a\n              >\n            </li>\n            <li class=\"cx-item\" *ngIf=\"location.address?.phone\">\n              {{ 'storeFinder.call' | cxTranslate }}\n              {{ location.address?.phone }}\n            </li>\n          </ul>\n        </section>\n        <div class=\"cx-schedule\" *ngIf=\"location.openingHours\">\n          <cx-schedule [location]=\"location\">\n            <h3>{{ 'storeFinder.storeHours' | cxTranslate }}</h3>\n          </cx-schedule>\n        </div>\n\n        <div *ngIf=\"(location.features | json) != '{}'\" class=\"cx-features\">\n          <div class=\"row \">\n            <div class=\"col-lg-12\">\n              <h3 class=\"cx-features-header\">\n                {{ 'storeFinder.storeFeatures' | cxTranslate }}\n              </h3>\n            </div>\n          </div>\n\n          <article class=\"row\">\n            <div\n              class=\"col-lg-12 cx-feature-item\"\n              *ngFor=\"let feature of location.features?.entry\"\n            >\n              <div class=\"cx-feature-value\">{{ feature.value }}</div>\n            </div>\n          </article>\n        </div>\n      </article>\n      <article class=\"cx-storeMap col-lg-8\" *ngIf=\"!disableMap\">\n        <cx-store-finder-map [locations]=\"[location]\"></cx-store-finder-map>\n      </article>\n    </div>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderStoreDescriptionComponent.ctorParameters = function () { return [
            { type: core$1.StoreDataService }
        ]; };
        StoreFinderStoreDescriptionComponent.propDecorators = {
            location: [{ type: core.Input }],
            disableMap: [{ type: core.Input }]
        };
        return StoreFinderStoreDescriptionComponent;
    }(AbstractStoreItemComponent));
    if (false) {
        /** @type {?} */
        StoreFinderStoreDescriptionComponent.prototype.location;
        /** @type {?} */
        StoreFinderStoreDescriptionComponent.prototype.disableMap;
        /**
         * @type {?}
         * @protected
         */
        StoreFinderStoreDescriptionComponent.prototype.storeDataService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderStoresCountComponent = /** @class */ (function () {
        function StoreFinderStoresCountComponent(storeFinderService) {
            this.storeFinderService = storeFinderService;
        }
        /**
         * @return {?}
         */
        StoreFinderStoresCountComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.storeFinderService.viewAllStores();
            this.locations$ = this.storeFinderService.getViewAllStoresEntities();
            this.isLoading$ = this.storeFinderService.getViewAllStoresLoading();
        };
        StoreFinderStoresCountComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-stores-count',
                        template: "<ng-container\n  *ngIf=\"\n    !(isLoading$ | async) && (locations$ | async) as locations;\n    else loading\n  \"\n>\n  <div class=\"cx-count container\">\n    <div class=\"row\" *ngIf=\"locations?.length\">\n      <div\n        *ngFor=\"let country of locations\"\n        class=\"cx-set col-sm-6 col-md-4 col-lg-4 col-xl-3\"\n      >\n        <a [routerLink]=\"['../country', country.isoCode]\" class=\"btn-link\">\n          <div class=\"cx-title\">\n            <span\n              [ngClass]=\"\n                country?.storeCountDataList\n                  ? 'country-header'\n                  : 'country-header-link'\n              \"\n              class=\"cx-name\"\n              >{{ country.name }}</span\n            >\n            <span\n              [ngClass]=\"\n                country?.storeCountDataList\n                  ? 'country-header'\n                  : 'country-header-link'\n              \"\n              *ngIf=\"!country?.storeCountDataList\"\n              class=\"cx-country-count\"\n              >({{ country.count }})</span\n            >\n          </div>\n        </a>\n      </div>\n    </div>\n    <div class=\"row\" *ngIf=\"!locations?.length\">\n      <span class=\"cx-no-stores\">{{\n        'storeFinder.noStoresMessage' | cxTranslate\n      }}</span>\n    </div>\n  </div>\n</ng-container>\n<ng-template #loading>\n  <div class=\"cx-count-spinner\"><cx-spinner></cx-spinner></div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderStoresCountComponent.ctorParameters = function () { return [
            { type: core$1.StoreFinderService }
        ]; };
        return StoreFinderStoresCountComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderStoresCountComponent.prototype.locations$;
        /** @type {?} */
        StoreFinderStoresCountComponent.prototype.isLoading$;
        /**
         * @type {?}
         * @private
         */
        StoreFinderStoresCountComponent.prototype.storeFinderService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderComponent = /** @class */ (function () {
        function StoreFinderComponent() {
        }
        StoreFinderComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder',
                        template: "<ng-container>\n  <div class=\"cx-store-finder-wrapper\">\n    <cx-store-finder-header></cx-store-finder-header>\n    <router-outlet></router-outlet>\n  </div>\n</ng-container>\n"
                    }] }
        ];
        return StoreFinderComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderStoreComponent = /** @class */ (function () {
        function StoreFinderStoreComponent(storeFinderService, route, routingService) {
            this.storeFinderService = storeFinderService;
            this.route = route;
            this.routingService = routingService;
            this.iconTypes = ICON_TYPE;
        }
        /**
         * @return {?}
         */
        StoreFinderStoreComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            if (!this.location) {
                this.requestStoresData();
                this.location$ = this.storeFinderService.getFindStoresEntities();
                this.isLoading$ = this.storeFinderService.getStoresLoading();
            }
        };
        /**
         * @return {?}
         */
        StoreFinderStoreComponent.prototype.requestStoresData = /**
         * @return {?}
         */
        function () {
            this.storeFinderService.viewStoreById(this.route.snapshot.params.store);
        };
        /**
         * @return {?}
         */
        StoreFinderStoreComponent.prototype.goBack = /**
         * @return {?}
         */
        function () {
            this.routingService.go([
                "store-finder/country/" + this.route.snapshot.params.country,
            ]);
        };
        StoreFinderStoreComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-store-finder-store',
                        template: "<div\n  class=\"container\"\n  *ngIf=\"\n    location || (!(isLoading$ | async) && (location$ | async)) as location;\n    else loading\n  \"\n>\n  <div class=\"row cx-store-actions\">\n    <div class=\"col-md-4 col-sm-6 col-lg-2\">\n      <button class=\"btn btn-block btn-action\" (click)=\"goBack()\">\n        <cx-icon [type]=\"iconTypes.CARET_LEFT\"></cx-icon>\n        {{ 'storeFinder.backToList' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-12 p-0\">\n      <cx-store-finder-store-description\n        [disableMap]=\"disableMap\"\n        [location]=\"location\"\n      ></cx-store-finder-store-description>\n    </div>\n  </div>\n</div>\n<ng-template #loading>\n  <div class=\"cx-spinner\"><cx-spinner></cx-spinner></div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        StoreFinderStoreComponent.ctorParameters = function () { return [
            { type: core$1.StoreFinderService },
            { type: router.ActivatedRoute },
            { type: core$1.RoutingService }
        ]; };
        StoreFinderStoreComponent.propDecorators = {
            location: [{ type: core.Input }],
            disableMap: [{ type: core.Input }]
        };
        return StoreFinderStoreComponent;
    }());
    if (false) {
        /** @type {?} */
        StoreFinderStoreComponent.prototype.location$;
        /** @type {?} */
        StoreFinderStoreComponent.prototype.isLoading$;
        /** @type {?} */
        StoreFinderStoreComponent.prototype.iconTypes;
        /** @type {?} */
        StoreFinderStoreComponent.prototype.location;
        /** @type {?} */
        StoreFinderStoreComponent.prototype.disableMap;
        /**
         * @type {?}
         * @private
         */
        StoreFinderStoreComponent.prototype.storeFinderService;
        /**
         * @type {?}
         * @private
         */
        StoreFinderStoreComponent.prototype.route;
        /**
         * @type {?}
         * @private
         */
        StoreFinderStoreComponent.prototype.routingService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StoreFinderModule = /** @class */ (function () {
        function StoreFinderModule() {
        }
        StoreFinderModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.ReactiveFormsModule,
                            router.RouterModule,
                            ListNavigationModule,
                            ngBootstrap.NgbTabsetModule,
                            SpinnerModule,
                            core$1.UrlModule,
                            core$1.StoreFinderCoreModule,
                            core$1.I18nModule,
                            IconModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    StoreFinderComponent: {
                                        component: StoreFinderComponent,
                                        childRoutes: [
                                            {
                                                path: 'find',
                                                component: StoreFinderSearchResultComponent,
                                            },
                                            {
                                                path: 'view-all',
                                                component: StoreFinderStoresCountComponent,
                                            },
                                            {
                                                path: 'country/:country',
                                                component: StoreFinderGridComponent,
                                            },
                                            {
                                                path: 'country/:country/region/:region',
                                                component: StoreFinderGridComponent,
                                            },
                                            {
                                                path: 'country/:country/region/:region/:store',
                                                component: StoreFinderStoreComponent,
                                            },
                                            {
                                                path: 'country/:country/:store',
                                                component: StoreFinderStoreComponent,
                                            },
                                        ],
                                    },
                                },
                                layoutSlots: {
                                    StoreFinderPageTemplate: {
                                        slots: ['MiddleContent', 'SideContent'],
                                    },
                                },
                            }))),
                        ],
                        declarations: [
                            StoreFinderSearchComponent,
                            StoreFinderListComponent,
                            StoreFinderMapComponent,
                            StoreFinderListItemComponent,
                            StoreFinderStoresCountComponent,
                            StoreFinderGridComponent,
                            StoreFinderStoreDescriptionComponent,
                            ScheduleComponent,
                            StoreFinderHeaderComponent,
                            StoreFinderSearchResultComponent,
                            StoreFinderComponent,
                            StoreFinderPaginationDetailsComponent,
                            StoreFinderStoreComponent,
                        ],
                        exports: [
                            ScheduleComponent,
                            StoreFinderComponent,
                            StoreFinderGridComponent,
                            StoreFinderHeaderComponent,
                            StoreFinderListItemComponent,
                            StoreFinderMapComponent,
                            StoreFinderPaginationDetailsComponent,
                            StoreFinderSearchComponent,
                            StoreFinderSearchResultComponent,
                            StoreFinderListComponent,
                            StoreFinderStoreDescriptionComponent,
                            StoreFinderStoresCountComponent,
                            StoreFinderStoreComponent,
                        ],
                        entryComponents: [
                            StoreFinderComponent,
                            StoreFinderSearchResultComponent,
                            StoreFinderStoresCountComponent,
                            StoreFinderGridComponent,
                            StoreFinderStoreComponent,
                        ],
                    },] }
        ];
        return StoreFinderModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutLoginComponent = /** @class */ (function () {
        function CheckoutLoginComponent(formBuilder, cartService, authRedirectService) {
            this.formBuilder = formBuilder;
            this.cartService = cartService;
            this.authRedirectService = authRedirectService;
            this.form = this.formBuilder.group({
                email: ['', [forms.Validators.required, CustomFormValidators.emailValidator]],
                emailConfirmation: ['', [forms.Validators.required]],
            }, { validator: this.emailsMatch });
            this.submitClicked = false;
        }
        /**
         * @param {?} formControlName
         * @return {?}
         */
        CheckoutLoginComponent.prototype.isNotValid = /**
         * @param {?} formControlName
         * @return {?}
         */
        function (formControlName) {
            return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);
        };
        /**
         * @return {?}
         */
        CheckoutLoginComponent.prototype.isEmailConfirmInvalid = /**
         * @return {?}
         */
        function () {
            return (this.form.hasError('NotEqual') &&
                (this.submitClicked ||
                    (this.form.get('emailConfirmation').touched &&
                        this.form.get('emailConfirmation').dirty)));
        };
        /**
         * @return {?}
         */
        CheckoutLoginComponent.prototype.onSubmit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.submitClicked = true;
            if (this.form.invalid) {
                return;
            }
            /** @type {?} */
            var email = this.form.value.email;
            this.cartService.addEmail(email);
            if (!this.sub) {
                this.sub = this.cartService.getAssignedUser().subscribe((/**
                 * @param {?} _
                 * @return {?}
                 */
                function (_) {
                    if (_this.cartService.isGuestCart()) {
                        _this.authRedirectService.redirect();
                    }
                }));
            }
        };
        /**
         * @return {?}
         */
        CheckoutLoginComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.sub) {
                this.sub.unsubscribe();
            }
        };
        /**
         * @private
         * @param {?} abstractControl
         * @return {?}
         */
        CheckoutLoginComponent.prototype.emailsMatch = /**
         * @private
         * @param {?} abstractControl
         * @return {?}
         */
        function (abstractControl) {
            return abstractControl.get('email').value !==
                abstractControl.get('emailConfirmation').value
                ? { NotEqual: true }
                : null;
        };
        CheckoutLoginComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-checkout-login',
                        template: "<form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'checkoutLogin.emailAddress.label' | cxTranslate\n      }}</span>\n      <input\n        type=\"email\"\n        name=\"email\"\n        class=\"form-control\"\n        formControlName=\"email\"\n        placeholder=\"{{\n          'checkoutLogin.emailAddress.placeholder' | cxTranslate\n        }}\"\n        [class.is-invalid]=\"isNotValid('email')\"\n      />\n      <div class=\"invalid-feedback\" *ngIf=\"isNotValid('email')\">\n        <span>{{ 'checkoutLogin.emailIsRequired' | cxTranslate }}</span>\n      </div>\n    </label>\n  </div>\n\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'checkoutLogin.confirmEmail.label' | cxTranslate\n      }}</span>\n      <input\n        type=\"email\"\n        name=\"emailConfirmation\"\n        class=\"form-control\"\n        formControlName=\"emailConfirmation\"\n        placeholder=\"{{\n          'checkoutLogin.confirmEmail.placeholder' | cxTranslate\n        }}\"\n        [class.is-invalid]=\"isEmailConfirmInvalid()\"\n      />\n      <div class=\"invalid-feedback\" *ngIf=\"isEmailConfirmInvalid()\">\n        <span>{{ 'checkoutLogin.emailsMustMatch' | cxTranslate }}</span>\n      </div>\n    </label>\n  </div>\n\n  <button type=\"submit\" class=\"btn btn-block btn-primary\">\n    {{ 'checkoutLogin.continue' | cxTranslate }}\n  </button>\n</form>\n"
                    }] }
        ];
        /** @nocollapse */
        CheckoutLoginComponent.ctorParameters = function () { return [
            { type: forms.FormBuilder },
            { type: core$1.CartService },
            { type: core$1.AuthRedirectService }
        ]; };
        return CheckoutLoginComponent;
    }());
    if (false) {
        /** @type {?} */
        CheckoutLoginComponent.prototype.form;
        /** @type {?} */
        CheckoutLoginComponent.prototype.sub;
        /**
         * @type {?}
         * @private
         */
        CheckoutLoginComponent.prototype.submitClicked;
        /**
         * @type {?}
         * @private
         */
        CheckoutLoginComponent.prototype.formBuilder;
        /**
         * @type {?}
         * @private
         */
        CheckoutLoginComponent.prototype.cartService;
        /**
         * @type {?}
         * @private
         */
        CheckoutLoginComponent.prototype.authRedirectService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CheckoutLoginModule = /** @class */ (function () {
        function CheckoutLoginModule() {
        }
        CheckoutLoginModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            core$1.I18nModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    GuestCheckoutLoginComponent: {
                                        component: CheckoutLoginComponent,
                                        guards: [NotCheckoutAuthGuard],
                                    },
                                },
                            }))),
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                        ],
                        declarations: [CheckoutLoginComponent],
                        exports: [CheckoutLoginComponent],
                        entryComponents: [CheckoutLoginComponent],
                    },] }
        ];
        return CheckoutLoginModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LoginFormComponent = /** @class */ (function () {
        function LoginFormComponent(auth, globalMessageService, fb, authRedirectService, winRef, activatedRoute, checkoutConfigService) {
            this.auth = auth;
            this.globalMessageService = globalMessageService;
            this.fb = fb;
            this.authRedirectService = authRedirectService;
            this.winRef = winRef;
            this.activatedRoute = activatedRoute;
            this.checkoutConfigService = checkoutConfigService;
            this.loginAsGuest = false;
        }
        /**
         * @return {?}
         */
        LoginFormComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            this.form = this.fb.group({
                userId: ['', [forms.Validators.required, CustomFormValidators.emailValidator]],
                password: ['', forms.Validators.required],
            });
            if (this.checkoutConfigService &&
                this.checkoutConfigService.isGuestCheckout()) {
                this.loginAsGuest = this.activatedRoute.snapshot.queryParams['forced'];
            }
            // TODO(issue:#4055) Deprecated since 1.1.0
            if (this.winRef && this.winRef.nativeWindow) {
                /** @type {?} */
                var routeState = this.winRef.nativeWindow.history &&
                    this.winRef.nativeWindow.history.state;
                if (routeState && routeState['newUid'] && routeState['newUid'].length) {
                    this.prefillForm('userId', routeState['newUid']);
                }
            }
        };
        /**
         * @return {?}
         */
        LoginFormComponent.prototype.login = /**
         * @return {?}
         */
        function () {
            var _this = this;
            var _a = this.form.controls, userId = _a.userId, password = _a.password;
            this.auth.authorize(userId.value.toLowerCase(), // backend accepts lowercase emails only
            password.value);
            if (!this.sub) {
                this.sub = this.auth.getUserToken().subscribe((/**
                 * @param {?} data
                 * @return {?}
                 */
                function (data) {
                    if (data && data.access_token) {
                        _this.globalMessageService.remove(core$1.GlobalMessageType.MSG_TYPE_ERROR);
                        _this.authRedirectService.redirect();
                    }
                }));
            }
        };
        /**
         * @return {?}
         */
        LoginFormComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            if (this.sub) {
                this.sub.unsubscribe();
            }
        };
        /**
         * @private
         * @param {?} field
         * @param {?} value
         * @return {?}
         */
        LoginFormComponent.prototype.prefillForm = /**
         * @private
         * @param {?} field
         * @param {?} value
         * @return {?}
         */
        function (field, value) {
            var _a;
            this.form.patchValue((_a = {},
                _a[field] = value,
                _a));
            this.form.get(field).markAsTouched(); // this action will check field validity on load
        };
        LoginFormComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-login-form',
                        template: "<form (submit)=\"login()\" [formGroup]=\"form\">\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'loginForm.emailAddress.label' | cxTranslate\n      }}</span>\n      <input\n        type=\"email\"\n        class=\"form-control\"\n        [class.is-invalid]=\"\n          form.controls['userId'].invalid &&\n          (form.controls['userId'].touched || form.controls['userId'].dirty)\n        \"\n        formControlName=\"userId\"\n        placeholder=\"{{ 'loginForm.emailAddress.placeholder' | cxTranslate }}\"\n      />\n    </label>\n    <div\n      class=\"invalid-feedback\"\n      *ngIf=\"\n        form.controls['userId'].invalid &&\n        (form.controls['userId'].touched || form.controls['userId'].dirty)\n      \"\n    >\n      <span>{{ 'loginForm.wrongEmailFormat' | cxTranslate }}</span>\n    </div>\n  </div>\n  <div class=\"form-group\">\n    <label>\n      <span class=\"label-content\">{{\n        'loginForm.password.label' | cxTranslate\n      }}</span>\n      <input\n        type=\"password\"\n        class=\"form-control\"\n        placeholder=\"{{ 'loginForm.password.placeholder' | cxTranslate }}\"\n        formControlName=\"password\"\n      />\n    </label>\n  </div>\n  <p>\n    <a\n      [routerLink]=\"{ cxRoute: 'forgotPassword' } | cxUrl\"\n      aria-controls=\"reset-password\"\n      class=\"btn-link\"\n      >{{ 'loginForm.forgotPassword' | cxTranslate }}</a\n    >\n  </p>\n\n  <button\n    type=\"submit\"\n    class=\"btn btn-block btn-primary\"\n    [disabled]=\"form.invalid\"\n  >\n    {{ 'loginForm.signIn' | cxTranslate }}\n  </button>\n</form>\n\n<div class=\"register\">\n  <h3 class=\"cx-section-title cx-section-title-alt\">\n    {{ 'loginForm.dontHaveAccount' | cxTranslate }}\n  </h3>\n\n  <ng-container *ngIf=\"!loginAsGuest\">\n    <a\n      [routerLink]=\"{ cxRoute: 'register' } | cxUrl\"\n      class=\"btn btn-block btn-secondary btn-register\"\n      >{{ 'loginForm.register' | cxTranslate }}</a\n    >\n  </ng-container>\n\n  <ng-container *ngIf=\"loginAsGuest\">\n    <a\n      [routerLink]=\"{ cxRoute: 'checkoutLogin' } | cxUrl\"\n      class=\"btn btn-block btn-secondary btn-guest\"\n      >{{ 'loginForm.guestCheckout' | cxTranslate }}</a\n    >\n  </ng-container>\n</div>\n"
                    }] }
        ];
        /** @nocollapse */
        LoginFormComponent.ctorParameters = function () { return [
            { type: core$1.AuthService },
            { type: core$1.GlobalMessageService },
            { type: forms.FormBuilder },
            { type: core$1.AuthRedirectService },
            { type: core$1.WindowRef },
            { type: router.ActivatedRoute },
            { type: CheckoutConfigService }
        ]; };
        return LoginFormComponent;
    }());
    if (false) {
        /** @type {?} */
        LoginFormComponent.prototype.sub;
        /** @type {?} */
        LoginFormComponent.prototype.form;
        /** @type {?} */
        LoginFormComponent.prototype.loginAsGuest;
        /**
         * @type {?}
         * @private
         */
        LoginFormComponent.prototype.auth;
        /**
         * @type {?}
         * @private
         */
        LoginFormComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @private
         */
        LoginFormComponent.prototype.fb;
        /**
         * @type {?}
         * @private
         */
        LoginFormComponent.prototype.authRedirectService;
        /**
         * @type {?}
         * @private
         */
        LoginFormComponent.prototype.winRef;
        /**
         * @type {?}
         * @private
         */
        LoginFormComponent.prototype.activatedRoute;
        /**
         * @type {?}
         * @private
         */
        LoginFormComponent.prototype.checkoutConfigService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LoginFormModule = /** @class */ (function () {
        function LoginFormModule() {
        }
        LoginFormModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            forms.FormsModule,
                            forms.ReactiveFormsModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    ReturningCustomerLoginComponent: {
                                        component: LoginFormComponent,
                                        guards: [core$1.NotAuthGuard],
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                        ],
                        declarations: [LoginFormComponent],
                        exports: [LoginFormComponent],
                        entryComponents: [LoginFormComponent],
                    },] }
        ];
        return LoginFormModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LoginComponent = /** @class */ (function () {
        function LoginComponent(auth, userService) {
            this.auth = auth;
            this.userService = userService;
        }
        /**
         * @return {?}
         */
        LoginComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.user$ = this.auth.isUserLoggedIn().pipe(operators.switchMap((/**
             * @param {?} isUserLoggedIn
             * @return {?}
             */
            function (isUserLoggedIn) {
                if (isUserLoggedIn) {
                    return _this.userService.get();
                }
                else {
                    return rxjs.of(undefined);
                }
            })));
        };
        LoginComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-login',
                        template: "<ng-container *ngIf=\"user$ | async as user; else login\">\n  <div class=\"cx-login-greet\">\n    {{ 'miniLogin.userGreeting' | cxTranslate: { name: user.name } }}\n  </div>\n  <cx-page-slot position=\"HeaderLinks\"></cx-page-slot>\n</ng-container>\n\n<ng-template #login>\n  <a role=\"link\" [routerLink]=\"{ cxRoute: 'login' } | cxUrl\">{{\n    'miniLogin.signInRegister' | cxTranslate\n  }}</a>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        LoginComponent.ctorParameters = function () { return [
            { type: core$1.AuthService },
            { type: core$1.UserService }
        ]; };
        return LoginComponent;
    }());
    if (false) {
        /** @type {?} */
        LoginComponent.prototype.user$;
        /**
         * @type {?}
         * @private
         */
        LoginComponent.prototype.auth;
        /**
         * @type {?}
         * @private
         */
        LoginComponent.prototype.userService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LoginModule = /** @class */ (function () {
        function LoginModule() {
        }
        LoginModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            PageSlotModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    LoginComponent: {
                                        component: LoginComponent,
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                        ],
                        declarations: [LoginComponent],
                        entryComponents: [LoginComponent],
                        exports: [LoginComponent],
                    },] }
        ];
        return LoginModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var LogoutGuard = /** @class */ (function () {
        /**
         * @deprecated since 1.4
         * Check #5666 for more info
         *
         * TODO(issue:5666) Deprecated since 1.4
         */
        function LogoutGuard(auth, cms, routing, semanticPathService, protectedRoutes, featureConfig) {
            this.auth = auth;
            this.cms = cms;
            this.routing = routing;
            this.semanticPathService = semanticPathService;
            this.protectedRoutes = protectedRoutes;
            this.featureConfig = featureConfig;
        }
        /**
         * @return {?}
         */
        LogoutGuard.prototype.canActivate = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.logout();
            return this.cms
                .hasPage({
                id: this.semanticPathService.get('logout'),
                type: core$1.PageType.CONTENT_PAGE,
            })
                .pipe(operators.tap((/**
             * @param {?} hasPage
             * @return {?}
             */
            function (hasPage) {
                if (!hasPage) {
                    _this.redirect();
                }
            })));
        };
        /**
         * @protected
         * @return {?}
         */
        LogoutGuard.prototype.redirect = /**
         * @protected
         * @return {?}
         */
        function () {
            // TODO(issue:5666) Deprecated since 1.4
            /** @type {?} */
            var cxRoute = this.featureConfig.isLevel('1.4') &&
                this.protectedRoutes &&
                this.protectedRoutes.shouldProtect
                ? 'login'
                : 'home';
            this.routing.go({ cxRoute: cxRoute });
        };
        /**
         * @protected
         * @return {?}
         */
        LogoutGuard.prototype.logout = /**
         * @protected
         * @return {?}
         */
        function () {
            this.auth.logout();
        };
        LogoutGuard.decorators = [
            { type: core.Injectable, args: [{
                        providedIn: 'root',
                    },] }
        ];
        /** @nocollapse */
        LogoutGuard.ctorParameters = function () { return [
            { type: core$1.AuthService },
            { type: core$1.CmsService },
            { type: core$1.RoutingService },
            { type: core$1.SemanticPathService },
            { type: core$1.ProtectedRoutesService },
            { type: core$1.FeatureConfigService }
        ]; };
        /** @nocollapse */ LogoutGuard.ngInjectableDef = core.ɵɵdefineInjectable({ factory: function LogoutGuard_Factory() { return new LogoutGuard(core.ɵɵinject(core$1.AuthService), core.ɵɵinject(core$1.CmsService), core.ɵɵinject(core$1.RoutingService), core.ɵɵinject(core$1.SemanticPathService), core.ɵɵinject(core$1.ProtectedRoutesService), core.ɵɵinject(core$1.FeatureConfigService)); }, token: LogoutGuard, providedIn: "root" });
        return LogoutGuard;
    }());
    if (false) {
        /**
         * @type {?}
         * @protected
         */
        LogoutGuard.prototype.auth;
        /**
         * @type {?}
         * @protected
         */
        LogoutGuard.prototype.cms;
        /**
         * @type {?}
         * @protected
         */
        LogoutGuard.prototype.routing;
        /**
         * @type {?}
         * @protected
         */
        LogoutGuard.prototype.semanticPathService;
        /**
         * @type {?}
         * @protected
         */
        LogoutGuard.prototype.protectedRoutes;
        /**
         * @type {?}
         * @protected
         */
        LogoutGuard.prototype.featureConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$9 = { cxRoute: 'logout' };
    var LogoutModule = /** @class */ (function () {
        function LogoutModule() {
        }
        LogoutModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            PageLayoutModule,
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [LogoutGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$9,
                                },
                            ]),
                        ],
                    },] }
        ];
        return LogoutModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var RegisterComponent = /** @class */ (function () {
        function RegisterComponent(auth, authRedirectService, userService, globalMessageService, fb, router, featureConfig, anonymousConsentsService, anonymousConsentsConfig) {
            this.auth = auth;
            this.authRedirectService = authRedirectService;
            this.userService = userService;
            this.globalMessageService = globalMessageService;
            this.fb = fb;
            this.router = router;
            this.featureConfig = featureConfig;
            this.anonymousConsentsService = anonymousConsentsService;
            this.anonymousConsentsConfig = anonymousConsentsConfig;
            this.subscription = new rxjs.Subscription();
            // TODO(issue:4237) Register flow
            this.isNewRegisterFlowEnabled = this.featureConfig && this.featureConfig.isLevel('1.1');
            this.isAnonymousConsentEnabled = this.featureConfig &&
                this.featureConfig.isEnabled(core$1.ANONYMOUS_CONSENTS_FEATURE);
            this.userRegistrationForm = this.fb.group({
                titleCode: [''],
                firstName: ['', forms.Validators.required],
                lastName: ['', forms.Validators.required],
                email: ['', [forms.Validators.required, CustomFormValidators.emailValidator]],
                password: [
                    '',
                    [forms.Validators.required, CustomFormValidators.passwordValidator],
                ],
                passwordconf: ['', forms.Validators.required],
                newsletter: new forms.FormControl({
                    value: false,
                    disabled: this.isAnonymousConsentEnabled
                        ? this.isConsentRequired()
                        : false,
                }),
                termsandconditions: [false, forms.Validators.requiredTrue],
            }, { validator: CustomFormValidators.matchPassword });
        }
        /**
         * @return {?}
         */
        RegisterComponent.prototype.ngOnInit = /**
         * @return {?}
         */
        function () {
            var _this = this;
            this.titles$ = this.userService.getTitles().pipe(operators.tap((/**
             * @param {?} titles
             * @return {?}
             */
            function (titles) {
                if (Object.keys(titles).length === 0) {
                    _this.userService.loadTitles();
                }
            })), operators.map((/**
             * @param {?} titles
             * @return {?}
             */
            function (titles) {
                return titles.sort(sortTitles);
            })));
            // TODO(issue:4237) Register flow
            if (this.isNewRegisterFlowEnabled) {
                this.loading$ = this.userService.getRegisterUserResultLoading();
                this.registerUserProcessInit();
            }
            else {
                if (this.auth && this.authRedirectService) {
                    this.subscription.add(this.userService
                        .getRegisterUserResultSuccess()
                        .subscribe((/**
                     * @param {?} success
                     * @return {?}
                     */
                    function (success) {
                        if (success) {
                            var _a = _this.collectDataFromRegisterForm(_this.userRegistrationForm.value), uid = _a.uid, password = _a.password;
                            _this.auth.authorize(uid, password);
                        }
                    })));
                    this.subscription.add(this.auth.getUserToken().subscribe((/**
                     * @param {?} data
                     * @return {?}
                     */
                    function (data) {
                        if (data && data.access_token) {
                            _this.globalMessageService.remove(core$1.GlobalMessageType.MSG_TYPE_ERROR);
                            _this.authRedirectService.redirect();
                        }
                    })));
                }
            }
            // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)
            this.subscription.add(this.globalMessageService
                .get()
                .pipe(operators.filter((/**
             * @param {?} messages
             * @return {?}
             */
            function (messages) { return !!Object.keys(messages).length; })))
                .subscribe((/**
             * @param {?} globalMessageEntities
             * @return {?}
             */
            function (globalMessageEntities) {
                /** @type {?} */
                var messages = globalMessageEntities &&
                    globalMessageEntities[core$1.GlobalMessageType.MSG_TYPE_ERROR];
                if (messages &&
                    messages.some((/**
                     * @param {?} message
                     * @return {?}
                     */
                    function (message) { return message === 'This field is required.'; }))) {
                    _this.globalMessageService.remove(core$1.GlobalMessageType.MSG_TYPE_ERROR);
                    _this.globalMessageService.add({ key: 'register.titleRequired' }, core$1.GlobalMessageType.MSG_TYPE_ERROR);
                }
            })));
            if (this.isAnonymousConsentEnabled &&
                Boolean(this.anonymousConsentsConfig) &&
                Boolean(this.anonymousConsentsConfig.anonymousConsents) &&
                Boolean(this.anonymousConsentsConfig.anonymousConsents.registerConsent)) {
                this.anonymousConsent$ = rxjs.combineLatest([
                    this.anonymousConsentsService.getConsent(this.anonymousConsentsConfig.anonymousConsents.registerConsent),
                    this.anonymousConsentsService.getTemplate(this.anonymousConsentsConfig.anonymousConsents.registerConsent),
                ]).pipe(operators.map((/**
                 * @param {?} __0
                 * @return {?}
                 */
                function (_a) {
                    var _b = __read(_a, 2), consent = _b[0], template = _b[1];
                    return {
                        consent: consent,
                        template: template ? template.description : '',
                    };
                })));
                this.subscription.add(this.userRegistrationForm
                    .get('newsletter')
                    .valueChanges.subscribe((/**
                 * @param {?} _
                 * @return {?}
                 */
                function (_) {
                    _this.toggleAnonymousConsent();
                })));
            }
        };
        /**
         * @return {?}
         */
        RegisterComponent.prototype.submit = /**
         * @return {?}
         */
        function () {
            this.userService.register(this.collectDataFromRegisterForm(this.userRegistrationForm.value));
        };
        /**
         * @param {?} title
         * @return {?}
         */
        RegisterComponent.prototype.titleSelected = /**
         * @param {?} title
         * @return {?}
         */
        function (title) {
            this.userRegistrationForm['controls'].titleCode.setValue(title.code);
        };
        /**
         * @param {?} formData
         * @return {?}
         */
        RegisterComponent.prototype.collectDataFromRegisterForm = /**
         * @param {?} formData
         * @return {?}
         */
        function (formData) {
            var firstName = formData.firstName, lastName = formData.lastName, email = formData.email, password = formData.password, titleCode = formData.titleCode;
            return {
                firstName: firstName,
                lastName: lastName,
                uid: email.toLowerCase(),
                password: password,
                titleCode: titleCode,
            };
        };
        /**
         * @param {?} consent
         * @return {?}
         */
        RegisterComponent.prototype.isConsentGiven = /**
         * @param {?} consent
         * @return {?}
         */
        function (consent) {
            return this.anonymousConsentsService.isConsentGiven(consent);
        };
        /**
         * @private
         * @return {?}
         */
        RegisterComponent.prototype.isConsentRequired = /**
         * @private
         * @return {?}
         */
        function () {
            if (Boolean(this.anonymousConsentsService) &&
                Boolean(this.anonymousConsentsConfig.anonymousConsents) &&
                Boolean(this.anonymousConsentsConfig.anonymousConsents.registerConsent) &&
                Boolean(this.anonymousConsentsConfig.anonymousConsents.requiredConsents)) {
                return this.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(this.anonymousConsentsConfig.anonymousConsents.registerConsent);
            }
            return false;
        };
        /**
         * @private
         * @param {?} success
         * @return {?}
         */
        RegisterComponent.prototype.onRegisterUserSuccess = /**
         * @private
         * @param {?} success
         * @return {?}
         */
        function (success) {
            if (this.router && success) {
                this.router.go('login');
                this.globalMessageService.add({ key: 'register.postRegisterMessage' }, core$1.GlobalMessageType.MSG_TYPE_CONFIRMATION);
            }
        };
        /**
         * @return {?}
         */
        RegisterComponent.prototype.toggleAnonymousConsent = /**
         * @return {?}
         */
        function () {
            if (Boolean(this.userRegistrationForm.get('newsletter').value)) {
                this.anonymousConsentsService.giveConsent(this.anonymousConsentsConfig.anonymousConsents.registerConsent);
            }
            else {
                this.anonymousConsentsService.withdrawConsent(this.anonymousConsentsConfig.anonymousConsents.registerConsent);
            }
        };
        /**
         * @private
         * @return {?}
         */
        RegisterComponent.prototype.registerUserProcessInit = /**
         * @private
         * @return {?}
         */
        function () {
            var _this = this;
            this.userService.resetRegisterUserProcessState();
            this.subscription.add(this.userService.getRegisterUserResultSuccess().subscribe((/**
             * @param {?} success
             * @return {?}
             */
            function (success) {
                _this.onRegisterUserSuccess(success);
            })));
        };
        /**
         * @return {?}
         */
        RegisterComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
        function () {
            this.subscription.unsubscribe();
            this.userService.resetRegisterUserProcessState();
        };
        RegisterComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-register',
                        template: "<section\n  class=\"cx-page-section container\"\n  *ngIf=\"!(loading$ | async); else loading\"\n>\n  <div class=\"row justify-content-center\">\n    <div class=\"col-md-6\">\n      <div class=\"cx-section\">\n        <form [formGroup]=\"userRegistrationForm\">\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.title' | cxTranslate\n              }}</span>\n              <select formControlName=\"titleCode\" class=\"form-control\">\n                <option selected value=\"\" disabled>{{\n                  'register.selectTitle' | cxTranslate\n                }}</option>\n                <option\n                  *ngFor=\"let title of titles$ | async\"\n                  [value]=\"title.code\"\n                  >{{ title.name }}</option\n                >\n              </select>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.firstName.label' | cxTranslate\n              }}</span>\n              <input\n                class=\"form-control\"\n                type=\"text\"\n                name=\"firstname\"\n                placeholder=\"{{\n                  'register.firstName.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"firstName\"\n              />\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.lastName.label' | cxTranslate\n              }}</span>\n              <input\n                class=\"form-control\"\n                type=\"text\"\n                name=\"lastname\"\n                placeholder=\"{{\n                  'register.lastName.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"lastName\"\n              />\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.emailAddress.label' | cxTranslate\n              }}</span>\n              <input\n                class=\"form-control\"\n                [class.is-invalid]=\"\n                  userRegistrationForm.get('email').errors &&\n                  (userRegistrationForm.get('email').errors['email'] ||\n                    userRegistrationForm.get('email').errors['InvalidEmail']) &&\n                  userRegistrationForm.get('email').dirty\n                \"\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"{{\n                  'register.emailAddress.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"email\"\n              />\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.password.label' | cxTranslate\n              }}</span>\n              <input\n                class=\"form-control\"\n                [class.is-invalid]=\"\n                  userRegistrationForm.get('password').invalid &&\n                  userRegistrationForm.get('password').dirty\n                \"\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"{{\n                  'register.password.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"password\"\n              />\n              <div\n                class=\"invalid-feedback\"\n                *ngIf=\"\n                  userRegistrationForm.get('password').invalid &&\n                  userRegistrationForm.get('password').dirty\n                \"\n              >\n                <span>{{\n                  'register.passwordMinRequirements' | cxTranslate\n                }}</span>\n              </div>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <label>\n              <span class=\"label-content\">{{\n                'register.confirmPassword.label' | cxTranslate\n              }}</span>\n              <input\n                class=\"form-control\"\n                [class.is-invalid]=\"\n                  userRegistrationForm.get('password').value !==\n                  userRegistrationForm.get('passwordconf').value\n                \"\n                type=\"password\"\n                name=\"confirmpassword\"\n                placeholder=\"{{\n                  'register.confirmPassword.placeholder' | cxTranslate\n                }}\"\n                formControlName=\"passwordconf\"\n              />\n              <div\n                class=\"invalid-feedback\"\n                *ngIf=\"\n                  userRegistrationForm.get('password').value !==\n                    userRegistrationForm.get('passwordconf').value &&\n                  userRegistrationForm.get('passwordconf').value\n                \"\n              >\n                <span>{{\n                  'register.bothPasswordMustMatch' | cxTranslate\n                }}</span>\n              </div>\n            </label>\n          </div>\n\n          <div class=\"form-group\">\n            <div class=\"form-check\">\n              <ng-container\n                *ngIf=\"isAnonymousConsentEnabled; else hardcodedNewsletter\"\n              >\n                <label *ngIf=\"anonymousConsent$ | async as anonymousConsent\">\n                  <input\n                    type=\"checkbox\"\n                    name=\"newsletter\"\n                    class=\"form-check-input\"\n                    formControlName=\"newsletter\"\n                    [checked]=\"isConsentGiven(anonymousConsent.consent)\"\n                  />\n                  <span class=\"form-check-label\">\n                    {{ anonymousConsent.template }}\n                  </span>\n                </label>\n              </ng-container>\n              <ng-template #hardcodedNewsletter\n                ><label>\n                  <input\n                    type=\"checkbox\"\n                    name=\"newsletter\"\n                    class=\"form-check-input\"\n                    formControlName=\"newsletter\"\n                  />\n                  <span class=\"form-check-label\">\n                    {{ 'register.emailMarketing' | cxTranslate }}\n                  </span>\n                </label>\n              </ng-template>\n            </div>\n          </div>\n\n          <div class=\"form-group\">\n            <div class=\"form-check\">\n              <label>\n                <input\n                  type=\"checkbox\"\n                  name=\"termsandconditions\"\n                  formControlName=\"termsandconditions\"\n                />\n                <span class=\"form-check-label\">\n                  {{ 'register.confirmThatRead' | cxTranslate }}\n                  <a\n                    [routerLink]=\"{ cxRoute: 'termsAndConditions' } | cxUrl\"\n                    target=\"_blank\"\n                  >\n                    {{ 'register.termsAndConditions' | cxTranslate }}\n                  </a>\n                </span>\n              </label>\n            </div>\n          </div>\n          <button\n            type=\"submit\"\n            (click)=\"submit()\"\n            [disabled]=\"userRegistrationForm.invalid\"\n            class=\"btn btn-block btn-primary\"\n          >\n            {{ 'register.register' | cxTranslate }}\n          </button>\n          <a\n            class=\"cx-login-link btn-link\"\n            [routerLink]=\"{ cxRoute: 'login' } | cxUrl\"\n            >{{ 'register.signIn' | cxTranslate }}</a\n          >\n        </form>\n      </div>\n    </div>\n  </div>\n</section>\n\n<ng-template #loading>\n  <div class=\"cx-spinner\"><cx-spinner></cx-spinner></div>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        RegisterComponent.ctorParameters = function () { return [
            { type: core$1.AuthService },
            { type: core$1.AuthRedirectService },
            { type: core$1.UserService },
            { type: core$1.GlobalMessageService },
            { type: forms.FormBuilder },
            { type: core$1.RoutingService },
            { type: core$1.FeatureConfigService },
            { type: core$1.AnonymousConsentsService },
            { type: core$1.AnonymousConsentsConfig }
        ]; };
        return RegisterComponent;
    }());
    if (false) {
        /** @type {?} */
        RegisterComponent.prototype.titles$;
        /** @type {?} */
        RegisterComponent.prototype.loading$;
        /**
         * @type {?}
         * @private
         */
        RegisterComponent.prototype.subscription;
        /** @type {?} */
        RegisterComponent.prototype.anonymousConsent$;
        /** @type {?} */
        RegisterComponent.prototype.isNewRegisterFlowEnabled;
        /** @type {?} */
        RegisterComponent.prototype.isAnonymousConsentEnabled;
        /** @type {?} */
        RegisterComponent.prototype.userRegistrationForm;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.auth;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.authRedirectService;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.userService;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.globalMessageService;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.fb;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.router;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.featureConfig;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.anonymousConsentsService;
        /**
         * @type {?}
         * @protected
         */
        RegisterComponent.prototype.anonymousConsentsConfig;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var RegisterComponentModule = /** @class */ (function () {
        function RegisterComponentModule() {
        }
        RegisterComponentModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            LoginModule,
                            forms.ReactiveFormsModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    RegisterCustomerComponent: {
                                        component: RegisterComponent,
                                        guards: [core$1.NotAuthGuard],
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                            SpinnerModule,
                        ],
                        declarations: [RegisterComponent],
                        exports: [RegisterComponent],
                        entryComponents: [RegisterComponent],
                    },] }
        ];
        return RegisterComponentModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var UserComponentModule = /** @class */ (function () {
        function UserComponentModule() {
        }
        UserComponentModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            LoginModule,
                            LoginFormModule,
                            LogoutModule,
                            CheckoutLoginModule,
                            forms.ReactiveFormsModule,
                            router.RouterModule,
                            core$1.UrlModule,
                            RegisterComponentModule,
                        ],
                    },] }
        ];
        return UserComponentModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var WishListItemComponent = /** @class */ (function () {
        function WishListItemComponent() {
            this.isLoading = false;
            this.remove = new core.EventEmitter();
        }
        /**
         * @param {?} item
         * @return {?}
         */
        WishListItemComponent.prototype.removeEntry = /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            this.remove.emit(item);
        };
        WishListItemComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-wish-list-item',
                        template: "<div class=\"row\">\n  <!-- Item Image -->\n  <div class=\"cx-image-container col-2\">\n    <a [routerLink]=\"{ cxRoute: 'product', params: cartEntry.product } | cxUrl\">\n      <cx-media\n        [container]=\"cartEntry.product.images?.PRIMARY\"\n        format=\"thumbnail\"\n      ></cx-media>\n    </a>\n  </div>\n  <!-- Item Information -->\n  <div class=\"cx-info col-10\">\n    <div class=\"cx-info-container row \">\n      <!-- Item Description -->\n      <div class=\"col-md-5 col-lg-5 col-xl-5\">\n        <div *ngIf=\"cartEntry.product.name\" class=\"cx-name\">\n          <a\n            class=\"cx-link\"\n            [routerLink]=\"\n              { cxRoute: 'product', params: cartEntry.product } | cxUrl\n            \"\n            >{{ cartEntry.product.name }}</a\n          >\n        </div>\n        <div *ngIf=\"cartEntry.product.code\" class=\"cx-code\">\n          {{ 'cartItems.id' | cxTranslate }} {{ cartEntry.product.code }}\n        </div>\n        <!-- Variants -->\n        <ng-container *ngIf=\"cartEntry.product.baseOptions?.length\">\n          <div\n            *ngFor=\"\n              let variant of cartEntry.product.baseOptions[0]?.selected\n                ?.variantOptionQualifiers\n            \"\n            class=\"cx-property\"\n          >\n            <div class=\"cx-label\" *ngIf=\"variant.name && variant.value\">\n              {{ variant.name }}: {{ variant.value }}\n            </div>\n          </div>\n        </ng-container>\n      </div>\n      <!-- Item Price -->\n      <div\n        *ngIf=\"cartEntry.basePrice\"\n        class=\"cx-price col-md-3 col-lg-4 col-xl-4\"\n      >\n        <div class=\"cx-label d-block d-md-none d-lg-none d-xl-none\">\n          {{ 'cartItems.itemPrice' | cxTranslate }}\n        </div>\n        <div *ngIf=\"cartEntry.basePrice\" class=\"cx-value\">\n          {{ cartEntry.basePrice?.formattedValue }}\n        </div>\n      </div>\n      <!-- Total -->\n      <div class=\"col-sm-8 col-md-4 col-lg-3 col-xl-3 cx-add-to-cart\">\n        <cx-add-to-cart\n          *ngIf=\"\n            cartEntry.product.stock.stockLevelStatus !== 'outOfStock';\n            else outOfStock\n          \"\n          [showQuantity]=\"false\"\n          [product]=\"cartEntry.product\"\n        ></cx-add-to-cart>\n        <ng-template #outOfStock>\n          <span class=\"cx-out-of-stock\">\n            {{ 'addToCart.outOfStock' | cxTranslate }}\n          </span>\n        </ng-template>\n      </div>\n    </div>\n    <div class=\"cx-return-button col-12\">\n      <button\n        class=\"btn btn-link\"\n        (click)=\"removeEntry(cartEntry)\"\n        [disabled]=\"isLoading\"\n      >\n        {{ 'common.remove' | cxTranslate }}\n      </button>\n    </div>\n  </div>\n</div>\n",
                        changeDetection: core.ChangeDetectionStrategy.OnPush
                    }] }
        ];
        WishListItemComponent.propDecorators = {
            isLoading: [{ type: core.Input }],
            cartEntry: [{ type: core.Input }],
            remove: [{ type: core.Output }]
        };
        return WishListItemComponent;
    }());
    if (false) {
        /** @type {?} */
        WishListItemComponent.prototype.isLoading;
        /** @type {?} */
        WishListItemComponent.prototype.cartEntry;
        /** @type {?} */
        WishListItemComponent.prototype.remove;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var WishListComponent = /** @class */ (function () {
        function WishListComponent(wishListService) {
            this.wishListService = wishListService;
            this.wishList$ = this.wishListService.getWishList();
            this.loading$ = this.wishListService.getWishListLoading();
        }
        /**
         * @param {?} item
         * @return {?}
         */
        WishListComponent.prototype.removeEntry = /**
         * @param {?} item
         * @return {?}
         */
        function (item) {
            this.wishListService.removeEntry(item);
        };
        WishListComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'cx-wish-list',
                        template: "<ng-container *ngIf=\"wishList$ | async as wishList\">\n  <ng-container *ngIf=\"wishList?.entries?.length > 0; else emptyWishList\">\n    <div class=\"d-none d-md-block d-lg-block d-xl-block\">\n      <div class=\"cx-item-list-header row\">\n        <div class=\"cx-item-list-desc col-md-7 col-lg-6 col-xl-6\">\n          {{ 'cartItems.description' | cxTranslate }}\n        </div>\n        <div class=\"cx-item-list-price col-md-3 col-lg-4 col-xl-4\">\n          {{ 'cartItems.itemPrice' | cxTranslate }}\n        </div>\n        <div class=\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\">\n          {{ 'cartItems.total' | cxTranslate }}\n        </div>\n      </div>\n    </div>\n\n    <div class=\"cx-item-list-row\" *ngFor=\"let entry of wishList?.entries\">\n      <cx-wish-list-item\n        [cartEntry]=\"entry\"\n        [isLoading]=\"loading$ | async\"\n        class=\"cx-wish-list-items\"\n        (remove)=\"removeEntry($event)\"\n      ></cx-wish-list-item>\n    </div>\n  </ng-container>\n</ng-container>\n\n<ng-template #emptyWishList>\n  <h2>{{ 'wishlist.empty' | cxTranslate }}</h2>\n</ng-template>\n"
                    }] }
        ];
        /** @nocollapse */
        WishListComponent.ctorParameters = function () { return [
            { type: core$1.WishListService }
        ]; };
        return WishListComponent;
    }());
    if (false) {
        /** @type {?} */
        WishListComponent.prototype.wishList$;
        /** @type {?} */
        WishListComponent.prototype.loading$;
        /**
         * @type {?}
         * @protected
         */
        WishListComponent.prototype.wishListService;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var WishListModule = /** @class */ (function () {
        function WishListModule() {
        }
        WishListModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            AddToCartModule,
                            common.CommonModule,
                            core$1.ConfigModule.withConfig((/** @type {?} */ ({
                                cmsComponents: {
                                    WishListComponent: {
                                        component: WishListComponent,
                                        guards: [core$1.AuthGuard],
                                    },
                                },
                            }))),
                            core$1.I18nModule,
                            MediaModule,
                            router.RouterModule,
                            StarRatingModule,
                            core$1.UrlModule,
                            ItemCounterModule,
                        ],
                        declarations: [WishListComponent, WishListItemComponent],
                        entryComponents: [WishListComponent],
                        exports: [WishListComponent, WishListItemComponent],
                    },] }
        ];
        return WishListModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var CmsLibModule = /** @class */ (function () {
        function CmsLibModule() {
        }
        CmsLibModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            AnonymousConsentManagementBannerModule,
                            AsmModule,
                            HamburgerMenuModule,
                            CmsParagraphModule,
                            LinkModule,
                            BannerModule,
                            CategoryNavigationModule,
                            NavigationModule,
                            FooterNavigationModule,
                            BreadcrumbModule,
                            SearchBoxModule,
                            SiteContextSelectorModule,
                            QualtricsModule,
                            AddressBookModule,
                            OrderHistoryModule,
                            OrderCancellationModule,
                            OrderReturnModule,
                            ReturnRequestListModule,
                            ReturnRequestDetailModule,
                            ProductListModule,
                            ProductTabsModule,
                            ProductCarouselModule,
                            ProductReferencesModule,
                            OrderDetailsModule,
                            PaymentMethodsModule,
                            UpdateEmailModule,
                            UpdatePasswordModule,
                            UpdateProfileModule,
                            ConsentManagementModule,
                            CloseAccountModule,
                            CartComponentModule,
                            TabParagraphContainerModule,
                            OrderConfirmationModule,
                            StoreFinderModule,
                            ProductImagesModule,
                            ProductSummaryModule,
                            ProductVariantsModule,
                            ProductIntroModule,
                            CheckoutComponentModule,
                            ForgotPasswordModule,
                            ResetPasswordModule,
                            BannerCarouselModule,
                            UserComponentModule,
                            MyCouponsModule,
                            WishListModule,
                            NotificationPreferenceModule,
                            MyInterestsModule,
                            StockNotificationModule,
                        ],
                    },] }
        ];
        return CmsLibModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @record
     */
    function SuffixRoute() { }
    if (false) {
        /** @type {?} */
        SuffixRoute.prototype.data;
    }
    /**
     * Matches the pattern '[ ** / ] marker / :paramName'
     *
     * @param {?} segments
     * @param {?} _segmentGroup
     * @param {?} route
     * @return {?}
     */
    function suffixUrlMatcher(segments, _segmentGroup, route) {
        var _a;
        /** @type {?} */
        var config = route.data.cxSuffixUrlMatcher;
        var marker = config.marker, paramName = config.paramName;
        /** @type {?} */
        var precedingParamName = config.precedingParamName || 'param';
        /** @type {?} */
        var markerIndex = findLastIndex(segments, (/**
         * @param {?} __0
         * @return {?}
         */
        function (_a) {
            var path = _a.path;
            return path === marker;
        }));
        /** @type {?} */
        var isMarkerLastSegment = markerIndex === segments.length - 1;
        if (markerIndex === -1 || isMarkerLastSegment) {
            return null;
        }
        /** @type {?} */
        var paramIndex = markerIndex + 1;
        /** @type {?} */
        var posParams = (_a = {},
            _a[paramName] = segments[paramIndex],
            _a);
        for (var i = 0; i < markerIndex; i++) {
            posParams["" + precedingParamName + i] = segments[i];
        }
        return { consumed: segments.slice(0, paramIndex + 1), posParams: posParams };
    }
    /**
     * @template T
     * @param {?} elements
     * @param {?} predicate
     * @return {?}
     */
    function findLastIndex(elements, predicate) {
        for (var index = elements.length - 1; index >= 0; index--) {
            if (predicate(elements[index])) {
                return index;
            }
        }
        return -1;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$a = { cxRoute: 'product' }, ɵ1$1 = {
        cxSuffixUrlMatcher: {
            marker: 'p',
            paramName: 'productCode',
        },
    };
    var ProductDetailsPageModule = /** @class */ (function () {
        function ProductDetailsPageModule() {
        }
        ProductDetailsPageModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$a,
                                },
                                {
                                    matcher: suffixUrlMatcher,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ1$1,
                                },
                            ]),
                        ],
                    },] }
        ];
        return ProductDetailsPageModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var ɵ0$b = { cxRoute: 'category' }, ɵ1$2 = { pageLabel: 'search', cxRoute: 'search' }, ɵ2 = { cxRoute: 'brand' }, ɵ3 = {
        cxSuffixUrlMatcher: {
            marker: 'c',
            paramName: 'categoryCode',
        },
    };
    var ProductListingPageModule = /** @class */ (function () {
        function ProductListingPageModule() {
        }
        ProductListingPageModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            router.RouterModule.forChild([
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ0$b,
                                },
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ1$2,
                                },
                                {
                                    path: null,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ2,
                                },
                                {
                                    matcher: suffixUrlMatcher,
                                    canActivate: [CmsPageGuard],
                                    component: PageLayoutComponent,
                                    data: ɵ3,
                                },
                            ]),
                        ],
                    },] }
        ];
        return ProductListingPageModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var b2cLayoutConfig = {
        // deferredLoading: {
        //   strategy: DeferLoadingStrategy.DEFER,
        //   intersectionMargin: '50px',
        // },
        layoutSlots: {
            header: {
                md: {
                    slots: [
                        'PreHeader',
                        'SiteContext',
                        'SiteLinks',
                        'SiteLogo',
                        'SearchBox',
                        'SiteLogin',
                        'MiniCart',
                        'NavigationBar',
                    ],
                },
                xs: {
                    slots: ['PreHeader', 'SiteLogo', 'SearchBox', 'MiniCart'],
                },
            },
            navigation: {
                md: { slots: [] },
                xs: {
                    slots: ['SiteLogin', 'NavigationBar', 'SiteContext', 'SiteLinks'],
                },
            },
            footer: {
                slots: ['Footer'],
            },
            LandingPage2Template: {
                pageFold: 'Section2B',
                slots: [
                    'Section1',
                    'Section2A',
                    'Section2B',
                    'Section2C',
                    'Section3',
                    'Section4',
                    'Section5',
                ],
            },
            ContentPage1Template: {
                slots: ['Section2A', 'Section2B'],
            },
            CategoryPageTemplate: {
                pageFold: 'Section2',
                slots: ['Section1', 'Section2', 'Section3'],
            },
            ProductListPageTemplate: {
                slots: ['ProductListSlot', 'ProductLeftRefinements'],
            },
            ProductGridPageTemplate: {
                slots: ['ProductGridSlot', 'ProductLeftRefinements'],
            },
            SearchResultsListPageTemplate: {
                slots: [
                    'Section2',
                    'SearchResultsListSlot',
                    'ProductLeftRefinements',
                    'Section4',
                ],
            },
            SearchResultsGridPageTemplate: {
                slots: [
                    'Section2',
                    'ProductLeftRefinements',
                    'SearchResultsGridSlot',
                    'Section4',
                ],
            },
            ProductDetailsPageTemplate: {
                md: {
                    pageFold: 'UpSelling',
                },
                xs: {
                    pageFold: 'Summary',
                },
                slots: [
                    'Summary',
                    'UpSelling',
                    'CrossSelling',
                    'Tabs',
                    'PlaceholderContentSlot',
                ],
            },
            CartPageTemplate: {
                slots: ['TopContent', 'CenterRightContentSlot', 'EmptyCartMiddleContent'],
            },
            AccountPageTemplate: {
                slots: ['BodyContent', 'SideContent'],
            },
            LoginPageTemplate: {
                slots: ['LeftContentSlot', 'RightContentSlot'],
            },
            ErrorPageTemplate: {
                slots: ['TopContent', 'MiddleContent', 'BottomContent'],
            },
            OrderConfirmationPageTemplate: {
                slots: ['BodyContent', 'SideContent'],
            },
            MultiStepCheckoutSummaryPageTemplate: {
                slots: ['TopContent', 'BodyContent', 'SideContent', 'BottomContent'],
            },
            CheckoutLoginPageTemplate: {
                slots: ['RightContentSlot'],
            },
        },
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var headerComponents = {
        HamburgerMenuComponent: {
            typeCode: 'HamburgerMenuComponent',
            flexType: 'HamburgerMenuComponent',
        },
        LoginComponent: {
            typeCode: 'LoginComponent',
            flexType: 'LoginComponent',
            uid: 'LoginComponent',
        },
    };
    /** @type {?} */
    var defaultPageHeaderConfig = {
        PreHeader: {
            componentIds: ['HamburgerMenuComponent'],
        },
        SiteLogin: {
            componentIds: ['LoginComponent'],
        },
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * @return {?}
     */
    function defaultCmsContentConfig() {
        return {
            cmsStructure: {
                components: __assign({}, headerComponents),
                slots: __assign({}, defaultPageHeaderConfig),
                pages: [],
            },
        };
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var defaultStorefrontRoutesConfig = {
        home: { paths: [''] },
        notFound: { paths: ['not-found'] },
        cart: { paths: ['cart'] },
        // semantic links for login related pages
        login: { paths: ['login'], protected: false },
        register: { paths: ['login/register'], protected: false },
        forgotPassword: { paths: ['login/forgot-password'], protected: false },
        resetPassword: { paths: ['login/pw/change'], protected: false },
        logout: { paths: ['logout'] },
        checkoutLogin: { paths: ['checkout-login'] },
        checkout: { paths: ['checkout'] },
        checkoutShippingAddress: { paths: ['checkout/shipping-address'] },
        checkoutDeliveryMode: { paths: ['checkout/delivery-mode'] },
        checkoutPaymentDetails: { paths: ['checkout/payment-details'] },
        checkoutReviewOrder: { paths: ['checkout/review-order'] },
        orderConfirmation: { paths: ['order-confirmation'] },
        // plp routes
        search: { paths: ['search/:query'] },
        category: {
            paths: ['category/:categoryCode'],
            paramsMapping: { categoryCode: 'code' },
        },
        brand: { paths: ['Brands/:brandName/c/:brandCode'] },
        // pdp routes
        product: {
            paths: ['product/:productCode/:name'],
            paramsMapping: { productCode: 'code' },
        },
        termsAndConditions: { paths: ['terms-and-conditions'] },
        orders: {
            paths: ['my-account/orders'],
        },
        orderDetails: {
            paths: ['my-account/order/:orderCode'],
            paramsMapping: { orderCode: 'code' },
        },
        orderGuest: {
            paths: ['guest/order/:orderCode'],
            paramsMapping: { orderCode: 'code' },
        },
        orderReturn: {
            paths: ['my-account/order/return/:orderCode'],
            paramsMapping: { orderCode: 'code' },
        },
        orderReturnConfirmation: {
            paths: ['my-account/order/return/confirmation/:orderCode'],
            paramsMapping: { orderCode: 'code' },
        },
        orderCancel: {
            paths: ['my-account/order/cancel/:orderCode'],
            paramsMapping: { orderCode: 'code' },
        },
        orderCancelConfirmation: {
            paths: ['my-account/order/cancel/confirmation/:orderCode'],
            paramsMapping: { orderCode: 'code' },
        },
        returnRequestDetails: {
            paths: ['my-account/return-request/:returnCode'],
            paramsMapping: { returnCode: 'rma' },
        },
        coupons: { paths: ['my-account/coupons'] },
        couponClaim: {
            paths: ['my-account/coupon/claim/:couponCode'],
            paramsMapping: { couponCode: 'code' },
        },
    };
    /** @type {?} */
    var defaultRoutingConfig = {
        routing: {
            routes: defaultStorefrontRoutesConfig,
        },
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var RoutingModule = /** @class */ (function () {
        function RoutingModule() {
        }
        /**
         * @return {?}
         */
        RoutingModule.forRoot = /**
         * @return {?}
         */
        function () {
            return {
                ngModule: RoutingModule,
                providers: [core$1.provideConfig(defaultRoutingConfig)],
            };
        };
        RoutingModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [core$1.RoutingModule.forRoot(), CmsRouteModule],
                    },] }
        ];
        return RoutingModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StorefrontFoundationModule = /** @class */ (function () {
        function StorefrontFoundationModule() {
        }
        StorefrontFoundationModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            core$1.StateModule.forRoot(),
                            core$1.AuthModule.forRoot(),
                            core$1.AnonymousConsentsModule.forRoot(),
                            core$1.ConfigModule.forRoot(),
                            core$1.ConfigInitializerModule.forRoot(),
                            RoutingModule.forRoot(),
                            core$1.I18nModule.forRoot(),
                            core$1.CmsModule.forRoot(),
                            core$1.GlobalMessageModule.forRoot(),
                            core$1.ProcessModule.forRoot(),
                            core$1.CartModule.forRoot(),
                            core$1.CheckoutModule.forRoot(),
                            core$1.UserModule.forRoot(),
                            core$1.ProductModule.forRoot(),
                            ViewConfigModule.forRoot(),
                            core$1.FeaturesConfigModule.forRoot('1.0'),
                            LayoutModule,
                        ],
                        exports: [LayoutModule],
                        providers: __spread(core$1.provideConfigFromMetaTags()),
                    },] }
        ];
        return StorefrontFoundationModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var StorefrontModule = /** @class */ (function () {
        function StorefrontModule() {
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        StorefrontModule.withConfig = /**
         * @param {?=} config
         * @return {?}
         */
        function (config) {
            return {
                ngModule: StorefrontModule,
                providers: [core$1.provideConfig(config)],
            };
        };
        StorefrontModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            router.RouterModule.forRoot([], {
                                scrollPositionRestoration: 'enabled',
                                anchorScrolling: 'enabled',
                            }),
                            store.StoreModule.forRoot({}, {
                                runtimeChecks: {
                                    strictStateImmutability: true,
                                    strictStateSerializability: true,
                                    strictActionImmutability: true,
                                    strictActionSerializability: true,
                                },
                            }),
                            effects.EffectsModule.forRoot([]),
                            // ASM module must be imported before the `AuthModule (which is imported in `StorefrontFoundationModule`)
                            // since we might have conflicting interceptor logic. See #5461.
                            AsmModule,
                            StorefrontFoundationModule,
                            MainModule,
                            core$1.SiteContextModule.forRoot(),
                            core$1.SmartEditModule.forRoot(),
                            core$1.PersonalizationModule.forRoot(),
                            // opt-in explicitly
                            core$1.OccModule.forRoot(),
                            ProductDetailsPageModule,
                            ProductListingPageModule,
                            core$1.ExternalRoutesModule.forRoot(),
                        ],
                        exports: [MainModule, StorefrontFoundationModule],
                    },] }
        ];
        return StorefrontModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    var B2cStorefrontModule = /** @class */ (function () {
        function B2cStorefrontModule() {
        }
        /**
         * @param {?=} config
         * @return {?}
         */
        B2cStorefrontModule.withConfig = /**
         * @param {?=} config
         * @return {?}
         */
        function (config) {
            return {
                ngModule: B2cStorefrontModule,
                providers: [core$1.provideConfig(config)],
            };
        };
        B2cStorefrontModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            StorefrontModule.withConfig((/** @type {?} */ ({
                                pwa: {
                                    enabled: true,
                                    addToHomeScreen: true,
                                },
                            }))),
                            core$1.ConfigModule.withConfig(b2cLayoutConfig),
                            core$1.ConfigModule.withConfigFactory(defaultCmsContentConfig),
                            // the cms lib module contains all components that added in the bundle
                            CmsLibModule,
                        ],
                        exports: [StorefrontModule],
                    },] }
        ];
        return B2cStorefrontModule;
    }());

    exports.AVOID_STACKED_OUTLETS = AVOID_STACKED_OUTLETS;
    exports.AbstractStoreItemComponent = AbstractStoreItemComponent;
    exports.AddToCartComponent = AddToCartComponent;
    exports.AddToCartModule = AddToCartModule;
    exports.AddToHomeScreenBannerComponent = AddToHomeScreenBannerComponent;
    exports.AddToHomeScreenBtnComponent = AddToHomeScreenBtnComponent;
    exports.AddToHomeScreenComponent = AddToHomeScreenComponent;
    exports.AddedToCartDialogComponent = AddedToCartDialogComponent;
    exports.AddressBookComponent = AddressBookComponent;
    exports.AddressBookComponentService = AddressBookComponentService;
    exports.AddressBookModule = AddressBookModule;
    exports.AddressCardComponent = AddressCardComponent;
    exports.AddressFormComponent = AddressFormComponent;
    exports.AddressFormModule = AddressFormModule;
    exports.AmendOrderActionsComponent = AmendOrderActionsComponent;
    exports.AmendOrderActionsModule = AmendOrderActionsModule;
    exports.AmendOrderItemsModule = AmendOrderItemsModule;
    exports.AmendOrderType = AmendOrderType;
    exports.AnonymousConsentManagementBannerComponent = AnonymousConsentManagementBannerComponent;
    exports.AnonymousConsentManagementBannerModule = AnonymousConsentManagementBannerModule;
    exports.AnonymousConsentOpenDialogComponent = AnonymousConsentOpenDialogComponent;
    exports.AsmModule = AsmModule;
    exports.AutoFocusDirective = AutoFocusDirective;
    exports.AutoFocusDirectiveModule = AutoFocusDirectiveModule;
    exports.B2cStorefrontModule = B2cStorefrontModule;
    exports.BREAKPOINT = BREAKPOINT;
    exports.BannerCarouselComponent = BannerCarouselComponent;
    exports.BannerCarouselModule = BannerCarouselModule;
    exports.BannerComponent = BannerComponent;
    exports.BannerModule = BannerModule;
    exports.BillingAddressFormComponent = BillingAddressFormComponent;
    exports.BillingAddressFormModule = BillingAddressFormModule;
    exports.BreadcrumbComponent = BreadcrumbComponent;
    exports.BreadcrumbModule = BreadcrumbModule;
    exports.BreadcrumbSchemaBuilder = BreadcrumbSchemaBuilder;
    exports.BreakpointService = BreakpointService;
    exports.CancelOrReturnItemsComponent = CancelOrReturnItemsComponent;
    exports.CancelOrderComponent = CancelOrderComponent;
    exports.CancelOrderConfirmationComponent = CancelOrderConfirmationComponent;
    exports.CancelOrderConfirmationModule = CancelOrderConfirmationModule;
    exports.CancelOrderModule = CancelOrderModule;
    exports.CardComponent = CardComponent;
    exports.CardModule = CardModule;
    exports.CarouselComponent = CarouselComponent;
    exports.CarouselModule = CarouselModule;
    exports.CarouselService = CarouselService;
    exports.CartComponentModule = CartComponentModule;
    exports.CartCouponComponent = CartCouponComponent;
    exports.CartCouponModule = CartCouponModule;
    exports.CartDetailsComponent = CartDetailsComponent;
    exports.CartDetailsModule = CartDetailsModule;
    exports.CartItemComponent = CartItemComponent;
    exports.CartItemListComponent = CartItemListComponent;
    exports.CartNotEmptyGuard = CartNotEmptyGuard;
    exports.CartPageLayoutHandler = CartPageLayoutHandler;
    exports.CartSharedModule = CartSharedModule;
    exports.CartTotalsComponent = CartTotalsComponent;
    exports.CartTotalsModule = CartTotalsModule;
    exports.CategoryNavigationComponent = CategoryNavigationComponent;
    exports.CategoryNavigationModule = CategoryNavigationModule;
    exports.CheckoutAuthGuard = CheckoutAuthGuard;
    exports.CheckoutComponentModule = CheckoutComponentModule;
    exports.CheckoutConfig = CheckoutConfig;
    exports.CheckoutConfigService = CheckoutConfigService;
    exports.CheckoutDetailsLoadedGuard = CheckoutDetailsLoadedGuard;
    exports.CheckoutDetailsService = CheckoutDetailsService;
    exports.CheckoutGuard = CheckoutGuard;
    exports.CheckoutLoginModule = CheckoutLoginModule;
    exports.CheckoutOrchestratorComponent = CheckoutOrchestratorComponent;
    exports.CheckoutOrchestratorModule = CheckoutOrchestratorModule;
    exports.CheckoutOrderSummaryComponent = CheckoutOrderSummaryComponent;
    exports.CheckoutOrderSummaryModule = CheckoutOrderSummaryModule;
    exports.CheckoutProgressComponent = CheckoutProgressComponent;
    exports.CheckoutProgressMobileBottomComponent = CheckoutProgressMobileBottomComponent;
    exports.CheckoutProgressMobileBottomModule = CheckoutProgressMobileBottomModule;
    exports.CheckoutProgressMobileTopComponent = CheckoutProgressMobileTopComponent;
    exports.CheckoutProgressMobileTopModule = CheckoutProgressMobileTopModule;
    exports.CheckoutProgressModule = CheckoutProgressModule;
    exports.CheckoutStepType = CheckoutStepType;
    exports.CloseAccountComponent = CloseAccountComponent;
    exports.CloseAccountModalComponent = CloseAccountModalComponent;
    exports.CloseAccountModule = CloseAccountModule;
    exports.CmsComponentData = CmsComponentData;
    exports.CmsLibModule = CmsLibModule;
    exports.CmsPageGuard = CmsPageGuard;
    exports.CmsParagraphModule = CmsParagraphModule;
    exports.CmsRouteModule = CmsRouteModule;
    exports.ComponentWrapperDirective = ComponentWrapperDirective;
    exports.ConsentManagementComponent = ConsentManagementComponent;
    exports.ConsentManagementFormComponent = ConsentManagementFormComponent;
    exports.ConsentManagementModule = ConsentManagementModule;
    exports.CouponCardComponent = CouponCardComponent;
    exports.CouponClaimComponent = CouponClaimComponent;
    exports.CouponDialogComponent = CouponDialogComponent;
    exports.CurrentProductService = CurrentProductService;
    exports.CustomFormValidators = CustomFormValidators;
    exports.DeliveryModeComponent = DeliveryModeComponent;
    exports.DeliveryModeModule = DeliveryModeModule;
    exports.DeliveryModePreferences = DeliveryModePreferences;
    exports.DeliveryModeSetGuard = DeliveryModeSetGuard;
    exports.FooterNavigationComponent = FooterNavigationComponent;
    exports.FooterNavigationModule = FooterNavigationModule;
    exports.ForgotPasswordComponent = ForgotPasswordComponent;
    exports.ForgotPasswordModule = ForgotPasswordModule;
    exports.FormUtils = FormUtils;
    exports.GenericLinkComponent = GenericLinkComponent;
    exports.GenericLinkModule = GenericLinkModule;
    exports.GlobalMessageComponent = GlobalMessageComponent;
    exports.GlobalMessageComponentModule = GlobalMessageComponentModule;
    exports.HamburgerMenuComponent = HamburgerMenuComponent;
    exports.HamburgerMenuModule = HamburgerMenuModule;
    exports.HamburgerMenuService = HamburgerMenuService;
    exports.HighlightPipe = HighlightPipe;
    exports.ICON_TYPE = ICON_TYPE;
    exports.IconComponent = IconComponent;
    exports.IconConfig = IconConfig;
    exports.IconLoaderService = IconLoaderService;
    exports.IconModule = IconModule;
    exports.IconResourceType = IconResourceType;
    exports.ItemCounterComponent = ItemCounterComponent;
    exports.ItemCounterModule = ItemCounterModule;
    exports.JSONLD_PRODUCT_BUILDER = JSONLD_PRODUCT_BUILDER;
    exports.JsonLdBaseProductBuilder = JsonLdBaseProductBuilder;
    exports.JsonLdBuilderModule = JsonLdBuilderModule;
    exports.JsonLdDirective = JsonLdDirective;
    exports.JsonLdProductOfferBuilder = JsonLdProductOfferBuilder;
    exports.JsonLdProductReviewBuilder = JsonLdProductReviewBuilder;
    exports.JsonLdScriptFactory = JsonLdScriptFactory;
    exports.LanguageCurrencyComponent = LanguageCurrencyComponent;
    exports.LayoutConfig = LayoutConfig;
    exports.LayoutModule = LayoutModule;
    exports.LinkComponent = LinkComponent;
    exports.LinkModule = LinkModule;
    exports.ListNavigationModule = ListNavigationModule;
    exports.LoginComponent = LoginComponent;
    exports.LoginFormComponent = LoginFormComponent;
    exports.LoginFormModule = LoginFormModule;
    exports.LoginModule = LoginModule;
    exports.LogoutGuard = LogoutGuard;
    exports.LogoutModule = LogoutModule;
    exports.MainModule = MainModule;
    exports.MediaComponent = MediaComponent;
    exports.MediaModule = MediaModule;
    exports.MediaService = MediaService;
    exports.MiniCartComponent = MiniCartComponent;
    exports.MiniCartModule = MiniCartModule;
    exports.ModalRef = ModalRef;
    exports.ModalService = ModalService;
    exports.MyCouponsComponent = MyCouponsComponent;
    exports.MyCouponsModule = MyCouponsModule;
    exports.MyInterestsComponent = MyInterestsComponent;
    exports.MyInterestsModule = MyInterestsModule;
    exports.NavigationComponent = NavigationComponent;
    exports.NavigationModule = NavigationModule;
    exports.NavigationService = NavigationService;
    exports.NavigationUIComponent = NavigationUIComponent;
    exports.NotCheckoutAuthGuard = NotCheckoutAuthGuard;
    exports.NotificationPreferenceComponent = NotificationPreferenceComponent;
    exports.NotificationPreferenceModule = NotificationPreferenceModule;
    exports.OnlyNumberDirective = OnlyNumberDirective;
    exports.OnlyNumberDirectiveModule = OnlyNumberDirectiveModule;
    exports.OrderAmendService = OrderAmendService;
    exports.OrderCancellationGuard = OrderCancellationGuard;
    exports.OrderCancellationModule = OrderCancellationModule;
    exports.OrderCancellationService = OrderCancellationService;
    exports.OrderConfirmationGuard = OrderConfirmationGuard;
    exports.OrderConfirmationItemsComponent = OrderConfirmationItemsComponent;
    exports.OrderConfirmationModule = OrderConfirmationModule;
    exports.OrderConfirmationOverviewComponent = OrderConfirmationOverviewComponent;
    exports.OrderConfirmationThankYouMessageComponent = OrderConfirmationThankYouMessageComponent;
    exports.OrderConfirmationTotalsComponent = OrderConfirmationTotalsComponent;
    exports.OrderDetailHeadlineComponent = OrderDetailHeadlineComponent;
    exports.OrderDetailItemsComponent = OrderDetailItemsComponent;
    exports.OrderDetailShippingComponent = OrderDetailShippingComponent;
    exports.OrderDetailTotalsComponent = OrderDetailTotalsComponent;
    exports.OrderDetailsModule = OrderDetailsModule;
    exports.OrderDetailsService = OrderDetailsService;
    exports.OrderHistoryComponent = OrderHistoryComponent;
    exports.OrderHistoryModule = OrderHistoryModule;
    exports.OrderModule = OrderModule;
    exports.OrderReturnGuard = OrderReturnGuard;
    exports.OrderReturnModule = OrderReturnModule;
    exports.OrderReturnRequestListComponent = OrderReturnRequestListComponent;
    exports.OrderReturnService = OrderReturnService;
    exports.OrderSummaryComponent = OrderSummaryComponent;
    exports.OutletDirective = OutletDirective;
    exports.OutletModule = OutletModule;
    exports.OutletPosition = OutletPosition;
    exports.OutletRefDirective = OutletRefDirective;
    exports.OutletRefModule = OutletRefModule;
    exports.OutletService = OutletService;
    exports.PAGE_LAYOUT_HANDLER = PAGE_LAYOUT_HANDLER;
    exports.PWAModuleConfig = PWAModuleConfig;
    exports.PageComponentModule = PageComponentModule;
    exports.PageLayoutComponent = PageLayoutComponent;
    exports.PageLayoutModule = PageLayoutModule;
    exports.PageLayoutService = PageLayoutService;
    exports.PageSlotComponent = PageSlotComponent;
    exports.PageSlotModule = PageSlotModule;
    exports.PaginationComponent = PaginationComponent;
    exports.ParagraphComponent = ParagraphComponent;
    exports.PaymentDetailsSetGuard = PaymentDetailsSetGuard;
    exports.PaymentFormComponent = PaymentFormComponent;
    exports.PaymentFormModule = PaymentFormModule;
    exports.PaymentMethodComponent = PaymentMethodComponent;
    exports.PaymentMethodModule = PaymentMethodModule;
    exports.PaymentMethodsComponent = PaymentMethodsComponent;
    exports.PaymentMethodsModule = PaymentMethodsModule;
    exports.PlaceOrderComponent = PlaceOrderComponent;
    exports.PlaceOrderModule = PlaceOrderModule;
    exports.ProductAttributesComponent = ProductAttributesComponent;
    exports.ProductAttributesModule = ProductAttributesModule;
    exports.ProductCarouselComponent = ProductCarouselComponent;
    exports.ProductCarouselModule = ProductCarouselModule;
    exports.ProductCarouselService = ProductCarouselService;
    exports.ProductDetailOutlets = ProductDetailOutlets;
    exports.ProductDetailsPageModule = ProductDetailsPageModule;
    exports.ProductDetailsTabComponent = ProductDetailsTabComponent;
    exports.ProductDetailsTabModule = ProductDetailsTabModule;
    exports.ProductFacetNavigationComponent = ProductFacetNavigationComponent;
    exports.ProductGridItemComponent = ProductGridItemComponent;
    exports.ProductImagesComponent = ProductImagesComponent;
    exports.ProductImagesModule = ProductImagesModule;
    exports.ProductIntroComponent = ProductIntroComponent;
    exports.ProductIntroModule = ProductIntroModule;
    exports.ProductListComponent = ProductListComponent;
    exports.ProductListComponentService = ProductListComponentService;
    exports.ProductListItemComponent = ProductListItemComponent;
    exports.ProductListModule = ProductListModule;
    exports.ProductListingPageModule = ProductListingPageModule;
    exports.ProductReferencesComponent = ProductReferencesComponent;
    exports.ProductReferencesModule = ProductReferencesModule;
    exports.ProductReviewsComponent = ProductReviewsComponent;
    exports.ProductReviewsModule = ProductReviewsModule;
    exports.ProductSchemaBuilder = ProductSchemaBuilder;
    exports.ProductScrollComponent = ProductScrollComponent;
    exports.ProductSummaryComponent = ProductSummaryComponent;
    exports.ProductSummaryModule = ProductSummaryModule;
    exports.ProductTabsModule = ProductTabsModule;
    exports.ProductVariantGuard = ProductVariantGuard;
    exports.ProductVariantsComponent = ProductVariantsComponent;
    exports.ProductVariantsModule = ProductVariantsModule;
    exports.ProductViewComponent = ProductViewComponent;
    exports.PromotionService = PromotionService;
    exports.PromotionsComponent = PromotionsComponent;
    exports.PromotionsModule = PromotionsModule;
    exports.PwaModule = PwaModule;
    exports.QualtricsComponent = QualtricsComponent;
    exports.QualtricsConfig = QualtricsConfig;
    exports.QualtricsLoaderService = QualtricsLoaderService;
    exports.QualtricsModule = QualtricsModule;
    exports.RegisterComponent = RegisterComponent;
    exports.RegisterComponentModule = RegisterComponentModule;
    exports.ResetPasswordFormComponent = ResetPasswordFormComponent;
    exports.ResetPasswordModule = ResetPasswordModule;
    exports.ReturnOrderComponent = ReturnOrderComponent;
    exports.ReturnOrderConfirmationComponent = ReturnOrderConfirmationComponent;
    exports.ReturnOrderConfirmationModule = ReturnOrderConfirmationModule;
    exports.ReturnOrderModule = ReturnOrderModule;
    exports.ReturnRequestDetailModule = ReturnRequestDetailModule;
    exports.ReturnRequestItemsComponent = ReturnRequestItemsComponent;
    exports.ReturnRequestListModule = ReturnRequestListModule;
    exports.ReturnRequestOverviewComponent = ReturnRequestOverviewComponent;
    exports.ReturnRequestTotalsComponent = ReturnRequestTotalsComponent;
    exports.ReviewSubmitComponent = ReviewSubmitComponent;
    exports.ReviewSubmitModule = ReviewSubmitModule;
    exports.SCHEMA_BUILDER = SCHEMA_BUILDER;
    exports.SaveForLaterComponent = SaveForLaterComponent;
    exports.SaveForLaterModule = SaveForLaterModule;
    exports.ScheduleComponent = ScheduleComponent;
    exports.SearchBoxComponent = SearchBoxComponent;
    exports.SearchBoxComponentService = SearchBoxComponentService;
    exports.SearchBoxModule = SearchBoxModule;
    exports.SeoMetaService = SeoMetaService;
    exports.SeoModule = SeoModule;
    exports.ShippingAddressComponent = ShippingAddressComponent;
    exports.ShippingAddressModule = ShippingAddressModule;
    exports.ShippingAddressSetGuard = ShippingAddressSetGuard;
    exports.SiteContextComponentService = SiteContextComponentService;
    exports.SiteContextSelectorComponent = SiteContextSelectorComponent;
    exports.SiteContextSelectorModule = SiteContextSelectorModule;
    exports.SiteContextType = SiteContextType;
    exports.SortingComponent = SortingComponent;
    exports.SpinnerComponent = SpinnerComponent;
    exports.SpinnerModule = SpinnerModule;
    exports.StarRatingComponent = StarRatingComponent;
    exports.StarRatingModule = StarRatingModule;
    exports.StockNotificationComponent = StockNotificationComponent;
    exports.StockNotificationDialogComponent = StockNotificationDialogComponent;
    exports.StockNotificationModule = StockNotificationModule;
    exports.StoreFinderComponent = StoreFinderComponent;
    exports.StoreFinderGridComponent = StoreFinderGridComponent;
    exports.StoreFinderHeaderComponent = StoreFinderHeaderComponent;
    exports.StoreFinderListComponent = StoreFinderListComponent;
    exports.StoreFinderListItemComponent = StoreFinderListItemComponent;
    exports.StoreFinderMapComponent = StoreFinderMapComponent;
    exports.StoreFinderModule = StoreFinderModule;
    exports.StoreFinderPaginationDetailsComponent = StoreFinderPaginationDetailsComponent;
    exports.StoreFinderSearchComponent = StoreFinderSearchComponent;
    exports.StoreFinderSearchResultComponent = StoreFinderSearchResultComponent;
    exports.StoreFinderStoreComponent = StoreFinderStoreComponent;
    exports.StoreFinderStoreDescriptionComponent = StoreFinderStoreDescriptionComponent;
    exports.StoreFinderStoresCountComponent = StoreFinderStoresCountComponent;
    exports.StorefrontComponent = StorefrontComponent;
    exports.StorefrontFoundationModule = StorefrontFoundationModule;
    exports.StorefrontModule = StorefrontModule;
    exports.StructuredDataModule = StructuredDataModule;
    exports.SuggestedAddressDialogComponent = SuggestedAddressDialogComponent;
    exports.TabParagraphContainerComponent = TabParagraphContainerComponent;
    exports.TabParagraphContainerModule = TabParagraphContainerModule;
    exports.USE_STACKED_OUTLETS = USE_STACKED_OUTLETS;
    exports.UpdateEmailComponent = UpdateEmailComponent;
    exports.UpdateEmailFormComponent = UpdateEmailFormComponent;
    exports.UpdateEmailModule = UpdateEmailModule;
    exports.UpdatePasswordComponent = UpdatePasswordComponent;
    exports.UpdatePasswordFormComponent = UpdatePasswordFormComponent;
    exports.UpdatePasswordModule = UpdatePasswordModule;
    exports.UpdateProfileComponent = UpdateProfileComponent;
    exports.UpdateProfileFormComponent = UpdateProfileFormComponent;
    exports.UpdateProfileModule = UpdateProfileModule;
    exports.UserComponentModule = UserComponentModule;
    exports.VariantColorSelectorComponent = VariantColorSelectorComponent;
    exports.VariantColorSelectorModule = VariantColorSelectorModule;
    exports.VariantSizeSelectorComponent = VariantSizeSelectorComponent;
    exports.VariantSizeSelectorModule = VariantSizeSelectorModule;
    exports.VariantStyleIconsComponent = VariantStyleIconsComponent;
    exports.VariantStyleIconsModule = VariantStyleIconsModule;
    exports.VariantStyleSelectorComponent = VariantStyleSelectorComponent;
    exports.VariantStyleSelectorModule = VariantStyleSelectorModule;
    exports.ViewConfig = ViewConfig;
    exports.ViewConfigModule = ViewConfigModule;
    exports.ViewModes = ViewModes;
    exports.WishListComponent = WishListComponent;
    exports.WishListItemComponent = WishListItemComponent;
    exports.WishListModule = WishListModule;
    exports.b2cLayoutConfig = b2cLayoutConfig;
    exports.defaultCmsContentConfig = defaultCmsContentConfig;
    exports.defaultPWAModuleConfig = defaultPWAModuleConfig;
    exports.defaultPageHeaderConfig = defaultPageHeaderConfig;
    exports.defaultScrollConfig = defaultScrollConfig;
    exports.fontawesomeIconConfig = fontawesomeIconConfig;
    exports.getStructuredDataFactory = getStructuredDataFactory;
    exports.headerComponents = headerComponents;
    exports.initSeoService = initSeoService;
    exports.pwaConfigurationFactory = pwaConfigurationFactory;
    exports.pwaFactory = pwaFactory;
    exports.sortTitles = sortTitles;
    exports.titleScores = titleScores;
    exports.ɵa = AsmLoaderModule;
    exports.ɵb = asmFactory;
    exports.ɵba = AddToHomeScreenService;
    exports.ɵbb = GuestRegisterFormComponent;
    exports.ɵbc = SkipLinkModule;
    exports.ɵbd = skipLinkFactory;
    exports.ɵbe = defaultSkipLinkConfig;
    exports.ɵbf = SkipLinkConfig;
    exports.ɵbg = SkipLinkScrollPosition;
    exports.ɵbh = SkipLinkComponent;
    exports.ɵbi = SkipLinkService;
    exports.ɵbj = SkipLinkDirective;
    exports.ɵbk = CheckoutLoginComponent;
    exports.ɵbl = MyCouponsComponentService;
    exports.ɵbm = suffixUrlMatcher;
    exports.ɵbn = addCmsRoute;
    exports.ɵbo = htmlLangProvider;
    exports.ɵbp = setHtmlLangAttribute;
    exports.ɵbq = AnonymousConsentsModule;
    exports.ɵbr = AnonymousConsentDialogComponent;
    exports.ɵbs = RoutingModule;
    exports.ɵbt = defaultStorefrontRoutesConfig;
    exports.ɵbu = defaultRoutingConfig;
    exports.ɵc = ComponentMapperService;
    exports.ɵd = AsmEnablerService;
    exports.ɵe = AsmMainUiComponent;
    exports.ɵf = AsmComponentService;
    exports.ɵg = CSAgentLoginFormComponent;
    exports.ɵh = CustomerSelectionComponent;
    exports.ɵi = AsmSessionTimerComponent;
    exports.ɵj = FormatTimerPipe;
    exports.ɵk = CustomerEmulationComponent;
    exports.ɵl = AppliedCouponsComponent;
    exports.ɵm = AddToWishListModule;
    exports.ɵn = AddToWishListComponent;
    exports.ɵo = defaultCheckoutConfig;
    exports.ɵp = ExpressCheckoutService;
    exports.ɵq = defaultQualtricsConfig;
    exports.ɵr = CmsRoutesService;
    exports.ɵs = CmsMappingService;
    exports.ɵt = CmsI18nService;
    exports.ɵu = CmsGuardsService;
    exports.ɵv = ReturnRequestService;
    exports.ɵw = OrderDetailActionsComponent;
    exports.ɵx = TrackingEventsComponent;
    exports.ɵy = ConsignmentTrackingComponent;
    exports.ɵz = OrderConsignedEntriesComponent;
    exports.θDeferLoaderService = DeferLoaderService;
    exports.θIntersectionService = IntersectionService;

    Object.defineProperty(exports, '__esModule', { value: true });

}));
//# sourceMappingURL=spartacus-storefront.umd.js.map
