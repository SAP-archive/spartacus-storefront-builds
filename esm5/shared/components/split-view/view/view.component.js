import { __decorate } from "tslib";
import { ChangeDetectionStrategy, Component, ElementRef, EventEmitter, HostBinding, Input, OnDestroy, OnInit, Output, } from '@angular/core';
import { SplitViewService } from '../split-view.service';
/**
 * The view component is part of the `SplitViewComponent`. The view
 * contains the navigable content that should be split up. It maintains
 * a view position and allows to show or hide the view.
 *
 * The ViewComponent interacts with the `SplitViewService` for handing over the
 * view state, so that the overarching `SplitViewComponent` can manage the
 * overall experience.
 */
var ViewComponent = /** @class */ (function () {
    function ViewComponent(splitService, elementRef) {
        this.splitService = splitService;
        this.elementRef = elementRef;
        /**
         * The disappeared flag is added to the
         */
        this.disappeared = true;
        /**
         * An update of the view visibility is emitted to the hiddenChange output.
         */
        this.hiddenChange = new EventEmitter();
    }
    Object.defineProperty(ViewComponent.prototype, "hidden", {
        /**
         * The hidden input is used to set the initial visible state of the view.
         * The hidden state defaults to false.
         *
         * The hidden input supports 2-way binding, see `hiddenChange` property.
         */
        set: function (hidden) {
            this._hidden = hidden;
            this.splitService.toggle(this.viewPosition, hidden);
        },
        enumerable: true,
        configurable: true
    });
    ViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.splitService.splitViewCount = this.splitViewCount;
        var hidden = this._hidden ? { hidden: this._hidden } : {};
        this.splitService.add(this.viewPosition, hidden);
        this.subscription = this.splitService
            .getViewState(Number(this.position))
            .subscribe(function (view) {
            _this.hiddenChange.emit(view.hidden);
            _this._hidden = view.hidden;
            if (view.hidden) {
                setTimeout(function () {
                    _this.disappeared = true;
                }, _this.duration * 1.25);
            }
            else {
                _this.disappeared = false;
            }
        });
    };
    /**
     * Toggles the visibility of the view.
     *
     * An optional force flag can be used to explicitly show or hide view component.
     */
    ViewComponent.prototype.toggle = function (force) {
        this.splitService.toggle(this.viewPosition, force);
    };
    Object.defineProperty(ViewComponent.prototype, "viewPosition", {
        /**
         * Returns the position for the view.
         *
         * The position is either taken from the input `position` or generated by the `SplitService`.
         */
        get: function () {
            if (!(Number(this.position) >= 0)) {
                this.position = this.splitService.nextPosition.toString();
            }
            return Number(this.position);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ViewComponent.prototype, "duration", {
        /**
         * Returns the duration in milliseconds. The duration is based on the CSS custom property
         * `--cx-transition-duration`. Defaults to 300 milliseconds.
         */
        get: function () {
            var duration = getComputedStyle(this.elementRef.nativeElement)
                .getPropertyValue('--cx-transition-duration')
                .trim();
            if (duration.indexOf('ms') > -1) {
                return Number(duration.split('ms')[0]);
            }
            else if (duration.indexOf('s') > -1) {
                return Number(duration.split('s')[0]) * 1000;
            }
            else {
                return 300;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ViewComponent.prototype, "splitViewCount", {
        /**
         * Returns the maximum number of views per split-view. The number is based on the CSS custom property
         * `--cx-max-views`. Defaults to `2`
         */
        get: function () {
            return Number(getComputedStyle(this.elementRef.nativeElement)
                .getPropertyValue('--cx-max-views')
                .trim() || 2);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * The view is removed from the `SplitService` so that the view no longer
     * plays a role in the overall split view.
     */
    ViewComponent.prototype.ngOnDestroy = function () {
        var _a;
        this.splitService.remove(this.viewPosition);
        (_a = this.subscription) === null || _a === void 0 ? void 0 : _a.unsubscribe();
    };
    ViewComponent.ctorParameters = function () { return [
        { type: SplitViewService },
        { type: ElementRef }
    ]; };
    __decorate([
        Input(),
        HostBinding('attr.position')
    ], ViewComponent.prototype, "position", void 0);
    __decorate([
        HostBinding('attr.disappeared')
    ], ViewComponent.prototype, "disappeared", void 0);
    __decorate([
        Input()
    ], ViewComponent.prototype, "hidden", null);
    __decorate([
        Output()
    ], ViewComponent.prototype, "hiddenChange", void 0);
    ViewComponent = __decorate([
        Component({
            selector: 'cx-view',
            template: "<ng-content></ng-content>\n",
            changeDetection: ChangeDetectionStrategy.OnPush
        })
    ], ViewComponent);
    return ViewComponent;
}());
export { ViewComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlldy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac3BhcnRhY3VzL3N0b3JlZnJvbnQvIiwic291cmNlcyI6WyJzaGFyZWQvY29tcG9uZW50cy9zcGxpdC12aWV3L3ZpZXcvdmlldy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCx1QkFBdUIsRUFDdkIsU0FBUyxFQUNULFVBQVUsRUFDVixZQUFZLEVBQ1osV0FBVyxFQUNYLEtBQUssRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLE1BQU0sR0FDUCxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUV6RDs7Ozs7Ozs7R0FRRztBQU1IO0lBZ0NFLHVCQUNZLFlBQThCLEVBQzlCLFVBQXNCO1FBRHRCLGlCQUFZLEdBQVosWUFBWSxDQUFrQjtRQUM5QixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBM0JsQzs7V0FFRztRQUM4QixnQkFBVyxHQUFHLElBQUksQ0FBQztRQWNwRDs7V0FFRztRQUVILGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztJQU8vQixDQUFDO0lBaEJKLHNCQUFJLGlDQUFNO1FBUFY7Ozs7O1dBS0c7YUFFSCxVQUFXLE1BQWU7WUFDeEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7WUFDdEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN0RCxDQUFDOzs7T0FBQTtJQWVELGdDQUFRLEdBQVI7UUFBQSxpQkFtQkM7UUFsQkMsSUFBSSxDQUFDLFlBQVksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUV2RCxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxD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S2dCO1FBQWhDLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQztzREFBb0I7SUFTcEQ7UUFEQyxLQUFLLEVBQUU7K0NBSVA7SUFNRDtRQURDLE1BQU0sRUFBRTt1REFDeUI7SUE1QnZCLGFBQWE7UUFMekIsU0FBUyxDQUFDO1lBQ1QsUUFBUSxFQUFFLFNBQVM7WUFDbkIsdUNBQW9DO1lBQ3BDLGVBQWUsRUFBRSx1QkFBdUIsQ0FBQyxNQUFNO1NBQ2hELENBQUM7T0FDVyxhQUFhLENBcUh6QjtJQUFELG9CQUFDO0NBQUEsQUFySEQsSUFxSEM7U0FySFksYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSG9zdEJpbmRpbmcsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgU3BsaXRWaWV3U2VydmljZSB9IGZyb20gJy4uL3NwbGl0LXZpZXcuc2VydmljZSc7XG5cbi8qKlxuICogVGhlIHZpZXcgY29tcG9uZW50IGlzIHBhcnQgb2YgdGhlIGBTcGxpdFZpZXdDb21wb25lbnRgLiBUaGUgdmlld1xuICogY29udGFpbnMgdGhlIG5hdmlnYWJsZSBjb250ZW50IHRoYXQgc2hvdWxkIGJlIHNwbGl0IHVwLiBJdCBtYWludGFpbnNcbiAqIGEgdmlldyBwb3NpdGlvbiBhbmQgYWxsb3dzIHRvIHNob3cgb3IgaGlkZSB0aGUgdmlldy5cbiAqXG4gKiBUaGUgVmlld0NvbXBvbmVudCBpbnRlcmFjdHMgd2l0aCB0aGUgYFNwbGl0Vmlld1NlcnZpY2VgIGZvciBoYW5kaW5nIG92ZXIgdGhlXG4gKiB2aWV3IHN0YXRlLCBzbyB0aGF0IHRoZSBvdmVyYXJjaGluZyBgU3BsaXRWaWV3Q29tcG9uZW50YCBjYW4gbWFuYWdlIHRoZVxuICogb3ZlcmFsbCBleHBlcmllbmNlLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjeC12aWV3JyxcbiAgdGVtcGxhdGVVcmw6ICcuL3ZpZXcuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgVmlld0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgcHJvdGVjdGVkIF9oaWRkZW47XG5cbiAgQElucHV0KClcbiAgQEhvc3RCaW5kaW5nKCdhdHRyLnBvc2l0aW9uJylcbiAgcG9zaXRpb246IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGRpc2FwcGVhcmVkIGZsYWcgaXMgYWRkZWQgdG8gdGhlXG4gICAqL1xuICBASG9zdEJpbmRpbmcoJ2F0dHIuZGlzYXBwZWFyZWQnKSBkaXNhcHBlYXJlZCA9IHRydWU7XG5cbiAgLyoqXG4gICAqIFRoZSBoaWRkZW4gaW5wdXQgaXMgdXNlZCB0byBzZXQgdGhlIGluaXRpYWwgdmlzaWJsZSBzdGF0ZSBvZiB0aGUgdmlldy5cbiAgICogVGhlIGhpZGRlbiBzdGF0ZSBkZWZhdWx0cyB0byBmYWxzZS5cbiAgICpcbiAgICogVGhlIGhpZGRlbiBpbnB1dCBzdXBwb3J0cyAyLXdheSBiaW5kaW5nLCBzZWUgYGhpZGRlbkNoYW5nZWAgcHJvcGVydHkuXG4gICAqL1xuICBASW5wdXQoKVxuICBzZXQgaGlkZGVuKGhpZGRlbjogYm9vbGVhbikge1xuICAgIHRoaXMuX2hpZGRlbiA9IGhpZGRlbjtcbiAgICB0aGlzLnNwbGl0U2VydmljZS50b2dnbGUodGhpcy52aWV3UG9zaXRpb24sIGhpZGRlbik7XG4gIH1cblxuICAvKipcbiAgICogQW4gdXBkYXRlIG9mIHRoZSB2aWV3IHZpc2liaWxpdHkgaXMgZW1pdHRlZCB0byB0aGUgaGlkZGVuQ2hhbmdlIG91dHB1dC5cbiAgICovXG4gIEBPdXRwdXQoKVxuICBoaWRkZW5DaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHJvdGVjdGVkIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBzcGxpdFNlcnZpY2U6IFNwbGl0Vmlld1NlcnZpY2UsXG4gICAgcHJvdGVjdGVkIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWZcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuc3BsaXRTZXJ2aWNlLnNwbGl0Vmlld0NvdW50ID0gdGhpcy5zcGxpdFZpZXdDb3VudDtcblxuICAgIGNvbnN0IGhpZGRlbiA9IHRoaXMuX2hpZGRlbiA/IHsgaGlkZGVuOiB0aGlzLl9oaWRkZW4gfSA6IHt9O1xuICAgIHRoaXMuc3BsaXRTZXJ2aWNlLmFkZCh0aGlzLnZpZXdQb3NpdGlvbiwgaGlkZGVuKTtcblxuICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5zcGxpdFNlcnZpY2VcbiAgICAgIC5nZXRWaWV3U3RhdGUoTnVtYmVyKHRoaXMucG9zaXRpb24pKVxuICAgICAgLnN1YnNjcmliZSgodmlldykgPT4ge1xuICAgICAgICB0aGlzLmhpZGRlbkNoYW5nZS5lbWl0KHZpZXcuaGlkZGVuKTtcbiAgICAgICAgdGhpcy5faGlkZGVuID0gdmlldy5oaWRkZW47XG4gICAgICAgIGlmICh2aWV3LmhpZGRlbikge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kaXNhcHBlYXJlZCA9IHRydWU7XG4gICAgICAgICAgfSwgdGhpcy5kdXJhdGlvbiAqIDEuMjUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZGlzYXBwZWFyZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgdmlldy5cbiAgICpcbiAgICogQW4gb3B0aW9uYWwgZm9yY2UgZmxhZyBjYW4gYmUgdXNlZCB0byBleHBsaWNpdGx5IHNob3cgb3IgaGlkZSB2aWV3IGNvbXBvbmVudC5cbiAgICovXG4gIHRvZ2dsZShmb3JjZT86IGJvb2xlYW4pIHtcbiAgICB0aGlzLnNwbGl0U2VydmljZS50b2dnbGUodGhpcy52aWV3UG9zaXRpb24sIGZvcmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBmb3IgdGhlIHZpZXcuXG4gICAqXG4gICAqIFRoZSBwb3NpdGlvbiBpcyBlaXRoZXIgdGFrZW4gZnJvbSB0aGUgaW5wdXQgYHBvc2l0aW9uYCBvciBnZW5lcmF0ZWQgYnkgdGhlIGBTcGxpdFNlcnZpY2VgLlxuICAgKi9cbiAgcHJvdGVjdGVkIGdldCB2aWV3UG9zaXRpb24oKTogbnVtYmVyIHtcbiAgICBpZiAoIShOdW1iZXIodGhpcy5wb3NpdGlvbikgPj0gMCkpIHtcbiAgICAgIHRoaXMucG9zaXRpb24gPSB0aGlzLnNwbGl0U2VydmljZS5uZXh0UG9zaXRpb24udG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIE51bWJlcih0aGlzLnBvc2l0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuIFRoZSBkdXJhdGlvbiBpcyBiYXNlZCBvbiB0aGUgQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuICAgKiBgLS1jeC10cmFuc2l0aW9uLWR1cmF0aW9uYC4gRGVmYXVsdHMgdG8gMzAwIG1pbGxpc2Vjb25kcy5cbiAgICovXG4gIHByb3RlY3RlZCBnZXQgZHVyYXRpb24oKTogbnVtYmVyIHtcbiAgICBjb25zdCBkdXJhdGlvbjogc3RyaW5nID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudClcbiAgICAgIC5nZXRQcm9wZXJ0eVZhbHVlKCctLWN4LXRyYW5zaXRpb24tZHVyYXRpb24nKVxuICAgICAgLnRyaW0oKTtcblxuICAgIGlmIChkdXJhdGlvbi5pbmRleE9mKCdtcycpID4gLTEpIHtcbiAgICAgIHJldHVybiBOdW1iZXIoZHVyYXRpb24uc3BsaXQoJ21zJylbMF0pO1xuICAgIH0gZWxzZSBpZiAoZHVyYXRpb24uaW5kZXhPZigncycpID4gLTEpIHtcbiAgICAgIHJldHVybiBOdW1iZXIoZHVyYXRpb24uc3BsaXQoJ3MnKVswXSkgKiAxMDAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMzAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG51bWJlciBvZiB2aWV3cyBwZXIgc3BsaXQtdmlldy4gVGhlIG51bWJlciBpcyBiYXNlZCBvbiB0aGUgQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuICAgKiBgLS1jeC1tYXgtdmlld3NgLiBEZWZhdWx0cyB0byBgMmBcbiAgICovXG4gIHByb3RlY3RlZCBnZXQgc3BsaXRWaWV3Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTnVtYmVyKFxuICAgICAgZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudClcbiAgICAgICAgLmdldFByb3BlcnR5VmFsdWUoJy0tY3gtbWF4LXZpZXdzJylcbiAgICAgICAgLnRyaW0oKSB8fCAyXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgdmlldyBpcyByZW1vdmVkIGZyb20gdGhlIGBTcGxpdFNlcnZpY2VgIHNvIHRoYXQgdGhlIHZpZXcgbm8gbG9uZ2VyXG4gICAqIHBsYXlzIGEgcm9sZSBpbiB0aGUgb3ZlcmFsbCBzcGxpdCB2aWV3LlxuICAgKi9cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5zcGxpdFNlcnZpY2UucmVtb3ZlKHRoaXMudmlld1Bvc2l0aW9uKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbj8udW5zdWJzY3JpYmUoKTtcbiAgfVxufVxuIl19