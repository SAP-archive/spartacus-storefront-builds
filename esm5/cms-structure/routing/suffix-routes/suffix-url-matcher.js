/**
 * Matches the pattern '[ ** / ] marker / :paramName'
 *
 * @param marker phrase that indicates the start of the match
 * @param paramName name of the parameter present after the marker
 * @param precedingParamName name of the parameter for every preceding url segment
 *        i.e. `param` will result in `param0`, `param1`, ...
 */
export function suffixUrlMatcher(segments, _segmentGroup, route) {
    var _a;
    var config = route.data.cxSuffixUrlMatcher;
    var marker = config.marker, paramName = config.paramName;
    var precedingParamName = config.precedingParamName || 'param';
    var markerIndex = findLastIndex(segments, function (_a) {
        var path = _a.path;
        return path === marker;
    });
    var isMarkerLastSegment = markerIndex === segments.length - 1;
    if (markerIndex === -1 || isMarkerLastSegment) {
        return null;
    }
    var paramIndex = markerIndex + 1;
    var posParams = (_a = {},
        _a[paramName] = segments[paramIndex],
        _a);
    for (var i = 0; i < markerIndex; i++) {
        posParams["" + precedingParamName + i] = segments[i];
    }
    return { consumed: segments.slice(0, paramIndex + 1), posParams: posParams };
}
export function findLastIndex(elements, predicate) {
    for (var index = elements.length - 1; index >= 0; index--) {
        if (predicate(elements[index])) {
            return index;
        }
    }
    return -1;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3VmZml4LXVybC1tYXRjaGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHNwYXJ0YWN1cy9zdG9yZWZyb250LyIsInNvdXJjZXMiOlsiY21zLXN0cnVjdHVyZS9yb3V0aW5nL3N1ZmZpeC1yb3V0ZXMvc3VmZml4LXVybC1tYXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlCQTs7Ozs7OztHQU9HO0FBQ0gsTUFBTSxVQUFVLGdCQUFnQixDQUM5QixRQUFzQixFQUN0QixhQUE4QixFQUM5QixLQUFrQjs7SUFFbEIsSUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztJQUNyQyxJQUFBLHNCQUFNLEVBQUUsNEJBQVMsQ0FBWTtJQUNyQyxJQUFNLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxrQkFBa0IsSUFBSSxPQUFPLENBQUM7SUFFaEUsSUFBTSxXQUFXLEdBQUcsYUFBYSxDQUFDLFFBQVEsRUFBRSxVQUFDLEVBQVE7WUFBTixjQUFJO1FBQU8sT0FBQSxJQUFJLEtBQUssTUFBTTtJQUFmLENBQWUsQ0FBQyxDQUFDO0lBQzNFLElBQU0sbUJBQW1CLEdBQUcsV0FBVyxLQUFLLFFBQVEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBRWhFLElBQUksV0FBVyxLQUFLLENBQUMsQ0FBQyxJQUFJLG1CQUFtQixFQUFFO1FBQzdDLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxJQUFNLFVBQVUsR0FBRyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBQ25DLElBQU0sU0FBUztRQUNiLEdBQUMsU0FBUyxJQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUM7V0FDbEMsQ0FBQztJQUVGLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDcEMsU0FBUyxDQUFDLEtBQUcsa0JBQWtCLEdBQUcsQ0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3REO0lBRUQsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxVQUFVLEdBQUcsQ0FBQyxDQUFDLEVBQUUsU0FBUyxXQUFBLEVBQUUsQ0FBQztBQUNwRSxDQUFDO0FBRUQsTUFBTSxVQUFVLGFBQWEsQ0FBSSxRQUFhLEVBQUUsU0FBNkI7SUFDM0UsS0FBSyxJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFO1FBQ3pELElBQUksU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQzlCLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7S0FDRjtJQUNELE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDWixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgUm91dGUsXG4gIFVybE1hdGNoUmVzdWx0LFxuICBVcmxTZWdtZW50LFxuICBVcmxTZWdtZW50R3JvdXAsXG59IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3VmZml4Um91dGUgZXh0ZW5kcyBSb3V0ZSB7XG4gIGRhdGE6IHtcbiAgICBjeFN1ZmZpeFVybE1hdGNoZXI6IHtcbiAgICAgIG1hcmtlcjogc3RyaW5nO1xuICAgICAgcGFyYW1OYW1lOiBzdHJpbmc7XG4gICAgICBwcmVjZWRpbmdQYXJhbU5hbWU/OiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqXG4gKiBNYXRjaGVzIHRoZSBwYXR0ZXJuICdbICoqIC8gXSBtYXJrZXIgLyA6cGFyYW1OYW1lJ1xuICpcbiAqIEBwYXJhbSBtYXJrZXIgcGhyYXNlIHRoYXQgaW5kaWNhdGVzIHRoZSBzdGFydCBvZiB0aGUgbWF0Y2hcbiAqIEBwYXJhbSBwYXJhbU5hbWUgbmFtZSBvZiB0aGUgcGFyYW1ldGVyIHByZXNlbnQgYWZ0ZXIgdGhlIG1hcmtlclxuICogQHBhcmFtIHByZWNlZGluZ1BhcmFtTmFtZSBuYW1lIG9mIHRoZSBwYXJhbWV0ZXIgZm9yIGV2ZXJ5IHByZWNlZGluZyB1cmwgc2VnbWVudFxuICogICAgICAgIGkuZS4gYHBhcmFtYCB3aWxsIHJlc3VsdCBpbiBgcGFyYW0wYCwgYHBhcmFtMWAsIC4uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VmZml4VXJsTWF0Y2hlcihcbiAgc2VnbWVudHM6IFVybFNlZ21lbnRbXSxcbiAgX3NlZ21lbnRHcm91cDogVXJsU2VnbWVudEdyb3VwLFxuICByb3V0ZTogU3VmZml4Um91dGVcbik6IFVybE1hdGNoUmVzdWx0IHwgbnVsbCB7XG4gIGNvbnN0IGNvbmZpZyA9IHJvdXRlLmRhdGEuY3hTdWZmaXhVcmxNYXRjaGVyO1xuICBjb25zdCB7IG1hcmtlciwgcGFyYW1OYW1lIH0gPSBjb25maWc7XG4gIGNvbnN0IHByZWNlZGluZ1BhcmFtTmFtZSA9IGNvbmZpZy5wcmVjZWRpbmdQYXJhbU5hbWUgfHwgJ3BhcmFtJztcblxuICBjb25zdCBtYXJrZXJJbmRleCA9IGZpbmRMYXN0SW5kZXgoc2VnbWVudHMsICh7IHBhdGggfSkgPT4gcGF0aCA9PT0gbWFya2VyKTtcbiAgY29uc3QgaXNNYXJrZXJMYXN0U2VnbWVudCA9IG1hcmtlckluZGV4ID09PSBzZWdtZW50cy5sZW5ndGggLSAxO1xuXG4gIGlmIChtYXJrZXJJbmRleCA9PT0gLTEgfHwgaXNNYXJrZXJMYXN0U2VnbWVudCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgcGFyYW1JbmRleCA9IG1hcmtlckluZGV4ICsgMTtcbiAgY29uc3QgcG9zUGFyYW1zOiB7IFtuYW1lOiBzdHJpbmddOiBVcmxTZWdtZW50IH0gPSB7XG4gICAgW3BhcmFtTmFtZV06IHNlZ21lbnRzW3BhcmFtSW5kZXhdLFxuICB9O1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya2VySW5kZXg7IGkrKykge1xuICAgIHBvc1BhcmFtc1tgJHtwcmVjZWRpbmdQYXJhbU5hbWV9JHtpfWBdID0gc2VnbWVudHNbaV07XG4gIH1cblxuICByZXR1cm4geyBjb25zdW1lZDogc2VnbWVudHMuc2xpY2UoMCwgcGFyYW1JbmRleCArIDEpLCBwb3NQYXJhbXMgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0SW5kZXg8VD4oZWxlbWVudHM6IFRbXSwgcHJlZGljYXRlOiAoZWw6IFQpID0+IGJvb2xlYW4pIHtcbiAgZm9yIChsZXQgaW5kZXggPSBlbGVtZW50cy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgaWYgKHByZWRpY2F0ZShlbGVtZW50c1tpbmRleF0pKSB7XG4gICAgICByZXR1cm4gaW5kZXg7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cbiJdfQ==