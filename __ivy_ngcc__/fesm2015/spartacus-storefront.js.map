{"version":3,"sources":["/home/travis/build/SAP/cloud-commerce-spartacus-storefront/dist/storefrontlib/fesm2015/spartacus-storefront.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8MAkLE;;;;;;mPAMiP,AAK7N;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BA+DpB;;;;;;;;;;;0CAWwC,AAMxB;;;;;EAGhB,+PAQa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2HA0Cb;;;;gLAI8K,AAK/J;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wKAiFf;;;;;EAKA,AAMkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yHA4BlC;;;;EAIA,AAM4C;;;;;;;;;;;;;;;;;;;;;;;;;4DAY5C;;;EAGA,AAMsC;;;;;;;;;;;;;;;;;;;;EAGtC,YAgCyC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qQA+FzC;;;;;;;;qCAQmC,AAElC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;m+CAkED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BAmCyB,AAIxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kMAkHD;;;;;;;;;;;;;;wCAcsC,AAIrC;;;;;;EAID,8LAQsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yKAqDtB;;;;;;gCAM8B,AAI7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2KA6BD;;;;;6NAK2N,AAKxM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gOAqCnB;;;;;;kQAMgQ,AAK/O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0KAiEjB;;;;;6NAK2N,AAKvM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mHAuKpB;;;;;;;gCAO8B,AAE7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8LA4BD;;;;;;;;mDAQiD,AAO3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yKA0DtB;;;;;2NAKyN,AAKtM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uWA8DnB;;;;;;;;;;;6VAW2V,AAK5U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8FA8Df;kKACgK,AAKhJ;;;;;;;;;;;;2LAUhB;;;;;;;;;;wDAUsD,AAKjC;;;;;EAGrB,mKAOkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6IAsDlB;;;;gNAI8M,AAKxL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8MAuCtB;;;;;;;iCAO+B,AAI9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8RAwFD;;;;;;;;;;;;;;;;;;gDAkB8C,AAK5B;;;;;EAGlB,sLAQe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qKA8Ef;;;;;;;;;;;;;;;;;;;sDAmBoD,AAOhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mIA8DpB;;;;kMAIgM,AAK9K;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gIA+BlB;;;EAGA,AAOoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0JAiCpB;;;;;;;sDAOoD,AAKhC;;;;;;;;;;;;;;;;;EAGpB,YAqBiB;;;;;;;;;;;;;;;EAajB,kOAQiB;;;;;EAGjB,oOAQmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kIA+CnB;;;;;EAKA,AAGyB;;;;;;;;;;;;;;6FAY1B;;;;;;;;;;;;;;yGAOC;;;EAGA,AAMiC;;;;;;;;;;;;;;;;;;;mFAOjC;;;EAGA,AAM8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAU9B,YA2BY;;;;;;;;;;;;;;;;;;;;;;;;;;EAiBZ,OAYiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qMAyCjB;;;;;;gOAM8N,AAK7M;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+PA+DjB;;;;;;;;kCAQgC,AAI/B;;;;;;;;;;;;;;;;;;;;;;;;;;;6CAuBD;;;;;;;;;;gDAU8C,AAK5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8LA+BlB;;;;;;oCAMkC,AAIjC;;;;;;;;;;;;;;;;;;;;;;;;;EAgBD,kCAeuB;;;;;;;;;;;;;;;;;;;;EAUvB,0CAcY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mKAyCZ;;;;mOAIiO,AAKvM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+HAqC1B;8MAC4M,AAKjL;;;;;;;;;;;;;;;;;;;;;;;;;;kIAyB3B;kNACgN,AAKpL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iLAyD5B;;;;oPAIkP,AAKrN;;;;;;;;;;;;;;;;;;;kPAkB7B;;;;;;oRAMkR,AAK1P;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qMAmCxB;;;;;;mCAMiC,AAIhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EASD,OAiCsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sQA2CtB;;;;;;;wRAOsR,AAKhQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;s9GAoDtB;;;;;;;;;;;qDAWmD,AAQ9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+PA8DrB;;;;;;;sRAOoR,AAKhQ;;;;;;;;;;;;;;;;EAOpB,uDAakB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wnCAwElB;;;;;;;EAOA,AAQ2B;;;;;;;;;;;;;;;;;;;;;EAmB3B,sGAKkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oyBAgDlB;;;;;;;;;+DAS6D,AAQjC;;;;;;;;;;;;;;;;;;;;;;;;;;;skDAkB5B;;;;EAIA,AAQ6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qnPAmE7B;;;;;;;;;;;;;;+DAc6D,AAWhC;;;;;;;;;;;EAG7B,YAoBY;;;;;;;;;;;;;;;;;;;;;;gMAqBZ;;;;;8OAK4O,AAKtN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yNA8FtB;;;;;;6PAM2P,AAKxO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2IAmDnB;;;;;;;;2DAQyD,AAM5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iRA0F7B;;;;;;;;;;;;;;;oDAekD,AAO7B;;;;;;;;;;;uHASrB;;;EAGA,AAKqB;;;;;EAGrB,mKAM2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oLAqC3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sDA8BoD,AAMpC;;;;;EAGhB,4KAOa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qIAwCb;;;;6LAI2L,AAKzK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iMAmDlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;oDA4BkD,AAO9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gKAwGpB;;;;;8MAK4M,AAK7L;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4EA6Df;;;;;;;;;;;;;;;;;;;;;;;;kDAwBgD,AAO/B;;;;;EAGjB,uJAOc;;;;;EAGd,kNAOiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oLAyEjB;;;;;;;;;;;;;;;;;;;;;;;;wDAwBsD,AAM/B;;;;;EAGvB,8LAOoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4GAwBpB;;;;;;;;;;;;;;;;;;oDAkBkD,AAM3B;;;;;EAGvB,uLAOoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2IA+SpB;;;;4MAI0M,AAKtL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0GAgEpB;;;;;;;;;;;;;;;;;;;2DAmByD,AAOnC;;;;;;;;EAGtB,gDAWmB;;;;;;;;;;;;;;;;;;;;;4JASnB;;;;;;;;;;;;;;;wDAesD,AAOnC;;;;;EAGnB,iOAOuB;;;;;;;;;;;;;;;;;EAKvB,0DAMmB;;;;;EAGnB,yKAOgB;;;;;;;;;;;;;;;;;;;;;wIAchB;;;EAGA,AAMyB;;;;;EAGzB,oPAO+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4LAsD/B;;;;;oPAKkP,AAKzN;;;;;;;;;;;;;;mFAOzB;;;EAGA,AAQqB;;;;;;;;;;;;;;;;;;;;;;;;;EAOrB,YAwBkB;;;;;;;;EAGlB,mHAU4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iJAqE5B;;;;;;0CAMwC,AAEvC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sIAoBD;;;;;;8DAM4D,AAO7B;;;;;;;;;;;;;;;;;;;;;;;;;;;EAG/B,YA+B4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8FA8C5B;;;;;;;;;;;;;oDAakD,AAO5B;;;;;EAGtB,kLAOmB;;;;;;;;;;;;;;;;;;;;;;;EAqBnB,2IAGmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0HA0CnB;;;wDAGsD,AAOhC;;;;;EAGtB,4LAOmB;;;;;;;;;;;;;;;;;;;;;;;;;;0IAkBnB;;;;;;;;;;;;4DAY0D,AAOhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6VAoH1B;;;;;;;;EAQA,AAMsB;;;;;;;;;;;;;;;;;;;;EAGtB,YAuBmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gNA6HnB;;;;;;;;;;;;;;;;;;;;;;;;;;wDA0BsD,AAO9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sSAwCxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;mDA4BiD,AAM7B;;;;;;;;;;;;;;;;;;;8IAGpB;;;oDAGkD,AAM1B;;;;;;;;;;;;;;;;;EAGxB,YAuBmB;;;;;;;;;;;;;;;;;;;;;;;;;EAGnB,YA4BkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yHAwElB;;;;;;;;EAQA,AAOuB;;;;;;;;;;;;;;;;;;;;;EAGvB,YAwBoB;;;;;;;;;;;;;;;;;;;;;;;qLAsBpB;;;;;iOAK+N,AAK3M;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qPAyCpB;;;;;;uRAMqR,AAK7P;;;;;;;;;;;;;;;;;;;uLAYxB;;;EAGA,AAOsB;;;;;;;;;;;;;;;;;;;EAGtB,YAsBmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0KASnB;;;EAGA,AAOoB;;;;;;;;;;;;;;;;;;EAGpB,YAqBiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uLA4BjB;;;;;EAKA,AAOyB;;;;;;;;;;;;;;;;;;EAGzB,YAqBsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gIA0BtB;;;;;EAKA,AAMwB;;;;;;;;;;;;;;;;;;;EAGxB,YAsBqB;;;;;;;;;;;;;;;;;;;;;;;;;EAGrB,6BA6BsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mMA6JtB;;;;;0PAKwP,AAKhO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+SA8BxB;;;;;;;;wTAQsT,AAKlS;;;;;;;;;;;;;;;;;;;;;;;;;;;sSA0BpB;;;;;;;2TAOyT,AAKhS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iYAiIzB;;;;;;;;;wYASsY,AAK7W;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iUAsCzB;;;;;;;;;sUASoU,AAKpT;;;;;;EAIhB,iRAOgC;;;;;;;;;;;;;;;;EAGhC,YAoB6B;;;;;;;;;;;;;;iHAO7B;;;EAGA,AAOgC;;;;;;;;;;;;;;;EAGhC,YAkB6B;;;;;;;;;;;;;;;;;;;;;;;;;;;yHAoB7B;;;;;EAKA,AAMwC;;;;;;;;;;;;;;;;;;;EAGxC,YAsBqC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4JAsBrC;;;;;;EAMA,AAMqC;;;;;;;;;;;;;;;;;;;EAGrC,YAsBkC;;;;;;;;;;;;;;;;;;;;;;;;;;;wMAoBlC;;;;;EAKA,AAO4B;;;;;;;;;;;;;;;;;;;EAG5B,YAuByB;;;;;;;;;;;;;;;;;;;;;;yRAqBzB;;;;;;;6TAO2T,AAKjS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sUA+D1B;;;;;;;EAOA,AAOwB;;;;;;;;;;;;;;;;;;;;;;EAGxB,YAyBqB;;;;;;;;;;;;;;;;;;;;;;gRAqBrB;;;;;;;iTAO+S,AAKxR;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4UAyBvB;;;;;;;;;gEAS8D,AAOhC;;;;;;;;;;;;EAG9B,YAc2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oSAe3B;;;;;;;;;wEASsE,AAOpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oHA8LlC;;;;;;;;;;;;;;;;;;;;;;;gEAuB8D,AAOvC;;;;;;;;;;;;;;EAGvB,YAiBoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oHA+KpB;;;;;;;;;;;;EAYA,AAOyB;;;;;;;;;;;;;;;;;;;;;;;;;EAGzB,YA6BsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yIA2BtB;;;;EAIA,AAOsB;;;;;;;;;;;;;;;;;;EAGtB,YAqBmB;;;;;;;;;;;;;;;;;;;;;;sRAqBnB;;;;;;;yTAOuT,AAK9R;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uIA0FzB;;;;;;;;;EASA,AAOwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAGxB,YA+BqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iXAoKrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4DAgC0D,AAOnC;;;;;;;;;;;;;;EAGvB,YAiBoB;;;;;;;;;;4KASpB;;;;sPAIoP,AAKvN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oHA2L7B;;;;;;;;;EASA,AAO2B;;;;;;;;;;;;;;;;;;;;;;;;;;EAG3B,YA6BwB;;;;;;;;;;;;;;;;;;EAGxB,YAkB0B;;;;;;;;;;;;;;;;;;;;;mOAoB1B;;;;;;oQAMkQ,AAK3O;;;;;;;;;;;;;;;;;;;;;;;iJAsBvB;;;;8MAI4M,AAKrL;;;;;;;;;;;;;;;;;;;;;;;;;;4EAYvB;;;EAGA,AAOyB;;;;;;;;;;;;;;EAGzB,YAiBsB;;;;;;EAGtB,0BAOe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wDAsCf;;;;;;;;;;;;;;;;;;uEAkBqE,AAMpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2KA+KjC;;;;;;;EAOA,AAM6B;;;;;;;;;;;;;;;;;;;;EAG7B,YAuB0B;;;;;;;;;;;EAG1B,YAc0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gFA6B1B;;;;;;;;;;4DAU0D,AAMpC;;;;;;;;;;;;;;;;;EAGtB,YAmBa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uGAyBb;;;;;;;uDAOqD,AAO3B;;;;;;;;;;;;;;;;;EAG1B,YAoBuB;;;;;;;;;;;;;;4FAMvB;;;EAGA,AAOkB;;;;;;;;;;;;;;;;;;;;;;;EAGlB,YA0Be;;;;;;;;;;;;;6HAMf;;;EAGA,AAOgB;;;;;;;;;;;;;;EAGhB,YAiBa;;;;;;;;;;;;;uGAMb;;;EAGA,AAOqB;;;;;;;;;;;;;;;;;EAGrB,YAoBqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6HAuDrB;;;;;;;;iEAQ+D,AAO9B;;;;;;;;;;;;;;;;;EAGjC,YAoB8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iJA+B9B;;;;;EAKA,AAG8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2HAoC9B;;;EAGA,AAMuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uFAwCvB;;;;;;;;;;;wDAWsD,AAM/B;;;;;;;;;;;;;;;;;;;;;;;;;;EAGvB,YA8BoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oHA0DpB;;;;;;;;EAQA,AAO6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yIAW7B;;;EAGA,AAOwB;;;;;;;;;;;;;;;;;;;;EAGxB,YAuBqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+TAyBrB;;;;;EAKA,AAM0B;;;;;;;;;;;;;;;;;;;EAG1B,YAsBuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sJAMvB;;;;;;;;;;;;;;;2DAeyD,AAO5B;;;;;EAG7B,gOAO0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mHA8E1B;;;EAGA,AAGoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iNA2BpB;;;;;;;;;qEASmE,AAOpC;;;;;;;;;;;;EAG/B,YAewB;;;;;;;;;;;;;;;;;;;;;;wGAcxB;;;EAGA,AAOmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mSA6CnC;;;;;;;iUAO+T,AAKpS;;;;;;;;;;;;;;;;;;;;;;0MAqB3B;;;;;kQAKgQ,AAKvO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAMzB,YAmCgC;;;;;;;;;;;;;;;;;;wGAUhC;;;EAGA,AAOuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAMvB,YAkCoB;;;;;EAGpB,+NAK0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0RAiD1B;;;;;;;kTAOgT,AAK3R;;;;;;;;;;;;;;;;;;;;;;kLAqBrB;;;;;oOAKkO,AAK/M;;;;;;;;;;;;;;;;;;;;;;wGAcnB;;;EAGA,AAOmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAMnC,YAoCgC;;;;;;;;;;;;;;;;;;wGAUhC;;;EAGA,AAOuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAMvB,YAkCoB;;;;;EAGpB,6MAKoB;;;;;;;;;;;;;;;;4HASpB;;;EAGA,AAM+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0JA2C/B;;;;EAIA,AAM4B;;;;;;;;;;;;;;;;;;;;;;;8JAU5B;;;;EAIA,AAM0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uFAgC1B;;;;;;;;;;gEAU8D,AAM/B;;;;;;;;;;;;;;;;;;;;6GAa/B;;;;;;8DAM4D,AAM3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kGAoEjC;;;;EAIA,AAM+B;;;;;;;;;;;;;;;;0GAS/B;;;EAGA,AAM6B;;;;;;;;;;;;;;uKAO7B;;;EAGA,AAM8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAc9B,YAsDqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8NA0DrB;;;;;EAKA,AAOwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAIxB,YAiCqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0PAuDrB;;;;;;2RAMyR,AAKlQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6HA4BvB;;;EAGA,AAOiC;;;;;;;;;;;;;;2LAOjC;;;EAGA,AAO8B;;;;;;;;;;;;;;;;;6HAU9B;;;EAGA,AAO+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAS/B,YAoC4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qMAkD5B;;;;EAIA,AAOkC;;;;;;;;;;;;;;;;;;;EAGlC,YAsB0B;;;;;;;;;;;;EAG1B,YAYc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0JA+Ed;;;;EAIA,AAM0B;;;;;;;;;;;;;;;;;;EAG1B,YAsBuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oQA6CvB;;;;;EAKA,AAM6B;;;;;;;;;;;;;;;;;;;EAG7B,YAsBsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oQAwCtB;;;;;;;;;8DAS4D,AAMjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kFA0C3B;;;;;;EAMA,AAMuB;;;;;;;;;;;;;;;;;;;EAGvB,YAsBoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oQAgDpB;;;;;;;;;+DAS6D,AAM/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qFAgC9B;;;;;EAKA,AAM0B;;;;;;;;;;;;;;;;;;;EAG1B,YAsBuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sXAkCvB;;;;;;;;;;;;;;;8DAe4D,AAM/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oFAwC7B;;;;;EAKA,AAMyB;;;;;;;;;;;;;;;;;;;EAGzB,YAsBsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oNAmCtB;;;;;wQAKsQ,AAK1O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2HAuF5B;;;;EAIA,AAMqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kIAUrB;;;;;;sDAMoD,AAM5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uHA0BxB;;;;;;;;;;;;;iEAa+D,AAMzC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2NAmCtB;;;;;EAKA,AAMuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAIvB,YA8CkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+JA8BlB;;;EAGA,AAOkC;;;;;;;;;;;;;;;;;EAGlC,YAoB+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qJA0E/B;;;;;EAKA,AAOuB;;;;;;;;;;;;;;;;;;;;;;EAGvB,YAyBoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qIAuBpB;;;;;EAKA,AAOsB;;;;;;;;;;;;;;;;EAGtB,YAmBmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yLAiInB;;;;;qOAKmO,AAK/M;;;;;;;;;;;;;;;;8LASpB;;;;EAIA,AAO8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yLAmH9B;;;;;;;;;;;;;;;;;;;;;;;sDAuBoD,AAO5B;;;;;;;;;;;;;;;;;iIASxB;;;;EAIA,AAOsB;;;;;;;;;;;;;;;;;;EAGtB,YAqBmB;;;;;;;;;;;;;;;EAGnB,YAkB2B;;;;;;;;;;;;;;;;;;;;;;;;8IAY3B;;;;;EAKA,AAO4B;;;;;;;;;;;;;;;;;;EAG5B,YAqByB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iSAmJzB;;;;;;;yTAOuT,AAK3R;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sRAkH5B;;;;;;;;iCAQ+B,AAM9B;;;;;;;;;;;;EAUD,kGAGgB;;;;;;;;;;;;;;;;;;;EAGhB,YAsBkB;;;;;;;;;;;;;;;;;;;;;;;uHAelB;;;;EAIA,AAOkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sHAyDlC;;;;EAIA,AAOqC;;;;;;;;;;;;;;;;;;;;;;;;yJAgBrC;;;EAGA,AAO4C;;;;;;;;;;;;;;;;;;;8HAY5C;;;EAGA,AAOmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oQA+BnC;;;;;;;;;;;;0DAYwD,AAM3B;;;;;;;;;;;;;;;;;;;6OAkB7B;;;;;;gRAM8Q,AAKrP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAUzB,YAqC0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6PAwC1B;;;;;;gSAM8R,AAKrQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qLAoBzB;;;;;EAKA,AAO2B;;;;;;;;;;;;;;;;;;EAG3B,YAqBwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qLAyBxB;;;;;EAKA,AAO6B;;;;;;;;;;;;;;;;;;EAG7B,YAqB0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+FA2D1B;;;EAGA,AAOyB;;;;;;;;;;;;;;;;;;EAGzB,YAqBsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kJA2DtB;;;;;EAKA,AAOwB;;;;;;;;;;;;;;;;EAGxB,YAmBqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sXA6GrB;;;;;;;;;oXASkX,AAGpV;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2GAgC9B;;;;;;yDAMuD,AAOhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iIA+BvB;;;;;EAKA,AAMuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iHA6HvB;;;;;;;;;;;;;0DAawD,AAM/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;4JAiEzB;;;;;EAKA,AAOkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+IAGlC;;;0DAGwD,AAO7B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+IAG3B;;;0DAGwD,AAO7B;;;;;;;;;;;;;;;;;;;;;;;;;;sIAiB3B;;;EAGA,AAO2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2IAoC3B;;;;;;;;gEAQ8D,AAO9B;;;;;EAGhC,yOAQ6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8GA4B7B;;;;;;;;;;+DAU6D,AAO9B;;;;;EAG/B,sOAQ4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8GAmB5B;;;;;;;;;gEAS8D,AAO9B;;;;;EAGhC,yOAQ6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6RAyB7B;;;;;;6DAM2D,AAQ9B;;;;;EAG7B,gOAQ0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8LAyC1B;;;;;4OAK0O,AAKpN;;;;;;;;;;;;;;;;;;;;;;EAGtB,YAyBwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAGxB,YAuDoB;;;;;;;;;;;;;;;;;;;;;;;wHAgBpB;;;EAGA,AAO0B;;;;;;;;;;;;;;;;EAG1B,YAmBuB;;;;;;;;;;;;;;;;6IASvB;;;EAGA,AAO6B;;;;;;;;;;;;;;;EAG7B,YAkB0B;;;;;;;;;;;;;;;;uGAS1B;;;EAGA,AAO6B;;;;;;;;;;;;;;EAG7B,YAiB0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oYA8C1B;;;;;EAKA,AAO0B;;;;;;;;;;;;;;;;;;EAG1B,YAqBuB;;;;;;;;;EAGvB,YASoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sKAsBpB;;;;EAIA,AAMmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0LAwFnC;;;;;;;;;EASA,AAO6B;;;;;;;;;;;;;;;;;;EAG7B,YAwB0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0HAyC1B;;;;;;oDAMkD,AAM9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qGA+BpB;;;;;EAKA,AAM2B;;;;;;;;;EAG3B,6FAM6B;;;;;;;;;;;;;;;;;;mIAgB7B;;;;;;6DAM2D,AAG9B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uFAc7B;;;;;;;;;;;;;;;qEAemE,AAMpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6BA4B/B;;;;;;;;;;;;mEAYiE,AAMvC;;;;;;;;;;;;;;;;;;;;;;;;;;;4DAiB1B;;;0EAGwE,AAMhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sQAiCxC;;;;;;;;;;;;;;uCAcqC,AAKpC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gGA6CD;;;;EAIA,AAMmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;wOAqBnC;;;EAGA,AAM6B;;;;;;;;;;;;;oKAO7B;;;;;;;;;yEASuE,AAMhC;;;;;;;;;;;;;;;;;;;;;sLAWvC;;;EAGA,AAMkC;;;;;;;;;;;;EAGlC,0FAMuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gGAwBvB;;;;;;;;;;;8DAW4D,AAMhC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAG5B,YA2FoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;oQAgDpB;;;;;EAKA,AAMyB;;;;;;;;;;;;;;;;;;;;EAGzB,YAuBsB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;+SAuDtB;;;;;;;;;EASA,AAMqB;;;;;;;;;;;;;;;;;;;;EAGrB,YAuBkB;;;;;;;;;;;;;;;;;;;;;;;;;;uKAiBlB;;;;EAIA,AAMiB;;;;;;;;;;;;;;;;;;EAGjB,YAqBc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kVA0Cd;;;;;;;;;gUAS8T,AAKhT;;;;;;;;;;;;;;;;EAId,YAee;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0eAyJf;;;;;;;;;;;EAWA,AAMoB;;;;;;;;;;;;;;;;;;;;;EAGpB,YAwB0B;;;;;;;;;;;;;;;EAG1B,YAesB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0MAUtB;;;;;;;;;sDASoD,AAO5B;;;;;;;;;;;;;;;;;;;gJAWxB;;;EAGA,AAMoB;;;;;;;;;;;;;;;;;;;;;;EAGpB,YAyBiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAGjB,YAsDe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA4Cf,YAoB2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAS3B,YAgC2B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAiO3B,0LAKgB;;;;;;;;;;;;;;;;;;;;;;;;EAGhB,uBAyB6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAU7B,qCAiCmB;;;;;;;;;;;;;;;;;;;;;;;;EAUnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAiBsB","file":"spartacus-storefront.js","sourcesContent":["import { __decorate, __param, __awaiter } from 'tslib';\nimport { CommonModule, isPlatformBrowser, DOCUMENT, isPlatformServer, Location, formatCurrency, getCurrencySymbol } from '@angular/common';\nimport { ɵɵdefineInjectable, ɵɵinject, Injectable, ElementRef, Renderer2, Input, Component, NgModule, ComponentFactoryResolver, Inject, PLATFORM_ID, Optional, NgZone, Injector, ViewContainerRef, Directive, INJECTOR, InjectionToken, isDevMode, ChangeDetectionStrategy, TemplateRef, EventEmitter, ComponentFactory, Output, HostBinding, APP_INITIALIZER, SecurityContext, RendererFactory2, ViewEncapsulation, ChangeDetectorRef, Pipe, ViewChild, HostListener, ViewChildren } from '@angular/core';\nimport { WindowRef, ConfigModule, Config, isFeatureLevel, AnonymousConsentsConfig, AnonymousConsentsService, I18nModule, FeaturesConfigModule, DeferLoadingStrategy, CmsConfig, AuthService, CartService, CartDataService, CheckoutService, CheckoutDeliveryService, CheckoutPaymentService, CmsService, PageMetaService, FeatureConfigService, GlobalMessageService, TranslationService, KymaService, OccEndpointsService, ProductService, ProductSearchService, ProductReviewService, ProductReferenceService, SearchboxService, RoutingService, CurrencyService, LanguageService, BaseSiteService, UserService, UserAddressService, UserConsentService, UserOrderService, UserPaymentService, UserNotificationPreferenceService, UserInterestsService, SelectiveCartService, DynamicAttributeService, TranslationChunkService, PageType, SemanticPathService, ProtectedRoutesGuard, GlobalMessageType, PageRobotsMeta, ProductScope, AsmAuthService, AsmConfig, AsmService, AsmModule as AsmModule$1, PromotionLocation, OccConfig, UrlModule, provideConfig, LANGUAGE_CONTEXT_ID, CURRENCY_CONTEXT_ID, ContextServiceMap, SiteContextModule, EMAIL_PATTERN, PASSWORD_PATTERN, CartVoucherService, OCC_USER_ID_ANONYMOUS, CustomerCouponService, WishListService, ActiveCartService, CartModule, RoutingConfigService, AuthRedirectService, ANONYMOUS_CONSENT_STATUS, isFeatureEnabled, ANONYMOUS_CONSENTS_FEATURE, AuthGuard, NotAuthGuard, OrderReturnRequestService, CmsPageTitleModule, VariantType, VariantQualifier, NotificationType, StoreDataService, StoreFinderService, GoogleMapRendererService, StoreFinderCoreModule, ProtectedRoutesService, RoutingModule as RoutingModule$1, StateModule, AuthModule, AnonymousConsentsModule as AnonymousConsentsModule$1, ConfigInitializerModule, CmsModule, GlobalMessageModule, ProcessModule, CheckoutModule, UserModule, ProductModule, provideConfigFromMetaTags, SmartEditModule, PersonalizationModule, OccModule, ExternalRoutesModule } from '@spartacus/core';\nimport { Subscription, combineLatest, concat, of, isObservable, from, fromEvent, BehaviorSubject, Observable, asyncScheduler } from 'rxjs';\nimport { take, distinctUntilChanged, tap, first, skipWhile, endWith, debounceTime, startWith, map, switchMap, filter, withLatestFrom, flatMap, observeOn, mergeMap, shareReplay, scan, distinctUntilKeyChanged, pluck } from 'rxjs/operators';\nimport { DomSanitizer, Title, Meta } from '@angular/platform-browser';\nimport { NgbModalRef, NgbModal, NgbModule, NgbActiveModal, NgbTabsetModule } from '@ng-bootstrap/ng-bootstrap';\nimport { Validators, FormBuilder, ReactiveFormsModule, FormGroup, FormControl, FormsModule } from '@angular/forms';\nimport { Router, RouterModule, ActivatedRoute, NavigationStart, NavigationEnd } from '@angular/router';\nimport { ServiceWorkerModule, SwRegistrationOptions } from '@angular/service-worker';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { HttpClientModule, HttpUrlEncodingCodec } from '@angular/common/http';\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\nimport { EffectsModule } from '@ngrx/effects';\nimport { StoreModule } from '@ngrx/store';\n\nvar ICON_TYPE;\n(function (ICON_TYPE) {\n    ICON_TYPE[\"STAR\"] = \"STAR\";\n    ICON_TYPE[\"SEARCH\"] = \"SEARCH\";\n    ICON_TYPE[\"CART\"] = \"CART\";\n    ICON_TYPE[\"INFO\"] = \"INFO\";\n    ICON_TYPE[\"GRID\"] = \"GRID\";\n    ICON_TYPE[\"LIST\"] = \"LIST\";\n    ICON_TYPE[\"CARET_DOWN\"] = \"CARET_DOWN\";\n    ICON_TYPE[\"CARET_LEFT\"] = \"CARET_LEFT\";\n    ICON_TYPE[\"CARET_RIGHT\"] = \"CARET_RIGHT\";\n    ICON_TYPE[\"CLOSE\"] = \"CLOSE\";\n    ICON_TYPE[\"ERROR\"] = \"ERROR\";\n    ICON_TYPE[\"WARNING\"] = \"WARNING\";\n    ICON_TYPE[\"SUCCESS\"] = \"SUCCESS\";\n    ICON_TYPE[\"VISA\"] = \"VISA\";\n    ICON_TYPE[\"MASTER_CARD\"] = \"MASTER_CARD\";\n    ICON_TYPE[\"AMEX\"] = \"AMEX\";\n    ICON_TYPE[\"DINERS_CLUB\"] = \"DINERS_CLUB\";\n    ICON_TYPE[\"CREDIT_CARD\"] = \"CREDIT_CARD\";\n    ICON_TYPE[\"EXPAND\"] = \"EXPAND\";\n    ICON_TYPE[\"COLLAPSE\"] = \"COLLAPSE\";\n    ICON_TYPE[\"RESET\"] = \"RESET\";\n    ICON_TYPE[\"CIRCLE\"] = \"CIRCLE\";\n    ICON_TYPE[\"HEART\"] = \"HEART\";\n    ICON_TYPE[\"EMPTY_HEART\"] = \"EMPTY_HEART\";\n})(ICON_TYPE || (ICON_TYPE = {}));\nclass IconConfig {\n}\n/**\n * Each ICON type can have an companied resource type, such as SVG, LINK (font) or just TEXT.\n * The resources will be automitacally loaded in case they're required for the `ICON_TYPE`.\n */\nvar IconResourceType;\n(function (IconResourceType) {\n    /**\n     * An svg based icon requires an SVG resource that must be loaded,\n     * this is typically a sprite svg file.\n     */\n    IconResourceType[\"SVG\"] = \"svg\";\n    /**\n     * A font based ICON might require an additional CSS file to be loaded.\n     */\n    IconResourceType[\"LINK\"] = \"link\";\n    /**\n     * Text based icons will simply add the ICON string to the DOM. Text icons do not need an image\n     * or CSS pseudo class (i.e. :before), as the text itself is the icon (i.e. +)\n     */\n    IconResourceType[\"TEXT\"] = \"text\";\n})(IconResourceType || (IconResourceType = {}));\n\nconst fontawesomeIconConfig = {\n    icon: {\n        symbols: {\n            SEARCH: 'fas fa-search',\n            CART: 'fas fa-shopping-cart',\n            INFO: 'fas fa-info-circle',\n            STAR: 'fas fa-star',\n            GRID: 'fas fa-th-large',\n            LIST: 'fas fa-bars',\n            CARET_DOWN: 'fas fa-angle-down',\n            CARET_RIGHT: 'fas fa-angle-right',\n            CARET_LEFT: 'fas fa-angle-left',\n            ERROR: 'fas fa-exclamation-circle',\n            WARNING: 'fas fa-exclamation-triangle',\n            SUCCESS: 'fas fa-check-circle',\n            CLOSE: 'fas fa-times',\n            VISA: 'fab fa-cc-visa',\n            MASTER_CARD: 'fab fa-cc-mastercard',\n            AMEX: 'fab fa-cc-amex',\n            DINERS_CLUB: 'fab fa-cc-diners-club',\n            CREDIT_CARD: 'fas fa-credit-card',\n            COLLAPSE: 'fas fa-minus',\n            EXPAND: 'fas fa-plus',\n            RESET: 'fas fa-times-circle',\n            CIRCLE: 'fas fa-circle',\n            HEART: 'fas fa-heart',\n            EMPTY_HEART: 'far fa-heart',\n        },\n        resources: [\n            {\n                type: IconResourceType.LINK,\n                url: 'https://use.fontawesome.com/releases/v5.8.1/css/all.css',\n            },\n        ],\n    },\n};\n\nlet IconLoaderService = class IconLoaderService {\n    constructor(winRef, iconConfig, sanitizer) {\n        this.winRef = winRef;\n        this.iconConfig = iconConfig;\n        this.sanitizer = sanitizer;\n        this.loadedResources = [];\n    }\n    /**\n     * Returns an html fragment which can be added to the DOM in a safe way.\n     */\n    getHtml(type) {\n        if (this.isResourceType(type, IconResourceType.SVG)) {\n            return this.sanitizer.bypassSecurityTrustHtml(`<svg><use xlink:href=\"${this.getSvgPath(type)}\"></use></svg>`);\n        }\n        if (this.isResourceType(type, IconResourceType.TEXT)) {\n            return this.sanitizer.bypassSecurityTrustHtml(this.getSymbol(type));\n        }\n    }\n    /**\n     *\n     * Returns the symbol class(es) for the icon type.\n     */\n    getStyleClasses(iconType) {\n        return this.getSymbol(iconType) || '';\n    }\n    /**\n     * Indicates whether the given `ICON_TYPE` is configured for\n     * the given `IconResourceType`.\n     */\n    isResourceType(iconType, resourceType) {\n        return (this.config.resources &&\n            !!this.config.resources.find(res => res.types && res.type === resourceType && res.types.includes(iconType)));\n    }\n    /**\n     * Returns the path to the svg link. The link supports path names\n     * as well, if the config a[[s been setup to support a svg file path.\n     * Additionally, the icon prefix will be taken into account to prefix the\n     * icon IDs in the SVG.\n     */\n    getSvgPath(iconType) {\n        const svgResource = this.config.resources.find(res => res.type === IconResourceType.SVG &&\n            res.types &&\n            res.types.includes(iconType));\n        if (svgResource) {\n            return svgResource.url\n                ? `${svgResource.url}#${this.getSymbol(iconType)}`\n                : `#${this.getSymbol(iconType)}`;\n        }\n    }\n    /**\n     * Loads the resource url (if any) for the given icon.\n     * The icon will only be loaded once.\n     *\n     * NOTE: this is not working when the shadow is used as there's\n     * no head element available and the link must be loaded for every\n     * web component.\n     */\n    addLinkResource(iconType) {\n        const resource = this.findResource(iconType, IconResourceType.LINK);\n        if (resource &&\n            resource.url &&\n            !this.loadedResources.includes(resource.url)) {\n            this.loadedResources.push(resource.url);\n            const head = this.winRef.document.getElementsByTagName('head')[0];\n            const link = this.winRef.document.createElement('link');\n            link.rel = 'stylesheet';\n            link.type = 'text/css';\n            link.href = resource.url;\n            head.appendChild(link);\n        }\n    }\n    findResource(iconType, resourceType) {\n        if (!this.config.resources) {\n            return;\n        }\n        let resource = this.config.resources.find(res => res.type === resourceType && res.types && res.types.includes(iconType));\n        // no specific resource found, let's try to find a one-size-fits-all resource\n        if (!resource) {\n            resource = this.config.resources.find(res => (res.type === resourceType && !res.types) || res.types === []);\n        }\n        return resource;\n    }\n    getSymbol(iconType) {\n        if (this.config && this.config.symbols && this.config.symbols[iconType]) {\n            return this.config.symbols[iconType];\n        }\n    }\n    get config() {\n        return this.iconConfig.icon;\n    }\n};\nIconLoaderService.ctorParameters = () => [\n    { type: WindowRef },\n    { type: IconConfig },\n    { type: DomSanitizer }\n];\nIconLoaderService.ɵprov = ɵɵdefineInjectable({ factory: function IconLoaderService_Factory() { return new IconLoaderService(ɵɵinject(WindowRef), ɵɵinject(IconConfig), ɵɵinject(DomSanitizer)); }, token: IconLoaderService, providedIn: \"root\" });\nIconLoaderService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], IconLoaderService);\n\n/**\n *\n * The icon component can be added in different ways:\n *\n * With the component selector:\n * `<cx-icon type=\"SEARCH\"></cx-icon>`\n *\n * With the attribute selector:\n * `<span cxIcon=\"STAR\"></span>`\n *\n * Additionally, content can be projected to the icon:\n *\n * `<button cxIcon=\"HAPPY\">happy label</button>`\n *\n * The above button would become (based on a TEXT resource type):\n * `<button>😊happy label</button>`\n * While the content is projected, the icon itself doesn't require\n * an additional DOM node which is an advantage over the component selector.\n */\nlet IconComponent = class IconComponent {\n    constructor(iconLoader, elementRef, renderer) {\n        this.iconLoader = iconLoader;\n        this.elementRef = elementRef;\n        this.renderer = renderer;\n    }\n    /**\n     * The cxIcon directive is bound to the icon type. You can feed the `ICON_TYPE` to\n     * accomplish a configurable button in the UI.\n     */\n    set cxIcon(type) {\n        this.setIcon(type);\n    }\n    /**\n     * The type input parameter is bound to the icon type. You can feed the `ICON_TYPE` to\n     * accomplish a configurable button in the UI.\n     */\n    set type(type) {\n        this.setIcon(type);\n    }\n    setIcon(type) {\n        if (!type || type === '') {\n            return;\n        }\n        this.icon = this.iconLoader.getHtml(type);\n        this.addStyleClasses(type);\n        this.iconLoader.addLinkResource(type);\n    }\n    /**\n     * Adds the style classes and the link resource (if availabe).\n     */\n    addStyleClasses(type) {\n        this.renderer.addClass(this.elementRef.nativeElement, 'cx-icon');\n        this.iconLoader\n            .getStyleClasses(type)\n            .split(' ')\n            .forEach(cls => {\n            if (cls !== '') {\n                this.renderer.addClass(this.elementRef.nativeElement, cls);\n            }\n        });\n    }\n};\nIconComponent.ctorParameters = () => [\n    { type: IconLoaderService },\n    { type: ElementRef },\n    { type: Renderer2 }\n];\n__decorate([\n    Input()\n], IconComponent.prototype, \"cxIcon\", null);\n__decorate([\n    Input()\n], IconComponent.prototype, \"type\", null);\nIconComponent = __decorate([\n    Component({\n        selector: 'cx-icon,[cxIcon]',\n        template: \"<i [outerHTML]=\\\"icon\\\"></i><ng-content></ng-content>\\n\"\n    })\n], IconComponent);\n\nlet IconModule = class IconModule {\n};\nIconModule = __decorate([\n    NgModule({\n        declarations: [IconComponent],\n        imports: [CommonModule, ConfigModule.withConfig(fontawesomeIconConfig)],\n        providers: [{ provide: IconConfig, useExisting: Config }],\n        exports: [IconComponent],\n    })\n], IconModule);\n\n/**\n * A reference to a newly opened modal\n *\n * @todo remove ngb dependency and create our own implementation of ModalRef\n */\nclass ModalRef extends NgbModalRef {\n}\n\n/**\n * A service to handle modal\n */\nlet ModalService = class ModalService {\n    constructor(ngbModalService) {\n        this.ngbModalService = ngbModalService;\n        this.modals = [];\n    }\n    open(content, options) {\n        let activeModal;\n        activeModal = this.ngbModalService.open(content, options);\n        this.modals.push(activeModal);\n        return activeModal;\n    }\n    getActiveModal() {\n        const modal = this.modals[this.modals.length - 1];\n        return modal ? modal : null;\n    }\n    dismissActiveModal(reason) {\n        const modal = this.getActiveModal();\n        if (modal) {\n            modal.dismiss(reason);\n            this.modals.pop();\n        }\n    }\n    closeActiveModal(reason) {\n        const modal = this.getActiveModal();\n        if (modal) {\n            modal.close(reason);\n            this.modals.pop();\n        }\n    }\n};\nModalService.ctorParameters = () => [\n    { type: NgbModal }\n];\nModalService.ɵprov = ɵɵdefineInjectable({ factory: function ModalService_Factory() { return new ModalService(ɵɵinject(NgbModal)); }, token: ModalService, providedIn: \"root\" });\nModalService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], ModalService);\n\nlet AnonymousConsentDialogComponent = class AnonymousConsentDialogComponent {\n    constructor(config, modalService, anonymousConsentsService) {\n        this.config = config;\n        this.modalService = modalService;\n        this.anonymousConsentsService = anonymousConsentsService;\n        this.subscriptions = new Subscription();\n        this.showLegalDescription = true;\n        this.iconTypes = ICON_TYPE;\n        this.requiredConsents = [];\n        // TODO(issue:4989) Anonymous consents - remove\n        this.isLevel13 = isFeatureLevel(this.config, '1.3');\n        if (Boolean(this.config.anonymousConsents)) {\n            this.showLegalDescription = this.config.anonymousConsents.showLegalDescriptionInDialog;\n            if (Boolean(this.config.anonymousConsents.requiredConsents)) {\n                this.requiredConsents = this.config.anonymousConsents.requiredConsents;\n            }\n        }\n    }\n    ngOnInit() {\n        this.templates$ = this.anonymousConsentsService.getTemplates();\n        this.consents$ = this.anonymousConsentsService.getConsents();\n        this.loading$ = this.anonymousConsentsService.getLoadTemplatesLoading();\n    }\n    closeModal(reason) {\n        this.modalService.closeActiveModal(reason);\n    }\n    rejectAll() {\n        this.subscriptions.add(combineLatest([this.templates$, this.consents$])\n            .pipe(take(1), distinctUntilChanged(), tap(([templates, consents]) => templates.forEach(template => {\n            const consent = this.getCorrespondingConsent(template, consents);\n            if (this.anonymousConsentsService.isConsentGiven(consent)) {\n                if (this.isRequiredConsent(template)) {\n                    return;\n                }\n                this.anonymousConsentsService.withdrawConsent(template.id);\n            }\n        })))\n            .subscribe());\n        this.closeModal('rejectAll');\n    }\n    allowAll() {\n        this.subscriptions.add(combineLatest([this.templates$, this.consents$])\n            .pipe(take(1), distinctUntilChanged(), tap(([templates, consents]) => templates.forEach(template => {\n            const consent = this.getCorrespondingConsent(template, consents);\n            if ((consent && consent.consentState == null) ||\n                this.anonymousConsentsService.isConsentWithdrawn(consent)) {\n                if (this.isRequiredConsent(template)) {\n                    return;\n                }\n                this.anonymousConsentsService.giveConsent(template.id);\n            }\n        })))\n            .subscribe());\n        this.closeModal('allowAll');\n    }\n    isRequiredConsent(template) {\n        return (Boolean(this.config.anonymousConsents) &&\n            Boolean(this.config.anonymousConsents.requiredConsents) &&\n            this.config.anonymousConsents.requiredConsents.includes(template.id));\n    }\n    onConsentChange({ given, template, }) {\n        if (given) {\n            this.anonymousConsentsService.giveConsent(template.id);\n        }\n        else {\n            this.anonymousConsentsService.withdrawConsent(template.id);\n        }\n    }\n    getCorrespondingConsent(template, consents = []) {\n        for (const consent of consents) {\n            if (template.id === consent.templateCode) {\n                return consent;\n            }\n        }\n        return null;\n    }\n    ngOnDestroy() {\n        this.subscriptions.unsubscribe();\n    }\n};\nAnonymousConsentDialogComponent.ctorParameters = () => [\n    { type: AnonymousConsentsConfig },\n    { type: ModalService },\n    { type: AnonymousConsentsService }\n];\nAnonymousConsentDialogComponent = __decorate([\n    Component({\n        selector: 'cx-anonymous-consent-dialog',\n        template: \"<div #dialog>\\n  <div *ngIf=\\\"loading$ | async; else dialogBody\\\">\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </div>\\n\\n  <!-- Modal Header -->\\n  <ng-template #dialogBody>\\n    <div class=\\\"cx-dialog-header modal-header\\\">\\n      <div class=\\\"cx-dialog-title modal-title\\\">\\n        {{ 'anonymousConsents.dialog.title' | cxTranslate }}\\n      </div>\\n      <button\\n        type=\\\"button\\\"\\n        class=\\\"close\\\"\\n        aria-label=\\\"Close\\\"\\n        (click)=\\\"closeModal('Cross click')\\\"\\n      >\\n        <span aria-hidden=\\\"true\\\">\\n          <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n        </span>\\n      </button>\\n    </div>\\n    <!-- Separator -->\\n    <div\\n      class=\\\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\\\"\\n    ></div>\\n    <div class=\\\"cx-dialog-description\\\" *ngIf=\\\"showLegalDescription\\\">\\n      {{ 'anonymousConsents.dialog.legalDescription' | cxTranslate }}\\n      <div\\n        class=\\\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\\\"\\n      ></div>\\n    </div>\\n    <!-- Actions -->\\n    <div class=\\\"cx-dialog-buttons\\\">\\n      <a tabindex=\\\"0\\\" class=\\\"btn-link cx-action-link\\\" (click)=\\\"rejectAll()\\\">{{\\n        'anonymousConsents.dialog.clearAll' | cxTranslate\\n      }}</a>\\n      <a tabindex=\\\"0\\\" class=\\\"btn-link cx-action-link\\\" (click)=\\\"allowAll()\\\">{{\\n        'anonymousConsents.dialog.selectAll' | cxTranslate\\n      }}</a>\\n    </div>\\n    <!-- Modal Body -->\\n    <div\\n      class=\\\"cx-dialog-body modal-body\\\"\\n      *ngIf=\\\"templates$ | async as templates\\\"\\n    >\\n      <div *ngIf=\\\"consents$ | async as consents\\\">\\n        <div\\n          class=\\\"cx-dialog-row col-sm-12 col-md-6\\\"\\n          *ngFor=\\\"let template of templates\\\"\\n        >\\n          <cx-consent-management-form\\n            [consentTemplate]=\\\"template\\\"\\n            [requiredConsents]=\\\"requiredConsents\\\"\\n            [consent]=\\\"getCorrespondingConsent(template, consents)\\\"\\n            [isAnonymousConsentsEnabled]=\\\"true\\\"\\n            [isLevel13]=\\\"isLevel13\\\"\\n            (consentChanged)=\\\"onConsentChange($event)\\\"\\n          ></cx-consent-management-form>\\n        </div>\\n      </div>\\n    </div>\\n  </ng-template>\\n</div>\\n\"\n    })\n], AnonymousConsentDialogComponent);\n\nlet AnonymousConsentManagementBannerComponent = class AnonymousConsentManagementBannerComponent {\n    constructor(modalService, anonymousConsentsService) {\n        this.modalService = modalService;\n        this.anonymousConsentsService = anonymousConsentsService;\n        this.subscriptions = new Subscription();\n        this.bannerVisible$ = this.anonymousConsentsService.isBannerVisible();\n    }\n    viewDetails() {\n        this.hideBanner();\n        this.modalService.open(AnonymousConsentDialogComponent, {\n            centered: true,\n            size: 'lg',\n        });\n    }\n    allowAll() {\n        this.subscriptions.add(this.anonymousConsentsService\n            .giveAllConsents()\n            .pipe(tap(_ => this.hideBanner()))\n            .subscribe());\n    }\n    hideBanner() {\n        this.anonymousConsentsService.toggleBannerDismissed(true);\n    }\n    ngOnDestroy() {\n        this.subscriptions.unsubscribe();\n    }\n};\nAnonymousConsentManagementBannerComponent.ctorParameters = () => [\n    { type: ModalService },\n    { type: AnonymousConsentsService }\n];\nAnonymousConsentManagementBannerComponent = __decorate([\n    Component({\n        selector: 'cx-anonymous-consent-management-banner',\n        template: \"<ng-container *ngIf=\\\"bannerVisible$ | async as bannerVisible\\\">\\n  <div\\n    [ngClass]=\\\"{ 'anonymous-consent-banner-hidden': !bannerVisible }\\\"\\n    class=\\\"anonymous-consent-banner\\\"\\n  >\\n    <div class=\\\"container\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-8 col-xs-12\\\">\\n          <div class=\\\"cx-banner-title\\\">\\n            {{ 'anonymousConsents.banner.title' | cxTranslate }}\\n          </div>\\n          <div class=\\\"cx-banner-description\\\">\\n            {{ 'anonymousConsents.banner.description' | cxTranslate }}\\n          </div>\\n        </div>\\n\\n        <div class=\\\"col-lg-4 col-xs-12 cx-banner-buttons\\\">\\n          <button class=\\\"btn btn-action\\\" (click)=\\\"viewDetails()\\\">\\n            {{ 'anonymousConsents.banner.viewDetails' | cxTranslate }}\\n          </button>\\n          <button class=\\\"btn btn-primary\\\" (click)=\\\"allowAll()\\\">\\n            {{ 'anonymousConsents.banner.allowAll' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], AnonymousConsentManagementBannerComponent);\n\nlet AnonymousConsentOpenDialogComponent = class AnonymousConsentOpenDialogComponent {\n    constructor(modalService) {\n        this.modalService = modalService;\n    }\n    openDialog() {\n        this.modalService.open(AnonymousConsentDialogComponent, {\n            centered: true,\n            size: 'lg',\n        });\n    }\n};\nAnonymousConsentOpenDialogComponent.ctorParameters = () => [\n    { type: ModalService }\n];\nAnonymousConsentOpenDialogComponent = __decorate([\n    Component({\n        selector: 'cx-anonymous-consent-open-dialog',\n        template: \"<div class=\\\"anonymous-consents\\\">\\n  <button class=\\\"btn btn-link\\\" (click)=\\\"openDialog()\\\">\\n    {{ 'anonymousConsents.preferences' | cxTranslate }}\\n  </button>\\n</div>\\n\"\n    })\n], AnonymousConsentOpenDialogComponent);\n\nlet AnonymousConsentManagementBannerModule = class AnonymousConsentManagementBannerModule {\n};\nAnonymousConsentManagementBannerModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            I18nModule,\n            FeaturesConfigModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    AnonymousConsentManagementBannerComponent: {\n                        component: AnonymousConsentManagementBannerComponent,\n                        deferLoading: DeferLoadingStrategy.INSTANT,\n                    },\n                    AnonymousConsentOpenDialogComponent: {\n                        component: AnonymousConsentOpenDialogComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [\n            AnonymousConsentManagementBannerComponent,\n            AnonymousConsentOpenDialogComponent,\n        ],\n        exports: [\n            AnonymousConsentManagementBannerComponent,\n            AnonymousConsentOpenDialogComponent,\n        ],\n        entryComponents: [\n            AnonymousConsentManagementBannerComponent,\n            AnonymousConsentOpenDialogComponent,\n        ],\n    })\n], AnonymousConsentManagementBannerModule);\n\nclass CmsComponentData {\n}\n\nlet ComponentMapperService = class ComponentMapperService {\n    constructor(componentFactoryResolver, config, document, platform) {\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.config = config;\n        this.document = document;\n        this.platform = platform;\n        this.missingComponents = [];\n        this.loadedWebComponents = {};\n    }\n    /**\n     * @desc\n     * returns a web component for the CMS typecode.\n     *\n     * The mapping of CMS components to web componetns requires a mapping.\n     * This is configurable when the module is loaded.\n     *\n     * For example:\n     *\n     *  {\n     *      'CMSLinkComponent': 'LinkComponent',\n     *      'SimpleResponsiveBannerComponent': 'SimpleResponsiveBannerComponent',\n     *      [etc.]\n     *  }\n     *\n     * The type codes are dynamic since they depend on the implementation.\n     * Customer will add, extend or ingore standard components.\n     *\n     * @param typeCode the component type\n     */\n    getComponent(typeCode) {\n        const componentConfig = this.config.cmsComponents[typeCode];\n        if (!componentConfig) {\n            if (!this.missingComponents.includes(typeCode)) {\n                this.missingComponents.push(typeCode);\n                console.warn(`No component implementation found for the CMS component type '${typeCode}'.\\n`, `Make sure you implement a component and register it in the mapper.`);\n            }\n        }\n        return componentConfig ? componentConfig.component : null;\n    }\n    getComponentFactoryByCode(typeCode) {\n        const component = this.getComponent(typeCode);\n        if (!component) {\n            return null;\n        }\n        const factory = this.componentFactoryResolver.resolveComponentFactory(component);\n        if (!factory) {\n            console.warn(`No component factory found for the CMS component type '${typeCode}'.\\n`, `Make sure you add a component to the 'entryComponents' array in the NgModule.`);\n            return null;\n        }\n        return factory;\n    }\n    isWebComponent(typeCode) {\n        const component = this.getComponent(typeCode);\n        return typeof component === 'string' && (component || '').includes('#');\n    }\n    initWebComponent(componentType, renderer) {\n        return new Promise(resolve => {\n            const [path, selector] = this.getComponent(componentType).split('#');\n            let script = this.loadedWebComponents[path];\n            if (!script) {\n                if (path) {\n                    script = renderer.createElement('script');\n                    this.loadedWebComponents[path] = script;\n                    script.setAttribute('src', path);\n                    renderer.appendChild(this.document.body, script);\n                    if (isPlatformBrowser(this.platform)) {\n                        script.onload = () => {\n                            script.onload = null;\n                        };\n                    }\n                }\n                else {\n                    script = {};\n                }\n            }\n            if (script.onload) {\n                // If script is still loading (has onload callback defined)\n                // add new callback and chain it with the existing one.\n                // Needed to support loading multiple components from one script\n                const chainedOnload = script.onload;\n                script.onload = () => {\n                    chainedOnload();\n                    resolve(selector);\n                };\n            }\n            else {\n                resolve(selector);\n            }\n        });\n    }\n};\nComponentMapperService.ctorParameters = () => [\n    { type: ComponentFactoryResolver },\n    { type: CmsConfig },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: undefined, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }\n];\nComponentMapperService.ɵprov = ɵɵdefineInjectable({ factory: function ComponentMapperService_Factory() { return new ComponentMapperService(ɵɵinject(ComponentFactoryResolver), ɵɵinject(CmsConfig), ɵɵinject(DOCUMENT), ɵɵinject(PLATFORM_ID)); }, token: ComponentMapperService, providedIn: \"root\" });\nComponentMapperService = __decorate([\n    Injectable({ providedIn: 'root' }),\n    __param(2, Inject(DOCUMENT)),\n    __param(3, Inject(PLATFORM_ID))\n], ComponentMapperService);\n\nlet CxApiService = class CxApiService {\n    constructor(\n    // auth\n    auth, \n    // cart\n    cart, cartData, \n    // checkout\n    checkout, checkoutDelivery, checkoutPayment, \n    // cms\n    cms, pageMeta, \n    // features config\n    featureConfig, \n    // global message\n    globalMessage, \n    // i18n\n    translation, \n    // kyma\n    kyma, \n    // occ\n    occEndpoints, \n    // product\n    product, productSearch, productReview, productReference, searchbox, \n    // routing\n    routing, \n    // site context\n    currency, language, baseSite, \n    // user\n    user, userAddress, userConsent, userOrder, userPayment, userNotificationPreferenceService, userInterestsService, selectiveCartService, \n    // framework\n    ngZone) {\n        this.auth = auth;\n        this.cart = cart;\n        this.cartData = cartData;\n        this.checkout = checkout;\n        this.checkoutDelivery = checkoutDelivery;\n        this.checkoutPayment = checkoutPayment;\n        this.cms = cms;\n        this.pageMeta = pageMeta;\n        this.featureConfig = featureConfig;\n        this.globalMessage = globalMessage;\n        this.translation = translation;\n        this.kyma = kyma;\n        this.occEndpoints = occEndpoints;\n        this.product = product;\n        this.productSearch = productSearch;\n        this.productReview = productReview;\n        this.productReference = productReference;\n        this.searchbox = searchbox;\n        this.routing = routing;\n        this.currency = currency;\n        this.language = language;\n        this.baseSite = baseSite;\n        this.user = user;\n        this.userAddress = userAddress;\n        this.userConsent = userConsent;\n        this.userOrder = userOrder;\n        this.userPayment = userPayment;\n        this.userNotificationPreferenceService = userNotificationPreferenceService;\n        this.userInterestsService = userInterestsService;\n        this.selectiveCartService = selectiveCartService;\n        this.ngZone = ngZone;\n    }\n};\nCxApiService.ctorParameters = () => [\n    { type: AuthService, decorators: [{ type: Optional }] },\n    { type: CartService, decorators: [{ type: Optional }] },\n    { type: CartDataService, decorators: [{ type: Optional }] },\n    { type: CheckoutService, decorators: [{ type: Optional }] },\n    { type: CheckoutDeliveryService, decorators: [{ type: Optional }] },\n    { type: CheckoutPaymentService, decorators: [{ type: Optional }] },\n    { type: CmsService, decorators: [{ type: Optional }] },\n    { type: PageMetaService, decorators: [{ type: Optional }] },\n    { type: FeatureConfigService, decorators: [{ type: Optional }] },\n    { type: GlobalMessageService, decorators: [{ type: Optional }] },\n    { type: TranslationService, decorators: [{ type: Optional }] },\n    { type: KymaService, decorators: [{ type: Optional }] },\n    { type: OccEndpointsService, decorators: [{ type: Optional }] },\n    { type: ProductService, decorators: [{ type: Optional }] },\n    { type: ProductSearchService, decorators: [{ type: Optional }] },\n    { type: ProductReviewService, decorators: [{ type: Optional }] },\n    { type: ProductReferenceService, decorators: [{ type: Optional }] },\n    { type: SearchboxService, decorators: [{ type: Optional }] },\n    { type: RoutingService, decorators: [{ type: Optional }] },\n    { type: CurrencyService, decorators: [{ type: Optional }] },\n    { type: LanguageService, decorators: [{ type: Optional }] },\n    { type: BaseSiteService, decorators: [{ type: Optional }] },\n    { type: UserService, decorators: [{ type: Optional }] },\n    { type: UserAddressService, decorators: [{ type: Optional }] },\n    { type: UserConsentService, decorators: [{ type: Optional }] },\n    { type: UserOrderService, decorators: [{ type: Optional }] },\n    { type: UserPaymentService, decorators: [{ type: Optional }] },\n    { type: UserNotificationPreferenceService, decorators: [{ type: Optional }] },\n    { type: UserInterestsService, decorators: [{ type: Optional }] },\n    { type: SelectiveCartService, decorators: [{ type: Optional }] },\n    { type: NgZone }\n];\nCxApiService.ɵprov = ɵɵdefineInjectable({ factory: function CxApiService_Factory() { return new CxApiService(ɵɵinject(AuthService, 8), ɵɵinject(CartService, 8), ɵɵinject(CartDataService, 8), ɵɵinject(CheckoutService, 8), ɵɵinject(CheckoutDeliveryService, 8), ɵɵinject(CheckoutPaymentService, 8), ɵɵinject(CmsService, 8), ɵɵinject(PageMetaService, 8), ɵɵinject(FeatureConfigService, 8), ɵɵinject(GlobalMessageService, 8), ɵɵinject(TranslationService, 8), ɵɵinject(KymaService, 8), ɵɵinject(OccEndpointsService, 8), ɵɵinject(ProductService, 8), ɵɵinject(ProductSearchService, 8), ɵɵinject(ProductReviewService, 8), ɵɵinject(ProductReferenceService, 8), ɵɵinject(SearchboxService, 8), ɵɵinject(RoutingService, 8), ɵɵinject(CurrencyService, 8), ɵɵinject(LanguageService, 8), ɵɵinject(BaseSiteService, 8), ɵɵinject(UserService, 8), ɵɵinject(UserAddressService, 8), ɵɵinject(UserConsentService, 8), ɵɵinject(UserOrderService, 8), ɵɵinject(UserPaymentService, 8), ɵɵinject(UserNotificationPreferenceService, 8), ɵɵinject(UserInterestsService, 8), ɵɵinject(SelectiveCartService, 8), ɵɵinject(NgZone)); }, token: CxApiService, providedIn: \"root\" });\nCxApiService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    }),\n    __param(0, Optional()),\n    __param(1, Optional()),\n    __param(2, Optional()),\n    __param(3, Optional()),\n    __param(4, Optional()),\n    __param(5, Optional()),\n    __param(6, Optional()),\n    __param(7, Optional()),\n    __param(8, Optional()),\n    __param(9, Optional()),\n    __param(10, Optional()),\n    __param(11, Optional()),\n    __param(12, Optional()),\n    __param(13, Optional()),\n    __param(14, Optional()),\n    __param(15, Optional()),\n    __param(16, Optional()),\n    __param(17, Optional()),\n    __param(18, Optional()),\n    __param(19, Optional()),\n    __param(20, Optional()),\n    __param(21, Optional()),\n    __param(22, Optional()),\n    __param(23, Optional()),\n    __param(24, Optional()),\n    __param(25, Optional()),\n    __param(26, Optional()),\n    __param(27, Optional()),\n    __param(28, Optional()),\n    __param(29, Optional())\n], CxApiService);\n\nlet ComponentWrapperDirective = class ComponentWrapperDirective {\n    constructor(vcr, componentMapper, injector, cmsService, dynamicAttributeService, renderer, config, platformId) {\n        this.vcr = vcr;\n        this.componentMapper = componentMapper;\n        this.injector = injector;\n        this.cmsService = cmsService;\n        this.dynamicAttributeService = dynamicAttributeService;\n        this.renderer = renderer;\n        this.config = config;\n        this.platformId = platformId;\n    }\n    ngOnInit() {\n        if (!this.shouldRenderComponent()) {\n            return;\n        }\n        if (this.componentMapper.isWebComponent(this.cxComponentWrapper.flexType)) {\n            this.launchWebComponent();\n        }\n        else {\n            this.launchComponent();\n        }\n    }\n    shouldRenderComponent() {\n        const isSSR = isPlatformServer(this.platformId);\n        const isComponentDisabledInSSR = (this.config.cmsComponents[this.cxComponentWrapper.flexType] || {}).disableSSR;\n        return !(isSSR && isComponentDisabledInSSR);\n    }\n    launchComponent() {\n        const factory = this.componentMapper.getComponentFactoryByCode(this.cxComponentWrapper.flexType);\n        if (factory) {\n            this.cmpRef = this.vcr.createComponent(factory, undefined, this.getInjectorForComponent());\n            if (this.cmsService.isLaunchInSmartEdit()) {\n                this.addSmartEditContract(this.cmpRef.location.nativeElement);\n            }\n        }\n    }\n    launchWebComponent() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const elementName = yield this.componentMapper.initWebComponent(this.cxComponentWrapper.flexType, this.renderer);\n            if (elementName) {\n                this.webElement = this.renderer.createElement(elementName);\n                const cmsComponentData = this.getCmsDataForComponent();\n                this.webElement.cxApi = Object.assign(Object.assign({}, this.injector.get(CxApiService)), { CmsComponentData: cmsComponentData, // TODO: remove / deprecated since 1.0.x\n                    cmsComponentData });\n                this.renderer.appendChild(this.vcr.element.nativeElement.parentElement, this.webElement);\n                if (this.cmsService.isLaunchInSmartEdit()) {\n                    this.addSmartEditContract(this.webElement);\n                }\n            }\n        });\n    }\n    getCmsDataForComponent() {\n        return {\n            uid: this.cxComponentWrapper.uid,\n            data$: this.cmsService.getComponentData(this.cxComponentWrapper.uid),\n        };\n    }\n    getInjectorForComponent() {\n        const configProviders = (this.config.cmsComponents[this.cxComponentWrapper.flexType] || {})\n            .providers || [];\n        return Injector.create({\n            providers: [\n                {\n                    provide: CmsComponentData,\n                    useValue: this.getCmsDataForComponent(),\n                },\n                ...configProviders,\n            ],\n            parent: this.injector,\n        });\n    }\n    addSmartEditContract(element) {\n        this.dynamicAttributeService.addDynamicAttributes(this.cxComponentWrapper.properties, element, this.renderer);\n    }\n    ngOnDestroy() {\n        if (this.cmpRef) {\n            this.cmpRef.destroy();\n        }\n        if (this.webElement) {\n            this.webElement.remove();\n        }\n    }\n};\nComponentWrapperDirective.ctorParameters = () => [\n    { type: ViewContainerRef },\n    { type: ComponentMapperService },\n    { type: Injector },\n    { type: CmsService },\n    { type: DynamicAttributeService },\n    { type: Renderer2 },\n    { type: CmsConfig },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }\n];\n__decorate([\n    Input()\n], ComponentWrapperDirective.prototype, \"cxComponentWrapper\", void 0);\nComponentWrapperDirective = __decorate([\n    Directive({\n        selector: '[cxComponentWrapper]',\n    }),\n    __param(7, Inject(PLATFORM_ID))\n], ComponentWrapperDirective);\n\nlet PageComponentModule = class PageComponentModule {\n};\nPageComponentModule = __decorate([\n    NgModule({\n        imports: [CommonModule],\n        providers: [],\n        declarations: [ComponentWrapperDirective],\n        exports: [ComponentWrapperDirective],\n    })\n], PageComponentModule);\n\n/**\n * Please don't put that service in public API.\n * */\nlet CmsMappingService = class CmsMappingService {\n    constructor(config, platformId) {\n        this.config = config;\n        this.platformId = platformId;\n    }\n    isComponentEnabled(flexType) {\n        const isSSR = isPlatformServer(this.platformId);\n        const isComponentDisabledInSSR = (this.config.cmsComponents[flexType] || {})\n            .disableSSR;\n        return !(isSSR && isComponentDisabledInSSR);\n    }\n    getRoutesForComponents(componentTypes) {\n        const routes = [];\n        for (const componentType of componentTypes) {\n            if (this.isComponentEnabled(componentType)) {\n                routes.push(...this.getRoutesForComponent(componentType));\n            }\n        }\n        return routes;\n    }\n    getGuardsForComponents(componentTypes) {\n        const guards = new Set();\n        for (const componentType of componentTypes) {\n            this.getGuardsForComponent(componentType).forEach(guard => guards.add(guard));\n        }\n        return Array.from(guards);\n    }\n    getI18nKeysForComponents(componentTypes) {\n        const i18nKeys = new Set();\n        for (const componentType of componentTypes) {\n            if (this.isComponentEnabled(componentType)) {\n                this.getI18nKeysForComponent(componentType).forEach(key => i18nKeys.add(key));\n            }\n        }\n        return Array.from(i18nKeys);\n    }\n    getRoutesForComponent(componentType) {\n        const mappingConfig = this.config.cmsComponents[componentType];\n        return (mappingConfig && mappingConfig.childRoutes) || [];\n    }\n    getGuardsForComponent(componentType) {\n        const mappingConfig = this.config.cmsComponents[componentType];\n        return (mappingConfig && mappingConfig.guards) || [];\n    }\n    getI18nKeysForComponent(componentType) {\n        const mappingConfig = this.config.cmsComponents[componentType];\n        return (mappingConfig && mappingConfig.i18nKeys) || [];\n    }\n};\nCmsMappingService.ctorParameters = () => [\n    { type: CmsConfig },\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] }\n];\nCmsMappingService.ɵprov = ɵɵdefineInjectable({ factory: function CmsMappingService_Factory() { return new CmsMappingService(ɵɵinject(CmsConfig), ɵɵinject(PLATFORM_ID)); }, token: CmsMappingService, providedIn: \"root\" });\nCmsMappingService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    }),\n    __param(1, Inject(PLATFORM_ID))\n], CmsMappingService);\n\n/**\n * Please don't put that service in public API.\n * */\nlet CmsGuardsService = class CmsGuardsService {\n    constructor(cmsMapping, injector) {\n        this.cmsMapping = cmsMapping;\n        this.injector = injector;\n    }\n    cmsPageCanActivate(componentTypes, route, state) {\n        const guards = this.cmsMapping.getGuardsForComponents(componentTypes);\n        if (guards.length) {\n            const canActivateObservables = guards.map(guardClass => {\n                const guard = this.injector.get(guardClass, null);\n                if (isCanActivate(guard)) {\n                    return wrapIntoObservable(guard.canActivate(route, state)).pipe(first());\n                }\n                else {\n                    throw new Error('Invalid CanActivate guard in cmsMapping');\n                }\n            });\n            return concat(...canActivateObservables).pipe(skipWhile((canActivate) => canActivate === true), endWith(true), first());\n        }\n        else {\n            return of(true);\n        }\n    }\n};\nCmsGuardsService.ctorParameters = () => [\n    { type: CmsMappingService },\n    { type: Injector }\n];\nCmsGuardsService.ɵprov = ɵɵdefineInjectable({ factory: function CmsGuardsService_Factory() { return new CmsGuardsService(ɵɵinject(CmsMappingService), ɵɵinject(INJECTOR)); }, token: CmsGuardsService, providedIn: \"root\" });\nCmsGuardsService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CmsGuardsService);\nfunction wrapIntoObservable(value) {\n    if (isObservable(value)) {\n        return value;\n    }\n    if (isPromise(value)) {\n        return from(Promise.resolve(value));\n    }\n    return of(value);\n}\nfunction isPromise(obj) {\n    return !!obj && typeof obj.then === 'function';\n}\nfunction isCanActivate(guard) {\n    return guard && isFunction(guard.canActivate);\n}\nfunction isFunction(v) {\n    return typeof v === 'function';\n}\n\n/**\n * Please don't put that service in public API.\n * */\nlet CmsI18nService = class CmsI18nService {\n    constructor(cmsMapping, translation, translationChunk) {\n        this.cmsMapping = cmsMapping;\n        this.translation = translation;\n        this.translationChunk = translationChunk;\n    }\n    loadChunksForComponents(componentTypes) {\n        const i18nKeys = this.cmsMapping.getI18nKeysForComponents(componentTypes);\n        const i18nChunks = new Set();\n        for (const key of i18nKeys) {\n            i18nChunks.add(this.translationChunk.getChunkNameForKey(key));\n        }\n        this.translation.loadChunks(Array.from(i18nChunks));\n    }\n};\nCmsI18nService.ctorParameters = () => [\n    { type: CmsMappingService },\n    { type: TranslationService },\n    { type: TranslationChunkService }\n];\nCmsI18nService.ɵprov = ɵɵdefineInjectable({ factory: function CmsI18nService_Factory() { return new CmsI18nService(ɵɵinject(CmsMappingService), ɵɵinject(TranslationService), ɵɵinject(TranslationChunkService)); }, token: CmsI18nService, providedIn: \"root\" });\nCmsI18nService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CmsI18nService);\n\nvar BREAKPOINT;\n(function (BREAKPOINT) {\n    BREAKPOINT[\"xs\"] = \"xs\";\n    BREAKPOINT[\"sm\"] = \"sm\";\n    BREAKPOINT[\"md\"] = \"md\";\n    BREAKPOINT[\"lg\"] = \"lg\";\n    BREAKPOINT[\"xl\"] = \"xl\";\n})(BREAKPOINT || (BREAKPOINT = {}));\n/**\n * The LayoutConfig supports the configuration of page slots by page templates\n * or page sections, such as headers and footers. The configuration also supports\n * adaptive design per breadpoint (not per device type), so that the DOM is (re)rendered\n * por a given breakpoint.\n */\nclass LayoutConfig {\n}\n\nconst DEFAULT_BREAKPOINTS = {\n    [BREAKPOINT.xs]: 576,\n    [BREAKPOINT.sm]: 768,\n    [BREAKPOINT.md]: 992,\n    [BREAKPOINT.lg]: 1200,\n};\nlet BreakpointService = class BreakpointService {\n    constructor(winRef, config) {\n        this.winRef = winRef;\n        this.config = config;\n    }\n    getSize(breakpoint) {\n        return this.config.breakpoints\n            ? this.config.breakpoints[breakpoint]\n            : DEFAULT_BREAKPOINTS[breakpoint];\n    }\n    get breakpoint$() {\n        if (!this.window) {\n            return of(BREAKPOINT.xs);\n        }\n        return fromEvent(this.window, 'resize').pipe(debounceTime(300), startWith({ target: this.window }), map(event => this.getBreakpoint(event.target.innerWidth)), distinctUntilChanged());\n    }\n    get breakpoints() {\n        return [\n            BREAKPOINT.xs,\n            BREAKPOINT.sm,\n            BREAKPOINT.md,\n            BREAKPOINT.lg,\n            BREAKPOINT.xl,\n        ];\n    }\n    getBreakpoint(windowWidth) {\n        const breakpoint = this.getClosest(windowWidth);\n        return BREAKPOINT[breakpoint || BREAKPOINT.lg];\n    }\n    getClosest(windowWidth) {\n        if (!windowWidth) {\n            windowWidth = this.window.innerWidth;\n        }\n        return windowWidth < this.getSize(BREAKPOINT.xs)\n            ? BREAKPOINT.xs\n            : this.breakpoints.reverse().find(br => windowWidth >= this.getSize(br));\n    }\n    get window() {\n        return this.winRef.nativeWindow;\n    }\n};\nBreakpointService.ctorParameters = () => [\n    { type: WindowRef },\n    { type: LayoutConfig }\n];\nBreakpointService.ɵprov = ɵɵdefineInjectable({ factory: function BreakpointService_Factory() { return new BreakpointService(ɵɵinject(WindowRef), ɵɵinject(LayoutConfig)); }, token: BreakpointService, providedIn: \"root\" });\nBreakpointService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], BreakpointService);\n\nconst PAGE_LAYOUT_HANDLER = new InjectionToken('PageLayoutHandler');\n\nlet PageLayoutService = class PageLayoutService {\n    constructor(cms, config, breakpointService, handlers) {\n        this.cms = cms;\n        this.config = config;\n        this.breakpointService = breakpointService;\n        this.handlers = handlers;\n        // Prints warn messages for missing layout configs.\n        // The warnings are only printed once per config\n        // to not pollute the console log.\n        this.warnLogMessages = {};\n        this.logSlots = {};\n    }\n    getSlots(section) {\n        return combineLatest([this.page$, this.breakpointService.breakpoint$]).pipe(map(([page, breakpoint]) => {\n            const pageTemplate = page.template;\n            const slots = this.resolveSlots(page, section, breakpoint);\n            return { slots, pageTemplate, breakpoint };\n        }), switchMap(({ slots, pageTemplate, breakpoint }) => {\n            let result = of(slots);\n            for (const handler of this.handlers || []) {\n                result = handler.handle(result, pageTemplate, section, breakpoint);\n            }\n            return result;\n        }), distinctUntilChanged((a, b) => {\n            if (a.length !== b.length) {\n                return false;\n            }\n            for (let i = 0; i < a.length; i++) {\n                if (a[i] !== b[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }));\n    }\n    /**\n     * Returns an observable with the last page slot above-the-fold\n     * for the given pageTemplate / breakpoint.\n     *\n     * The page fold is configurable in the `LayoutConfig` for each page layout.\n     */\n    getPageFoldSlot(pageTemplate) {\n        return this.breakpointService.breakpoint$.pipe(map(breakpoint => {\n            if (!this.config.layoutSlots) {\n                // no layout config available\n                return null;\n            }\n            const pageTemplateConfig = this.config.layoutSlots[pageTemplate];\n            const config = this.getResponsiveSlotConfig(pageTemplateConfig, 'pageFold', breakpoint);\n            return config ? config.pageFold : null;\n        }));\n    }\n    resolveSlots(page, section, breakpoint) {\n        const config = this.getSlotConfig(page.template, 'slots', section, breakpoint);\n        if (config && config.slots) {\n            const pageSlots = Object.keys(page.slots);\n            return config.slots.filter(slot => pageSlots.includes(slot));\n        }\n        else if (!section) {\n            this.logMissingLayoutConfig(page);\n            return Object.keys(page.slots);\n        }\n        else {\n            this.logMissingLayoutConfig(page, section);\n            return [];\n        }\n    }\n    get page$() {\n        return this.cms.getCurrentPage().pipe(filter(page => !!page));\n    }\n    get templateName$() {\n        return this.page$.pipe(filter(page => !!page.template), map((page) => page.template));\n    }\n    /**\n     * load slots from the layout configuration. The breakpoint is used\n     * to load a specific configuration for the given breakpoint. If there's\n     * no configuration available for the given breakpoint the default slot\n     * configuration is returned.\n     */\n    getSlotConfig(templateUid, configAttribute, section, breakpoint) {\n        if (!this.config.layoutSlots) {\n            return null;\n        }\n        const pageTemplateConfig = this.config.layoutSlots[templateUid];\n        if (section) {\n            return this.getSlotConfigForSection(templateUid, configAttribute, section, breakpoint);\n        }\n        if (pageTemplateConfig) {\n            return this.getResponsiveSlotConfig(pageTemplateConfig, configAttribute, breakpoint);\n        }\n    }\n    getSlotConfigForSection(templateUid, configAttribute, section, breakpoint) {\n        const pageTemplateConfig = this.config.layoutSlots[templateUid];\n        if (!pageTemplateConfig) {\n            return null;\n        }\n        // if there's no section config on the page layout\n        // we fall back to the global section config\n        const sectionConfig = pageTemplateConfig[section]\n            ? pageTemplateConfig[section]\n            : this.config.layoutSlots[section];\n        if (!sectionConfig) {\n            return null;\n        }\n        const responsiveConfig = this.getResponsiveSlotConfig(sectionConfig, configAttribute, breakpoint);\n        if (responsiveConfig.hasOwnProperty(configAttribute)) {\n            return responsiveConfig;\n        }\n        else if (pageTemplateConfig[section].hasOwnProperty(configAttribute)) {\n            return pageTemplateConfig[section];\n        }\n        else if (this.config.layoutSlots[section]) {\n            return this.config.layoutSlots[section];\n        }\n    }\n    /**\n     * Returns a list of slots for a breakpoint specific configuratoin\n     * If there's no specific configuration for the breakpoint,\n     * the closest available configuration will be returned.\n     */\n    getResponsiveSlotConfig(layoutSlotConfig, configAttribute, breakpoint) {\n        let slotConfig = layoutSlotConfig;\n        // fallback to default slot config\n        if (!layoutSlotConfig || !breakpoint) {\n            return slotConfig;\n        }\n        // we have a config for the specific breakpoint\n        if (layoutSlotConfig[breakpoint] &&\n            layoutSlotConfig[breakpoint].hasOwnProperty(configAttribute)) {\n            return layoutSlotConfig[breakpoint];\n        }\n        // find closest config\n        const all = this.breakpointService.breakpoints;\n        for (const br of all.splice(0, all.indexOf(breakpoint))) {\n            if (layoutSlotConfig[br] &&\n                layoutSlotConfig[br].hasOwnProperty(configAttribute)) {\n                slotConfig = layoutSlotConfig[br];\n            }\n        }\n        return slotConfig;\n    }\n    /**\n     * In order to help developers, we print some detailed log information in\n     * case there's no layout configuration available for the given page template\n     * or section. Additionally, the slot positions are printed in the console\n     * in a format that can be copied / paste to the configuration.\n     */\n    logMissingLayoutConfig(page, section) {\n        if (!isDevMode()) {\n            return;\n        }\n        if (!this.logSlots[page.template]) {\n            // the info log is not printed in production\n            // tslint:disable-next-line: no-console\n            console.info(`Available CMS page slots: '${Object.keys(page.slots).join(`','`)}'`);\n            this.logSlots[page.template] = true;\n        }\n        const cacheKey = section || page.template;\n        if (!this.warnLogMessages[cacheKey]) {\n            console.warn(`No layout config found for ${cacheKey}, you can configure a 'LayoutConfig' to control the rendering of page slots.`);\n            this.warnLogMessages[cacheKey] = true;\n        }\n    }\n};\nPageLayoutService.ctorParameters = () => [\n    { type: CmsService },\n    { type: LayoutConfig },\n    { type: BreakpointService },\n    { type: Array, decorators: [{ type: Optional }, { type: Inject, args: [PAGE_LAYOUT_HANDLER,] }] }\n];\nPageLayoutService = __decorate([\n    Injectable(),\n    __param(3, Optional()),\n    __param(3, Inject(PAGE_LAYOUT_HANDLER))\n], PageLayoutService);\n\nlet PageLayoutComponent = class PageLayoutComponent {\n    constructor(el, renderer, pageLayoutService) {\n        this.el = el;\n        this.renderer = renderer;\n        this.pageLayoutService = pageLayoutService;\n        this.section$ = new BehaviorSubject(undefined);\n        this.templateName$ = this.pageLayoutService\n            .templateName$;\n        this.layoutName$ = this.section$.pipe(switchMap(section => (section ? of(section) : this.templateName$)), tap(name => {\n            this.styleClass = name;\n        }));\n        this.slots$ = this.section$.pipe(switchMap(section => this.pageLayoutService.getSlots(section)));\n        this.pageFoldSlot$ = this.templateName$.pipe(switchMap(templateName => this.pageLayoutService.getPageFoldSlot(templateName)), distinctUntilChanged());\n    }\n    set section(value) {\n        this.section$.next(value);\n    }\n    set styleClass(cls) {\n        if (this.currentClass) {\n            this.renderer.removeClass(this.el.nativeElement, this.currentClass);\n        }\n        this.renderer.addClass(this.el.nativeElement, cls);\n        this.currentClass = cls;\n    }\n};\nPageLayoutComponent.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 },\n    { type: PageLayoutService }\n];\n__decorate([\n    Input()\n], PageLayoutComponent.prototype, \"section\", null);\nPageLayoutComponent = __decorate([\n    Component({\n        selector: 'cx-page-layout',\n        template: \"<ng-template\\n  [cxOutlet]=\\\"layoutName$ | async\\\"\\n  [cxOutletContext]=\\\"{\\n    templateName$: templateName$,\\n    slots$: slots$,\\n    section$: section$\\n  }\\\"\\n>\\n  <ng-content></ng-content>\\n\\n  <cx-page-slot\\n    *ngFor=\\\"let slot of slots$ | async\\\"\\n    [position]=\\\"slot\\\"\\n    [isPageFold]=\\\"slot === (pageFoldSlot$ | async)\\\"\\n  ></cx-page-slot>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], PageLayoutComponent);\n\n/**\n * Please don't put that service in public API.\n * */\nlet CmsRoutesService = class CmsRoutesService {\n    constructor(router, cmsMapping) {\n        this.router = router;\n        this.cmsMapping = cmsMapping;\n    }\n    cmsRouteExist(url) {\n        const isCmsDrivenRoute = url.startsWith('/');\n        if (!isCmsDrivenRoute) {\n            return false;\n        }\n        const routePath = url.substr(1);\n        return (isCmsDrivenRoute &&\n            !!this.router.config.find((route) => route.data && route.data.cxCmsRouteContext && route.path === routePath));\n    }\n    /**\n     * Contains Cms driven routing logic intended for use use in guards, especially in canActivate method.\n     *\n     * Will return true, when logic wont have to modify routing (so canActivate could be easily resolved to true)\n     * or will return false, when routing configuration was updated and redirection to newly generated route was initiated.\n     *\n     * @param pageContext\n     * @param currentUrl\n     */\n    handleCmsRoutesInGuard(pageContext, componentTypes, currentUrl, currentPageLabel) {\n        const componentRoutes = this.cmsMapping.getRoutesForComponents(componentTypes);\n        if (componentRoutes.length) {\n            if (this.updateRouting(pageContext, currentPageLabel, componentRoutes)) {\n                this.router.navigateByUrl(currentUrl);\n                return false;\n            }\n        }\n        return true;\n    }\n    updateRouting(pageContext, pageLabel, routes) {\n        if (pageContext.type === PageType.CONTENT_PAGE &&\n            pageLabel.startsWith('/') &&\n            pageLabel.length > 1) {\n            const newRoute = {\n                path: pageLabel.substr(1),\n                component: PageLayoutComponent,\n                children: routes,\n                data: {\n                    cxCmsRouteContext: {\n                        type: pageContext.type,\n                        id: pageLabel,\n                    },\n                },\n            };\n            this.router.resetConfig([newRoute, ...this.router.config]);\n            return true;\n        }\n        return false;\n    }\n};\nCmsRoutesService.ctorParameters = () => [\n    { type: Router },\n    { type: CmsMappingService }\n];\nCmsRoutesService.ɵprov = ɵɵdefineInjectable({ factory: function CmsRoutesService_Factory() { return new CmsRoutesService(ɵɵinject(Router), ɵɵinject(CmsMappingService)); }, token: CmsRoutesService, providedIn: \"root\" });\nCmsRoutesService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CmsRoutesService);\n\nlet CmsPageGuard = class CmsPageGuard {\n    constructor(\n    // expose as `protected` only services from public API:\n    routingService, cmsService, cmsRoutes, cmsI18n, cmsGuards, semanticPathService, protectedRoutesGuard) {\n        this.routingService = routingService;\n        this.cmsService = cmsService;\n        this.cmsRoutes = cmsRoutes;\n        this.cmsI18n = cmsI18n;\n        this.cmsGuards = cmsGuards;\n        this.semanticPathService = semanticPathService;\n        this.protectedRoutesGuard = protectedRoutesGuard;\n    }\n    canActivate(route, state) {\n        /**\n         * TODO(issue:4646) Expect that `ProtectedRoutesGuard` dependency is required (remove `if` logic)\n         */\n        return this.protectedRoutesGuard\n            ? this.protectedRoutesGuard\n                .canActivate(route)\n                .pipe(switchMap(result => result ? this.getCmsPage(route, state) : of(result)))\n            : this.getCmsPage(route, state);\n    }\n    getCmsPage(route, state) {\n        return this.routingService.getNextPageContext().pipe(switchMap(pageContext => this.cmsService.getPage(pageContext, true).pipe(first(), withLatestFrom(of(pageContext)))), switchMap(([pageData, pageContext]) => pageData\n            ? this.resolveCmsPageLogic(pageContext, pageData, route, state)\n            : this.handleNotFoundPage(pageContext, route, state)));\n    }\n    resolveCmsPageLogic(pageContext, pageData, route, state) {\n        return this.cmsService.getPageComponentTypes(pageContext).pipe(take(1), switchMap(componentTypes => this.cmsGuards\n            .cmsPageCanActivate(componentTypes, route, state)\n            .pipe(withLatestFrom(of(componentTypes)))), tap(([canActivate, componentTypes]) => {\n            if (canActivate === true) {\n                this.cmsI18n.loadChunksForComponents(componentTypes);\n            }\n        }), map(([canActivate, componentTypes]) => {\n            const pageLabel = pageData.label || pageContext.id; // for content pages the page label returned from backend can be different than ID initially assumed from route\n            if (canActivate === true &&\n                !route.data.cxCmsRouteContext &&\n                !this.cmsRoutes.cmsRouteExist(pageLabel)) {\n                return this.cmsRoutes.handleCmsRoutesInGuard(pageContext, componentTypes, state.url, pageLabel);\n            }\n            return canActivate;\n        }));\n    }\n    handleNotFoundPage(pageContext, route, state) {\n        const notFoundCmsPageContext = {\n            type: PageType.CONTENT_PAGE,\n            id: this.semanticPathService.get('notFound'),\n        };\n        return this.cmsService.getPage(notFoundCmsPageContext).pipe(switchMap(notFoundPage => {\n            if (notFoundPage) {\n                return this.cmsService.getPageIndex(notFoundCmsPageContext).pipe(tap(notFoundIndex => {\n                    this.cmsService.setPageFailIndex(pageContext, notFoundIndex);\n                }), switchMap(notFoundIndex => this.cmsService.getPageIndex(pageContext).pipe(\n                // we have to wait for page index update\n                filter(index => index === notFoundIndex))), switchMap(() => this.resolveCmsPageLogic(pageContext, notFoundPage, route, state)));\n            }\n            return of(false);\n        }));\n    }\n};\nCmsPageGuard.guardName = 'CmsPageGuard';\nCmsPageGuard.ctorParameters = () => [\n    { type: RoutingService },\n    { type: CmsService },\n    { type: CmsRoutesService },\n    { type: CmsI18nService },\n    { type: CmsGuardsService },\n    { type: SemanticPathService },\n    { type: ProtectedRoutesGuard }\n];\nCmsPageGuard.ɵprov = ɵɵdefineInjectable({ factory: function CmsPageGuard_Factory() { return new CmsPageGuard(ɵɵinject(RoutingService), ɵɵinject(CmsService), ɵɵinject(CmsRoutesService), ɵɵinject(CmsI18nService), ɵɵinject(CmsGuardsService), ɵɵinject(SemanticPathService), ɵɵinject(ProtectedRoutesGuard)); }, token: CmsPageGuard, providedIn: \"root\" });\nCmsPageGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CmsPageGuard);\n\nvar OutletPosition;\n(function (OutletPosition) {\n    OutletPosition[\"REPLACE\"] = \"replace\";\n    OutletPosition[\"BEFORE\"] = \"before\";\n    OutletPosition[\"AFTER\"] = \"after\";\n})(OutletPosition || (OutletPosition = {}));\nconst AVOID_STACKED_OUTLETS = false;\nconst USE_STACKED_OUTLETS = true;\n\nlet OutletService = class OutletService {\n    constructor() {\n        this.templatesRefs = new Map();\n        this.templatesRefsBefore = new Map();\n        this.templatesRefsAfter = new Map();\n    }\n    /**\n     * @param templateOrFactory A `ComponentFactory` that inserts a component dynamically.\n     */\n    add(outlet, templateOrFactory, position = OutletPosition.REPLACE) {\n        if (position === OutletPosition.BEFORE) {\n            this.store(this.templatesRefsBefore, outlet, templateOrFactory);\n        }\n        if (position === OutletPosition.REPLACE) {\n            this.store(this.templatesRefs, outlet, templateOrFactory);\n        }\n        if (position === OutletPosition.AFTER) {\n            this.store(this.templatesRefsAfter, outlet, templateOrFactory);\n        }\n    }\n    /**\n     *\n     * Returns a single object or multiple objects for the given outlet reference,\n     * depending on the `stacked` argument.\n     *\n     * @param outlet The outlet reference\n     * @param position the outlet position, `OutletPosition.before`, `OutletPosition.AFTER` or `OutletPosition.REPLACE`\n     * @param stacked Indicates whether an array of outlet components is returned\n     */\n    get(outlet, position = OutletPosition.REPLACE, stacked = AVOID_STACKED_OUTLETS) {\n        let templateRef;\n        switch (position) {\n            case OutletPosition.BEFORE:\n                templateRef = this.templatesRefsBefore.get(outlet);\n                break;\n            case OutletPosition.AFTER:\n                templateRef = this.templatesRefsAfter.get(outlet);\n                break;\n            default:\n                templateRef = this.templatesRefs.get(outlet);\n        }\n        if (templateRef && !stacked) {\n            return templateRef[0];\n        }\n        return templateRef;\n    }\n    store(store, outlet, value) {\n        const existing = store.get(outlet) || [];\n        const newValue = existing.concat([value]);\n        store.set(outlet, newValue);\n    }\n};\nOutletService.ɵprov = ɵɵdefineInjectable({ factory: function OutletService_Factory() { return new OutletService(); }, token: OutletService, providedIn: \"root\" });\nOutletService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], OutletService);\n\nlet OutletRefDirective = class OutletRefDirective {\n    constructor(tpl, outletService) {\n        this.tpl = tpl;\n        this.outletService = outletService;\n    }\n    ngOnInit() {\n        this.outletService.add(this.cxOutletRef, this.tpl, this.cxOutletPos);\n    }\n};\nOutletRefDirective.ctorParameters = () => [\n    { type: TemplateRef },\n    { type: OutletService }\n];\n__decorate([\n    Input()\n], OutletRefDirective.prototype, \"cxOutletRef\", void 0);\n__decorate([\n    Input()\n], OutletRefDirective.prototype, \"cxOutletPos\", void 0);\nOutletRefDirective = __decorate([\n    Directive({\n        selector: '[cxOutletRef]',\n    })\n], OutletRefDirective);\n\nlet OutletRefModule = class OutletRefModule {\n};\nOutletRefModule = __decorate([\n    NgModule({\n        imports: [CommonModule],\n        declarations: [OutletRefDirective],\n        exports: [OutletRefDirective],\n    })\n], OutletRefModule);\n\n/**\n * The IntersectionService uses the native IntersectionObserver (v2), which\n * can be used to implement pre-loading and deferred loading of DOM content.\n *\n */\nlet IntersectionService = class IntersectionService {\n    constructor(config) {\n        this.config = config;\n    }\n    /**\n     * Returns an Observable that emits only once a boolean value whenever\n     * the given element has shown in the view port.\n     *\n     * The returned obervable will only emit the first value. The\n     * observable must be cleaned up either way, since the value might never emit; it\n     *  depends on whether the element appears in the view port.\n     */\n    isIntersected(element, options) {\n        return this.intersects(element, options).pipe(first(v => v === true));\n    }\n    /**\n     * Indicates whenever the element intersects the view port. An optional margin\n     * is used to intersects before the element shows up in the viewport.\n     * A value is emitted each time the element intersects.\n     *\n     * This is private for now, but could be exposed as a public API\n     * to introduce additional (css) render effects to the UI.\n     */\n    intersects(element, options) {\n        const elementVisible$ = new Observable(observer => {\n            const rootMargin = this.getRootMargin(options);\n            const intersectOptions = { rootMargin };\n            const intersectionObserver = new IntersectionObserver(entries => {\n                observer.next(entries);\n            }, intersectOptions);\n            intersectionObserver.observe(element);\n            return () => {\n                intersectionObserver.disconnect();\n            };\n        }).pipe(flatMap((entries) => entries), map((entry) => entry.isIntersecting), distinctUntilChanged());\n        return elementVisible$;\n    }\n    getRootMargin(options) {\n        if (options.rootMargin) {\n            return options.rootMargin;\n        }\n        const layoutConfig = this.config;\n        if (layoutConfig.deferredLoading &&\n            layoutConfig.deferredLoading.intersectionMargin) {\n            return layoutConfig.deferredLoading.intersectionMargin;\n        }\n    }\n};\nIntersectionService.ctorParameters = () => [\n    { type: LayoutConfig }\n];\nIntersectionService.ɵprov = ɵɵdefineInjectable({ factory: function IntersectionService_Factory() { return new IntersectionService(ɵɵinject(LayoutConfig)); }, token: IntersectionService, providedIn: \"root\" });\nIntersectionService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], IntersectionService);\n\n/**\n * The defer loading serivce is used to defer loading of DOM elements\n * until the elements are required for the user experience.\n */\nlet DeferLoaderService = class DeferLoaderService {\n    constructor(platformId, config, intersectionService) {\n        this.platformId = platformId;\n        this.config = config;\n        this.intersectionService = intersectionService;\n        this.globalLoadStrategy = config.deferredLoading\n            ? config.deferredLoading.strategy\n            : DeferLoadingStrategy.INSTANT;\n    }\n    /**\n     * Defer loading till the element intersects the viewport.\n     *\n     * We evalutes whether we instantly load the element for different reasons:\n     * - we run in SSR mode\n     * - there's no global strategy given\n     * - the global loading strategy is set to INSTANT loading,\n     *   and the loading strategy in the given is not set to DEFER\n     * - the loading strategy in the given options is set to INSTANT\n     */\n    load(element, options) {\n        if (this.shouldLoadInstantly((options || {}).deferLoading)) {\n            return of(true);\n        }\n        else {\n            return this.intersectionService.isIntersected(element, options);\n        }\n    }\n    shouldLoadInstantly(elementLoadingStrategy) {\n        return (isPlatformServer(this.platformId) ||\n            elementLoadingStrategy === DeferLoadingStrategy.INSTANT ||\n            (elementLoadingStrategy !== DeferLoadingStrategy.DEFER &&\n                this.globalLoadStrategy === DeferLoadingStrategy.INSTANT));\n    }\n};\nDeferLoaderService.ctorParameters = () => [\n    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: LayoutConfig },\n    { type: IntersectionService }\n];\nDeferLoaderService.ɵprov = ɵɵdefineInjectable({ factory: function DeferLoaderService_Factory() { return new DeferLoaderService(ɵɵinject(PLATFORM_ID), ɵɵinject(LayoutConfig), ɵɵinject(IntersectionService)); }, token: DeferLoaderService, providedIn: \"root\" });\nDeferLoaderService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    }),\n    __param(0, Inject(PLATFORM_ID))\n], DeferLoaderService);\n\nlet OutletDirective = class OutletDirective {\n    constructor(vcr, templateRef, outletService, deferLoaderService) {\n        this.vcr = vcr;\n        this.templateRef = templateRef;\n        this.outletService = outletService;\n        this.deferLoaderService = deferLoaderService;\n        this.loaded = new EventEmitter(true);\n        this.subscription = new Subscription();\n    }\n    initializeOutlet() {\n        this.vcr.clear();\n        this.subscription.unsubscribe();\n        this.subscription = new Subscription();\n        if (this.cxOutletDefer) {\n            this.deferLoading();\n        }\n        else {\n            this.render();\n        }\n    }\n    ngOnChanges(changes) {\n        if (changes.cxOutlet) {\n            this.initializeOutlet();\n        }\n    }\n    deferLoading() {\n        this.loaded.emit(false);\n        const hostElement = this.getHostElement(this.vcr.element.nativeElement);\n        // Although the deferLoaderService might emit only once, as long as the hostElement\n        // isn't being loaded, there's no value being emitted. Therefor we need to clean up\n        // the subscription on destroy.\n        this.subscription.add(this.deferLoaderService\n            .load(hostElement, this.cxOutletDefer)\n            .subscribe(() => {\n            this.render();\n            this.loaded.emit(true);\n        }));\n    }\n    render() {\n        this.renderOutlet(OutletPosition.BEFORE);\n        this.renderOutlet(OutletPosition.REPLACE);\n        this.renderOutlet(OutletPosition.AFTER);\n    }\n    renderOutlet(position) {\n        let templates = (this.outletService.get(this.cxOutlet, position, USE_STACKED_OUTLETS));\n        if (!templates && position === OutletPosition.REPLACE) {\n            templates = [this.templateRef];\n        }\n        // Just in case someone extended the `OutletService` and\n        // returns a singular object.\n        if (!Array.isArray(templates)) {\n            templates = [templates];\n        }\n        templates.forEach(obj => {\n            this.create(obj);\n        });\n    }\n    create(tmplOrFactory) {\n        if (tmplOrFactory instanceof ComponentFactory) {\n            this.vcr.createComponent(tmplOrFactory);\n        }\n        else if (tmplOrFactory instanceof TemplateRef) {\n            const view = this.vcr.createEmbeddedView(tmplOrFactory, {\n                $implicit: this.cxOutletContext,\n            });\n            // we do not know if content is created dynamically or not\n            // so we apply change detection anyway\n            view.markForCheck();\n        }\n    }\n    /**\n     * Returns the closest `HtmlElement`, by iterating over the\n     * parent elements of the given element.\n     *\n     * @param element\n     */\n    getHostElement(element) {\n        if (element instanceof HTMLElement) {\n            return element;\n        }\n        return this.getHostElement(element.parentElement);\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n};\nOutletDirective.ctorParameters = () => [\n    { type: ViewContainerRef },\n    { type: TemplateRef },\n    { type: OutletService },\n    { type: DeferLoaderService }\n];\n__decorate([\n    Input()\n], OutletDirective.prototype, \"cxOutlet\", void 0);\n__decorate([\n    Input()\n], OutletDirective.prototype, \"cxOutletContext\", void 0);\n__decorate([\n    Input()\n], OutletDirective.prototype, \"cxOutletDefer\", void 0);\n__decorate([\n    Output()\n], OutletDirective.prototype, \"loaded\", void 0);\nOutletDirective = __decorate([\n    Directive({\n        selector: '[cxOutlet]',\n    })\n], OutletDirective);\n\nlet OutletModule = class OutletModule {\n};\nOutletModule = __decorate([\n    NgModule({\n        imports: [CommonModule],\n        declarations: [OutletDirective],\n        providers: [OutletService],\n        exports: [OutletDirective],\n    })\n], OutletModule);\n\nlet PageSlotComponent = class PageSlotComponent {\n    constructor(cmsService, dynamicAttributeService, renderer, hostElement, config) {\n        this.cmsService = cmsService;\n        this.dynamicAttributeService = dynamicAttributeService;\n        this.renderer = renderer;\n        this.hostElement = hostElement;\n        this.config = config;\n        this.isPending = true;\n        this.hasComponents = false;\n        this.isPageFold = false;\n        this.position$ = new BehaviorSubject(undefined);\n        /**\n         * observable with `ContentSlotData` for the current position\n         *\n         * @deprecated we'll stop supporting this property in 2.0 as\n         * it is not used separately.\n         */\n        this.slot$ = this.position$.pipe(switchMap(position => this.cmsService.getContentSlot(position)), tap(slot => this.addSmartEditSlotClass(slot)));\n        this.components$ = this.slot$.pipe(map(slot => (slot && slot.components ? slot.components : [])), distinctUntilChanged((a, b) => a.length === b.length && !a.find((el, index) => el.uid !== b[index].uid)));\n        this.subscription = new Subscription();\n    }\n    /**\n     * The position is used to find the CMS page slot (and optional outlet)\n     * that is rendered in the PageSlotComponent. Furthermore, the position\n     * is added as a CSS class name to the host element.\n     */\n    set position(position) {\n        this.position$.next(position);\n        this.renderer.addClass(this.hostElement.nativeElement, position);\n    }\n    get position() {\n        return this.position$.value;\n    }\n    ngOnInit() {\n        this.subscription.add(this.components$.subscribe(components => {\n            this.hasComponents = components && components.length > 0;\n            this.pendingComponentCount = components ? components.length : 0;\n            this.isPending = this.pendingComponentCount > 0;\n        }));\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n    /**\n     * Is triggered when a component is added to the view.\n     * We use this information to dropthe `is-pending` class from the page slot\n     * when all nested components have been added.\n     */\n    isLoaded(loadState) {\n        if (loadState) {\n            this.pendingComponentCount--;\n        }\n        this.isPending = this.pendingComponentCount > 0;\n    }\n    getComponentDeferOptions(componentType) {\n        const deferLoading = this.getDeferLoadingStrategy(componentType);\n        return { deferLoading };\n    }\n    /**\n     * The `DeferLoadingStrategy` indicates whether component rendering\n     * should be deferred.\n     */\n    getDeferLoadingStrategy(componentType) {\n        if (this.config) {\n            return (this.config.cmsComponents[componentType] || {})\n                .deferLoading;\n        }\n    }\n    addSmartEditSlotClass(slot) {\n        if (slot && this.cmsService.isLaunchInSmartEdit()) {\n            this.addSmartEditContract(slot);\n        }\n    }\n    addSmartEditContract(slot) {\n        this.dynamicAttributeService.addDynamicAttributes(slot.properties, this.hostElement.nativeElement, this.renderer);\n    }\n};\nPageSlotComponent.ctorParameters = () => [\n    { type: CmsService },\n    { type: DynamicAttributeService },\n    { type: Renderer2 },\n    { type: ElementRef },\n    { type: CmsConfig }\n];\n__decorate([\n    Input()\n], PageSlotComponent.prototype, \"position\", null);\n__decorate([\n    HostBinding('class.cx-pending')\n], PageSlotComponent.prototype, \"isPending\", void 0);\n__decorate([\n    HostBinding('class.has-components')\n], PageSlotComponent.prototype, \"hasComponents\", void 0);\n__decorate([\n    HostBinding('class.page-fold'), Input()\n], PageSlotComponent.prototype, \"isPageFold\", void 0);\nPageSlotComponent = __decorate([\n    Component({\n        selector: 'cx-page-slot,[cx-page-slot]',\n        template: \"<ng-template\\n  [cxOutlet]=\\\"position\\\"\\n  [cxOutletContext]=\\\"{ components$: components$ }\\\"\\n  [cxSkipLink]=\\\"position\\\"\\n>\\n  <ng-template\\n    *ngFor=\\\"let component of components$ | async\\\"\\n    [cxOutlet]=\\\"component.flexType\\\"\\n    [cxOutletContext]=\\\"{ component: component }\\\"\\n    [cxOutletDefer]=\\\"getComponentDeferOptions(component.flexType)\\\"\\n    (loaded)=\\\"isLoaded($event)\\\"\\n  >\\n    <ng-container [cxComponentWrapper]=\\\"component\\\"></ng-container>\\n  </ng-template>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], PageSlotComponent);\n\nclass SkipLinkConfig {\n}\nclass SkipLink {\n}\nvar SkipLinkScrollPosition;\n(function (SkipLinkScrollPosition) {\n    SkipLinkScrollPosition[\"BEFORE\"] = \"BEFORE\";\n    SkipLinkScrollPosition[\"AFTER\"] = \"AFTER\";\n})(SkipLinkScrollPosition || (SkipLinkScrollPosition = {}));\n\nlet SkipLinkService = class SkipLinkService {\n    constructor(config) {\n        this.config = config;\n        this.skipLinks$ = new BehaviorSubject([]);\n    }\n    getSkipLinks() {\n        return this.skipLinks$;\n    }\n    add(key, target) {\n        const found = this.config.skipLinks.find(skipLink => skipLink.key === key);\n        if (found) {\n            const existing = this.skipLinks$.value;\n            existing.splice(this.getSkipLinkIndexInArray(key), 0, {\n                target: target,\n                i18nKey: found.i18nKey,\n                position: found.position,\n                key: key,\n            });\n            this.skipLinks$.next(existing);\n        }\n    }\n    remove(key) {\n        const found = this.config.skipLinks.find(skipLink => skipLink.key === key);\n        if (found) {\n            let existing = this.skipLinks$.value;\n            existing = existing.filter(skipLink => skipLink.key !== key);\n            this.skipLinks$.next(existing);\n        }\n    }\n    scrollToTarget(target, position, event) {\n        target = target.parentNode;\n        event.target.blur();\n        const options = position === SkipLinkScrollPosition.AFTER ? { inline: 'end' } : {};\n        target.scrollIntoView(options);\n    }\n    getSkipLinkIndexInArray(key) {\n        let index = this.config.skipLinks.findIndex(skipLink => skipLink.key === key);\n        while (index > 0) {\n            index--;\n            const previous = this.config.skipLinks[index];\n            if (previous) {\n                const existing = this.skipLinks$.value;\n                const found = existing.findIndex(skipLink => skipLink.key === previous.key);\n                if (found > -1) {\n                    return found + 1;\n                }\n            }\n        }\n        return 0;\n    }\n};\nSkipLinkService.ctorParameters = () => [\n    { type: SkipLinkConfig }\n];\nSkipLinkService.ɵprov = ɵɵdefineInjectable({ factory: function SkipLinkService_Factory() { return new SkipLinkService(ɵɵinject(SkipLinkConfig)); }, token: SkipLinkService, providedIn: \"root\" });\nSkipLinkService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], SkipLinkService);\n\nlet SkipLinkComponent = class SkipLinkComponent {\n    constructor(skipLinkService) {\n        this.skipLinkService = skipLinkService;\n        this.skipLinks$ = this.skipLinkService\n            .getSkipLinks()\n            .pipe(observeOn(asyncScheduler)); // delay view's update to avoid ExpressionChangedAfterItHasBeenCheckedError\n    }\n    scrollToTarget(skipLink, event) {\n        this.skipLinkService.scrollToTarget(skipLink.target, skipLink.position, event);\n    }\n    /**\n     * Hides the skip link by removing the focus.\n     */\n    blur(event) {\n        event.target.blur();\n    }\n    tabNext(event) {\n        if (this.isElement(event.target.nextSibling)) {\n            event.target.nextSibling.focus();\n        }\n    }\n    tabPrev(event) {\n        if (this.isElement(event.target.previousSibling)) {\n            event.target.previousSibling.focus();\n        }\n    }\n    isElement(element) {\n        return !!element && element instanceof HTMLElement;\n    }\n};\nSkipLinkComponent.ctorParameters = () => [\n    { type: SkipLinkService }\n];\nSkipLinkComponent = __decorate([\n    Component({\n        selector: 'cx-skip-link',\n        template: \"<button\\n  *ngFor=\\\"let skipLink of skipLinks$ | async\\\"\\n  (click)=\\\"scrollToTarget(skipLink, $event)\\\"\\n  (keydown.esc)=\\\"blur($event)\\\"\\n  (keydown.arrowright)=\\\"tabNext($event)\\\"\\n  (keydown.arrowleft)=\\\"tabPrev($event)\\\"\\n>\\n  {{ 'skipLink.skipTo' | cxTranslate }}\\n  {{ skipLink.i18nKey | cxTranslate }}\\n</button>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], SkipLinkComponent);\n\nconst defaultSkipLinkConfig = {\n    skipLinks: [\n        {\n            key: 'SiteContext',\n            i18nKey: 'skipLink.labels.header',\n        },\n        {\n            key: 'BottomHeaderSlot',\n            position: SkipLinkScrollPosition.AFTER,\n            i18nKey: 'skipLink.labels.main',\n        },\n        {\n            key: 'ProductLeftRefinements',\n            i18nKey: 'skipLink.labels.productFacets',\n        },\n        { key: 'ProductListSlot', i18nKey: 'skipLink.labels.productList' },\n        { key: 'Footer', i18nKey: 'skipLink.labels.footer' },\n    ],\n};\n\nlet SkipLinkDirective = class SkipLinkDirective {\n    constructor(elRef, skipLinkService) {\n        this.elRef = elRef;\n        this.skipLinkService = skipLinkService;\n    }\n    ngOnInit() {\n        this.skipLinkService.add(this.cxSkipLink, this.elRef.nativeElement);\n    }\n    ngOnDestroy() {\n        this.skipLinkService.remove(this.cxSkipLink);\n    }\n};\nSkipLinkDirective.ctorParameters = () => [\n    { type: ElementRef },\n    { type: SkipLinkService }\n];\n__decorate([\n    Input()\n], SkipLinkDirective.prototype, \"cxSkipLink\", void 0);\nSkipLinkDirective = __decorate([\n    Directive({\n        selector: '[cxSkipLink]',\n    })\n], SkipLinkDirective);\n\nlet SkipLinkModule = class SkipLinkModule {\n};\nSkipLinkModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            I18nModule,\n            ConfigModule.withConfig(defaultSkipLinkConfig),\n        ],\n        declarations: [SkipLinkComponent, SkipLinkDirective],\n        exports: [SkipLinkDirective],\n        entryComponents: [SkipLinkComponent],\n        providers: [\n            { provide: SkipLinkConfig, useExisting: Config },\n            {\n                provide: APP_INITIALIZER,\n                useFactory: skipLinkFactory,\n                deps: [ComponentFactoryResolver, OutletService],\n                multi: true,\n            },\n        ],\n    })\n], SkipLinkModule);\n/**\n * Adds the skip link component before the cx-storefront.\n */\nfunction skipLinkFactory(componentFactoryResolver, outletService) {\n    const isReady = () => {\n        const factory = componentFactoryResolver.resolveComponentFactory(SkipLinkComponent);\n        outletService.add('cx-storefront', factory, OutletPosition.BEFORE);\n    };\n    return isReady;\n}\n\nlet PageSlotModule = class PageSlotModule {\n};\nPageSlotModule = __decorate([\n    NgModule({\n        imports: [CommonModule, OutletModule, PageComponentModule, SkipLinkModule],\n        providers: [],\n        declarations: [PageSlotComponent],\n        exports: [PageSlotComponent],\n    })\n], PageSlotModule);\n\nlet PageLayoutModule = class PageLayoutModule {\n};\nPageLayoutModule = __decorate([\n    NgModule({\n        imports: [CommonModule, OutletModule, PageSlotModule],\n        declarations: [PageLayoutComponent],\n        providers: [PageLayoutService],\n        exports: [PageLayoutComponent],\n    })\n], PageLayoutModule);\n\nclass PWAModuleConfig {\n}\nconst defaultPWAModuleConfig = {\n    pwa: {\n        enabled: false,\n        addToHomeScreen: false,\n    },\n};\n\nlet AddToHomeScreenService = class AddToHomeScreenService {\n    constructor(config, globalMessageService, winRef) {\n        this.config = config;\n        this.globalMessageService = globalMessageService;\n        this.winRef = winRef;\n        this.canPrompt = new BehaviorSubject(false);\n        this.canPrompt$ = this.canPrompt.asObservable();\n        if (this.config.pwa.addToHomeScreen) {\n            this.init();\n        }\n    }\n    init() {\n        if (this.winRef.nativeWindow) {\n            this.winRef.nativeWindow.addEventListener('beforeinstallprompt', event => {\n                event.preventDefault();\n                this.deferredEvent = event;\n                this.enableAddToHomeScreen();\n            });\n            this.winRef.nativeWindow.addEventListener('appinstalled', () => {\n                this.globalMessageService.add({ key: 'pwa.addedToHomeScreen' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n                this.disableAddToHomeScreen();\n                this.deferredEvent = null;\n            });\n        }\n    }\n    enableAddToHomeScreen() {\n        this.canPrompt.next(true);\n    }\n    disableAddToHomeScreen() {\n        this.canPrompt.next(false);\n    }\n    firePrompt() {\n        if (this.deferredEvent) {\n            this.deferredEvent.prompt();\n        }\n    }\n};\nAddToHomeScreenService.ctorParameters = () => [\n    { type: PWAModuleConfig },\n    { type: GlobalMessageService },\n    { type: WindowRef }\n];\nAddToHomeScreenService = __decorate([\n    Injectable()\n], AddToHomeScreenService);\n\nclass AddToHomeScreenComponent {\n    constructor(addToHomeScreenService) {\n        this.addToHomeScreenService = addToHomeScreenService;\n    }\n    ngOnInit() {\n        this.canPrompt$ = this.addToHomeScreenService.canPrompt$;\n    }\n    prompt() {\n        this.addToHomeScreenService.firePrompt();\n    }\n}\n\nlet AddToHomeScreenBannerComponent = class AddToHomeScreenBannerComponent extends AddToHomeScreenComponent {\n    constructor(addToHomeScreenService) {\n        super(addToHomeScreenService);\n        this.addToHomeScreenService = addToHomeScreenService;\n    }\n};\nAddToHomeScreenBannerComponent.ctorParameters = () => [\n    { type: AddToHomeScreenService }\n];\nAddToHomeScreenBannerComponent = __decorate([\n    Component({\n        selector: 'cx-add-to-home-screen-banner',\n        template: \"<div *ngIf=\\\"canPrompt$ | async\\\">\\n  <div class=\\\"cx-add-to-home-screen-banner\\\">\\n    <div class=\\\"cx-add-to-home-screen-banner-inner\\\">\\n      <p>\\n        {{ 'pwa.addToHomeScreenDescription' | cxTranslate }}\\n      </p>\\n      <ul>\\n        <li>{{ 'pwa.noInstallationNeeded' | cxTranslate }}</li>\\n        <li>{{ 'pwa.fastAccessToApplication' | cxTranslate }}</li>\\n      </ul>\\n      <button (click)=\\\"prompt()\\\" class=\\\"btn btn-primary\\\">\\n        {{ 'pwa.addToHomeScreen' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], AddToHomeScreenBannerComponent);\n\nlet AddToHomeScreenBtnComponent = class AddToHomeScreenBtnComponent extends AddToHomeScreenComponent {\n    constructor(addToHomeScreenService) {\n        super(addToHomeScreenService);\n        this.addToHomeScreenService = addToHomeScreenService;\n    }\n};\nAddToHomeScreenBtnComponent.ctorParameters = () => [\n    { type: AddToHomeScreenService }\n];\nAddToHomeScreenBtnComponent = __decorate([\n    Component({\n        selector: 'cx-add-to-home-screen-btn',\n        template: \"<span (click)=\\\"prompt()\\\">\\n  <ng-content *ngIf=\\\"canPrompt$ | async\\\"></ng-content>\\n</span>\\n\"\n    })\n], AddToHomeScreenBtnComponent);\n\nfunction pwaConfigurationFactory(pwaConfig) {\n    return { enabled: (!isDevMode() && pwaConfig.pwa.enabled) || false };\n}\nfunction pwaFactory(addToHomeScreenService) {\n    const result = () => addToHomeScreenService;\n    return result;\n}\nlet PwaModule = class PwaModule {\n};\nPwaModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig(defaultPWAModuleConfig),\n            ServiceWorkerModule.register('/ngsw-worker.js'),\n            I18nModule,\n        ],\n        providers: [\n            { provide: PWAModuleConfig, useExisting: Config },\n            {\n                provide: SwRegistrationOptions,\n                useFactory: pwaConfigurationFactory,\n                deps: [Config],\n            },\n            {\n                provide: APP_INITIALIZER,\n                useFactory: pwaFactory,\n                deps: [AddToHomeScreenService],\n                multi: true,\n            },\n            AddToHomeScreenService,\n        ],\n        declarations: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],\n        exports: [AddToHomeScreenBtnComponent, AddToHomeScreenBannerComponent],\n    })\n], PwaModule);\n\nconst cmsRoute = {\n    path: '**',\n    canActivate: [CmsPageGuard],\n    component: PageLayoutComponent,\n};\nfunction addCmsRoute(injector) {\n    const result = () => {\n        const router = injector.get(Router);\n        router.config.push(cmsRoute);\n    };\n    return result;\n}\n\nconst ɵ0 = addCmsRoute;\nlet CmsRouteModule = class CmsRouteModule {\n};\nCmsRouteModule = __decorate([\n    NgModule({\n        providers: [\n            {\n                provide: APP_INITIALIZER,\n                multi: true,\n                deps: [Injector],\n                useFactory: ɵ0,\n            },\n        ],\n    })\n], CmsRouteModule);\n\nlet SeoMetaService = class SeoMetaService {\n    constructor(ngTitle, ngMeta, pageMetaService) {\n        this.ngTitle = ngTitle;\n        this.ngMeta = ngMeta;\n        this.pageMetaService = pageMetaService;\n    }\n    init() {\n        this.pageMetaService\n            .getMeta()\n            .pipe(filter(Boolean))\n            .subscribe((meta) => (this.meta = meta));\n    }\n    set meta(meta) {\n        this.title = meta.title;\n        this.description = meta.description;\n        this.image = meta.image;\n        this.robots = meta.robots || [PageRobotsMeta.INDEX, PageRobotsMeta.FOLLOW];\n    }\n    set title(title) {\n        this.ngTitle.setTitle(title || '');\n    }\n    set description(value) {\n        this.addTag({ name: 'description', content: value });\n    }\n    set image(imageUrl) {\n        if (imageUrl) {\n            this.addTag({ name: 'og:image', content: imageUrl });\n        }\n    }\n    set robots(value) {\n        if (value) {\n            this.addTag({ name: 'robots', content: value.join(', ') });\n        }\n    }\n    addTag(meta) {\n        if (meta.content) {\n            this.ngMeta.updateTag(meta);\n        }\n    }\n};\nSeoMetaService.ctorParameters = () => [\n    { type: Title },\n    { type: Meta },\n    { type: PageMetaService }\n];\nSeoMetaService.ɵprov = ɵɵdefineInjectable({ factory: function SeoMetaService_Factory() { return new SeoMetaService(ɵɵinject(Title), ɵɵinject(Meta), ɵɵinject(PageMetaService)); }, token: SeoMetaService, providedIn: \"root\" });\nSeoMetaService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], SeoMetaService);\n\nconst htmlLangProvider = {\n    provide: APP_INITIALIZER,\n    multi: true,\n    useFactory: setHtmlLangAttribute,\n    deps: [WindowRef, LanguageService],\n};\n/**\n * Sets active language in <html lang=\"\">\n */\nfunction setHtmlLangAttribute(winRef, languageService) {\n    const result = () => {\n        languageService.getActive().subscribe(lang => {\n            winRef.document.documentElement.lang = lang;\n        });\n    };\n    return result;\n}\n\nlet JsonLdScriptFactory = class JsonLdScriptFactory {\n    constructor(platformId, winRef, rendererFactory, sanitizer) {\n        this.platformId = platformId;\n        this.winRef = winRef;\n        this.rendererFactory = rendererFactory;\n        this.sanitizer = sanitizer;\n    }\n    build(schema) {\n        if (schema && this.isJsonLdRequired()) {\n            this.createJsonLdScriptElement().innerHTML = this.sanitize(schema);\n        }\n    }\n    /**\n     * Only return schema data in case of SSR or development mode,\n     * to not waste memory unnecessary.\n     */\n    isJsonLdRequired() {\n        return !isPlatformBrowser(this.platformId) || isDevMode();\n    }\n    createJsonLdScriptElement() {\n        const id = 'json-ld';\n        let scriptElement = (this.winRef.document.getElementById(id));\n        if (!scriptElement) {\n            const renderer = this.rendererFactory.createRenderer(null, null);\n            const script = renderer.createElement('script');\n            script.id = id;\n            script.type = 'application/ld+json';\n            renderer.appendChild(this.winRef.document.body, script);\n            scriptElement = script;\n        }\n        return scriptElement;\n    }\n    /**\n     * Sanitizes the given json-ld schema by leveraging the angular HTML sanitizer.\n     *\n     * The given schema is not trusted, as malicious code could be injected (XSS)\n     * into the json-ld script.\n     */\n    sanitize(schema) {\n        return JSON.stringify(schema, (_key, value) => typeof value === 'string'\n            ? this.sanitizer.sanitize(SecurityContext.HTML, value)\n            : value);\n    }\n};\nJsonLdScriptFactory.ctorParameters = () => [\n    { type: String, decorators: [{ type: Inject, args: [PLATFORM_ID,] }] },\n    { type: WindowRef },\n    { type: RendererFactory2 },\n    { type: DomSanitizer }\n];\nJsonLdScriptFactory.ɵprov = ɵɵdefineInjectable({ factory: function JsonLdScriptFactory_Factory() { return new JsonLdScriptFactory(ɵɵinject(PLATFORM_ID), ɵɵinject(WindowRef), ɵɵinject(RendererFactory2), ɵɵinject(DomSanitizer)); }, token: JsonLdScriptFactory, providedIn: \"root\" });\nJsonLdScriptFactory = __decorate([\n    Injectable({\n        providedIn: 'root',\n    }),\n    __param(0, Inject(PLATFORM_ID))\n], JsonLdScriptFactory);\n\n/**\n * Low level directive that adds a json-ld script tag to the component.\n * This code bypasses the strict XSS security, as otherwise we're not able\n * to append a script tag with JS inside.\n */\nlet JsonLdDirective = class JsonLdDirective {\n    constructor(jsonLdScriptFactory, sanitizer) {\n        this.jsonLdScriptFactory = jsonLdScriptFactory;\n        this.sanitizer = sanitizer;\n    }\n    set cxJsonLd(schema) {\n        this.writeJsonLd(schema);\n    }\n    writeJsonLd(schema) {\n        if (schema && this.jsonLdScriptFactory.isJsonLdRequired()) {\n            const sanitizedSchema = this.jsonLdScriptFactory.sanitize(schema);\n            const html = `<script type=\"application/ld+json\">${sanitizedSchema}</script>`;\n            this.jsonLD = this.sanitizer.bypassSecurityTrustHtml(html);\n        }\n    }\n};\nJsonLdDirective.ctorParameters = () => [\n    { type: JsonLdScriptFactory },\n    { type: DomSanitizer }\n];\n__decorate([\n    Input()\n], JsonLdDirective.prototype, \"cxJsonLd\", null);\n__decorate([\n    HostBinding('innerHTML')\n], JsonLdDirective.prototype, \"jsonLD\", void 0);\nJsonLdDirective = __decorate([\n    Directive({\n        selector: '[cxJsonLd]',\n    })\n], JsonLdDirective);\n\n/**\n * Injection token to extend schema builders for adding structural data (json-ld).\n *\n * Some builders (i.e. `JSONLD_PRODUCT_BUILDER`) might have additional\n * lowever level builder to further extend the schema.\n */\nconst SCHEMA_BUILDER = new InjectionToken('SchemaBuilderToken');\n/**\n * Injection token to add specific json-ld builders for product related schema's.\n * See see https://schema.org/product for more information.\n */\nconst JSONLD_PRODUCT_BUILDER = new InjectionToken('JsonLdProductBuilderToken');\n\nlet StructuredDataFactory = class StructuredDataFactory {\n    constructor(scriptBuilder, builders) {\n        this.scriptBuilder = scriptBuilder;\n        this.builders = builders;\n    }\n    build() {\n        this.collectSchemas().subscribe((schema) => {\n            this.scriptBuilder.build(schema);\n        });\n    }\n    collectSchemas() {\n        if (!this.scriptBuilder.isJsonLdRequired() || !this.builders) {\n            return of();\n        }\n        return combineLatest(this.builders.map(builder => builder.build())).pipe();\n    }\n};\nStructuredDataFactory.ctorParameters = () => [\n    { type: JsonLdScriptFactory },\n    { type: Array, decorators: [{ type: Optional }, { type: Inject, args: [SCHEMA_BUILDER,] }] }\n];\nStructuredDataFactory.ɵprov = ɵɵdefineInjectable({ factory: function StructuredDataFactory_Factory() { return new StructuredDataFactory(ɵɵinject(JsonLdScriptFactory), ɵɵinject(SCHEMA_BUILDER, 8)); }, token: StructuredDataFactory, providedIn: \"root\" });\nStructuredDataFactory = __decorate([\n    Injectable({\n        providedIn: 'root',\n    }),\n    __param(1, Optional()),\n    __param(1, Inject(SCHEMA_BUILDER))\n], StructuredDataFactory);\n\n/**\n * Factory to build the structure data\n * without any interaction with the UI.\n */\nfunction getStructuredDataFactory(injector) {\n    const result = () => {\n        const factory = injector.get(StructuredDataFactory);\n        factory.build();\n    };\n    return result;\n}\nlet StructuredDataModule = class StructuredDataModule {\n};\nStructuredDataModule = __decorate([\n    NgModule({\n        imports: [CommonModule],\n        declarations: [JsonLdDirective],\n        exports: [JsonLdDirective],\n        providers: [\n            {\n                provide: APP_INITIALIZER,\n                useFactory: getStructuredDataFactory,\n                deps: [Injector],\n                multi: true,\n            },\n        ],\n    })\n], StructuredDataModule);\n\nfunction initSeoService(injector) {\n    const result = () => {\n        const service = injector.get(SeoMetaService);\n        service.init();\n    };\n    return result;\n}\nlet SeoModule = class SeoModule {\n};\nSeoModule = __decorate([\n    NgModule({\n        imports: [StructuredDataModule],\n        providers: [\n            {\n                provide: APP_INITIALIZER,\n                useFactory: initSeoService,\n                deps: [Injector],\n                multi: true,\n            },\n            htmlLangProvider,\n        ],\n    })\n], SeoModule);\n\nlet BreadcrumbSchemaBuilder = class BreadcrumbSchemaBuilder {\n    constructor(pageMetaService) {\n        this.pageMetaService = pageMetaService;\n    }\n    build() {\n        return this.pageMetaService\n            .getMeta()\n            .pipe(map((pageMeta) => this.collect(pageMeta)));\n    }\n    collect(pageMeta) {\n        if (!pageMeta.breadcrumbs) {\n            return;\n        }\n        const crumbs = pageMeta.breadcrumbs.map((crumb, index) => {\n            return {\n                '@type': 'ListItem',\n                position: index + 1,\n                item: {\n                    '@id': crumb.link,\n                    name: crumb.label,\n                },\n            };\n        });\n        if (pageMeta.title) {\n            crumbs.push({\n                '@type': 'ListItem',\n                position: crumbs.length + 1,\n                item: {\n                    '@id': pageMeta.title,\n                    name: pageMeta.title,\n                },\n            });\n        }\n        return {\n            '@context': 'http://schema.org',\n            '@type': 'BreadcrumbList',\n            itemListElement: crumbs,\n        };\n    }\n};\nBreadcrumbSchemaBuilder.ctorParameters = () => [\n    { type: PageMetaService }\n];\nBreadcrumbSchemaBuilder.ɵprov = ɵɵdefineInjectable({ factory: function BreadcrumbSchemaBuilder_Factory() { return new BreadcrumbSchemaBuilder(ɵɵinject(PageMetaService)); }, token: BreadcrumbSchemaBuilder, providedIn: \"root\" });\nBreadcrumbSchemaBuilder = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], BreadcrumbSchemaBuilder);\n\n/**\n * Builds the basic structured data for the product, see https://schema.org/product.\n * This builder includes data for sku number, name, description, brand and main image.\n */\nlet JsonLdBaseProductBuilder = class JsonLdBaseProductBuilder {\n    build(product) {\n        return of(Object.assign(Object.assign(Object.assign({}, this.getProductBase(product)), this.getProductBrand(product)), this.getProductImage(product)));\n    }\n    getProductBase(product) {\n        const result = { sku: product.code };\n        if (product.name) {\n            result.name = product.name;\n        }\n        if (product.summary) {\n            result.description = product.summary;\n        }\n        return result;\n    }\n    getProductImage(product) {\n        return product.images &&\n            product.images.PRIMARY &&\n            product.images.PRIMARY['zoom'] &&\n            product.images.PRIMARY['zoom'].url\n            ? {\n                image: product.images.PRIMARY['zoom'].url,\n            }\n            : {};\n    }\n    getProductBrand(product) {\n        return product['manufacturer']\n            ? {\n                brand: product['manufacturer'],\n            }\n            : null;\n    }\n};\nJsonLdBaseProductBuilder.ɵprov = ɵɵdefineInjectable({ factory: function JsonLdBaseProductBuilder_Factory() { return new JsonLdBaseProductBuilder(); }, token: JsonLdBaseProductBuilder, providedIn: \"root\" });\nJsonLdBaseProductBuilder = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], JsonLdBaseProductBuilder);\n\n/**\n * Builds the structured data for the product offer, see https://schema.org/offers.\n * The data includes the price, currency and availability level.\n */\nlet JsonLdProductOfferBuilder = class JsonLdProductOfferBuilder {\n    build(product) {\n        const schema = { '@type': 'Offer' };\n        if (product.price) {\n            if (product.price.value) {\n                schema.price = product.price.value;\n            }\n            if (product.price.currencyIso) {\n                schema.priceCurrency = product.price.currencyIso;\n            }\n        }\n        if (product.stock && product.stock.stockLevelStatus) {\n            schema.availability =\n                product.stock.stockLevelStatus === 'inStock' ? 'InStock' : 'OutOfStock';\n        }\n        return of({\n            offers: schema,\n        });\n    }\n};\nJsonLdProductOfferBuilder.ɵprov = ɵɵdefineInjectable({ factory: function JsonLdProductOfferBuilder_Factory() { return new JsonLdProductOfferBuilder(); }, token: JsonLdProductOfferBuilder, providedIn: \"root\" });\nJsonLdProductOfferBuilder = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], JsonLdProductOfferBuilder);\n\n/**\n * Builds the structured data for the product reviews, see https://schema.org/Review.\n * The data includes the aggregated product rating and the individual reviews.\n */\nlet JsonLdProductReviewBuilder = class JsonLdProductReviewBuilder {\n    constructor(reviewService) {\n        this.reviewService = reviewService;\n    }\n    build(product) {\n        return this.reviewService.getByProductCode(product.code).pipe(filter(Boolean), map((reviews) => {\n            return {\n                aggregateRating: this.buildAggregatedReviews(product, reviews),\n                review: reviews.map(review => this.buildReviews(review)),\n            };\n        }));\n    }\n    buildAggregatedReviews(product, reviews) {\n        const aggregated = {\n            '@type': 'AggregateRating',\n        };\n        if (product.averageRating) {\n            aggregated.ratingValue = product.averageRating;\n        }\n        if (reviews) {\n            aggregated.ratingCount = reviews.filter(rev => !!rev.rating).length;\n            aggregated.reviewCount = reviews.filter(rev => !!rev.comment).length;\n        }\n        return aggregated;\n    }\n    buildReviews(review) {\n        const reviewSchema = {\n            '@type': 'review',\n        };\n        if (review.principal && review.principal.name) {\n            reviewSchema.author = review.principal.name;\n        }\n        if (review.date) {\n            const date = new Date(review.date);\n            reviewSchema.datePublished = `${date.getFullYear()}-${date.getMonth() +\n                1}-${date.getDate()}`;\n        }\n        if (review.headline) {\n            reviewSchema.name = review.headline;\n        }\n        if (review.comment) {\n            reviewSchema.description = review.comment;\n        }\n        if (review.rating) {\n            reviewSchema.reviewRating = {\n                '@type': 'Rating',\n                ratingValue: review.rating.toString(),\n            };\n        }\n        return reviewSchema;\n    }\n};\nJsonLdProductReviewBuilder.ctorParameters = () => [\n    { type: ProductReviewService }\n];\nJsonLdProductReviewBuilder.ɵprov = ɵɵdefineInjectable({ factory: function JsonLdProductReviewBuilder_Factory() { return new JsonLdProductReviewBuilder(ɵɵinject(ProductReviewService)); }, token: JsonLdProductReviewBuilder, providedIn: \"root\" });\nJsonLdProductReviewBuilder = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], JsonLdProductReviewBuilder);\n\nlet CurrentProductService = class CurrentProductService {\n    constructor(routingService, productService, features) {\n        this.routingService = routingService;\n        this.productService = productService;\n        this.features = features;\n        this.DEFAULT_PRODUCT_SCOPE = this.features && this.features.isLevel('1.4') ? ProductScope.DETAILS : '';\n    }\n    getProduct(scopes) {\n        return this.routingService.getRouterState().pipe(map(state => state.state.params['productCode']), filter(Boolean), switchMap((productCode) => this.productService.get(productCode, \n        // TODO deprecated since 1.4 - should be replaced with 'scopes || this.DEFAULT_PRODUCT_SCOPE'\n        this.features && this.features.isLevel('1.4')\n            ? scopes || this.DEFAULT_PRODUCT_SCOPE\n            : undefined\n        // deprecated END\n        )));\n    }\n};\nCurrentProductService.ctorParameters = () => [\n    { type: RoutingService },\n    { type: ProductService },\n    { type: FeatureConfigService }\n];\nCurrentProductService.ɵprov = ɵɵdefineInjectable({ factory: function CurrentProductService_Factory() { return new CurrentProductService(ɵɵinject(RoutingService), ɵɵinject(ProductService), ɵɵinject(FeatureConfigService)); }, token: CurrentProductService, providedIn: \"root\" });\nCurrentProductService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CurrentProductService);\n\n/**\n * Adds the minimal structured data for the product, see https://schema.org/product.\n * The actual data collection is delegated to `JsonLdBuilder`s, which can be injected\n * using the `JSONLD_PRODUCT_BUILDER` token.\n */\nlet ProductSchemaBuilder = class ProductSchemaBuilder {\n    constructor(currentProduct, builders) {\n        this.currentProduct = currentProduct;\n        this.builders = builders;\n    }\n    build() {\n        return this.currentProduct.getProduct().pipe(startWith(null), switchMap((product) => {\n            if (product) {\n                return combineLatest(this.collect(product)).pipe(map((res) => Object.assign({}, ...res)));\n            }\n            return of({});\n        }));\n    }\n    collect(product) {\n        if (!product || !product.code) {\n            return [];\n        }\n        const builders = this.builders\n            ? this.builders.map(builder => builder.build(product))\n            : [];\n        return [\n            of({\n                '@context': 'http://schema.org',\n                '@type': 'Product',\n            }),\n            ...builders,\n        ];\n    }\n};\nProductSchemaBuilder.ctorParameters = () => [\n    { type: CurrentProductService },\n    { type: Array, decorators: [{ type: Optional }, { type: Inject, args: [JSONLD_PRODUCT_BUILDER,] }] }\n];\nProductSchemaBuilder.ɵprov = ɵɵdefineInjectable({ factory: function ProductSchemaBuilder_Factory() { return new ProductSchemaBuilder(ɵɵinject(CurrentProductService), ɵɵinject(JSONLD_PRODUCT_BUILDER, 8)); }, token: ProductSchemaBuilder, providedIn: \"root\" });\nProductSchemaBuilder = __decorate([\n    Injectable({\n        providedIn: 'root',\n    }),\n    __param(1, Optional()),\n    __param(1, Inject(JSONLD_PRODUCT_BUILDER))\n], ProductSchemaBuilder);\n\n/**\n * Provides several standard json-ld builders that contribute\n * to colleting and building json-ld data.\n */\nlet JsonLdBuilderModule = class JsonLdBuilderModule {\n};\nJsonLdBuilderModule = __decorate([\n    NgModule({\n        providers: [\n            {\n                provide: SCHEMA_BUILDER,\n                useExisting: ProductSchemaBuilder,\n                multi: true,\n            },\n            {\n                provide: SCHEMA_BUILDER,\n                useExisting: BreadcrumbSchemaBuilder,\n                multi: true,\n            },\n            // lower level json-ld builder classes offering fine-graiend control\n            // for product related schema's\n            {\n                provide: JSONLD_PRODUCT_BUILDER,\n                useExisting: JsonLdBaseProductBuilder,\n                multi: true,\n            },\n            {\n                provide: JSONLD_PRODUCT_BUILDER,\n                useExisting: JsonLdProductOfferBuilder,\n                multi: true,\n            },\n            {\n                provide: JSONLD_PRODUCT_BUILDER,\n                useExisting: JsonLdProductReviewBuilder,\n                multi: true,\n            },\n        ],\n    })\n], JsonLdBuilderModule);\n\nconst ASM_ENABLED_LOCAL_STORAGE_KEY = 'asm_enabled';\n\nlet AsmComponentService = class AsmComponentService {\n    constructor(authService, asmAuthService, routingService, winRef) {\n        this.authService = authService;\n        this.asmAuthService = asmAuthService;\n        this.routingService = routingService;\n        this.winRef = winRef;\n    }\n    logoutCustomerSupportAgentAndCustomer() {\n        this.authService\n            .getUserToken()\n            .pipe(take(1))\n            .subscribe(token => {\n            if (this.asmAuthService.isCustomerEmulationToken(token)) {\n                this.logoutCustomer();\n            }\n            this.asmAuthService.logoutCustomerSupportAgent();\n        });\n    }\n    logoutCustomer() {\n        this.authService.logout();\n        this.routingService.go({ cxRoute: 'home' });\n    }\n    isCustomerEmulationSessionInProgress() {\n        return this.authService\n            .getUserToken()\n            .pipe(mergeMap(userToken => of(this.asmAuthService.isCustomerEmulationToken(userToken))));\n    }\n    /**\n     * We're currently only removing the persisted storage in the browser\n     * to ensure the ASM experience isn't loaded on the next visit. There are a few\n     * optimsiations we could think of:\n     * - drop the `asm` parameter from the URL, in case it's still there\n     * - remove the generated UI from the DOM (outlets currently do not support this)\n     */\n    unload() {\n        if (this.winRef.localStorage) {\n            this.winRef.localStorage.removeItem(ASM_ENABLED_LOCAL_STORAGE_KEY);\n        }\n    }\n};\nAsmComponentService.ctorParameters = () => [\n    { type: AuthService },\n    { type: AsmAuthService },\n    { type: RoutingService },\n    { type: WindowRef }\n];\nAsmComponentService.ɵprov = ɵɵdefineInjectable({ factory: function AsmComponentService_Factory() { return new AsmComponentService(ɵɵinject(AuthService), ɵɵinject(AsmAuthService), ɵɵinject(RoutingService), ɵɵinject(WindowRef)); }, token: AsmComponentService, providedIn: \"root\" });\nAsmComponentService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], AsmComponentService);\n\nlet AsmMainUiComponent = class AsmMainUiComponent {\n    constructor(authService, asmAuthService, userService, asmComponentService, globalMessageService, routingService) {\n        this.authService = authService;\n        this.asmAuthService = asmAuthService;\n        this.userService = userService;\n        this.asmComponentService = asmComponentService;\n        this.globalMessageService = globalMessageService;\n        this.routingService = routingService;\n        this.disabled = false;\n        this.startingCustomerSession = false;\n    }\n    ngOnInit() {\n        this.csAgentToken$ = this.asmAuthService.getCustomerSupportAgentToken();\n        this.csAgentTokenLoading$ = this.asmAuthService.getCustomerSupportAgentTokenLoading();\n        this.customer$ = this.authService.getUserToken().pipe(switchMap(token => {\n            if (token && !!token.access_token) {\n                this.handleCustomerSessionStartRedirection(token);\n                return this.userService.get();\n            }\n            else {\n                return of(undefined);\n            }\n        }));\n    }\n    handleCustomerSessionStartRedirection(token) {\n        if (this.startingCustomerSession &&\n            this.asmAuthService.isCustomerEmulationToken(token)) {\n            this.startingCustomerSession = false;\n            this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n            this.routingService.go('/');\n        }\n    }\n    loginCustomerSupportAgent({ userId, password, }) {\n        this.asmAuthService.authorizeCustomerSupportAgent(userId, password);\n    }\n    logout() {\n        this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n    }\n    startCustomerEmulationSession({ customerId }) {\n        this.asmAuthService\n            .getCustomerSupportAgentToken()\n            .pipe(take(1))\n            .subscribe(customerSupportAgentToken => this.asmAuthService.startCustomerEmulationSession(customerSupportAgentToken, customerId))\n            .unsubscribe();\n        this.startingCustomerSession = true;\n    }\n    hideUi() {\n        this.disabled = true;\n        this.asmComponentService.unload();\n    }\n};\nAsmMainUiComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: AsmAuthService },\n    { type: UserService },\n    { type: AsmComponentService },\n    { type: GlobalMessageService },\n    { type: RoutingService }\n];\n__decorate([\n    HostBinding('class.hidden')\n], AsmMainUiComponent.prototype, \"disabled\", void 0);\nAsmMainUiComponent = __decorate([\n    Component({\n        selector: 'cx-asm-main-ui',\n        template: \"<div class=\\\"asm-bar\\\">\\n  <div class=\\\"asm-bar-branding\\\">\\n    <img\\n      class=\\\"logo\\\"\\n      src=\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAwCAYAAADuFn/PAAAAAXNSR0IArs4c6QAAD7RJREFUeAHtW3twVGcVP7t795V30rwJBBJeASq01NJgnZa2otTW2nHAqrRak+rUKfgYZ/xDW5lRR2e0/mGtAadqq6WjUAdNa4udqVZaEdtCKQ2FQEh5JSQh5Lnvp7/ft9lkd9l7swkhwMiZ3N27937fd8533ufcG9P1L/VE5SpMOwdMmk0iocDzWjAUnnbk/9cITSYx2xwS9Xs3Wzs7NmqhcOT/mh/Tunkw32SzScjr2Vy2v3XDa5tWhbRI5KoHmi4hmGx2ifi8mz8UmvHI9k2VyvVokasWMC38N8HtRHyezUejex5pXbdu1O9r5qsCuLgCUD4fmu/1bq5sbd9wdNMY84lYM10VwMUTAJlvtUnU491c0XZc+fxUZFo0Mn4QjiJMMFREcKJG4xxrC/7ETCQ854+JAtbBny5Mak3d1ab3BsKtCrhhuJ2K9lNpmU+KYAHpWRAFa4K4x7t5NouU5WhS4rRIvt0idotJ3MGIDPgj0usNSZ8vLMOBiIQhJQukoZkpHGOJcGXLiPD0WBNStOmvQ8ETAjp7iN0d++RelBLhBFsAnVQe/fXHZk7wDEuarXaJBrxNFe2nNzLb0VsBMWA0HoyO8WNDDnDxIzOy5ONzcuX6MqdU5VhxLZlYWoUvFJEud0iODQZkb5dXHa19PnEFw2LDBi0QRqqac14BBPnz2yul0GEZxZt68vzhQXm6pS+Gl9xLANL4uUWFsm5hPmiIjiPu2EQqSY8nJCeHAnK4zy+tOLrdQXXTClqVLFLwJKDM7BSLmMD8iN/btCRn3obtm+adz+CElTTlW0YuEDe1qR6M//oNJXJDRVbC0PNPqYFZVrPUFNjU8bHqHGUF3NxLx4ZkZ/uQdLnOF34Acad+To6srDRe/7ML8+T5Q/3KEpNFD5lijVKnWa4tdpxPWIZXeiGM/3S65Y/vD8hbnR6lLBdkEdR8DZrv9zUtyT+wYfu6+YbMJ5mjQZjMZ1H20HXF8s0VZWKjjU4C6IIWgyk8PlqVLY0vnhDGkMTVNJjA3bV5464+t9AhS4vtsqfDBWuiKY0Bk4dIhq5nbFbyWXGWJnfPzZc1NRT0gDy+p1uG/WHlmpJHZvALG6TmR/2epoOFBzccTEg1jWabTXBBpkhYgoGQNCy9Rr6zsnzSzE9ERKZvazknAX9IzFhf4QGuMFofNXmarKjMThye9pwWtqYmV6Jwc2R4fI3Rb/qyKQDGgvsWF8ovVlcJSEOPJsaTUTzkkdGBRMZstorA7SwqXLRBMmQ+STczC/IHwnA3TvlGfdkUbCe2xBsnhmVna79YTQi3YB7x8AhA0LfPzpNsW7JG6yG+BWOLHWYJgwHxNUa/KeUphPqZOfKt+nKlJIk0j+Ib2UPyb8QfMD/q8zYV9/Ru3L7ONK7bSSTZHIUZm6FJDdeXIrsZnynMdBh4jfbuR1B8YnenhBCIVZZFV4GDuLLh2j4xLz+RBsPzylyrspYAlIRrJB1TZAGJBHxmUZFcV5YFRUmDLxU/fpP5aC80Fff1GWY7iTgSzzWa26wCu6yA9I3g7VPDsu1Ar3zQ75MAGEwNLnBoUgtfv2JmriybkSM5SFcJO1p65Z3Tw2JnPgqtiUMIgluGsXUlzviljL7vnF8gLx86h7UShnNdIy3A0NeODcrrHwwqn56LrKv2GtA6K0+K4Pv1wAoF+STw7T05lBy4kibQ8lhkMdvxNZUMD06K+VxSC0NLawtto8xLwjPyYx+Y2bCtVVwjAYrpGvdOBXzlcFSeguVUF9rlzroiuXlOgfzmv2fEwgFwG4kQhitag80xUE8EbgLTZsISOgb9Y3MhzPEE8NapIdmyu0McyNRIDjOcmVC2x1ZXy621BbokLK/KEZQ8CPLJ9I9OwDpm9POR7fzqYPXyjTJBtzO6Dk4QH8MosPQ1goND4DSDNFCKDT4dHk99O8xRRSjKaTnR65Ff7jolX37ufTnT78UYBE1oafygT2Uhd9vcwkT8GZ3noVa4tSY/5tIS1jQBrxFYIWdkqurIAkMdoL2jzyvf/1u7dA8HdKdW5FmlCHEnFozH9qASAfDCYtLYz2+qe7P9gphPAhADEBipTQZwIzTwJ3fVSmm2VTy+kARgNeyiqkDFbzDFooQioh7w4PfovZFxDL7U5Mp8W1pMrLppYXqwBtbFuJ2MF2ptAFEwK4kO0MWkoGPAK/s7hnVnMhZmw30m4eI+aEZgPtzOr+pqTmzYvj25saa7oMENiDIq3UN+gyGxW5+6tkRurM6XHe/2yIstZ6XtrEcJTgOxTOPoluIVbypb+JvK+slF1+jiae/1yuvH+qVx5Yy0Y66tzJX5xVnScsYlrFpZA5AfRkCGcVwEljoKoDOMaz5UxXqgIQ7Aa6lxo1Mxj3l+OOD73eEFKze2rKvX1xa9hdNcx1aicqjLJb0ufZOMzyvPs8nDH62SPzculWceWAJmVUkNAlsAgdwFywhCS0LQstTDz0BfZJebEB/0YM8HA7Jjf7eqpNONYWF4x4JC8QVDav0g8LCvYwS8z3GJ9NDaEY9lfql+Fc4kg/sJJ8wNm20S9nu3+sKBr12Iz0+l10wtOQ2fTa3OFBjUbpqdL9/9xBz5y1eXyVNfWCy0EA0bc6Pw4oZJfPzwwWXdPr9IcrhzHdjV1icHod20LD1YXVes1qCgufZ4AmDKTOFTQUgDafPg+PwNFbIAqaYeuOEKe90B5XIUHgseIwa9W/3RYOPxTat8evMmc121o+m/m/51QlaBSdVFE0sRnVaLmse5LZ0ueeK14/IShKk6nbQvCDiLqd3iYl36uuAC950cFK8/KK9DEAvK0lfJc0uyZHlVrvzzyLmY+xnHAvIg8CpYrQM0ZiGAVF+TJXdDUe6+ttSwC9ra7ZJ+eASVraG3A5+/1VLqbmjfeOf4vlp3l+lvQAAoxHDvNLKDh7e+J1vWf0hmogczGVhSmSNbPr9EnvnPafnB344iINP8o3Lj7AJZDB+uB3va+6V70KcC+T9bz0nDyplpny8wzty1pFRePXQ2IwE8WD9DPgdtN2EiBWBFvMoEXnm/V/xwddnOLHY1n9OGfQ1tP5x65pMW1PgIRjiYYew/MSj3bdkrfz/YkwmdumO+WF8lP753IVLQqEod74LWscDRg1cP9ap+jxWMOgBL6BjQt/JVC4qkIgfv1JBurG8E1PyCLKvkI83OlPknoYgvvtslDjzDDQe8W8H8L7c9cXGYT9qRa2ETPJAZ2OEyTvS65StPvysP//6AvH18wGh/hvfWLq+QtcvLhW5g9aIS3bH96Mf/tw09IygAApL0DvlkdxuqXh0oy7PLzaglmNbGzEBn4CQuM2b86IUjctYFrxD0bTU5LI0Xk/kk0RxhMEs4GCbplnbs7ZC1T74lX9jytvzpzQ45Y6CVentdf1OVrIHLmGkQV/a098mpc24xgfmKDmj2Ky3GFnjX0jIIi3pjbAF6dKW7zjrksR2Hpfm9PtEi/q3RLG3KA246vBrdRCrQWTjgL1kJ/gPM4FGe75Dl8OV3LC6VW5CNVBSMHycWVuTKN1fXpi6f9Jsuh81Atq0JVIAPetwyhEedeToV+sraIvSgnOhank+7WmSCH0eRhv8Ymr8TzwSQ7zxr7rc9dPzxqc129Egy1Xz9paRd8Eeqt+Y1lVNjwzwvRz/l08tnyCNgbhH88YUAU8O2brd0IhX24zlzCVzMbGQ7FLDR06nvbTsodvitR++tmxT6QU9QDqEafuGdTmned0b6fSaxg/mRwa6Hjj/9oH4QmhQ2/UnnWQALFWYbDFpxQfCb+QMrRAqgH02xJ3celdOIF5sbl+NhRHykPiK9O9l2TZbOyleH3ph019fADe05qh8rOOeNw72y+0gv6I7thSnxOaSXp895YGUelfmxTnA4nGKPBrfCrTW2P/3glKea6eiPX9Ms8P9xYMq4/iOzlAvY09qrLttIfDr+QiLtnUMqflM40w3LqgtQNxh3A954v0cebz4szpE2OWnkXpiWMsdnC8XuQLaDgBs1WxoudsBNxyNYQEwAZP6c0hx5dO0SVUTthGlu//cJOXC8X4bx8JouSAkCJsAZOXgW8NAdtcoq0i18sa9lA//NC/WLO+Jnzygbb3Kkvs2haIMgzKhwI0g1oxbrJWE+6dAs9CmAIPzvA7fORsESaxfcc2OVfOrDVXKsa1gOnhyQDrSbB1Ce0y+XoVBbsaBEFs3M/MlWDMvUfjoSNDvdyrRM7i++x8QxJjI/6Hs2rFkveqqZiDf1XFkAU7B55Tny6fpZSfep8XORyfC4IoEtWFp4BBsZAb4wpv45Iuh/1uvvY8CdVp8fpyP+rbH4iSIQrV81B2kfnuxPA/AlgJ9tf0/KUR8sqi6U8kInyn6rCvpMAs6hGDuJVHQ/CrL7bquRuZXjv8KSjmy0/tWTOfV0bmSAcjsh/7OewMC0Zjvp6OM1ja+J1MGVrL1ljt6YKb/ehuD93KvHVJfSjnaB06aJNvLWHRXWj86lF+mpF4IqRTo6WQHwAQULPB4EExtrYL7X6Wg8/utLq/lxpppZUfrQ+37tnTNq4/Ebk/lmoH793TOKeUbzd2EM35jIBvMZcfxgthvxhYfXizYwqmEnnkjxIf+/W7rQqoox0GjNdPdoASw0eZjRzxf4fG+H45L6/FQ6zVS8M2dd8u0nd8v9P/yH/H7nETnd40odZ/ib7NmHfPurP90lbx7uESdyeyPYtb8TjwbBHAiMLpDtcAoifvAa7/Hd0kNoVUyUnjhu9b4n10fANQX8f3BndTa2vXzxGmtxvBP5Nl33pW1KvUCnejWR2laEarQOvnnZvGKpm10olXgUWJhrFxs0lsCxLk9AulG9toBBb0Cj6a/d3qCsva1W5lTQZ6tl1fjEj0Fo+XOvHAUuMHksNiYOSTpnS/tOJAcLZvFhfvo1kyYk/Njd0i1vHxlAbAltc3VlP3C5MZ+kmq574E/n7YquhO+JsuPLgsWJjiaDZLylywk+uI1hMJzpKythK1wGGcrfRi6DYyjIDHgfYyUGBrDmZP6XzWZHO0NCzR6LfX3rb+/Rfwofw3RJPrV4gErErlwBKmDlE3AjDAYMBn1J3V8ykk+9NPaRCTQL/KmXeg16/6Nj1UkGH1iT/48AZBkMHhvCt5Qj4UCzW3NctswntRr5lgmo/DmVBzGeZzJ9WseQ+eFgoNkz5Frf2vzZy1Lz4wxBDM5QAvEZl/m32cJUE8y3kfkNlzXzyUr1XtBlztOMyVNuJ+Rvdg571u+7Apg/IoCM93dZD+S7mnA7f/W4PPdfKcwfEcCV74KU26HPd3vvvxLcTqImX4pWfiL+Cz7nf6ZEI8G/ut3eK8Lnp254pAOTevnK+G0yI4RFQvtzQ9r6vc0NEyvfL5Mt/g8XIbTVhsig+gAAAABJRU5ErkJggg==\\\"\\n      width=\\\"48\\\"\\n      height=\\\"24\\\"\\n      alt=\\\"{{ 'asm.mainLogoLabel' | cxTranslate }}\\\"\\n    />\\n\\n    <div class=\\\"asm-title\\\">\\n      {{ 'asm.mainTitle' | cxTranslate }}\\n    </div>\\n  </div>\\n  <div class=\\\"asm-bar-actions\\\">\\n    <cx-asm-session-timer\\n      *ngIf=\\\"(csAgentToken$ | async)?.access_token\\\"\\n    ></cx-asm-session-timer>\\n\\n    <a\\n      class=\\\"close\\\"\\n      title=\\\"{{ 'asm.hideUi' | cxTranslate }}\\\"\\n      *ngIf=\\\"\\n        !(csAgentToken$ | async)?.access_token &&\\n        !(csAgentTokenLoading$ | async)\\n      \\\"\\n      (click)=\\\"hideUi()\\\"\\n    ></a>\\n\\n    <a\\n      class=\\\"logout\\\"\\n      title=\\\"{{ 'asm.logout' | cxTranslate }}\\\"\\n      *ngIf=\\\"(csAgentToken$ | async)?.access_token\\\"\\n      (click)=\\\"logout()\\\"\\n    >\\n    </a>\\n  </div>\\n</div>\\n\\n<ng-container *ngIf=\\\"(csAgentToken$ | async)?.access_token; else showLoginForm\\\">\\n  <cx-customer-emulation\\n    *ngIf=\\\"customer$ | async as customer; else showCustomerSelection\\\"\\n  ></cx-customer-emulation>\\n  <ng-template #showCustomerSelection>\\n    <cx-customer-selection\\n      (submitEvent)=\\\"startCustomerEmulationSession($event)\\\"\\n    ></cx-customer-selection>\\n  </ng-template>\\n</ng-container>\\n\\n<ng-template #showLoginForm>\\n  <cx-csagent-login-form\\n    (submitEvent)=\\\"loginCustomerSupportAgent($event)\\\"\\n    [csAgentTokenLoading]=\\\"csAgentTokenLoading$ | async\\\"\\n  ></cx-csagent-login-form>\\n</ng-template>\\n\",\n        encapsulation: ViewEncapsulation.None,\n        styles: [\"cx-asm-main-ui{font-family:Arial,sans-serif;font-size:14px;width:100%;display:flex;flex-direction:column}cx-asm-main-ui .close,cx-asm-main-ui .logout{cursor:pointer;width:16px;height:16px}cx-asm-main-ui .close{background-image:url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='white' d='M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z'/%3E%3C/svg%3E\\\")}cx-asm-main-ui .logout{background-image:url(\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23d1e3ff' d='M11,2.7c1.2,0.6,2.2,1.5,2.9,2.6c1.3,1.9,1.5,4.4,0.6,6.5c-0.3,0.8-0.8,1.6-1.5,2.2c-0.6,0.6-1.4,1.1-2.2,1.5 C9.9,15.8,9,16,8,16c-0.9,0-1.9-0.2-2.7-0.5c-0.8-0.4-1.6-0.9-2.2-1.5c-0.6-0.6-1.1-1.4-1.5-2.2C0.7,9.6,0.9,7.2,2.1,5.3 c0.7-1.1,1.7-2,2.9-2.6v1.1C4.1,4.3,3.3,5.1,2.8,6C2.3,6.9,2,7.9,2,9c0,1.6,0.6,3.2,1.8,4.3c0.5,0.5,1.2,1,1.9,1.3 c1.5,0.6,3.2,0.6,4.7,0c0.7-0.3,1.4-0.7,1.9-1.3C13.4,12.1,14,10.6,14,9c0-1.1-0.3-2.1-0.8-3c-0.5-0.9-1.3-1.7-2.2-2.2 C11,3.8,11,2.7,11,2.7z M8,9C7.7,9,7.5,8.9,7.3,8.7C7.1,8.5,7,8.3,7,8V1c0-0.3,0.1-0.5,0.3-0.7c0.4-0.4,1-0.4,1.4,0 C8.9,0.5,9,0.7,9,1v7c0,0.3-0.1,0.5-0.3,0.7C8.5,8.9,8.2,9,8,9z'/%3E%3C/svg%3E%0A\\\")}cx-asm-main-ui button{padding:0 12px;white-space:nowrap;border-radius:4px;height:36px;font-weight:400;border-style:solid;border-width:1px}cx-asm-main-ui button:disabled{opacity:.4;cursor:not-allowed}cx-asm-main-ui .spinner{display:flex;justify-content:center;width:100%;color:#0a6ed1}cx-asm-main-ui .spinner>div{width:8px;height:8px;margin:6px;border-radius:100%;background-color:currentColor;-webkit-animation:1s infinite spinner-dots-pulse;animation:1s infinite spinner-dots-pulse}cx-asm-main-ui .spinner>div:nth-child(1){-webkit-animation-delay:-.2s;animation-delay:-.2s}@-webkit-keyframes spinner-dots-pulse{0%,100%,60%{transform:scale(1)}30%{transform:scale(2)}}@keyframes spinner-dots-pulse{0%,100%,60%{transform:scale(1)}30%{transform:scale(2)}}cx-asm-main-ui.hidden{display:none}cx-asm-main-ui .asm-bar{color:#fff;background-color:#354a5f;height:48px;display:flex;padding:0 32px;justify-content:space-between;z-index:1}cx-asm-main-ui .asm-bar-branding{display:flex;align-items:center}cx-asm-main-ui .asm-bar-branding .logo{-webkit-margin-end:8px;margin-inline-end:8px}cx-asm-main-ui .asm-bar-branding .asm-title{font-size:16px;font-weight:700}cx-asm-main-ui .asm-bar-actions{display:flex;justify-content:flex-end;align-items:center}cx-asm-main-ui>:nth-child(2){margin:32px;display:flex;width:calc(100vw - 4rem)}@media (min-width:767px){cx-asm-main-ui>:nth-child(2){width:50vw}}cx-asm-main-ui input{outline:0;border:1px solid #89919a;color:#32363a;background-color:#fff;border-radius:4px;padding:0 12px;height:36px}cx-asm-main-ui input:focus{box-shadow:0 0 0 1px #fafafa}cx-asm-main-ui input:hover{border-color:#085caf}cx-asm-main-ui input::-webkit-input-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input::-moz-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input:-ms-input-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input::-ms-input-placeholder{color:#74777a;font-style:italic}cx-asm-main-ui input::placeholder{color:#74777a;font-style:italic}@media (max-width:575px){cx-asm-main-ui .asm-bar-branding .asm-title{display:none}cx-asm-main-ui .asm-alert{margin-top:30px}}\"]\n    })\n], AsmMainUiComponent);\n\n/**\n * The AsmEnablerService is used to enable ASM for those scenario's\n * where it's actually used. This service is added to avoid any polution\n * of the UI and runtime performance for the ordinary production user.\n */\nlet AsmEnablerService = class AsmEnablerService {\n    constructor(location, winRef, componentFactoryResolver, outletService) {\n        this.location = location;\n        this.winRef = winRef;\n        this.componentFactoryResolver = componentFactoryResolver;\n        this.outletService = outletService;\n        /** indicates whether the ASM UI has been added already */\n        this.isUiAdded = false;\n    }\n    /**\n     * Loads the ASM UI if needed. The ASM UI will be added based on the\n     * existence of a URL parameter or previous usage given by local storage.\n     */\n    load() {\n        if (this.isEnabled()) {\n            this.addUi();\n        }\n    }\n    /**\n     * Indicates whether the ASM module is enabled.\n     */\n    isEnabled() {\n        if (this.isLaunched() && !this.isUsedBefore()) {\n            if (this.winRef.localStorage) {\n                this.winRef.localStorage.setItem(ASM_ENABLED_LOCAL_STORAGE_KEY, 'true');\n            }\n        }\n        return this.isLaunched() || this.isUsedBefore();\n    }\n    /**\n     * Indicates whether ASM is launched through the URL,\n     * using the asm flag in the URL.\n     */\n    isLaunched() {\n        const params = this.location.path().split('?')[1];\n        return params && params.split('&').includes('asm=true');\n    }\n    /**\n     * Evaluates local storage where we persist the usage of ASM.\n     */\n    isUsedBefore() {\n        return (this.winRef.localStorage &&\n            this.winRef.localStorage.getItem(ASM_ENABLED_LOCAL_STORAGE_KEY) === 'true');\n    }\n    /**\n     * Adds the ASM UI by using the `cx-storefront` outlet.\n     */\n    addUi() {\n        if (this.isUiAdded) {\n            return;\n        }\n        const factory = this.componentFactoryResolver.resolveComponentFactory(AsmMainUiComponent);\n        this.outletService.add('cx-storefront', factory, OutletPosition.BEFORE);\n        this.isUiAdded = true;\n    }\n};\nAsmEnablerService.ctorParameters = () => [\n    { type: Location },\n    { type: WindowRef },\n    { type: ComponentFactoryResolver },\n    { type: OutletService }\n];\nAsmEnablerService.ɵprov = ɵɵdefineInjectable({ factory: function AsmEnablerService_Factory() { return new AsmEnablerService(ɵɵinject(Location), ɵɵinject(WindowRef), ɵɵinject(ComponentFactoryResolver), ɵɵinject(OutletService)); }, token: AsmEnablerService, providedIn: \"root\" });\nAsmEnablerService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], AsmEnablerService);\n\n/**\n * The ASM loader module takes care of loading the ASM UI\n * only in case there's a reason to do so.\n */\nlet AsmLoaderModule = class AsmLoaderModule {\n};\nAsmLoaderModule = __decorate([\n    NgModule({\n        imports: [CommonModule, PageComponentModule],\n        providers: [\n            {\n                provide: APP_INITIALIZER,\n                useFactory: asmFactory,\n                deps: [AsmEnablerService],\n                multi: true,\n            },\n        ],\n    })\n], AsmLoaderModule);\n/**\n *\n * We do not like to block the UI, which is why we delgate loading of ASM\n * to a real component; the router and state aren't available in an optimized\n * way during the APP_INITIALIZER.\n */\nfunction asmFactory(asmEnablerService) {\n    const isReady = () => {\n        asmEnablerService.load();\n    };\n    return isReady;\n}\n\nlet AsmSessionTimerComponent = class AsmSessionTimerComponent {\n    constructor(config, asmComponentService, authService, routingService, changeDetectorRef) {\n        this.config = config;\n        this.asmComponentService = asmComponentService;\n        this.authService = authService;\n        this.routingService = routingService;\n        this.changeDetectorRef = changeDetectorRef;\n        this.subscriptions = new Subscription();\n        this.maxStartDelayInSeconds = 60000;\n    }\n    ngOnInit() {\n        this.timeLeft = this.getTimerStartDelayInSeconds();\n        this.interval = setInterval(() => {\n            if (this.timeLeft > 0) {\n                this.timeLeft--;\n            }\n            else {\n                clearInterval(this.interval);\n                this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n            }\n            this.changeDetectorRef.markForCheck();\n        }, 1000);\n        this.resetOnNavigate();\n        this.resetOnCustomerSessionChange();\n    }\n    resetOnNavigate() {\n        this.subscriptions.add(this.routingService.isNavigating().subscribe(isNavigating => {\n            if (isNavigating) {\n                this.resetTimer();\n            }\n        }));\n    }\n    resetOnCustomerSessionChange() {\n        this.subscriptions.add(this.authService\n            .getOccUserId()\n            .pipe(distinctUntilChanged())\n            .subscribe(_ => this.resetTimer()));\n    }\n    resetTimer() {\n        if (this.timeLeft > 0) {\n            this.timeLeft = this.getTimerStartDelayInSeconds();\n        }\n    }\n    getTimerStartDelayInSeconds() {\n        if (this.config.asm.agentSessionTimer.startingDelayInSeconds >\n            this.maxStartDelayInSeconds) {\n            return this.maxStartDelayInSeconds;\n        }\n        else {\n            return this.config.asm.agentSessionTimer.startingDelayInSeconds;\n        }\n    }\n    ngOnDestroy() {\n        this.subscriptions.unsubscribe();\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n    }\n};\nAsmSessionTimerComponent.ctorParameters = () => [\n    { type: AsmConfig },\n    { type: AsmComponentService },\n    { type: AuthService },\n    { type: RoutingService },\n    { type: ChangeDetectorRef }\n];\nAsmSessionTimerComponent = __decorate([\n    Component({\n        selector: 'cx-asm-session-timer',\n        template: \"<span class=\\\"label\\\">{{ 'asm.agentSessionTimer.label' | cxTranslate }}:</span>\\n<span class=\\\"time\\\"\\n  >{{ timeLeft | formatTimer }}\\n  {{ 'asm.agentSessionTimer.minutes' | cxTranslate }}</span\\n>\\n<a\\n  class=\\\"reset\\\"\\n  title=\\\"{{ 'asm.agentSessionTimer.reset' | cxTranslate }}\\\"\\n  (click)=\\\"resetTimer()\\\"\\n>\\n</a>\\n\",\n        encapsulation: ViewEncapsulation.None,\n        styles: [\"cx-asm-session-timer{display:flex;align-items:center;height:16px;margin:0 15px}cx-asm-session-timer .label{margin:0 6px}@media (max-width:575px){cx-asm-session-timer .label{display:none}}cx-asm-session-timer .time{font-weight:600}cx-asm-session-timer .reset{margin:0 15px;cursor:pointer;width:16px;height:16px;background:url(\\\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23d1e3ff' d='M14.9,7.5l-1,0.2c0.2,0.9,0.1,1.7-0.1,2.5c-0.3,1-0.8,2-1.5,2.7c-1.1,1.1-2.7,1.8-4.2,1.8 c-0.8,0-1.5-0.1-2.3-0.4c-1.5-0.6-2.7-1.8-3.3-3.3C2.1,10.2,2,9.5,2,8.7c0-1.6,0.7-3.1,1.8-4.3c0.7-0.8,1.7-1.3,2.7-1.5 c1-0.3,2-0.2,3,0l0,0v-1c-1-0.2-2.1-0.2-3.1,0C4.2,2.4,2.4,4,1.5,6.1C1.2,6.9,1,7.8,1,8.7c0,0.9,0.2,1.8,0.5,2.6 c0.4,0.9,0.9,1.7,1.5,2.3c0.7,0.7,1.4,1.2,2.3,1.5c0.8,0.3,1.7,0.5,2.6,0.5c0.9,0,1.8-0.2,2.6-0.5c2.1-0.9,3.7-2.7,4.2-5 C15,9.3,15,8.4,14.9,7.5z'/%3E%3Cpolygon fill='%23d1e3ff' points='11.5,2.8 9.2,4.5 9.7,0.5 '/%3E%3C/svg%3E%0A\\\") center center no-repeat}\"]\n    })\n], AsmSessionTimerComponent);\n\nlet FormatTimerPipe = class FormatTimerPipe {\n    transform(totalSeconds) {\n        if (totalSeconds < 0) {\n            totalSeconds = 0;\n        }\n        const minutes = Math.floor(totalSeconds / 60);\n        const seconds = totalSeconds % 60;\n        let zeroPaddedMinutes;\n        if (minutes < 10) {\n            zeroPaddedMinutes = ('00' + minutes).slice(-2);\n        }\n        else {\n            zeroPaddedMinutes = minutes + '';\n        }\n        const zeroPaddedSeconds = ('00' + seconds).slice(-2);\n        return `${zeroPaddedMinutes}:${zeroPaddedSeconds}`;\n    }\n};\nFormatTimerPipe = __decorate([\n    Pipe({\n        name: 'formatTimer',\n    })\n], FormatTimerPipe);\n\n/**\n * Utility class when working with forms.\n */\nclass FormUtils {\n    /**\n     *\n     * Validates a field of the given form group\n     *\n     * If the field is NOT valid (or invalid), the method returns `true`.\n     *\n     * @param form Form with fields to check\n     * @param formControlName Name of the form field to check\n     * @param submitted Has the form been submitted\n     */\n    static isNotValidField(form, formControlName, submitted) {\n        const control = form.get(formControlName);\n        return control.invalid && (submitted || (control.touched && control.dirty));\n    }\n}\n\nlet CSAgentLoginFormComponent = class CSAgentLoginFormComponent {\n    constructor(fb) {\n        this.fb = fb;\n        this.submitClicked = false;\n        this.csAgentTokenLoading = false;\n        this.submitEvent = new EventEmitter();\n    }\n    ngOnInit() {\n        this.form = this.fb.group({\n            userId: ['', [Validators.required]],\n            password: ['', [Validators.required]],\n        });\n    }\n    onSubmit() {\n        this.submitClicked = true;\n        if (this.form.invalid) {\n            return;\n        }\n        this.submitEvent.emit({\n            userId: this.form.controls.userId.value,\n            password: this.form.controls.password.value,\n        });\n    }\n    isNotValid(formControlName) {\n        return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);\n    }\n};\nCSAgentLoginFormComponent.ctorParameters = () => [\n    { type: FormBuilder }\n];\n__decorate([\n    Input()\n], CSAgentLoginFormComponent.prototype, \"csAgentTokenLoading\", void 0);\n__decorate([\n    Output()\n], CSAgentLoginFormComponent.prototype, \"submitEvent\", void 0);\nCSAgentLoginFormComponent = __decorate([\n    Component({\n        selector: 'cx-csagent-login-form',\n        template: \"<form (submit)=\\\"onSubmit()\\\" [formGroup]=\\\"form\\\" *ngIf=\\\"!csAgentTokenLoading\\\">\\n  <label>\\n    <input\\n      type=\\\"text\\\"\\n      [class.is-invalid]=\\\"isNotValid('userId')\\\"\\n      formControlName=\\\"userId\\\"\\n      placeholder=\\\"{{ 'asm.loginForm.userId.label' | cxTranslate }}\\\"\\n    />\\n    <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('userId')\\\">\\n      <span>{{ 'asm.loginForm.userId.required' | cxTranslate }}</span>\\n    </div>\\n  </label>\\n\\n  <label>\\n    <input\\n      type=\\\"password\\\"\\n      [class.is-invalid]=\\\"isNotValid('password')\\\"\\n      placeholder=\\\"{{ 'asm.loginForm.password.label' | cxTranslate }}\\\"\\n      formControlName=\\\"password\\\"\\n    />\\n    <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('password')\\\">\\n      <span>{{ 'asm.loginForm.password.required' | cxTranslate }}</span>\\n    </div>\\n  </label>\\n  <button type=\\\"submit\\\">\\n    {{ 'asm.loginForm.submit' | cxTranslate }}\\n  </button>\\n</form>\\n\\n<div\\n  *ngIf=\\\"csAgentTokenLoading\\\"\\n  class=\\\"spinner\\\"\\n  aria-hidden=\\\"false\\\"\\n  aria-label=\\\"Loading\\\"\\n>\\n  <div></div>\\n  <div></div>\\n  <div></div>\\n</div>\\n\",\n        encapsulation: ViewEncapsulation.None,\n        styles: [\"cx-csagent-login-form .invalid-feedback{display:block}cx-csagent-login-form form{display:flex;width:100%}@media (max-width:575px){cx-csagent-login-form form{flex-direction:column}cx-csagent-login-form form>*{margin-bottom:12px}}cx-csagent-login-form form label input{width:100%}cx-csagent-login-form button[type=submit]{color:#fff;border-color:#0a6ed1;background-color:#0a6ed1}cx-csagent-login-form button[type=submit]:hover{background-color:#085caf}@media (min-width:575px){cx-csagent-login-form label:nth-child(2){margin:0 8px}}\"]\n    })\n], CSAgentLoginFormComponent);\n\nlet CustomerEmulationComponent = class CustomerEmulationComponent {\n    constructor(asmComponentService, userService) {\n        this.asmComponentService = asmComponentService;\n        this.userService = userService;\n        this.subscription = new Subscription();\n    }\n    ngOnInit() {\n        this.subscription.add(this.userService.get().subscribe(user => (this.customer = user)));\n        this.isCustomerEmulationSessionInProgress$ = this.asmComponentService.isCustomerEmulationSessionInProgress();\n    }\n    logoutCustomer() {\n        this.asmComponentService.logoutCustomer();\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n};\nCustomerEmulationComponent.ctorParameters = () => [\n    { type: AsmComponentService },\n    { type: UserService }\n];\nCustomerEmulationComponent = __decorate([\n    Component({\n        selector: 'cx-customer-emulation',\n        template: \"<ng-container\\n  *ngIf=\\\"\\n    isCustomerEmulationSessionInProgress$ | async;\\n    else realCustomerSession\\n  \\\"\\n>\\n  <input\\n    formcontrolname=\\\"customer\\\"\\n    type=\\\"text\\\"\\n    disabled=\\\"true\\\"\\n    placeholder=\\\"{{ customer?.name }}, {{ customer?.uid }}\\\"\\n  />\\n  <button (click)=\\\"logoutCustomer()\\\">\\n    {{ 'asm.endSession' | cxTranslate }}\\n  </button>\\n</ng-container>\\n\\n<ng-template #realCustomerSession>\\n  <div class=\\\"asm-alert\\\" role=\\\"alert\\\">\\n    {{ 'asm.standardSessionInProgress' | cxTranslate }}\\n  </div>\\n</ng-template>\\n\",\n        encapsulation: ViewEncapsulation.None,\n        styles: [\"cx-customer-emulation{display:flex}@media (max-width:575px){cx-customer-emulation{flex-direction:column}cx-customer-emulation>*{margin-bottom:12px}}cx-customer-emulation button{padding-left:35px;color:#b00;border-color:#b00;background:url(\\\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23bb0000' d='M14.8,8c0-3.7-3-6.8-6.8-6.8S1.3,4.2,1.3,8s3,6.8,6.8,6.8S14.8,11.7,14.8,8z M2.6,8c0-3,2.4-5.5,5.5-5.5S13.5,5,13.5,8 s-2.4,5.5-5.5,5.5S2.6,11,2.6,8z M10.7,5.8v4.4c0,0.2-0.2,0.4-0.4,0.4H5.9c-0.2,0-0.4-0.2-0.4-0.4V5.8c0-0.2,0.2-0.4,0.4-0.4h4.4 C10.5,5.4,10.7,5.6,10.7,5.8z'/%3E%3C/svg%3E%0A\\\") 10px center no-repeat}@media (min-width:575px){cx-customer-emulation input{flex:1}cx-customer-emulation button{-webkit-margin-start:8px;margin-inline-start:8px}}cx-customer-emulation button:hover{background:url(\\\"data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='white' d='M14.8,8c0-3.7-3-6.8-6.8-6.8S1.3,4.2,1.3,8s3,6.8,6.8,6.8S14.8,11.7,14.8,8z M2.6,8c0-3,2.4-5.5,5.5-5.5S13.5,5,13.5,8 s-2.4,5.5-5.5,5.5S2.6,11,2.6,8z M10.7,5.8v4.4c0,0.2-0.2,0.4-0.4,0.4H5.9c-0.2,0-0.4-0.2-0.4-0.4V5.8c0-0.2,0.2-0.4,0.4-0.4h4.4 C10.5,5.4,10.7,5.6,10.7,5.8z'/%3E%3C/svg%3E%0A\\\") 10px center no-repeat #b00;color:#fff;fill:#fff}.asm-alert{padding:9px 12px;border-radius:4px;border:1px solid #89919a;background-color:#f4f4f4;color:#32363a;text-align:center;flex:1}\"]\n    })\n], CustomerEmulationComponent);\n\nlet CustomerSelectionComponent = class CustomerSelectionComponent {\n    constructor(fb, asmService, config) {\n        this.fb = fb;\n        this.asmService = asmService;\n        this.config = config;\n        this.subscription = new Subscription();\n        this.submitEvent = new EventEmitter();\n    }\n    ngOnInit() {\n        this.form = this.fb.group({\n            searchTerm: [''],\n        });\n        this.asmService.customerSearchReset();\n        this.searchResultsLoading$ = this.asmService.getCustomerSearchResultsLoading();\n        this.searchResults = this.asmService.getCustomerSearchResults();\n        this.subscription.add(this.form.controls.searchTerm.valueChanges\n            .pipe(debounceTime(300))\n            .subscribe(searchTermValue => {\n            this.handleSearchTerm(searchTermValue);\n        }));\n    }\n    handleSearchTerm(searchTermValue) {\n        if (Boolean(this.selectedCustomer) &&\n            searchTermValue !== this.selectedCustomer.name) {\n            this.selectedCustomer = undefined;\n        }\n        if (Boolean(this.selectedCustomer)) {\n            return;\n        }\n        this.asmService.customerSearchReset();\n        if (searchTermValue.trim().length >= 3) {\n            this.asmService.customerSearch({\n                query: searchTermValue,\n                pageSize: this.config.asm.customerSearch.maxResults,\n            });\n        }\n    }\n    selectCustomerFromList(customer) {\n        this.selectedCustomer = customer;\n        this.form.controls.searchTerm.setValue(this.selectedCustomer.name);\n        this.asmService.customerSearchReset();\n    }\n    onSubmit() {\n        if (Boolean(this.selectedCustomer)) {\n            this.submitEvent.emit({ customerId: this.selectedCustomer.customerId });\n        }\n    }\n    onDocumentClick(event) {\n        if (Boolean(this.resultList)) {\n            if (this.resultList.nativeElement.contains(event.target) ||\n                this.searchTerm.nativeElement.contains(event.target)) {\n                return;\n            }\n            else {\n                this.asmService.customerSearchReset();\n            }\n        }\n    }\n    closeResults() {\n        this.asmService.customerSearchReset();\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n        this.asmService.customerSearchReset();\n    }\n};\nCustomerSelectionComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: AsmService },\n    { type: AsmConfig }\n];\n__decorate([\n    Output()\n], CustomerSelectionComponent.prototype, \"submitEvent\", void 0);\n__decorate([\n    ViewChild('resultList')\n], CustomerSelectionComponent.prototype, \"resultList\", void 0);\n__decorate([\n    ViewChild('searchTerm')\n], CustomerSelectionComponent.prototype, \"searchTerm\", void 0);\nCustomerSelectionComponent = __decorate([\n    Component({\n        selector: 'cx-customer-selection',\n        template: \"<form (submit)=\\\"onSubmit()\\\" [formGroup]=\\\"form\\\">\\n  <input\\n    #searchTerm\\n    type=\\\"text\\\"\\n    formControlName=\\\"searchTerm\\\"\\n    placeholder=\\\"{{ 'asm.customerSearch.searchTerm.label' | cxTranslate }}\\\"\\n  />\\n  <button type=\\\"submit\\\" [disabled]=\\\"!selectedCustomer\\\">\\n    {{ 'asm.customerSearch.submit' | cxTranslate }}\\n  </button>\\n</form>\\n\\n<div *ngIf=\\\"searchResults | async as results\\\" class=\\\"asm-results\\\" #resultList>\\n  <a\\n    *ngFor=\\\"let result of results.entries\\\"\\n    (click)=\\\"selectCustomerFromList(result)\\\"\\n    ><span class=\\\"result-name\\\">{{ result.name }}</span>\\n    <span class=\\\"result-id\\\">{{ result.uid }}</span></a\\n  >\\n  <a\\n    (click)=\\\"closeResults()\\\"\\n    *ngIf=\\\"\\n      !(searchResultsLoading$ | async) &&\\n      searchTerm.value.length >= 3 &&\\n      (!!results.entries && results.entries.length <= 0)\\n    \\\"\\n    >{{ 'asm.customerSearch.noMatch' | cxTranslate }}</a\\n  >\\n</div>\\n\\n<div class=\\\"asm-results\\\" *ngIf=\\\"searchResultsLoading$ | async\\\">\\n  <div class=\\\"spinner\\\" aria-hidden=\\\"false\\\" aria-label=\\\"Loading\\\">\\n    <div></div>\\n    <div></div>\\n    <div></div>\\n  </div>\\n</div>\\n\",\n        encapsulation: ViewEncapsulation.None,\n        host: {\n            '(document:click)': 'onDocumentClick($event)',\n        },\n        styles: [\"cx-customer-selection button[type=submit]{border-color:#0a7e3e;color:#fff;padding-left:35px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAKtmlDQ1BEaXNwbGF5AABIx62Wd1BT+RbHf/fe9EILICAl9N6lSwk9dOkgKiEJJJQYEoKIDZHFFVwLKiKgrugiRcFGkbUgFiwsgg2sC7IoqOtiwYbKu8Aj7L6Z98ebeWfm3N9nzpzf+Z1z7/3NfAGgApZQmA7LAZAhyBKF+3nSY+Pi6fghAAEYEIE+cGaxxUJGWFgQQG12/ad9uIdmo3bbfKoW+N9MnsMVswGAwlBO4ojZGSifQv0ZWyjKAgCpROO6K7KEU9yOsqIIbRDlO1OcMsMjU5w0w1+ncyLDvQDAoFMRKCyWKAUAijoap2ezU9A6lIUoWwk4fAHKU/26sXksDspHUDbLyFg+xf0oGyX9rU7KP2omSWuyWClSnpll2gjefLEwnbUS/L8tI10ye4YB6hSeyD8cXWXQd9aftjxQyoKkkNBZ5nOm86eZJ/GPmmW22Ct+ljks70Dp3vSQoFlO5vsypXWymJGzzBX7RMyyaHm49KxkkRdjllmiuXMlaVHSOI/LlNbP5UXGzHI2PzpklsVpEYFzOV7SuEgSLu2fK/DznDvXVzp7hvhv8/KZ0r1ZvEh/6eysuf65AsZcTXGstDcO19tnLidKmi/M8pSeJUwPk+Zz0/2kcXF2hHRvFvpDzu0Nk77DVFZA2CwDfxAG6MAGWIEcwAcgi5uTNTWE13LhShE/hZdFZ6C3i0tnCtgWZnQbK2snAKbu6syv8K5/+g5CyoS5WGY+AE7ofUCC52JLFwNwvAEAhdC5mMFn9Mqg3+DsdrZElD0Tw0w9sIAEZIEiUAWaQBcYAXO0O3vgAjyADwgAoSASxIGlgA14IAOIwAqwGqwHhaAYbAO7QDnYDw6CGnAUnAAt4Ay4AK6AG6AH3AUPwQAYBi/BGPgAJiAIwkNUiAapQlqQPmQK2UCOkBvkAwVB4VAclAilQAJIAq2GNkDFUAlUDh2AaqHj0GnoAnQN6oXuQ4PQKPQW+gIjMAVWhDVgA9gSdoQZcCAcCS+BU+BMOBcugLfAZXAVfARuhi/AN+C78AD8Eh5HAEJGlBFtxBxxRLyQUCQeSUZEyFqkCClFqpAGpA3pRG4jA8gr5DMGh6Fh6BhzjAvGHxOFYWMyMWsxmzHlmBpMM+YS5jZmEDOG+Y6lYtWxplhnLBMbi03BrsAWYkux1dgm7GXsXeww9gMOh1PGGeIccP64OFwqbhVuM24vrhHXjuvFDeHG8Xi8Kt4U74oPxbPwWfhC/B78Efx5/C38MP4TgUzQItgQfAnxBAEhn1BKqCOcI9wiPCdMEOWI+kRnYiiRQ1xJ3Eo8RGwj3iQOEydI8iRDkispkpRKWk8qIzWQLpMekd6RyWQdshN5EZlPziOXkY+Rr5IHyZ8pChQTihclgSKhbKEcprRT7lPeUalUA6oHNZ6aRd1CraVepD6hfpKhyVjIMGU4MutkKmSaZW7JvJYlyurLMmSXyubKlsqelL0p+0qOKGcg5yXHklsrVyF3Wq5PblyeJm8tHyqfIb9Zvk7+mvyIAl7BQMFHgaNQoHBQ4aLCEA2h6dK8aGzaBtoh2mXasCJO0VCRqZiqWKx4VLFbcUxJQWmBUrRSjlKF0lmlAWVE2UCZqZyuvFX5hPI95S/zNOYx5nHnbZrXMO/WvI8q81U8VLgqRSqNKndVvqjSVX1U01S3q7aoPlbDqJmoLVJbobZP7bLaq/mK813ms+cXzT8x/4E6rG6iHq6+Sv2gepf6uIamhp+GUGOPxkWNV5rKmh6aqZo7Nc9pjmrRtNy0+Fo7tc5rvaAr0Rn0dHoZ/RJ9TFtd219bon1Au1t7QsdQJ0onX6dR57EuSddRN1l3p26H7piell6w3mq9er0H+kR9R32e/m79Tv2PBoYGMQYbDVoMRgxVDJmGuYb1ho+MqEbuRplGVUZ3jHHGjsZpxnuNe0xgEzsTnkmFyU1T2NTelG+617TXDGvmZCYwqzLrM6eYM8yzzevNBy2ULYIs8i1aLF5b6lnGW2637LT8bmVnlW51yOqhtYJ1gHW+dZv1WxsTG7ZNhc0dW6qtr+0621bbNwtMF3AX7FvQb0ezC7bbaNdh983ewV5k32A/6qDnkOhQ6dDnqOgY5rjZ8aoT1snTaZ3TGafPzvbOWc4nnP9yMXdJc6lzGVlouJC78NDCIVcdV5brAdcBN7pbotvPbgPu2u4s9yr3px66HhyPao/nDGNGKuMI47WnlafIs8nzo5ez1xqvdm/E28+7yLvbR8Enyqfc54mvjm+Kb73vmJ+d3yq/dn+sf6D/dv8+pgaTzaxljgU4BKwJuBRICYwILA98GmQSJApqC4aDA4J3BD8K0Q8RhLSEglBm6I7Qx2GGYZlhvy7CLQpbVLHoWbh1+OrwzghaxLKIuogPkZ6RWyMfRhlFSaI6omWjE6Jroz/GeMeUxAzEWsauib0RpxbHj2uNx8dHx1fHjy/2Wbxr8XCCXUJhwr0lhktyllxbqrY0fenZZbLLWMtOJmITYxLrEr+yQllVrPEkZlJl0hjbi72b/ZLjwdnJGeW6cku4z5Ndk0uSR1JcU3akjPLceaW8V3wvfjn/Tap/6v7Uj2mhaYfTJtNj0hszCBmJGacFCoI0waXlmstzlvcKTYWFwoFM58xdmWOiQFG1GBIvEbdmKaKiqEtiJPlBMpjtll2R/WlF9IqTOfI5gpyulSYrN618nuub+8sqzCr2qo7V2qvXrx5cw1hzYC20NmltxzrddQXrhvP88mrWk9anrf8t3yq/JP/9hpgNbQUaBXkFQz/4/VBfKFMoKuzb6LJx/4+YH/k/dm+y3bRn0/ciTtH1Yqvi0uKvm9mbr/9k/VPZT5Nbkrd0b7Xfum8bbptg273t7ttrSuRLckuGdgTvaN5J31m08/2uZbuulS4o3b+btFuye6AsqKx1j96ebXu+lvPK71Z4VjRWqlduqvy4l7P31j6PfQ37NfYX7//yM//n/gN+B5qrDKpKD+IOZh98dij6UOcvjr/UVqtVF1d/Oyw4PFATXnOp1qG2tk69bms9XC+pHz2ScKTnqPfR1gbzhgONyo3Fx8AxybEXxxOP3zsReKLjpOPJhlP6pyqbaE1FzVDzyuaxFl7LQGtca+/pgNMdbS5tTb9a/Hr4jPaZirNKZ7eeI50rODd5Pvf8eLuw/dWFlAtDHcs6Hl6MvXjn0qJL3ZcDL1+94nvlYiej8/xV16tnrjlfO33d8XrLDfsbzV12XU2/2f3W1G3f3XzT4WZrj1NPW+/C3nO33G9duO19+8od5p0bd0Pu9t6Lutffl9A30M/pH7mffv/Ng+wHEw/zHmEfFT2We1z6RP1J1e/GvzcO2A+cHfQe7Hoa8fThEHvo5R/iP74OFzyjPit9rvW8dsRm5Myo72jPi8Uvhl8KX068KvxT/s/K10avT/3l8VfXWOzY8BvRm8m3m9+pvjv8fsH7jvGw8ScfMj5MfCz6pPqp5rPj584vMV+eT6z4iv9a9s34W9v3wO+PJjMmJ4UsEWtaCiCow8nJALw9DAA1DgBaDwCkxTNaetqgGf0/TeC/8YzenjZ7AA55ABCJ6vkQdN2HukEeqklQD5uKewDY1lbq/zZxsq3NTC1yCypNSicn36GaBW8MwLe+ycmJlsnJb9Vosw8AaP8wo+GnTGcMlfreU9SdM5H3n1r6X/dYEDmGJmdAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGL2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIGV4aWY6UGl4ZWxYRGltZW5zaW9uPSIyNSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjI3IiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOS0wOS0yNVQxMjoyODo1MS0wNDowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0iRGlzcGxheSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZTIyOTVhMC0yYWY0LTQ2Y2UtOThlNy0zZTU2YTM0YjFkZjUiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDozYmMzNWI0YS0wNjkxLTRmNDEtODk5OC1lYWFmOTI2NGQ2NmMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjZWE4Y2FhMC0yMGU1LTQzN2ItYmQ5YS03YjlmMGZiNmYyZTYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpjZWE4Y2FhMC0yMGU1LTQzN2ItYmQ5YS03YjlmMGZiNmYyZTYiIHN0RXZ0OndoZW49IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowZTIyOTVhMC0yYWY0LTQ2Y2UtOThlNy0zZTU2YTM0YjFkZjUiIHN0RXZ0OndoZW49IjIwMTktMDktMjVUMTI6MzI6MjAtMDQ6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuzZx/kAAAEoSURBVDjLY/z//z8DNQATA5UAhkGNe+f8f/757f+09e2kORXkNWR86P75/zCw7cax/6o9If/R1WDDOA368/cvmH7/7dP/tHXt/8k2KGlNy/8dN4/DXbf95rH/anhch9Mgz/kFYE3p6zv+f/j+GSwGokF8sgwCYZBLQC6CAZBL0V1HlEEwnLquDRxmMNfFrmyAqyEpHd1+85jh5Zd3YDYfOzeDlrgi4ehHdpFYi8f/KcdW///7DxKTQAP/e8zLJ81rfgtL/j949wws9vvvn/+9h5f9F212/090YEetqP2/+Nx2eABfeHbrv/WMNNKj/8fvX2D6+++f/+t3z/ov2Ojyn6wECQJHHlz8bzgplrws0rBn9v9XX97/L9zS/5+vwYkoQ0CYcdCVRwBmUrSjUTYI3gAAAABJRU5ErkJggg==) 10px center no-repeat #0a7e3e}cx-customer-selection form{display:flex;width:100%}@media (min-width:575px){cx-customer-selection button[type=submit]{-webkit-margin-start:8px;margin-inline-start:8px}cx-customer-selection form input{flex:1}}@media (max-width:575px){cx-customer-selection form{flex-direction:column}cx-customer-selection form>*{margin-bottom:12px}}cx-customer-selection .spinner{height:42px;align-items:center}cx-customer-selection .asm-results{width:calc(100vw - 4rem);border:1px solid #89919a;position:absolute;z-index:11;margin-top:40px;box-shadow:0 5px 20px 0 #d9d9d9,0 2px 8px 0 #ededed;background-color:#fff;border-radius:4px;min-height:50px}cx-customer-selection .asm-results a{color:#51555a;display:flex;flex-direction:column;cursor:pointer;padding:10px}@media (min-width:767px){cx-customer-selection .asm-results,cx-customer-selection form{width:50vw}cx-customer-selection .asm-results a{flex-direction:row}}cx-customer-selection .asm-results a *{flex:1}cx-customer-selection .asm-results a:hover{color:#32363a;background-color:#fafafa}\"]\n    })\n], CustomerSelectionComponent);\n\nlet AsmModule = class AsmModule {\n};\nAsmModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            I18nModule,\n            AsmModule$1.forRoot(),\n            AsmLoaderModule,\n        ],\n        declarations: [\n            AsmMainUiComponent,\n            CSAgentLoginFormComponent,\n            CustomerSelectionComponent,\n            AsmSessionTimerComponent,\n            FormatTimerPipe,\n            CustomerEmulationComponent,\n        ],\n        entryComponents: [AsmMainUiComponent],\n    })\n], AsmModule);\n\nlet OrderDetailsService = class OrderDetailsService {\n    constructor(userOrderService, routingService) {\n        this.userOrderService = userOrderService;\n        this.routingService = routingService;\n        this.orderCode$ = this.routingService\n            .getRouterState()\n            .pipe(map(routingData => routingData.state.params.orderCode));\n        this.orderLoad$ = this.orderCode$.pipe(tap(orderCode => {\n            if (orderCode) {\n                this.userOrderService.loadOrderDetails(orderCode);\n            }\n            else {\n                this.userOrderService.clearOrderDetails();\n            }\n        }), shareReplay({ bufferSize: 1, refCount: true }));\n    }\n    getOrderDetails() {\n        return this.orderLoad$.pipe(switchMap(() => this.userOrderService.getOrderDetails()));\n    }\n};\nOrderDetailsService.ctorParameters = () => [\n    { type: UserOrderService },\n    { type: RoutingService }\n];\nOrderDetailsService.ɵprov = ɵɵdefineInjectable({ factory: function OrderDetailsService_Factory() { return new OrderDetailsService(ɵɵinject(UserOrderService), ɵɵinject(RoutingService)); }, token: OrderDetailsService, providedIn: \"root\" });\nOrderDetailsService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], OrderDetailsService);\n\nlet PromotionService = class PromotionService {\n    constructor(cartService, orderDetailsService, checkoutService) {\n        this.cartService = cartService;\n        this.orderDetailsService = orderDetailsService;\n        this.checkoutService = checkoutService;\n    }\n    getOrderPromotions(promotionLocation) {\n        switch (promotionLocation) {\n            case PromotionLocation.ActiveCart:\n                return this.getOrderPromotionsFromCart();\n            case PromotionLocation.Checkout:\n                return this.getOrderPromotionsFromCheckout();\n            case PromotionLocation.Order:\n                return this.getOrderPromotionsFromOrder();\n            default:\n                return of([]);\n        }\n    }\n    getOrderPromotionsFromCart() {\n        return this.cartService\n            .getActive()\n            .pipe(map(cart => this.getOrderPromotionsFromCartHelper(cart)));\n    }\n    getOrderPromotionsFromCartHelper(cart) {\n        const potentialPromotions = [];\n        potentialPromotions.push(...(cart.potentialOrderPromotions || []));\n        const appliedPromotions = [];\n        appliedPromotions.push(...(cart.appliedOrderPromotions || []));\n        return [...potentialPromotions, ...appliedPromotions];\n    }\n    getOrderPromotionsFromCheckout() {\n        return this.checkoutService\n            .getOrderDetails()\n            .pipe(map(order => this.getOrderPromotionsFromOrderHelper(order)));\n    }\n    getOrderPromotionsFromOrder() {\n        return this.orderDetailsService\n            .getOrderDetails()\n            .pipe(map(order => this.getOrderPromotionsFromOrderHelper(order)));\n    }\n    getOrderPromotionsFromOrderHelper(order) {\n        const appliedOrderPromotions = [];\n        appliedOrderPromotions.push(...(order.appliedOrderPromotions || []));\n        return appliedOrderPromotions;\n    }\n    getProductPromotionForEntry(item, promotionLocation) {\n        switch (promotionLocation) {\n            case PromotionLocation.ActiveCart:\n                return this.cartService\n                    .getActive()\n                    .pipe(map(cart => this.getProductPromotion(item, cart.appliedProductPromotions || [])));\n            case PromotionLocation.Checkout:\n                return this.checkoutService\n                    .getOrderDetails()\n                    .pipe(map(order => this.getProductPromotion(item, order.appliedProductPromotions || [])));\n            case PromotionLocation.Order:\n                return this.orderDetailsService\n                    .getOrderDetails()\n                    .pipe(map(order => this.getProductPromotion(item, order.appliedProductPromotions || [])));\n        }\n    }\n    getProductPromotion(item, promotions) {\n        const entryPromotions = [];\n        if (promotions && promotions.length > 0) {\n            for (const promotion of promotions) {\n                if (promotion.description &&\n                    promotion.consumedEntries &&\n                    promotion.consumedEntries.length > 0) {\n                    for (const consumedEntry of promotion.consumedEntries) {\n                        if (this.isConsumedByEntry(consumedEntry, item)) {\n                            entryPromotions.push(promotion);\n                        }\n                    }\n                }\n            }\n        }\n        return entryPromotions;\n    }\n    isConsumedByEntry(consumedEntry, entry) {\n        const consumedEntryNumber = consumedEntry.orderEntryNumber;\n        if (entry.entries && entry.entries.length > 0) {\n            for (const subEntry of entry.entries) {\n                if (subEntry.entryNumber === consumedEntryNumber) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            return consumedEntryNumber === entry.entryNumber;\n        }\n    }\n};\nPromotionService.ctorParameters = () => [\n    { type: CartService },\n    { type: OrderDetailsService },\n    { type: CheckoutService }\n];\nPromotionService.ɵprov = ɵɵdefineInjectable({ factory: function PromotionService_Factory() { return new PromotionService(ɵɵinject(CartService), ɵɵinject(OrderDetailsService), ɵɵinject(CheckoutService)); }, token: PromotionService, providedIn: \"root\" });\nPromotionService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], PromotionService);\n\nlet AddedToCartDialogComponent = class AddedToCartDialogComponent {\n    constructor(modalService, cartService, promotionService) {\n        this.modalService = modalService;\n        this.cartService = cartService;\n        this.promotionService = promotionService;\n        this.iconTypes = ICON_TYPE;\n        this.promotionLocation = PromotionLocation.ActiveCart;\n        this.quantity = 0;\n        this.modalIsOpen = false;\n        this.form = new FormGroup({});\n    }\n    /**\n     * Returns an observable formControl with the quantity of the cartEntry,\n     * but also updates the entry in case of a changed value.\n     * The quantity can be set to zero in order to remove the entry.\n     */\n    getQuantityControl() {\n        if (!this.quantityControl$) {\n            this.quantityControl$ = this.entry$.pipe(filter(e => !!e), map(entry => this.getFormControl(entry)), switchMap(() => this.form.valueChanges.pipe(\n            // tslint:disable-next-line:deprecation\n            startWith(null), tap(valueChange => {\n                if (valueChange) {\n                    this.cartService.updateEntry(valueChange.entryNumber, valueChange.quantity);\n                    if (valueChange.quantity === 0) {\n                        this.dismissModal('Removed');\n                    }\n                }\n                else {\n                    this.form.markAsPristine();\n                }\n            }))), map(() => this.form.get('quantity')));\n        }\n        return this.quantityControl$;\n    }\n    ngOnInit() {\n        this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);\n    }\n    getFormControl(entry) {\n        if (!this.form.get('quantity')) {\n            const quantity = new FormControl(entry.quantity, { updateOn: 'blur' });\n            this.form.addControl('quantity', quantity);\n            const entryNumber = new FormControl(entry.entryNumber);\n            this.form.addControl('entryNumber', entryNumber);\n        }\n        return this.form.get('quantity');\n    }\n    dismissModal(reason) {\n        this.modalService.dismissActiveModal(reason);\n    }\n};\nAddedToCartDialogComponent.ctorParameters = () => [\n    { type: ModalService },\n    { type: CartService },\n    { type: PromotionService }\n];\n__decorate([\n    ViewChild('dialog', { read: ElementRef })\n], AddedToCartDialogComponent.prototype, \"dialog\", void 0);\nAddedToCartDialogComponent = __decorate([\n    Component({\n        selector: 'cx-added-to-cart-dialog',\n        template: \"<div #dialog>\\n  <!-- Modal Header -->\\n  <ng-container *ngIf=\\\"(loaded$ | async) || modalIsOpen; else loading\\\">\\n    <div class=\\\"cx-dialog-header modal-header\\\">\\n      <div class=\\\"cx-dialog-title modal-title\\\">\\n        {{\\n          (increment\\n            ? 'addToCart.itemsIncrementedInYourCart'\\n            : 'addToCart.itemsAddedToYourCart') | cxTranslate\\n        }}\\n      </div>\\n      <button\\n        type=\\\"button\\\"\\n        class=\\\"close\\\"\\n        aria-label=\\\"Close\\\"\\n        (click)=\\\"dismissModal('Cross click')\\\"\\n      >\\n        <span aria-hidden=\\\"true\\\">\\n          <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n        </span>\\n      </button>\\n    </div>\\n    <!-- Modal Body -->\\n    <div class=\\\"cx-dialog-body modal-body\\\" *ngIf=\\\"entry$ | async as entry\\\">\\n      <div class=\\\"cx-dialog-row\\\">\\n        <div class=\\\"cx-dialog-item col-sm-12 col-md-6\\\">\\n          <cx-cart-item\\n            [item]=\\\"entry\\\"\\n            [compact]=\\\"true\\\"\\n            [quantityControl]=\\\"getQuantityControl() | async\\\"\\n            [promotionLocation]=\\\"promotionLocation\\\"\\n            (view)=\\\"dismissModal('Product selected')\\\"\\n          ></cx-cart-item>\\n        </div>\\n        <!-- Separator -->\\n        <div\\n          class=\\\"cx-dialog-separator col-sm-12 d-xs-block d-sm-block d-md-none\\\"\\n        ></div>\\n        <!-- Total container -->\\n        <div class=\\\"cx-dialog-actions col-sm-12 col-md-6\\\">\\n          <div class=\\\"cx-dialog-total\\\" *ngIf=\\\"cart$ | async as cart\\\">\\n            <div>\\n              {{\\n                'cartItems.cartTotal'\\n                  | cxTranslate: { count: cart.deliveryItemsQuantity }\\n              }}\\n            </div>\\n\\n            <div>{{ cart.subTotal?.formattedValue }}</div>\\n          </div>\\n\\n          <!-- Promotions -->\\n          <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n            <div\\n              class=\\\"cx-dialog-promotions\\\"\\n              *ngIf=\\\"orderPromotions$ | async as orderPromotions\\\"\\n            >\\n              <cx-promotions [promotions]=\\\"orderPromotions\\\"></cx-promotions>\\n            </div>\\n          </ng-container>\\n\\n          <!-- Actions -->\\n          <div class=\\\"cx-dialog-buttons\\\">\\n            <a\\n              [class.disabled]=\\\"form.dirty\\\"\\n              [routerLink]=\\\"{ cxRoute: 'cart' } | cxUrl\\\"\\n              class=\\\"btn btn-primary\\\"\\n              cxAutoFocus\\n              (click)=\\\"!form.dirty && dismissModal('View Cart click')\\\"\\n              >{{ 'addToCart.viewCart' | cxTranslate }}</a\\n            >\\n            <a\\n              [class.disabled]=\\\"form.dirty\\\"\\n              [routerLink]=\\\"{ cxRoute: 'checkout' } | cxUrl\\\"\\n              class=\\\"btn btn-secondary\\\"\\n              (click)=\\\"!form.dirty && dismissModal('Proceed To Checkout click')\\\"\\n              >{{ 'addToCart.proceedToCheckout' | cxTranslate }}</a\\n            >\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </ng-container>\\n\\n  <ng-template #loading>\\n    <div class=\\\"cx-dialog-header modal-header\\\">\\n      <div class=\\\"cx-dialog-title modal-title\\\">\\n        {{ 'addToCart.updatingCart' | cxTranslate }}\\n      </div>\\n      <button\\n        type=\\\"button\\\"\\n        class=\\\"close\\\"\\n        aria-label=\\\"Close\\\"\\n        (click)=\\\"dismissModal('Cross click')\\\"\\n      >\\n        <span aria-hidden=\\\"true\\\">\\n          <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n        </span>\\n      </button>\\n    </div>\\n    <!-- Modal Body -->\\n    <div class=\\\"cx-dialog-body modal-body\\\">\\n      <div class=\\\"cx-dialog-row\\\">\\n        <div class=\\\"col-sm-12\\\"><cx-spinner></cx-spinner></div>\\n      </div>\\n    </div>\\n  </ng-template>\\n</div>\\n\"\n    })\n], AddedToCartDialogComponent);\n\nlet AddToCartComponent = class AddToCartComponent {\n    constructor(cartService, modalService, currentProductService, cd) {\n        this.cartService = cartService;\n        this.modalService = modalService;\n        this.currentProductService = currentProductService;\n        this.cd = cd;\n        this.showQuantity = true;\n        this.hasStock = false;\n        this.quantity = 1;\n        this.increment = false;\n        this.addToCartForm = new FormGroup({\n            quantity: new FormControl(1),\n        });\n    }\n    ngOnInit() {\n        if (this.product) {\n            this.productCode = this.product.code;\n            this.cartEntry$ = this.cartService.getEntry(this.productCode);\n            this.setStockInfo(this.product);\n            this.cd.markForCheck();\n        }\n        else if (this.productCode) {\n            this.cartEntry$ = this.cartService.getEntry(this.productCode);\n            // force hasStock and quantity for the time being, as we do not have more info:\n            this.quantity = 1;\n            this.hasStock = true;\n            this.cd.markForCheck();\n        }\n        else {\n            this.subscription = this.currentProductService\n                .getProduct()\n                .pipe(filter(Boolean))\n                .subscribe((product) => {\n                this.productCode = product.code;\n                this.setStockInfo(product);\n                this.cartEntry$ = this.cartService.getEntry(this.productCode);\n                this.cd.markForCheck();\n            });\n        }\n    }\n    setStockInfo(product) {\n        this.quantity = 1;\n        this.hasStock =\n            product.stock && product.stock.stockLevelStatus !== 'outOfStock';\n        if (this.hasStock && product.stock.stockLevel) {\n            this.maxQuantity = product.stock.stockLevel;\n        }\n    }\n    updateCount(value) {\n        this.quantity = value;\n    }\n    addToCart() {\n        const quantity = this.addToCartForm.get('quantity').value;\n        if (!this.productCode || quantity <= 0) {\n            return;\n        }\n        // check item is already present in the cart\n        // so modal will have proper header text displayed\n        this.cartService\n            .getEntry(this.productCode)\n            .subscribe(entry => {\n            if (entry) {\n                this.increment = true;\n            }\n            this.openModal();\n            this.cartService.addEntry(this.productCode, quantity);\n            this.increment = false;\n        })\n            .unsubscribe();\n    }\n    openModal() {\n        let modalInstance;\n        this.modalRef = this.modalService.open(AddedToCartDialogComponent, {\n            centered: true,\n            size: 'lg',\n        });\n        modalInstance = this.modalRef.componentInstance;\n        modalInstance.entry$ = this.cartEntry$;\n        modalInstance.cart$ = this.cartService.getActive();\n        modalInstance.loaded$ = this.cartService.getLoaded();\n        modalInstance.quantity = this.quantity;\n        modalInstance.increment = this.increment;\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n};\nAddToCartComponent.ctorParameters = () => [\n    { type: CartService },\n    { type: ModalService },\n    { type: CurrentProductService },\n    { type: ChangeDetectorRef }\n];\n__decorate([\n    Input()\n], AddToCartComponent.prototype, \"productCode\", void 0);\n__decorate([\n    Input()\n], AddToCartComponent.prototype, \"showQuantity\", void 0);\n__decorate([\n    Input()\n], AddToCartComponent.prototype, \"product\", void 0);\nAddToCartComponent = __decorate([\n    Component({\n        selector: 'cx-add-to-cart',\n        template: \"<form *ngIf=\\\"productCode\\\" [formGroup]=\\\"addToCartForm\\\" (submit)=\\\"addToCart()\\\">\\n  <div class=\\\"quantity\\\" *ngIf=\\\"showQuantity\\\">\\n    <label>{{ 'addToCart.quantity' | cxTranslate }}</label>\\n    <cx-item-counter\\n      *ngIf=\\\"hasStock\\\"\\n      [max]=\\\"maxQuantity\\\"\\n      [control]=\\\"addToCartForm.get('quantity')\\\"\\n    ></cx-item-counter>\\n    <span class=\\\"info\\\">{{\\n      hasStock\\n        ? ('addToCart.inStock' | cxTranslate)\\n        : ('addToCart.outOfStock' | cxTranslate)\\n    }}</span>\\n  </div>\\n\\n  <button\\n    *ngIf=\\\"hasStock\\\"\\n    class=\\\"btn btn-primary btn-block\\\"\\n    type=\\\"submit\\\"\\n    [disabled]=\\\"quantity <= 0 || quantity > maxQuantity\\\"\\n  >\\n    {{ 'addToCart.addToCart' | cxTranslate }}\\n  </button>\\n</form>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], AddToCartComponent);\n\nlet AutoFocusDirective = class AutoFocusDirective {\n    constructor(hostElement) {\n        this.hostElement = hostElement;\n    }\n    ngAfterViewInit() {\n        this.hostElement.nativeElement.focus();\n    }\n};\nAutoFocusDirective.ctorParameters = () => [\n    { type: ElementRef }\n];\nAutoFocusDirective = __decorate([\n    Directive({\n        selector: '[cxAutoFocus]',\n    })\n], AutoFocusDirective);\n\nlet AutoFocusDirectiveModule = class AutoFocusDirectiveModule {\n};\nAutoFocusDirectiveModule = __decorate([\n    NgModule({\n        declarations: [AutoFocusDirective],\n        exports: [AutoFocusDirective],\n    })\n], AutoFocusDirectiveModule);\n\nlet CardComponent = class CardComponent {\n    constructor() {\n        this.iconTypes = ICON_TYPE;\n        this.deleteCard = new EventEmitter();\n        this.setDefaultCard = new EventEmitter();\n        this.sendCard = new EventEmitter();\n        this.editCard = new EventEmitter();\n        this.cancelCard = new EventEmitter();\n        this.border = false;\n        this.editMode = false;\n        this.isDefault = false;\n        this.fitToContainer = false;\n    }\n    // ACTIONS\n    setEditMode() {\n        this.editMode = true;\n    }\n    cancelEdit() {\n        this.editMode = false;\n        this.cancelCard.emit(5);\n    }\n    delete() {\n        this.deleteCard.emit(1);\n    }\n    setDefault() {\n        this.isDefault = true;\n        this.setDefaultCard.emit(2);\n    }\n    send() {\n        this.sendCard.emit(3);\n    }\n    edit() {\n        this.editCard.emit(4);\n    }\n    ngOnInit() { }\n};\n__decorate([\n    Output()\n], CardComponent.prototype, \"deleteCard\", void 0);\n__decorate([\n    Output()\n], CardComponent.prototype, \"setDefaultCard\", void 0);\n__decorate([\n    Output()\n], CardComponent.prototype, \"sendCard\", void 0);\n__decorate([\n    Output()\n], CardComponent.prototype, \"editCard\", void 0);\n__decorate([\n    Output()\n], CardComponent.prototype, \"cancelCard\", void 0);\n__decorate([\n    Input()\n], CardComponent.prototype, \"border\", void 0);\n__decorate([\n    Input()\n], CardComponent.prototype, \"editMode\", void 0);\n__decorate([\n    Input()\n], CardComponent.prototype, \"isDefault\", void 0);\n__decorate([\n    Input()\n], CardComponent.prototype, \"content\", void 0);\n__decorate([\n    Input()\n], CardComponent.prototype, \"fitToContainer\", void 0);\nCardComponent = __decorate([\n    Component({\n        selector: 'cx-card',\n        template: \"<div\\n  *ngIf=\\\"content\\\"\\n  class=\\\"cx-card\\\"\\n  [class.cx-card-border]=\\\"border\\\"\\n  [class.cx-card-fit-to-container]=\\\"fitToContainer\\\"\\n>\\n  <!-- Card Header -->\\n  <div *ngIf=\\\"content.header && !editMode\\\" class=\\\"card-header\\\">\\n    {{ content.header }}\\n  </div>\\n  <!-- Card Body -->\\n  <div class=\\\"card-body cx-card-body\\\" [class.cx-card-delete]=\\\"editMode\\\">\\n    <!-- Edit message -->\\n    <div *ngIf=\\\"editMode\\\" class=\\\"cx-card-delete-msg\\\">\\n      {{ content.deleteMsg }}\\n    </div>\\n    <!-- Card title -->\\n    <h4 *ngIf=\\\"content.title\\\" class=\\\"cx-card-title\\\">\\n      {{ content.title }}\\n    </h4>\\n    <!-- Card Content -->\\n    <div class=\\\"cx-card-container\\\">\\n      <!-- Card Label -->\\n      <div class=\\\"cx-card-label-container\\\">\\n        <div *ngIf=\\\"content.textBold\\\" class=\\\"cx-card-label-bold\\\">\\n          {{ content.textBold }}\\n        </div>\\n        <div *ngFor=\\\"let line of content.text\\\">\\n          <div class=\\\"cx-card-label\\\">{{ line }}</div>\\n        </div>\\n      </div>\\n      <!-- Image -->\\n      <div *ngIf=\\\"content.img\\\" class=\\\"cx-card-img-container\\\">\\n        <cx-icon [type]=\\\"content.img\\\"></cx-icon>\\n      </div>\\n    </div>\\n    <!-- Edit Mode Actions -->\\n    <div *ngIf=\\\"editMode\\\" class=\\\"row cx-card-body-delete\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <button class=\\\"btn btn-block btn-secondary\\\" (click)=\\\"cancelEdit()\\\">\\n          {{ 'common.cancel' | cxTranslate }}\\n        </button>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <button class=\\\"btn btn-block btn-primary\\\" (click)=\\\"delete()\\\">\\n          {{ 'common.delete' | cxTranslate }}\\n        </button>\\n      </div>\\n    </div>\\n    <!-- Actions -->\\n    <div *ngIf=\\\"content.actions && !editMode\\\" class=\\\"cx-card-actions\\\">\\n      <div *ngFor=\\\"let action of content.actions\\\">\\n        <div [ngSwitch]=\\\"action.event\\\">\\n          <a\\n            *ngSwitchCase=\\\"'delete'\\\"\\n            class=\\\"cx-card-link card-link btn-link\\\"\\n            (click)=\\\"delete()\\\"\\n            >{{ action.name }}</a\\n          >\\n          <a\\n            *ngSwitchCase=\\\"'default'\\\"\\n            class=\\\"cx-card-link card-link btn-link\\\"\\n            (click)=\\\"setDefault()\\\"\\n            >{{ action.name }}</a\\n          >\\n          <a\\n            *ngSwitchCase=\\\"'send'\\\"\\n            class=\\\"cx-card-link card-link btn-link\\\"\\n            (click)=\\\"send()\\\"\\n            >{{ action.name }}</a\\n          >\\n          <a\\n            *ngSwitchCase=\\\"'edit'\\\"\\n            class=\\\"cx-card-link card-link btn-link\\\"\\n            (click)=\\\"edit()\\\"\\n            >{{ action.name }}</a\\n          >\\n          <a\\n            *ngSwitchDefault\\n            href=\\\"{{ action.link }}\\\"\\n            class=\\\"card-link btn-link\\\"\\n            >{{ action.name }}</a\\n          >\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], CardComponent);\n\nlet CardModule = class CardModule {\n};\nCardModule = __decorate([\n    NgModule({\n        imports: [CommonModule, I18nModule, IconModule],\n        declarations: [CardComponent],\n        exports: [CardComponent],\n    })\n], CardModule);\n\nlet CarouselService = class CarouselService {\n    constructor(winRef) {\n        this.winRef = winRef;\n    }\n    /**\n     * The number of items per slide is calculated by the help of\n     * the item width and the available width of the host element.\n     * This appoach makes it possible to place the carousel in different\n     * layouts. Instead of using the page breakpoints, the host size is\n     * taken into account.\n     *\n     * Since there's no element resize API available, we use the\n     * window `resize` event, so that we can adjust the number of items\n     * whenever the window got resized.\n     */\n    getItemsPerSlide(nativeElement, itemWidth) {\n        return this.winRef.resize$.pipe(map(() => nativeElement.clientWidth), map(totalWidth => this.calculateItems(totalWidth, itemWidth)));\n    }\n    /**\n     * Calculates the number of items per given hostSize.  calculated based on the given\n     * intended size in pixels or percentages. The\n     *\n     * @param availableWidth The available width in pixels for the carousel items.\n     * @param itemWidth The width per carousel item, in px or percentage.\n     */\n    calculateItems(availableWidth, itemWidth) {\n        let calculatedItems = 0;\n        if (itemWidth.endsWith('px')) {\n            const num = itemWidth.substring(0, itemWidth.length - 2);\n            calculatedItems = availableWidth / num;\n        }\n        if (itemWidth.endsWith('%')) {\n            const perc = itemWidth.substring(0, itemWidth.length - 1);\n            calculatedItems =\n                availableWidth / (availableWidth * (perc / 100));\n        }\n        return Math.floor(calculatedItems) || 1;\n    }\n};\nCarouselService.ctorParameters = () => [\n    { type: WindowRef }\n];\nCarouselService.ɵprov = ɵɵdefineInjectable({ factory: function CarouselService_Factory() { return new CarouselService(ɵɵinject(WindowRef)); }, token: CarouselService, providedIn: \"root\" });\nCarouselService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CarouselService);\n\n/**\n * Generic carousel component that can be used to render any carousel items,\n * such as products, images, banners, or any component. Carousel items are\n * rendered in so-called carousel slides, and the previous/next buttons as well as\n * the indicator-buttons can used to navigate the slides.\n *\n * The component uses an array of Observables (`items$`) as an input, to allow\n * for lazy loading of items.\n *\n * The number of items per slide is calculated with the `itemWidth`, which can given\n * in pixels or percentage.\n *\n * To allow for flexible rendering of items, the rendering is delegated to the\n * given `template`. This allows for maximum flexibility.\n */\nlet CarouselComponent = class CarouselComponent {\n    constructor(el, service) {\n        this.el = el;\n        this.service = service;\n        /**\n         * Specifies the minimum size of the carousel item, either in px or %.\n         * This value is used for the calculation of numbers per carousel, so that\n         * the number of carousel items is dynamic. The calculation uses the `itemWidth`\n         * and the host element `clientWidth`, so that the carousel is reusable in\n         * different layouts (for example in a 50% grid).\n         */\n        this.itemWidth = '300px';\n        /**\n         * Indicates whether the visual indicators are used.\n         */\n        this.hideIndicators = false;\n        this.indicatorIcon = ICON_TYPE.CIRCLE;\n        this.previousIcon = ICON_TYPE.CARET_LEFT;\n        this.nextIcon = ICON_TYPE.CARET_RIGHT;\n    }\n    set setItems(inputItems) {\n        this.items = inputItems;\n        //Reset slider when changing products\n        this.activeSlide = 0;\n    }\n    ngOnInit() {\n        if (!this.template && isDevMode()) {\n            console.error('No template reference provided to render the carousel items for the `cx-carousel`');\n            return;\n        }\n        this.size$ = this.service\n            .getItemsPerSlide(this.el.nativeElement, this.itemWidth)\n            .pipe(tap(() => (this.activeSlide = 0)));\n    }\n};\nCarouselComponent.ctorParameters = () => [\n    { type: ElementRef },\n    { type: CarouselService }\n];\n__decorate([\n    Input()\n], CarouselComponent.prototype, \"title\", void 0);\n__decorate([\n    Input('items')\n], CarouselComponent.prototype, \"setItems\", null);\n__decorate([\n    Input()\n], CarouselComponent.prototype, \"template\", void 0);\n__decorate([\n    Input()\n], CarouselComponent.prototype, \"itemWidth\", void 0);\n__decorate([\n    Input()\n], CarouselComponent.prototype, \"hideIndicators\", void 0);\n__decorate([\n    Input()\n], CarouselComponent.prototype, \"indicatorIcon\", void 0);\n__decorate([\n    Input()\n], CarouselComponent.prototype, \"previousIcon\", void 0);\n__decorate([\n    Input()\n], CarouselComponent.prototype, \"nextIcon\", void 0);\nCarouselComponent = __decorate([\n    Component({\n        selector: 'cx-carousel',\n        template: \"<ng-container *ngIf=\\\"items?.length > 0 && (size$ | async) as size\\\">\\n  <h3 *ngIf=\\\"title\\\">{{ title }}</h3>\\n\\n  <div class=\\\"carousel-panel\\\" [ngClass]=\\\"'size-' + size\\\">\\n    <button\\n      *ngIf=\\\"size < items.length\\\"\\n      class=\\\"previous\\\"\\n      (click)=\\\"activeSlide = activeSlide - size\\\"\\n      [disabled]=\\\"activeSlide === 0\\\"\\n    >\\n      <cx-icon [type]=\\\"previousIcon\\\"></cx-icon>\\n    </button>\\n\\n    <div class=\\\"slides\\\">\\n      <ng-container *ngFor=\\\"let _ of items; let i = index\\\">\\n        <div class=\\\"slide\\\" *ngIf=\\\"i % size === 0\\\">\\n          <ng-container\\n            *ngFor=\\\"let item of items | slice: i:i + size; let j = index\\\"\\n          >\\n            <div\\n              *ngIf=\\\"item | async as data\\\"\\n              class=\\\"item\\\"\\n              [class.active]=\\\"i === activeSlide\\\"\\n            >\\n              <ng-container\\n                *ngTemplateOutlet=\\\"template; context: { item: data }\\\"\\n              ></ng-container>\\n            </div>\\n          </ng-container>\\n        </div>\\n      </ng-container>\\n    </div>\\n\\n    <button\\n      *ngIf=\\\"size < items.length\\\"\\n      class=\\\"next\\\"\\n      (click)=\\\"activeSlide = activeSlide + size\\\"\\n      tabindex=\\\"0\\\"\\n      [disabled]=\\\"activeSlide > items.length - size - 1\\\"\\n    >\\n      <cx-icon [type]=\\\"nextIcon\\\"></cx-icon>\\n    </button>\\n  </div>\\n\\n  <div *ngIf=\\\"!hideIndicators && size < items.length\\\" class=\\\"indicators\\\">\\n    <ng-container *ngFor=\\\"let _ of items; let i = index\\\">\\n      <button\\n        *ngIf=\\\"i % size === 0\\\"\\n        (focus)=\\\"activeSlide = i\\\"\\n        [disabled]=\\\"i === activeSlide\\\"\\n        tabindex=\\\"0\\\"\\n      >\\n        <cx-icon [type]=\\\"indicatorIcon\\\"></cx-icon>\\n      </button>\\n    </ng-container>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CarouselComponent);\n\n/** the default format is used for browsers that do not support   */\nconst DEFAULT_MEDIA_FORMAT = 'tablet';\nlet MediaService = class MediaService {\n    constructor(config, breakpointService) {\n        this.config = config;\n        this.breakpointService = breakpointService;\n    }\n    get mediaFormats() {\n        return [\n            {\n                code: 'mobile',\n                threshold: this.breakpointService.getSize(BREAKPOINT.xs),\n            },\n            {\n                code: 'tablet',\n                threshold: this.breakpointService.getSize(BREAKPOINT.sm),\n            },\n            {\n                code: 'desktop',\n                threshold: this.breakpointService.getSize(BREAKPOINT.md),\n            },\n            {\n                code: 'widescreen',\n                threshold: this.breakpointService.getSize(BREAKPOINT.lg),\n            },\n        ];\n    }\n    getMedia(container, format, alt) {\n        return {\n            src: this.getMainImage(container, format),\n            srcset: this.getSrcSet(container),\n            alt: alt || this.getAlt(container, format),\n        };\n    }\n    getMainImage(media, format) {\n        if (media && media[format || DEFAULT_MEDIA_FORMAT]) {\n            return this.getImageUrl(media[format || DEFAULT_MEDIA_FORMAT].url);\n        }\n        else if (media && media.url) {\n            return this.getImageUrl(media.url);\n        }\n        else if (media && media[this.getHighestAvailableFormat(media)]) {\n            return this.getImageUrl(media[this.getHighestAvailableFormat(media)].url);\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * returns highest resolution format name from media formats\n     */\n    getHighestAvailableFormat(media) {\n        if (media) {\n            let mediaFormat;\n            this.mediaFormats.forEach(format => {\n                if (!mediaFormat ||\n                    (mediaFormat.threshold < format.threshold && media[format.code])) {\n                    mediaFormat = format;\n                }\n            });\n            return mediaFormat.code;\n        }\n        return null;\n    }\n    getAlt(media, format) {\n        if (!media) {\n            return undefined;\n        }\n        else if (media[format || DEFAULT_MEDIA_FORMAT]) {\n            return media[format || DEFAULT_MEDIA_FORMAT].altText;\n        }\n        else if (media.altText) {\n            return media.altText;\n        }\n    }\n    /**\n     * builds a set of images aligned with the breakpoints\n     */\n    getSrcSet(media) {\n        if (!media) {\n            return undefined;\n        }\n        const srcset = this.mediaFormats.reduce((set, format) => {\n            if (!!media[format.code]) {\n                if (set) {\n                    set += ', ';\n                }\n                set += `${this.getImageUrl(media[format.code].url)} ${format.threshold}w`;\n            }\n            return set;\n        }, '');\n        return srcset === '' ? undefined : srcset;\n    }\n    getImageUrl(url) {\n        if (!url) {\n            return null;\n        }\n        return url.startsWith('http') ? url : this.getBaseUrl() + url;\n    }\n    getBaseUrl() {\n        return (this.config.backend.media.baseUrl || this.config.backend.occ.baseUrl || '');\n    }\n};\nMediaService.ctorParameters = () => [\n    { type: OccConfig },\n    { type: BreakpointService }\n];\nMediaService.ɵprov = ɵɵdefineInjectable({ factory: function MediaService_Factory() { return new MediaService(ɵɵinject(OccConfig), ɵɵinject(BreakpointService)); }, token: MediaService, providedIn: \"root\" });\nMediaService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], MediaService);\n\nlet MediaComponent = class MediaComponent {\n    constructor(mediaService) {\n        this.mediaService = mediaService;\n        /**\n         * Once the media is loaded, we emit an event.\n         */\n        this.loaded = new EventEmitter();\n        /**\n         * The `cx-media` component has an `is-initialized` class as long as the\n         * media is being initialized.\n         */\n        this.isInitialized = false;\n        /**\n         * The `cx-media` component has a `is-loading` class as long as the\n         * media is loaded. Wehn the media is loaded, the `is-initialized` class\n         * is added.\n         */\n        this.isLoading = true;\n        /**\n         * When there's no media provided for the content, or in case an error\n         * happened during loading, we add the `is-missing` class. Visual effects\n         * can be controlled by CSS.\n         */\n        this.isMissing = false;\n    }\n    ngOnChanges() {\n        this.create();\n    }\n    /**\n     * Creates the `Media` object\n     */\n    create() {\n        this.media = this.mediaService.getMedia(this.container, this.format, this.alt);\n        if (!this.media.src) {\n            this.handleMissing();\n        }\n    }\n    /**\n     * This handler is called from the UI when the image is loaded.\n     */\n    loadHandler() {\n        this.isLoading = false;\n        this.isInitialized = true;\n        this.isMissing = false;\n        this.loaded.emit(true);\n    }\n    /**\n     * Whenever an error happens during load, we mark the component\n     * with css classes to have a missing media.\n     */\n    errorHandler() {\n        this.handleMissing();\n    }\n    handleMissing() {\n        this.isLoading = false;\n        this.isInitialized = true;\n        this.isMissing = true;\n        this.loaded.emit(false);\n    }\n};\nMediaComponent.ctorParameters = () => [\n    { type: MediaService }\n];\n__decorate([\n    Input()\n], MediaComponent.prototype, \"container\", void 0);\n__decorate([\n    Input()\n], MediaComponent.prototype, \"format\", void 0);\n__decorate([\n    Input()\n], MediaComponent.prototype, \"alt\", void 0);\n__decorate([\n    Output()\n], MediaComponent.prototype, \"loaded\", void 0);\n__decorate([\n    HostBinding('class.is-initialized')\n], MediaComponent.prototype, \"isInitialized\", void 0);\n__decorate([\n    HostBinding('class.is-loading')\n], MediaComponent.prototype, \"isLoading\", void 0);\n__decorate([\n    HostBinding('class.is-missing')\n], MediaComponent.prototype, \"isMissing\", void 0);\nMediaComponent = __decorate([\n    Component({\n        selector: 'cx-media',\n        template: \"<img\\n  *ngIf=\\\"media?.src\\\"\\n  [attr.src]=\\\"media.src\\\"\\n  [attr.srcset]=\\\"media.srcset\\\"\\n  [attr.alt]=\\\"media.alt\\\"\\n  (load)=\\\"loadHandler()\\\"\\n  (error)=\\\"errorHandler()\\\"\\n/>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], MediaComponent);\n\nlet MediaModule = class MediaModule {\n};\nMediaModule = __decorate([\n    NgModule({\n        imports: [CommonModule],\n        declarations: [MediaComponent],\n        exports: [MediaComponent],\n    })\n], MediaModule);\n\nlet CarouselModule = class CarouselModule {\n};\nCarouselModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule, IconModule, MediaModule, UrlModule],\n        declarations: [CarouselComponent],\n        exports: [CarouselComponent],\n    })\n], CarouselModule);\n\n/**\n * Provides a UI to manage the count of the quantity, typically by using\n * increase and decrease functinality. The item counter expects an input `FormControl`\n * so that the state of the control can be managed outside of this component.\n */\nlet ItemCounterComponent = class ItemCounterComponent {\n    constructor() {\n        /**\n         * This can be used in case an item has a minmum order quantity.\n         * @default 1\n         */\n        this.min = 1;\n        /**\n         * The step is used to increment the count. It is supposed to be a\n         * positive inteteger or float.\n         * @default 1\n         */\n        this.step = 1;\n        /**\n         * Inidicates that the input can be manually set to zero,\n         * despite the fact that the input controls will be limited to\n         * the minimum. The zero value can be used to remove an item.\n         */\n        this.allowZero = false;\n        /**\n         * In readonly mode the item counter will only be shown as a label,\n         * the form controls are not rendered.\n         * Please not that readonly is different from the `disabled` form state.\n         * @default false\n         */\n        this.readonly = false;\n    }\n    handleClick() {\n        this.input.nativeElement.focus();\n    }\n    increment() {\n        // it's too early to use the `stepUp` and `stepDown` API...\n        // let's wait for FF: https://caniuse.com/#search=stepUp\n        this.control.setValue(this.control.value + this.step);\n        this.control.markAsDirty();\n    }\n    decrement() {\n        this.control.setValue(this.control.value - this.step);\n        this.control.markAsDirty();\n    }\n    /**\n     * Returns an observable with the control. The value changes of the\n     * control are intercepted in order to suppress invalid values.\n     */\n    getControl() {\n        if (!this._control$) {\n            this._control$ = this.control.valueChanges.pipe(startWith(this.control.value), tap(value => this.control.setValue(this.getValidCount(value), { emitEvent: false })), map(() => this.control));\n        }\n        return this._control$;\n    }\n    /**\n     * Validate that the given value is in between\n     * the `min` and `max` value. If the value is out\n     * of  the min/max range, it will be altered.\n     * If `allowZero` is set to true, the 0 value is ignored.\n     *\n     */\n    getValidCount(value) {\n        if (value < this.min && !(value === 0 && this.allowZero)) {\n            value = this.min;\n        }\n        if (this.max && value > this.max) {\n            value = this.max;\n        }\n        return value;\n    }\n};\n__decorate([\n    Input()\n], ItemCounterComponent.prototype, \"control\", void 0);\n__decorate([\n    Input()\n], ItemCounterComponent.prototype, \"min\", void 0);\n__decorate([\n    Input()\n], ItemCounterComponent.prototype, \"max\", void 0);\n__decorate([\n    Input()\n], ItemCounterComponent.prototype, \"step\", void 0);\n__decorate([\n    Input()\n], ItemCounterComponent.prototype, \"allowZero\", void 0);\n__decorate([\n    HostBinding('class.readonly'), Input()\n], ItemCounterComponent.prototype, \"readonly\", void 0);\n__decorate([\n    ViewChild('qty')\n], ItemCounterComponent.prototype, \"input\", void 0);\n__decorate([\n    HostListener('click')\n], ItemCounterComponent.prototype, \"handleClick\", null);\nItemCounterComponent = __decorate([\n    Component({\n        selector: 'cx-item-counter',\n        template: \"<button\\n  type=\\\"button\\\"\\n  (click)=\\\"decrement()\\\"\\n  [disabled]=\\\"qty.disabled || qty?.value <= min\\\"\\n  tabindex=\\\"-1\\\"\\n>\\n  -\\n</button>\\n\\n<input\\n  #qty\\n  type=\\\"number\\\"\\n  [min]=\\\"min\\\"\\n  [max]=\\\"max\\\"\\n  [step]=\\\"step\\\"\\n  [formControl]=\\\"getControl() | async\\\"\\n/>\\n\\n<button\\n  type=\\\"button\\\"\\n  (click)=\\\"increment()\\\"\\n  [disabled]=\\\"qty.disabled || qty?.value >= max\\\"\\n  tabindex=\\\"-1\\\"\\n>\\n  +\\n</button>\\n\"\n    })\n], ItemCounterComponent);\n\nlet ItemCounterModule = class ItemCounterModule {\n};\nItemCounterModule = __decorate([\n    NgModule({\n        imports: [CommonModule, ReactiveFormsModule],\n        declarations: [ItemCounterComponent],\n        exports: [ItemCounterComponent],\n    })\n], ItemCounterModule);\n\n/**\n * This component navigates using [routerLink] attribute when input 'url' is a relative url. Otherwise (when it's absolute), [href] is used.\n */\nlet GenericLinkComponent = class GenericLinkComponent {\n    constructor() {\n        this.protocolRegex = /^https?:\\/\\//i;\n    }\n    get rel() {\n        return this.target === '_blank' ? 'noopener' : null;\n    }\n    get routerUrl() {\n        if (typeof this.url === 'string') {\n            return [this.getAbsoluteUrl(this.url)];\n        }\n        return this.url;\n    }\n    isExternalUrl() {\n        return typeof this.url === 'string' && this.protocolRegex.test(this.url);\n    }\n    getAbsoluteUrl(url) {\n        return url.startsWith('/') ? this.url : '/' + this.url;\n    }\n};\n__decorate([\n    Input()\n], GenericLinkComponent.prototype, \"url\", void 0);\n__decorate([\n    Input()\n], GenericLinkComponent.prototype, \"target\", void 0);\n__decorate([\n    Input()\n], GenericLinkComponent.prototype, \"class\", void 0);\n__decorate([\n    Input()\n], GenericLinkComponent.prototype, \"id\", void 0);\n__decorate([\n    Input()\n], GenericLinkComponent.prototype, \"style\", void 0);\n__decorate([\n    Input()\n], GenericLinkComponent.prototype, \"title\", void 0);\nGenericLinkComponent = __decorate([\n    Component({\n        selector: 'cx-generic-link',\n        template: \"<!-- https://github.com/angular/angular/issues/24567 -->\\n\\n<ng-container *ngIf=\\\"isExternalUrl(); else isLocalUrl\\\">\\n  <a\\n    role=\\\"link\\\"\\n    [href]=\\\"url\\\"\\n    [attr.target]=\\\"target\\\"\\n    [attr.rel]=\\\"rel\\\"\\n    [attr.class]=\\\"class\\\"\\n    [attr.id]=\\\"id\\\"\\n    [attr.style]=\\\"style\\\"\\n    [attr.title]=\\\"title\\\"\\n  >\\n    <ng-container *ngTemplateOutlet=\\\"content\\\"></ng-container>\\n  </a>\\n</ng-container>\\n\\n<ng-template #isLocalUrl>\\n  <a\\n    role=\\\"link\\\"\\n    [routerLink]=\\\"routerUrl\\\"\\n    [attr.target]=\\\"target\\\"\\n    [attr.class]=\\\"class\\\"\\n    [attr.id]=\\\"id\\\"\\n    [attr.style]=\\\"style\\\"\\n    [attr.title]=\\\"title\\\"\\n  >\\n    <ng-container *ngTemplateOutlet=\\\"content\\\"></ng-container>\\n  </a>\\n</ng-template>\\n\\n<ng-template #content>\\n  <ng-content></ng-content>\\n</ng-template>\\n\"\n    })\n], GenericLinkComponent);\n\nlet GenericLinkModule = class GenericLinkModule {\n};\nGenericLinkModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule],\n        declarations: [GenericLinkComponent],\n        exports: [GenericLinkComponent],\n    })\n], GenericLinkModule);\n\nconst defaultPaginationConfig = {\n    pagination: {\n        addStart: true,\n        addEnd: true,\n    },\n};\n\nclass PaginationConfig {\n}\n\n/**\n * The item type is used to add semantic structure to the\n * PaginationItem, so that the UI understands the usage.\n */\nvar PaginationItemType;\n(function (PaginationItemType) {\n    PaginationItemType[\"GAP\"] = \"gap\";\n    PaginationItemType[\"FIRST\"] = \"first\";\n    PaginationItemType[\"LAST\"] = \"last\";\n    PaginationItemType[\"PREVIOUS\"] = \"previous\";\n    PaginationItemType[\"NEXT\"] = \"next\";\n    PaginationItemType[\"START\"] = \"start\";\n    PaginationItemType[\"END\"] = \"end\";\n    PaginationItemType[\"PAGE\"] = \"page\";\n})(PaginationItemType || (PaginationItemType = {}));\nvar PaginationNavigationPosition;\n(function (PaginationNavigationPosition) {\n    PaginationNavigationPosition[\"ASIDE\"] = \"aside\";\n    PaginationNavigationPosition[\"BEFORE\"] = \"before\";\n    PaginationNavigationPosition[\"AFTER\"] = \"after\";\n})(PaginationNavigationPosition || (PaginationNavigationPosition = {}));\n\nconst FALLBACK_PAGINATION_OPTIONS = {\n    rangeCount: 3,\n    dotsLabel: '...',\n    startLabel: '«',\n    previousLabel: '‹',\n    nextLabel: '›',\n    endLabel: '»',\n};\n/**\n * Builds a pagination structures based on a pageCount and current page number.\n * There are various {@link PaginationConfig} options which can be used to configure\n * the behaviour of the build. Alternatively, CSS can be used to further customise\n * the pagination.\n *\n * Examples:\n * The full blown pagination items contain the follow elements:\n *\n * `« ‹ 1 ... 4 (5) 6 ... 9 › »`\n *\n * This includes pagination items to the following pages:\n * - start page\n * - previous page\n * - first page\n * - page range\n * - last page\n * - next page\n * - end page\n *\n * All of those links are configurable, including the size of the page range.\n * The current page will always be centered in the page range to provide direct access\n * to the previous and next page.\n */\nlet PaginationBuilder = class PaginationBuilder {\n    constructor(paginationConfig) {\n        this.paginationConfig = paginationConfig;\n    }\n    /**\n     * Builds a list of `PaginationItem`. The give pageCount and current are used\n     * to build out the full pagination. There are various {@link PaginationConfig} options\n     * which can be used to configure the behaviour of the build. Alternatively, CSS\n     * can be used to further specialize visibility of the pagination.\n     *\n     * @param pageCount The total number of pages\n     * @param current The current page number, 0-index based\n     * @returns An array of `PaginationItem`\n     */\n    paginate(pageCount, current) {\n        const pages = [];\n        if (pageCount < 2) {\n            return pages;\n        }\n        this.addPages(pages, pageCount, current);\n        this.addDots(pages, pageCount);\n        this.addFirstLast(pages, pageCount);\n        this.addNavigation(pages, pageCount, current);\n        return pages;\n    }\n    /**\n     * Returns the current page with surrounding pages (based on the `config.rangeCount`).\n     * The current page is always centered to provide direct access to the previous and next page.\n     *\n     * @param pages The list of page items that is used to amend\n     * @param pageCount The total number of pages\n     * @param current The current page number, 0-index based\n     */\n    addPages(pages, pageCount, current) {\n        const start = this.getStartOfRange(pageCount, current);\n        const max = Math.min(this.config.rangeCount, pageCount);\n        Array.from(Array(max)).forEach((_, i) => {\n            pages.push({\n                number: i + start,\n                label: String(i + start + 1),\n                type: PaginationItemType.PAGE,\n            });\n        });\n    }\n    /**\n     * Adds dots before and after the given pages, if configured (defaults to true).\n     * If the dots only represent a single page, the page number is added instead of\n     * the dots, unless the configuration requires dots always.\n     *\n     * @param pages The list of page items that is used to amend\n     * @param pageCount The total number of pages\n     */\n    addDots(pages, pageCount) {\n        if (!this.config.addDots) {\n            return;\n        }\n        const addFirstGap = () => {\n            const firstItemNumber = pages[0].number;\n            const gapNumber = this.config.addFirst ? 1 : 0;\n            if (firstItemNumber > gapNumber) {\n                const isGap = !this.config.substituteDotsForSingularPage ||\n                    firstItemNumber !== gapNumber + 1;\n                const isSubstitued = this.config.addFirst &&\n                    this.config.substituteDotsForSingularPage &&\n                    gapNumber === 0;\n                const type = isGap\n                    ? PaginationItemType.GAP\n                    : isSubstitued\n                        ? PaginationItemType.FIRST\n                        : PaginationItemType.PAGE;\n                return [\n                    Object.assign({\n                        label: isGap ? this.config.dotsLabel : String(gapNumber + 1),\n                        type,\n                    }, isGap ? null : { number: gapNumber }),\n                ];\n            }\n            else\n                return [];\n        };\n        const addLastGap = () => {\n            const nextPageNumber = pages[pages.length - 1].number + 1;\n            const last = pageCount - (this.config.addLast ? 2 : 1);\n            if (nextPageNumber <= last) {\n                const isSubstitued = this.config.addLast &&\n                    this.config.substituteDotsForSingularPage &&\n                    nextPageNumber === last;\n                const isGap = nextPageNumber <\n                    pageCount -\n                        (this.config.substituteDotsForSingularPage ? 1 : 0) -\n                        (this.config.addLast ? 1 : 0);\n                const type = isGap\n                    ? PaginationItemType.GAP\n                    : isSubstitued\n                        ? PaginationItemType.LAST\n                        : PaginationItemType.PAGE;\n                return [\n                    Object.assign({\n                        label: isGap ? this.config.dotsLabel : String(nextPageNumber + 1),\n                        type,\n                    }, isGap ? null : { number: nextPageNumber }),\n                ];\n            }\n            else\n                return [];\n        };\n        pages.unshift(...addFirstGap());\n        pages.push(...addLastGap());\n    }\n    /**\n     * Add links to the first and last page, if configured to do so.\n     *\n     * @param pages The list of page items that is used to amend\n     * @param pageCount The total number of pages\n     *\n     */\n    addFirstLast(pages, pageCount) {\n        if (this.config.addFirst && pages[0].number !== 0) {\n            pages.unshift({\n                number: 0,\n                label: '1',\n                type: PaginationItemType.FIRST,\n            });\n        }\n        if (this.config.addLast &&\n            pages[pages.length - 1].number !== pageCount - 1) {\n            pages.push({\n                number: pageCount - 1,\n                label: String(pageCount),\n                type: PaginationItemType.LAST,\n            });\n        }\n    }\n    /**\n     * Add links to the start, previous, next and last page, if configured to do so.\n     * The order of the links can be configured by using the {@link PaginationConfig},\n     * using the `PaginationNavigationPosition` (`BEFORE` or `AFTER`).\n     * The `PaginationNavigationPosition` allows for 3 flavours:\n     *\n     * - by default the pagination starts with start and previous and ends with the next and end links\n     * - BEFORE – all navigation links are added in the front of the pagination list\n     * - AFTER – all navigation links are pushed to the end of the pagination list\n     *\n     * @param pages The list of page items that is used to amend\n     * @param pageCount The total number of pages\n     * @param current The current page number, 0-index based\n     *\n     */\n    addNavigation(pages, pageCount, current) {\n        const before = this.getBeforeLinks(current);\n        const after = this.getAfter(pageCount, current);\n        const pos = this.config.navigationPosition;\n        if (!pos || pos === PaginationNavigationPosition.ASIDE) {\n            pages.unshift(...before);\n            pages.push(...after);\n        }\n        else {\n            if (pos === PaginationNavigationPosition.BEFORE) {\n                pages.unshift(...before, ...after);\n            }\n            if (pos === PaginationNavigationPosition.AFTER) {\n                pages.push(...before, ...after);\n            }\n        }\n    }\n    /**\n     * Returns the start and previous links, if applicable.\n     */\n    getBeforeLinks(current) {\n        const list = [];\n        if (this.config.addStart) {\n            const start = () => {\n                return Object.assign({\n                    label: this.config.startLabel,\n                    type: PaginationItemType.START,\n                }, current > 0 ? { number: 0 } : null);\n            };\n            list.push(start());\n        }\n        if (this.config.addPrevious) {\n            const previous = () => {\n                return Object.assign({\n                    label: this.config.previousLabel,\n                    type: PaginationItemType.PREVIOUS,\n                }, current > 0 ? { number: current - 1 } : null);\n            };\n            list.push(previous());\n        }\n        return list;\n    }\n    /**\n     * Returns the next and end links, if applicable.\n     */\n    getAfter(pageCount, current) {\n        const list = [];\n        if (this.config.addNext) {\n            const next = () => {\n                return Object.assign({\n                    label: this.config.nextLabel,\n                    type: PaginationItemType.NEXT,\n                }, current < pageCount - 1 ? { number: current + 1 } : null);\n            };\n            list.push(next());\n        }\n        if (this.config.addEnd) {\n            const end = () => {\n                return Object.assign({\n                    label: this.config.endLabel,\n                    type: PaginationItemType.END,\n                }, current < pageCount - 1 ? { number: pageCount - 1 } : null);\n            };\n            list.push(end());\n        }\n        return list;\n    }\n    /**\n     * Resolves the first page of the range we need to build.\n     * This is the page that is leading up to the range of the\n     * current page.\n     *\n     * @param pageCount The total number of pages.\n     * @param current The current page number, 0-index based.\n     */\n    getStartOfRange(pageCount, current) {\n        const count = this.config.rangeCount - 1;\n        // the least number of pages before and after the current\n        const delta = Math.round(count / 2);\n        // ensure that we start with at least the first page\n        const minStart = Math.max(0, current - delta);\n        // ensures that we start with at least 1 and do not pass the last range\n        const maxStart = Math.max(0, pageCount - count - 1);\n        // ensure that we get at least a full range at the end\n        return Math.min(maxStart, minStart);\n    }\n    get config() {\n        return Object.assign(FALLBACK_PAGINATION_OPTIONS, this.paginationConfig.pagination);\n    }\n};\nPaginationBuilder.ctorParameters = () => [\n    { type: PaginationConfig }\n];\nPaginationBuilder.ɵprov = ɵɵdefineInjectable({ factory: function PaginationBuilder_Factory() { return new PaginationBuilder(ɵɵinject(PaginationConfig)); }, token: PaginationBuilder, providedIn: \"root\" });\nPaginationBuilder = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], PaginationBuilder);\n\n/**\n * The `PaginationComponent` is a generic component that is used for\n * all lists in Spartacus that require pagination. The component supports\n * all common features, which can be configured or hidden by CSS.\n */\nlet PaginationComponent = class PaginationComponent {\n    constructor(paginationBuilder, activatedRoute) {\n        this.paginationBuilder = paginationBuilder;\n        this.activatedRoute = activatedRoute;\n        this.viewPageEvent = new EventEmitter();\n        this.pages = [];\n    }\n    get pagination() {\n        return this._pagination;\n    }\n    set pagination(value) {\n        this._pagination = value;\n        this.render(value);\n    }\n    render(pagination) {\n        this.pages = this.paginationBuilder.paginate(pagination.totalPages, pagination.currentPage);\n    }\n    /**\n     * Inidicates whether the given item is the current item.\n     *\n     * @param item PaginationItem\n     * @returns boolean\n     */\n    isCurrent(item) {\n        return (item.type === PaginationItemType.PAGE &&\n            item.number === this.pagination.currentPage);\n    }\n    /**\n     * Indicates whether the pagination item is inactive. This is used\n     * to disabled a link or set the tabindex to `-1`.\n     *\n     * Defaults to true\n     *\n     * @param item PaginationItem\n     * @returns returns -1 in case of a disabled\n     */\n    isInactive(item) {\n        return (!item.hasOwnProperty('number') ||\n            item.number === this.pagination.currentPage);\n    }\n    getQueryParams(item) {\n        const queryParams = Object.assign({}, this.activatedRoute.snapshot.queryParams);\n        if (this.queryParam &&\n            item.number < this.pagination.totalPages &&\n            !this.isCurrent(item)) {\n            queryParams[this.queryParam] = item.number;\n        }\n        // omit the page number from the query parameters in case it's the default\n        // to clean up the experience and avoid unnecessary polluting of the URL\n        if (queryParams[this.queryParam] === this.defaultPage) {\n            delete queryParams[this.queryParam];\n        }\n        return queryParams;\n    }\n    pageChange(page) {\n        this.viewPageEvent.emit(page.number);\n    }\n};\nPaginationComponent.ctorParameters = () => [\n    { type: PaginationBuilder },\n    { type: ActivatedRoute }\n];\n__decorate([\n    Input()\n], PaginationComponent.prototype, \"pageRoute\", void 0);\n__decorate([\n    Input()\n], PaginationComponent.prototype, \"queryParam\", void 0);\n__decorate([\n    Input()\n], PaginationComponent.prototype, \"defaultPage\", void 0);\n__decorate([\n    Input()\n], PaginationComponent.prototype, \"pagination\", null);\n__decorate([\n    Output()\n], PaginationComponent.prototype, \"viewPageEvent\", void 0);\nPaginationComponent = __decorate([\n    Component({\n        selector: 'cx-pagination',\n        template: \"<a\\n  *ngFor=\\\"let item of pages\\\"\\n  [class]=\\\"item.type\\\"\\n  [class.disabled]=\\\"isInactive(item)\\\"\\n  [class.current]=\\\"isCurrent(item)\\\"\\n  [routerLink]=\\\"pageRoute\\\"\\n  [queryParams]=\\\"getQueryParams(item)\\\"\\n  [tabIndex]=\\\"isInactive(item) ? -1 : 0\\\"\\n  (click)=\\\"pageChange(item)\\\"\\n>\\n  {{ item.label }}\\n</a>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], PaginationComponent);\n\nlet PaginationModule = class PaginationModule {\n};\nPaginationModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule],\n        providers: [\n            provideConfig(defaultPaginationConfig),\n            { provide: PaginationConfig, useExisting: Config },\n        ],\n        declarations: [PaginationComponent],\n        exports: [PaginationComponent],\n    })\n], PaginationModule);\n\nlet SortingComponent = class SortingComponent {\n    constructor() {\n        this.sortListEvent = new EventEmitter();\n    }\n    sortList(sortCode) {\n        this.sortListEvent.emit(sortCode);\n    }\n};\n__decorate([\n    Input()\n], SortingComponent.prototype, \"sortOptions\", void 0);\n__decorate([\n    Input()\n], SortingComponent.prototype, \"selectedOption\", void 0);\n__decorate([\n    Input()\n], SortingComponent.prototype, \"placeholder\", void 0);\n__decorate([\n    Input()\n], SortingComponent.prototype, \"sortLabels\", void 0);\n__decorate([\n    Output()\n], SortingComponent.prototype, \"sortListEvent\", void 0);\nSortingComponent = __decorate([\n    Component({\n        selector: 'cx-sorting',\n        template: \"<ng-select\\n  [searchable]=\\\"false\\\"\\n  [clearable]=\\\"false\\\"\\n  placeholder=\\\"{{ placeholder }}\\\"\\n  (change)=\\\"sortList($event)\\\"\\n  [ngModel]=\\\"selectedOption\\\"\\n>\\n  <ng-option *ngFor=\\\"let sort of sortOptions\\\" [value]=\\\"sort.code\\\">{{\\n    sort.name ? sort.name : sortLabels ? sortLabels[sort.code] : ''\\n  }}</ng-option>\\n</ng-select>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], SortingComponent);\n\nlet ListNavigationModule = class ListNavigationModule {\n};\nListNavigationModule = __decorate([\n    NgModule({\n        imports: [CommonModule, NgSelectModule, FormsModule, PaginationModule],\n        declarations: [SortingComponent],\n        exports: [SortingComponent, PaginationComponent],\n    })\n], ListNavigationModule);\n\n// TODO: Improve a11y with better text appropriate to usage (example: loading cart spinner)\nlet SpinnerComponent = class SpinnerComponent {\n    constructor() { }\n};\nSpinnerComponent = __decorate([\n    Component({\n        selector: 'cx-spinner',\n        template: \"<div class=\\\"loader-container\\\">\\n  <div class=\\\"loader\\\">{{ 'spinner.loading' | cxTranslate }}</div>\\n</div>\\n\"\n    })\n], SpinnerComponent);\n\nlet SpinnerModule = class SpinnerModule {\n};\nSpinnerModule = __decorate([\n    NgModule({\n        imports: [CommonModule, I18nModule],\n        declarations: [SpinnerComponent],\n        exports: [SpinnerComponent],\n    })\n], SpinnerModule);\n\nlet GlobalMessageComponent = class GlobalMessageComponent {\n    constructor(globalMessageService) {\n        this.globalMessageService = globalMessageService;\n        this.iconTypes = ICON_TYPE;\n        this.messageType = GlobalMessageType;\n    }\n    ngOnInit() {\n        this.messages$ = this.globalMessageService.get();\n    }\n    clear(type, index) {\n        this.globalMessageService.remove(type, index);\n    }\n};\nGlobalMessageComponent.ctorParameters = () => [\n    { type: GlobalMessageService }\n];\nGlobalMessageComponent = __decorate([\n    Component({\n        selector: 'cx-global-message',\n        template: \"<div *ngIf=\\\"messages$ | async as messages\\\">\\n  <div\\n    class=\\\"alert alert-success\\\"\\n    *ngFor=\\\"\\n      let confMsg of messages[messageType.MSG_TYPE_CONFIRMATION];\\n      let i = index\\n    \\\"\\n  >\\n    <span class=\\\"alert-icon\\\">\\n      <cx-icon [type]=\\\"iconTypes.SUCCESS\\\"></cx-icon>\\n    </span>\\n    <span>{{ confMsg | cxTranslate }}</span>\\n    <button\\n      class=\\\"close\\\"\\n      type=\\\"button\\\"\\n      (click)=\\\"clear(messageType.MSG_TYPE_CONFIRMATION, i)\\\"\\n    >\\n      <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n    </button>\\n  </div>\\n  <div\\n    class=\\\"alert alert-info\\\"\\n    *ngFor=\\\"let infoMsg of messages[messageType.MSG_TYPE_INFO]; let i = index\\\"\\n  >\\n    <span class=\\\"alert-icon\\\">\\n      <cx-icon [type]=\\\"iconTypes.INFO\\\"></cx-icon>\\n    </span>\\n    <span>{{ infoMsg | cxTranslate }}</span>\\n    <button\\n      class=\\\"close\\\"\\n      type=\\\"button\\\"\\n      (click)=\\\"clear(messageType.MSG_TYPE_INFO, i)\\\"\\n    >\\n      <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n    </button>\\n  </div>\\n  <div\\n    class=\\\"alert alert-warning\\\"\\n    *ngFor=\\\"\\n      let infoMsg of messages[messageType.MSG_TYPE_WARNING];\\n      let i = index\\n    \\\"\\n  >\\n    <span class=\\\"alert-icon\\\">\\n      <cx-icon [type]=\\\"iconTypes.WARNING\\\"></cx-icon>\\n    </span>\\n    <span>{{ infoMsg | cxTranslate }}</span>\\n    <button\\n      class=\\\"close\\\"\\n      type=\\\"button\\\"\\n      (click)=\\\"clear(messageType.MSG_TYPE_INFO, i)\\\"\\n    >\\n      <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n    </button>\\n  </div>\\n  <div\\n    class=\\\"alert alert-danger\\\"\\n    *ngFor=\\\"let errorMsg of messages[messageType.MSG_TYPE_ERROR]; let i = index\\\"\\n  >\\n    <span class=\\\"alert-icon\\\">\\n      <cx-icon [type]=\\\"iconTypes.ERROR\\\"></cx-icon>\\n    </span>\\n    <span>{{ errorMsg | cxTranslate }}</span>\\n    <button\\n      class=\\\"close\\\"\\n      type=\\\"button\\\"\\n      (click)=\\\"clear(messageType.MSG_TYPE_ERROR, i)\\\"\\n    >\\n      <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n    </button>\\n  </div>\\n</div>\\n\"\n    })\n], GlobalMessageComponent);\n\nlet GlobalMessageComponentModule = class GlobalMessageComponentModule {\n};\nGlobalMessageComponentModule = __decorate([\n    NgModule({\n        imports: [CommonModule, HttpClientModule, IconModule, I18nModule],\n        declarations: [GlobalMessageComponent],\n        exports: [GlobalMessageComponent],\n    })\n], GlobalMessageComponentModule);\n\nclass QualtricsConfig {\n}\n\nlet QualtricsLoaderService = class QualtricsLoaderService {\n    constructor(winRef, config) {\n        this.winRef = winRef;\n        this.config = config;\n        this.qualtricsLoaded$ = new BehaviorSubject(false);\n        if (Boolean(this.winRef.nativeWindow) &&\n            Boolean(this.winRef.document) &&\n            this.isQualtricsConfigured()) {\n            this.initialize();\n            this.setup();\n        }\n    }\n    initialize() {\n        fromEvent(this.winRef.nativeWindow, 'qsi_js_loaded').subscribe(_ => this.qualtricsLoaded$.next(true));\n    }\n    setup() {\n        const qualtricsScript = this.winRef.document.createElement('script');\n        qualtricsScript.type = 'text/javascript';\n        qualtricsScript.defer = true;\n        qualtricsScript.src = 'assets/qualtricsIntegration.js';\n        const idScript = this.winRef.document.createElement('div');\n        idScript.id = this.config.qualtrics.projectId;\n        this.winRef.document\n            .getElementsByTagName('head')[0]\n            .appendChild(qualtricsScript);\n        this.winRef.document.getElementsByTagName('head')[0].appendChild(idScript);\n    }\n    isQualtricsConfigured() {\n        return (Boolean(this.config.qualtrics) && Boolean(this.config.qualtrics.projectId));\n    }\n    load() {\n        return this.qualtricsLoaded$.pipe(filter(loaded => loaded), switchMap(_ => {\n            const qsi = this.winRef.nativeWindow['QSI'];\n            return this.isDataLoaded().pipe(distinctUntilChanged(), tap(dataLoaded => {\n                if (dataLoaded) {\n                    qsi.API.unload();\n                    qsi.API.load().done(qsi.API.run());\n                }\n            }));\n        }));\n    }\n    /**\n     * This logic exist in order to let the client(s) add their own logic to wait for any kind of page data\n     * If client(s) does not extend this service to override this implementation, it returns true\n     * Return false otherwise.\n     */\n    isDataLoaded() {\n        return of(true);\n    }\n};\nQualtricsLoaderService.ctorParameters = () => [\n    { type: WindowRef },\n    { type: QualtricsConfig }\n];\nQualtricsLoaderService.ɵprov = ɵɵdefineInjectable({ factory: function QualtricsLoaderService_Factory() { return new QualtricsLoaderService(ɵɵinject(WindowRef), ɵɵinject(QualtricsConfig)); }, token: QualtricsLoaderService, providedIn: \"root\" });\nQualtricsLoaderService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], QualtricsLoaderService);\n\nlet QualtricsComponent = class QualtricsComponent {\n    constructor(qualtricsLoader) {\n        this.qualtricsLoader = qualtricsLoader;\n        this.qualtricsEnabled$ = this.qualtricsLoader.load();\n    }\n};\nQualtricsComponent.ctorParameters = () => [\n    { type: QualtricsLoaderService }\n];\nQualtricsComponent = __decorate([\n    Component({\n        selector: 'cx-qualtrics',\n        template: `\n    <ng-container *ngIf=\"qualtricsEnabled$ | async\"></ng-container>\n  `\n    })\n], QualtricsComponent);\n\nconst defaultQualtricsConfig = {\n    qualtrics: {},\n};\n\nlet QualtricsModule = class QualtricsModule {\n};\nQualtricsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            HttpClientModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    QualtricsComponent: {\n                        component: QualtricsComponent,\n                    },\n                },\n            }),\n            ConfigModule.withConfig(defaultQualtricsConfig),\n        ],\n        declarations: [QualtricsComponent],\n        entryComponents: [QualtricsComponent],\n        providers: [\n            {\n                provide: QualtricsConfig,\n                useExisting: Config,\n            },\n        ],\n    })\n], QualtricsModule);\n\nlet LanguageCurrencyComponent = class LanguageCurrencyComponent {\n};\nLanguageCurrencyComponent = __decorate([\n    Component({\n        selector: 'cx-language-currency-selector',\n        template: `\n    <cx-site-context-selector context=\"language\"></cx-site-context-selector>\n    <cx-site-context-selector context=\"currency\"></cx-site-context-selector>\n  `,\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], LanguageCurrencyComponent);\n\nconst LABELS = {\n    [LANGUAGE_CONTEXT_ID]: 'Language',\n    [CURRENCY_CONTEXT_ID]: 'Currency',\n};\nlet SiteContextComponentService = class SiteContextComponentService {\n    constructor(componentData, contextServiceMap, injector) {\n        this.componentData = componentData;\n        this.contextServiceMap = contextServiceMap;\n        this.injector = injector;\n    }\n    getItems(context) {\n        return this.getService(context).pipe(switchMap((service) => service.getAll()), switchMap(items => this.getContext(context).pipe(switchMap(ctx => {\n            const itemsCopy = [];\n            for (const item of items) {\n                itemsCopy.push(Object.assign(Object.assign({}, item), { label: this.getOptionLabel(item, ctx) }));\n            }\n            return of(itemsCopy);\n        }))));\n    }\n    getActiveItem(context) {\n        return this.getService(context).pipe(switchMap((service) => service.getActive()));\n    }\n    getLabel(context) {\n        return this.getContext(context).pipe(map(ctx => {\n            return LABELS[ctx];\n        }));\n    }\n    setActive(value, context) {\n        this.getService(context)\n            .pipe(take(1))\n            .subscribe(service => {\n            service.setActive(value);\n        });\n    }\n    getService(context) {\n        return this.getContext(context).pipe(map((ctx) => this.getInjectedService(ctx)), filter(s => !!s));\n    }\n    getContext(context) {\n        if (context) {\n            return of(context);\n        }\n        else if (this.componentData) {\n            return this.componentData.data$.pipe(map(data => data.context), map(ctx => {\n                switch (ctx) {\n                    case 'LANGUAGE':\n                        return LANGUAGE_CONTEXT_ID;\n                    case 'CURRENCY':\n                        return CURRENCY_CONTEXT_ID;\n                    default:\n                        return ctx;\n                }\n            }));\n        }\n    }\n    getInjectedService(context) {\n        return this.injector.get(this.contextServiceMap[context], null);\n    }\n    getOptionLabel(item, context) {\n        switch (context) {\n            case LANGUAGE_CONTEXT_ID:\n                return item.nativeName;\n            case CURRENCY_CONTEXT_ID:\n                return item.symbol + ' ' + item.isocode;\n            default:\n                return item.isocode;\n        }\n    }\n};\nSiteContextComponentService.ctorParameters = () => [\n    { type: CmsComponentData, decorators: [{ type: Optional }] },\n    { type: ContextServiceMap },\n    { type: Injector }\n];\nSiteContextComponentService = __decorate([\n    Injectable(),\n    __param(0, Optional())\n], SiteContextComponentService);\n\nlet SiteContextSelectorComponent = class SiteContextSelectorComponent {\n    constructor(componentService) {\n        this.componentService = componentService;\n        this.iconTypes = ICON_TYPE;\n    }\n    get items$() {\n        return this.componentService.getItems(this.context);\n    }\n    get activeItem$() {\n        return this.componentService.getActiveItem(this.context);\n    }\n    set active(value) {\n        this.componentService.setActive(value, this.context);\n    }\n    get label$() {\n        return this.componentService.getLabel(this.context);\n    }\n};\nSiteContextSelectorComponent.ctorParameters = () => [\n    { type: SiteContextComponentService }\n];\n__decorate([\n    Input()\n], SiteContextSelectorComponent.prototype, \"context\", void 0);\nSiteContextSelectorComponent = __decorate([\n    Component({\n        selector: 'cx-site-context-selector',\n        template: \"<label *ngIf=\\\"(items$ | async)?.length > 1 && (items$ | async) as items\\\">\\n  <span>{{ label$ | async }}</span>\\n  <select (change)=\\\"active = $event.target.value\\\">\\n    <option\\n      *ngFor=\\\"let item of items\\\"\\n      value=\\\"{{ item.isocode }}\\\"\\n      [selected]=\\\"(activeItem$ | async) === item.isocode\\\"\\n      >{{ item.label }}</option\\n    > </select\\n  ><cx-icon [type]=\\\"iconTypes.CARET_DOWN\\\" class=\\\"small\\\"></cx-icon>\\n</label>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], SiteContextSelectorComponent);\n\nlet SiteContextSelectorModule = class SiteContextSelectorModule {\n};\nSiteContextSelectorModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CMSSiteContextComponent: {\n                        component: SiteContextSelectorComponent,\n                        providers: [\n                            {\n                                provide: SiteContextComponentService,\n                                useClass: SiteContextComponentService,\n                                deps: [CmsComponentData, ContextServiceMap, Injector],\n                            },\n                        ],\n                    },\n                    LanguageCurrencyComponent: {\n                        component: LanguageCurrencyComponent,\n                    },\n                },\n            }),\n            SiteContextModule,\n            IconModule,\n        ],\n        providers: [SiteContextComponentService],\n        declarations: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n        entryComponents: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n        exports: [SiteContextSelectorComponent, LanguageCurrencyComponent],\n    })\n], SiteContextSelectorModule);\n\nvar SiteContextType;\n(function (SiteContextType) {\n    SiteContextType[\"LANGUAGE\"] = \"LANGUAGE\";\n    SiteContextType[\"CURRENCY\"] = \"CURRENCY\";\n})(SiteContextType || (SiteContextType = {}));\n\nlet StarRatingComponent = class StarRatingComponent {\n    constructor(el, renderer) {\n        this.el = el;\n        this.renderer = renderer;\n        /**\n         * The rating component can be used in disabled mode,\n         * so that the interation is not provided.\n         */\n        this.disabled = false;\n        /**\n         * Emits the given rating when the user clicks on a star.\n         */\n        this.change = new EventEmitter();\n        this.initialRate = 0;\n        this.iconTypes = ICON_TYPE;\n    }\n    ngOnInit() {\n        this.setRate(this.rating, true);\n    }\n    setRate(value, force) {\n        if (!this.disabled || force) {\n            // TODO(issue:#3803) deprecated since 1.0.2\n            if (this.renderer) {\n                this.renderer.setAttribute(this.el.nativeElement, 'style', `--star-fill:${value || this.initialRate};`);\n            }\n            else {\n                this.el.nativeElement.style.setProperty('--star-fill', value || this.initialRate);\n            }\n        }\n    }\n    saveRate(rating) {\n        if (this.disabled) {\n            return;\n        }\n        this.initialRate = rating;\n        this.setRate(rating);\n        this.change.emit(rating);\n    }\n};\nStarRatingComponent.ctorParameters = () => [\n    { type: ElementRef },\n    { type: Renderer2 }\n];\n__decorate([\n    Input(), HostBinding('attr.disabled')\n], StarRatingComponent.prototype, \"disabled\", void 0);\n__decorate([\n    Input()\n], StarRatingComponent.prototype, \"rating\", void 0);\n__decorate([\n    Output()\n], StarRatingComponent.prototype, \"change\", void 0);\nStarRatingComponent = __decorate([\n    Component({\n        selector: 'cx-star-rating',\n        template: \"<cx-icon\\n  *ngFor=\\\"let i of [1, 2, 3, 4, 5]\\\"\\n  [type]=\\\"iconTypes.STAR\\\"\\n  class=\\\"star\\\"\\n  (mouseover)=\\\"setRate(i)\\\"\\n  (mouseout)=\\\"setRate(0)\\\"\\n  (click)=\\\"saveRate(i)\\\"\\n></cx-icon>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], StarRatingComponent);\n\nlet StarRatingModule = class StarRatingModule {\n};\nStarRatingModule = __decorate([\n    NgModule({\n        imports: [CommonModule, IconModule],\n        declarations: [StarRatingComponent],\n        exports: [StarRatingComponent],\n    })\n], StarRatingModule);\n\nclass ViewConfig {\n}\n\nvar ViewConfigModule_1;\nlet ViewConfigModule = ViewConfigModule_1 = class ViewConfigModule {\n    static forRoot() {\n        return {\n            ngModule: ViewConfigModule_1,\n            providers: [\n                provideConfig({\n                    view: {},\n                }),\n                {\n                    provide: ViewConfig,\n                    useExisting: Config,\n                },\n            ],\n        };\n    }\n};\nViewConfigModule = ViewConfigModule_1 = __decorate([\n    NgModule({})\n], ViewConfigModule);\n\nclass CustomFormValidators {\n    static emailDomainValidator(control) {\n        const email = control.value;\n        return email.match('[.][a-zA-Z]+$') ? null : { InvalidEmail: true };\n    }\n    static emailValidator(control) {\n        const email = control.value;\n        return email.match(EMAIL_PATTERN) ? null : { InvalidEmail: true };\n    }\n    static passwordValidator(control) {\n        const password = control.value;\n        return password.match(PASSWORD_PATTERN) ? null : { InvalidPassword: true };\n    }\n    static matchPassword(control) {\n        if (control.get('password').value !== control.get('passwordconf').value) {\n            return { NotEqual: true };\n        }\n        return null;\n    }\n}\n\nconst titleScores = {\n    mr: 1,\n    mrs: 2,\n    miss: 3,\n    ms: 4,\n    dr: 5,\n    rev: 6,\n};\nfunction sortTitles(title1, title2) {\n    if (!titleScores[title1.code] || !titleScores[title2.code]) {\n        return 1;\n    }\n    else {\n        return titleScores[title1.code] - titleScores[title2.code];\n    }\n}\n\nlet PromotionsComponent = class PromotionsComponent {\n    constructor() { }\n};\n__decorate([\n    Input()\n], PromotionsComponent.prototype, \"promotions\", void 0);\nPromotionsComponent = __decorate([\n    Component({\n        selector: 'cx-promotions',\n        template: \"<div class=\\\"cx-promotions\\\" *ngIf=\\\"promotions\\\">\\n  <ng-container *cxFeatureLevel=\\\"'!1.4'\\\">\\n    <strong *ngFor=\\\"let promotion of promotions\\\">\\n      <li>{{ promotion.description }}</li>\\n    </strong>\\n  </ng-container>\\n\\n  <ng-container *cxFeatureLevel=\\\"'1.4'\\\">\\n    <ul *ngFor=\\\"let promotion of promotions\\\">\\n      <li>{{ promotion.description }}</li>\\n    </ul>\\n  </ng-container>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], PromotionsComponent);\n\nlet PromotionsModule = class PromotionsModule {\n};\nPromotionsModule = __decorate([\n    NgModule({\n        imports: [CommonModule, FeaturesConfigModule],\n        declarations: [PromotionsComponent],\n        exports: [PromotionsComponent],\n    })\n], PromotionsModule);\n\nlet AppliedCouponsComponent = class AppliedCouponsComponent {\n    constructor(cartVoucherService) {\n        this.cartVoucherService = cartVoucherService;\n        this.cartIsLoading = false;\n        this.isReadOnly = false;\n        this.iconTypes = ICON_TYPE;\n    }\n    get sortedVouchers() {\n        this.vouchers = this.vouchers || [];\n        return this.vouchers.slice().sort((a, b) => {\n            return a.code.localeCompare(b.code);\n        });\n    }\n    removeVoucher(voucherId) {\n        this.cartVoucherService.removeVoucher(voucherId);\n    }\n};\nAppliedCouponsComponent.ctorParameters = () => [\n    { type: CartVoucherService }\n];\n__decorate([\n    Input()\n], AppliedCouponsComponent.prototype, \"vouchers\", void 0);\n__decorate([\n    Input()\n], AppliedCouponsComponent.prototype, \"cartIsLoading\", void 0);\n__decorate([\n    Input()\n], AppliedCouponsComponent.prototype, \"isReadOnly\", void 0);\nAppliedCouponsComponent = __decorate([\n    Component({\n        selector: 'cx-applied-coupons',\n        template: \"<div *ngIf=\\\"isReadOnly; else editableCoupons\\\">\\r\\n  <div *ngIf=\\\"sortedVouchers.length > 0\\\">\\r\\n    <div class=\\\"cx-applied-coupon-title\\\">\\r\\n      {{ 'voucher.vouchersApplied' | cxTranslate }}\\r\\n    </div>\\r\\n  </div>\\r\\n  <div\\r\\n    *ngFor=\\\"let voucher of sortedVouchers\\\"\\r\\n    class=\\\"coupon-summary cx-coupon-card textonly\\\"\\r\\n    role=\\\"filter\\\"\\r\\n  >\\r\\n    <span class=\\\"cx-applied-coupon-code\\\">{{ voucher.voucherCode }}</span>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<ng-template #editableCoupons>\\r\\n  <div class=\\\"row\\\">\\r\\n    <div\\r\\n      *ngFor=\\\"let voucher of sortedVouchers\\\"\\r\\n      class=\\\"col-sm-12 col-md-6 col-lg-12 cx-coupon-card-grid\\\"\\r\\n      role=\\\"filter\\\"\\r\\n    >\\r\\n      <div class=\\\"cx-coupon-apply cx-coupon-card cx-coupon-list-wrap\\\">\\r\\n        <span class=\\\"cx-cart-coupon-code\\\">{{ voucher.voucherCode }}</span>\\r\\n        <button\\r\\n          type=\\\"button\\\"\\r\\n          class=\\\"close\\\"\\r\\n          aria-label=\\\"Close\\\"\\r\\n          (click)=\\\"removeVoucher(voucher.voucherCode)\\\"\\r\\n          [disabled]=\\\"cartIsLoading\\\"\\r\\n          [class.disabled]=\\\"cartIsLoading\\\"\\r\\n        >\\r\\n          <span aria-hidden=\\\"true\\\">\\r\\n            <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\r\\n          </span>\\r\\n        </button>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</ng-template>\\r\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], AppliedCouponsComponent);\n\nlet CartCouponComponent = class CartCouponComponent {\n    constructor(cartService, authService, cartVoucherService, formBuilder, customerCouponService, featureConfig) {\n        this.cartService = cartService;\n        this.authService = authService;\n        this.cartVoucherService = cartVoucherService;\n        this.formBuilder = formBuilder;\n        this.customerCouponService = customerCouponService;\n        this.featureConfig = featureConfig;\n        this.MAX_CUSTOMER_COUPON_PAGE = 100;\n        this.ignoreCloseEvent = false;\n        this.subscription = new Subscription();\n        this.couponBoxIsActive = false;\n    }\n    ngOnInit() {\n        if (this.customerCouponService) {\n            this.customerCouponService.loadCustomerCoupons(this.MAX_CUSTOMER_COUPON_PAGE);\n        }\n        if (this.featureConfig && this.featureConfig.isLevel('1.5')) {\n            this.cart$ = combineLatest([\n                this.cartService.getActive(),\n                this.authService.getOccUserId(),\n                this.customerCouponService.getCustomerCoupons(this.MAX_CUSTOMER_COUPON_PAGE),\n            ]).pipe(tap(([cart, userId, customerCoupons]) => {\n                this.cartId =\n                    userId === OCC_USER_ID_ANONYMOUS ? cart.guid : cart.code;\n                this.getApplicableCustomerCoupons(cart, customerCoupons.coupons);\n            }), map(([cart]) => cart));\n        }\n        //TODO(issue:#5971) Deprecated since 1.5\n        else {\n            this.cart$ = combineLatest([\n                this.cartService.getActive(),\n                this.authService.getOccUserId(),\n            ]).pipe(tap(([cart, userId]) => (this.cartId =\n                userId === OCC_USER_ID_ANONYMOUS ? cart.guid : cart.code)), map(([cart]) => cart));\n        }\n        //TODO(issue:#5971) Deprecated since 1.5\n        this.cartIsLoading$ = this.cartService\n            .getLoaded()\n            .pipe(map(loaded => !loaded));\n        this.cartVoucherService.resetAddVoucherProcessingState();\n        this.form = this.formBuilder.group({\n            couponCode: ['', [Validators.required]],\n        });\n        this.submitDisabled$ = combineLatest([\n            this.cartIsLoading$,\n            this.form.valueChanges.pipe(startWith(true), map(() => this.form.valid)),\n            this.cartVoucherService.getAddVoucherResultLoading(),\n        ]).pipe(map(([cartIsLoading, btnEnabled, addVoucherIsLoading]) => cartIsLoading || !btnEnabled || addVoucherIsLoading));\n        this.subscription.add(this.cartVoucherService\n            .getAddVoucherResultSuccess()\n            .subscribe(success => {\n            this.onSuccess(success);\n        }));\n        this.subscription.add(this.cartVoucherService.getAddVoucherResultError().subscribe(error => {\n            this.onError(error);\n        }));\n    }\n    onError(error) {\n        if (error) {\n            this.customerCouponService.loadCustomerCoupons(this.MAX_CUSTOMER_COUPON_PAGE);\n            this.cartVoucherService.resetAddVoucherProcessingState();\n        }\n    }\n    onSuccess(success) {\n        if (success) {\n            this.form.reset();\n            this.cartVoucherService.resetAddVoucherProcessingState();\n        }\n    }\n    getApplicableCustomerCoupons(cart, coupons) {\n        this.applicableCoupons = coupons || [];\n        if (cart.appliedVouchers) {\n            cart.appliedVouchers.forEach(appliedVoucher => {\n                this.applicableCoupons = this.applicableCoupons.filter(coupon => coupon.couponId !== appliedVoucher.code);\n            });\n        }\n        this.filteredCoupons = this.applicableCoupons;\n    }\n    applyVoucher() {\n        this.cartVoucherService.addVoucher(this.form.value.couponCode, this.cartId);\n    }\n    applyCustomerCoupon(couponId) {\n        this.cartVoucherService.addVoucher(couponId, this.cartId);\n        this.couponBoxIsActive = false;\n    }\n    filter(query) {\n        const filterValue = query.toLowerCase();\n        this.filteredCoupons = this.applicableCoupons.filter(coupon => coupon.couponId.toLowerCase().indexOf(filterValue) > -1);\n    }\n    open() {\n        this.filteredCoupons = this.applicableCoupons;\n        if (this.applicableCoupons.length > 0) {\n            this.couponBoxIsActive = true;\n        }\n    }\n    close(event) {\n        if (!this.ignoreCloseEvent) {\n            this.couponBoxIsActive = false;\n            if (event && event.target) {\n                event.target.blur();\n            }\n        }\n        this.ignoreCloseEvent = false;\n    }\n    disableClose() {\n        this.ignoreCloseEvent = true;\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n        this.cartVoucherService.resetAddVoucherProcessingState();\n    }\n};\nCartCouponComponent.ctorParameters = () => [\n    { type: CartService },\n    { type: AuthService },\n    { type: CartVoucherService },\n    { type: FormBuilder },\n    { type: CustomerCouponService },\n    { type: FeatureConfigService }\n];\nCartCouponComponent = __decorate([\n    Component({\n        selector: 'cx-cart-coupon',\n        template: \"<ng-container *ngIf=\\\"cart$ | async as cart\\\">\\n  <div class=\\\"cx-cart-coupon-title\\\">\\n    {{ 'voucher.coupon' | cxTranslate }}\\n  </div>\\n  <div class=\\\"form-group \\\">\\n    <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n      <form (submit)=\\\"applyVoucher()\\\" [formGroup]=\\\"form\\\" autocomplete=\\\"off\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-md-8\\\">\\n            <div class=\\\"cx-apply-voucher\\\">\\n              <input\\n                #couponInput\\n                class=\\\"form-control input-coupon-code\\\"\\n                id=\\\"applyVoucher\\\"\\n                formControlName=\\\"couponCode\\\"\\n                [placeholder]=\\\"'voucher.placeholder' | cxTranslate\\\"\\n                aria-label=\\\"applyVoucher\\\"\\n                (focus)=\\\"open()\\\"\\n                (input)=\\\"filter(couponInput.value)\\\"\\n                (blur)=\\\"close($event)\\\"\\n                (keydown.escape)=\\\"close($event)\\\"\\n                autocomplete=\\\"off\\\"\\n              />\\n\\n              <div [class.couponbox-is-active]=\\\"couponBoxIsActive\\\">\\n                <div\\n                  *ngIf=\\\"filteredCoupons && filteredCoupons.length > 0\\\"\\n                  class=\\\"cx-customer-coupons\\\"\\n                  (click)=\\\"close($event)\\\"\\n                >\\n                  <div class=\\\"coupons\\\" (mousedown)=\\\"disableClose()\\\">\\n                    <a\\n                      *ngFor=\\\"let coupon of filteredCoupons\\\"\\n                      (click)=\\\"applyCustomerCoupon(coupon.couponId)\\\"\\n                    >\\n                      <div class=\\\"coupon-id\\\">{{ coupon.couponId }}</div>\\n                    </a>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"col-md-4\\\">\\n            <button\\n              class=\\\"btn btn-block btn-action apply-coupon-button\\\"\\n              type=\\\"submit\\\"\\n              [disabled]=\\\"submitDisabled$ | async\\\"\\n              [class.disabled]=\\\"submitDisabled$ | async\\\"\\n            >\\n              {{ 'voucher.apply' | cxTranslate }}\\n            </button>\\n          </div>\\n        </div>\\n      </form>\\n    </ng-container>\\n\\n    <ng-container *cxFeatureLevel=\\\"'!1.5'\\\">\\n      <form (submit)=\\\"applyVoucher()\\\" [formGroup]=\\\"form\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-md-8\\\">\\n            <input\\n              type=\\\"text\\\"\\n              class=\\\"form-control input-coupon-code\\\"\\n              id=\\\"applyVoucher\\\"\\n              formControlName=\\\"couponCode\\\"\\n              placeholder=\\\"{{ 'voucher.placeholder' | cxTranslate }}\\\"\\n            />\\n          </div>\\n          <div class=\\\"col-md-4\\\">\\n            <button\\n              class=\\\"btn btn-block btn-action apply-coupon-button\\\"\\n              type=\\\"submit\\\"\\n              [disabled]=\\\"submitDisabled$ | async\\\"\\n              [class.disabled]=\\\"submitDisabled$ | async\\\"\\n            >\\n              {{ 'voucher.apply' | cxTranslate }}\\n            </button>\\n          </div>\\n        </div>\\n      </form>\\n    </ng-container>\\n  </div>\\n\\n  <cx-applied-coupons\\n    [vouchers]=\\\"cart.appliedVouchers\\\"\\n    [cartIsLoading]=\\\"cartIsLoading$ | async\\\"\\n    [isReadOnly]=\\\"false\\\"\\n  >\\n  </cx-applied-coupons>\\n</ng-container>\\n\"\n    })\n], CartCouponComponent);\n\nlet CartCouponModule = class CartCouponModule {\n};\nCartCouponModule = __decorate([\n    NgModule({\n        declarations: [CartCouponComponent, AppliedCouponsComponent],\n        exports: [CartCouponComponent, AppliedCouponsComponent],\n        imports: [\n            FeaturesConfigModule,\n            CommonModule,\n            NgSelectModule,\n            FormsModule,\n            ReactiveFormsModule,\n            I18nModule,\n            IconModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CartApplyCouponComponent: {\n                        component: CartCouponComponent,\n                    },\n                },\n            }),\n        ],\n        entryComponents: [CartCouponComponent],\n    })\n], CartCouponModule);\n\nlet CartItemListComponent = class CartItemListComponent {\n    constructor(cartService, selectiveCartService, featureConfig) {\n        this.cartService = cartService;\n        this.selectiveCartService = selectiveCartService;\n        this.featureConfig = featureConfig;\n        this.readonly = false;\n        this.hasHeader = true;\n        this.options = {\n            isSaveForLater: false,\n            optionalBtn: null,\n        };\n        this._items = [];\n        this.potentialProductPromotions = [];\n        this.promotionLocation = PromotionLocation.ActiveCart;\n    }\n    set items(items) {\n        this.resolveItems(items);\n        this.createForm();\n    }\n    get items() {\n        return this._items;\n    }\n    set setLoading(value) {\n        if (!this.readonly) {\n            // Whenver the cart is loading, we disable the complete form\n            // to avoid any user interaction with the cart.\n            value\n                ? this.form.disable({ emitEvent: false })\n                : this.form.enable({ emitEvent: false });\n        }\n    }\n    //TODO remove feature flag for #5958\n    isSaveForLaterEnabled() {\n        if (this.featureConfig) {\n            return this.featureConfig.isEnabled('saveForLater');\n        }\n        return false;\n    }\n    //TODO remove feature flag for #5958\n    /**\n     * The items we're getting form the input do not have a consistent model.\n     * In case of a `consignmentEntry`, we need to normalize the data from the orderEntry.\n     */\n    resolveItems(items) {\n        if (items.every(item => item.hasOwnProperty('orderEntry'))) {\n            this._items = items.map(consignmentEntry => {\n                const entry = Object.assign({}, consignmentEntry.orderEntry);\n                entry.quantity = consignmentEntry.quantity;\n                return entry;\n            });\n        }\n        else {\n            this._items = items;\n        }\n    }\n    createForm() {\n        this.form = new FormGroup({});\n        this._items.forEach(item => {\n            const { code } = item.product;\n            const group = new FormGroup({\n                entryNumber: new FormControl(item.entryNumber),\n                quantity: new FormControl(item.quantity, { updateOn: 'blur' }),\n            });\n            if (!item.updateable || this.readonly) {\n                group.disable();\n            }\n            this.form.addControl(code, group);\n        });\n    }\n    removeEntry(item) {\n        if (this.selectiveCartService && this.options.isSaveForLater) {\n            this.selectiveCartService.removeEntry(item);\n        }\n        else {\n            this.cartService.removeEntry(item);\n        }\n        delete this.form.controls[item.product.code];\n    }\n    getControl(item) {\n        return this.form.get(item.product.code).valueChanges.pipe(\n        // tslint:disable-next-line:deprecation\n        startWith(null), map(value => {\n            if (value) {\n                this.cartService.updateEntry(value.entryNumber, value.quantity);\n            }\n        }), map(() => this.form.get(item.product.code)));\n    }\n    getPotentialProductPromotionsForItem(item) {\n        const entryPromotions = [];\n        //don't show promotions in saveforlater\n        if (this.options.isSaveForLater) {\n            return entryPromotions;\n        }\n        if (this.potentialProductPromotions &&\n            this.potentialProductPromotions.length > 0) {\n            for (const promotion of this.potentialProductPromotions) {\n                if (promotion.description &&\n                    promotion.consumedEntries &&\n                    promotion.consumedEntries.length > 0) {\n                    for (const consumedEntry of promotion.consumedEntries) {\n                        if (this.isConsumedByEntry(consumedEntry, item)) {\n                            entryPromotions.push(promotion);\n                        }\n                    }\n                }\n            }\n        }\n        return entryPromotions;\n    }\n    isConsumedByEntry(consumedEntry, entry) {\n        const consumedEntryNumber = consumedEntry.orderEntryNumber;\n        if (entry.entries && entry.entries.length > 0) {\n            for (const subEntry of entry.entries) {\n                if (subEntry.entryNumber === consumedEntryNumber) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        else {\n            return consumedEntryNumber === entry.entryNumber;\n        }\n    }\n};\nCartItemListComponent.ctorParameters = () => [\n    { type: CartService },\n    { type: SelectiveCartService },\n    { type: FeatureConfigService }\n];\n__decorate([\n    Input()\n], CartItemListComponent.prototype, \"readonly\", void 0);\n__decorate([\n    Input()\n], CartItemListComponent.prototype, \"hasHeader\", void 0);\n__decorate([\n    Input()\n], CartItemListComponent.prototype, \"options\", void 0);\n__decorate([\n    Input('items')\n], CartItemListComponent.prototype, \"items\", null);\n__decorate([\n    Input()\n], CartItemListComponent.prototype, \"potentialProductPromotions\", void 0);\n__decorate([\n    Input()\n], CartItemListComponent.prototype, \"promotionLocation\", void 0);\n__decorate([\n    Input('cartIsLoading')\n], CartItemListComponent.prototype, \"setLoading\", null);\nCartItemListComponent = __decorate([\n    Component({\n        selector: 'cx-cart-item-list',\n        template: \"<div *ngIf=\\\"hasHeader\\\" class=\\\"d-none d-md-block d-lg-block d-xl-block\\\">\\n  <div class=\\\"cx-item-list-header row\\\">\\n    <div class=\\\"cx-item-list-desc col-md-5 col-lg-5 col-xl-6\\\">\\n      {{ 'cartItems.description' | cxTranslate }}\\n    </div>\\n    <div class=\\\"cx-item-list-price col-md-3 col-lg-2 col-xl-2\\\">\\n      {{ 'cartItems.itemPrice' | cxTranslate }}\\n    </div>\\n    <div class=\\\"cx-item-list-qty col-md-2 col-lg-3 col-xl-2\\\">\\n      {{ 'cartItems.quantity' | cxTranslate }}\\n    </div>\\n\\n    <ng-container\\n      *ngIf=\\\"\\n        isSaveForLaterEnabled() && options.isSaveForLater;\\n        else totalHeader\\n      \\\"\\n    >\\n      <div class=\\\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\\\">\\n        {{ 'saveForLaterItems.stock' | cxTranslate }}\\n      </div>\\n    </ng-container>\\n  </div>\\n</div>\\n\\n<div class=\\\"cx-item-list-row\\\" *ngFor=\\\"let item of items; let i = index\\\">\\n  <div\\n    class=\\\"cx-item-list-items\\\"\\n    *ngIf=\\\"getControl(item) | async as control\\\"\\n    [class.is-changed]=\\\"control.get('quantity').dirty\\\"\\n  >\\n    <cx-cart-item\\n      [item]=\\\"item\\\"\\n      [quantityControl]=\\\"control.get('quantity')\\\"\\n      [readonly]=\\\"readonly\\\"\\n      [potentialProductPromotions]=\\\"getPotentialProductPromotionsForItem(item)\\\"\\n      [promotionLocation]=\\\"promotionLocation\\\"\\n      [options]=\\\"options\\\"\\n    >\\n    </cx-cart-item>\\n  </div>\\n</div>\\n\\n<ng-template #totalHeader>\\n  <div class=\\\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\\\">\\n    {{ 'cartItems.total' | cxTranslate }}\\n  </div>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CartItemListComponent);\n\nlet CartItemComponent = class CartItemComponent {\n    constructor(promotionService, featureConfig) {\n        this.promotionService = promotionService;\n        this.featureConfig = featureConfig;\n        this.compact = false;\n        this.readonly = false;\n        this.view = new EventEmitter();\n        this.promotionLocation = PromotionLocation.ActiveCart;\n        // TODO: evaluate whether this is generic enough\n        this.options = {\n            isSaveForLater: false,\n            optionalBtn: null,\n        };\n    }\n    ngOnInit() {\n        this.appliedProductPromotions$ = this.promotionService.getProductPromotionForEntry(this.item, this.promotionLocation);\n    }\n    //TODO remove feature flag for #5958\n    isSaveForLaterEnabled() {\n        if (this.featureConfig) {\n            return this.featureConfig.isEnabled('saveForLater');\n        }\n        return false;\n    }\n    //TODO remove feature flag for #5958\n    isProductOutOfStock(product) {\n        // TODO Move stocklevelstatuses across the app to an enum\n        return (product &&\n            product.stock &&\n            product.stock.stockLevelStatus === 'outOfStock');\n    }\n    removeItem() {\n        this.quantityControl.setValue(0);\n        this.quantityControl.markAsDirty();\n    }\n    viewItem() {\n        this.view.emit();\n    }\n};\nCartItemComponent.ctorParameters = () => [\n    { type: PromotionService },\n    { type: FeatureConfigService }\n];\n__decorate([\n    Input()\n], CartItemComponent.prototype, \"compact\", void 0);\n__decorate([\n    Input()\n], CartItemComponent.prototype, \"item\", void 0);\n__decorate([\n    Input()\n], CartItemComponent.prototype, \"potentialProductPromotions\", void 0);\n__decorate([\n    Input()\n], CartItemComponent.prototype, \"readonly\", void 0);\n__decorate([\n    Input()\n], CartItemComponent.prototype, \"quantityControl\", void 0);\n__decorate([\n    Output()\n], CartItemComponent.prototype, \"view\", void 0);\n__decorate([\n    Input()\n], CartItemComponent.prototype, \"promotionLocation\", void 0);\n__decorate([\n    Input()\n], CartItemComponent.prototype, \"options\", void 0);\nCartItemComponent = __decorate([\n    Component({\n        selector: 'cx-cart-item',\n        template: \"<div [ngClass]=\\\"compact ? 'cx-compact row' : 'row'\\\">\\n  <!-- Item Image -->\\n  <div class=\\\"col-2 cx-image-container\\\">\\n    <a\\n      [routerLink]=\\\"{ cxRoute: 'product', params: item.product } | cxUrl\\\"\\n      (click)=\\\"viewItem()\\\"\\n    >\\n      <cx-media\\n        [container]=\\\"item.product.images?.PRIMARY\\\"\\n        format=\\\"thumbnail\\\"\\n      ></cx-media>\\n    </a>\\n  </div>\\n  <!-- Item Information -->\\n  <div class=\\\"cx-info col-10\\\">\\n    <div class=\\\"cx-info-container row \\\">\\n      <!-- Item Description -->\\n      <div [ngClass]=\\\"compact ? '' : ' col-md-3 col-lg-3 col-xl-5'\\\">\\n        <div *ngIf=\\\"item.product.name\\\" class=\\\"cx-name\\\">\\n          <a\\n            class=\\\"cx-link\\\"\\n            [routerLink]=\\\"{ cxRoute: 'product', params: item.product } | cxUrl\\\"\\n            (click)=\\\"viewItem()\\\"\\n            >{{ item.product.name }}</a\\n          >\\n        </div>\\n        <div *ngIf=\\\"item.product.code\\\" class=\\\"cx-code\\\">\\n          {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\\n        </div>\\n        <!-- Variants -->\\n        <ng-container *cxFeatureLevel=\\\"'!1.5'\\\">\\n          <div\\n            *ngFor=\\\"let variant of item.product.variantOptionQualifiers\\\"\\n            class=\\\"cx-property\\\"\\n          >\\n            <div class=\\\"cx-label\\\">{{ variant.name }}</div>\\n            <div class=\\\"cx-value\\\">{{ variant.value }}</div>\\n          </div>\\n        </ng-container>\\n        <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n          <ng-container *ngIf=\\\"item.product.baseOptions?.length\\\">\\n            <div\\n              *ngFor=\\\"\\n                let variant of item.product.baseOptions[0]?.selected\\n                  ?.variantOptionQualifiers\\n              \\\"\\n              class=\\\"cx-property\\\"\\n            >\\n              <div class=\\\"cx-label\\\" *ngIf=\\\"variant.name && variant.value\\\">\\n                {{ variant.name }}: {{ variant.value }}\\n              </div>\\n            </div>\\n          </ng-container>\\n        </ng-container>\\n      </div>\\n      <!-- Item Price -->\\n      <div\\n        *ngIf=\\\"item.basePrice\\\"\\n        class=\\\"cx-price\\\"\\n        [ngClass]=\\\"compact ? '' : ' col-md-3 col-lg-3 col-xl-2'\\\"\\n      >\\n        <div\\n          class=\\\"cx-label\\\"\\n          [ngClass]=\\\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\\\"\\n        >\\n          {{ 'cartItems.itemPrice' | cxTranslate }}\\n        </div>\\n        <div *ngIf=\\\"item.basePrice\\\" class=\\\"cx-value\\\">\\n          {{ item.basePrice?.formattedValue }}\\n        </div>\\n      </div>\\n      <!-- Item Quantity -->\\n      <div class=\\\"cx-quantity\\\" [ngClass]=\\\"compact ? '' : ' col-3'\\\">\\n        <div\\n          class=\\\"cx-label\\\"\\n          [ngClass]=\\\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\\\"\\n          placement=\\\"left\\\"\\n          title=\\\"{{ 'cartItems.quantityTitle' | cxTranslate }}\\\"\\n        >\\n          {{ 'cartItems.quantity' | cxTranslate }}\\n        </div>\\n        <div class=\\\"cx-value\\\">\\n          <cx-item-counter\\n            [control]=\\\"quantityControl\\\"\\n            [readonly]=\\\"!item.updateable || readonly\\\"\\n            [max]=\\\"item.product.stock?.stockLevel || 1000\\\"\\n            [allowZero]=\\\"true\\\"\\n          >\\n          </cx-item-counter>\\n        </div>\\n      </div>\\n      <!-- Total -->\\n      <ng-container\\n        *ngIf=\\\"isSaveForLaterEnabled() && options.isSaveForLater; else total\\\"\\n      >\\n        <div\\n          class=\\\"cx-total\\\"\\n          [ngClass]=\\\"compact ? '' : ' col-md-3 col-lg-3 col-xl-2'\\\"\\n        >\\n          <div\\n            class=\\\"cx-label\\\"\\n            [ngClass]=\\\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\\\"\\n          >\\n            {{ 'saveForLaterItems.stock' | cxTranslate }}\\n          </div>\\n          <div\\n            *ngIf=\\\"item.product?.stock?.stockLevel >= 0; else forceInstock\\\"\\n            class=\\\"cx-value\\\"\\n          >\\n            {{ item.product.stock.stockLevel }}\\n          </div>\\n          <ng-template #forceInstock\\n            ><div class=\\\"cx-value\\\">\\n              {{ 'saveForLaterItems.forceInStock' | cxTranslate }}\\n            </div></ng-template\\n          >\\n        </div>\\n      </ng-container>\\n    </div>\\n    <!-- Availability -->\\n    <div\\n      *ngIf=\\\"isProductOutOfStock(item.product)\\\"\\n      class=\\\"cx-availability col-12\\\"\\n    >\\n      {{ 'productSummary.outOfStock' | cxTranslate }}\\n    </div>\\n    <!-- Promotion -->\\n    <ng-container *cxFeatureLevel=\\\"'!1.5'\\\">\\n      <cx-promotions [promotions]=\\\"potentialProductPromotions\\\"></cx-promotions>\\n    </ng-container>\\n\\n    <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n      <ng-container\\n        *ngIf=\\\"appliedProductPromotions$ | async as appliedProductPromotions\\\"\\n      >\\n        <cx-promotions [promotions]=\\\"appliedProductPromotions\\\"></cx-promotions>\\n      </ng-container>\\n    </ng-container>\\n\\n    <!-- Actions -->\\n    <div\\n      *ngIf=\\\"(!readonly || options.isSaveForLater) && item.updateable\\\"\\n      class=\\\"cx-actions col-12\\\"\\n    >\\n      <ng-container *ngIf=\\\"!isProductOutOfStock(item.product)\\\">\\n        <ng-container\\n          *ngTemplateOutlet=\\\"\\n            options.optionalBtn;\\n            context: {\\n              $implicit: { loading: quantityControl.disabled, item: item }\\n            }\\n          \\\"\\n        ></ng-container>\\n      </ng-container>\\n\\n      <div class=\\\"col-md-3 cx-remove-btn\\\">\\n        <button\\n          class=\\\"link\\\"\\n          [disabled]=\\\"quantityControl.disabled\\\"\\n          (click)=\\\"removeItem()\\\"\\n        >\\n          {{ 'common.remove' | cxTranslate }}\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\\n<ng-template #total>\\n  <div\\n    *ngIf=\\\"item.totalPrice\\\"\\n    class=\\\"cx-total\\\"\\n    [ngClass]=\\\"compact ? '' : ' col-md-3 col-xl-2'\\\"\\n  >\\n    <div\\n      class=\\\"cx-label\\\"\\n      [ngClass]=\\\"compact ? '' : ' d-block d-md-none d-lg-none d-xl-none'\\\"\\n    >\\n      {{ 'cartItems.total' | cxTranslate }}\\n    </div>\\n    <div class=\\\"cx-value\\\">{{ item.totalPrice.formattedValue }}</div>\\n  </div>\\n</ng-template>\\n\"\n    })\n], CartItemComponent);\n\nlet OrderSummaryComponent = class OrderSummaryComponent {\n};\n__decorate([\n    Input()\n], OrderSummaryComponent.prototype, \"cart\", void 0);\nOrderSummaryComponent = __decorate([\n    Component({\n        selector: 'cx-order-summary',\n        template: \"<h4>{{ 'orderCost.orderSummary' | cxTranslate }}</h4>\\n\\n<div class=\\\"cx-summary-partials\\\" *ngIf=\\\"cart\\\">\\n  <div class=\\\"cx-summary-row\\\">\\n    <div class=\\\"col-6 cx-summary-label\\\">\\n      {{ 'orderCost.subtotal' | cxTranslate }}\\n    </div>\\n    <div class=\\\"col-6 cx-summary-amount\\\">\\n      {{ cart.subTotal?.formattedValue }}\\n    </div>\\n  </div>\\n  <div class=\\\"cx-summary-row\\\">\\n    <div class=\\\"col-6 cx-summary-label\\\">\\n      {{ 'orderCost.estimatedShipping' | cxTranslate }}\\n    </div>\\n    <div class=\\\"col-6 cx-summary-amount\\\">\\n      {{\\n        cart.deliveryCost?.formattedValue\\n          ? cart.deliveryCost.formattedValue\\n          : 'TBD'\\n      }}\\n    </div>\\n  </div>\\n  <div class=\\\"cx-summary-row\\\" *ngIf=\\\"cart.net\\\">\\n    <div class=\\\"col-6 cx-summary-label\\\">\\n      {{ 'orderCost.salesTax' | cxTranslate }}\\n    </div>\\n    <div class=\\\"col-6 cx-summary-amount\\\">\\n      {{ cart.totalTax?.formattedValue }}\\n    </div>\\n  </div>\\n  <div class=\\\"cx-summary-row cx-summary-total\\\">\\n    <div class=\\\"col-6 cx-summary-label\\\">\\n      {{ 'orderCost.total' | cxTranslate }}\\n    </div>\\n    <div class=\\\"col-6 cx-summary-amount\\\">\\n      {{ cart.totalPriceWithTax?.formattedValue }}\\n    </div>\\n  </div>\\n  <div class=\\\"cx-summary-row\\\" *ngIf=\\\"cart.totalDiscounts?.value > 0\\\">\\n    {{ 'orderCost.discount' | cxTranslate }}\\n    {{ cart.totalDiscounts?.formattedValue }}\\n  </div>\\n  <div class=\\\"cx-summary-row\\\" *ngIf=\\\"!cart.net\\\">\\n    {{ 'orderCost.grossTax' | cxTranslate }}\\n    {{ cart.totalTax?.formattedValue }}.\\n  </div>\\n</div>\\n\\n<!--\\n<cx-promotions\\n  *ngIf=\\\"cart\\\"\\n  [promotions]=\\\"cart.appliedOrderPromotions\\\"\\n></cx-promotions>\\n-->\\n\\n<ng-container *cxFeatureLevel=\\\"'1.3'\\\">\\n  <cx-applied-coupons\\n    [vouchers]=\\\"cart.appliedVouchers\\\"\\n    [isReadOnly]=\\\"true\\\"\\n  ></cx-applied-coupons>\\n</ng-container>\\n\"\n    })\n], OrderSummaryComponent);\n\nlet CartSharedModule = class CartSharedModule {\n};\nCartSharedModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            CartCouponModule,\n            ReactiveFormsModule,\n            UrlModule,\n            NgbModule,\n            PromotionsModule,\n            I18nModule,\n            MediaModule,\n            ItemCounterModule,\n            FeaturesConfigModule,\n        ],\n        declarations: [\n            CartItemComponent,\n            OrderSummaryComponent,\n            CartItemListComponent,\n        ],\n        exports: [CartItemComponent, CartItemListComponent, OrderSummaryComponent],\n    })\n], CartSharedModule);\n\nlet AddToCartModule = class AddToCartModule {\n};\nAddToCartModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            CartSharedModule,\n            RouterModule,\n            SpinnerModule,\n            PromotionsModule,\n            FeaturesConfigModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductAddToCartComponent: {\n                        component: AddToCartComponent,\n                    },\n                },\n            }),\n            UrlModule,\n            IconModule,\n            I18nModule,\n            ItemCounterModule,\n            AutoFocusDirectiveModule,\n        ],\n        declarations: [AddToCartComponent, AddedToCartDialogComponent],\n        entryComponents: [AddToCartComponent, AddedToCartDialogComponent],\n        exports: [AddToCartComponent, AddedToCartDialogComponent],\n    })\n], AddToCartModule);\n\nlet CartDetailsComponent = class CartDetailsComponent {\n    constructor(cartService, promotionService, selectiveCartService, authService, routingService, featureConfig) {\n        this.cartService = cartService;\n        this.promotionService = promotionService;\n        this.selectiveCartService = selectiveCartService;\n        this.authService = authService;\n        this.routingService = routingService;\n        this.featureConfig = featureConfig;\n        this.loggedIn = false;\n        this.promotionLocation = PromotionLocation.ActiveCart;\n    }\n    ngOnInit() {\n        this.cart$ = this.cartService.getActive();\n        /**\n         * TODO Remove the check for promotion service\n         * Issue: GH-5670\n         */\n        if (this.promotionService) {\n            this.promotions$ = this.promotionService.getOrderPromotionsFromCart();\n        }\n        this.entries$ = this.cartService\n            .getEntries()\n            .pipe(filter(entries => entries.length > 0));\n        if (this.isSaveForLaterEnabled()) {\n            this.cartLoaded$ = combineLatest([\n                this.cartService.getLoaded(),\n                this.selectiveCartService.getLoaded(),\n                this.authService.isUserLoggedIn(),\n            ]).pipe(tap(([, , loggedIn]) => (this.loggedIn = loggedIn)), map(([cartLoaded, sflLoaded, loggedIn]) => loggedIn ? cartLoaded && sflLoaded : cartLoaded));\n        }\n        //TODO remove for #5958\n        else {\n            this.cartLoaded$ = this.cartService.getLoaded();\n        }\n        //TODO  remove for #5958 end\n        if (this.promotionService) {\n            this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);\n        }\n    }\n    //TODO remove feature flag for #5958\n    isSaveForLaterEnabled() {\n        if (this.featureConfig) {\n            return this.featureConfig.isEnabled('saveForLater');\n        }\n        return false;\n    }\n    //TODO remove feature flag for #5958 end\n    /**\n     * @deprecated Since 1.5\n     * Use promotionService instead of the promotion inputs.\n     * Remove issue: #5670\n     */\n    getAllPromotionsForCart(cart) {\n        const potentialPromotions = [];\n        potentialPromotions.push(...(cart.potentialOrderPromotions || []));\n        potentialPromotions.push(...(cart.potentialProductPromotions || []));\n        const appliedPromotions = [];\n        appliedPromotions.push(...(cart.appliedOrderPromotions || []));\n        appliedPromotions.push(...(cart.appliedProductPromotions || []));\n        return [...potentialPromotions, ...appliedPromotions];\n    }\n    saveForLater(item) {\n        if (this.loggedIn) {\n            this.cartService.removeEntry(item);\n            this.selectiveCartService.addEntry(item.product.code, item.quantity);\n        }\n        else {\n            this.routingService.go({ cxRoute: 'login' });\n        }\n    }\n};\nCartDetailsComponent.ctorParameters = () => [\n    { type: CartService },\n    { type: PromotionService },\n    { type: SelectiveCartService },\n    { type: AuthService },\n    { type: RoutingService },\n    { type: FeatureConfigService }\n];\nCartDetailsComponent = __decorate([\n    Component({\n        selector: 'cx-cart-details',\n        template: \"<ng-container *ngIf=\\\"cart$ | async as cart\\\">\\n  <ng-container *ngIf=\\\"entries$ | async as entries\\\">\\n    <div *ngIf=\\\"cart.totalItems > 0\\\" class=\\\"cart-details-wrapper\\\">\\n      <div class=\\\"cx-total\\\">\\n        {{ 'cartDetails.cartName' | cxTranslate: { code: cart.code } }}\\n      </div>\\n\\n      <ng-container *cxFeatureLevel=\\\"'!1.5'\\\">\\n        <cx-promotions [promotions]=\\\"promotions$ | async\\\"></cx-promotions>\\n\\n        <cx-cart-item-list\\n          [items]=\\\"entries\\\"\\n          [cartIsLoading]=\\\"!(cartLoaded$ | async)\\\"\\n          [potentialProductPromotions]=\\\"cart.potentialProductPromotions\\\"\\n        ></cx-cart-item-list>\\n      </ng-container>\\n\\n      <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n        <ng-container *ngIf=\\\"orderPromotions$ | async as orderPromotions\\\">\\n          <cx-promotions [promotions]=\\\"orderPromotions\\\"></cx-promotions>\\n        </ng-container>\\n\\n        <cx-cart-item-list\\n          [items]=\\\"entries\\\"\\n          [cartIsLoading]=\\\"!(cartLoaded$ | async)\\\"\\n          [promotionLocation]=\\\"promotionLocation\\\"\\n          [options]=\\\"{\\n            isSaveForLater: false,\\n            optionalBtn: isSaveForLaterEnabled() ? saveForLaterBtn : null\\n          }\\\"\\n        ></cx-cart-item-list>\\n      </ng-container>\\n    </div>\\n  </ng-container>\\n</ng-container>\\n\\n<ng-template let-ctx #saveForLaterBtn>\\n  <div class=\\\"col-md-3 col-lg-3 col-xl-3 cx-sfl-btn\\\">\\n    <button\\n      class=\\\"link\\\"\\n      [disabled]=\\\"ctx.loading\\\"\\n      (click)=\\\"saveForLater(ctx.item)\\\"\\n    >\\n      {{ 'saveForLaterItems.saveForLater' | cxTranslate }}\\n    </button>\\n  </div>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CartDetailsComponent);\n\nlet CartDetailsModule = class CartDetailsModule {\n};\nCartDetailsModule = __decorate([\n    NgModule({\n        imports: [\n            CartSharedModule,\n            CommonModule,\n            CartCouponModule,\n            RouterModule,\n            UrlModule,\n            PromotionsModule,\n            FeaturesConfigModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CartComponent: {\n                        component: CartDetailsComponent,\n                    },\n                },\n            }),\n            I18nModule,\n        ],\n        declarations: [CartDetailsComponent],\n        exports: [CartDetailsComponent],\n        entryComponents: [CartDetailsComponent],\n    })\n], CartDetailsModule);\n\nlet CartNotEmptyGuard = class CartNotEmptyGuard {\n    constructor(cartService, routingService) {\n        this.cartService = cartService;\n        this.routingService = routingService;\n    }\n    canActivate() {\n        return combineLatest([\n            this.cartService.getActive(),\n            this.cartService.getLoaded(),\n        ]).pipe(filter(([_, loaded]) => loaded), map(([cart]) => {\n            if (this.isEmpty(cart)) {\n                this.routingService.go({ cxRoute: 'home' });\n                return false;\n            }\n            return true;\n        }));\n    }\n    isEmpty(cart) {\n        return cart && !cart.totalItems;\n    }\n};\nCartNotEmptyGuard.ctorParameters = () => [\n    { type: CartService },\n    { type: RoutingService }\n];\nCartNotEmptyGuard.ɵprov = ɵɵdefineInjectable({ factory: function CartNotEmptyGuard_Factory() { return new CartNotEmptyGuard(ɵɵinject(CartService), ɵɵinject(RoutingService)); }, token: CartNotEmptyGuard, providedIn: \"root\" });\nCartNotEmptyGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CartNotEmptyGuard);\n\nlet CartPageLayoutHandler = class CartPageLayoutHandler {\n    constructor(cartService, selectiveCartService, featureConfig) {\n        this.cartService = cartService;\n        this.selectiveCartService = selectiveCartService;\n        this.featureConfig = featureConfig;\n    }\n    handle(slots$, pageTemplate, section) {\n        if (pageTemplate === 'CartPageTemplate' && !section) {\n            if (this.featureConfig && this.featureConfig.isEnabled('saveForLater')) {\n                return combineLatest([\n                    slots$,\n                    this.cartService.getActive(),\n                    this.selectiveCartService.getCart(),\n                ]).pipe(map(([slots, cart, selectiveCart]) => {\n                    if (cart.totalItems) {\n                        return slots.filter(slot => slot !== 'EmptyCartMiddleContent');\n                    }\n                    else if (selectiveCart.totalItems) {\n                        return slots.filter(slot => slot !== 'EmptyCartMiddleContent' &&\n                            slot !== 'CenterRightContentSlot');\n                    }\n                    else {\n                        return slots.filter(slot => slot !== 'TopContent' && slot !== 'CenterRightContentSlot');\n                    }\n                }));\n            }\n            //TODO remove old code for #5958\n            return combineLatest([slots$, this.cartService.getActive()]).pipe(map(([slots, cart]) => {\n                if (cart.totalItems) {\n                    return slots.filter(slot => slot !== 'EmptyCartMiddleContent');\n                }\n                else {\n                    return slots.filter(slot => slot !== 'TopContent' && slot !== 'CenterRightContentSlot');\n                }\n            }));\n            ////TODO remove old code for #5958\n        }\n        return slots$;\n    }\n};\nCartPageLayoutHandler.ctorParameters = () => [\n    { type: CartService },\n    { type: SelectiveCartService },\n    { type: FeatureConfigService }\n];\nCartPageLayoutHandler.ɵprov = ɵɵdefineInjectable({ factory: function CartPageLayoutHandler_Factory() { return new CartPageLayoutHandler(ɵɵinject(CartService), ɵɵinject(SelectiveCartService), ɵɵinject(FeatureConfigService)); }, token: CartPageLayoutHandler, providedIn: \"root\" });\nCartPageLayoutHandler = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CartPageLayoutHandler);\n\nlet CartTotalsComponent = class CartTotalsComponent {\n    constructor(cartService) {\n        this.cartService = cartService;\n    }\n    ngOnInit() {\n        this.cart$ = this.cartService.getActive();\n        this.entries$ = this.cartService\n            .getEntries()\n            .pipe(filter(entries => entries.length > 0));\n    }\n};\nCartTotalsComponent.ctorParameters = () => [\n    { type: CartService }\n];\nCartTotalsComponent = __decorate([\n    Component({\n        selector: 'cx-cart-totals',\n        template: \"<ng-container *ngIf=\\\"cart$ | async as cart\\\">\\n  <ng-container *ngIf=\\\"entries$ | async as entries\\\">\\n    <cx-order-summary [cart]=\\\"cart\\\"></cx-order-summary>\\n    <button\\n      [routerLink]=\\\"{ cxRoute: 'checkout' } | cxUrl\\\"\\n      *ngIf=\\\"entries.length\\\"\\n      class=\\\"btn btn-primary btn-block\\\"\\n      type=\\\"button\\\"\\n    >\\n      {{ 'cartDetails.proceedToCheckout' | cxTranslate }}\\n    </button>\\n  </ng-container>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CartTotalsComponent);\n\nlet CartTotalsModule = class CartTotalsModule {\n};\nCartTotalsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            UrlModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CartTotalsComponent: {\n                        component: CartTotalsComponent,\n                    },\n                },\n            }),\n            CartSharedModule,\n            I18nModule,\n            CartCouponModule,\n        ],\n        declarations: [CartTotalsComponent],\n        exports: [CartTotalsComponent],\n        entryComponents: [CartTotalsComponent],\n    })\n], CartTotalsModule);\n\nlet MiniCartComponent = class MiniCartComponent {\n    constructor(cartService) {\n        this.cartService = cartService;\n        this.iconTypes = ICON_TYPE;\n        this.quantity$ = this.cartService.getActive().pipe(startWith({ deliveryItemsQuantity: 0 }), map(cart => cart.deliveryItemsQuantity || 0));\n        this.total$ = this.cartService.getActive().pipe(filter(cart => !!cart.totalPrice), map(cart => cart.totalPrice.formattedValue));\n    }\n};\nMiniCartComponent.ctorParameters = () => [\n    { type: CartService }\n];\nMiniCartComponent = __decorate([\n    Component({\n        selector: 'cx-mini-cart',\n        template: \"<a\\n  [attr.aria-label]=\\\"\\n    'miniCart.item' | cxTranslate: { count: quantity$ | async }\\n  \\\"\\n  [routerLink]=\\\"{ cxRoute: 'cart' } | cxUrl\\\"\\n>\\n  <cx-icon [type]=\\\"iconTypes.CART\\\"></cx-icon>\\n\\n  <span class=\\\"total\\\">{{ total$ | async }}</span>\\n  <span class=\\\"count\\\">{{ quantity$ | async }}</span>\\n</a>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], MiniCartComponent);\n\nlet MiniCartModule = class MiniCartModule {\n};\nMiniCartModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    MiniCartComponent: {\n                        component: MiniCartComponent,\n                    },\n                },\n            }),\n            UrlModule,\n            IconModule,\n            I18nModule,\n        ],\n        declarations: [MiniCartComponent],\n        exports: [MiniCartComponent],\n        entryComponents: [MiniCartComponent],\n    })\n], MiniCartModule);\n\nlet AddToWishListComponent = class AddToWishListComponent {\n    constructor(wishListService, currentProductService, authService) {\n        this.wishListService = wishListService;\n        this.currentProductService = currentProductService;\n        this.authService = authService;\n        this.product$ = this.currentProductService.getProduct().pipe(filter(product => Boolean(product)), tap(product => this.setStockInfo(product)));\n        this.wishListEntries$ = this.wishListService.getWishList().pipe(filter(wishlist => Boolean(wishlist)), map(wishList => wishList.entries));\n        this.userLoggedIn$ = this.authService.isUserLoggedIn();\n        this.loading$ = this.wishListService.getWishListLoading();\n        this.hasStock = false;\n        this.iconTypes = ICON_TYPE;\n    }\n    add(product) {\n        this.wishListService.addEntry(product.code);\n    }\n    remove(entry) {\n        this.wishListService.removeEntry(entry);\n    }\n    getProductInWishList(product, entries) {\n        const item = entries.find(entry => entry.product.code === product.code);\n        return item;\n    }\n    setStockInfo(product) {\n        this.hasStock =\n            product.stock && product.stock.stockLevelStatus !== 'outOfStock';\n    }\n};\nAddToWishListComponent.ctorParameters = () => [\n    { type: WishListService },\n    { type: CurrentProductService },\n    { type: AuthService }\n];\nAddToWishListComponent = __decorate([\n    Component({\n        selector: 'cx-add-to-wishlist',\n        template: \"<ng-container *ngIf=\\\"product$ | async as product\\\">\\n  <ng-container *ngIf=\\\"userLoggedIn$ | async; else loginPrompt\\\">\\n    <ng-container *ngIf=\\\"wishListEntries$ | async as entries\\\">\\n      <ng-container *ngIf=\\\"hasStock\\\">\\n        <div\\n          *ngIf=\\\"getProductInWishList(product, entries) as entry; else addItem\\\"\\n        >\\n          <button\\n            class=\\\"btn btn-link button-remove\\\"\\n            (click)=\\\"remove(entry)\\\"\\n            [disabled]=\\\"loading$ | async\\\"\\n          >\\n            <cx-icon [type]=\\\"iconTypes.HEART\\\"></cx-icon>\\n            <span class=\\\"button-text\\\">{{\\n              'addToWishList.remove' | cxTranslate\\n            }}</span>\\n          </button>\\n        </div>\\n        <ng-template #addItem>\\n          <button\\n            class=\\\"btn btn-link button-add\\\"\\n            (click)=\\\"add(product)\\\"\\n            [disabled]=\\\"loading$ | async\\\"\\n          >\\n            <cx-icon [type]=\\\"iconTypes.EMPTY_HEART\\\"></cx-icon>\\n            <span class=\\\"button-text\\\">{{\\n              'addToWishList.add' | cxTranslate\\n            }}</span>\\n          </button>\\n        </ng-template>\\n      </ng-container>\\n    </ng-container>\\n  </ng-container>\\n</ng-container>\\n\\n<ng-template #loginPrompt>\\n  <ng-container *ngIf=\\\"hasStock\\\">\\n    <a\\n      class=\\\"btn btn-link button-add-link\\\"\\n      [routerLink]=\\\"{ cxRoute: 'login' } | cxUrl\\\"\\n    >\\n      <cx-icon [type]=\\\"iconTypes.EMPTY_HEART\\\"></cx-icon>\\n      <span class=\\\"button-text\\\">{{\\n        'addToWishList.anonymous' | cxTranslate\\n      }}</span>\\n    </a>\\n  </ng-container>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], AddToWishListComponent);\n\nlet AddToWishListModule = class AddToWishListModule {\n};\nAddToWishListModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    AddToWishListComponent: {\n                        component: AddToWishListComponent,\n                    },\n                },\n            }),\n            I18nModule,\n            IconModule,\n            RouterModule,\n            UrlModule,\n        ],\n        declarations: [AddToWishListComponent],\n        entryComponents: [AddToWishListComponent],\n        exports: [AddToWishListComponent],\n    })\n], AddToWishListModule);\n\nlet SaveForLaterComponent = class SaveForLaterComponent {\n    constructor(cmsService, cartService, selectiveCartService) {\n        this.cmsService = cmsService;\n        this.cartService = cartService;\n        this.selectiveCartService = selectiveCartService;\n    }\n    ngOnInit() {\n        this.isCartEmpty$ = this.cartService\n            .getActive()\n            .pipe(map(cart => !(cart && cart.totalItems && cart.totalItems > 0)));\n        this.saveForLater$ = this.selectiveCartService.getCart();\n        this.entries$ = this.selectiveCartService\n            .getEntries()\n            .pipe(filter(entries => entries.length > 0));\n        this.cartLoaded$ = combineLatest([\n            this.cartService.getLoaded(),\n            this.selectiveCartService.getLoaded(),\n        ]).pipe(map(([cartLoaded, sflLoaded]) => cartLoaded && sflLoaded));\n        this.data$ = this.cmsService.getComponentData('EmptyCartParagraphComponent');\n    }\n    moveToCart(item) {\n        this.selectiveCartService.removeEntry(item);\n        this.cartService.addEntry(item.product.code, item.quantity);\n    }\n};\nSaveForLaterComponent.ctorParameters = () => [\n    { type: CmsService },\n    { type: ActiveCartService },\n    { type: SelectiveCartService }\n];\nSaveForLaterComponent = __decorate([\n    Component({\n        selector: 'cx-save-for-later',\n        template: \"<ng-container *ngIf=\\\"isCartEmpty$ | async\\\">\\n  <p\\n    *ngIf=\\\"data$ | async as data\\\"\\n    [innerHTML]=\\\"data.content\\\"\\n    class=\\\"cx-empty-cart-info\\\"\\n  ></p>\\n</ng-container>\\n\\n<ng-container *ngIf=\\\"saveForLater$ | async as saveForLater\\\">\\n  <ng-container *ngIf=\\\"entries$ | async as entries\\\">\\n    <div *ngIf=\\\"saveForLater.totalItems > 0\\\" class=\\\"cart-details-wrapper\\\">\\n      <div class=\\\"cx-total\\\">\\n        {{\\n          'saveForLaterItems.itemTotal'\\n            | cxTranslate: { count: saveForLater.totalItems }\\n        }}\\n      </div>\\n      <cx-cart-item-list\\n        [items]=\\\"entries\\\"\\n        [readonly]=\\\"true\\\"\\n        [cartIsLoading]=\\\"!(cartLoaded$ | async)\\\"\\n        [options]=\\\"{\\n          isSaveForLater: true,\\n          optionalBtn: moveToCartBtn\\n        }\\\"\\n      ></cx-cart-item-list>\\n    </div>\\n  </ng-container>\\n</ng-container>\\n\\n<ng-template let-ctx #moveToCartBtn>\\n  <div class=\\\"col-md-3 col-lg-3 col-xl-3 cx-sfl-btn\\\">\\n    <button\\n      class=\\\"link\\\"\\n      [disabled]=\\\"ctx.loading\\\"\\n      (click)=\\\"moveToCart(ctx.item)\\\"\\n    >\\n      {{ 'saveForLaterItems.moveToCart' | cxTranslate }}\\n    </button>\\n  </div>\\n</ng-template>\\n\"\n    })\n], SaveForLaterComponent);\n\nlet SaveForLaterModule = class SaveForLaterModule {\n};\nSaveForLaterModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    SaveForLaterComponent: {\n                        component: SaveForLaterComponent,\n                    },\n                },\n                features: {\n                    saveForLater: '1.5',\n                },\n            }),\n            I18nModule,\n            CartSharedModule,\n        ],\n        declarations: [SaveForLaterComponent],\n        exports: [SaveForLaterComponent],\n        entryComponents: [SaveForLaterComponent],\n    })\n], SaveForLaterModule);\n\nlet CartComponentModule = class CartComponentModule {\n};\nCartComponentModule = __decorate([\n    NgModule({\n        imports: [\n            NgbModule,\n            CartDetailsModule,\n            CartTotalsModule,\n            CartSharedModule,\n            SaveForLaterModule,\n        ],\n        exports: [\n            AddToWishListModule,\n            CartDetailsModule,\n            CartTotalsModule,\n            CartSharedModule,\n            AddToCartModule,\n            MiniCartModule,\n            CartModule,\n            SaveForLaterModule,\n        ],\n        declarations: [],\n        providers: [\n            {\n                provide: PAGE_LAYOUT_HANDLER,\n                useExisting: CartPageLayoutHandler,\n                multi: true,\n            },\n        ],\n    })\n], CartComponentModule);\n\nvar DeliveryModePreferences;\n(function (DeliveryModePreferences) {\n    DeliveryModePreferences[\"FREE\"] = \"FREE\";\n    DeliveryModePreferences[\"LEAST_EXPENSIVE\"] = \"LEAST_EXPENSIVE\";\n    DeliveryModePreferences[\"MOST_EXPENSIVE\"] = \"MOST_EXPENSIVE\";\n})(DeliveryModePreferences || (DeliveryModePreferences = {}));\nclass CheckoutConfig {\n}\n\nvar CheckoutStepType;\n(function (CheckoutStepType) {\n    CheckoutStepType[\"SHIPPING_ADDRESS\"] = \"shippingAddress\";\n    CheckoutStepType[\"DELIVERY_MODE\"] = \"deliveryMode\";\n    CheckoutStepType[\"PAYMENT_DETAILS\"] = \"paymentDetails\";\n    CheckoutStepType[\"REVIEW_ORDER\"] = \"reviewOrder\";\n})(CheckoutStepType || (CheckoutStepType = {}));\n\nconst defaultCheckoutConfig = {\n    checkout: {\n        steps: [\n            {\n                id: 'shippingAddress',\n                name: 'checkoutProgress.shippingAddress',\n                routeName: 'checkoutShippingAddress',\n                type: [CheckoutStepType.SHIPPING_ADDRESS],\n            },\n            {\n                id: 'deliveryMode',\n                name: 'checkoutProgress.deliveryMode',\n                routeName: 'checkoutDeliveryMode',\n                type: [CheckoutStepType.DELIVERY_MODE],\n            },\n            {\n                id: 'paymentDetails',\n                name: 'checkoutProgress.paymentDetails',\n                routeName: 'checkoutPaymentDetails',\n                type: [CheckoutStepType.PAYMENT_DETAILS],\n            },\n            {\n                id: 'reviewOrder',\n                name: 'checkoutProgress.reviewOrder',\n                routeName: 'checkoutReviewOrder',\n                type: [CheckoutStepType.REVIEW_ORDER],\n            },\n        ],\n        express: false,\n        defaultDeliveryMode: [DeliveryModePreferences.FREE],\n        guest: false,\n    },\n};\n\nlet CheckoutConfigService = class CheckoutConfigService {\n    constructor(checkoutConfig, routingConfigService) {\n        this.checkoutConfig = checkoutConfig;\n        this.routingConfigService = routingConfigService;\n        this.steps = this.checkoutConfig.checkout.steps;\n        this.express = this.checkoutConfig.checkout.express;\n        this.guest = this.checkoutConfig.checkout.guest;\n        this.defaultDeliveryMode = this.checkoutConfig.checkout.defaultDeliveryMode || [];\n    }\n    getCheckoutStep(currentStepType) {\n        return this.steps[this.getCheckoutStepIndex('type', currentStepType)];\n    }\n    getCheckoutStepRoute(currentStepType) {\n        return this.getCheckoutStep(currentStepType).routeName;\n    }\n    getFirstCheckoutStepRoute() {\n        return this.steps[0].routeName;\n    }\n    getNextCheckoutStepUrl(activatedRoute) {\n        const stepIndex = this.getCurrentStepIndex(activatedRoute);\n        return stepIndex >= 0 && this.steps[stepIndex + 1]\n            ? this.getStepUrlFromStepRoute(this.steps[stepIndex + 1].routeName)\n            : null;\n    }\n    getPreviousCheckoutStepUrl(activatedRoute) {\n        const stepIndex = this.getCurrentStepIndex(activatedRoute);\n        return stepIndex >= 0 && this.steps[stepIndex - 1]\n            ? this.getStepUrlFromStepRoute(this.steps[stepIndex - 1].routeName)\n            : null;\n    }\n    getCurrentStepIndex(activatedRoute) {\n        const currentStepUrl = this.getStepUrlFromActivatedRoute(activatedRoute);\n        let stepIndex;\n        let index = 0;\n        for (const step of this.steps) {\n            if (currentStepUrl === `/${this.getStepUrlFromStepRoute(step.routeName)}`) {\n                stepIndex = index;\n            }\n            else {\n                index++;\n            }\n        }\n        return stepIndex >= 0 ? stepIndex : null;\n    }\n    compareDeliveryCost(deliveryMode1, deliveryMode2) {\n        if (deliveryMode1.deliveryCost.value > deliveryMode2.deliveryCost.value) {\n            return 1;\n        }\n        else if (deliveryMode1.deliveryCost.value < deliveryMode2.deliveryCost.value) {\n            return -1;\n        }\n        return 0;\n    }\n    findMatchingDeliveryMode(deliveryModes, index = 0) {\n        switch (this.defaultDeliveryMode[index]) {\n            case DeliveryModePreferences.FREE:\n                if (deliveryModes[0].deliveryCost.value === 0) {\n                    return deliveryModes[0].code;\n                }\n                break;\n            case DeliveryModePreferences.LEAST_EXPENSIVE:\n                const leastExpensiveFound = deliveryModes.find(deliveryMode => deliveryMode.deliveryCost.value !== 0);\n                if (leastExpensiveFound) {\n                    return leastExpensiveFound.code;\n                }\n                break;\n            case DeliveryModePreferences.MOST_EXPENSIVE:\n                return deliveryModes[deliveryModes.length - 1].code;\n            default:\n                const codeFound = deliveryModes.find(deliveryMode => deliveryMode.code === this.defaultDeliveryMode[index]);\n                if (codeFound) {\n                    return codeFound.code;\n                }\n        }\n        const lastMode = this.defaultDeliveryMode.length - 1 <= index;\n        return lastMode\n            ? deliveryModes[0].code\n            : this.findMatchingDeliveryMode(deliveryModes, index + 1);\n    }\n    getPreferredDeliveryMode(deliveryModes) {\n        deliveryModes.sort(this.compareDeliveryCost);\n        return this.findMatchingDeliveryMode(deliveryModes);\n    }\n    isExpressCheckout() {\n        return this.express;\n    }\n    isGuestCheckout() {\n        return this.guest;\n    }\n    getStepUrlFromActivatedRoute(activatedRoute) {\n        return activatedRoute &&\n            activatedRoute.snapshot &&\n            activatedRoute.snapshot.url\n            ? `/${activatedRoute.snapshot.url.join('/')}`\n            : null;\n    }\n    getStepUrlFromStepRoute(stepRoute) {\n        return this.routingConfigService.getRouteConfig(stepRoute).paths[0];\n    }\n    getCheckoutStepIndex(key, value) {\n        return key && value\n            ? this.steps.findIndex((step) => step[key].includes(value))\n            : null;\n    }\n};\nCheckoutConfigService.ctorParameters = () => [\n    { type: CheckoutConfig },\n    { type: RoutingConfigService }\n];\nCheckoutConfigService.ɵprov = ɵɵdefineInjectable({ factory: function CheckoutConfigService_Factory() { return new CheckoutConfigService(ɵɵinject(CheckoutConfig), ɵɵinject(RoutingConfigService)); }, token: CheckoutConfigService, providedIn: \"root\" });\nCheckoutConfigService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CheckoutConfigService);\n\nlet CheckoutAuthGuard = class CheckoutAuthGuard {\n    constructor(routingService, authService, authRedirectService, cartService, checkoutConfigService) {\n        this.routingService = routingService;\n        this.authService = authService;\n        this.authRedirectService = authRedirectService;\n        this.cartService = cartService;\n        this.checkoutConfigService = checkoutConfigService;\n    }\n    canActivate() {\n        return combineLatest([\n            this.authService.getUserToken(),\n            this.cartService.getAssignedUser(),\n        ]).pipe(map(([token, user]) => {\n            if (!token.access_token) {\n                if (this.cartService.isGuestCart()) {\n                    return Boolean(user);\n                }\n                if (this.checkoutConfigService.isGuestCheckout()) {\n                    this.routingService.go({ cxRoute: 'login' }, { forced: true });\n                }\n                else {\n                    this.routingService.go({ cxRoute: 'login' });\n                }\n                this.authRedirectService.reportAuthGuard();\n            }\n            return !!token.access_token;\n        }));\n    }\n};\nCheckoutAuthGuard.ctorParameters = () => [\n    { type: RoutingService },\n    { type: AuthService },\n    { type: AuthRedirectService },\n    { type: CartService },\n    { type: CheckoutConfigService }\n];\nCheckoutAuthGuard.ɵprov = ɵɵdefineInjectable({ factory: function CheckoutAuthGuard_Factory() { return new CheckoutAuthGuard(ɵɵinject(RoutingService), ɵɵinject(AuthService), ɵɵinject(AuthRedirectService), ɵɵinject(CartService), ɵɵinject(CheckoutConfigService)); }, token: CheckoutAuthGuard, providedIn: \"root\" });\nCheckoutAuthGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CheckoutAuthGuard);\n\nlet CheckoutDetailsService = class CheckoutDetailsService {\n    constructor(checkoutService, checkoutDeliveryService, checkoutPaymentService, cartService) {\n        this.checkoutService = checkoutService;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.checkoutPaymentService = checkoutPaymentService;\n        this.cartService = cartService;\n        this.cartId$ = this.cartService.getActive().pipe(map(cartData => {\n            if ((cartData.user && cartData.user.uid === OCC_USER_ID_ANONYMOUS) ||\n                this.cartService.isGuestCart()) {\n                return cartData.guid;\n            }\n            return cartData.code;\n        }), filter(cartId => !!cartId));\n        this.getCheckoutDetailsLoaded$ = this.cartId$.pipe(tap(cartId => this.checkoutService.loadCheckoutDetails(cartId)), shareReplay(1), switchMap(() => this.checkoutService.getCheckoutDetailsLoaded()), skipWhile(loaded => !loaded));\n    }\n    getDeliveryAddress() {\n        return this.getCheckoutDetailsLoaded$.pipe(switchMap(() => this.checkoutDeliveryService.getDeliveryAddress()));\n    }\n    getSelectedDeliveryModeCode() {\n        return this.getCheckoutDetailsLoaded$.pipe(switchMap(() => this.checkoutDeliveryService.getSelectedDeliveryModeCode()));\n    }\n    getPaymentDetails() {\n        return this.getCheckoutDetailsLoaded$.pipe(switchMap(() => this.checkoutPaymentService.getPaymentDetails()));\n    }\n};\nCheckoutDetailsService.ctorParameters = () => [\n    { type: CheckoutService },\n    { type: CheckoutDeliveryService },\n    { type: CheckoutPaymentService },\n    { type: CartService }\n];\nCheckoutDetailsService.ɵprov = ɵɵdefineInjectable({ factory: function CheckoutDetailsService_Factory() { return new CheckoutDetailsService(ɵɵinject(CheckoutService), ɵɵinject(CheckoutDeliveryService), ɵɵinject(CheckoutPaymentService), ɵɵinject(CartService)); }, token: CheckoutDetailsService, providedIn: \"root\" });\nCheckoutDetailsService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CheckoutDetailsService);\n\nlet ExpressCheckoutService = class ExpressCheckoutService {\n    constructor(userAddressService, userPaymentService, checkoutDeliveryService, checkoutPaymentService, checkoutDetailsService, checkoutConfigService) {\n        this.userAddressService = userAddressService;\n        this.userPaymentService = userPaymentService;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.checkoutPaymentService = checkoutPaymentService;\n        this.checkoutDetailsService = checkoutDetailsService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.setShippingAddress();\n        this.setDeliveryMode();\n        this.setPaymentMethod();\n    }\n    setShippingAddress() {\n        this.shippingAddressSet$ = combineLatest([\n            this.userAddressService.getAddresses(),\n            this.userAddressService.getAddressesLoadedSuccess(),\n            this.checkoutDeliveryService.getSetDeliveryAddressProcess(),\n        ]).pipe(debounceTime(0), tap(([, addressesLoadedSuccess]) => {\n            if (!addressesLoadedSuccess) {\n                this.userAddressService.loadAddresses();\n            }\n        }), filter(([, addressesLoadedSuccess]) => addressesLoadedSuccess), switchMap(([addresses, , setDeliveryAddressProcess]) => {\n            const defaultAddress = addresses.find(address => address.defaultAddress) || addresses[0];\n            if (defaultAddress && Object.keys(defaultAddress).length) {\n                if (!(setDeliveryAddressProcess.success ||\n                    setDeliveryAddressProcess.error ||\n                    setDeliveryAddressProcess.loading)) {\n                    this.checkoutDeliveryService.setDeliveryAddress(defaultAddress);\n                }\n                return of(setDeliveryAddressProcess).pipe(filter((setDeliveryAddressProcessState) => {\n                    return ((setDeliveryAddressProcessState.success ||\n                        setDeliveryAddressProcessState.error) &&\n                        !setDeliveryAddressProcessState.loading);\n                }), switchMap((setDeliveryAddressProcessState) => {\n                    if (setDeliveryAddressProcessState.success) {\n                        return this.checkoutDetailsService.getDeliveryAddress();\n                    }\n                    return of(false);\n                }), map(data => Boolean(data && Object.keys(data).length)));\n            }\n            return of(false);\n        }));\n    }\n    setPaymentMethod() {\n        this.paymentMethodSet$ = combineLatest([\n            this.userPaymentService.getPaymentMethods(),\n            this.userPaymentService.getPaymentMethodsLoadedSuccess(),\n            this.checkoutPaymentService.getSetPaymentDetailsResultProcess(),\n        ]).pipe(debounceTime(0), tap(([, paymentMethodsLoadedSuccess]) => {\n            if (!paymentMethodsLoadedSuccess) {\n                this.userPaymentService.loadPaymentMethods();\n            }\n        }), filter(([, success]) => success), switchMap(([payments, , setPaymentDetailsProcess]) => {\n            const defaultPayment = payments.find(address => address.defaultPayment) || payments[0];\n            if (defaultPayment && Object.keys(defaultPayment).length) {\n                if (!(setPaymentDetailsProcess.success ||\n                    setPaymentDetailsProcess.error ||\n                    setPaymentDetailsProcess.loading)) {\n                    this.checkoutPaymentService.setPaymentDetails(defaultPayment);\n                }\n                return of(setPaymentDetailsProcess).pipe(filter((setPaymentDetailsProcessState) => {\n                    return ((setPaymentDetailsProcessState.success ||\n                        setPaymentDetailsProcessState.error) &&\n                        !setPaymentDetailsProcessState.loading);\n                }), switchMap((setPaymentDetailsProcessState) => {\n                    if (setPaymentDetailsProcessState.success) {\n                        return this.checkoutDetailsService.getPaymentDetails();\n                    }\n                    return of(false);\n                }), map(data => Boolean(data && Object.keys(data).length)));\n            }\n            return of(false);\n        }));\n    }\n    setDeliveryMode() {\n        this.deliveryModeSet$ = combineLatest([\n            this.shippingAddressSet$,\n            this.checkoutDeliveryService.getSupportedDeliveryModes(),\n            this.checkoutDeliveryService.getSetDeliveryModeProcess(),\n            this.checkoutDeliveryService.getLoadSupportedDeliveryModeProcess(),\n        ]).pipe(debounceTime(0), switchMap(([addressSet, supportedDeliveryModes, setDeliveryModeStatusFlag, loadSupportedDeliveryModeStatus,]) => {\n            if (addressSet) {\n                return of([\n                    supportedDeliveryModes,\n                    setDeliveryModeStatusFlag,\n                    loadSupportedDeliveryModeStatus,\n                ]).pipe(filter(([, , supportedDeliveryModeStatus]) => supportedDeliveryModeStatus.success), switchMap(([deliveryModes, setDeliveryModeStatus, ,]) => {\n                    if (Boolean(deliveryModes.length)) {\n                        const preferredDeliveryMode = this.checkoutConfigService.getPreferredDeliveryMode(deliveryModes);\n                        return of([\n                            preferredDeliveryMode,\n                            setDeliveryModeStatus,\n                        ]).pipe(tap(([deliveryMode, deliveryModeLoadingStatus]) => {\n                            if (deliveryMode &&\n                                !(deliveryModeLoadingStatus.success ||\n                                    deliveryModeLoadingStatus.error ||\n                                    deliveryModeLoadingStatus.loading)) {\n                                this.checkoutDeliveryService.setDeliveryMode(deliveryMode);\n                            }\n                        }), filter(([, deliveryModeLoadingStatus]) => {\n                            return ((deliveryModeLoadingStatus.success ||\n                                deliveryModeLoadingStatus.error) &&\n                                !deliveryModeLoadingStatus.loading);\n                        }), switchMap(([, deliveryModeLoadingStatus]) => {\n                            if (deliveryModeLoadingStatus.success) {\n                                return this.checkoutDetailsService.getSelectedDeliveryModeCode();\n                            }\n                            return of(false);\n                        }), map(data => Boolean(data)));\n                    }\n                    return of(false);\n                }));\n            }\n            else {\n                return of(false);\n            }\n        }));\n    }\n    resetCheckoutProcesses() {\n        this.checkoutDeliveryService.resetSetDeliveryAddressProcess();\n        this.checkoutPaymentService.resetSetPaymentDetailsProcess();\n        this.checkoutDeliveryService.resetSetDeliveryModeProcess();\n    }\n    trySetDefaultCheckoutDetails() {\n        this.resetCheckoutProcesses();\n        return combineLatest([this.deliveryModeSet$, this.paymentMethodSet$]).pipe(map(([deliveryModeSet, paymentMethodSet]) => Boolean(deliveryModeSet && paymentMethodSet)));\n    }\n};\nExpressCheckoutService.ctorParameters = () => [\n    { type: UserAddressService },\n    { type: UserPaymentService },\n    { type: CheckoutDeliveryService },\n    { type: CheckoutPaymentService },\n    { type: CheckoutDetailsService },\n    { type: CheckoutConfigService }\n];\nExpressCheckoutService.ɵprov = ɵɵdefineInjectable({ factory: function ExpressCheckoutService_Factory() { return new ExpressCheckoutService(ɵɵinject(UserAddressService), ɵɵinject(UserPaymentService), ɵɵinject(CheckoutDeliveryService), ɵɵinject(CheckoutPaymentService), ɵɵinject(CheckoutDetailsService), ɵɵinject(CheckoutConfigService)); }, token: ExpressCheckoutService, providedIn: \"root\" });\nExpressCheckoutService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], ExpressCheckoutService);\n\nlet CheckoutGuard = class CheckoutGuard {\n    constructor(router, config, routingConfigService, checkoutConfigService, expressCheckoutService, cartService) {\n        this.router = router;\n        this.config = config;\n        this.routingConfigService = routingConfigService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.expressCheckoutService = expressCheckoutService;\n        this.cartService = cartService;\n        /**\n         * TODO(issue:#4309) Deprecated since 1.2.0\n         */\n        if (this.checkoutConfigService) {\n            this.firstStep$ = of(this.router.parseUrl(this.routingConfigService.getRouteConfig(this.checkoutConfigService.getFirstCheckoutStepRoute()).paths[0]));\n        }\n        else {\n            this.firstStep$ = of(this.router.parseUrl(this.routingConfigService.getRouteConfig(this.config.checkout.steps[0].routeName).paths[0]));\n        }\n    }\n    canActivate() {\n        /**\n         * TODO(issue:#4309) Deprecated since 1.2.0\n         */\n        if (this.checkoutConfigService &&\n            this.expressCheckoutService &&\n            this.cartService) {\n            if (this.checkoutConfigService.isExpressCheckout() &&\n                !this.cartService.isGuestCart()) {\n                return this.expressCheckoutService.trySetDefaultCheckoutDetails().pipe(switchMap((expressCheckoutPossible) => {\n                    return expressCheckoutPossible\n                        ? of(this.router.parseUrl(this.routingConfigService.getRouteConfig(this.checkoutConfigService.getCheckoutStepRoute(CheckoutStepType.REVIEW_ORDER)).paths[0]))\n                        : this.firstStep$;\n                }));\n            }\n        }\n        return this.firstStep$;\n    }\n};\nCheckoutGuard.ctorParameters = () => [\n    { type: Router },\n    { type: CheckoutConfig },\n    { type: RoutingConfigService },\n    { type: CheckoutConfigService },\n    { type: ExpressCheckoutService },\n    { type: CartService }\n];\nCheckoutGuard.ɵprov = ɵɵdefineInjectable({ factory: function CheckoutGuard_Factory() { return new CheckoutGuard(ɵɵinject(Router), ɵɵinject(CheckoutConfig), ɵɵinject(RoutingConfigService), ɵɵinject(CheckoutConfigService), ɵɵinject(ExpressCheckoutService), ɵɵinject(CartService)); }, token: CheckoutGuard, providedIn: \"root\" });\nCheckoutGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CheckoutGuard);\n\nlet CheckoutOrchestratorComponent = class CheckoutOrchestratorComponent {\n    constructor() { }\n};\nCheckoutOrchestratorComponent = __decorate([\n    Component({\n        selector: 'cx-checkout-orchestrator',\n        template: \"\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CheckoutOrchestratorComponent);\n\nlet CheckoutOrchestratorModule = class CheckoutOrchestratorModule {\n};\nCheckoutOrchestratorModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig(defaultCheckoutConfig),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutOrchestrator: {\n                        component: CheckoutOrchestratorComponent,\n                        guards: [CheckoutAuthGuard, CartNotEmptyGuard, CheckoutGuard],\n                    },\n                },\n            }),\n        ],\n        providers: [{ provide: CheckoutConfig, useExisting: Config }],\n        declarations: [CheckoutOrchestratorComponent],\n        entryComponents: [CheckoutOrchestratorComponent],\n        exports: [CheckoutOrchestratorComponent],\n    })\n], CheckoutOrchestratorModule);\n\nlet CheckoutOrderSummaryComponent = class CheckoutOrderSummaryComponent {\n    constructor(cartService) {\n        this.cartService = cartService;\n        this.cart$ = this.cartService.getActive();\n    }\n};\nCheckoutOrderSummaryComponent.ctorParameters = () => [\n    { type: CartService }\n];\nCheckoutOrderSummaryComponent = __decorate([\n    Component({\n        selector: 'cx-checkout-order-summary',\n        template: \"<cx-order-summary [cart]=\\\"cart$ | async\\\"></cx-order-summary>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CheckoutOrderSummaryComponent);\n\nlet CheckoutOrderSummaryModule = class CheckoutOrderSummaryModule {\n};\nCheckoutOrderSummaryModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CartSharedModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutOrderSummary: {\n                        component: CheckoutOrderSummaryComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [CheckoutOrderSummaryComponent],\n        entryComponents: [CheckoutOrderSummaryComponent],\n        exports: [CheckoutOrderSummaryComponent],\n    })\n], CheckoutOrderSummaryModule);\n\nlet CheckoutProgressMobileBottomComponent = class CheckoutProgressMobileBottomComponent {\n    constructor(config, routingService, routingConfigService) {\n        this.config = config;\n        this.routingService = routingService;\n        this.routingConfigService = routingConfigService;\n    }\n    ngOnInit() {\n        this.steps = this.config.checkout.steps;\n        this.routerState$ = this.routingService.getRouterState().pipe(tap(router => {\n            this.activeStepUrl = router.state.context.id;\n            this.steps.forEach((step, index) => {\n                const routeUrl = `/${this.routingConfigService.getRouteConfig(step.routeName).paths[0]}`;\n                if (routeUrl === this.activeStepUrl) {\n                    this.activeStepIndex = index;\n                }\n            });\n        }));\n    }\n};\nCheckoutProgressMobileBottomComponent.ctorParameters = () => [\n    { type: CheckoutConfig },\n    { type: RoutingService },\n    { type: RoutingConfigService }\n];\nCheckoutProgressMobileBottomComponent = __decorate([\n    Component({\n        selector: 'cx-checkout-progress-mobile-bottom',\n        template: \"<div *ngIf=\\\"routerState$ | async as routerState\\\">\\n  <div class=\\\"cx-media\\\">\\n    <div *ngFor=\\\"let step of steps; let i = index\\\">\\n      <div class=\\\"cx-list-media\\\" *ngIf=\\\"i > activeStepIndex\\\">\\n        <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], CheckoutProgressMobileBottomComponent);\n\nlet CheckoutProgressMobileBottomModule = class CheckoutProgressMobileBottomModule {\n};\nCheckoutProgressMobileBottomModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            UrlModule,\n            I18nModule,\n            RouterModule,\n            ConfigModule.withConfig(defaultCheckoutConfig),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutProgressMobileBottom: {\n                        component: CheckoutProgressMobileBottomComponent,\n                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n                    },\n                },\n            }),\n        ],\n        declarations: [CheckoutProgressMobileBottomComponent],\n        entryComponents: [CheckoutProgressMobileBottomComponent],\n        exports: [CheckoutProgressMobileBottomComponent],\n    })\n], CheckoutProgressMobileBottomModule);\n\nlet CheckoutProgressMobileTopComponent = class CheckoutProgressMobileTopComponent {\n    constructor(config, routingService, cartService, routingConfigService) {\n        this.config = config;\n        this.routingService = routingService;\n        this.cartService = cartService;\n        this.routingConfigService = routingConfigService;\n    }\n    ngOnInit() {\n        this.steps = this.config.checkout.steps;\n        this.cart$ = this.cartService.getActive();\n        this.routerState$ = this.routingService.getRouterState().pipe(tap(router => {\n            this.activeStepUrl = router.state.context.id;\n            this.steps.forEach((step, index) => {\n                const routeUrl = `/${this.routingConfigService.getRouteConfig(step.routeName).paths[0]}`;\n                if (routeUrl === this.activeStepUrl) {\n                    this.activeStepIndex = index;\n                }\n            });\n        }));\n    }\n};\nCheckoutProgressMobileTopComponent.ctorParameters = () => [\n    { type: CheckoutConfig },\n    { type: RoutingService },\n    { type: CartService },\n    { type: RoutingConfigService }\n];\nCheckoutProgressMobileTopComponent = __decorate([\n    Component({\n        selector: 'cx-checkout-progress-mobile-top',\n        template: \"<div *ngIf=\\\"routerState$ | async as routerState\\\">\\n  <div *ngIf=\\\"cart$ | async as cart\\\">\\n    <div class=\\\"cx-media\\\">\\n      <div class=\\\"cx-list-media\\\" *ngIf=\\\"cart?.totalItems && cart?.subTotal\\\">\\n        {{ 'cartItems.cartTotal' | cxTranslate: { count: cart.totalItems } }}:\\n        {{ cart.subTotal.formattedValue }}\\n      </div>\\n      <div *ngFor=\\\"let step of steps; let i = index\\\">\\n        <div class=\\\"cx-list-media\\\" *ngIf=\\\"i < activeStepIndex\\\">\\n          <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\\n          <button\\n            class=\\\"btn btn-link\\\"\\n            [routerLink]=\\\"{ cxRoute: step.routeName } | cxUrl\\\"\\n          >\\n            {{ 'common.edit' | cxTranslate }}\\n          </button>\\n        </div>\\n        <div class=\\\"cx-list-media is-active\\\" *ngIf=\\\"i === activeStepIndex\\\">\\n          <div>{{ i + 1 }}. {{ step.name | cxTranslate }}</div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], CheckoutProgressMobileTopComponent);\n\nlet CheckoutProgressMobileTopModule = class CheckoutProgressMobileTopModule {\n};\nCheckoutProgressMobileTopModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            UrlModule,\n            I18nModule,\n            RouterModule,\n            ConfigModule.withConfig(defaultCheckoutConfig),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutProgressMobileTop: {\n                        component: CheckoutProgressMobileTopComponent,\n                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n                    },\n                },\n            }),\n        ],\n        declarations: [CheckoutProgressMobileTopComponent],\n        entryComponents: [CheckoutProgressMobileTopComponent],\n        exports: [CheckoutProgressMobileTopComponent],\n    })\n], CheckoutProgressMobileTopModule);\n\nlet CheckoutProgressComponent = class CheckoutProgressComponent {\n    constructor(config, routingService, routingConfigService) {\n        this.config = config;\n        this.routingService = routingService;\n        this.routingConfigService = routingConfigService;\n    }\n    ngOnInit() {\n        this.steps = this.config.checkout.steps;\n        this.routerState$ = this.routingService.getRouterState().pipe(tap(router => {\n            this.activeStepUrl = router.state.context.id;\n            this.steps.forEach((step, index) => {\n                const routeUrl = `/${this.routingConfigService.getRouteConfig(step.routeName).paths[0]}`;\n                if (routeUrl === this.activeStepUrl) {\n                    this.activeStepIndex = index;\n                }\n            });\n        }));\n    }\n};\nCheckoutProgressComponent.ctorParameters = () => [\n    { type: CheckoutConfig },\n    { type: RoutingService },\n    { type: RoutingConfigService }\n];\nCheckoutProgressComponent = __decorate([\n    Component({\n        selector: 'cx-checkout-progress',\n        template: \"<section *ngIf=\\\"routerState$ | async as routerState\\\">\\n  <div class=\\\"cx-nav d-none d-lg-block d-xl-block\\\">\\n    <ul class=\\\"cx-list\\\">\\n      <li class=\\\"cx-item\\\" *ngFor=\\\"let step of steps; let i = index\\\">\\n        <a\\n          [routerLink]=\\\"{ cxRoute: step.routeName } | cxUrl\\\"\\n          class=\\\"cx-link\\\"\\n          [ngClass]=\\\"{\\n            ' is-active': i === activeStepIndex,\\n            ' is-disabled': i > activeStepIndex\\n          }\\\"\\n        >\\n          {{ i + 1 }}. {{ step.name | cxTranslate }}\\n        </a>\\n      </li>\\n    </ul>\\n  </div>\\n</section>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CheckoutProgressComponent);\n\nlet CheckoutProgressModule = class CheckoutProgressModule {\n};\nCheckoutProgressModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            UrlModule,\n            I18nModule,\n            RouterModule,\n            ConfigModule.withConfig(defaultCheckoutConfig),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutProgress: {\n                        component: CheckoutProgressComponent,\n                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n                    },\n                },\n            }),\n        ],\n        declarations: [CheckoutProgressComponent],\n        entryComponents: [CheckoutProgressComponent],\n        exports: [CheckoutProgressComponent],\n        providers: [{ provide: CheckoutConfig, useExisting: Config }],\n    })\n], CheckoutProgressModule);\n\nlet ShippingAddressSetGuard = class ShippingAddressSetGuard {\n    constructor(checkoutDetailsService, checkoutConfigService, routingConfigService, router) {\n        this.checkoutDetailsService = checkoutDetailsService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.routingConfigService = routingConfigService;\n        this.router = router;\n    }\n    canActivate() {\n        const checkoutStep = this.checkoutConfigService.getCheckoutStep(CheckoutStepType.SHIPPING_ADDRESS);\n        if (!checkoutStep && isDevMode()) {\n            console.warn(`Missing step with type ${CheckoutStepType.SHIPPING_ADDRESS} in checkout configuration.`);\n        }\n        return this.checkoutDetailsService\n            .getDeliveryAddress()\n            .pipe(map((deliveryAddress) => deliveryAddress && Object.keys(deliveryAddress).length\n            ? true\n            : this.router.parseUrl(checkoutStep &&\n                this.routingConfigService.getRouteConfig(checkoutStep.routeName).paths[0])));\n    }\n};\nShippingAddressSetGuard.ctorParameters = () => [\n    { type: CheckoutDetailsService },\n    { type: CheckoutConfigService },\n    { type: RoutingConfigService },\n    { type: Router }\n];\nShippingAddressSetGuard.ɵprov = ɵɵdefineInjectable({ factory: function ShippingAddressSetGuard_Factory() { return new ShippingAddressSetGuard(ɵɵinject(CheckoutDetailsService), ɵɵinject(CheckoutConfigService), ɵɵinject(RoutingConfigService), ɵɵinject(Router)); }, token: ShippingAddressSetGuard, providedIn: \"root\" });\nShippingAddressSetGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], ShippingAddressSetGuard);\n\nlet DeliveryModeComponent = class DeliveryModeComponent {\n    constructor(fb, checkoutDeliveryService, routingService, checkoutConfigService, activatedRoute) {\n        this.fb = fb;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.routingService = routingService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.activatedRoute = activatedRoute;\n        this.allowRedirect = false;\n        this.mode = this.fb.group({\n            deliveryModeId: ['', Validators.required],\n        });\n    }\n    ngOnInit() {\n        this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);\n        this.checkoutStepUrlPrevious = this.checkoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute);\n        this.supportedDeliveryModes$ = this.checkoutDeliveryService.getSupportedDeliveryModes();\n        this.deliveryModeSub = this.supportedDeliveryModes$\n            .pipe(withLatestFrom(this.checkoutDeliveryService\n            .getSelectedDeliveryMode()\n            .pipe(map((deliveryMode) => deliveryMode && deliveryMode.code ? deliveryMode.code : null))))\n            .subscribe(([deliveryModes, code]) => {\n            if (!code && deliveryModes && deliveryModes.length) {\n                code = this.checkoutConfigService.getPreferredDeliveryMode(deliveryModes);\n            }\n            if (this.allowRedirect &&\n                !!code &&\n                code === this.currentDeliveryModeId) {\n                this.routingService.go(this.checkoutStepUrlNext);\n            }\n            this.currentDeliveryModeId = code;\n            if (code) {\n                this.mode.controls['deliveryModeId'].setValue(code);\n            }\n        });\n    }\n    changeMode(code) {\n        if (code !== this.currentDeliveryModeId) {\n            this.currentDeliveryModeId = code;\n        }\n    }\n    next() {\n        this.allowRedirect = true;\n        if (this.mode.valid && this.mode.value) {\n            if (!this.currentDeliveryModeId) {\n                this.currentDeliveryModeId = this.mode.value.deliveryModeId;\n            }\n            this.checkoutDeliveryService.setDeliveryMode(this.currentDeliveryModeId);\n        }\n        this.routingService.go(this.checkoutStepUrlNext);\n    }\n    back() {\n        this.routingService.go(this.checkoutStepUrlPrevious);\n    }\n    get deliveryModeInvalid() {\n        return this.mode.controls['deliveryModeId'].invalid;\n    }\n    ngOnDestroy() {\n        if (this.deliveryModeSub) {\n            this.deliveryModeSub.unsubscribe();\n        }\n    }\n};\nDeliveryModeComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: CheckoutDeliveryService },\n    { type: RoutingService },\n    { type: CheckoutConfigService },\n    { type: ActivatedRoute }\n];\nDeliveryModeComponent = __decorate([\n    Component({\n        selector: 'cx-delivery-mode',\n        template: \"<div [formGroup]=\\\"mode\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12 col-lg-9\\\">\\n      <h3 class=\\\"cx-checkout-title d-none d-lg-block d-xl-block\\\">\\n        {{ 'checkoutShipping.shippingMethod' | cxTranslate }}\\n      </h3>\\n\\n      <ng-container\\n        *ngIf=\\\"(supportedDeliveryModes$ | async)?.length; else loading\\\"\\n      >\\n        <div\\n          class=\\\"form-check\\\"\\n          *ngFor=\\\"let mode of supportedDeliveryModes$ | async\\\"\\n        >\\n          <input\\n            class=\\\"form-check-input\\\"\\n            role=\\\"radio\\\"\\n            type=\\\"radio\\\"\\n            id=\\\"deliveryMode-{{ mode.code }}\\\"\\n            aria-checked=\\\"true\\\"\\n            (change)=\\\"changeMode(mode.code)\\\"\\n            [value]=\\\"mode.code\\\"\\n            formControlName=\\\"deliveryModeId\\\"\\n          />\\n          <label\\n            class=\\\"cx-delivery-label form-check-label\\n                form-radio-label\\\"\\n            for=\\\"deliveryMode-{{ mode.code }}\\\"\\n          >\\n            <div class=\\\"cx-delivery-mode\\\">{{ mode.name }}</div>\\n            <div class=\\\"cx-delivery-price\\\">\\n              {{ mode.deliveryCost.formattedValue }}\\n            </div>\\n            <div class=\\\"cx-delivery-details\\\">{{ mode.description }}</div>\\n          </label>\\n        </div>\\n      </ng-container>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"row cx-checkout-btns\\\">\\n    <div class=\\\"col-md-12 col-lg-6\\\">\\n      <button class=\\\"btn btn-block btn-action\\\" (click)=\\\"back()\\\">\\n        {{ 'common.back' | cxTranslate }}\\n      </button>\\n    </div>\\n    <div class=\\\"col-md-12 col-lg-6\\\">\\n      <button\\n        class=\\\"btn btn-block btn-primary\\\"\\n        [disabled]=\\\"deliveryModeInvalid\\\"\\n        (click)=\\\"next()\\\"\\n      >\\n        {{ 'common.continue' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<ng-template #loading>\\n  <div class=\\\"cx-spinner\\\">\\n    <cx-spinner></cx-spinner>\\n  </div>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], DeliveryModeComponent);\n\nlet DeliveryModeModule = class DeliveryModeModule {\n};\nDeliveryModeModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            I18nModule,\n            SpinnerModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutDeliveryMode: {\n                        component: DeliveryModeComponent,\n                        guards: [\n                            CheckoutAuthGuard,\n                            CartNotEmptyGuard,\n                            ShippingAddressSetGuard,\n                        ],\n                    },\n                },\n            }),\n        ],\n        declarations: [DeliveryModeComponent],\n        entryComponents: [DeliveryModeComponent],\n        exports: [DeliveryModeComponent],\n    })\n], DeliveryModeModule);\n\nlet DeliveryModeSetGuard = class DeliveryModeSetGuard {\n    constructor(checkoutDetailsService, checkoutConfigService, routingConfigService, router) {\n        this.checkoutDetailsService = checkoutDetailsService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.routingConfigService = routingConfigService;\n        this.router = router;\n    }\n    canActivate() {\n        const checkoutStep = this.checkoutConfigService.getCheckoutStep(CheckoutStepType.DELIVERY_MODE);\n        if (!checkoutStep && isDevMode()) {\n            console.warn(`Missing step with type ${CheckoutStepType.DELIVERY_MODE} in checkout configuration.`);\n        }\n        return this.checkoutDetailsService\n            .getSelectedDeliveryModeCode()\n            .pipe(map((mode) => mode && mode.length\n            ? true\n            : this.router.parseUrl(checkoutStep &&\n                this.routingConfigService.getRouteConfig(checkoutStep.routeName).paths[0])));\n    }\n};\nDeliveryModeSetGuard.ctorParameters = () => [\n    { type: CheckoutDetailsService },\n    { type: CheckoutConfigService },\n    { type: RoutingConfigService },\n    { type: Router }\n];\nDeliveryModeSetGuard.ɵprov = ɵɵdefineInjectable({ factory: function DeliveryModeSetGuard_Factory() { return new DeliveryModeSetGuard(ɵɵinject(CheckoutDetailsService), ɵɵinject(CheckoutConfigService), ɵɵinject(RoutingConfigService), ɵɵinject(Router)); }, token: DeliveryModeSetGuard, providedIn: \"root\" });\nDeliveryModeSetGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], DeliveryModeSetGuard);\n\nlet BillingAddressFormComponent = class BillingAddressFormComponent {\n    constructor(userAddressService) {\n        this.userAddressService = userAddressService;\n        this.selectedCountry$ = new BehaviorSubject('');\n    }\n    ngOnInit() {\n        this.regions$ = this.selectedCountry$.pipe(switchMap(country => this.userAddressService.getRegions(country)), tap(regions => {\n            const regionControl = this.billingAddress.get('region.isocodeShort');\n            if (regions.length > 0) {\n                regionControl.enable();\n            }\n            else {\n                regionControl.disable();\n            }\n        }));\n    }\n    countrySelected(country) {\n        this.billingAddress['controls'].country['controls'].isocode.setValue(country.isocode);\n        this.selectedCountry$.next(country.isocode);\n    }\n    regionSelected(region) {\n        this.billingAddress['controls'].region['controls'].isocodeShort.setValue(region.isocodeShort);\n    }\n};\nBillingAddressFormComponent.ctorParameters = () => [\n    { type: UserAddressService }\n];\n__decorate([\n    Input()\n], BillingAddressFormComponent.prototype, \"billingAddress\", void 0);\n__decorate([\n    Input()\n], BillingAddressFormComponent.prototype, \"countries$\", void 0);\nBillingAddressFormComponent = __decorate([\n    Component({\n        selector: 'cx-billing-address-form',\n        template: \"<div [formGroup]=\\\"billingAddress\\\">\\n  <div class=\\\"form-group\\\">\\n    <ng-container *ngIf=\\\"countries$ | async as countries\\\">\\n      <div *ngIf=\\\"countries.length !== 0\\\">\\n        <label aria-required=\\\"true\\\">\\n          <span class=\\\"label-content required\\\">{{\\n            'addressForm.country' | cxTranslate\\n          }}</span>\\n          <ng-select\\n            [searchable]=\\\"true\\\"\\n            [clearable]=\\\"false\\\"\\n            [items]=\\\"countries\\\"\\n            bindLabel=\\\"name\\\"\\n            bindValue=\\\"isocode\\\"\\n            placeholder=\\\"{{ 'addressForm.selectOne' | cxTranslate }}\\\"\\n            (change)=\\\"countrySelected($event)\\\"\\n          >\\n          </ng-select>\\n        </label>\\n      </div>\\n    </ng-container>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content required\\\">{{\\n        'addressForm.firstName.label' | cxTranslate\\n      }}</span>\\n      <input\\n        class=\\\"form-control\\\"\\n        type=\\\"text\\\"\\n        required\\n        placeholder=\\\"{{ 'addressForm.firstName.placeholder' | cxTranslate }}\\\"\\n        formControlName=\\\"firstName\\\"\\n      />\\n    </label>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content required\\\">{{\\n        'addressForm.lastName.label' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"text\\\"\\n        class=\\\"form-control\\\"\\n        required\\n        placeholder=\\\"{{ 'addressForm.lastName.placeholder' | cxTranslate }}\\\"\\n        formControlName=\\\"lastName\\\"\\n      />\\n    </label>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content required\\\">{{\\n        'addressForm.address1' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"text\\\"\\n        class=\\\"form-control\\\"\\n        required\\n        placeholder=\\\"{{ 'addressForm.streetAddress' | cxTranslate }}\\\"\\n        formControlName=\\\"line1\\\"\\n      />\\n    </label>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'addressForm.address2' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"text\\\"\\n        class=\\\"form-control\\\"\\n        placeholder=\\\"{{ 'addressForm.aptSuite' | cxTranslate }}\\\"\\n        formControlName=\\\"line2\\\"\\n      />\\n    </label>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"form-group col-md-6\\\">\\n      <label>\\n        <span class=\\\"label-content required\\\">{{\\n          'addressForm.city.label' | cxTranslate\\n        }}</span>\\n        <input\\n          type=\\\"text\\\"\\n          class=\\\"form-control\\\"\\n          required\\n          placeholder=\\\"{{ 'addressForm.city.placeholder' | cxTranslate }}\\\"\\n          formControlName=\\\"town\\\"\\n        />\\n      </label>\\n    </div>\\n    <div class=\\\"form-group col-md-6\\\">\\n      <ng-container *ngIf=\\\"regions$ | async as regions\\\" formGroupName=\\\"region\\\">\\n        <div *ngIf=\\\"regions.length !== 0\\\">\\n          <label aria-required=\\\"true\\\">\\n            <span class=\\\"label-content required\\\">{{\\n              'addressForm.state' | cxTranslate\\n            }}</span>\\n            <ng-select\\n              class=\\\"region-select\\\"\\n              formControlName=\\\"isocodeShort\\\"\\n              [searchable]=\\\"true\\\"\\n              [clearable]=\\\"false\\\"\\n              [items]=\\\"regions\\\"\\n              bindLabel=\\\"{{ regions[0].name ? 'name' : 'isocodeShort' }}\\\"\\n              bindValue=\\\"{{ regions[0].name ? 'isocodeShort' : 'region' }}\\\"\\n              placeholder=\\\"{{ 'addressForm.selectOne' | cxTranslate }}\\\"\\n              (change)=\\\"regionSelected($event)\\\"\\n            >\\n            </ng-select>\\n          </label>\\n        </div>\\n      </ng-container>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"form-group col-md-6\\\">\\n      <label>\\n        <span class=\\\"label-content required\\\">{{\\n          'addressForm.zipCode.label' | cxTranslate\\n        }}</span>\\n        <input\\n          type=\\\"text\\\"\\n          class=\\\"form-control\\\"\\n          required\\n          placeholder=\\\"{{ 'addressForm.zipCode.placeholder' | cxTranslate }}\\\"\\n          formControlName=\\\"postalCode\\\"\\n        />\\n      </label>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], BillingAddressFormComponent);\n\nlet BillingAddressFormModule = class BillingAddressFormModule {\n};\nBillingAddressFormModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            FormsModule,\n            RouterModule,\n            NgSelectModule,\n            I18nModule,\n        ],\n        declarations: [BillingAddressFormComponent],\n        exports: [BillingAddressFormComponent],\n    })\n], BillingAddressFormModule);\n\nlet SuggestedAddressDialogComponent = class SuggestedAddressDialogComponent {\n    constructor(modalService) {\n        this.modalService = modalService;\n        this.iconTypes = ICON_TYPE;\n    }\n    ngOnInit() {\n        this.selectedAddress = this.suggestedAddresses.length\n            ? this.suggestedAddresses[0]\n            : this.enteredAddress;\n    }\n    closeModal(reason) {\n        this.modalService.closeActiveModal(reason);\n    }\n};\nSuggestedAddressDialogComponent.ctorParameters = () => [\n    { type: ModalService }\n];\n__decorate([\n    Input()\n], SuggestedAddressDialogComponent.prototype, \"suggestedAddresses\", void 0);\n__decorate([\n    Input()\n], SuggestedAddressDialogComponent.prototype, \"enteredAddress\", void 0);\nSuggestedAddressDialogComponent = __decorate([\n    Component({\n        selector: 'cx-suggested-addresses-dialog',\n        template: \"<div class=\\\"cx-dialog-header modal-header\\\">\\n  <div class=\\\"cx-dialog-title modal-title\\\">\\n    {{ 'checkoutAddress.verifyYourAddress' | cxTranslate }}\\n  </div>\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"closeModal()\\\">\\n    <span aria-hidden=\\\"true\\\">\\n      <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n    </span>\\n  </button>\\n</div>\\n<div class=\\\"cx-dialog-body modal-body\\\" ngForm>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"cx-dialog-info col-md-12\\\">\\n        <p>\\n          {{ 'checkoutAddress.ensureAccuracySuggestChange' | cxTranslate }}\\n          {{ 'checkoutAddress.chooseAddressToUse' | cxTranslate }}\\n        </p>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"cx-dialog-options col-md-12\\\">\\n        <div\\n          class=\\\"form-check\\\"\\n          *ngFor=\\\"let suggestedAddress of suggestedAddresses; let i = index\\\"\\n        >\\n          <input\\n            class=\\\"form-check-input\\\"\\n            type=\\\"radio\\\"\\n            name=\\\"selectedAddress\\\"\\n            [(ngModel)]=\\\"selectedAddress\\\"\\n            [value]=\\\"suggestedAddress\\\"\\n            [id]=\\\"'suggested-addresses--suggested-' + i\\\"\\n          />\\n          <label\\n            class=\\\"form-check-label cx-dialog-label\\\"\\n            [for]=\\\"'suggested-addresses--suggested-' + i\\\"\\n          >\\n            {{ 'checkoutAddress.suggestedAddress' | cxTranslate }}\\n            {{ suggestedAddresses?.length > 1 ? i + 1 : null }}\\n          </label>\\n          <div class=\\\"cx-dialog-suggested\\\">\\n            {{ suggestedAddress?.firstName }} {{ suggestedAddress?.lastName\\n            }}<br />\\n            {{ suggestedAddress?.line1 }}<br />\\n            <span>{{ suggestedAddress?.line2 }}</span\\n            ><br />\\n            {{ suggestedAddress?.town }} {{ suggestedAddress?.region?.isocode\\n            }}<br />\\n            {{ suggestedAddress?.postalCode }}\\n          </div>\\n        </div>\\n        <div class=\\\"form-check\\\">\\n          <input\\n            class=\\\"form-check-input\\\"\\n            type=\\\"radio\\\"\\n            name=\\\"selectedAddress\\\"\\n            [(ngModel)]=\\\"selectedAddress\\\"\\n            [value]=\\\"enteredAddress\\\"\\n            id=\\\"suggested-addresses--entered\\\"\\n          />\\n          <label\\n            class=\\\"form-check-label cx-dialog-label\\\"\\n            for=\\\"suggested-addresses--entered\\\"\\n          >\\n            {{ 'checkoutAddress.enteredAddress' | cxTranslate }}\\n          </label>\\n          <div class=\\\"cx-dialog-entered\\\">\\n            {{ enteredAddress?.firstName }} {{ enteredAddress?.lastName }}<br />\\n            {{ enteredAddress?.line1 }}<br />\\n            <span>{{ enteredAddress?.line2 }}</span\\n            ><br />\\n            {{ enteredAddress?.town }} {{ enteredAddress?.region?.isocode\\n            }}<br />\\n            {{ enteredAddress?.postalCode }}\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"row\\\">\\n      <div class=\\\"cx-dialog-actions col-sm-12 col-md-6 offset-md-6\\\">\\n        <button\\n          class=\\\"btn btn-secondary btn-block cx-dialog-buttons\\\"\\n          (click)=\\\"closeModal()\\\"\\n        >\\n          {{ 'checkoutAddress.editAddress' | cxTranslate }}\\n        </button>\\n        <button\\n          cxAutoFocus\\n          class=\\\"btn btn-primary btn-block cx-dialog-buttons\\\"\\n          (click)=\\\"closeModal(selectedAddress)\\\"\\n        >\\n          {{ 'checkoutAddress.saveAddress' | cxTranslate }}\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], SuggestedAddressDialogComponent);\n\nlet PaymentFormComponent = class PaymentFormComponent {\n    constructor(checkoutPaymentService, checkoutDeliveryService, userPaymentService, globalMessageService, fb, modalService) {\n        this.checkoutPaymentService = checkoutPaymentService;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.userPaymentService = userPaymentService;\n        this.globalMessageService = globalMessageService;\n        this.fb = fb;\n        this.modalService = modalService;\n        this.iconTypes = ICON_TYPE;\n        this.months = [];\n        this.years = [];\n        this.sameAsShippingAddress = true;\n        this.goBack = new EventEmitter();\n        this.closeForm = new EventEmitter();\n        this.setPaymentDetails = new EventEmitter();\n        this.payment = this.fb.group({\n            defaultPayment: [false],\n            accountHolderName: ['', Validators.required],\n            cardNumber: ['', Validators.required],\n            cardType: this.fb.group({\n                code: ['', Validators.required],\n            }),\n            expiryMonth: ['', Validators.required],\n            expiryYear: ['', Validators.required],\n            cvn: ['', Validators.required],\n        });\n        this.billingAddress = this.fb.group({\n            firstName: ['', Validators.required],\n            lastName: ['', Validators.required],\n            line1: ['', Validators.required],\n            line2: [''],\n            town: ['', Validators.required],\n            region: this.fb.group({\n                isocodeShort: [null, Validators.required],\n            }),\n            country: this.fb.group({\n                isocode: [null, Validators.required],\n            }),\n            postalCode: ['', Validators.required],\n        });\n    }\n    ngOnInit() {\n        this.expMonthAndYear();\n        this.countries$ = this.userPaymentService.getAllBillingCountries().pipe(tap(countries => {\n            // If the store is empty fetch countries. This is also used when changing language.\n            if (Object.keys(countries).length === 0) {\n                this.userPaymentService.loadBillingCountries();\n            }\n        }));\n        this.cardTypes$ = this.checkoutPaymentService.getCardTypes().pipe(tap(cardTypes => {\n            if (Object.keys(cardTypes).length === 0) {\n                this.checkoutPaymentService.loadSupportedCardTypes();\n            }\n        }));\n        this.shippingAddress$ = this.checkoutDeliveryService.getDeliveryAddress();\n        this.loading$ = this.checkoutPaymentService.getSetPaymentDetailsResultProcess();\n        this.checkboxSub = this.showSameAsShippingAddressCheckbox().subscribe((shouldShowCheckbox) => {\n            // this operation makes sure the checkbox is not checked if not shown and vice versa\n            this.sameAsShippingAddress = shouldShowCheckbox;\n        });\n        // verify the new added address\n        this.addressVerifySub = this.checkoutDeliveryService\n            .getAddressVerificationResults()\n            .subscribe((results) => {\n            if (results.decision === 'FAIL') {\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n            }\n            else if (results.decision === 'ACCEPT') {\n                this.next();\n            }\n            else if (results.decision === 'REJECT') {\n                this.globalMessageService.add({ key: 'addressForm.invalidAddress' }, GlobalMessageType.MSG_TYPE_ERROR);\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n            }\n            else if (results.decision === 'REVIEW') {\n                this.openSuggestedAddress(results);\n            }\n        });\n    }\n    expMonthAndYear() {\n        const year = new Date().getFullYear();\n        for (let i = 0; i < 10; i++) {\n            this.years.push({ id: i + 1, name: year + i });\n        }\n        for (let j = 1; j <= 12; j++) {\n            if (j < 10) {\n                this.months.push({ id: j, name: '0' + j.toString() });\n            }\n            else {\n                this.months.push({ id: j, name: j.toString() });\n            }\n        }\n    }\n    toggleDefaultPaymentMethod() {\n        this.payment.value.defaultPayment = !this.payment.value.defaultPayment;\n    }\n    paymentSelected(card) {\n        this.payment['controls'].cardType['controls'].code.setValue(card.code);\n    }\n    monthSelected(month) {\n        this.payment['controls'].expiryMonth.setValue(month.name);\n    }\n    yearSelected(year) {\n        this.payment['controls'].expiryYear.setValue(year.name);\n    }\n    toggleSameAsShippingAddress() {\n        this.sameAsShippingAddress = !this.sameAsShippingAddress;\n    }\n    isContinueButtonDisabled() {\n        return (this.payment.invalid ||\n            (!this.sameAsShippingAddress && this.billingAddress.invalid));\n    }\n    /**\n     * Check if the shipping address can also be a billing address\n     *\n     * @memberof PaymentFormComponent\n     */\n    showSameAsShippingAddressCheckbox() {\n        return combineLatest([this.countries$, this.shippingAddress$]).pipe(map(([countries, address]) => {\n            return (address !== undefined &&\n                address.country !== undefined &&\n                !!countries.filter((country) => country.isocode === address.country.isocode).length);\n        }));\n    }\n    getAddressCardContent(address) {\n        let region = '';\n        if (address.region && address.region.isocode) {\n            region = address.region.isocode + ', ';\n        }\n        return {\n            textBold: address.firstName + ' ' + address.lastName,\n            text: [\n                address.line1,\n                address.line2,\n                address.town + ', ' + region + address.country.isocode,\n                address.postalCode,\n                address.phone,\n            ],\n        };\n    }\n    openSuggestedAddress(results) {\n        if (!this.suggestedAddressModalRef) {\n            this.suggestedAddressModalRef = this.modalService.open(SuggestedAddressDialogComponent, { centered: true, size: 'lg' });\n            this.suggestedAddressModalRef.componentInstance.enteredAddress = this.billingAddress.value;\n            this.suggestedAddressModalRef.componentInstance.suggestedAddresses =\n                results.suggestedAddresses;\n            this.suggestedAddressModalRef.result\n                .then(() => {\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n                this.suggestedAddressModalRef = null;\n            })\n                .catch(() => {\n                // this  callback is called when modal is closed with Esc key or clicking backdrop\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n                this.suggestedAddressModalRef = null;\n            });\n        }\n    }\n    close() {\n        this.closeForm.emit();\n    }\n    back() {\n        this.goBack.emit();\n    }\n    verifyAddress() {\n        if (this.sameAsShippingAddress) {\n            this.next();\n        }\n        else {\n            this.checkoutDeliveryService.verifyAddress(this.billingAddress.value);\n        }\n    }\n    next() {\n        this.setPaymentDetails.emit({\n            paymentDetails: this.payment.value,\n            billingAddress: this.sameAsShippingAddress\n                ? null\n                : this.billingAddress.value,\n        });\n    }\n    ngOnDestroy() {\n        if (this.checkboxSub) {\n            this.checkboxSub.unsubscribe();\n        }\n        if (this.addressVerifySub) {\n            this.addressVerifySub.unsubscribe();\n        }\n    }\n};\nPaymentFormComponent.ctorParameters = () => [\n    { type: CheckoutPaymentService },\n    { type: CheckoutDeliveryService },\n    { type: UserPaymentService },\n    { type: GlobalMessageService },\n    { type: FormBuilder },\n    { type: ModalService }\n];\n__decorate([\n    Input()\n], PaymentFormComponent.prototype, \"setAsDefaultField\", void 0);\n__decorate([\n    Input()\n], PaymentFormComponent.prototype, \"paymentMethodsCount\", void 0);\n__decorate([\n    Output()\n], PaymentFormComponent.prototype, \"goBack\", void 0);\n__decorate([\n    Output()\n], PaymentFormComponent.prototype, \"closeForm\", void 0);\n__decorate([\n    Output()\n], PaymentFormComponent.prototype, \"setPaymentDetails\", void 0);\nPaymentFormComponent = __decorate([\n    Component({\n        selector: 'cx-payment-form',\n        template: \"<!-- FORM -->\\n<div *ngIf=\\\"!(loading$ | async).loading; else spinner\\\" [formGroup]=\\\"payment\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12 col-lg-9\\\">\\n      <div class=\\\"form-group\\\">\\n        <ng-container *ngIf=\\\"cardTypes$ | async as cardTypes\\\">\\n          <div *ngIf=\\\"cardTypes.length !== 0\\\">\\n            <label aria-required=\\\"true\\\">\\n              <span class=\\\"label-content required\\\">{{\\n                'paymentForm.paymentType' | cxTranslate\\n              }}</span>\\n              <ng-select\\n                [searchable]=\\\"false\\\"\\n                [clearable]=\\\"false\\\"\\n                [items]=\\\"cardTypes\\\"\\n                bindLabel=\\\"name\\\"\\n                bindValue=\\\"code\\\"\\n                placeholder=\\\"{{ 'paymentForm.selectOne' | cxTranslate }}\\\"\\n                (change)=\\\"paymentSelected($event)\\\"\\n              >\\n              </ng-select>\\n            </label>\\n          </div>\\n        </ng-container>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'paymentForm.accountHolderName.label' | cxTranslate\\n          }}</span>\\n          <input\\n            class=\\\"form-control\\\"\\n            type=\\\"text\\\"\\n            required\\n            placeholder=\\\"{{\\n              'paymentForm.accountHolderName.placeholder' | cxTranslate\\n            }}\\\"\\n            formControlName=\\\"accountHolderName\\\"\\n          />\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'paymentForm.cardNumber' | cxTranslate\\n          }}</span>\\n          <input\\n            type=\\\"text\\\"\\n            class=\\\"form-control\\\"\\n            required\\n            formControlName=\\\"cardNumber\\\"\\n          />\\n        </label>\\n      </div>\\n\\n      <div class=\\\"row\\\">\\n        <div class=\\\"form-group col-md-6\\\">\\n          <label>\\n            <span class=\\\"label-content\\\">{{\\n              'paymentForm.expirationDate' | cxTranslate\\n            }}</span>\\n          </label>\\n          <div class=\\\"cx-payment-form-exp-date row\\\">\\n            <div class=\\\"col-sm-6 col-md-5\\\">\\n              <ng-select\\n                [searchable]=\\\"false\\\"\\n                [clearable]=\\\"false\\\"\\n                [items]=\\\"months\\\"\\n                bindLabel=\\\"name\\\"\\n                bindValue=\\\"expiryMonth\\\"\\n                placeholder=\\\"{{ 'paymentForm.monthMask' | cxTranslate }}\\\"\\n                (change)=\\\"monthSelected($event)\\\"\\n              >\\n              </ng-select>\\n            </div>\\n            <div class=\\\"col-sm-6 col-md-7\\\">\\n              <ng-select\\n                [searchable]=\\\"false\\\"\\n                [clearable]=\\\"false\\\"\\n                [items]=\\\"years\\\"\\n                bindLabel=\\\"name\\\"\\n                bindValue=\\\"expiryYear\\\"\\n                placeholder=\\\"{{ 'paymentForm.yearMask' | cxTranslate }}\\\"\\n                (change)=\\\"yearSelected($event)\\\"\\n              >\\n              </ng-select>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"form-group col-md-6\\\">\\n          <label>\\n            <span class=\\\"label-content\\\">\\n              {{ 'paymentForm.securityCode' | cxTranslate }}\\n              <cx-icon\\n                [type]=\\\"iconTypes.INFO\\\"\\n                class=\\\"cx-payment-form-tooltip\\\"\\n                placement=\\\"right\\\"\\n                title=\\\"{{ 'paymentForm.securityCodeTitle' | cxTranslate }}\\\"\\n                alt=\\\"\\\"\\n              ></cx-icon>\\n            </span>\\n            <input\\n              type=\\\"text\\\"\\n              class=\\\"form-control\\\"\\n              id=\\\"cVVNumber\\\"\\n              required\\n              formControlName=\\\"cvn\\\"\\n            />\\n          </label>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" *ngIf=\\\"setAsDefaultField\\\">\\n        <div class=\\\"form-check\\\">\\n          <label>\\n            <input\\n              type=\\\"checkbox\\\"\\n              class=\\\"form-check-input\\\"\\n              (change)=\\\"toggleDefaultPaymentMethod()\\\"\\n            />\\n            <span class=\\\"form-check-label\\\">{{\\n              'paymentForm.setAsDefault' | cxTranslate\\n            }}</span>\\n          </label>\\n        </div>\\n      </div>\\n\\n      <!-- BILLING -->\\n      <div class=\\\"cx-payment-form-billing\\\">\\n        <div class=\\\"cx-payment-form-billing-address\\\">\\n          {{ 'paymentForm.billingAddress' | cxTranslate }}\\n        </div>\\n\\n        <!-- SAME AS SHIPPING CHECKBOX -->\\n        <ng-container *ngIf=\\\"showSameAsShippingAddressCheckbox() | async\\\">\\n          <div class=\\\"form-group\\\">\\n            <div class=\\\"form-check\\\">\\n              <label>\\n                <input\\n                  type=\\\"checkbox\\\"\\n                  class=\\\"form-check-input\\\"\\n                  [checked]=\\\"sameAsShippingAddress\\\"\\n                  (change)=\\\"toggleSameAsShippingAddress()\\\"\\n                />\\n                <span class=\\\"form-check-label\\\">{{\\n                  'paymentForm.sameAsShippingAddress' | cxTranslate\\n                }}</span>\\n              </label>\\n            </div>\\n          </div>\\n        </ng-container>\\n\\n        <!-- BILLING INFO COMPONENT -->\\n        <ng-container\\n          *ngIf=\\\"\\n            sameAsShippingAddress && shippingAddress$\\n              | async as shippingAddress;\\n            else billingAddressForm\\n          \\\"\\n        >\\n          <cx-card [content]=\\\"getAddressCardContent(shippingAddress)\\\"></cx-card>\\n        </ng-container>\\n\\n        <ng-template #billingAddressForm>\\n          <cx-billing-address-form\\n            [billingAddress]=\\\"billingAddress\\\"\\n            [countries$]=\\\"countries$\\\"\\n          >\\n          </cx-billing-address-form>\\n        </ng-template>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <!-- BUTTON SECTION -->\\n  <div class=\\\"cx-checkout-btns row\\\">\\n    <div class=\\\"col-md-12 col-lg-6\\\">\\n      <button\\n        *ngIf=\\\"paymentMethodsCount === 0\\\"\\n        class=\\\"btn btn-block btn-action\\\"\\n        (click)=\\\"back()\\\"\\n      >\\n        {{ 'common.back' | cxTranslate }}\\n      </button>\\n      <button\\n        *ngIf=\\\"paymentMethodsCount > 0\\\"\\n        class=\\\"btn btn-block btn-action\\\"\\n        (click)=\\\"close()\\\"\\n      >\\n        {{ 'paymentForm.changePayment' | cxTranslate }}\\n      </button>\\n    </div>\\n    <div class=\\\"col-md-12 col-lg-6\\\">\\n      <button\\n        class=\\\"btn btn-block btn-primary\\\"\\n        [disabled]=\\\"isContinueButtonDisabled()\\\"\\n        (click)=\\\"next()\\\"\\n      >\\n        {{ 'common.continue' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\\n<ng-template #spinner>\\n  <cx-spinner></cx-spinner>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], PaymentFormComponent);\n\nlet PaymentFormModule = class PaymentFormModule {\n};\nPaymentFormModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            NgSelectModule,\n            CardModule,\n            BillingAddressFormModule,\n            I18nModule,\n            IconModule,\n            SpinnerModule,\n        ],\n        declarations: [PaymentFormComponent],\n        entryComponents: [PaymentFormComponent],\n        exports: [PaymentFormComponent],\n    })\n], PaymentFormModule);\n\nlet PaymentMethodComponent = class PaymentMethodComponent {\n    constructor(userPaymentService, checkoutService, checkoutDeliveryService, checkoutPaymentService, globalMessageService, routingService, checkoutConfigService, activatedRoute, translation, cartService) {\n        this.userPaymentService = userPaymentService;\n        this.checkoutService = checkoutService;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.checkoutPaymentService = checkoutPaymentService;\n        this.globalMessageService = globalMessageService;\n        this.routingService = routingService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.activatedRoute = activatedRoute;\n        this.translation = translation;\n        this.cartService = cartService;\n        this.iconTypes = ICON_TYPE;\n        this.newPaymentFormManuallyOpened = false;\n        this.isGuestCheckout = false;\n    }\n    ngOnInit() {\n        this.allowRouting = false;\n        this.isLoading$ = this.userPaymentService.getPaymentMethodsLoading();\n        if (!this.cartService.isGuestCart()) {\n            this.userPaymentService.loadPaymentMethods();\n        }\n        else {\n            this.isGuestCheckout = true;\n        }\n        this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);\n        this.checkoutStepUrlPrevious = this.checkoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute);\n        this.checkoutDeliveryService\n            .getDeliveryAddress()\n            .pipe(take(1))\n            .subscribe((address) => {\n            this.deliveryAddress = address;\n        });\n        this.existingPaymentMethods$ = this.userPaymentService.getPaymentMethods();\n        this.getPaymentDetailsSub = this.checkoutPaymentService\n            .getPaymentDetails()\n            .pipe(filter(paymentInfo => paymentInfo && !!Object.keys(paymentInfo).length))\n            .subscribe(paymentInfo => {\n            if (this.allowRouting) {\n                this.routingService.go(this.checkoutStepUrlNext);\n            }\n            if (!paymentInfo['hasError']) {\n                this.selectedPayment = paymentInfo;\n            }\n            else {\n                Object.keys(paymentInfo).forEach(key => {\n                    if (key.startsWith('InvalidField')) {\n                        this.sendPaymentMethodFailGlobalMessage(paymentInfo[key]);\n                    }\n                });\n                this.checkoutService.clearCheckoutStep(3);\n            }\n        });\n    }\n    getCardContent(payment) {\n        if (!this.selectedPayment && payment.defaultPayment) {\n            this.selectedPayment = payment;\n        }\n        return combineLatest([\n            this.translation.translate('paymentCard.expires', {\n                month: payment.expiryMonth,\n                year: payment.expiryYear,\n            }),\n            this.translation.translate('paymentForm.useThisPayment'),\n            this.translation.translate('paymentCard.defaultPaymentMethod'),\n            this.translation.translate('paymentCard.selected'),\n        ]).pipe(map(([textExpires, textUseThisPayment, textDefaultPaymentMethod, textSelected,]) => {\n            return this.createCard(payment, {\n                textExpires,\n                textUseThisPayment,\n                textDefaultPaymentMethod,\n                textSelected,\n            });\n        }));\n    }\n    selectPaymentMethod(paymentDetails) {\n        this.selectedPayment = paymentDetails;\n    }\n    showNewPaymentForm() {\n        this.newPaymentFormManuallyOpened = true;\n    }\n    hideNewPaymentForm() {\n        this.newPaymentFormManuallyOpened = false;\n    }\n    setPaymentDetails({ paymentDetails, billingAddress, isNewPayment = true, }) {\n        const details = Object.assign({}, paymentDetails);\n        details.billingAddress = billingAddress || this.deliveryAddress;\n        if (isNewPayment) {\n            this.checkoutPaymentService.createPaymentDetails(details);\n        }\n        else if (this.selectedPayment && this.selectedPayment.id === details.id) {\n            this.checkoutPaymentService.setPaymentDetails(details);\n        }\n        this.allowRouting = true;\n    }\n    ngOnDestroy() {\n        if (this.getPaymentDetailsSub) {\n            this.getPaymentDetailsSub.unsubscribe();\n        }\n        this.checkoutPaymentService.paymentProcessSuccess();\n    }\n    getCardIcon(code) {\n        let ccIcon;\n        if (code === 'visa') {\n            ccIcon = this.iconTypes.VISA;\n        }\n        else if (code === 'master' || code === 'mastercard_eurocard') {\n            ccIcon = this.iconTypes.MASTER_CARD;\n        }\n        else if (code === 'diners') {\n            ccIcon = this.iconTypes.DINERS_CLUB;\n        }\n        else if (code === 'amex') {\n            ccIcon = this.iconTypes.AMEX;\n        }\n        else {\n            ccIcon = this.iconTypes.CREDIT_CARD;\n        }\n        return ccIcon;\n    }\n    sendPaymentMethodFailGlobalMessage(msg) {\n        this.globalMessageService.add({\n            key: 'paymentMethods.invalidField',\n            params: { field: msg },\n        }, GlobalMessageType.MSG_TYPE_ERROR);\n    }\n    createCard(paymentDetails, cardLabels) {\n        return {\n            title: paymentDetails.defaultPayment\n                ? cardLabels.textDefaultPaymentMethod\n                : '',\n            textBold: paymentDetails.accountHolderName,\n            text: [paymentDetails.cardNumber, cardLabels.textExpires],\n            img: this.getCardIcon(paymentDetails.cardType.code),\n            actions: [{ name: cardLabels.textUseThisPayment, event: 'send' }],\n            header: this.selectedPayment && this.selectedPayment.id === paymentDetails.id\n                ? cardLabels.textSelected\n                : undefined,\n        };\n    }\n    goNext() {\n        this.setPaymentDetails({\n            paymentDetails: this.selectedPayment,\n            isNewPayment: false,\n        });\n    }\n    goPrevious() {\n        this.routingService.go(this.checkoutStepUrlPrevious);\n    }\n    /**\n     * @deprecated since version 1.3\n     * This method will no longer be in use. Use goNext() instead.\n     * TODO(issue:#4992) deprecated since 1.3\n     */\n    next() {\n        this.goNext();\n    }\n    /**\n     * @deprecated since version 1.3\n     * This method will no longer be in use. Use goPrevious() instead.\n     * TODO(issue:#4992) deprecated since 1.3\n     */\n    back() {\n        this.goPrevious();\n    }\n    /**\n     * @deprecated since version 1.3\n     * This method will no longer be in use. Use selectPaymentMethod() instead.\n     * TODO(issue:#4992) deprecated since 1.3\n     */\n    paymentMethodSelected(paymentDetails) {\n        this.selectPaymentMethod(paymentDetails);\n    }\n};\nPaymentMethodComponent.ctorParameters = () => [\n    { type: UserPaymentService },\n    { type: CheckoutService },\n    { type: CheckoutDeliveryService },\n    { type: CheckoutPaymentService },\n    { type: GlobalMessageService },\n    { type: RoutingService },\n    { type: CheckoutConfigService },\n    { type: ActivatedRoute },\n    { type: TranslationService },\n    { type: CartService }\n];\nPaymentMethodComponent = __decorate([\n    Component({\n        selector: 'cx-payment-method',\n        template: \"<ng-container *ngIf=\\\"existingPaymentMethods$ | async as existingPaymentMethods\\\">\\n  <h3 class=\\\"cx-checkout-title d-none d-lg-block d-xl-block\\\">\\n    {{ 'paymentForm.payment' | cxTranslate }}\\n  </h3>\\n  <ng-container *ngIf=\\\"!(isLoading$ | async); else loading\\\">\\n    <ng-container\\n      *ngIf=\\\"\\n        (existingPaymentMethods$ | async).length &&\\n          !newPaymentFormManuallyOpened;\\n        else newPaymentForm\\n      \\\"\\n    >\\n      <p class=\\\"cx-checkout-text\\\">\\n        {{ 'paymentForm.choosePaymentMethod' | cxTranslate }}\\n      </p>\\n      <div class=\\\"cx-checkout-btns row\\\">\\n        <div class=\\\"col-md-12 col-lg-6\\\">\\n          <button\\n            class=\\\"btn btn-block btn-action\\\"\\n            (click)=\\\"showNewPaymentForm()\\\"\\n          >\\n            {{ 'paymentForm.addNewPayment' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"cx-checkout-body row\\\">\\n        <div\\n          class=\\\"cx-payment-card col-md-12 col-lg-6\\\"\\n          *ngFor=\\\"let method of existingPaymentMethods; let i = index\\\"\\n        >\\n          <div class=\\\"cx-payment-card-inner\\\">\\n            <cx-card\\n              [border]=\\\"true\\\"\\n              [fitToContainer]=\\\"true\\\"\\n              [content]=\\\"getCardContent(method) | async\\\"\\n              (sendCard)=\\\"paymentMethodSelected(method)\\\"\\n            ></cx-card>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"row cx-checkout-btns\\\">\\n        <div class=\\\"col-md-12 col-lg-6\\\">\\n          <button class=\\\"btn btn-block btn-action\\\" (click)=\\\"back()\\\">\\n            {{ 'common.back' | cxTranslate }}\\n          </button>\\n        </div>\\n        <div class=\\\"col-md-12 col-lg-6\\\">\\n          <button\\n            class=\\\"btn btn-block btn-primary\\\"\\n            [disabled]=\\\"!selectedPayment\\\"\\n            (click)=\\\"next()\\\"\\n          >\\n            {{ 'common.continue' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </ng-container>\\n\\n    <ng-template #newPaymentForm>\\n      <cx-payment-form\\n        (setPaymentDetails)=\\\"setPaymentDetails($event)\\\"\\n        (closeForm)=\\\"hideNewPaymentForm()\\\"\\n        (goBack)=\\\"back()\\\"\\n        [paymentMethodsCount]=\\\"existingPaymentMethods?.length || 0\\\"\\n        [setAsDefaultField]=\\\"!isGuestCheckout\\\"\\n      ></cx-payment-form>\\n    </ng-template>\\n  </ng-container>\\n\\n  <ng-template #loading>\\n    <div class=\\\"cx-spinner\\\"><cx-spinner></cx-spinner></div>\\n  </ng-template>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], PaymentMethodComponent);\n\nlet PaymentMethodModule = class PaymentMethodModule {\n};\nPaymentMethodModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            PaymentFormModule,\n            CardModule,\n            SpinnerModule,\n            I18nModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutPaymentDetails: {\n                        component: PaymentMethodComponent,\n                        guards: [\n                            CheckoutAuthGuard,\n                            CartNotEmptyGuard,\n                            ShippingAddressSetGuard,\n                            DeliveryModeSetGuard,\n                        ],\n                    },\n                },\n            }),\n        ],\n        providers: [UserService],\n        declarations: [PaymentMethodComponent],\n        entryComponents: [PaymentMethodComponent],\n        exports: [PaymentMethodComponent],\n    })\n], PaymentMethodModule);\n\nlet PlaceOrderComponent = class PlaceOrderComponent {\n    constructor(checkoutService, routingService) {\n        this.checkoutService = checkoutService;\n        this.routingService = routingService;\n        this.tAndCToggler = false;\n    }\n    toggleTAndC() {\n        this.tAndCToggler = !this.tAndCToggler;\n    }\n    placeOrder() {\n        this.checkoutService.placeOrder();\n    }\n    ngOnInit() {\n        this.placeOrderSubscription = this.checkoutService\n            .getOrderDetails()\n            .pipe(filter(order => Object.keys(order).length !== 0))\n            .subscribe(() => {\n            this.routingService.go({ cxRoute: 'orderConfirmation' });\n        });\n    }\n    ngOnDestroy() {\n        if (this.placeOrderSubscription) {\n            this.placeOrderSubscription.unsubscribe();\n        }\n    }\n};\nPlaceOrderComponent.ctorParameters = () => [\n    { type: CheckoutService },\n    { type: RoutingService }\n];\nPlaceOrderComponent = __decorate([\n    Component({\n        selector: 'cx-place-order',\n        template: \"<div class=\\\"cx-place-order-form form-check\\\">\\n  <label>\\n    <input class=\\\"form-check-input\\\" type=\\\"checkbox\\\" (change)=\\\"toggleTAndC()\\\" />\\n    <span class=\\\"form-check-label\\\">\\n      {{ 'checkoutReview.confirmThatRead' | cxTranslate }}\\n      <a\\n        [routerLink]=\\\"{ cxRoute: 'termsAndConditions' } | cxUrl\\\"\\n        class=\\\"cx-tc-link\\\"\\n        target=\\\"_blank\\\"\\n      >\\n        {{ 'checkoutReview.termsAndConditions' | cxTranslate }}\\n      </a>\\n    </span>\\n  </label>\\n</div>\\n<button\\n  [disabled]=\\\"!tAndCToggler\\\"\\n  (click)=\\\"placeOrder()\\\"\\n  class=\\\"btn btn-primary btn-block\\\"\\n>\\n  {{ 'checkoutReview.placeOrder' | cxTranslate }}\\n</button>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], PlaceOrderComponent);\n\nlet PlaceOrderModule = class PlaceOrderModule {\n};\nPlaceOrderModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            UrlModule,\n            I18nModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutPlaceOrder: {\n                        component: PlaceOrderComponent,\n                        guards: [CheckoutAuthGuard, CartNotEmptyGuard],\n                    },\n                },\n            }),\n        ],\n        declarations: [PlaceOrderComponent],\n        entryComponents: [PlaceOrderComponent],\n        exports: [PlaceOrderComponent],\n    })\n], PlaceOrderModule);\n\nlet PaymentDetailsSetGuard = class PaymentDetailsSetGuard {\n    constructor(checkoutDetailsService, checkoutConfigService, routingConfigService, router) {\n        this.checkoutDetailsService = checkoutDetailsService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.routingConfigService = routingConfigService;\n        this.router = router;\n    }\n    canActivate() {\n        const checkoutStep = this.checkoutConfigService.getCheckoutStep(CheckoutStepType.PAYMENT_DETAILS);\n        if (!checkoutStep && isDevMode()) {\n            console.warn(`Missing step with type ${CheckoutStepType.PAYMENT_DETAILS} in checkout configuration.`);\n        }\n        return this.checkoutDetailsService\n            .getPaymentDetails()\n            .pipe(map(paymentDetails => paymentDetails && Object.keys(paymentDetails).length !== 0\n            ? true\n            : this.router.parseUrl(checkoutStep &&\n                this.routingConfigService.getRouteConfig(checkoutStep.routeName).paths[0])));\n    }\n};\nPaymentDetailsSetGuard.ctorParameters = () => [\n    { type: CheckoutDetailsService },\n    { type: CheckoutConfigService },\n    { type: RoutingConfigService },\n    { type: Router }\n];\nPaymentDetailsSetGuard.ɵprov = ɵɵdefineInjectable({ factory: function PaymentDetailsSetGuard_Factory() { return new PaymentDetailsSetGuard(ɵɵinject(CheckoutDetailsService), ɵɵinject(CheckoutConfigService), ɵɵinject(RoutingConfigService), ɵɵinject(Router)); }, token: PaymentDetailsSetGuard, providedIn: \"root\" });\nPaymentDetailsSetGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], PaymentDetailsSetGuard);\n\nlet ReviewSubmitComponent = class ReviewSubmitComponent {\n    constructor(checkoutDeliveryService, checkoutPaymentService, userAddressService, cartService, translation, checkoutConfigService, promotionService) {\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.checkoutPaymentService = checkoutPaymentService;\n        this.userAddressService = userAddressService;\n        this.cartService = cartService;\n        this.translation = translation;\n        this.checkoutConfigService = checkoutConfigService;\n        this.promotionService = promotionService;\n        this.checkoutStepType = CheckoutStepType;\n        this.promotionLocation = PromotionLocation.ActiveCart;\n    }\n    ngOnInit() {\n        this.cart$ = this.cartService.getActive();\n        this.entries$ = this.cartService.getEntries();\n        this.deliveryAddress$ = this.checkoutDeliveryService.getDeliveryAddress();\n        this.paymentDetails$ = this.checkoutPaymentService.getPaymentDetails();\n        this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);\n        this.deliveryMode$ = this.checkoutDeliveryService\n            .getSelectedDeliveryMode()\n            .pipe(tap((selected) => {\n            if (selected === null) {\n                this.checkoutDeliveryService.loadSupportedDeliveryModes();\n            }\n        }));\n        this.countryName$ = this.deliveryAddress$.pipe(switchMap((address) => this.userAddressService.getCountry(address.country.isocode)), tap((country) => {\n            if (country === null) {\n                this.userAddressService.loadDeliveryCountries();\n            }\n        }), map((country) => country && country.name));\n    }\n    getShippingAddressCard(deliveryAddress, countryName) {\n        return combineLatest([\n            this.translation.translate('addressCard.shipTo'),\n        ]).pipe(map(([textTitle]) => {\n            if (!countryName) {\n                countryName = deliveryAddress.country.isocode;\n            }\n            let region = '';\n            if (deliveryAddress.region && deliveryAddress.region.isocode) {\n                region = deliveryAddress.region.isocode + ', ';\n            }\n            return {\n                title: textTitle,\n                textBold: deliveryAddress.firstName + ' ' + deliveryAddress.lastName,\n                text: [\n                    deliveryAddress.line1,\n                    deliveryAddress.line2,\n                    deliveryAddress.town + ', ' + region + countryName,\n                    deliveryAddress.postalCode,\n                    deliveryAddress.phone,\n                ],\n            };\n        }));\n    }\n    getDeliveryModeCard(deliveryMode) {\n        return combineLatest([\n            this.translation.translate('checkoutShipping.shippingMethod'),\n        ]).pipe(map(([textTitle]) => {\n            return {\n                title: textTitle,\n                textBold: deliveryMode.name,\n                text: [deliveryMode.description],\n            };\n        }));\n    }\n    getPaymentMethodCard(paymentDetails) {\n        return combineLatest([\n            this.translation.translate('paymentForm.payment'),\n            this.translation.translate('paymentCard.expires', {\n                month: paymentDetails.expiryMonth,\n                year: paymentDetails.expiryYear,\n            }),\n        ]).pipe(map(([textTitle, textExpires]) => {\n            return {\n                title: textTitle,\n                textBold: paymentDetails.accountHolderName,\n                text: [paymentDetails.cardNumber, textExpires],\n            };\n        }));\n    }\n    getCheckoutStepUrl(stepType) {\n        // TODO(issue:#4121) Deprecated since 1.1.0\n        if (this.checkoutConfigService) {\n            const step = this.checkoutConfigService.getCheckoutStep(stepType);\n            return step && step.routeName;\n        }\n    }\n};\nReviewSubmitComponent.ctorParameters = () => [\n    { type: CheckoutDeliveryService },\n    { type: CheckoutPaymentService },\n    { type: UserAddressService },\n    { type: CartService },\n    { type: TranslationService },\n    { type: CheckoutConfigService },\n    { type: PromotionService }\n];\nReviewSubmitComponent = __decorate([\n    Component({\n        selector: 'cx-review-submit',\n        template: \"<div class=\\\"cx-review\\\">\\n  <!-- TITLE -->\\n  <h3 class=\\\"cx-review-title d-none d-lg-block d-xl-block\\\">\\n    {{ 'checkoutReview.review' | cxTranslate }}\\n  </h3>\\n  <div class=\\\"cx-review-summary row\\\">\\n    <!-- SHIPPING ADDRESS SECTION -->\\n    <div class=\\\"col-md-12 col-lg-6 col-xl-4\\\">\\n      <div class=\\\"cx-review-summary-wrapper\\\">\\n        <div class=\\\"cx-review-summary-card cx-review-card-address\\\">\\n          <cx-card\\n            [content]=\\\"\\n              getShippingAddressCard(\\n                deliveryAddress$ | async,\\n                countryName$ | async\\n              ) | async\\n            \\\"\\n          ></cx-card>\\n        </div>\\n        <div *cxFeatureLevel=\\\"'1.1'\\\" class=\\\"cx-review-summary-edit-step\\\">\\n          <a\\n            [routerLink]=\\\"\\n              {\\n                cxRoute: getCheckoutStepUrl(checkoutStepType.SHIPPING_ADDRESS)\\n              } | cxUrl\\n            \\\"\\n            >{{ 'checkoutReview.editShippingAddress' | cxTranslate }}</a\\n          >\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- DELIVERY MODE SECTION -->\\n    <div class=\\\"col-md-12 col-lg-6 col-xl-4\\\">\\n      <div class=\\\"cx-review-summary-wrapper\\\">\\n        <div class=\\\"cx-review-summary-card cx-review-card-shipping\\\">\\n          <cx-card\\n            *ngIf=\\\"deliveryMode$ | async as deliveryMode\\\"\\n            [content]=\\\"getDeliveryModeCard(deliveryMode) | async\\\"\\n          ></cx-card>\\n        </div>\\n        <div *cxFeatureLevel=\\\"'1.1'\\\" class=\\\"cx-review-summary-edit-step\\\">\\n          <a\\n            [routerLink]=\\\"\\n              { cxRoute: getCheckoutStepUrl(checkoutStepType.DELIVERY_MODE) }\\n                | cxUrl\\n            \\\"\\n            >{{ 'checkoutReview.editShippingMethod' | cxTranslate }}</a\\n          >\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- PAYMENT METHOD SECTION -->\\n    <div class=\\\"col-md-12 col-lg-6 col-xl-4\\\">\\n      <div class=\\\"cx-review-summary-wrapper\\\">\\n        <div class=\\\"cx-review-summary-card cx-review-card-payment\\\">\\n          <cx-card\\n            [content]=\\\"getPaymentMethodCard(paymentDetails$ | async) | async\\\"\\n          ></cx-card>\\n        </div>\\n        <div *cxFeatureLevel=\\\"'1.1'\\\" class=\\\"cx-review-summary-edit-step\\\">\\n          <a\\n            [routerLink]=\\\"\\n              { cxRoute: getCheckoutStepUrl(checkoutStepType.PAYMENT_DETAILS) }\\n                | cxUrl\\n            \\\"\\n            >{{ 'checkoutReview.editPaymentMethod' | cxTranslate }}</a\\n          >\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <!-- CART ITEM SECTION -->\\n  <ng-container *ngIf=\\\"cart$ | async as cart\\\">\\n    <div class=\\\"cx-review-cart-total d-none d-lg-block d-xl-block\\\">\\n      {{\\n        'cartItems.cartTotal'\\n          | cxTranslate: { count: cart.deliveryItemsQuantity }\\n      }}:\\n      {{ cart.totalPrice?.formattedValue }}\\n    </div>\\n    <h4 class=\\\"cx-review-cart-heading d-block d-lg-none d-xl-none\\\">\\n      {{ 'checkoutReview.placeOrder' | cxTranslate }}\\n    </h4>\\n    <div\\n      class=\\\"cx-review-cart-item col-md-12\\\"\\n      *ngIf=\\\"entries$ | async as entries\\\"\\n    >\\n      <ng-container *cxFeatureLevel=\\\"'!1.5'\\\">\\n        <cx-cart-item-list\\n          [items]=\\\"entries\\\"\\n          [readonly]=\\\"true\\\"\\n          [potentialProductPromotions]=\\\"cart.potentialProductPromotions\\\"\\n        ></cx-cart-item-list>\\n      </ng-container>\\n\\n      <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n        <ng-container *ngIf=\\\"orderPromotions$ | async as orderPromotions\\\">\\n          <cx-promotions [promotions]=\\\"orderPromotions\\\"></cx-promotions>\\n        </ng-container>\\n\\n        <cx-cart-item-list\\n          [items]=\\\"entries\\\"\\n          [readonly]=\\\"true\\\"\\n          [promotionLocation]=\\\"promotionLocation\\\"\\n        ></cx-cart-item-list>\\n      </ng-container>\\n    </div>\\n  </ng-container>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ReviewSubmitComponent);\n\nlet ReviewSubmitModule = class ReviewSubmitModule {\n};\nReviewSubmitModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CardModule,\n            CartSharedModule,\n            I18nModule,\n            UrlModule,\n            RouterModule,\n            PromotionsModule,\n            FeaturesConfigModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutReviewOrder: {\n                        component: ReviewSubmitComponent,\n                        guards: [\n                            CheckoutAuthGuard,\n                            CartNotEmptyGuard,\n                            ShippingAddressSetGuard,\n                            DeliveryModeSetGuard,\n                            PaymentDetailsSetGuard,\n                        ],\n                    },\n                },\n            }),\n        ],\n        declarations: [ReviewSubmitComponent],\n        entryComponents: [ReviewSubmitComponent],\n        exports: [ReviewSubmitComponent],\n    })\n], ReviewSubmitModule);\n\nlet AddressFormComponent = class AddressFormComponent {\n    constructor(fb, checkoutDeliveryService, userService, userAddressService, globalMessageService, modalService) {\n        this.fb = fb;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.userService = userService;\n        this.userAddressService = userAddressService;\n        this.globalMessageService = globalMessageService;\n        this.modalService = modalService;\n        this.selectedCountry$ = new BehaviorSubject('');\n        this.showCancelBtn = true;\n        this.submitAddress = new EventEmitter();\n        this.backToAddress = new EventEmitter();\n        this.address = this.fb.group({\n            defaultAddress: [false],\n            titleCode: [''],\n            firstName: ['', Validators.required],\n            lastName: ['', Validators.required],\n            line1: ['', Validators.required],\n            line2: [''],\n            town: ['', Validators.required],\n            region: this.fb.group({\n                isocode: [null, Validators.required],\n            }),\n            country: this.fb.group({\n                isocode: [null, Validators.required],\n            }),\n            postalCode: ['', Validators.required],\n            phone: '',\n        });\n    }\n    ngOnInit() {\n        // Fetching countries\n        this.countries$ = this.userAddressService.getDeliveryCountries().pipe(tap(countries => {\n            if (Object.keys(countries).length === 0) {\n                this.userAddressService.loadDeliveryCountries();\n            }\n        }));\n        // Fetching titles\n        this.titles$ = this.userService.getTitles().pipe(tap(titles => {\n            if (Object.keys(titles).length === 0) {\n                this.userService.loadTitles();\n            }\n        }), map(titles => {\n            titles.sort(sortTitles);\n            const noneTitle = { code: '', name: 'Title' };\n            return [noneTitle, ...titles];\n        }));\n        // Fetching regions\n        this.regions$ = this.selectedCountry$.pipe(switchMap(country => this.userAddressService.getRegions(country)), tap(regions => {\n            const regionControl = this.address.get('region.isocode');\n            if (regions && regions.length > 0) {\n                regionControl.enable();\n            }\n            else {\n                regionControl.disable();\n            }\n        }));\n        // verify the new added address\n        this.addressVerifySub = this.checkoutDeliveryService\n            .getAddressVerificationResults()\n            .subscribe((results) => {\n            if (results.decision === 'FAIL') {\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n            }\n            else if (results.decision === 'ACCEPT') {\n                this.submitAddress.emit(this.address.value);\n            }\n            else if (results.decision === 'REJECT') {\n                // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)\n                if (results.errors.errors.some(error => error.subject === 'titleCode')) {\n                    this.globalMessageService.add({ key: 'addressForm.titleRequired' }, GlobalMessageType.MSG_TYPE_ERROR);\n                }\n                else {\n                    this.globalMessageService.add({ key: 'addressForm.invalidAddress' }, GlobalMessageType.MSG_TYPE_ERROR);\n                }\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n            }\n            else if (results.decision === 'REVIEW') {\n                this.openSuggestedAddress(results);\n            }\n        });\n        if (this.addressData && Object.keys(this.addressData).length !== 0) {\n            this.address.patchValue(this.addressData);\n            this.countrySelected(this.addressData.country);\n            if (this.addressData.region) {\n                this.regionSelected(this.addressData.region);\n            }\n        }\n    }\n    titleSelected(title) {\n        this.address['controls'].titleCode.setValue(title.code);\n    }\n    countrySelected(country) {\n        this.address['controls'].country['controls'].isocode.setValue(country.isocode);\n        this.selectedCountry$.next(country.isocode);\n    }\n    regionSelected(region) {\n        this.address['controls'].region['controls'].isocode.setValue(region.isocode);\n    }\n    toggleDefaultAddress() {\n        this.address['controls'].defaultAddress.setValue(this.address.value.defaultAddress);\n    }\n    back() {\n        this.backToAddress.emit();\n    }\n    verifyAddress() {\n        if (this.address.controls['region'].value.isocode) {\n            this.regionsSub = this.regions$.pipe(take(1)).subscribe(regions => {\n                const obj = regions.find(region => region.isocode === this.address.controls['region'].value.isocode);\n                Object.assign(this.address.value.region, {\n                    isocodeShort: obj.isocodeShort,\n                });\n            });\n        }\n        if (this.address.dirty) {\n            this.checkoutDeliveryService.verifyAddress(this.address.value);\n        }\n        else {\n            // address form value not changed\n            // ignore duplicate address\n            this.submitAddress.emit(undefined);\n        }\n    }\n    openSuggestedAddress(results) {\n        if (!this.suggestedAddressModalRef) {\n            this.suggestedAddressModalRef = this.modalService.open(SuggestedAddressDialogComponent, { centered: true, size: 'lg' });\n            this.suggestedAddressModalRef.componentInstance.enteredAddress = this.address.value;\n            this.suggestedAddressModalRef.componentInstance.suggestedAddresses =\n                results.suggestedAddresses;\n            this.suggestedAddressModalRef.result\n                .then(address => {\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n                if (address) {\n                    address = Object.assign({\n                        titleCode: this.address.value.titleCode,\n                        phone: this.address.value.phone,\n                        selected: true,\n                    }, address);\n                    this.submitAddress.emit(address);\n                }\n                this.suggestedAddressModalRef = null;\n            })\n                .catch(() => {\n                // this  callback is called when modal is closed with Esc key or clicking backdrop\n                this.checkoutDeliveryService.clearAddressVerificationResults();\n                const address = Object.assign({\n                    selected: true,\n                }, this.address.value);\n                this.submitAddress.emit(address);\n                this.suggestedAddressModalRef = null;\n            });\n        }\n    }\n    ngOnDestroy() {\n        this.checkoutDeliveryService.clearAddressVerificationResults();\n        if (this.addressVerifySub) {\n            this.addressVerifySub.unsubscribe();\n        }\n        if (this.regionsSub) {\n            this.regionsSub.unsubscribe();\n        }\n    }\n};\nAddressFormComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: CheckoutDeliveryService },\n    { type: UserService },\n    { type: UserAddressService },\n    { type: GlobalMessageService },\n    { type: ModalService }\n];\n__decorate([\n    Input()\n], AddressFormComponent.prototype, \"addressData\", void 0);\n__decorate([\n    Input()\n], AddressFormComponent.prototype, \"actionBtnLabel\", void 0);\n__decorate([\n    Input()\n], AddressFormComponent.prototype, \"cancelBtnLabel\", void 0);\n__decorate([\n    Input()\n], AddressFormComponent.prototype, \"setAsDefaultField\", void 0);\n__decorate([\n    Input()\n], AddressFormComponent.prototype, \"showTitleCode\", void 0);\n__decorate([\n    Input()\n], AddressFormComponent.prototype, \"showCancelBtn\", void 0);\n__decorate([\n    Output()\n], AddressFormComponent.prototype, \"submitAddress\", void 0);\n__decorate([\n    Output()\n], AddressFormComponent.prototype, \"backToAddress\", void 0);\nAddressFormComponent = __decorate([\n    Component({\n        selector: 'cx-address-form',\n        template: \"<div [formGroup]=\\\"address\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12 col-lg-9\\\">\\n      <div class=\\\"form-group\\\" formGroupName=\\\"country\\\">\\n        <ng-container *ngIf=\\\"countries$ | async as countries\\\">\\n          <div *ngIf=\\\"countries.length !== 0\\\">\\n            <label aria-required=\\\"true\\\">\\n              <span class=\\\"label-content required\\\">{{\\n                'addressForm.country' | cxTranslate\\n              }}</span>\\n              <ng-select\\n                class=\\\"country-select\\\"\\n                formControlName=\\\"isocode\\\"\\n                [searchable]=\\\"true\\\"\\n                [clearable]=\\\"false\\\"\\n                [items]=\\\"countries\\\"\\n                bindLabel=\\\"name\\\"\\n                bindValue=\\\"isocode\\\"\\n                placeholder=\\\"{{ 'addressForm.selectOne' | cxTranslate }}\\\"\\n                (change)=\\\"countrySelected($event)\\\"\\n              >\\n              </ng-select>\\n            </label>\\n          </div>\\n        </ng-container>\\n      </div>\\n      <div class=\\\"form-group\\\" *ngIf=\\\"showTitleCode\\\">\\n        <ng-container *ngIf=\\\"titles$ | async as titles\\\">\\n          <div *ngIf=\\\"titles.length !== 0\\\">\\n            <label aria-required=\\\"true\\\">\\n              <span class=\\\"label-content required\\\">{{\\n                'addressForm.title' | cxTranslate\\n              }}</span>\\n              <ng-select\\n                formControlName=\\\"titleCode\\\"\\n                [searchable]=\\\"false\\\"\\n                [clearable]=\\\"false\\\"\\n                [items]=\\\"titles\\\"\\n                bindLabel=\\\"name\\\"\\n                bindValue=\\\"code\\\"\\n                (change)=\\\"titleSelected($event)\\\"\\n              >\\n              </ng-select>\\n            </label>\\n          </div>\\n        </ng-container>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content required\\\">{{\\n            'addressForm.firstName.label' | cxTranslate\\n          }}</span>\\n          <input\\n            class=\\\"form-control\\\"\\n            type=\\\"text\\\"\\n            required\\n            placeholder=\\\"{{\\n              'addressForm.firstName.placeholder' | cxTranslate\\n            }}\\\"\\n            formControlName=\\\"firstName\\\"\\n          />\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content required\\\">{{\\n            'addressForm.lastName.label' | cxTranslate\\n          }}</span>\\n          <input\\n            type=\\\"text\\\"\\n            class=\\\"form-control\\\"\\n            required\\n            placeholder=\\\"{{ 'addressForm.lastName.placeholder' | cxTranslate }}\\\"\\n            formControlName=\\\"lastName\\\"\\n          />\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content required\\\">{{\\n            'addressForm.address1' | cxTranslate\\n          }}</span>\\n          <input\\n            type=\\\"text\\\"\\n            class=\\\"form-control\\\"\\n            required\\n            placeholder=\\\"{{ 'addressForm.streetAddress' | cxTranslate }}\\\"\\n            formControlName=\\\"line1\\\"\\n          />\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'addressForm.address2' | cxTranslate\\n          }}</span>\\n          <input\\n            type=\\\"text\\\"\\n            class=\\\"form-control\\\"\\n            placeholder=\\\"{{ 'addressForm.aptSuite' | cxTranslate }}\\\"\\n            formControlName=\\\"line2\\\"\\n          />\\n        </label>\\n      </div>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"form-group col-md-6\\\">\\n          <label>\\n            <span class=\\\"label-content required\\\">{{\\n              'addressForm.city.label' | cxTranslate\\n            }}</span>\\n            <input\\n              type=\\\"text\\\"\\n              class=\\\"form-control\\\"\\n              required\\n              placeholder=\\\"{{ 'addressForm.city.placeholder' | cxTranslate }}\\\"\\n              formControlName=\\\"town\\\"\\n            />\\n          </label>\\n        </div>\\n        <div class=\\\"form-group col-md-6\\\">\\n          <ng-container\\n            *ngIf=\\\"regions$ | async as regions\\\"\\n            formGroupName=\\\"region\\\"\\n          >\\n            <div *ngIf=\\\"regions.length !== 0\\\">\\n              <label aria-required=\\\"true\\\">\\n                <span class=\\\"label-content required\\\">{{\\n                  'addressForm.state' | cxTranslate\\n                }}</span>\\n                <ng-select\\n                  class=\\\"region-select\\\"\\n                  formControlName=\\\"isocode\\\"\\n                  [searchable]=\\\"true\\\"\\n                  [clearable]=\\\"false\\\"\\n                  [items]=\\\"regions\\\"\\n                  bindLabel=\\\"{{ regions[0].name ? 'name' : 'isocode' }}\\\"\\n                  bindValue=\\\"{{ regions[0].name ? 'isocode' : 'region' }}\\\"\\n                  placeholder=\\\"{{ 'addressForm.selectOne' | cxTranslate }}\\\"\\n                  (change)=\\\"regionSelected($event)\\\"\\n                >\\n                </ng-select>\\n              </label>\\n            </div>\\n          </ng-container>\\n        </div>\\n        <div class=\\\"form-group col-md-6\\\">\\n          <label>\\n            <span class=\\\"label-content required\\\">{{\\n              'addressForm.zipCode.label' | cxTranslate\\n            }}</span>\\n            <input\\n              type=\\\"text\\\"\\n              class=\\\"form-control\\\"\\n              required\\n              placeholder=\\\"{{\\n                'addressForm.zipCode.placeholder' | cxTranslate\\n              }}\\\"\\n              formControlName=\\\"postalCode\\\"\\n            />\\n          </label>\\n        </div>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'addressForm.phoneNumber.label' | cxTranslate\\n          }}</span>\\n          <input\\n            type=\\\"text\\\"\\n            class=\\\"form-control\\\"\\n            placeholder=\\\"{{\\n              'addressForm.phoneNumber.placeholder' | cxTranslate\\n            }}\\\"\\n            formControlName=\\\"phone\\\"\\n          />\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\" *ngIf=\\\"setAsDefaultField\\\">\\n        <div class=\\\"form-check\\\">\\n          <label>\\n            <input\\n              type=\\\"checkbox\\\"\\n              class=\\\"form-check-input\\\"\\n              formControlName=\\\"defaultAddress\\\"\\n              (change)=\\\"toggleDefaultAddress()\\\"\\n            />\\n            <span class=\\\"form-check-label\\\">{{\\n              'addressForm.setAsDefault' | cxTranslate\\n            }}</span>\\n          </label>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"cx-checkout-btns row\\\">\\n    <div class=\\\"col-md-12 col-lg-6\\\" *ngIf=\\\"showCancelBtn\\\">\\n      <button class=\\\"btn btn-block btn-action\\\" (click)=\\\"back()\\\">\\n        {{ cancelBtnLabel || ('addressForm.chooseAddress' | cxTranslate) }}\\n      </button>\\n    </div>\\n    <div class=\\\"col-md-12 col-lg-6\\\">\\n      <button\\n        class=\\\"btn btn-block btn-primary\\\"\\n        [disabled]=\\\"address.invalid\\\"\\n        (click)=\\\"verifyAddress()\\\"\\n      >\\n        {{ actionBtnLabel || ('common.continue' | cxTranslate) }}\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], AddressFormComponent);\n\nlet AddressFormModule = class AddressFormModule {\n};\nAddressFormModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            FormsModule,\n            RouterModule,\n            NgSelectModule,\n            IconModule,\n            I18nModule,\n            AutoFocusDirectiveModule,\n        ],\n        declarations: [AddressFormComponent, SuggestedAddressDialogComponent],\n        entryComponents: [SuggestedAddressDialogComponent],\n        exports: [AddressFormComponent, SuggestedAddressDialogComponent],\n    })\n], AddressFormModule);\n\nlet CheckoutDetailsLoadedGuard = class CheckoutDetailsLoadedGuard {\n    constructor(checkoutDetailsService) {\n        this.checkoutDetailsService = checkoutDetailsService;\n    }\n    canActivate() {\n        return this.checkoutDetailsService.getCheckoutDetailsLoaded$;\n    }\n};\nCheckoutDetailsLoadedGuard.ctorParameters = () => [\n    { type: CheckoutDetailsService }\n];\nCheckoutDetailsLoadedGuard.ɵprov = ɵɵdefineInjectable({ factory: function CheckoutDetailsLoadedGuard_Factory() { return new CheckoutDetailsLoadedGuard(ɵɵinject(CheckoutDetailsService)); }, token: CheckoutDetailsLoadedGuard, providedIn: \"root\" });\nCheckoutDetailsLoadedGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], CheckoutDetailsLoadedGuard);\n\nlet ShippingAddressComponent = class ShippingAddressComponent {\n    constructor(userAddressService, cartService, routingService, checkoutDeliveryService, checkoutConfigService, activatedRoute, translation) {\n        this.userAddressService = userAddressService;\n        this.cartService = cartService;\n        this.routingService = routingService;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.checkoutConfigService = checkoutConfigService;\n        this.activatedRoute = activatedRoute;\n        this.translation = translation;\n        this.newAddressFormManuallyOpened = false;\n        this.forceLoader = false; // this helps with smoother steps transition\n        /**\n         * @deprecated since version 1.3\n         * This variable will no longer be in use. Use cards$ observable instead.\n         * TODO(issue:#3921) deprecated since 1.3\n         */\n        this.cards = [];\n        /**\n         * @deprecated since version 1.3\n         * This variable will no longer be in use. Avoid using it.\n         * TODO(issue:#3921) deprecated since 1.3\n         */\n        this.goTo = null;\n        /**\n         * @deprecated since version 1.3\n         * This variable will no longer be in use. Use CheckoutConfigService.getNextCheckoutStepUrl(this.activatedRoute) instead.\n         * TODO(issue:#3921) deprecated since 1.3\n         */\n        this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);\n        /**\n         * @deprecated since version 1.3\n         * This variable will no longer be in use. Use CheckoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute) instead.\n         * TODO(issue:#3921) deprecated since 1.3\n         */\n        this.checkoutStepUrlPrevious = 'cart';\n        this.isGuestCheckout = false;\n    }\n    ngOnInit() {\n        this.goTo = null;\n        this.checkoutStepUrlNext = this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute);\n        this.checkoutStepUrlPrevious = 'cart';\n        this.isLoading$ = this.userAddressService.getAddressesLoading();\n        this.existingAddresses$ = this.userAddressService.getAddresses();\n        this.selectedAddress$ = this.checkoutDeliveryService.getDeliveryAddress();\n        this.cards$ = combineLatest([\n            this.existingAddresses$,\n            this.selectedAddress$,\n            this.translation.translate('checkoutAddress.defaultShippingAddress'),\n            this.translation.translate('checkoutAddress.shipToThisAddress'),\n            this.translation.translate('addressCard.selected'),\n        ]).pipe(map(([addresses, selected, textDefaultShippingAddress, textShipToThisAddress, textSelected,]) => {\n            // Select default address if none selected\n            if (addresses.length &&\n                (!selected ||\n                    Object.keys(selected).length === 0 ||\n                    !this.selectedAddress)) {\n                const defaultAddress = addresses.find(address => address.defaultAddress);\n                selected = defaultAddress;\n                this.selectAddress(defaultAddress);\n            }\n            return addresses.map(address => {\n                const card = this.getCardContent(address, selected, textDefaultShippingAddress, textShipToThisAddress, textSelected);\n                return {\n                    address,\n                    card,\n                };\n            });\n        }));\n        if (!this.cartService.isGuestCart()) {\n            this.userAddressService.loadAddresses();\n        }\n        else {\n            this.isGuestCheckout = true;\n        }\n    }\n    getCardContent(address, selected, textDefaultShippingAddress, textShipToThisAddress, textSelected) {\n        let region = '';\n        if (address.region && address.region.isocode) {\n            region = address.region.isocode + ', ';\n        }\n        return {\n            title: address.defaultAddress ? textDefaultShippingAddress : '',\n            textBold: address.firstName + ' ' + address.lastName,\n            text: [\n                address.line1,\n                address.line2,\n                address.town + ', ' + region + address.country.isocode,\n                address.postalCode,\n                address.phone,\n            ],\n            actions: [{ name: textShipToThisAddress, event: 'send' }],\n            header: selected && selected.id === address.id ? textSelected : '',\n        };\n    }\n    selectAddress(address) {\n        this.selectedAddress = address;\n        this.checkoutDeliveryService.setDeliveryAddress(address);\n    }\n    addAddress(address) {\n        // TODO(issue:#3921) deprecated since 1.3 - Remove temp address\n        const tempAddress = address['address']\n            ? address['address']\n            : address;\n        const selectedSub = this.selectedAddress$.subscribe(selected => {\n            if (selected && selected.shippingAddress) {\n                this.goNext();\n                selectedSub.unsubscribe();\n            }\n        });\n        this.forceLoader = true;\n        // TODO(issue:#3921) deprecated since 1.3 - Remove this condition\n        if (address['address'] || address['newAddress']) {\n            address['newAddress']\n                ? this.checkoutDeliveryService.createAndSetAddress(tempAddress)\n                : this.selectAddress(tempAddress);\n        }\n        else {\n            // TODO(issue:#3921) deprecated since 1.3 - Use instead of condition\n            this.existingAddresses$.pipe(take(1)).subscribe(addresses => {\n                addresses.includes(tempAddress)\n                    ? this.selectAddress(tempAddress)\n                    : this.checkoutDeliveryService.createAndSetAddress(tempAddress);\n            });\n        }\n    }\n    showNewAddressForm() {\n        this.newAddressFormManuallyOpened = true;\n    }\n    hideNewAddressForm(goPrevious = false) {\n        this.newAddressFormManuallyOpened = false;\n        if (goPrevious) {\n            this.goPrevious();\n        }\n    }\n    goNext() {\n        this.routingService.go(this.checkoutConfigService.getNextCheckoutStepUrl(this.activatedRoute));\n    }\n    goPrevious() {\n        this.routingService.go(this.checkoutConfigService.getPreviousCheckoutStepUrl(this.activatedRoute) || 'cart');\n    }\n    /**\n     * @deprecated since version 1.3\n     * This variable will no longer be in use. Use selectAddress(address: Address) instead.\n     * TODO(issue:#3921) deprecated since 1.3\n     */\n    addressSelected(address) {\n        this.selectAddress(address);\n    }\n    /**\n     * @deprecated since version 1.3\n     * This method will no longer be in use. Use goPrevious() instead.\n     * TODO(issue:#3921) deprecated since 1.3\n     */\n    back() {\n        this.goPrevious();\n    }\n    /**\n     * @deprecated since version 1.3\n     * This method will no longer be in use. Use goNext() instead.\n     * TODO(issue:#3921) deprecated since 1.3\n     */\n    next() {\n        this.goNext();\n    }\n    /**\n     * @deprecated since version 1.3\n     * This method will no longer be in use. Use addAddress(address: Address) instead.\n     * TODO(issue:#3921) deprecated since 1.3\n     */\n    addNewAddress(address) {\n        this.addAddress(address);\n    }\n    /**\n     * @deprecated since version 1.3\n     * This method will no longer be in use. Remove.\n     * TODO(issue:#3921) deprecated since 1.3\n     */\n    ngOnDestroy() {\n        if (this.setAddressSub) {\n            this.setAddressSub.unsubscribe();\n        }\n        if (this.selectedAddressSub) {\n            this.selectedAddressSub.unsubscribe();\n        }\n    }\n};\nShippingAddressComponent.ctorParameters = () => [\n    { type: UserAddressService },\n    { type: CartService },\n    { type: RoutingService },\n    { type: CheckoutDeliveryService },\n    { type: CheckoutConfigService },\n    { type: ActivatedRoute },\n    { type: TranslationService }\n];\nShippingAddressComponent = __decorate([\n    Component({\n        selector: 'cx-shipping-address',\n        template: \"<ng-container *ngIf=\\\"cards$ | async as cards\\\">\\n  <h3 class=\\\"cx-checkout-title d-none d-lg-block d-xl-block\\\">\\n    {{ 'checkoutAddress.shippingAddress' | cxTranslate }}\\n  </h3>\\n  <ng-container *ngIf=\\\"!forceLoader && !(isLoading$ | async); else loading\\\">\\n    <ng-container\\n      *ngIf=\\\"\\n        cards?.length && !newAddressFormManuallyOpened;\\n        else newAddressForm\\n      \\\"\\n    >\\n      <p class=\\\"cx-checkout-text\\\">\\n        {{ 'checkoutAddress.selectYourShippingAddress' | cxTranslate }}\\n      </p>\\n      <div class=\\\"cx-checkout-btns row\\\">\\n        <div class=\\\"col-sm-12 col-md-12 col-lg-6\\\">\\n          <button\\n            class=\\\"btn btn-block btn-action\\\"\\n            (click)=\\\"showNewAddressForm()\\\"\\n          >\\n            {{ 'checkoutAddress.addNewAddress' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"cx-checkout-body row\\\">\\n        <div\\n          class=\\\"cx-shipping-address-card col-md-12 col-lg-6\\\"\\n          *ngFor=\\\"let card of cards; let i = index\\\"\\n        >\\n          <div\\n            class=\\\"cx-shipping-address-card-inner\\\"\\n            (click)=\\\"addressSelected(card.address)\\\"\\n          >\\n            <cx-card\\n              [border]=\\\"true\\\"\\n              [fitToContainer]=\\\"true\\\"\\n              [content]=\\\"card.card\\\"\\n              (sendCard)=\\\"addressSelected(card.address)\\\"\\n            ></cx-card>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"cx-checkout-btns row\\\">\\n        <div class=\\\"col-md-12 col-lg-6\\\">\\n          <button class=\\\"cx-btn btn btn-block btn-action\\\" (click)=\\\"back()\\\">\\n            {{ 'checkout.backToCart' | cxTranslate }}\\n          </button>\\n        </div>\\n        <div class=\\\"col-md-12 col-lg-6\\\">\\n          <button\\n            class=\\\"cx-btn btn btn-block btn-primary\\\"\\n            [disabled]=\\\"\\n              (!selectedAddress || !selectedAddress.id) &&\\n              !(selectedAddress$ | async)?.shippingAddress\\n            \\\"\\n            (click)=\\\"next()\\\"\\n          >\\n            {{ 'common.continue' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </ng-container>\\n\\n    <ng-template #newAddressForm>\\n      <ng-container *ngIf=\\\"cards.length; else initialAddressForm\\\">\\n        <cx-address-form\\n          [showTitleCode]=\\\"true\\\"\\n          (backToAddress)=\\\"hideNewAddressForm(false)\\\"\\n          (submitAddress)=\\\"addAddress($event)\\\"\\n        ></cx-address-form>\\n      </ng-container>\\n      <ng-template #initialAddressForm>\\n        <cx-address-form\\n          [showTitleCode]=\\\"true\\\"\\n          [setAsDefaultField]=\\\"!isGuestCheckout\\\"\\n          [addressData]=\\\"setAddress\\\"\\n          cancelBtnLabel=\\\"{{ 'checkout.backToCart' | cxTranslate }}\\\"\\n          (backToAddress)=\\\"hideNewAddressForm(true)\\\"\\n          (submitAddress)=\\\"addAddress($event)\\\"\\n        ></cx-address-form>\\n      </ng-template>\\n    </ng-template>\\n  </ng-container>\\n\\n  <ng-template #loading>\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </ng-template>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ShippingAddressComponent);\n\nlet ShippingAddressModule = class ShippingAddressModule {\n};\nShippingAddressModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            AddressFormModule,\n            CardModule,\n            SpinnerModule,\n            I18nModule,\n            CheckoutProgressMobileTopModule,\n            CheckoutProgressMobileBottomModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CheckoutShippingAddress: {\n                        component: ShippingAddressComponent,\n                        guards: [\n                            CheckoutAuthGuard,\n                            CartNotEmptyGuard,\n                            CheckoutDetailsLoadedGuard,\n                        ],\n                    },\n                },\n            }),\n        ],\n        declarations: [ShippingAddressComponent],\n        entryComponents: [ShippingAddressComponent],\n        exports: [ShippingAddressComponent],\n    })\n], ShippingAddressModule);\n\nlet CheckoutComponentModule = class CheckoutComponentModule {\n};\nCheckoutComponentModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CheckoutOrchestratorModule,\n            CheckoutOrderSummaryModule,\n            CheckoutProgressModule,\n            CheckoutProgressMobileTopModule,\n            CheckoutProgressMobileBottomModule,\n            DeliveryModeModule,\n            PaymentMethodModule,\n            PlaceOrderModule,\n            PromotionsModule,\n            ReviewSubmitModule,\n            ShippingAddressModule,\n        ],\n    })\n], CheckoutComponentModule);\n\nlet NotCheckoutAuthGuard = class NotCheckoutAuthGuard {\n    constructor(routingService, authService, cartService) {\n        this.routingService = routingService;\n        this.authService = authService;\n        this.cartService = cartService;\n    }\n    canActivate() {\n        return this.authService.getUserToken().pipe(map(token => {\n            if (token.access_token) {\n                this.routingService.go({ cxRoute: 'home' });\n            }\n            else if (this.cartService.isGuestCart()) {\n                this.routingService.go({ cxRoute: 'cart' });\n                return false;\n            }\n            return !token.access_token;\n        }));\n    }\n};\nNotCheckoutAuthGuard.ctorParameters = () => [\n    { type: RoutingService },\n    { type: AuthService },\n    { type: CartService }\n];\nNotCheckoutAuthGuard.ɵprov = ɵɵdefineInjectable({ factory: function NotCheckoutAuthGuard_Factory() { return new NotCheckoutAuthGuard(ɵɵinject(RoutingService), ɵɵinject(AuthService), ɵɵinject(CartService)); }, token: NotCheckoutAuthGuard, providedIn: \"root\" });\nNotCheckoutAuthGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], NotCheckoutAuthGuard);\n\nlet HamburgerMenuService = class HamburgerMenuService {\n    constructor(router) {\n        this.isExpanded = new BehaviorSubject(false);\n        router.events\n            .pipe(filter(event => event instanceof NavigationStart))\n            .subscribe(() => {\n            this.toggle(true);\n        });\n    }\n    /**\n     * toggles the expand state of the hamburger menu\n     */\n    toggle(forceCollapse) {\n        if (forceCollapse) {\n            this.isExpanded.next(false);\n        }\n        else {\n            this.isExpanded.next(!this.isExpanded.value);\n        }\n    }\n};\nHamburgerMenuService.ctorParameters = () => [\n    { type: Router }\n];\nHamburgerMenuService.ɵprov = ɵɵdefineInjectable({ factory: function HamburgerMenuService_Factory() { return new HamburgerMenuService(ɵɵinject(Router)); }, token: HamburgerMenuService, providedIn: \"root\" });\nHamburgerMenuService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], HamburgerMenuService);\n\nlet HamburgerMenuComponent = class HamburgerMenuComponent {\n    constructor(hamburgerMenuService) {\n        this.hamburgerMenuService = hamburgerMenuService;\n    }\n    toggle() {\n        this.hamburgerMenuService.toggle();\n    }\n    get isExpanded() {\n        return this.hamburgerMenuService.isExpanded;\n    }\n};\nHamburgerMenuComponent.ctorParameters = () => [\n    { type: HamburgerMenuService }\n];\nHamburgerMenuComponent = __decorate([\n    Component({\n        selector: 'cx-hamburger-menu',\n        template: \"<button\\n  class=\\\"cx-hamburger\\\"\\n  type=\\\"button\\\"\\n  (click)=\\\"toggle()\\\"\\n  [class.is-active]=\\\"isExpanded | async\\\"\\n  [attr.aria-expanded]=\\\"isExpanded | async\\\"\\n  aria-label=\\\"Menu\\\"\\n  aria-controls=\\\"header-account-container, header-categories-container, header-locale-container\\\"\\n>\\n  <span class=\\\"hamburger-box\\\">\\n    <span class=\\\"hamburger-inner\\\"></span>\\n  </span>\\n</button>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], HamburgerMenuComponent);\n\nlet HamburgerMenuModule = class HamburgerMenuModule {\n};\nHamburgerMenuModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    HamburgerMenuComponent: {\n                        component: HamburgerMenuComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [HamburgerMenuComponent],\n        exports: [HamburgerMenuComponent],\n        entryComponents: [HamburgerMenuComponent],\n    })\n], HamburgerMenuModule);\n\nlet LayoutModule = class LayoutModule {\n};\nLayoutModule = __decorate([\n    NgModule({\n        imports: [OutletRefModule],\n        providers: [{ provide: LayoutConfig, useExisting: Config }],\n        exports: [OutletRefModule],\n    })\n], LayoutModule);\n\nlet ConsentManagementFormComponent = class ConsentManagementFormComponent {\n    constructor() {\n        this.consentGiven = false;\n        this.requiredConsents = [];\n        this.isAnonymousConsentsEnabled = false;\n        // TODO(issue:4989) Anonymous consents - remove\n        this.isLevel13 = false;\n        this.consentChanged = new EventEmitter();\n    }\n    ngOnInit() {\n        if (this.isAnonymousConsentsEnabled && this.consent) {\n            this.consentGiven = Boolean(this.consent.consentState === ANONYMOUS_CONSENT_STATUS.GIVEN);\n        }\n        else {\n            if (this.consentTemplate && this.consentTemplate.currentConsent) {\n                if (this.consentTemplate.currentConsent.consentWithdrawnDate) {\n                    this.consentGiven = false;\n                }\n                else if (this.consentTemplate.currentConsent.consentGivenDate) {\n                    this.consentGiven = true;\n                }\n            }\n        }\n    }\n    onConsentChange() {\n        this.consentGiven = !this.consentGiven;\n        this.consentChanged.emit({\n            given: this.consentGiven,\n            template: this.consentTemplate,\n        });\n    }\n    isRequired(templateId) {\n        return this.isAnonymousConsentsEnabled\n            ? this.requiredConsents.includes(templateId)\n            : false;\n    }\n};\n__decorate([\n    Input()\n], ConsentManagementFormComponent.prototype, \"consentTemplate\", void 0);\n__decorate([\n    Input()\n], ConsentManagementFormComponent.prototype, \"requiredConsents\", void 0);\n__decorate([\n    Input()\n], ConsentManagementFormComponent.prototype, \"isAnonymousConsentsEnabled\", void 0);\n__decorate([\n    Input()\n], ConsentManagementFormComponent.prototype, \"consent\", void 0);\n__decorate([\n    Input()\n], ConsentManagementFormComponent.prototype, \"isLevel13\", void 0);\n__decorate([\n    Output()\n], ConsentManagementFormComponent.prototype, \"consentChanged\", void 0);\nConsentManagementFormComponent = __decorate([\n    Component({\n        selector: 'cx-consent-management-form',\n        template: \"<div class=\\\"form-check\\\">\\n  <label>\\n    <input\\n      type=\\\"checkbox\\\"\\n      class=\\\"form-check-input\\\"\\n      (change)=\\\"onConsentChange()\\\"\\n      [checked]=\\\"consentGiven\\\"\\n      [disabled]=\\\"isRequired(consentTemplate?.id)\\\"\\n    />\\n    <!-- TODO(issue:4989) Anonymous consents - remove the *ngIf=\\\"isLevel13\\\" -->\\n    <span *ngIf=\\\"isLevel13\\\" class=\\\"form-check-label cx-be-bold\\\">\\n      {{ consentTemplate?.name }}\\n    </span>\\n    <!-- TODO(issue:4989) Anonymous consents - remove the *ngIf=\\\"isLevel13\\\" -->\\n    <br *ngIf=\\\"isLevel13\\\" />\\n    <span class=\\\"form-check-label\\\">\\n      {{ consentTemplate?.description }}\\n    </span>\\n  </label>\\n</div>\\n\"\n    })\n], ConsentManagementFormComponent);\n\nlet ConsentManagementComponent = class ConsentManagementComponent {\n    constructor(userConsentService, globalMessageService, anonymousConsentsConfig, anonymousConsentsService, authService) {\n        this.userConsentService = userConsentService;\n        this.globalMessageService = globalMessageService;\n        this.anonymousConsentsConfig = anonymousConsentsConfig;\n        this.anonymousConsentsService = anonymousConsentsService;\n        this.authService = authService;\n        this.subscriptions = new Subscription();\n        this.allConsentsLoading = new BehaviorSubject(false);\n        this.requiredConsents = [];\n        this.isAnonymousConsentsEnabled = isFeatureEnabled(this.anonymousConsentsConfig, ANONYMOUS_CONSENTS_FEATURE);\n        // TODO(issue:4989) Anonymous consents - remove\n        this.isLevel13 = isFeatureLevel(this.anonymousConsentsConfig, '1.3');\n    }\n    ngOnInit() {\n        this.loading$ = combineLatest([\n            this.userConsentService.getConsentsResultLoading(),\n            this.userConsentService.getGiveConsentResultLoading(),\n            this.userConsentService.getWithdrawConsentResultLoading(),\n            this.authService.isUserLoggedIn(),\n            this.allConsentsLoading,\n        ]).pipe(map(([consentLoading, giveConsentLoading, withdrawConsentLoading, isUserLoggedIn, allConsentsLoading,]) => consentLoading ||\n            giveConsentLoading ||\n            withdrawConsentLoading ||\n            !isUserLoggedIn ||\n            allConsentsLoading));\n        this.consentListInit();\n        this.giveConsentInit();\n        this.withdrawConsentInit();\n    }\n    consentListInit() {\n        this.templateList$ = this.userConsentService.getConsents().pipe(withLatestFrom(this.anonymousConsentsService.getTemplates(), this.authService.isUserLoggedIn()), filter(([_templateList, _anonymousTemplates, isUserLoggedIn]) => isUserLoggedIn), tap(([templateList, _anonymousTemplates]) => {\n            if (!this.consentsExists(templateList)) {\n                this.userConsentService.loadConsents();\n            }\n        }), map(([templateList, anonymousTemplates]) => {\n            if (!this.isAnonymousConsentsEnabled) {\n                return templateList;\n            }\n            if (Boolean(this.anonymousConsentsConfig.anonymousConsents)) {\n                if (Boolean(this.anonymousConsentsConfig.anonymousConsents.requiredConsents)) {\n                    this.requiredConsents = this.anonymousConsentsConfig.anonymousConsents.requiredConsents;\n                }\n                if (Boolean(this.anonymousConsentsConfig.anonymousConsents\n                    .consentManagementPage)) {\n                    return this.hideAnonymousConsents(templateList, anonymousTemplates);\n                }\n            }\n            return templateList;\n        }));\n    }\n    hideAnonymousConsents(templateList, anonymousTemplates = []) {\n        let hideTemplateIds = [];\n        if (!this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n            .showAnonymousConsents) {\n            hideTemplateIds = anonymousTemplates.map(template => template.id);\n            return this.userConsentService.filterConsentTemplates(templateList, hideTemplateIds);\n        }\n        if (Boolean(this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n            .hideConsents) &&\n            this.anonymousConsentsConfig.anonymousConsents.consentManagementPage\n                .hideConsents.length > 0) {\n            hideTemplateIds = this.anonymousConsentsConfig.anonymousConsents\n                .consentManagementPage.hideConsents;\n        }\n        return this.userConsentService.filterConsentTemplates(templateList, hideTemplateIds);\n    }\n    giveConsentInit() {\n        this.userConsentService.resetGiveConsentProcessState();\n        this.subscriptions.add(this.userConsentService\n            .getGiveConsentResultSuccess()\n            .subscribe(success => this.onConsentGivenSuccess(success)));\n    }\n    withdrawConsentInit() {\n        this.userConsentService.resetWithdrawConsentProcessState();\n        this.subscriptions.add(this.userConsentService\n            .getWithdrawConsentResultLoading()\n            .pipe(skipWhile(Boolean), withLatestFrom(this.userConsentService.getWithdrawConsentResultSuccess()), map(([, withdrawalSuccess]) => withdrawalSuccess), tap(withdrawalSuccess => {\n            if (withdrawalSuccess) {\n                this.userConsentService.loadConsents();\n            }\n        }))\n            .subscribe(withdrawalSuccess => this.onConsentWithdrawnSuccess(withdrawalSuccess)));\n    }\n    consentsExists(templateList) {\n        return Boolean(templateList) && templateList.length > 0;\n    }\n    onConsentChange({ given, template, }) {\n        if (given) {\n            this.userConsentService.giveConsent(template.id, template.version);\n        }\n        else {\n            this.userConsentService.withdrawConsent(template.currentConsent.code);\n        }\n    }\n    onConsentGivenSuccess(success) {\n        if (success) {\n            this.userConsentService.resetGiveConsentProcessState();\n            this.globalMessageService.add({ key: 'consentManagementForm.message.success.given' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n        }\n    }\n    onConsentWithdrawnSuccess(success) {\n        if (success) {\n            this.userConsentService.resetWithdrawConsentProcessState();\n            this.globalMessageService.add({ key: 'consentManagementForm.message.success.withdrawn' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n        }\n    }\n    rejectAll(templates = []) {\n        const consentsToWithdraw = [];\n        templates.forEach(template => {\n            if (this.userConsentService.isConsentGiven(template.currentConsent)) {\n                if (this.isRequiredConsent(template)) {\n                    return;\n                }\n                consentsToWithdraw.push(template);\n            }\n        });\n        this.allConsentsLoading.next(true);\n        this.subscriptions.add(this.setupWithdrawalStream(consentsToWithdraw)\n            .pipe(tap(_timesLoaded => this.allConsentsLoading.next(false)))\n            .subscribe());\n    }\n    setupWithdrawalStream(consentsToWithdraw = []) {\n        const loading$ = concat(this.userConsentService.getWithdrawConsentResultLoading()).pipe(distinctUntilChanged(), filter(loading => !loading));\n        const count$ = loading$.pipe(scan((acc, _value) => acc + 1, -1));\n        const withdraw$ = count$.pipe(tap(i => {\n            if (i < consentsToWithdraw.length) {\n                this.userConsentService.withdrawConsent(consentsToWithdraw[i].currentConsent.code);\n            }\n        }));\n        const checkTimesLoaded$ = withdraw$.pipe(filter(timesLoaded => timesLoaded === consentsToWithdraw.length));\n        return checkTimesLoaded$;\n    }\n    allowAll(templates = []) {\n        const consentsToGive = [];\n        templates.forEach(template => {\n            if (this.userConsentService.isConsentWithdrawn(template.currentConsent)) {\n                if (this.isRequiredConsent(template)) {\n                    return;\n                }\n                consentsToGive.push(template);\n            }\n        });\n        this.allConsentsLoading.next(true);\n        this.subscriptions.add(this.setupGiveStream(consentsToGive)\n            .pipe(tap(_timesLoaded => this.allConsentsLoading.next(false)))\n            .subscribe());\n    }\n    setupGiveStream(consentsToGive = []) {\n        const loading$ = concat(this.userConsentService.getGiveConsentResultLoading()).pipe(distinctUntilChanged(), filter(loading => !loading));\n        const count$ = loading$.pipe(scan((acc, _value) => acc + 1, -1));\n        const giveConsent$ = count$.pipe(tap(i => {\n            if (i < consentsToGive.length) {\n                this.userConsentService.giveConsent(consentsToGive[i].id, consentsToGive[i].version);\n            }\n        }));\n        const checkTimesLoaded$ = giveConsent$.pipe(filter(timesLoaded => timesLoaded === consentsToGive.length));\n        return checkTimesLoaded$;\n    }\n    isRequiredConsent(template) {\n        if (!this.isAnonymousConsentsEnabled) {\n            return false;\n        }\n        return (Boolean(this.anonymousConsentsConfig.anonymousConsents) &&\n            Boolean(this.anonymousConsentsConfig.anonymousConsents.requiredConsents) &&\n            this.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(template.id));\n    }\n    ngOnDestroy() {\n        this.subscriptions.unsubscribe();\n        this.allConsentsLoading.unsubscribe();\n        this.userConsentService.resetGiveConsentProcessState();\n        this.userConsentService.resetWithdrawConsentProcessState();\n    }\n};\nConsentManagementComponent.ctorParameters = () => [\n    { type: UserConsentService },\n    { type: GlobalMessageService },\n    { type: AnonymousConsentsConfig },\n    { type: AnonymousConsentsService },\n    { type: AuthService }\n];\nConsentManagementComponent = __decorate([\n    Component({\n        selector: 'cx-consent-management',\n        template: \"<!-- TODO(issue:4989) Anonymous consents - remove the wrapping `<ng-container *ngIf=\\\"isLevel13; else legacyConsentManagementPage\\\">` -->\\n<ng-container *ngIf=\\\"isLevel13; else legacyConsentManagementPage\\\">\\n  <div *ngIf=\\\"loading$ | async; else consentManagementForm\\\">\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </div>\\n\\n  <ng-template #consentManagementForm>\\n    <ng-container *ngIf=\\\"templateList$ | async as templateList\\\">\\n      <div class=\\\"cx-consent-action-links\\\">\\n        <div class=\\\"col-sm-12 col-md-8 col-lg-6\\\">\\n          <a\\n            tabindex=\\\"0\\\"\\n            class=\\\"btn-link cx-action-link\\\"\\n            (click)=\\\"rejectAll(templateList)\\\"\\n            >{{ 'consentManagementForm.clearAll' | cxTranslate }}</a\\n          >\\n          <a\\n            tabindex=\\\"0\\\"\\n            class=\\\"btn-link cx-action-link\\\"\\n            (click)=\\\"allowAll(templateList)\\\"\\n            >{{ 'consentManagementForm.selectAll' | cxTranslate }}</a\\n          >\\n        </div>\\n      </div>\\n\\n      <div class=\\\"cx-consent-toggles\\\">\\n        <div class=\\\"col-sm-12 col-md-8 col-lg-6\\\">\\n          <cx-consent-management-form\\n            *ngFor=\\\"let consentTemplate of templateList\\\"\\n            [consentTemplate]=\\\"consentTemplate\\\"\\n            [requiredConsents]=\\\"requiredConsents\\\"\\n            [isAnonymousConsentsEnabled]=\\\"isAnonymousConsentsEnabled\\\"\\n            [isLevel13]=\\\"isLevel13\\\"\\n            (consentChanged)=\\\"onConsentChange($event)\\\"\\n          ></cx-consent-management-form>\\n        </div>\\n      </div>\\n    </ng-container>\\n  </ng-template>\\n</ng-container>\\n\\n<!-- TODO(issue:4989) Anonymous consents - remove this whole `<ng-template>` -->\\n<ng-template #legacyConsentManagementPage>\\n  <div *ngIf=\\\"loading$ | async; else consentManagementForm\\\">\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </div>\\n\\n  <ng-template #consentManagementForm>\\n    <div class=\\\"row d-flex justify-content-center\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <cx-consent-management-form\\n          *ngFor=\\\"let consentTemplate of templateList$ | async\\\"\\n          [consentTemplate]=\\\"consentTemplate\\\"\\n          (consentChanged)=\\\"onConsentChange($event)\\\"\\n        ></cx-consent-management-form>\\n      </div>\\n    </div>\\n  </ng-template>\\n</ng-template>\\n\"\n    })\n], ConsentManagementComponent);\n\nlet ConsentManagementModule = class ConsentManagementModule {\n};\nConsentManagementModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            SpinnerModule,\n            I18nModule,\n            IconModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ConsentManagementComponent: {\n                        component: ConsentManagementComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n        ],\n        declarations: [ConsentManagementComponent, ConsentManagementFormComponent],\n        exports: [ConsentManagementComponent, ConsentManagementFormComponent],\n        entryComponents: [ConsentManagementComponent],\n    })\n], ConsentManagementModule);\n\nlet AnonymousConsentsModule = class AnonymousConsentsModule {\n};\nAnonymousConsentsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            I18nModule,\n            IconModule,\n            SpinnerModule,\n            ConsentManagementModule,\n        ],\n        declarations: [AnonymousConsentDialogComponent],\n        entryComponents: [AnonymousConsentDialogComponent],\n        exports: [AnonymousConsentDialogComponent],\n    })\n], AnonymousConsentsModule);\n\nlet StorefrontComponent = class StorefrontComponent {\n    constructor(hamburgerMenuService, routingService) {\n        this.hamburgerMenuService = hamburgerMenuService;\n        this.routingService = routingService;\n        this.isExpanded$ = this.hamburgerMenuService.isExpanded;\n    }\n    ngOnInit() {\n        this.navigateSubscription = this.routingService\n            .isNavigating()\n            .subscribe(val => {\n            this.startNavigating = val === true;\n            this.stopNavigating = val === false;\n        });\n    }\n    collapseMenuIfClickOutside(event) {\n        if (event.target.className.includes('is-expanded')) {\n            this.collapseMenu();\n        }\n    }\n    collapseMenu() {\n        this.hamburgerMenuService.toggle(true);\n    }\n    ngOnDestroy() {\n        if (this.navigateSubscription) {\n            this.navigateSubscription.unsubscribe();\n        }\n    }\n};\nStorefrontComponent.ctorParameters = () => [\n    { type: HamburgerMenuService },\n    { type: RoutingService }\n];\n__decorate([\n    HostBinding('class.start-navigating')\n], StorefrontComponent.prototype, \"startNavigating\", void 0);\n__decorate([\n    HostBinding('class.stop-navigating')\n], StorefrontComponent.prototype, \"stopNavigating\", void 0);\nStorefrontComponent = __decorate([\n    Component({\n        selector: 'cx-storefront',\n        template: \"<ng-template cxOutlet=\\\"cx-storefront\\\">\\n  <ng-template cxOutlet=\\\"cx-header\\\">\\n    <header\\n      [class.is-expanded]=\\\"isExpanded$ | async\\\"\\n      (keydown.escape)=\\\"collapseMenu()\\\"\\n      (click)=\\\"collapseMenuIfClickOutside($event)\\\"\\n    >\\n      <cx-page-layout section=\\\"header\\\"></cx-page-layout>\\n      <cx-page-layout section=\\\"navigation\\\"></cx-page-layout>\\n    </header>\\n    <cx-page-slot position=\\\"BottomHeaderSlot\\\"></cx-page-slot>\\n    <cx-global-message></cx-global-message>\\n  </ng-template>\\n\\n  <router-outlet></router-outlet>\\n\\n  <ng-template cxOutlet=\\\"cx-footer\\\">\\n    <footer>\\n      <cx-page-layout section=\\\"footer\\\"></cx-page-layout>\\n    </footer>\\n  </ng-template>\\n</ng-template>\\n\"\n    })\n], StorefrontComponent);\n\nlet MainModule = class MainModule {\n};\nMainModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            GlobalMessageComponentModule,\n            OutletModule,\n            OutletRefModule,\n            PwaModule,\n            PageLayoutModule,\n            SeoModule,\n            PageSlotModule,\n            AnonymousConsentsModule,\n            FeaturesConfigModule,\n        ],\n        declarations: [StorefrontComponent],\n        exports: [StorefrontComponent],\n    })\n], MainModule);\n\n/**\n * Generic carousel that renders CMS Components.\n */\nlet BannerCarouselComponent = class BannerCarouselComponent {\n    constructor(componentData, cmsService) {\n        this.componentData = componentData;\n        this.cmsService = cmsService;\n        this.componentData$ = this.componentData.data$.pipe(filter(Boolean), tap((d) => (this.theme = `${d.effect}-theme`)));\n        this.items$ = this.componentData$.pipe(map(data => data.banners.trim().split(' ')), map(codes => codes.map(code => this.cmsService.getComponentData(code))));\n        /**\n         * Adds a specific theme for the carousel. The effect can be\n         * used in CSS customisations.\n         */\n        this.theme = '';\n    }\n    /**\n     * Returns an Obervable with an Array of Observables. This is done, so that\n     * the component UI could consider to lazy load the UI components when they're\n     * in the viewpoint.\n     */\n    getItems() {\n        return this.items$;\n    }\n};\nBannerCarouselComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: CmsService }\n];\n__decorate([\n    HostBinding('class')\n], BannerCarouselComponent.prototype, \"theme\", void 0);\nBannerCarouselComponent = __decorate([\n    Component({\n        selector: 'cx-banner-carousel',\n        template: \"<cx-carousel\\n  [items]=\\\"getItems() | async\\\"\\n  [template]=\\\"template\\\"\\n  itemWidth=\\\"100%\\\"\\n  class=\\\"inline-navigation\\\"\\n></cx-carousel>\\n\\n<ng-template #template let-item=\\\"item\\\">\\n  <ng-container\\n    [cxComponentWrapper]=\\\"{\\n      flexType: item.typeCode,\\n      typeCode: item.typeCode,\\n      uid: item?.uid\\n    }\\\"\\n  >\\n  </ng-container>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], BannerCarouselComponent);\n\nlet BannerCarouselModule = class BannerCarouselModule {\n};\nBannerCarouselModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    RotatingImagesComponent: {\n                        component: BannerCarouselComponent,\n                    },\n                },\n            }),\n            PageComponentModule,\n            CarouselModule,\n            MediaModule,\n        ],\n        declarations: [BannerCarouselComponent],\n        entryComponents: [BannerCarouselComponent],\n        exports: [BannerCarouselComponent],\n    })\n], BannerCarouselModule);\n\nlet BannerComponent = class BannerComponent {\n    constructor(component) {\n        this.component = component;\n    }\n};\nBannerComponent.ctorParameters = () => [\n    { type: CmsComponentData }\n];\nBannerComponent = __decorate([\n    Component({\n        selector: 'cx-banner',\n        template: \"<ng-container *ngIf=\\\"component.data$ | async as data\\\">\\n  <cx-generic-link\\n    [url]=\\\"data.urlLink\\\"\\n    [target]=\\\"data.external ? '_blank' : null\\\"\\n    [title]=\\\"data.media?.altText\\\"\\n  >\\n    <p *ngIf=\\\"data.headline\\\" [innerHTML]=\\\"data.headline\\\"></p>\\n    <cx-media [container]=\\\"data.media\\\"></cx-media>\\n    <p *ngIf=\\\"data.content\\\" [innerHTML]=\\\"data.content\\\"></p>\\n  </cx-generic-link>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], BannerComponent);\n\nlet BannerModule = class BannerModule {\n};\nBannerModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            GenericLinkModule,\n            MediaModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    SimpleResponsiveBannerComponent: {\n                        component: BannerComponent,\n                    },\n                    BannerComponent: {\n                        component: BannerComponent,\n                    },\n                    SimpleBannerComponent: {\n                        component: BannerComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [BannerComponent],\n        entryComponents: [BannerComponent],\n        exports: [BannerComponent],\n    })\n], BannerModule);\n\nlet LinkComponent = class LinkComponent {\n    constructor(component) {\n        this.component = component;\n    }\n};\nLinkComponent.ctorParameters = () => [\n    { type: CmsComponentData }\n];\nLinkComponent = __decorate([\n    Component({\n        selector: 'cx-link',\n        template: \"<cx-generic-link\\n  *ngIf=\\\"component.data$ | async as data\\\"\\n  [url]=\\\"data.url\\\"\\n  [style]=\\\"data.styleAttributes\\\"\\n  >{{ data.linkName }}</cx-generic-link\\n>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], LinkComponent);\n\nlet LinkModule = class LinkModule {\n};\nLinkModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            GenericLinkModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CMSLinkComponent: { component: LinkComponent },\n                },\n            }),\n        ],\n        declarations: [LinkComponent],\n        exports: [LinkComponent],\n        entryComponents: [LinkComponent],\n    })\n], LinkModule);\n\nlet ParagraphComponent = class ParagraphComponent {\n    constructor(component) {\n        this.component = component;\n    }\n};\nParagraphComponent.ctorParameters = () => [\n    { type: CmsComponentData }\n];\nParagraphComponent = __decorate([\n    Component({\n        selector: 'cx-paragraph',\n        template: \"<p *ngIf=\\\"component.data$ | async as data\\\" [innerHTML]=\\\"data.content\\\"></p>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ParagraphComponent);\n\nlet CmsParagraphModule = class CmsParagraphModule {\n};\nCmsParagraphModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CMSParagraphComponent: {\n                        component: ParagraphComponent,\n                    },\n                    CMSTabParagraphComponent: {\n                        component: ParagraphComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ParagraphComponent],\n        exports: [ParagraphComponent],\n        entryComponents: [ParagraphComponent],\n    })\n], CmsParagraphModule);\n\nlet TabParagraphContainerComponent = class TabParagraphContainerComponent {\n    constructor(componentData, cmsService, winRef) {\n        this.componentData = componentData;\n        this.cmsService = cmsService;\n        this.winRef = winRef;\n        this.activeTabNum = 0;\n        this.tabTitleParams = [];\n        this.components$ = this.componentData.data$.pipe(distinctUntilKeyChanged('components'), switchMap(data => combineLatest(data.components.split(' ').map(component => this.cmsService.getComponentData(component).pipe(distinctUntilChanged(), map(tab => {\n            if (!tab.flexType) {\n                tab = Object.assign(Object.assign({}, tab), { flexType: tab.typeCode });\n            }\n            return Object.assign(Object.assign({}, tab), { title: `${data.uid}.tabs.${tab.uid}` });\n        }))))));\n    }\n    select(tabNum) {\n        this.activeTabNum = tabNum;\n    }\n    ngOnInit() {\n        if (this.winRef && this.winRef.nativeWindow) {\n            const routeState = this.winRef.nativeWindow.history &&\n                this.winRef.nativeWindow.history.state;\n            if (routeState && routeState['activeTab']) {\n                this.activeTabNum = routeState['activeTab'];\n            }\n        }\n    }\n    ngAfterViewInit() {\n        // If the sub cms components data exist, the components created before ngAfterViewInit are called.\n        // In this case, the title parameters are directly pulled from them.\n        // If the sub cms components data does not exist, it should should be loaded first.\n        // In this case, listen to the changes to wait for them to be created.\n        if (this.children.length > 0) {\n            this.getTitleParams(this.children);\n        }\n        else {\n            this.subscription = this.children.changes.subscribe((tabComps) => this.getTitleParams(tabComps));\n        }\n    }\n    getTitleParams(children) {\n        children.forEach(comp => {\n            if (comp.cmpRef && comp.cmpRef.instance.tabTitleParam$) {\n                this.tabTitleParams.push(comp.cmpRef.instance.tabTitleParam$);\n            }\n            else {\n                this.tabTitleParams.push(null);\n            }\n        });\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n};\nTabParagraphContainerComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: CmsService },\n    { type: WindowRef }\n];\n__decorate([\n    ViewChildren(ComponentWrapperDirective)\n], TabParagraphContainerComponent.prototype, \"children\", void 0);\nTabParagraphContainerComponent = __decorate([\n    Component({\n        selector: 'cx-tab-paragraph-container',\n        template: \"<ng-container *ngFor=\\\"let component of components$ | async; let i = index\\\">\\n  <h3 [class.active]=\\\"i === activeTabNum\\\" (click)=\\\"select(i)\\\">\\n    {{ component.title | cxTranslate: { param: tabTitleParams[i] | async } }}\\n  </h3>\\n  <div [class.active]=\\\"i === activeTabNum\\\">\\n    <ng-template [cxOutlet]=\\\"component.flexType\\\" [cxOutletContext]=\\\"{}\\\">\\n      <ng-container [cxComponentWrapper]=\\\"component\\\"></ng-container>\\n    </ng-template>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], TabParagraphContainerComponent);\n\nlet TabParagraphContainerModule = class TabParagraphContainerModule {\n};\nTabParagraphContainerModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CMSTabParagraphContainer: {\n                        component: TabParagraphContainerComponent,\n                    },\n                },\n            }),\n            PageComponentModule,\n            OutletModule,\n            I18nModule,\n        ],\n        declarations: [TabParagraphContainerComponent],\n        entryComponents: [TabParagraphContainerComponent],\n        exports: [TabParagraphContainerComponent],\n    })\n], TabParagraphContainerModule);\n\nlet AddressBookComponentService = class AddressBookComponentService {\n    constructor(userAddressService, checkoutDeliveryService, featureConfigService) {\n        this.userAddressService = userAddressService;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.featureConfigService = featureConfigService;\n    }\n    getAddresses() {\n        return this.userAddressService.getAddresses();\n    }\n    getAddressesStateLoading() {\n        return this.userAddressService.getAddressesLoading();\n    }\n    loadAddresses() {\n        this.userAddressService.loadAddresses();\n    }\n    addUserAddress(address) {\n        this.userAddressService.addUserAddress(address);\n    }\n    updateUserAddress(addressId, address) {\n        this.userAddressService.updateUserAddress(addressId, address);\n        /**\n         * TODO(issue:#4309) Deprecated since 1.2.0\n         */\n        if (this.featureConfigService &&\n            this.featureConfigService.isLevel('1.2') &&\n            this.checkoutDeliveryService) {\n            this.checkoutDeliveryService.clearCheckoutDeliveryDetails();\n        }\n    }\n};\nAddressBookComponentService.ctorParameters = () => [\n    { type: UserAddressService },\n    { type: CheckoutDeliveryService },\n    { type: FeatureConfigService }\n];\nAddressBookComponentService = __decorate([\n    Injectable()\n], AddressBookComponentService);\n\nlet AddressBookComponent = class AddressBookComponent {\n    constructor(service) {\n        this.service = service;\n        this.showAddAddressForm = false;\n        this.showEditAddressForm = false;\n    }\n    ngOnInit() {\n        this.addresses$ = this.service.getAddresses();\n        this.addressesStateLoading$ = this.service.getAddressesStateLoading();\n        this.service.loadAddresses();\n    }\n    addAddressButtonHandle() {\n        this.showEditAddressForm = false;\n        this.showAddAddressForm = true;\n    }\n    editAddressButtonHandle(address) {\n        this.showAddAddressForm = false;\n        this.showEditAddressForm = true;\n        this.currentAddress = address;\n    }\n    addAddressSubmit(address) {\n        this.showAddAddressForm = false;\n        this.service.addUserAddress(address);\n    }\n    addAddressCancel() {\n        this.showAddAddressForm = false;\n    }\n    editAddressSubmit(address) {\n        this.showEditAddressForm = false;\n        this.service.updateUserAddress(this.currentAddress['id'], address);\n    }\n    editAddressCancel() {\n        this.showEditAddressForm = false;\n    }\n};\nAddressBookComponent.ctorParameters = () => [\n    { type: AddressBookComponentService }\n];\nAddressBookComponent = __decorate([\n    Component({\n        selector: 'cx-address-book',\n        template: \"<div class=\\\"cx-section\\\">\\n  <ng-container\\n    *ngIf=\\\"\\n      (addresses$ | async).length &&\\n      !(showAddAddressForm || showEditAddressForm)\\n    \\\"\\n  >\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <button\\n          class=\\\"btn btn-block btn-action\\\"\\n          (click)=\\\"addAddressButtonHandle()\\\"\\n        >\\n          {{ 'addressBook.addNewAddress' | cxTranslate }}\\n        </button>\\n      </div>\\n    </div>\\n\\n    <div\\n      class=\\\"row cx-address-deck\\\"\\n      *ngIf=\\\"!(addressesStateLoading$ | async); else loading\\\"\\n    >\\n      <div\\n        *ngFor=\\\"let address of addresses$ | async\\\"\\n        class=\\\"col-md-6 cx-address-card\\\"\\n      >\\n        <cx-address-card\\n          (editEvent)=\\\"editAddressButtonHandle(address)\\\"\\n          [address]=\\\"address\\\"\\n        ></cx-address-card>\\n      </div>\\n    </div>\\n  </ng-container>\\n\\n  <ng-container *ngIf=\\\"!(addresses$ | async).length || showAddAddressForm\\\">\\n    <section>\\n      <p class=\\\"cx-section-msg\\\">\\n        {{ 'addressBook.addNewShippingAddress' | cxTranslate }}\\n      </p>\\n      <cx-address-form\\n        class=\\\"cx-form\\\"\\n        showTitleCode=\\\"true\\\"\\n        [showCancelBtn]=\\\"!((addresses$ | async).length === 0)\\\"\\n        actionBtnLabel=\\\"{{ 'addressBook.addAddress' | cxTranslate }}\\\"\\n        cancelBtnLabel=\\\"{{ 'addressBook.backToAddressList' | cxTranslate }}\\\"\\n        [setAsDefaultField]=\\\"!((addresses$ | async).length === 0)\\\"\\n        (submitAddress)=\\\"addAddressSubmit($event)\\\"\\n        (backToAddress)=\\\"addAddressCancel()\\\"\\n      ></cx-address-form>\\n    </section>\\n  </ng-container>\\n\\n  <ng-container *ngIf=\\\"showEditAddressForm\\\">\\n    <section>\\n      <p class=\\\"cx-section-msg\\\">\\n        {{ 'addressBook.editShippingAddress' | cxTranslate }}\\n      </p>\\n      <cx-address-form\\n        showTitleCode=\\\"true\\\"\\n        actionBtnLabel=\\\"{{ 'addressBook.updateAddress' | cxTranslate }}\\\"\\n        cancelBtnLabel=\\\"{{ 'addressBook.backToAddressList' | cxTranslate }}\\\"\\n        [addressData]=\\\"currentAddress\\\"\\n        (submitAddress)=\\\"editAddressSubmit($event)\\\"\\n        (backToAddress)=\\\"editAddressCancel()\\\"\\n      ></cx-address-form>\\n    </section>\\n  </ng-container>\\n</div>\\n\\n<ng-template #loading>\\n  <div class=\\\"col-md-12 cx-address-spinner\\\">\\n    <cx-spinner></cx-spinner>\\n  </div>\\n</ng-template>\\n\"\n    })\n], AddressBookComponent);\n\nlet AddressCardComponent = class AddressCardComponent {\n    constructor(userAddressService, checkoutDeliveryService, featureConfigService) {\n        this.userAddressService = userAddressService;\n        this.checkoutDeliveryService = checkoutDeliveryService;\n        this.featureConfigService = featureConfigService;\n        this.editEvent = new EventEmitter();\n    }\n    openEditFormEvent() {\n        this.editEvent.emit();\n    }\n    cancelEdit() {\n        this.editMode = false;\n    }\n    setEditMode() {\n        this.editMode = true;\n    }\n    setAddressAsDefault(addressId) {\n        this.userAddressService.setAddressAsDefault(addressId);\n        /**\n         * TODO(issue:#4309) Deprecated since 1.2.0\n         */\n        if (this.featureConfigService &&\n            this.featureConfigService.isLevel('1.2') &&\n            this.checkoutDeliveryService) {\n            this.checkoutDeliveryService.clearCheckoutDeliveryDetails();\n        }\n    }\n    deleteAddress(addressId) {\n        this.userAddressService.deleteUserAddress(addressId);\n        /**\n         * TODO(issue:#4309) Deprecated since 1.2.0\n         */\n        if (this.featureConfigService &&\n            this.featureConfigService.isLevel('1.2') &&\n            this.checkoutDeliveryService) {\n            this.checkoutDeliveryService.clearCheckoutDeliveryDetails();\n        }\n    }\n};\nAddressCardComponent.ctorParameters = () => [\n    { type: UserAddressService },\n    { type: CheckoutDeliveryService },\n    { type: FeatureConfigService }\n];\n__decorate([\n    Input()\n], AddressCardComponent.prototype, \"address\", void 0);\n__decorate([\n    Output()\n], AddressCardComponent.prototype, \"editEvent\", void 0);\nAddressCardComponent = __decorate([\n    Component({\n        selector: 'cx-address-card',\n        template: \"<div class=\\\"card\\\">\\n  <div class=\\\"card-header\\\" *ngIf=\\\"address?.defaultAddress && !editMode\\\">\\n    &#10003; {{ 'addressCard.default' | cxTranslate }}\\n  </div>\\n  <div\\n    class=\\\"card-body cx-card-body\\\"\\n    [class.cx-address-card-delete-mode]=\\\"editMode\\\"\\n  >\\n    <div *ngIf=\\\"editMode\\\" class=\\\"cx-address-card-delete-msg\\\">\\n      {{ 'addressBook.areYouSureToDeleteAddress' | cxTranslate }}\\n    </div>\\n    <div class=\\\"cx-address-data\\\">\\n      <div class=\\\"cx-address-card-label-name\\\">\\n        {{ address?.firstName }} {{ address?.lastName }}\\n      </div>\\n      <div class=\\\"cx-address-card-label\\\">{{ address?.line1 }}</div>\\n      <div class=\\\"cx-address-card-label\\\">{{ address?.line2 }}</div>\\n      <div class=\\\"cx-address-card-label\\\">\\n        {{ address?.town }},\\n        <span *ngIf=\\\"!address?.region?.isocode\\\">{{\\n          address?.country?.isocode\\n        }}</span\\n        ><span>{{ address?.region?.isocode }}</span>\\n      </div>\\n      <div class=\\\"cx-address-card-label\\\">{{ address?.postalCode }}</div>\\n      <div class=\\\"cx-address-card-label\\\">{{ address?.phone }}</div>\\n    </div>\\n\\n    <div *ngIf=\\\"editMode\\\" class=\\\"row cx-address-card-delete\\\">\\n      <div class=\\\"col-md-6\\\">\\n        <button class=\\\"btn btn-block btn-secondary\\\" (click)=\\\"cancelEdit()\\\">\\n          {{ 'common.cancel' | cxTranslate }}\\n        </button>\\n      </div>\\n      <div class=\\\"col-md-6\\\">\\n        <button\\n          (click)=\\\"deleteAddress(address.id)\\\"\\n          class=\\\"btn btn-block btn-primary\\\"\\n        >\\n          {{ 'common.delete' | cxTranslate }}\\n        </button>\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"!editMode\\\" class=\\\"card-actions\\\">\\n      <a\\n        *ngIf=\\\"!address?.defaultAddress\\\"\\n        (click)=\\\"setAddressAsDefault(address.id)\\\"\\n        class=\\\"card-link btn-link set-default\\\"\\n        >{{ 'addressCard.setAsDefault' | cxTranslate }}</a\\n      >\\n      <a (click)=\\\"openEditFormEvent()\\\" class=\\\"card-link btn-link edit\\\">{{\\n        'common.edit' | cxTranslate\\n      }}</a>\\n      <a (click)=\\\"setEditMode()\\\" class=\\\"card-link btn-link delete\\\">{{\\n        'common.delete' | cxTranslate\\n      }}</a>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], AddressCardComponent);\n\nlet AddressBookModule = class AddressBookModule {\n};\nAddressBookModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    AccountAddressBookComponent: {\n                        component: AddressBookComponent,\n                        providers: [\n                            {\n                                provide: AddressBookComponentService,\n                                useClass: AddressBookComponentService,\n                                deps: [UserAddressService],\n                            },\n                        ],\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            CardModule,\n            AddressFormModule,\n            SpinnerModule,\n            I18nModule,\n        ],\n        declarations: [AddressBookComponent, AddressCardComponent],\n        exports: [AddressBookComponent, AddressCardComponent],\n        providers: [UserAddressService, AddressBookComponentService],\n        entryComponents: [AddressBookComponent],\n    })\n], AddressBookModule);\n\nlet CloseAccountModalComponent = class CloseAccountModalComponent {\n    constructor(modalService, userService, authService, globalMessageService, routingService, translationService) {\n        this.modalService = modalService;\n        this.userService = userService;\n        this.authService = authService;\n        this.globalMessageService = globalMessageService;\n        this.routingService = routingService;\n        this.translationService = translationService;\n        this.iconTypes = ICON_TYPE;\n        this.subscription = new Subscription();\n    }\n    ngOnInit() {\n        this.userToken$ = this.authService.getUserToken();\n        this.userService.resetRemoveUserProcessState();\n        this.subscription.add(this.userService\n            .getRemoveUserResultSuccess()\n            .subscribe(success => this.onSuccess(success)));\n        this.subscription.add(this.userService\n            .getRemoveUserResultError()\n            .subscribe(error => this.onError(error)));\n        this.isLoading$ = this.userService.getRemoveUserResultLoading();\n    }\n    onSuccess(success) {\n        if (success) {\n            this.dismissModal();\n            this.translationService\n                .translate('closeAccount.accountClosedSuccessfully')\n                .pipe(first())\n                .subscribe(text => {\n                this.globalMessageService.add(text, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n            });\n            this.routingService.go({ cxRoute: 'home' });\n        }\n    }\n    onError(error) {\n        if (error) {\n            this.dismissModal();\n            this.translationService\n                .translate('closeAccount.accountClosedFailure')\n                .pipe(first())\n                .subscribe(text => {\n                this.globalMessageService.add(text, GlobalMessageType.MSG_TYPE_ERROR);\n            });\n        }\n    }\n    dismissModal(reason) {\n        this.modalService.dismissActiveModal(reason);\n    }\n    closeAccount() {\n        this.userService.remove();\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n};\nCloseAccountModalComponent.ctorParameters = () => [\n    { type: ModalService },\n    { type: UserService },\n    { type: AuthService },\n    { type: GlobalMessageService },\n    { type: RoutingService },\n    { type: TranslationService }\n];\nCloseAccountModalComponent = __decorate([\n    Component({\n        selector: 'cx-close-account-modal',\n        template: \"<ng-container *ngIf=\\\"userToken$ | async as userToken\\\">\\n  <div class=\\\"modal-header cx-dialog-header\\\">\\n    <h3 class=\\\"modal-title\\\">\\n      {{ 'closeAccount.confirmAccountClosure' | cxTranslate }}\\n    </h3>\\n    <button\\n      type=\\\"button\\\"\\n      class=\\\"close\\\"\\n      aria-label=\\\"Close\\\"\\n      (click)=\\\"dismissModal()\\\"\\n    >\\n      <span aria-hidden=\\\"true\\\">\\n        <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n      </span>\\n    </button>\\n  </div>\\n\\n  <div *ngIf=\\\"isLoading$ | async; else loaded\\\">\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner> </cx-spinner>\\n    </div>\\n  </div>\\n\\n  <ng-template #loaded>\\n    <div class=\\\"modal-body\\\">\\n      <div class=\\\"cx-row\\\">\\n        <p class=\\\"cx-confirmation\\\">\\n          {{ 'closeAccount.confirmAccountClosureMessage' | cxTranslate }}\\n        </p>\\n      </div>\\n      <div class=\\\"cx-row\\\">\\n        <div class=\\\"cx-btn-group\\\">\\n          <button class=\\\"btn btn-primary\\\" (click)=\\\"closeAccount()\\\">\\n            {{ 'closeAccount.closeMyAccount' | cxTranslate }}\\n          </button>\\n          <button (click)=\\\"dismissModal()\\\" class=\\\"btn btn-block btn-secondary\\\">\\n            {{ 'common.cancel' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </ng-template>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CloseAccountModalComponent);\n\nlet CloseAccountComponent = class CloseAccountComponent {\n    constructor(modalService) {\n        this.modalService = modalService;\n    }\n    openModal() {\n        this.modal = this.modalService.open(CloseAccountModalComponent, {\n            centered: true,\n        }).componentInstance;\n    }\n};\nCloseAccountComponent.ctorParameters = () => [\n    { type: ModalService }\n];\nCloseAccountComponent = __decorate([\n    Component({\n        selector: 'cx-close-account',\n        template: \"<div class=\\\"col-lg-8 col-md-9\\\">\\n  <div class=\\\"row cx-btn-group\\\">\\n    <div class=\\\"col-sm-3\\\">\\n      <a\\n        [routerLink]=\\\"{ cxRoute: 'home' } | cxUrl\\\"\\n        class=\\\"btn btn-block btn-secondary\\\"\\n        >{{ 'common.cancel' | cxTranslate }}</a\\n      >\\n    </div>\\n    <div class=\\\"col-sm-6\\\">\\n      <button class=\\\"btn btn-primary\\\" (click)=\\\"openModal()\\\">\\n        {{ 'closeAccount.closeMyAccount' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CloseAccountComponent);\n\nlet CloseAccountModule = class CloseAccountModule {\n};\nCloseAccountModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            UrlModule,\n            I18nModule,\n            IconModule,\n            SpinnerModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CloseAccountComponent: {\n                        component: CloseAccountComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n        ],\n        declarations: [CloseAccountComponent, CloseAccountModalComponent],\n        exports: [CloseAccountComponent, CloseAccountModalComponent],\n        entryComponents: [CloseAccountComponent, CloseAccountModalComponent],\n    })\n], CloseAccountModule);\n\nlet ForgotPasswordComponent = class ForgotPasswordComponent {\n    constructor(fb, userService, routingService) {\n        this.fb = fb;\n        this.userService = userService;\n        this.routingService = routingService;\n        this.submited = false;\n    }\n    ngOnInit() {\n        this.form = this.fb.group({\n            userEmail: [\n                '',\n                [Validators.required, CustomFormValidators.emailValidator],\n            ],\n        });\n    }\n    requestForgotPasswordEmail() {\n        this.submited = true;\n        if (this.form.invalid) {\n            return;\n        }\n        this.userService.requestForgotPasswordEmail(this.form.value.userEmail);\n        this.routingService.go({ cxRoute: 'login' });\n    }\n};\nForgotPasswordComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: UserService },\n    { type: RoutingService }\n];\nForgotPasswordComponent = __decorate([\n    Component({\n        selector: 'cx-forgot-password',\n        template: \"<form (submit)=\\\"requestForgotPasswordEmail()\\\" [formGroup]=\\\"form\\\">\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'forgottenPassword.emailAddress.label' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"email\\\"\\n        class=\\\"form-control\\\"\\n        placeholder=\\\"{{\\n          'forgottenPassword.emailAddress.placeholder' | cxTranslate\\n        }}\\\"\\n        formControlName=\\\"userEmail\\\"\\n        [ngClass]=\\\"{\\n          'is-invalid':\\n            form.controls['userEmail'].invalid &&\\n            (submited ||\\n              (form.controls['userEmail'].touched &&\\n                form.controls['userEmail'].dirty))\\n        }\\\"\\n      />\\n      <div\\n        class=\\\"invalid-feedback\\\"\\n        *ngIf=\\\"\\n          form.controls['userEmail'].invalid &&\\n          (submited ||\\n            (form.controls['userEmail'].touched &&\\n              form.controls['userEmail'].dirty))\\n        \\\"\\n      >\\n        <span>{{ 'forgottenPassword.enterValidEmail' | cxTranslate }}</span>\\n      </div>\\n    </label>\\n  </div>\\n\\n  <button type=\\\"submit\\\" class=\\\"btn btn-block btn-primary\\\">\\n    {{ 'common.submit' | cxTranslate }}\\n  </button>\\n  <a\\n    class=\\\"btn btn-block btn-secondary\\\"\\n    [routerLink]=\\\"{ cxRoute: 'login' } | cxUrl\\\"\\n    >{{ 'common.cancel' | cxTranslate }}</a\\n  >\\n</form>\\n\"\n    })\n], ForgotPasswordComponent);\n\nlet ForgotPasswordModule = class ForgotPasswordModule {\n};\nForgotPasswordModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            RouterModule,\n            UrlModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ForgotPasswordComponent: {\n                        component: ForgotPasswordComponent,\n                        guards: [NotAuthGuard],\n                    },\n                },\n            }),\n            I18nModule,\n        ],\n        declarations: [ForgotPasswordComponent],\n        exports: [ForgotPasswordComponent],\n        entryComponents: [ForgotPasswordComponent],\n    })\n], ForgotPasswordModule);\n\nlet AmendOrderActionsComponent = class AmendOrderActionsComponent {\n    constructor() {\n        this.styles = 'row';\n    }\n};\n__decorate([\n    Input()\n], AmendOrderActionsComponent.prototype, \"orderCode\", void 0);\n__decorate([\n    Input()\n], AmendOrderActionsComponent.prototype, \"isValid\", void 0);\n__decorate([\n    Input()\n], AmendOrderActionsComponent.prototype, \"backRoute\", void 0);\n__decorate([\n    Input()\n], AmendOrderActionsComponent.prototype, \"forwardRoute\", void 0);\n__decorate([\n    HostBinding('class')\n], AmendOrderActionsComponent.prototype, \"styles\", void 0);\nAmendOrderActionsComponent = __decorate([\n    Component({\n        selector: 'cx-amend-order-actions',\n        template: \"<div class=\\\"col-xs-12 col-md-4 col-lg-3\\\">\\n  <a\\n    [routerLink]=\\\"\\n      {\\n        cxRoute: backRoute,\\n        params: { code: orderCode }\\n      } | cxUrl\\n    \\\"\\n    class=\\\"btn btn-block btn-action\\\"\\n  >\\n    {{ 'common.back' | cxTranslate }}\\n  </a>\\n</div>\\n<div class=\\\"col-xs-12 col-md-4 col-lg-3\\\">\\n  <a\\n    *ngIf=\\\"forwardRoute\\\"\\n    class=\\\"btn btn-block btn-primary\\\"\\n    [class.disabled]=\\\"!isValid\\\"\\n    [routerLink]=\\\"\\n      {\\n        cxRoute: forwardRoute,\\n        params: { code: orderCode }\\n      } | cxUrl\\n    \\\"\\n  >\\n    {{ 'common.continue' | cxTranslate }}\\n  </a>\\n\\n  <button\\n    *ngIf=\\\"!forwardRoute\\\"\\n    class=\\\"btn btn-block btn-primary\\\"\\n    type=\\\"submit\\\"\\n    [disabled]=\\\"!isValid\\\"\\n  >\\n    {{ 'orderDetails.cancellationAndReturn.submit' | cxTranslate }}\\n  </button>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], AmendOrderActionsComponent);\n\nlet AmendOrderActionsModule = class AmendOrderActionsModule {\n};\nAmendOrderActionsModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n        declarations: [AmendOrderActionsComponent],\n        exports: [AmendOrderActionsComponent],\n    })\n], AmendOrderActionsModule);\n\nvar AmendOrderType;\n(function (AmendOrderType) {\n    AmendOrderType[AmendOrderType[\"CANCEL\"] = 0] = \"CANCEL\";\n    AmendOrderType[AmendOrderType[\"RETURN\"] = 1] = \"RETURN\";\n})(AmendOrderType || (AmendOrderType = {}));\n\nfunction ValidateQuantity(control) {\n    let q = 0;\n    Object.keys(control.value).forEach(key => (q += control.value[key]));\n    return q > 0 ? null : { required: true };\n}\nlet OrderAmendService = class OrderAmendService {\n    constructor(orderDetailsService) {\n        this.orderDetailsService = orderDetailsService;\n    }\n    /**\n     * Returns entries with an amended quantity.\n     */\n    getAmendedEntries() {\n        return this.getForm().pipe(switchMap(form => {\n            return this.getEntries().pipe(map(entries => entries.filter(entry => this.getFormControl(form, entry).value > 0)));\n        }));\n    }\n    getOrder() {\n        return this.orderDetailsService.getOrderDetails();\n    }\n    /**\n     * returns the form with form data at runtime\n     */\n    getForm() {\n        return this.getOrder().pipe(tap(order => {\n            if (!this.form || this.form.get('orderCode').value !== order.code) {\n                this.buildForm(order);\n            }\n        }), map(() => this.form));\n    }\n    buildForm(order) {\n        this.form = new FormGroup({});\n        this.form.addControl('orderCode', new FormControl(order.code));\n        const entryGroup = new FormGroup({}, { validators: [ValidateQuantity] });\n        this.form.addControl('entries', entryGroup);\n        (order.entries || []).forEach(entry => {\n            const key = entry.entryNumber.toString();\n            entryGroup.addControl(key, new FormControl(0, {\n                validators: [\n                    Validators.min(0),\n                    Validators.max(this.getMaxAmendQuantity(entry)),\n                ],\n            }));\n        });\n    }\n    getFormControl(form, entry) {\n        return form.get('entries').get(entry.entryNumber.toString());\n    }\n    /**\n     * As discussed, this calculation is moved to SPA side.\n     * The calculation and validation should be in backend facade layer.\n     */\n    getAmendedPrice(entry) {\n        const amendedQuantity = this.getFormControl(this.form, entry).value;\n        const amendedPrice = Object.assign({}, entry.basePrice);\n        amendedPrice.value =\n            Math.round(entry.basePrice.value * amendedQuantity * 100) / 100;\n        amendedPrice.formattedValue = formatCurrency(amendedPrice.value, \n        // TODO: user current language\n        'en', getCurrencySymbol(amendedPrice.currencyIso, 'narrow'), amendedPrice.currencyIso);\n        return amendedPrice;\n    }\n    getMaxAmendQuantity(entry) {\n        return ((this.isCancellation()\n            ? entry.cancellableQuantity\n            : entry.returnableQuantity) || entry.quantity);\n    }\n    isCancellation() {\n        return this.amendType === AmendOrderType.CANCEL;\n    }\n};\nOrderAmendService.ctorParameters = () => [\n    { type: OrderDetailsService }\n];\nOrderAmendService = __decorate([\n    Injectable()\n], OrderAmendService);\n\nlet CancelOrReturnItemsComponent = class CancelOrReturnItemsComponent {\n    constructor(orderAmendService) {\n        this.orderAmendService = orderAmendService;\n        this.isConfirmation = false;\n        this.form$ = this.orderAmendService.getForm();\n    }\n    getControl(form, entry) {\n        const control = (form.get('entries').get(entry.entryNumber.toString()));\n        if (this.isConfirmation) {\n            control.disable();\n        }\n        return control;\n    }\n    setAll(form) {\n        this.entries.forEach(entry => this.getControl(form, entry).setValue(this.getMaxAmendQuantity(entry)));\n    }\n    getItemPrice(entry) {\n        return this.orderAmendService.getAmendedPrice(entry);\n    }\n    getMaxAmendQuantity(entry) {\n        return this.orderAmendService.getMaxAmendQuantity(entry);\n    }\n    isCancellation() {\n        return this.orderAmendService.isCancellation();\n    }\n};\nCancelOrReturnItemsComponent.ctorParameters = () => [\n    { type: OrderAmendService }\n];\n__decorate([\n    Input()\n], CancelOrReturnItemsComponent.prototype, \"entries\", void 0);\n__decorate([\n    Input()\n], CancelOrReturnItemsComponent.prototype, \"isConfirmation\", void 0);\nCancelOrReturnItemsComponent = __decorate([\n    Component({\n        selector: 'cx-amend-order-items',\n        template: \"<div *ngIf=\\\"form$ | async as form\\\">\\n  <button\\n    *ngIf=\\\"!isConfirmation\\\"\\n    class=\\\"btn btn-link cx-action-link\\\"\\n    (click)=\\\"setAll(form)\\\"\\n  >\\n    {{ 'orderDetails.cancellationAndReturn.setAll' | cxTranslate }}\\n  </button>\\n\\n  <div class=\\\"d-none d-md-block\\\">\\n    <div class=\\\"cx-item-list-header row\\\">\\n      <div class=\\\"cx-item-list-desc col-md-5 col-xl-6\\\">\\n        {{ 'orderDetails.cancellationAndReturn.item' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-item-list-price col-2\\\">\\n        {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\\n      </div>\\n      <div *ngIf=\\\"!isConfirmation\\\" class=\\\"cx-item-list-qty col-md-3 col-xl-2\\\">\\n        {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-item-list-qty col-2\\\">\\n        {{\\n          (isCancellation()\\n            ? 'orderDetails.cancellationAndReturn.cancelQty'\\n            : 'orderDetails.cancellationAndReturn.returnQty') | cxTranslate\\n        }}\\n      </div>\\n      <div *ngIf=\\\"isConfirmation\\\" class=\\\"cx-item-list-total col-md-3  col-xl-2\\\">\\n        {{ 'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate }}\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"cx-item-list-row\\\" *ngFor=\\\"let item of entries; let i = index\\\">\\n    <div class=\\\"row cx-item-list-items\\\">\\n      <!-- Item Image -->\\n      <cx-media\\n        class=\\\"col-2 cx-image-container\\\"\\n        [container]=\\\"item.product.images?.PRIMARY\\\"\\n        format=\\\"thumbnail\\\"\\n      ></cx-media>\\n\\n      <!-- Item Information -->\\n      <div class=\\\"cx-info col-10\\\">\\n        <div class=\\\"cx-info-container row\\\">\\n          <!-- Item Description -->\\n          <div class=\\\"col-md-3 col-xl-5\\\">\\n            <div *ngIf=\\\"item.product.name\\\" class=\\\"cx-name\\\">\\n              {{ item.product.name }}\\n            </div>\\n            <div *ngIf=\\\"item.product.code\\\" class=\\\"cx-code\\\">\\n              {{ 'cartItems.id' | cxTranslate }} {{ item.product.code }}\\n            </div>\\n            <!-- Variants -->\\n            <ng-container *cxFeatureLevel=\\\"'!1.5'\\\">\\n              <div\\n                *ngFor=\\\"let variant of item.product.variantOptionQualifiers\\\"\\n                class=\\\"cx-property\\\"\\n              >\\n                <div class=\\\"cx-label\\\">{{ variant.name }}</div>\\n                <div class=\\\"cx-value\\\">{{ variant.value }}</div>\\n              </div>\\n            </ng-container>\\n            <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n              <ng-container *ngIf=\\\"item.product.baseOptions?.length\\\">\\n                <div\\n                  *ngFor=\\\"\\n                    let variant of item.product.baseOptions[0]?.selected\\n                      ?.variantOptionQualifiers\\n                  \\\"\\n                  class=\\\"cx-property\\\"\\n                >\\n                  <div class=\\\"cx-label\\\" *ngIf=\\\"variant.name\\\">\\n                    {{ variant.name }}:\\n                  </div>\\n                  <div class=\\\"cx-value\\\" *ngIf=\\\"variant.value\\\">\\n                    {{ variant.value }}\\n                  </div>\\n                </div>\\n              </ng-container>\\n            </ng-container>\\n          </div>\\n          <!-- Price -->\\n          <div\\n            *ngIf=\\\"item.basePrice\\\"\\n            class=\\\"cx-price col-md-3 col-lg-3 col-xl-2\\\"\\n          >\\n            <div class=\\\"cx-label d-block d-md-none d-lg-none d-xl-none\\\">\\n              {{ 'orderDetails.cancellationAndReturn.itemPrice' | cxTranslate }}\\n            </div>\\n            <div *ngIf=\\\"item.basePrice\\\" class=\\\"cx-value\\\">\\n              {{ item.basePrice?.formattedValue }}\\n            </div>\\n          </div>\\n          <!-- item Quantity -->\\n          <div *ngIf=\\\"!isConfirmation\\\" class=\\\"cx-request-qty col-md-3\\\">\\n            <div\\n              class=\\\"cx-label d-block d-md-none d-lg-none d-xl-none\\\"\\n              placement=\\\"left\\\"\\n              title=\\\"{{ 'cartItems.quantityTitle' | cxTranslate }}\\\"\\n            >\\n              {{ 'orderDetails.cancellationAndReturn.quantity' | cxTranslate }}\\n            </div>\\n            <div class=\\\"cx-value\\\">\\n              {{ getMaxAmendQuantity(item) }}\\n            </div>\\n          </div>\\n          <!-- Amended Quantity -->\\n          <div class=\\\"cx-quantity col-md-3 col-xl-2\\\">\\n            <div class=\\\"cx-label d-block d-md-none d-lg-none d-xl-none\\\">\\n              {{\\n                (isCancellation()\\n                  ? 'orderDetails.cancellationAndReturn.cancelQty'\\n                  : 'orderDetails.cancellationAndReturn.returnQty')\\n                  | cxTranslate\\n              }}\\n            </div>\\n\\n            <cx-item-counter\\n              [min]=\\\"0\\\"\\n              [max]=\\\"getMaxAmendQuantity(item)\\\"\\n              [control]=\\\"getControl(form, item)\\\"\\n              [readonly]=\\\"isConfirmation\\\"\\n            >\\n            </cx-item-counter>\\n          </div>\\n          <!-- Total Price -->\\n          <div *ngIf=\\\"isConfirmation\\\" class=\\\"cx-total col-3\\\">\\n            <div class=\\\"cx-label d-block d-md-none\\\">\\n              {{\\n                'orderDetails.cancellationAndReturn.totalPrice' | cxTranslate\\n              }}\\n            </div>\\n            <div class=\\\"cx-value\\\">\\n              {{ getItemPrice(item)?.formattedValue }}\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CancelOrReturnItemsComponent);\n\nlet AmendOrderItemsModule = class AmendOrderItemsModule {\n};\nAmendOrderItemsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            I18nModule,\n            MediaModule,\n            ItemCounterModule,\n            FeaturesConfigModule,\n        ],\n        declarations: [CancelOrReturnItemsComponent],\n        exports: [CancelOrReturnItemsComponent],\n        entryComponents: [CancelOrReturnItemsComponent],\n    })\n], AmendOrderItemsModule);\n\nlet CancelOrderConfirmationComponent = class CancelOrderConfirmationComponent {\n    constructor(orderAmendService) {\n        this.orderAmendService = orderAmendService;\n        this.form$ = this.orderAmendService\n            .getForm()\n            .pipe(tap(form => (this.orderCode = form.value.orderCode)));\n        this.entries$ = this.orderAmendService.getAmendedEntries();\n    }\n    submit(form) {\n        form.disable();\n        this.orderAmendService.save();\n    }\n};\nCancelOrderConfirmationComponent.ctorParameters = () => [\n    { type: OrderAmendService }\n];\nCancelOrderConfirmationComponent = __decorate([\n    Component({\n        selector: 'cx-cancel-order-confirmation',\n        template: \"<form\\n  *ngIf=\\\"form$ | async as form\\\"\\n  [formGroup]=\\\"form\\\"\\n  (ngSubmit)=\\\"submit(form)\\\"\\n>\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <cx-amend-order-items\\n    *ngIf=\\\"entries$ | async as entries\\\"\\n    [entries]=\\\"entries\\\"\\n    [isConfirmation]=\\\"true\\\"\\n  >\\n  </cx-amend-order-items>\\n\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <ng-template #actions>\\n    <cx-amend-order-actions\\n      *ngIf=\\\"orderCode\\\"\\n      [orderCode]=\\\"orderCode\\\"\\n      [isValid]=\\\"form.valid\\\"\\n      backRoute=\\\"orderCancel\\\"\\n    ></cx-amend-order-actions>\\n  </ng-template>\\n</form>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CancelOrderConfirmationComponent);\n\nlet OrderCancellationService = class OrderCancellationService extends OrderAmendService {\n    constructor(orderDetailsService, userOrderService, routing, globalMessageService) {\n        super(orderDetailsService);\n        this.orderDetailsService = orderDetailsService;\n        this.userOrderService = userOrderService;\n        this.routing = routing;\n        this.globalMessageService = globalMessageService;\n        this.amendType = AmendOrderType.CANCEL;\n    }\n    /**\n     * Return cancellable order entries.\n     */\n    getEntries() {\n        return this.getOrder().pipe(filter(order => Boolean(order)), map(order => order.entries.filter(entry => entry.entryNumber !== -1 && entry.cancellableQuantity > 0)));\n    }\n    save() {\n        const orderCode = this.form.value.orderCode;\n        const entries = this.form.value.entries;\n        const inputs = Object.keys(entries)\n            .filter(entryNumber => entries[entryNumber] > 0)\n            .map(entryNumber => ({\n            orderEntryNumber: Number(entryNumber),\n            quantity: entries[entryNumber],\n        }));\n        this.form.reset();\n        this.userOrderService.cancelOrder(orderCode, {\n            cancellationRequestEntryInputs: inputs,\n        });\n        this.userOrderService\n            .getCancelOrderSuccess()\n            .pipe(first(Boolean))\n            .subscribe(() => this.afterSave(orderCode));\n    }\n    afterSave(orderCode) {\n        this.userOrderService.resetCancelOrderProcessState();\n        this.globalMessageService.add({\n            key: 'orderDetails.cancellationAndReturn.cancelSuccess',\n            params: { orderCode },\n        }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n        this.routing.go({\n            cxRoute: 'orders',\n        });\n    }\n};\nOrderCancellationService.ctorParameters = () => [\n    { type: OrderDetailsService },\n    { type: UserOrderService },\n    { type: RoutingService },\n    { type: GlobalMessageService }\n];\nOrderCancellationService.ɵprov = ɵɵdefineInjectable({ factory: function OrderCancellationService_Factory() { return new OrderCancellationService(ɵɵinject(OrderDetailsService), ɵɵinject(UserOrderService), ɵɵinject(RoutingService), ɵɵinject(GlobalMessageService)); }, token: OrderCancellationService, providedIn: \"root\" });\nOrderCancellationService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], OrderCancellationService);\n\nlet OrderCancellationGuard = class OrderCancellationGuard {\n    constructor(routing, orderAmendService) {\n        this.routing = routing;\n        this.orderAmendService = orderAmendService;\n    }\n    canActivate() {\n        return this.orderAmendService.getForm().pipe(map(form => {\n            if (!form.valid) {\n                // the order code is not available in the route\n                // as long as we're inside a guard, hence we redirect\n                // to the common orders page.\n                this.routing.go({ cxRoute: 'orders' });\n                return false;\n            }\n            else {\n                return true;\n            }\n        }));\n    }\n};\nOrderCancellationGuard.ctorParameters = () => [\n    { type: RoutingService },\n    { type: OrderCancellationService }\n];\nOrderCancellationGuard.ɵprov = ɵɵdefineInjectable({ factory: function OrderCancellationGuard_Factory() { return new OrderCancellationGuard(ɵɵinject(RoutingService), ɵɵinject(OrderCancellationService)); }, token: OrderCancellationGuard, providedIn: \"root\" });\nOrderCancellationGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], OrderCancellationGuard);\n\nconst ɵ0$1 = {\n    cxRoute: 'orderCancelConfirmation',\n};\nlet CancelOrderConfirmationModule = class CancelOrderConfirmationModule {\n};\nCancelOrderConfirmationModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$1,\n                },\n            ]),\n            ReactiveFormsModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CancelOrderConfirmationComponent: {\n                        component: CancelOrderConfirmationComponent,\n                        guards: [AuthGuard, OrderCancellationGuard],\n                        providers: [\n                            {\n                                provide: OrderAmendService,\n                                useExisting: OrderCancellationService,\n                            },\n                        ],\n                    },\n                },\n            }),\n            AmendOrderItemsModule,\n            AmendOrderActionsModule,\n        ],\n        declarations: [CancelOrderConfirmationComponent],\n        exports: [CancelOrderConfirmationComponent],\n        entryComponents: [CancelOrderConfirmationComponent],\n    })\n], CancelOrderConfirmationModule);\n\nlet CancelOrderComponent = class CancelOrderComponent {\n    constructor(orderAmendService) {\n        this.orderAmendService = orderAmendService;\n        this.form$ = this.orderAmendService\n            .getForm()\n            .pipe(tap(form => (this.orderCode = form.value.orderCode)));\n        this.entries$ = this.orderAmendService.getEntries();\n    }\n};\nCancelOrderComponent.ctorParameters = () => [\n    { type: OrderAmendService }\n];\nCancelOrderComponent = __decorate([\n    Component({\n        selector: 'cx-cancel-order',\n        template: \"<ng-container *ngIf=\\\"form$ | async as form\\\">\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <cx-amend-order-items *ngIf=\\\"entries$ | async as entries\\\" [entries]=\\\"entries\\\">\\n  </cx-amend-order-items>\\n\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <ng-template #actions>\\n    <cx-amend-order-actions\\n      *ngIf=\\\"orderCode\\\"\\n      [orderCode]=\\\"orderCode\\\"\\n      [isValid]=\\\"form.valid\\\"\\n      backRoute=\\\"orderDetails\\\"\\n      forwardRoute=\\\"orderCancelConfirmation\\\"\\n    ></cx-amend-order-actions>\\n  </ng-template>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CancelOrderComponent);\n\nconst ɵ0$2 = {\n    cxRoute: 'orderCancel',\n};\nlet CancelOrderModule = class CancelOrderModule {\n};\nCancelOrderModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$2,\n                },\n            ]),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CancelOrderComponent: {\n                        component: CancelOrderComponent,\n                        guards: [AuthGuard],\n                        providers: [\n                            {\n                                provide: OrderAmendService,\n                                useExisting: OrderCancellationService,\n                            },\n                        ],\n                    },\n                },\n            }),\n            AmendOrderItemsModule,\n            AmendOrderActionsModule,\n        ],\n        declarations: [CancelOrderComponent],\n        exports: [CancelOrderComponent],\n        entryComponents: [CancelOrderComponent],\n    })\n], CancelOrderModule);\n\nlet OrderCancellationModule = class OrderCancellationModule {\n};\nOrderCancellationModule = __decorate([\n    NgModule({\n        imports: [CancelOrderModule, CancelOrderConfirmationModule],\n    })\n], OrderCancellationModule);\n\nlet OrderReturnService = class OrderReturnService extends OrderAmendService {\n    constructor(orderDetailsService, returnRequestService, routing, globalMessageService) {\n        super(orderDetailsService);\n        this.orderDetailsService = orderDetailsService;\n        this.returnRequestService = returnRequestService;\n        this.routing = routing;\n        this.globalMessageService = globalMessageService;\n        this.amendType = AmendOrderType.RETURN;\n    }\n    getEntries() {\n        return this.getOrder().pipe(filter(order => !!order.entries), map(order => order.entries.filter(entry => entry.entryNumber !== -1 && entry.returnableQuantity > 0)));\n    }\n    save() {\n        const orderCode = this.form.value.orderCode;\n        const entries = this.form.value.entries;\n        const inputs = Object.keys(entries)\n            .filter(entryNumber => entries[entryNumber] > 0)\n            .map(entryNumber => ({\n            orderEntryNumber: Number(entryNumber),\n            quantity: entries[entryNumber],\n        }));\n        this.form.reset();\n        this.returnRequestService.createOrderReturnRequest({\n            orderCode,\n            returnRequestEntryInputs: inputs,\n        });\n        this.returnRequestService\n            .getReturnRequestSuccess()\n            .pipe(first(Boolean))\n            .subscribe(() => this.afterSave());\n    }\n    afterSave() {\n        this.returnRequestService\n            .getOrderReturnRequest()\n            .pipe(first(r => !!r))\n            .subscribe(returnRequest => {\n            const rma = returnRequest.rma;\n            this.globalMessageService.add({\n                key: 'orderDetails.cancellationAndReturn.returnSuccess',\n                params: { rma },\n            }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n            this.routing.go({\n                cxRoute: 'returnRequestDetails',\n                params: { rma },\n            });\n        });\n    }\n};\nOrderReturnService.ctorParameters = () => [\n    { type: OrderDetailsService },\n    { type: OrderReturnRequestService },\n    { type: RoutingService },\n    { type: GlobalMessageService }\n];\nOrderReturnService.ɵprov = ɵɵdefineInjectable({ factory: function OrderReturnService_Factory() { return new OrderReturnService(ɵɵinject(OrderDetailsService), ɵɵinject(OrderReturnRequestService), ɵɵinject(RoutingService), ɵɵinject(GlobalMessageService)); }, token: OrderReturnService, providedIn: \"root\" });\nOrderReturnService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], OrderReturnService);\n\nlet OrderReturnGuard = class OrderReturnGuard {\n    constructor(routing, orderAmendService) {\n        this.routing = routing;\n        this.orderAmendService = orderAmendService;\n    }\n    canActivate() {\n        return this.orderAmendService.getForm().pipe(map(form => {\n            if (!form.valid) {\n                // the order code is not available in the route\n                // as long as we're inside a guard, hence we redirect\n                // to the common orders page.\n                this.routing.go({ cxRoute: 'orders' });\n                return false;\n            }\n            else {\n                return true;\n            }\n        }));\n    }\n};\nOrderReturnGuard.ctorParameters = () => [\n    { type: RoutingService },\n    { type: OrderReturnService }\n];\nOrderReturnGuard.ɵprov = ɵɵdefineInjectable({ factory: function OrderReturnGuard_Factory() { return new OrderReturnGuard(ɵɵinject(RoutingService), ɵɵinject(OrderReturnService)); }, token: OrderReturnGuard, providedIn: \"root\" });\nOrderReturnGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], OrderReturnGuard);\n\nlet ReturnOrderConfirmationComponent = class ReturnOrderConfirmationComponent {\n    constructor(orderAmendService) {\n        this.orderAmendService = orderAmendService;\n        this.form$ = this.orderAmendService\n            .getForm()\n            .pipe(tap(form => (this.orderCode = form.value.orderCode)));\n        this.entries$ = this.orderAmendService.getAmendedEntries();\n    }\n    submit(form) {\n        form.disable();\n        this.orderAmendService.save();\n    }\n};\nReturnOrderConfirmationComponent.ctorParameters = () => [\n    { type: OrderAmendService }\n];\nReturnOrderConfirmationComponent = __decorate([\n    Component({\n        selector: 'cx-return-order-confirmation',\n        template: \"<form\\n  *ngIf=\\\"form$ | async as form\\\"\\n  [formGroup]=\\\"form\\\"\\n  (ngSubmit)=\\\"submit(form)\\\"\\n>\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <cx-amend-order-items\\n    *ngIf=\\\"entries$ | async as entries\\\"\\n    [entries]=\\\"entries\\\"\\n    [isConfirmation]=\\\"true\\\"\\n  >\\n  </cx-amend-order-items>\\n\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <ng-template #actions>\\n    <cx-amend-order-actions\\n      *ngIf=\\\"orderCode\\\"\\n      [orderCode]=\\\"orderCode\\\"\\n      [isValid]=\\\"form.valid\\\"\\n      backRoute=\\\"orderReturn\\\"\\n    ></cx-amend-order-actions>\\n  </ng-template>\\n</form>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ReturnOrderConfirmationComponent);\n\nconst ɵ0$3 = {\n    cxRoute: 'orderReturnConfirmation',\n};\nlet ReturnOrderConfirmationModule = class ReturnOrderConfirmationModule {\n};\nReturnOrderConfirmationModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$3,\n                },\n            ]),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ReturnOrderConfirmationComponent: {\n                        component: ReturnOrderConfirmationComponent,\n                        guards: [AuthGuard, OrderReturnGuard],\n                        providers: [\n                            {\n                                provide: OrderAmendService,\n                                useExisting: OrderReturnService,\n                            },\n                        ],\n                    },\n                },\n            }),\n            AmendOrderItemsModule,\n            I18nModule,\n            ReactiveFormsModule,\n            AmendOrderActionsModule,\n        ],\n        declarations: [ReturnOrderConfirmationComponent],\n        exports: [ReturnOrderConfirmationComponent],\n        entryComponents: [ReturnOrderConfirmationComponent],\n    })\n], ReturnOrderConfirmationModule);\n\nlet ReturnOrderComponent = class ReturnOrderComponent {\n    constructor(orderAmendService) {\n        this.orderAmendService = orderAmendService;\n        this.form$ = this.orderAmendService\n            .getForm()\n            .pipe(tap(form => (this.orderCode = form.value.orderCode)));\n        this.entries$ = this.orderAmendService.getEntries();\n    }\n};\nReturnOrderComponent.ctorParameters = () => [\n    { type: OrderAmendService }\n];\nReturnOrderComponent = __decorate([\n    Component({\n        selector: 'cx-return-order',\n        template: \"<ng-container *ngIf=\\\"form$ | async as form\\\">\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <cx-amend-order-items *ngIf=\\\"entries$ | async as entries\\\" [entries]=\\\"entries\\\">\\n  </cx-amend-order-items>\\n\\n  <ng-container *ngTemplateOutlet=\\\"actions\\\"></ng-container>\\n\\n  <ng-template #actions>\\n    <cx-amend-order-actions\\n      *ngIf=\\\"orderCode\\\"\\n      [orderCode]=\\\"orderCode\\\"\\n      [isValid]=\\\"form.valid\\\"\\n      backRoute=\\\"orderDetails\\\"\\n      forwardRoute=\\\"orderReturnConfirmation\\\"\\n    ></cx-amend-order-actions>\\n  </ng-template>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ReturnOrderComponent);\n\nconst ɵ0$4 = {\n    cxRoute: 'orderReturn',\n};\nlet ReturnOrderModule = class ReturnOrderModule {\n};\nReturnOrderModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$4,\n                },\n            ]),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ReturnOrderComponent: {\n                        component: ReturnOrderComponent,\n                        guards: [AuthGuard],\n                        providers: [\n                            {\n                                provide: OrderAmendService,\n                                useExisting: OrderReturnService,\n                            },\n                        ],\n                    },\n                },\n            }),\n            AmendOrderItemsModule,\n            AmendOrderActionsModule,\n        ],\n        declarations: [ReturnOrderComponent],\n        exports: [ReturnOrderComponent],\n        entryComponents: [ReturnOrderComponent],\n    })\n], ReturnOrderModule);\n\nlet OrderReturnModule = class OrderReturnModule {\n};\nOrderReturnModule = __decorate([\n    NgModule({\n        imports: [ReturnOrderModule, ReturnOrderConfirmationModule],\n    })\n], OrderReturnModule);\n\nlet OrderDetailHeadlineComponent = class OrderDetailHeadlineComponent {\n    constructor(orderDetailsService) {\n        this.orderDetailsService = orderDetailsService;\n    }\n    ngOnInit() {\n        this.order$ = this.orderDetailsService.getOrderDetails();\n    }\n};\nOrderDetailHeadlineComponent.ctorParameters = () => [\n    { type: OrderDetailsService }\n];\nOrderDetailHeadlineComponent = __decorate([\n    Component({\n        selector: 'cx-order-details-headline',\n        template: \"<ng-container *ngIf=\\\"order$ | async as order\\\">\\n  <div class=\\\"cx-header row\\\">\\n    <div class=\\\"cx-detail col-sm-12 col-md-4\\\">\\n      <div class=\\\"cx-detail-label\\\">\\n        {{ 'orderDetails.orderId' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-detail-value\\\">{{ order?.code }}</div>\\n    </div>\\n    <div class=\\\"cx-detail col-sm-12 col-md-4\\\">\\n      <div class=\\\"cx-detail-label\\\">\\n        {{ 'orderDetails.placed' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-detail-value\\\">{{ order?.created | cxDate }}</div>\\n    </div>\\n    <div class=\\\"cx-detail col-sm-12 col-md-4\\\">\\n      <div class=\\\"cx-detail-label\\\">\\n        {{ 'orderDetails.status' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-detail-value\\\" *ngIf=\\\"order?.statusDisplay\\\">\\n        {{\\n          'orderDetails.statusDisplay'\\n            | cxTranslate: { context: order?.statusDisplay }\\n        }}\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], OrderDetailHeadlineComponent);\n\nconst completedValues = ['DELIVERY_COMPLETED', 'PICKUP_COMPLETE'];\nconst cancelledValues = ['CANCELLED'];\n\nlet OrderDetailItemsComponent = class OrderDetailItemsComponent {\n    constructor(orderDetailsService, promotionService) {\n        this.orderDetailsService = orderDetailsService;\n        this.promotionService = promotionService;\n        this.promotionLocation = PromotionLocation.Order;\n        this.order$ = this.orderDetailsService.getOrderDetails();\n    }\n    ngOnInit() {\n        this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);\n        this.others$ = this.getOtherStatus(...completedValues, ...cancelledValues);\n        this.completed$ = this.getExactStatus(completedValues);\n        this.cancel$ = this.getExactStatus(cancelledValues);\n    }\n    getExactStatus(consignmentStatus) {\n        return this.order$.pipe(map(order => {\n            if (Boolean(order.consignments)) {\n                return order.consignments.filter(consignment => consignmentStatus.includes(consignment.status));\n            }\n        }));\n    }\n    getOtherStatus(...consignmentStatus) {\n        return this.order$.pipe(map(order => {\n            if (Boolean(order.consignments)) {\n                return order.consignments.filter(consignment => !consignmentStatus.includes(consignment.status));\n            }\n        }));\n    }\n    /**\n     * @deprecated\n     * NOTE: This function will be removed in version 2.0\n     */\n    getConsignmentProducts(consignment) {\n        const products = [];\n        consignment.entries.forEach(element => {\n            products.push(element.orderEntry);\n        });\n        return products;\n    }\n};\nOrderDetailItemsComponent.ctorParameters = () => [\n    { type: OrderDetailsService },\n    { type: PromotionService }\n];\nOrderDetailItemsComponent = __decorate([\n    Component({\n        selector: 'cx-order-details-items',\n        template: \"<ng-container *ngIf=\\\"order$ | async as order\\\">\\n  <!-- consigned entries -->\\n  <div *cxFeatureLevel=\\\"'1.4'\\\">\\n    <ng-container *ngIf=\\\"orderPromotions$ | async as orderPromotions\\\">\\n      <cx-promotions [promotions]=\\\"orderPromotions\\\"></cx-promotions>\\n    </ng-container>\\n\\n    <cx-order-consigned-entries\\n      *ngIf=\\\"others$ | async as others\\\"\\n      [order]=\\\"order\\\"\\n      [consignments]=\\\"others\\\"\\n    ></cx-order-consigned-entries>\\n\\n    <cx-order-consigned-entries\\n      *ngIf=\\\"completed$ | async as completed\\\"\\n      [order]=\\\"order\\\"\\n      [consignments]=\\\"completed\\\"\\n    ></cx-order-consigned-entries>\\n\\n    <cx-order-consigned-entries\\n      *ngIf=\\\"cancel$ | async as cancel\\\"\\n      [order]=\\\"order\\\"\\n      [consignments]=\\\"cancel\\\"\\n    ></cx-order-consigned-entries>\\n  </div>\\n\\n  <div *cxFeatureLevel=\\\"'!1.4'\\\">\\n    <div *ngFor=\\\"let consignment of order.consignments\\\" class=\\\"cx-list row\\\">\\n      <div class=\\\"cx-list-header col-12\\\">\\n        <div class=\\\"cx-list-status\\\">\\n          <span *ngIf=\\\"consignment\\\">\\n            {{\\n              'orderDetails.deliveryStatus'\\n                | cxTranslate: { context: consignment.status }\\n            }}\\n          </span>\\n        </div>\\n        <div *ngIf=\\\"consignment?.statusDate\\\" class=\\\"cx-list-date\\\">\\n          <div>{{ 'orderDetails.shippedOn' | cxTranslate }}&nbsp;</div>\\n          <div>{{ consignment?.statusDate | cxDate }}</div>\\n        </div>\\n\\n        <cx-consignment-tracking\\n          [orderCode]=\\\"order.code\\\"\\n          [consignment]=\\\"consignment\\\"\\n          *cxFeature=\\\"'consignmentTracking'\\\"\\n        >\\n        </cx-consignment-tracking>\\n      </div>\\n      <div class=\\\"cx-list-item col-12\\\">\\n        <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n          <ng-container *ngIf=\\\"orderPromotions$ | async as orderPromotions\\\">\\n            <cx-promotions [promotions]=\\\"orderPromotions\\\"></cx-promotions>\\n          </ng-container>\\n        </ng-container>\\n\\n        <cx-cart-item-list\\n          [items]=\\\"getConsignmentProducts(consignment)\\\"\\n          [readonly]=\\\"true\\\"\\n          [promotionLocation]=\\\"promotionLocation\\\"\\n        ></cx-cart-item-list>\\n      </div>\\n    </div>\\n    <!-- unconsigned entries -->\\n    <div *ngIf=\\\"order.unconsignedEntries?.length\\\" class=\\\"cx-list row\\\">\\n      <div class=\\\"cx-list-header col-12\\\">\\n        <div class=\\\"cx-list-status\\\">\\n          {{ 'orderDetails.pending' | cxTranslate }}\\n        </div>\\n      </div>\\n      <div class=\\\"cx-list-item col-12\\\">\\n        <ng-container *ngIf=\\\"orderPromotions$ | async as orderPromotions\\\">\\n          <cx-promotions [promotions]=\\\"orderPromotions\\\"></cx-promotions>\\n        </ng-container>\\n\\n        <cx-cart-item-list\\n          [items]=\\\"order?.unconsignedEntries\\\"\\n          [readonly]=\\\"true\\\"\\n          [promotionLocation]=\\\"promotionLocation\\\"\\n        ></cx-cart-item-list>\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], OrderDetailItemsComponent);\n\nlet TrackingEventsComponent = class TrackingEventsComponent {\n    constructor(activeModal, userOrderService) {\n        this.activeModal = activeModal;\n        this.userOrderService = userOrderService;\n    }\n    ngOnDestroy() {\n        this.userOrderService.clearConsignmentTracking();\n    }\n};\nTrackingEventsComponent.ctorParameters = () => [\n    { type: NgbActiveModal },\n    { type: UserOrderService }\n];\nTrackingEventsComponent = __decorate([\n    Component({\n        selector: 'cx-tracking-events',\n        template: \"<div class=\\\"cx-consignment-tracking-dialog\\\">\\n  <!-- Modal Header -->\\n  <ng-container *ngIf=\\\"tracking$ | async as consignmentTracking; else loading\\\">\\n    <div class=\\\"header modal-header\\\">\\n      <div class=\\\"title modal-title\\\">\\n        {{ 'orderDetails.consignmentTracking.dialog.header' | cxTranslate }}\\n      </div>\\n      <button\\n        type=\\\"button\\\"\\n        class=\\\"close\\\"\\n        aria-label=\\\"Close\\\"\\n        (click)=\\\"activeModal.dismiss('Cross click')\\\"\\n      >\\n        <span aria-hidden=\\\"true\\\">&times;</span>\\n      </button>\\n    </div>\\n    <!-- Modal Body -->\\n    <!-- shipment header -->\\n    <ng-container\\n      *ngIf=\\\"\\n        consignmentTracking?.carrierDetails && consignmentTracking?.trackingID;\\n        else noTracking\\n      \\\"\\n    >\\n      <div class=\\\"shipment-heading\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-12 col-md-6\\\">\\n            <div class=\\\"shipment-title \\\">\\n              {{\\n                'orderDetails.consignmentTracking.dialog.shipped' | cxTranslate\\n              }}\\n            </div>\\n            <div class=\\\"shipment-content\\\">\\n              {{ shipDate | cxDate: 'medium' }}\\n            </div>\\n          </div>\\n          <div class=\\\"col-sm-12 col-md-6\\\">\\n            <div class=\\\"shipment-title\\\">\\n              {{\\n                'orderDetails.consignmentTracking.dialog.estimate' | cxTranslate\\n              }}\\n            </div>\\n            <div class=\\\"shipment-content\\\">\\n              {{ consignmentTracking?.targetArrivalDate | cxDate: 'medium' }}\\n            </div>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-12 col-md-6\\\">\\n            <div class=\\\"shipment-title\\\">\\n              {{\\n                'orderDetails.consignmentTracking.dialog.carrier' | cxTranslate\\n              }}\\n            </div>\\n            <div class=\\\"shipment-content\\\">\\n              {{ consignmentTracking?.carrierDetails?.name }}\\n            </div>\\n          </div>\\n          <div class=\\\"col-sm-12 col-md-6\\\">\\n            <div class=\\\"shipment-title\\\">\\n              {{\\n                'orderDetails.consignmentTracking.dialog.trackingId'\\n                  | cxTranslate\\n              }}\\n            </div>\\n            <div class=\\\"shipment-content\\\">\\n              <label>\\n                {{ consignmentTracking?.trackingID }}\\n              </label>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </ng-container>\\n\\n    <!-- tracking events -->\\n    <div class=\\\"events modal-body\\\">\\n      <ng-container\\n        *ngFor=\\\"let consignmentEvent of consignmentTracking.trackingEvents\\\"\\n      >\\n        <div class=\\\"event-body\\\">\\n          <div class=\\\"event-content\\\">\\n            {{ consignmentEvent.eventDate | cxDate: 'medium' }}\\n          </div>\\n          <div class=\\\"event-title\\\">\\n            {{ consignmentEvent.referenceCode }}\\n          </div>\\n          <div class=\\\"event-content\\\">{{ consignmentEvent.detail }}</div>\\n          <div class=\\\"event-city\\\">\\n            location: {{ consignmentEvent.location }}\\n          </div>\\n        </div>\\n      </ng-container>\\n    </div>\\n  </ng-container>\\n\\n  <ng-template #noTracking>\\n    <div class=\\\"no-tracking-heading\\\">\\n      <div class=\\\"shipment-content\\\">\\n        {{ 'orderDetails.consignmentTracking.dialog.noTracking' | cxTranslate }}\\n      </div>\\n    </div>\\n  </ng-template>\\n\\n  <ng-template #loading>\\n    <div class=\\\"tracking-loading\\\">\\n      <div class=\\\"header modal-header\\\">\\n        <div class=\\\"title modal-title\\\">\\n          {{\\n            'orderDetails.consignmentTracking.dialog.loadingHeader'\\n              | cxTranslate\\n          }}\\n        </div>\\n        <button\\n          type=\\\"button\\\"\\n          class=\\\"close btn-dismiss\\\"\\n          aria-label=\\\"Close\\\"\\n          (click)=\\\"activeModal.dismiss('Cross click')\\\"\\n        >\\n          <span aria-hidden=\\\"true\\\">&times;</span>\\n        </button>\\n      </div>\\n      <!-- Modal Body -->\\n      <div class=\\\"body modal-body\\\">\\n        <div class=\\\"row\\\">\\n          <div class=\\\"col-sm-12\\\">\\n            <cx-spinner></cx-spinner>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </ng-template>\\n</div>\\n\"\n    })\n], TrackingEventsComponent);\n\nlet ConsignmentTrackingComponent = class ConsignmentTrackingComponent {\n    constructor(userOrderService, modalService) {\n        this.userOrderService = userOrderService;\n        this.modalService = modalService;\n        this.consignmentStatus = [\n            'SHIPPED',\n            'IN_TRANSIT',\n            'DELIVERY_COMPLETED',\n            'DELIVERY_REJECTED',\n            'DELIVERING',\n        ];\n    }\n    ngOnInit() {\n        this.consignmentTracking$ = this.userOrderService.getConsignmentTracking();\n    }\n    openTrackingDialog(consignment) {\n        this.userOrderService.loadConsignmentTracking(this.orderCode, consignment.code);\n        let modalInstance;\n        this.modalRef = this.modalService.open(TrackingEventsComponent, {\n            centered: true,\n            size: 'lg',\n        });\n        modalInstance = this.modalRef.componentInstance;\n        modalInstance.tracking$ = this.consignmentTracking$;\n        modalInstance.shipDate = consignment.statusDate;\n        modalInstance.consignmentCode = consignment.code;\n    }\n    ngOnDestroy() {\n        this.userOrderService.clearConsignmentTracking();\n    }\n};\nConsignmentTrackingComponent.ctorParameters = () => [\n    { type: UserOrderService },\n    { type: ModalService }\n];\n__decorate([\n    Input()\n], ConsignmentTrackingComponent.prototype, \"consignment\", void 0);\n__decorate([\n    Input()\n], ConsignmentTrackingComponent.prototype, \"orderCode\", void 0);\nConsignmentTrackingComponent = __decorate([\n    Component({\n        selector: 'cx-consignment-tracking',\n        template: \"<ng-container *ngIf=\\\"consignment && consignment.status\\\">\\n  <div *ngIf=\\\"consignmentStatus.includes(consignment.status)\\\">\\n    <button\\n      (click)=\\\"openTrackingDialog(consignment)\\\"\\n      class=\\\"btn btn-action btn-track\\\"\\n    >\\n      {{ 'orderDetails.consignmentTracking.action' | cxTranslate }}\\n    </button>\\n  </div>\\n</ng-container>\\n\"\n    })\n], ConsignmentTrackingComponent);\n\nlet OrderConsignedEntriesComponent = class OrderConsignedEntriesComponent {\n    constructor() {\n        this.promotionLocation = PromotionLocation.Order;\n    }\n    getConsignmentProducts(consignment) {\n        const products = [];\n        consignment.entries.forEach(element => {\n            products.push(element.orderEntry);\n        });\n        return products;\n    }\n};\n__decorate([\n    Input()\n], OrderConsignedEntriesComponent.prototype, \"consignments\", void 0);\n__decorate([\n    Input()\n], OrderConsignedEntriesComponent.prototype, \"order\", void 0);\nOrderConsignedEntriesComponent = __decorate([\n    Component({\n        selector: 'cx-order-consigned-entries',\n        template: \"<div *ngFor=\\\"let consignment of consignments\\\" class=\\\"cx-list row\\\">\\n  <div class=\\\"cx-list-header col-12\\\">\\n    <div class=\\\"cx-list-status\\\">\\n      <span *ngIf=\\\"consignment\\\">\\n        {{\\n          'orderDetails.deliveryStatus'\\n            | cxTranslate: { context: consignment.status }\\n        }}\\n      </span>\\n    </div>\\n    <div *ngIf=\\\"consignment?.statusDate\\\" class=\\\"cx-list-date\\\">\\n      <div>{{ consignment?.statusDate | cxDate }}</div>\\n    </div>\\n\\n    <cx-consignment-tracking\\n      [orderCode]=\\\"order.code\\\"\\n      [consignment]=\\\"consignment\\\"\\n      *cxFeature=\\\"'consignmentTracking'\\\"\\n    >\\n    </cx-consignment-tracking>\\n  </div>\\n  <div class=\\\"cx-list-item col-12\\\">\\n    <cx-cart-item-list\\n      [items]=\\\"consignment.entries\\\"\\n      [readonly]=\\\"true\\\"\\n      [promotionLocation]=\\\"promotionLocation\\\"\\n    ></cx-cart-item-list>\\n  </div>\\n</div>\\n\"\n    })\n], OrderConsignedEntriesComponent);\n\nlet OrderDetailShippingComponent = class OrderDetailShippingComponent {\n    constructor(orderDetailsService, translation) {\n        this.orderDetailsService = orderDetailsService;\n        this.translation = translation;\n    }\n    ngOnInit() {\n        this.order$ = this.orderDetailsService.getOrderDetails();\n    }\n    getAddressCardContent(address) {\n        return combineLatest([\n            this.translation.translate('addressCard.shipTo'),\n        ]).pipe(map(([textTitle]) => {\n            return {\n                title: textTitle,\n                textBold: `${address.firstName} ${address.lastName}`,\n                text: [\n                    address.line1,\n                    address.line2,\n                    `${address.town}, ${address.country.isocode}, ${address.postalCode}`,\n                    address.phone,\n                ],\n            };\n        }));\n    }\n    getBillingAddressCardContent(billingAddress) {\n        return combineLatest([\n            this.translation.translate('addressCard.billTo'),\n        ]).pipe(map(([textTitle]) => {\n            return {\n                title: textTitle,\n                textBold: `${billingAddress.firstName} ${billingAddress.lastName}`,\n                text: [\n                    billingAddress.line1,\n                    billingAddress.line2,\n                    `${billingAddress.town}, ${billingAddress.country.isocode}, ${billingAddress.postalCode}`,\n                    billingAddress.phone,\n                ],\n            };\n        }));\n    }\n    getPaymentCardContent(payment) {\n        return combineLatest([\n            this.translation.translate('paymentForm.payment'),\n            this.translation.translate('paymentCard.expires', {\n                month: payment.expiryMonth,\n                year: payment.expiryYear,\n            }),\n        ]).pipe(map(([textTitle, textExpires]) => {\n            return {\n                title: textTitle,\n                textBold: payment.accountHolderName,\n                text: [payment.cardType.name, payment.cardNumber, textExpires],\n            };\n        }));\n    }\n    getShippingMethodCardContent(shipping) {\n        return combineLatest([\n            this.translation.translate('checkoutShipping.shippingMethod'),\n        ]).pipe(map(([textTitle]) => {\n            return {\n                title: textTitle,\n                textBold: shipping.name,\n                text: [shipping.description],\n            };\n        }));\n    }\n};\nOrderDetailShippingComponent.ctorParameters = () => [\n    { type: OrderDetailsService },\n    { type: TranslationService }\n];\nOrderDetailShippingComponent = __decorate([\n    Component({\n        selector: 'cx-order-details-shipping',\n        template: \"<ng-container *ngIf=\\\"order$ | async as order\\\">\\n  <div class=\\\"cx-account-summary row\\\">\\n    <div\\n      *ngIf=\\\"order.deliveryAddress\\\"\\n      class=\\\"cx-summary-card col-sm-12 col-md-4\\\"\\n    >\\n      <cx-card\\n        [content]=\\\"getAddressCardContent(order.deliveryAddress) | async\\\"\\n      ></cx-card>\\n    </div>\\n    <div\\n      *ngIf=\\\"order.paymentInfo?.billingAddress\\\"\\n      class=\\\"cx-summary-card col-sm-12 col-md-4\\\"\\n    >\\n      <cx-card\\n        [content]=\\\"\\n          getBillingAddressCardContent(order.paymentInfo.billingAddress) | async\\n        \\\"\\n      ></cx-card>\\n    </div>\\n    <div *ngIf=\\\"order.paymentInfo\\\" class=\\\"cx-summary-card col-sm-12 col-md-4\\\">\\n      <cx-card\\n        [content]=\\\"getPaymentCardContent(order.paymentInfo) | async\\\"\\n      ></cx-card>\\n    </div>\\n    <div *ngIf=\\\"order.deliveryMode\\\" class=\\\"cx-summary-card col-sm-12 col-md-4\\\">\\n      <cx-card\\n        [content]=\\\"getShippingMethodCardContent(order.deliveryMode) | async\\\"\\n      ></cx-card>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], OrderDetailShippingComponent);\n\nlet OrderDetailTotalsComponent = class OrderDetailTotalsComponent {\n    constructor(orderDetailsService) {\n        this.orderDetailsService = orderDetailsService;\n    }\n    ngOnInit() {\n        this.order$ = this.orderDetailsService.getOrderDetails();\n    }\n};\nOrderDetailTotalsComponent.ctorParameters = () => [\n    { type: OrderDetailsService }\n];\nOrderDetailTotalsComponent = __decorate([\n    Component({\n        selector: 'cx-order-details-totals',\n        template: \"<ng-container *ngIf=\\\"order$ | async as order\\\">\\n  <div class=\\\"row justify-content-end\\\">\\n    <div class=\\\"cx-summary col-sm-12 col-md-6 col-lg-5 col-xl-4\\\">\\n      <cx-order-summary [cart]=\\\"order\\\"></cx-order-summary>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], OrderDetailTotalsComponent);\n\nlet OrderDetailActionsComponent = class OrderDetailActionsComponent {\n    constructor(orderDetailsService) {\n        this.orderDetailsService = orderDetailsService;\n        this.order$ = this.orderDetailsService.getOrderDetails();\n    }\n};\nOrderDetailActionsComponent.ctorParameters = () => [\n    { type: OrderDetailsService }\n];\nOrderDetailActionsComponent = __decorate([\n    Component({\n        selector: 'cx-order-details-actions',\n        template: \"<ng-container *ngIf=\\\"order$ | async as order\\\">\\n  <div class=\\\"cx-nav row\\\">\\n    <div class=\\\"col-xs-12 col-md-4 col-lg-3\\\">\\n      <button\\n        [routerLink]=\\\"{ cxRoute: 'orders' } | cxUrl\\\"\\n        class=\\\"btn btn-block btn-action\\\"\\n      >\\n        {{ 'common.back' | cxTranslate }}\\n      </button>\\n    </div>\\n\\n    <div class=\\\"col-xs-12 col-md-4 col-lg-3\\\">\\n      <a\\n        *ngIf=\\\"order.cancellable\\\"\\n        [routerLink]=\\\"\\n          {\\n            cxRoute: 'orderCancel',\\n            params: order\\n          } | cxUrl\\n        \\\"\\n        class=\\\"btn btn-block btn-action\\\"\\n      >\\n        {{ 'orderDetails.cancellationAndReturn.cancelAction' | cxTranslate }}\\n      </a>\\n\\n      <a\\n        *ngIf=\\\"order.returnable\\\"\\n        [routerLink]=\\\"\\n          {\\n            cxRoute: 'orderReturn',\\n            params: order\\n          } | cxUrl\\n        \\\"\\n        class=\\\"btn btn-block btn-action\\\"\\n      >\\n        {{ 'orderDetails.cancellationAndReturn.returnAction' | cxTranslate }}\\n      </a>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], OrderDetailActionsComponent);\n\nconst moduleComponents = [\n    OrderDetailActionsComponent,\n    OrderDetailHeadlineComponent,\n    OrderDetailItemsComponent,\n    OrderDetailTotalsComponent,\n    OrderDetailShippingComponent,\n    TrackingEventsComponent,\n    ConsignmentTrackingComponent,\n    OrderConsignedEntriesComponent,\n];\nconst ɵ0$5 = { pageLabel: 'order', cxRoute: 'orderGuest' }, ɵ1 = { cxRoute: 'orderDetails' };\nlet OrderDetailsModule = class OrderDetailsModule {\n};\nOrderDetailsModule = __decorate([\n    NgModule({\n        imports: [\n            CartSharedModule,\n            CardModule,\n            CommonModule,\n            I18nModule,\n            FeaturesConfigModule,\n            PromotionsModule,\n            UrlModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$5,\n                },\n                {\n                    path: null,\n                    canActivate: [AuthGuard, CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ1,\n                },\n            ]),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    AccountOrderDetailsActionsComponent: {\n                        component: OrderDetailActionsComponent,\n                    },\n                    AccountOrderDetailsHeadlineComponent: {\n                        component: OrderDetailHeadlineComponent,\n                    },\n                    AccountOrderDetailsItemsComponent: {\n                        component: OrderDetailItemsComponent,\n                    },\n                    AccountOrderDetailsTotalsComponent: {\n                        component: OrderDetailTotalsComponent,\n                    },\n                    AccountOrderDetailsShippingComponent: {\n                        component: OrderDetailShippingComponent,\n                    },\n                },\n                features: {\n                    consignmentTracking: '1.2',\n                },\n            }),\n            SpinnerModule,\n        ],\n        providers: [OrderDetailsService],\n        declarations: [...moduleComponents],\n        exports: [...moduleComponents],\n        entryComponents: [...moduleComponents],\n    })\n], OrderDetailsModule);\n\nlet OrderHistoryComponent = class OrderHistoryComponent {\n    constructor(routing, userOrderService, translation) {\n        this.routing = routing;\n        this.userOrderService = userOrderService;\n        this.translation = translation;\n        this.PAGE_SIZE = 5;\n        this.orders$ = this.userOrderService.getOrderHistoryList(this.PAGE_SIZE).pipe(tap((orders) => {\n            if (orders.pagination) {\n                this.sortType = orders.pagination.sort;\n            }\n        }));\n        this.isLoaded$ = this.userOrderService.getOrderHistoryListLoaded();\n        /**\n         * When \"Order Return\" feature is enabled, this component becomes one tab in\n         * TabParagraphContainerComponent. This can be read from TabParagraphContainer.\n         */\n        this.tabTitleParam$ = this.orders$.pipe(map(order => order.pagination.totalResults), filter(totalResults => totalResults !== undefined), take(1));\n    }\n    ngOnDestroy() {\n        this.userOrderService.clearOrderList();\n    }\n    changeSortCode(sortCode) {\n        const event = {\n            sortCode,\n            currentPage: 0,\n        };\n        this.sortType = sortCode;\n        this.fetchOrders(event);\n    }\n    pageChange(page) {\n        const event = {\n            sortCode: this.sortType,\n            currentPage: page,\n        };\n        this.fetchOrders(event);\n    }\n    goToOrderDetail(order) {\n        this.routing.go({\n            cxRoute: 'orderDetails',\n            params: order,\n        });\n    }\n    getSortLabels() {\n        return combineLatest([\n            this.translation.translate('sorting.date'),\n            this.translation.translate('sorting.orderNumber'),\n        ]).pipe(map(([textByDate, textByOrderNumber]) => {\n            return {\n                byDate: textByDate,\n                byOrderNumber: textByOrderNumber,\n            };\n        }));\n    }\n    fetchOrders(event) {\n        this.userOrderService.loadOrderList(this.PAGE_SIZE, event.currentPage, event.sortCode);\n    }\n};\nOrderHistoryComponent.ctorParameters = () => [\n    { type: RoutingService },\n    { type: UserOrderService },\n    { type: TranslationService }\n];\nOrderHistoryComponent = __decorate([\n    Component({\n        selector: 'cx-order-history',\n        template: \"<ng-container *ngIf=\\\"orders$ | async as orders\\\">\\n  <div class=\\\"container\\\">\\n    <!-- HEADER -->\\n    <div class=\\\"cx-order-history-header\\\">\\n      <h3>{{ 'orderHistory.orderHistory' | cxTranslate }}</h3>\\n    </div>\\n\\n    <!-- BODY -->\\n    <div class=\\\"cx-order-history-body\\\">\\n      <ng-container *ngIf=\\\"orders.pagination.totalResults > 0; else noOrder\\\">\\n        <!-- Select Form and Pagination Top -->\\n        <div class=\\\"cx-order-history-sort top row\\\">\\n          <div\\n            class=\\\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\\\"\\n          >\\n            <cx-sorting\\n              [sortOptions]=\\\"orders.sorts\\\"\\n              [sortLabels]=\\\"getSortLabels() | async\\\"\\n              (sortListEvent)=\\\"changeSortCode($event)\\\"\\n              [selectedOption]=\\\"orders.pagination.sort\\\"\\n              placeholder=\\\"{{ 'orderHistory.sortByMostRecent' | cxTranslate }}\\\"\\n            ></cx-sorting>\\n          </div>\\n          <div class=\\\"cx-order-history-pagination\\\">\\n            <cx-pagination\\n              [pagination]=\\\"orders.pagination\\\"\\n              (viewPageEvent)=\\\"pageChange($event)\\\"\\n            ></cx-pagination>\\n          </div>\\n        </div>\\n        <!-- TABLE -->\\n        <table class=\\\"table cx-order-history-table\\\">\\n          <thead class=\\\"cx-order-history-thead-mobile\\\">\\n            <th scope=\\\"col\\\">\\n              {{ 'orderHistory.orderId' | cxTranslate }}\\n            </th>\\n            <th scope=\\\"col\\\">{{ 'orderHistory.date' | cxTranslate }}</th>\\n            <th scope=\\\"col\\\">\\n              {{ 'orderHistory.status' | cxTranslate }}\\n            </th>\\n            <th scope=\\\"col\\\">{{ 'orderHistory.total' | cxTranslate }}</th>\\n          </thead>\\n          <tbody>\\n            <tr\\n              *ngFor=\\\"let order of orders.orders\\\"\\n              (click)=\\\"goToOrderDetail(order)\\\"\\n            >\\n              <td class=\\\"cx-order-history-code\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'orderHistory.orderId' | cxTranslate }}\\n                </div>\\n                <a\\n                  [routerLink]=\\\"\\n                    {\\n                      cxRoute: 'orderDetails',\\n                      params: order\\n                    } | cxUrl\\n                  \\\"\\n                  class=\\\"cx-order-history-value\\\"\\n                >\\n                  {{ order?.code }}</a\\n                >\\n              </td>\\n              <td class=\\\"cx-order-history-placed\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'orderHistory.date' | cxTranslate }}\\n                </div>\\n                <a\\n                  [routerLink]=\\\"\\n                    {\\n                      cxRoute: 'orderDetails',\\n                      params: order\\n                    } | cxUrl\\n                  \\\"\\n                  class=\\\"cx-order-history-value\\\"\\n                  >{{ order?.placed | cxDate: 'longDate' }}</a\\n                >\\n              </td>\\n              <td class=\\\"cx-order-history-status\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'orderHistory.status' | cxTranslate }}\\n                </div>\\n                <a\\n                  [routerLink]=\\\"\\n                    {\\n                      cxRoute: 'orderDetails',\\n                      params: order\\n                    } | cxUrl\\n                  \\\"\\n                  class=\\\"cx-order-history-value\\\"\\n                >\\n                  {{\\n                    'orderDetails.statusDisplay'\\n                      | cxTranslate: { context: order?.statusDisplay }\\n                  }}</a\\n                >\\n              </td>\\n              <td class=\\\"cx-order-history-total\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'orderHistory.total' | cxTranslate }}\\n                </div>\\n                <a\\n                  [routerLink]=\\\"\\n                    {\\n                      cxRoute: 'orderDetails',\\n                      params: order\\n                    } | cxUrl\\n                  \\\"\\n                  class=\\\"cx-order-history-value\\\"\\n                >\\n                  {{ order?.total.formattedValue }}</a\\n                >\\n              </td>\\n            </tr>\\n          </tbody>\\n        </table>\\n        <!-- Select Form and Pagination Bottom -->\\n        <div class=\\\"cx-order-history-sort bottom row\\\">\\n          <div\\n            class=\\\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\\\"\\n          >\\n            <cx-sorting\\n              [sortOptions]=\\\"orders.sorts\\\"\\n              [sortLabels]=\\\"getSortLabels() | async\\\"\\n              (sortListEvent)=\\\"changeSortCode($event)\\\"\\n              [selectedOption]=\\\"orders.pagination.sort\\\"\\n              placeholder=\\\"{{ 'orderHistory.sortByMostRecent' | cxTranslate }}\\\"\\n            ></cx-sorting>\\n          </div>\\n          <div class=\\\"cx-order-history-pagination\\\">\\n            <cx-pagination\\n              [pagination]=\\\"orders.pagination\\\"\\n              (viewPageEvent)=\\\"pageChange($event)\\\"\\n            ></cx-pagination>\\n          </div>\\n        </div>\\n      </ng-container>\\n\\n      <!-- NO ORDER CONTAINER -->\\n      <ng-template #noOrder>\\n        <div class=\\\"cx-order-history-no-order row\\\" *ngIf=\\\"isLoaded$ | async\\\">\\n          <div class=\\\"col-sm-12 col-md-6 col-lg-4\\\">\\n            <div>{{ 'orderHistory.noOrders' | cxTranslate }}</div>\\n            <a\\n              [routerLink]=\\\"{ cxRoute: 'home' } | cxUrl\\\"\\n              routerLinkActive=\\\"active\\\"\\n              class=\\\"btn btn-primary btn-block\\\"\\n              >{{ 'orderHistory.startShopping' | cxTranslate }}</a\\n            >\\n          </div>\\n        </div>\\n      </ng-template>\\n    </div>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], OrderHistoryComponent);\n\nconst ɵ0$6 = { cxRoute: 'orders' };\nlet OrderHistoryModule = class OrderHistoryModule {\n};\nOrderHistoryModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [AuthGuard, CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$6,\n                },\n            ]),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    AccountOrderHistoryComponent: {\n                        component: OrderHistoryComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            RouterModule,\n            FormsModule,\n            NgSelectModule,\n            ListNavigationModule,\n            UrlModule,\n            I18nModule,\n        ],\n        declarations: [OrderHistoryComponent],\n        exports: [OrderHistoryComponent],\n        providers: [UserService],\n        entryComponents: [OrderHistoryComponent],\n    })\n], OrderHistoryModule);\n\nlet ReturnRequestService = class ReturnRequestService {\n    constructor(routingService, returnRequestService, globalMessageService) {\n        this.routingService = routingService;\n        this.returnRequestService = returnRequestService;\n        this.globalMessageService = globalMessageService;\n    }\n    get isCancelling$() {\n        return this.returnRequestService.getCancelReturnRequestLoading();\n    }\n    get isCancelSuccess$() {\n        return this.returnRequestService.getCancelReturnRequestSuccess();\n    }\n    getReturnRequest() {\n        return combineLatest([\n            this.routingService.getRouterState(),\n            this.returnRequestService.getOrderReturnRequest(),\n            this.returnRequestService.getReturnRequestLoading(),\n        ]).pipe(map(([routingState, returnRequest, isLoading]) => [\n            routingState.state.params['returnCode'],\n            returnRequest,\n            isLoading,\n        ]), filter(([returnCode]) => Boolean(returnCode)), tap(([returnCode, returnRequest, isLoading]) => {\n            if ((returnRequest === undefined || returnRequest.rma !== returnCode) &&\n                !isLoading) {\n                this.returnRequestService.loadOrderReturnRequestDetail(returnCode);\n            }\n        }), map(([_, returnRequest]) => returnRequest), filter(Boolean), distinctUntilChanged());\n    }\n    clearReturnRequest() {\n        this.returnRequestService.clearOrderReturnRequestDetail();\n    }\n    cancelReturnRequest(returnRequestCode) {\n        this.returnRequestService.cancelOrderReturnRequest(returnRequestCode, {\n            status: 'CANCELLING',\n        });\n    }\n    cancelSuccess(rma) {\n        this.returnRequestService.resetCancelReturnRequestProcessState();\n        this.globalMessageService.add({\n            key: 'returnRequest.cancelSuccess',\n            params: { rma },\n        }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n        this.routingService.go({\n            cxRoute: 'orders',\n        });\n    }\n    backToList() {\n        this.routingService.go({ cxRoute: 'orders' }, null, {\n            state: {\n                activeTab: 1,\n            },\n        });\n    }\n};\nReturnRequestService.ctorParameters = () => [\n    { type: RoutingService },\n    { type: OrderReturnRequestService },\n    { type: GlobalMessageService }\n];\nReturnRequestService.ɵprov = ɵɵdefineInjectable({ factory: function ReturnRequestService_Factory() { return new ReturnRequestService(ɵɵinject(RoutingService), ɵɵinject(OrderReturnRequestService), ɵɵinject(GlobalMessageService)); }, token: ReturnRequestService, providedIn: \"root\" });\nReturnRequestService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], ReturnRequestService);\n\nlet ReturnRequestOverviewComponent = class ReturnRequestOverviewComponent {\n    constructor(returnRequestService) {\n        this.returnRequestService = returnRequestService;\n        this.returnRequest$ = this.returnRequestService\n            .getReturnRequest()\n            .pipe(tap(returnRequest => (this.rma = returnRequest.rma)));\n        this.isCancelling$ = this.returnRequestService.isCancelling$;\n    }\n    ngOnInit() {\n        this.subscription = this.returnRequestService.isCancelSuccess$.subscribe(success => {\n            if (success) {\n                this.returnRequestService.cancelSuccess(this.rma);\n            }\n        });\n    }\n    cancelReturn(returnRequestCode) {\n        this.returnRequestService.cancelReturnRequest(returnRequestCode);\n    }\n    back() {\n        this.returnRequestService.backToList();\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n};\nReturnRequestOverviewComponent.ctorParameters = () => [\n    { type: ReturnRequestService }\n];\nReturnRequestOverviewComponent = __decorate([\n    Component({\n        selector: 'cx-return-request-overview',\n        template: \"<ng-container *ngIf=\\\"returnRequest$ | async as returnRequest\\\">\\n  <div class=\\\"cx-nav row\\\">\\n    <div class=\\\"col-xs-12 col-md-4 col-lg-3\\\">\\n      <button (click)=\\\"back()\\\" class=\\\"btn btn-block btn-action\\\">\\n        {{ 'common.back' | cxTranslate }}\\n      </button>\\n    </div>\\n\\n    <div class=\\\"col-xs-12 col-md-4 col-lg-3\\\">\\n      <button\\n        *ngIf=\\\"returnRequest.cancellable\\\"\\n        class=\\\"btn btn-block btn-primary\\\"\\n        (click)=\\\"cancelReturn(returnRequest.rma)\\\"\\n        [disabled]=\\\"isCancelling$ | async\\\"\\n      >\\n        {{ 'returnRequest.cancel' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n  <div class=\\\"cx-header row\\\">\\n    <div class=\\\"cx-detail col-sm-12 col-md-4\\\">\\n      <div class=\\\"cx-detail-label\\\">\\n        {{ 'returnRequest.returnRequestId' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-detail-value\\\">{{ returnRequest.rma }}</div>\\n    </div>\\n    <div class=\\\"cx-detail col-sm-12 col-md-4\\\">\\n      <div class=\\\"cx-detail-label\\\">\\n        {{ 'returnRequest.orderCode' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-detail-value\\\">{{ returnRequest.order?.code }}</div>\\n    </div>\\n    <div class=\\\"cx-detail col-sm-12 col-md-4\\\">\\n      <div class=\\\"cx-detail-label\\\">\\n        {{ 'returnRequest.status' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-detail-value\\\">\\n        {{\\n          'returnRequestList.statusDisplay'\\n            | cxTranslate: { context: returnRequest.status }\\n        }}\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ReturnRequestOverviewComponent);\n\nlet ReturnRequestItemsComponent = class ReturnRequestItemsComponent {\n    constructor(returnRequestService) {\n        this.returnRequestService = returnRequestService;\n        this.returnRequest$ = this.returnRequestService.getReturnRequest();\n    }\n};\nReturnRequestItemsComponent.ctorParameters = () => [\n    { type: ReturnRequestService }\n];\nReturnRequestItemsComponent = __decorate([\n    Component({\n        selector: 'cx-return-request-items',\n        template: \"<ng-container *ngIf=\\\"returnRequest$ | async as returnRequest\\\">\\n  <div class=\\\"d-none d-md-block d-lg-block d-xl-block\\\">\\n    <div class=\\\"cx-item-list-header row\\\">\\n      <div class=\\\"cx-item-list-desc col-md-5 col-lg-5 col-xl-6\\\">\\n        {{ 'returnRequest.item' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-item-list-price col-md-2 col-lg-2 col-xl-2\\\">\\n        {{ 'returnRequest.itemPrice' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-item-list-qty col-md-3 col-lg-3 col-xl-2\\\">\\n        {{ 'returnRequest.returnQty' | cxTranslate }}\\n      </div>\\n      <div class=\\\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\\\">\\n        {{ 'returnRequest.total' | cxTranslate }}\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div\\n    class=\\\"cx-item-list-row\\\"\\n    *ngFor=\\\"let returnEntry of returnRequest.returnEntries; let i = index\\\"\\n  >\\n    <div class=\\\"cx-item-list-items\\\">\\n      <div class=\\\"row\\\">\\n        <!-- Item Image -->\\n        <div class=\\\"col-2 cx-image-container\\\">\\n          <cx-media\\n            [container]=\\\"returnEntry.orderEntry?.product.images?.PRIMARY\\\"\\n            format=\\\"thumbnail\\\"\\n          ></cx-media>\\n        </div>\\n        <!-- Item Information -->\\n        <div class=\\\"cx-info col-10\\\">\\n          <div class=\\\"cx-info-container row \\\">\\n            <!-- Item Description -->\\n            <div class=\\\"col-md-3 col-lg-4 col-xl-5\\\">\\n              <div *ngIf=\\\"returnEntry.orderEntry?.product.name\\\" class=\\\"cx-name\\\">\\n                {{ returnEntry.orderEntry?.product.name }}\\n              </div>\\n              <div *ngIf=\\\"returnEntry.orderEntry?.product.code\\\" class=\\\"cx-code\\\">\\n                {{ 'cartItems.id' | cxTranslate }}\\n                {{ returnEntry.orderEntry?.product.code }}\\n              </div>\\n              <!-- Variants -->\\n              <ng-container *cxFeatureLevel=\\\"'!1.5'\\\">\\n                <div\\n                  *ngFor=\\\"\\n                    let variant of returnEntry.orderEntry?.product\\n                      .variantOptionQualifiers\\n                  \\\"\\n                  class=\\\"cx-property\\\"\\n                >\\n                  <div class=\\\"cx-label\\\">{{ variant.name }}</div>\\n                  <div class=\\\"cx-value\\\">{{ variant.value }}</div>\\n                </div>\\n              </ng-container>\\n              <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n                <div\\n                  *ngFor=\\\"\\n                    let variant of (returnEntry.orderEntry?.product\\n                      .baseOptions)[0]?.selected?.variantOptionQualifiers\\n                  \\\"\\n                  class=\\\"cx-property\\\"\\n                >\\n                  <div class=\\\"cx-label\\\" *ngIf=\\\"variant.name\\\">\\n                    {{ variant.name }}:\\n                  </div>\\n                  <div class=\\\"cx-value\\\" *ngIf=\\\"variant.value\\\">\\n                    {{ variant.value }}\\n                  </div>\\n                </div>\\n              </ng-container>\\n            </div>\\n            <!-- Item Price -->\\n            <div\\n              *ngIf=\\\"returnEntry.orderEntry?.basePrice\\\"\\n              class=\\\"cx-price col-md-3 col-lg-2 col-xl-2\\\"\\n            >\\n              <div class=\\\"cx-label d-block d-md-none d-lg-none d-xl-none\\\">\\n                {{ 'returnRequest.itemPrice' | cxTranslate }}\\n              </div>\\n              <div class=\\\"cx-value\\\">\\n                {{ returnEntry.orderEntry?.basePrice?.formattedValue }}\\n              </div>\\n            </div>\\n            <!-- return Quantity -->\\n            <div class=\\\"cx-quantity col-md-3 col-lg-3 col-xl-3\\\">\\n              <div class=\\\"cx-label d-block d-md-none d-lg-none d-xl-none\\\">\\n                {{ 'returnRequest.returnQty' | cxTranslate }}\\n              </div>\\n              <div class=\\\"cx-value\\\">\\n                {{ returnEntry.expectedQuantity }}\\n              </div>\\n            </div>\\n            <!-- Total Price -->\\n            <div class=\\\"cx-total col-md-3 col-lg-3 col-xl-2\\\">\\n              <div class=\\\"cx-label d-block d-md-none d-lg-none d-xl-none\\\">\\n                {{ 'returnRequest.total' | cxTranslate }}\\n              </div>\\n              <div class=\\\"cx-value\\\">\\n                {{ returnEntry.refundAmount?.formattedValue }}\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ReturnRequestItemsComponent);\n\nlet ReturnRequestTotalsComponent = class ReturnRequestTotalsComponent {\n    constructor(returnRequestService) {\n        this.returnRequestService = returnRequestService;\n        this.returnRequest$ = this.returnRequestService.getReturnRequest();\n    }\n    ngOnDestroy() {\n        this.returnRequestService.clearReturnRequest();\n    }\n};\nReturnRequestTotalsComponent.ctorParameters = () => [\n    { type: ReturnRequestService }\n];\nReturnRequestTotalsComponent = __decorate([\n    Component({\n        selector: 'cx-return-request-totals',\n        template: \"<ng-container *ngIf=\\\"returnRequest$ | async as returnRequest\\\">\\n  <div class=\\\"row justify-content-end\\\">\\n    <div class=\\\"cx-summary col-sm-12 col-md-6 col-lg-5 col-xl-4\\\">\\n      <h4>{{ 'returnRequest.summary' | cxTranslate }}</h4>\\n      <div class=\\\"cx-summary-row\\\">\\n        <div class=\\\"col-6 cx-summary-label\\\">\\n          {{ 'returnRequest.subtotal' | cxTranslate }}\\n        </div>\\n        <div class=\\\"col-6 cx-summary-amount\\\">\\n          {{ returnRequest.subTotal?.formattedValue }}\\n        </div>\\n      </div>\\n      <div class=\\\"cx-summary-row\\\">\\n        <div class=\\\"col-6 cx-summary-label\\\">\\n          {{ 'returnRequest.deliveryCode' | cxTranslate }}\\n        </div>\\n        <div class=\\\"col-6 cx-summary-amount\\\">\\n          {{ returnRequest.deliveryCost?.formattedValue }}\\n        </div>\\n      </div>\\n      <div class=\\\"cx-summary-row cx-summary-total\\\">\\n        <div class=\\\"col-6 cx-summary-label\\\">\\n          {{ 'returnRequest.estimatedRefund' | cxTranslate }}\\n        </div>\\n        <div class=\\\"col-6 cx-summary-amount\\\">\\n          {{ returnRequest.totalPrice?.formattedValue }}\\n        </div>\\n      </div>\\n      <div class=\\\"cx-summary-row cx-footnote\\\">\\n        {{ 'returnRequest.note' | cxTranslate }}\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ReturnRequestTotalsComponent);\n\nconst components = [\n    ReturnRequestOverviewComponent,\n    ReturnRequestItemsComponent,\n    ReturnRequestTotalsComponent,\n];\nconst ɵ0$7 = { cxRoute: 'returnRequestDetails' };\nlet ReturnRequestDetailModule = class ReturnRequestDetailModule {\n};\nReturnRequestDetailModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [AuthGuard, CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$7,\n                },\n            ]),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ReturnRequestOverviewComponent: {\n                        component: ReturnRequestOverviewComponent,\n                    },\n                    ReturnRequestItemsComponent: {\n                        component: ReturnRequestItemsComponent,\n                    },\n                    ReturnRequestTotalsComponent: {\n                        component: ReturnRequestTotalsComponent,\n                    },\n                },\n            }),\n            RouterModule,\n            UrlModule,\n            I18nModule,\n            MediaModule,\n            FeaturesConfigModule,\n        ],\n        declarations: [...components],\n        exports: [...components],\n        entryComponents: [...components],\n    })\n], ReturnRequestDetailModule);\n\nlet OrderReturnRequestListComponent = class OrderReturnRequestListComponent {\n    constructor(returnRequestService, translation) {\n        this.returnRequestService = returnRequestService;\n        this.translation = translation;\n        this.PAGE_SIZE = 5;\n        this.returnRequests$ = this.returnRequestService.getOrderReturnRequestList(this.PAGE_SIZE).pipe(tap((requestList) => {\n            if (requestList.pagination) {\n                this.sortType = requestList.pagination.sort;\n            }\n        }));\n        /**\n         * When \"Order Return\" feature is enabled, this component becomes one tab in\n         * TabParagraphContainerComponent. This can be read from TabParagraphContainer.\n         */\n        this.tabTitleParam$ = this.returnRequests$.pipe(map(returnRequests => returnRequests.pagination.totalResults), filter(totalResults => totalResults !== undefined), take(1));\n    }\n    ngOnDestroy() {\n        this.returnRequestService.clearOrderReturnRequestList();\n    }\n    changeSortCode(sortCode) {\n        const event = {\n            sortCode,\n            currentPage: 0,\n        };\n        this.sortType = sortCode;\n        this.fetchReturnRequests(event);\n    }\n    pageChange(page) {\n        const event = {\n            sortCode: this.sortType,\n            currentPage: page,\n        };\n        this.fetchReturnRequests(event);\n    }\n    getSortLabels() {\n        return combineLatest([\n            this.translation.translate('sorting.date'),\n            this.translation.translate('sorting.rma'),\n        ]).pipe(map(([textByDate, textByRma]) => {\n            return {\n                byDate: textByDate,\n                byRMA: textByRma,\n            };\n        }));\n    }\n    fetchReturnRequests(event) {\n        this.returnRequestService.loadOrderReturnRequestList(this.PAGE_SIZE, event.currentPage, event.sortCode);\n    }\n};\nOrderReturnRequestListComponent.ctorParameters = () => [\n    { type: OrderReturnRequestService },\n    { type: TranslationService }\n];\nOrderReturnRequestListComponent = __decorate([\n    Component({\n        selector: 'cx-order-return-request-list',\n        template: \"<ng-container *ngIf=\\\"returnRequests$ | async as returnRequests\\\">\\n  <div class=\\\"container\\\">\\n    <!-- BODY -->\\n    <div class=\\\"cx-order-history-body\\\">\\n      <ng-container *ngIf=\\\"returnRequests.pagination.totalResults > 0\\\">\\n        <!-- Select Form and Pagination Top -->\\n        <div class=\\\"cx-order-history-sort top row\\\">\\n          <div\\n            class=\\\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\\\"\\n          >\\n            <cx-sorting\\n              [sortOptions]=\\\"returnRequests.sorts\\\"\\n              [sortLabels]=\\\"getSortLabels() | async\\\"\\n              (sortListEvent)=\\\"changeSortCode($event)\\\"\\n              [selectedOption]=\\\"returnRequests.pagination.sort\\\"\\n              placeholder=\\\"{{\\n                'returnRequestList.sortByMostRecent' | cxTranslate\\n              }}\\\"\\n            ></cx-sorting>\\n          </div>\\n          <div class=\\\"cx-order-history-pagination\\\">\\n            <cx-pagination\\n              [pagination]=\\\"returnRequests.pagination\\\"\\n              (viewPageEvent)=\\\"pageChange($event)\\\"\\n            ></cx-pagination>\\n          </div>\\n        </div>\\n        <!-- TABLE -->\\n        <table class=\\\"table cx-order-history-table\\\">\\n          <thead class=\\\"cx-order-history-thead-mobile\\\">\\n            <th scope=\\\"col\\\">\\n              {{ 'returnRequestList.returnRequestId' | cxTranslate }}\\n            </th>\\n            <th scope=\\\"col\\\">{{ 'returnRequestList.orderId' | cxTranslate }}</th>\\n            <th scope=\\\"col\\\">\\n              {{ 'returnRequestList.date' | cxTranslate }}\\n            </th>\\n            <th scope=\\\"col\\\">{{ 'returnRequestList.status' | cxTranslate }}</th>\\n          </thead>\\n          <tbody>\\n            <tr *ngFor=\\\"let return of returnRequests.returnRequests\\\">\\n              <td class=\\\"cx-order-history-code\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'returnRequestList.returnRequestId' | cxTranslate }}\\n                </div>\\n                <a\\n                  [routerLink]=\\\"\\n                    {\\n                      cxRoute: 'returnRequestDetails',\\n                      params: return\\n                    } | cxUrl\\n                  \\\"\\n                  class=\\\"cx-order-history-value\\\"\\n                >\\n                  {{ return?.rma }}</a\\n                >\\n              </td>\\n              <td class=\\\"cx-order-history-code\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'returnRequestList.orderId' | cxTranslate }}\\n                </div>\\n                <a\\n                  [routerLink]=\\\"\\n                    {\\n                      cxRoute: 'orderDetails',\\n                      params: return?.order\\n                    } | cxUrl\\n                  \\\"\\n                  class=\\\"cx-order-history-value\\\"\\n                >\\n                  {{ return?.order?.code }}</a\\n                >\\n              </td>\\n\\n              <td class=\\\"cx-order-history-placed\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'returnRequestList.date' | cxTranslate }}\\n                </div>\\n                {{ return?.creationTime | cxDate: 'longDate' }}\\n              </td>\\n              <td class=\\\"cx-order-history-status\\\">\\n                <div class=\\\"d-md-none cx-order-history-label\\\">\\n                  {{ 'returnRequestList.status' | cxTranslate }}\\n                </div>\\n                {{\\n                  'returnRequestList.statusDisplay'\\n                    | cxTranslate: { context: return?.status }\\n                }}\\n              </td>\\n            </tr>\\n          </tbody>\\n        </table>\\n        <!-- Select Form and Pagination Bottom -->\\n        <div class=\\\"cx-order-history-sort bottom row\\\">\\n          <div\\n            class=\\\"cx-order-history-form-group form-group col-sm-12 col-md-4 col-lg-4\\\"\\n          >\\n            <cx-sorting\\n              [sortOptions]=\\\"returnRequests.sorts\\\"\\n              [sortLabels]=\\\"getSortLabels() | async\\\"\\n              (sortListEvent)=\\\"changeSortCode($event)\\\"\\n              [selectedOption]=\\\"returnRequests.pagination.sort\\\"\\n              placeholder=\\\"{{\\n                'returnRequestList.sortByMostRecent' | cxTranslate\\n              }}\\\"\\n            ></cx-sorting>\\n          </div>\\n          <div class=\\\"cx-order-history-pagination\\\">\\n            <cx-pagination\\n              [pagination]=\\\"returnRequests.pagination\\\"\\n              (viewPageEvent)=\\\"pageChange($event)\\\"\\n            ></cx-pagination>\\n          </div>\\n        </div>\\n      </ng-container>\\n    </div>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], OrderReturnRequestListComponent);\n\nlet ReturnRequestListModule = class ReturnRequestListModule {\n};\nReturnRequestListModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    OrderReturnRequestListComponent: {\n                        component: OrderReturnRequestListComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            RouterModule,\n            ListNavigationModule,\n            UrlModule,\n            I18nModule,\n        ],\n        declarations: [OrderReturnRequestListComponent],\n        exports: [OrderReturnRequestListComponent],\n        entryComponents: [OrderReturnRequestListComponent],\n    })\n], ReturnRequestListModule);\n\nlet OrderModule = class OrderModule {\n};\nOrderModule = __decorate([\n    NgModule({\n        imports: [\n            OrderHistoryModule,\n            OrderDetailsModule,\n            OrderCancellationModule,\n            OrderReturnModule,\n            ReturnRequestListModule,\n            ReturnRequestDetailModule,\n        ],\n    })\n], OrderModule);\n\nlet PaymentMethodsComponent = class PaymentMethodsComponent {\n    constructor(userPaymentService, translation) {\n        this.userPaymentService = userPaymentService;\n        this.translation = translation;\n        this.iconTypes = ICON_TYPE;\n    }\n    ngOnInit() {\n        this.paymentMethods$ = this.userPaymentService.getPaymentMethods().pipe(tap(paymentDetails => {\n            // Set first payment method to DEFAULT if none is set\n            if (paymentDetails.length > 0 &&\n                !paymentDetails.find(paymentDetail => paymentDetail.defaultPayment)) {\n                this.setDefaultPaymentMethod(paymentDetails[0]);\n            }\n        }));\n        this.editCard = null;\n        this.loading$ = this.userPaymentService.getPaymentMethodsLoading();\n        this.userPaymentService.loadPaymentMethods();\n    }\n    getCardContent({ defaultPayment, accountHolderName, expiryMonth, expiryYear, cardNumber, cardType, }) {\n        return combineLatest([\n            this.translation.translate('paymentCard.setAsDefault'),\n            this.translation.translate('common.delete'),\n            this.translation.translate('paymentCard.deleteConfirmation'),\n            this.translation.translate('paymentCard.expires', {\n                month: expiryMonth,\n                year: expiryYear,\n            }),\n            this.translation.translate('paymentCard.defaultPaymentMethod'),\n        ]).pipe(map(([textSetAsDefault, textDelete, textDeleteConfirmation, textExpires, textDefaultPaymentMethod,]) => {\n            const actions = [];\n            if (!defaultPayment) {\n                actions.push({ name: textSetAsDefault, event: 'default' });\n            }\n            actions.push({ name: textDelete, event: 'edit' });\n            const card = {\n                header: defaultPayment ? textDefaultPaymentMethod : null,\n                textBold: accountHolderName,\n                text: [cardNumber, textExpires],\n                actions,\n                deleteMsg: textDeleteConfirmation,\n                img: this.getCardIcon(cardType.code),\n            };\n            return card;\n        }));\n    }\n    deletePaymentMethod(paymentMethod) {\n        this.userPaymentService.deletePaymentMethod(paymentMethod.id);\n        this.editCard = null;\n    }\n    setEdit(paymentMethod) {\n        this.editCard = paymentMethod.id;\n    }\n    cancelCard() {\n        this.editCard = null;\n    }\n    setDefaultPaymentMethod(paymentMethod) {\n        this.userPaymentService.setPaymentMethodAsDefault(paymentMethod.id);\n    }\n    getCardIcon(code) {\n        let ccIcon;\n        if (code === 'visa') {\n            ccIcon = this.iconTypes.VISA;\n        }\n        else if (code === 'master' || code === 'mastercard_eurocard') {\n            ccIcon = this.iconTypes.MASTER_CARD;\n        }\n        else if (code === 'diners') {\n            ccIcon = this.iconTypes.DINERS_CLUB;\n        }\n        else if (code === 'amex') {\n            ccIcon = this.iconTypes.AMEX;\n        }\n        else {\n            ccIcon = this.iconTypes.CREDIT_CARD;\n        }\n        return ccIcon;\n    }\n};\nPaymentMethodsComponent.ctorParameters = () => [\n    { type: UserPaymentService },\n    { type: TranslationService }\n];\nPaymentMethodsComponent = __decorate([\n    Component({\n        selector: 'cx-payment-methods',\n        template: \"<ng-container *ngIf=\\\"paymentMethods$ | async as paymentMethods\\\">\\n  <div class=\\\"cx-payment container\\\">\\n    <div class=\\\"cx-header\\\">\\n      <h3>{{ 'paymentMethods.paymentMethods' | cxTranslate }}</h3>\\n    </div>\\n\\n    <div class=\\\"cx-body\\\">\\n      <div class=\\\"cx-msg\\\">\\n        {{\\n          'paymentMethods.newPaymentMethodsAreAddedDuringCheckout' | cxTranslate\\n        }}\\n      </div>\\n      <div *ngIf=\\\"loading$ | async; else cards\\\"><cx-spinner></cx-spinner></div>\\n      <ng-template #cards>\\n        <div class=\\\"cx-existing row\\\">\\n          <div\\n            class=\\\"cx-payment-card col-sm-12 col-md-12 col-lg-6\\\"\\n            *ngFor=\\\"let paymentMethod of paymentMethods\\\"\\n          >\\n            <div class=\\\"cx-payment-inner\\\">\\n              <cx-card\\n                [border]=\\\"true\\\"\\n                [fitToContainer]=\\\"true\\\"\\n                [content]=\\\"getCardContent(paymentMethod) | async\\\"\\n                (deleteCard)=\\\"deletePaymentMethod(paymentMethod)\\\"\\n                (setDefaultCard)=\\\"setDefaultPaymentMethod(paymentMethod)\\\"\\n                (editCard)=\\\"setEdit(paymentMethod)\\\"\\n                [editMode]=\\\"editCard === paymentMethod.id\\\"\\n                (cancelCard)=\\\"cancelCard()\\\"\\n              ></cx-card>\\n            </div>\\n          </div>\\n        </div>\\n      </ng-template>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], PaymentMethodsComponent);\n\nlet PaymentMethodsModule = class PaymentMethodsModule {\n};\nPaymentMethodsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CardModule,\n            SpinnerModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    AccountPaymentDetailsComponent: {\n                        component: PaymentMethodsComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            I18nModule,\n        ],\n        providers: [UserService],\n        declarations: [PaymentMethodsComponent],\n        exports: [PaymentMethodsComponent],\n        entryComponents: [PaymentMethodsComponent],\n    })\n], PaymentMethodsModule);\n\nlet ResetPasswordFormComponent = class ResetPasswordFormComponent {\n    constructor(fb, routingService, userService) {\n        this.fb = fb;\n        this.routingService = routingService;\n        this.userService = userService;\n        this.subscription = new Subscription();\n        this.submited = false;\n        this.form = this.fb.group({\n            password: [\n                '',\n                [Validators.required, CustomFormValidators.passwordValidator],\n            ],\n            repassword: ['', [Validators.required]],\n        }, { validator: this.matchPassword });\n    }\n    ngOnInit() {\n        this.subscription.add(this.routingService\n            .getRouterState()\n            .subscribe(state => (this.token = state.state.queryParams['token'])));\n        this.subscription.add(this.userService.isPasswordReset().subscribe(reset => {\n            if (reset) {\n                this.routingService.go({ cxRoute: 'login' });\n            }\n        }));\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n    resetPassword() {\n        this.submited = true;\n        if (this.form.invalid) {\n            return;\n        }\n        const password = this.form.value['password'];\n        this.userService.resetPassword(this.token, password);\n    }\n    matchPassword(ac) {\n        if (ac.get('password').value !== ac.get('repassword').value) {\n            return { NotEqual: true };\n        }\n    }\n};\nResetPasswordFormComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: RoutingService },\n    { type: UserService }\n];\nResetPasswordFormComponent = __decorate([\n    Component({\n        selector: 'cx-reset-password-form',\n        template: \"<form\\n  (submit)=\\\"resetPassword()\\\"\\n  [formGroup]=\\\"form\\\"\\n  class=\\\"cx-reset-password-form-component\\\"\\n>\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'register.newPassword' | cxTranslate\\n      }}</span>\\n      <input\\n        class=\\\"form-control\\\"\\n        [class.is-invalid]=\\\"\\n          form.get('password').invalid &&\\n          (submited ||\\n            (form.get('password').dirty && form.get('password').touched))\\n        \\\"\\n        type=\\\"password\\\"\\n        name=\\\"password\\\"\\n        placeholder=\\\"{{ 'register.password.placeholder' | cxTranslate }}\\\"\\n        formControlName=\\\"password\\\"\\n      />\\n      <div\\n        class=\\\"invalid-feedback\\\"\\n        *ngIf=\\\"\\n          form.get('password').invalid &&\\n          (submited ||\\n            (form.get('password').dirty && form.get('password').touched))\\n        \\\"\\n      >\\n        <span>{{ 'register.passwordMinRequirements' | cxTranslate }}</span>\\n      </div>\\n    </label>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'register.passwordMinRequirements' | cxTranslate\\n      }}</span>\\n      <input\\n        class=\\\"form-control\\\"\\n        [class.is-invalid]=\\\"\\n          form.hasError('NotEqual') &&\\n          (submited ||\\n            (form.get('repassword').dirty && form.get('repassword').touched))\\n        \\\"\\n        type=\\\"password\\\"\\n        name=\\\"confirmpassword\\\"\\n        placeholder=\\\"{{ 'register.confirmPassword.placeholder' | cxTranslate }}\\\"\\n        formControlName=\\\"repassword\\\"\\n      />\\n      <div\\n        class=\\\"invalid-feedback\\\"\\n        *ngIf=\\\"\\n          form.hasError('NotEqual') &&\\n          (submited ||\\n            (form.get('repassword').dirty && form.get('repassword').touched))\\n        \\\"\\n      >\\n        <span>{{ 'register.bothPasswordMustMatch' | cxTranslate }}</span>\\n      </div>\\n    </label>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <button class=\\\"btn btn-block btn-primary\\\" type=\\\"submit\\\">\\n      {{ 'register.resetPassword' | cxTranslate }}\\n    </button>\\n  </div>\\n</form>\\n\"\n    })\n], ResetPasswordFormComponent);\n\nlet ResetPasswordModule = class ResetPasswordModule {\n};\nResetPasswordModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ResetPasswordComponent: {\n                        component: ResetPasswordFormComponent,\n                        guards: [NotAuthGuard],\n                    },\n                },\n            }),\n            FormsModule,\n            ReactiveFormsModule,\n            RouterModule,\n            I18nModule,\n        ],\n        declarations: [ResetPasswordFormComponent],\n        exports: [ResetPasswordFormComponent],\n        entryComponents: [ResetPasswordFormComponent],\n    })\n], ResetPasswordModule);\n\nlet UpdateEmailFormComponent = class UpdateEmailFormComponent {\n    constructor(fb) {\n        this.fb = fb;\n        this.submited = false;\n        this.saveEmail = new EventEmitter();\n        this.cancelEmail = new EventEmitter();\n        this.form = this.fb.group({\n            email: ['', [Validators.required, CustomFormValidators.emailValidator]],\n            confirmEmail: ['', [Validators.required]],\n            password: ['', [Validators.required]],\n        }, { validator: this.matchEmail });\n    }\n    isEmailConfirmNotValid(formControlName) {\n        return (this.form.hasError('NotEqual') &&\n            (this.submited ||\n                (this.form.get(formControlName).touched &&\n                    this.form.get(formControlName).dirty)));\n    }\n    isNotValid(formControlName) {\n        return FormUtils.isNotValidField(this.form, formControlName, this.submited);\n    }\n    onSubmit() {\n        this.submited = true;\n        if (this.form.invalid) {\n            return;\n        }\n        const newUid = this.form.value.confirmEmail;\n        const password = this.form.value.password;\n        this.saveEmail.emit({ newUid, password });\n    }\n    onCancel() {\n        this.cancelEmail.emit();\n    }\n    matchEmail(ac) {\n        if (ac.get('email').value !== ac.get('confirmEmail').value) {\n            return { NotEqual: true };\n        }\n    }\n};\nUpdateEmailFormComponent.ctorParameters = () => [\n    { type: FormBuilder }\n];\n__decorate([\n    Output()\n], UpdateEmailFormComponent.prototype, \"saveEmail\", void 0);\n__decorate([\n    Output()\n], UpdateEmailFormComponent.prototype, \"cancelEmail\", void 0);\nUpdateEmailFormComponent = __decorate([\n    Component({\n        selector: 'cx-update-email-form',\n        template: \"<form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updateEmailForm.newEmailAddress.label' | cxTranslate\\n        }}</span>\\n        <input\\n          type=\\\"email\\\"\\n          name=\\\"email\\\"\\n          formControlName=\\\"email\\\"\\n          placeholder=\\\"{{\\n            'updateEmailForm.newEmailAddress.placeholder' | cxTranslate\\n          }}\\\"\\n          class=\\\"form-control\\\"\\n          [class.is-invalid]=\\\"isNotValid('email')\\\"\\n        />\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('email')\\\">\\n          <span>{{ 'updateEmailForm.enterValidEmail' | cxTranslate }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-sm-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updateEmailForm.confirmNewEmailAddress.label' | cxTranslate\\n        }}</span>\\n        <input\\n          type=\\\"email\\\"\\n          name=\\\"confirmEmail\\\"\\n          formControlName=\\\"confirmEmail\\\"\\n          placeholder=\\\"{{\\n            'updateEmailForm.confirmNewEmailAddress.placeholder' | cxTranslate\\n          }}\\\"\\n          class=\\\"form-control\\\"\\n          [class.is-invalid]=\\\"isEmailConfirmNotValid('confirmEmail')\\\"\\n        />\\n        <div\\n          class=\\\"invalid-feedback\\\"\\n          *ngIf=\\\"isEmailConfirmNotValid('confirmEmail')\\\"\\n        >\\n          <span>{{ 'updateEmailForm.bothEmailMustMatch' | cxTranslate }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-sm-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updateEmailForm.password.label' | cxTranslate\\n        }}</span>\\n        <input\\n          type=\\\"password\\\"\\n          name=\\\"password\\\"\\n          formControlName=\\\"password\\\"\\n          placeholder=\\\"{{\\n            'updateEmailForm.password.placeholder' | cxTranslate\\n          }}\\\"\\n          class=\\\"form-control\\\"\\n          [class.is-invalid]=\\\"isNotValid('password')\\\"\\n          autocomplete=\\\"new-password\\\"\\n        />\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('password')\\\">\\n          <span>{{ 'updateEmailForm.pleaseInputPassword' | cxTranslate }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-lg-6\\\">\\n      <button\\n        class=\\\"btn btn-block btn-secondary\\\"\\n        type=\\\"button\\\"\\n        (click)=\\\"onCancel()\\\"\\n      >\\n        {{ 'common.cancel' | cxTranslate }}\\n      </button>\\n    </div>\\n    <div class=\\\"col-lg-6\\\">\\n      <button class=\\\"btn btn-block btn-primary\\\" type=\\\"submit\\\">\\n        {{ 'common.save' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</form>\\n\"\n    })\n], UpdateEmailFormComponent);\n\nlet UpdateEmailComponent = class UpdateEmailComponent {\n    constructor(routingService, globalMessageService, userService, authService) {\n        this.routingService = routingService;\n        this.globalMessageService = globalMessageService;\n        this.userService = userService;\n        this.authService = authService;\n        this.subscription = new Subscription();\n    }\n    ngOnInit() {\n        this.userService.resetUpdateEmailResultState();\n        this.subscription.add(this.userService\n            .getUpdateEmailResultSuccess()\n            .subscribe(success => this.onSuccess(success)));\n        this.isLoading$ = this.userService.getUpdateEmailResultLoading();\n    }\n    onCancel() {\n        this.routingService.go({ cxRoute: 'home' });\n    }\n    onSubmit({ newUid, password }) {\n        this.newUid = newUid;\n        this.userService.updateEmail(password, newUid);\n    }\n    onSuccess(success) {\n        if (success) {\n            this.globalMessageService.add({\n                key: 'updateEmailForm.emailUpdateSuccess',\n                params: { newUid: this.newUid },\n            }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n            this.authService.logout();\n            this.routingService.go({ cxRoute: 'login' }, null, {\n                state: {\n                    newUid: this.newUid,\n                },\n            });\n        }\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n        this.userService.resetUpdateEmailResultState();\n    }\n};\nUpdateEmailComponent.ctorParameters = () => [\n    { type: RoutingService },\n    { type: GlobalMessageService },\n    { type: UserService },\n    { type: AuthService }\n];\nUpdateEmailComponent = __decorate([\n    Component({\n        selector: 'cx-update-email',\n        template: \"<ng-container>\\n  <div *ngIf=\\\"isLoading$ | async; else loaded\\\">\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner> </cx-spinner>\\n    </div>\\n  </div>\\n\\n  <ng-template #loaded>\\n    <div class=\\\"container\\\">\\n      <div class=\\\"row d-flex justify-content-center\\\">\\n        <cx-update-email-form\\n          class=\\\"col-md-6\\\"\\n          (saveEmail)=\\\"onSubmit($event)\\\"\\n          (cancelEmail)=\\\"onCancel()\\\"\\n        >\\n        </cx-update-email-form>\\n      </div>\\n    </div>\\n  </ng-template>\\n</ng-container>\\n\"\n    })\n], UpdateEmailComponent);\n\nlet UpdateEmailModule = class UpdateEmailModule {\n};\nUpdateEmailModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    UpdateEmailComponent: {\n                        component: UpdateEmailComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            FormsModule,\n            ReactiveFormsModule,\n            SpinnerModule,\n            I18nModule,\n        ],\n        declarations: [UpdateEmailFormComponent, UpdateEmailComponent],\n        exports: [UpdateEmailComponent, UpdateEmailFormComponent],\n        entryComponents: [UpdateEmailComponent],\n    })\n], UpdateEmailModule);\n\nlet UpdatePasswordFormComponent = class UpdatePasswordFormComponent {\n    constructor(fb) {\n        this.fb = fb;\n        this.submitClicked = false;\n        this.submited = new EventEmitter();\n        this.cancelled = new EventEmitter();\n    }\n    ngOnInit() {\n        this.form = this.fb.group({\n            oldPassword: ['', [Validators.required]],\n            newPassword: [\n                '',\n                [Validators.required, CustomFormValidators.passwordValidator],\n            ],\n            newPasswordConfirm: ['', [Validators.required]],\n        }, { validator: this.matchPassword });\n    }\n    isNotValid(formControlName) {\n        return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);\n    }\n    isPasswordConfirmNotValid() {\n        return (this.form.hasError('NotEqual') &&\n            (this.submitClicked ||\n                (this.form.get('newPasswordConfirm').touched &&\n                    this.form.get('newPasswordConfirm').dirty)));\n    }\n    onSubmit() {\n        this.submitClicked = true;\n        if (this.form.invalid) {\n            return;\n        }\n        this.submited.emit({\n            oldPassword: this.form.value.oldPassword,\n            newPassword: this.form.value.newPassword,\n        });\n    }\n    onCancel() {\n        this.cancelled.emit();\n    }\n    matchPassword(abstractControl) {\n        if (abstractControl.get('newPassword').value !==\n            abstractControl.get('newPasswordConfirm').value) {\n            return { NotEqual: true };\n        }\n        return null;\n    }\n};\nUpdatePasswordFormComponent.ctorParameters = () => [\n    { type: FormBuilder }\n];\n__decorate([\n    Output()\n], UpdatePasswordFormComponent.prototype, \"submited\", void 0);\n__decorate([\n    Output()\n], UpdatePasswordFormComponent.prototype, \"cancelled\", void 0);\nUpdatePasswordFormComponent = __decorate([\n    Component({\n        selector: 'cx-update-password-form',\n        template: \"<form\\n  (ngSubmit)=\\\"onSubmit()\\\"\\n  [formGroup]=\\\"form\\\"\\n  class=\\\"cx-update-password-component \\\"\\n>\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updatePasswordForm.oldPassword.label' | cxTranslate\\n        }}</span>\\n        <input\\n          class=\\\"form-control\\\"\\n          [class.is-invalid]=\\\"isNotValid('oldPassword')\\\"\\n          type=\\\"password\\\"\\n          name=\\\"oldPassword\\\"\\n          placeholder=\\\"{{\\n            'updatePasswordForm.oldPassword.placeholder' | cxTranslate\\n          }}\\\"\\n          formControlName=\\\"oldPassword\\\"\\n        />\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('oldPassword')\\\">\\n          <span>{{\\n            'updatePasswordForm.oldPasswordIsRequired' | cxTranslate\\n          }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updatePasswordForm.newPassword.label' | cxTranslate\\n        }}</span>\\n        <input\\n          class=\\\"form-control\\\"\\n          [class.is-invalid]=\\\"isNotValid('newPassword')\\\"\\n          type=\\\"password\\\"\\n          name=\\\"newPassword\\\"\\n          placeholder=\\\"{{\\n            'updatePasswordForm.newPassword.placeholder' | cxTranslate\\n          }}\\\"\\n          formControlName=\\\"newPassword\\\"\\n        />\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('newPassword')\\\">\\n          <span>{{\\n            'updatePasswordForm.passwordMinRequirements' | cxTranslate\\n          }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updatePasswordForm.confirmPassword.label' | cxTranslate\\n        }}</span>\\n        <input\\n          class=\\\"form-control\\\"\\n          [class.is-invalid]=\\\"isPasswordConfirmNotValid()\\\"\\n          type=\\\"password\\\"\\n          name=\\\"newPasswordConfirm\\\"\\n          placeholder=\\\"{{\\n            'updatePasswordForm.confirmPassword.placeholder' | cxTranslate\\n          }}\\\"\\n          formControlName=\\\"newPasswordConfirm\\\"\\n        />\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isPasswordConfirmNotValid()\\\">\\n          <span>{{\\n            'updatePasswordForm.bothPasswordMustMatch' | cxTranslate\\n          }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-lg-6 col-md-12\\\">\\n      <button\\n        class=\\\"btn btn-block btn-secondary\\\"\\n        type=\\\"button\\\"\\n        (click)=\\\"onCancel()\\\"\\n      >\\n        {{ 'common.cancel' | cxTranslate }}\\n      </button>\\n    </div>\\n    <div class=\\\"col-lg-6 col-md-12\\\">\\n      <button class=\\\"btn btn-block btn-primary\\\" type=\\\"submit\\\">\\n        {{ 'common.save' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</form>\\n\"\n    })\n], UpdatePasswordFormComponent);\n\nlet UpdatePasswordComponent = class UpdatePasswordComponent {\n    constructor(routingService, userService, globalMessageService) {\n        this.routingService = routingService;\n        this.userService = userService;\n        this.globalMessageService = globalMessageService;\n        this.subscription = new Subscription();\n    }\n    ngOnInit() {\n        this.userService.resetUpdatePasswordProcessState();\n        this.loading$ = this.userService.getUpdatePasswordResultLoading();\n        this.subscription.add(this.userService\n            .getUpdatePasswordResultSuccess()\n            .subscribe(success => this.onSuccess(success)));\n    }\n    onSuccess(success) {\n        if (success) {\n            this.globalMessageService.add({ key: 'updatePasswordForm.passwordUpdateSuccess' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n            this.routingService.go({ cxRoute: 'home' });\n        }\n    }\n    onCancel() {\n        this.routingService.go({ cxRoute: 'home' });\n    }\n    onSubmit({ oldPassword, newPassword, }) {\n        this.userService.updatePassword(oldPassword, newPassword);\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n        this.userService.resetUpdatePasswordProcessState();\n    }\n};\nUpdatePasswordComponent.ctorParameters = () => [\n    { type: RoutingService },\n    { type: UserService },\n    { type: GlobalMessageService }\n];\nUpdatePasswordComponent = __decorate([\n    Component({\n        selector: 'cx-update-password',\n        template: \"<ng-container>\\n  <div *ngIf=\\\"loading$ | async; else updateForm\\\">\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </div>\\n\\n  <ng-template #updateForm>\\n    <div class=\\\"container\\\">\\n      <div class=\\\"row d-flex justify-content-center\\\">\\n        <cx-update-password-form\\n          class=\\\"col-md-6\\\"\\n          (cancelled)=\\\"onCancel()\\\"\\n          (submited)=\\\"onSubmit($event)\\\"\\n        ></cx-update-password-form>\\n      </div>\\n    </div>\\n  </ng-template>\\n</ng-container>\\n\"\n    })\n], UpdatePasswordComponent);\n\nlet UpdatePasswordModule = class UpdatePasswordModule {\n};\nUpdatePasswordModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    UpdatePasswordComponent: {\n                        component: UpdatePasswordComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            SpinnerModule,\n            I18nModule,\n        ],\n        declarations: [UpdatePasswordComponent, UpdatePasswordFormComponent],\n        exports: [UpdatePasswordComponent, UpdatePasswordFormComponent],\n        entryComponents: [UpdatePasswordComponent],\n    })\n], UpdatePasswordModule);\n\nlet UpdateProfileFormComponent = class UpdateProfileFormComponent {\n    constructor(fb) {\n        this.fb = fb;\n        this.submited = new EventEmitter();\n        this.cancelled = new EventEmitter();\n        this.form = this.fb.group({\n            titleCode: [''],\n            firstName: ['', Validators.required],\n            lastName: ['', Validators.required],\n        });\n        this.submitClicked = false;\n    }\n    ngOnInit() {\n        if (this.user) {\n            this.form.patchValue(this.user);\n        }\n    }\n    isNotValid(formControlName) {\n        return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);\n    }\n    onSubmit() {\n        this.submitClicked = true;\n        if (this.form.invalid) {\n            return;\n        }\n        this.submited.emit({\n            userUpdates: Object.assign({}, this.form.value),\n        });\n    }\n    onCancel() {\n        this.cancelled.emit();\n    }\n};\nUpdateProfileFormComponent.ctorParameters = () => [\n    { type: FormBuilder }\n];\n__decorate([\n    Input()\n], UpdateProfileFormComponent.prototype, \"user\", void 0);\n__decorate([\n    Input()\n], UpdateProfileFormComponent.prototype, \"titles\", void 0);\n__decorate([\n    Output()\n], UpdateProfileFormComponent.prototype, \"submited\", void 0);\n__decorate([\n    Output()\n], UpdateProfileFormComponent.prototype, \"cancelled\", void 0);\nUpdateProfileFormComponent = __decorate([\n    Component({\n        selector: 'cx-update-profile-form',\n        template: \"<form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updateProfileForm.title' | cxTranslate\\n        }}</span>\\n        <select formControlName=\\\"titleCode\\\" class=\\\"form-control\\\">\\n          <option value=\\\"\\\">{{ 'updateProfileForm.none' | cxTranslate }}</option>\\n          <option *ngFor=\\\"let title of titles\\\" [value]=\\\"title.code\\\">{{\\n            title.name\\n          }}</option>\\n        </select>\\n      </label>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updateProfileForm.firstName.label' | cxTranslate\\n        }}</span>\\n        <input\\n          type=\\\"text\\\"\\n          class=\\\"form-control\\\"\\n          name=\\\"firstName\\\"\\n          placeholder=\\\"{{\\n            'updateProfileForm.firstName.placeholder' | cxTranslate\\n          }}\\\"\\n          formControlName=\\\"firstName\\\"\\n          [class.is-invalid]=\\\"isNotValid('firstName')\\\"\\n        />\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('firstName')\\\">\\n          <span>{{\\n            'updateProfileForm.firstNameIsRequired' | cxTranslate\\n          }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-md-12\\\">\\n      <label>\\n        <span class=\\\"label-content\\\">{{\\n          'updateProfileForm.lastName.label' | cxTranslate\\n        }}</span>\\n        <input\\n          type=\\\"text\\\"\\n          class=\\\"form-control\\\"\\n          name=\\\"lastName\\\"\\n          placeholder=\\\"{{\\n            'updateProfileForm.lastName.placeholder' | cxTranslate\\n          }}\\\"\\n          formControlName=\\\"lastName\\\"\\n          [class.is-invalid]=\\\"isNotValid('lastName')\\\"\\n        />\\n        <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('lastName')\\\">\\n          <span>{{\\n            'updateProfileForm.lastNameIsRequired' | cxTranslate\\n          }}</span>\\n        </div>\\n      </label>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"form-group row\\\">\\n    <div class=\\\"col-lg-6 col-md-12\\\">\\n      <button\\n        class=\\\"btn btn-block btn-secondary\\\"\\n        type=\\\"button\\\"\\n        (click)=\\\"onCancel()\\\"\\n      >\\n        {{ 'common.cancel' | cxTranslate }}\\n      </button>\\n    </div>\\n    <div class=\\\"col-lg-6 col-md-12\\\">\\n      <button class=\\\"btn btn-block btn-primary\\\" type=\\\"submit\\\">\\n        {{ 'common.save' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</form>\\n\"\n    })\n], UpdateProfileFormComponent);\n\nlet UpdateProfileComponent = class UpdateProfileComponent {\n    constructor(routingService, userService, globalMessageService) {\n        this.routingService = routingService;\n        this.userService = userService;\n        this.globalMessageService = globalMessageService;\n        this.subscription = new Subscription();\n    }\n    ngOnInit() {\n        // reset the previous form processing state\n        this.userService.resetUpdatePersonalDetailsProcessingState();\n        this.user$ = this.userService.get();\n        this.titles$ = this.userService.getTitles().pipe(tap(titles => {\n            if (Object.keys(titles).length === 0) {\n                this.userService.loadTitles();\n            }\n        }));\n        this.loading$ = this.userService.getUpdatePersonalDetailsResultLoading();\n        this.subscription.add(this.userService\n            .getUpdatePersonalDetailsResultSuccess()\n            .subscribe(success => this.onSuccess(success)));\n    }\n    onSuccess(success) {\n        if (success) {\n            this.globalMessageService.add({ key: 'updateProfileForm.profileUpdateSuccess' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n            this.routingService.go({ cxRoute: 'home' });\n        }\n    }\n    onCancel() {\n        this.routingService.go({ cxRoute: 'home' });\n    }\n    onSubmit({ userUpdates }) {\n        this.userService.updatePersonalDetails(userUpdates);\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n        // clean up the state\n        this.userService.resetUpdatePersonalDetailsProcessingState();\n    }\n};\nUpdateProfileComponent.ctorParameters = () => [\n    { type: RoutingService },\n    { type: UserService },\n    { type: GlobalMessageService }\n];\nUpdateProfileComponent = __decorate([\n    Component({\n        selector: 'cx-update-profile',\n        template: \"<ng-container>\\n  <div *ngIf=\\\"loading$ | async; else updateForm\\\">\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </div>\\n\\n  <ng-template #updateForm>\\n    <div class=\\\"container\\\">\\n      <div class=\\\"row d-flex justify-content-center\\\">\\n        <cx-update-profile-form\\n          *ngIf=\\\"(user$ | async)?.uid\\\"\\n          class=\\\"col-md-6\\\"\\n          [user]=\\\"user$ | async\\\"\\n          [titles]=\\\"titles$ | async\\\"\\n          (cancelled)=\\\"onCancel()\\\"\\n          (submited)=\\\"onSubmit($event)\\\"\\n        ></cx-update-profile-form>\\n      </div>\\n    </div>\\n  </ng-template>\\n</ng-container>\\n\"\n    })\n], UpdateProfileComponent);\n\nlet UpdateProfileModule = class UpdateProfileModule {\n};\nUpdateProfileModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    UpdateProfileComponent: {\n                        component: UpdateProfileComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            FormsModule,\n            ReactiveFormsModule,\n            SpinnerModule,\n            I18nModule,\n        ],\n        declarations: [UpdateProfileComponent, UpdateProfileFormComponent],\n        exports: [UpdateProfileComponent, UpdateProfileFormComponent],\n        entryComponents: [UpdateProfileComponent],\n    })\n], UpdateProfileModule);\n\nlet MyCouponsComponentService = class MyCouponsComponentService {\n    constructor(routingService, translation) {\n        this.routingService = routingService;\n        this.translation = translation;\n        this.RELEVANCE = ':relevance';\n        this.CUSTOMER_COUPON_CODE = ':customerCouponCode:';\n    }\n    launchSearchPage(coupon) {\n        this.routingService.go({\n            cxRoute: 'search',\n            params: { query: this.buildSearchParam(coupon) },\n        }, { couponcode: coupon.couponId });\n    }\n    buildSearchParam(coupon) {\n        return coupon.allProductsApplicable\n            ? this.RELEVANCE\n            : this.RELEVANCE + this.CUSTOMER_COUPON_CODE + coupon.couponId;\n    }\n    getSortLabels() {\n        return combineLatest([\n            this.translation.translate('myCoupons.startDateAsc'),\n            this.translation.translate('myCoupons.startDateDesc'),\n            this.translation.translate('myCoupons.endDateAsc'),\n            this.translation.translate('myCoupons.endDateDesc'),\n        ]).pipe(map(([textByStartDateAsc, textByStartDateDesc, textByEndDateAsc, textByEndDateDesc,]) => {\n            return {\n                byStartDateAsc: textByStartDateAsc,\n                byStartDateDesc: textByStartDateDesc,\n                byEndDateAsc: textByEndDateAsc,\n                byEndDateDesc: textByEndDateDesc,\n            };\n        }));\n    }\n};\nMyCouponsComponentService.ctorParameters = () => [\n    { type: RoutingService },\n    { type: TranslationService }\n];\nMyCouponsComponentService.ɵprov = ɵɵdefineInjectable({ factory: function MyCouponsComponentService_Factory() { return new MyCouponsComponentService(ɵɵinject(RoutingService), ɵɵinject(TranslationService)); }, token: MyCouponsComponentService, providedIn: \"root\" });\nMyCouponsComponentService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], MyCouponsComponentService);\n\nlet MyCouponsComponent = class MyCouponsComponent {\n    constructor(couponService, myCouponsComponentService) {\n        this.couponService = couponService;\n        this.myCouponsComponentService = myCouponsComponentService;\n        this.iconTypes = ICON_TYPE;\n        this.subscriptions = new Subscription();\n        this.PAGE_SIZE = 10;\n        this.sortMapping = {\n            byStartDateAsc: 'startDate:asc',\n            byStartDateDesc: 'startDate:desc',\n            byEndDateAsc: 'endDate:asc',\n            byEndDateDesc: 'endDate:desc',\n        };\n        this.sort = 'byStartDateAsc';\n        this.sortOptions = [\n            {\n                code: 'byStartDateAsc',\n                selected: false,\n            },\n            {\n                code: 'byStartDateDesc',\n                selected: false,\n            },\n            {\n                code: 'byEndDateAsc',\n                selected: false,\n            },\n            {\n                code: 'byEndDateDesc',\n                selected: false,\n            },\n        ];\n    }\n    ngOnInit() {\n        this.couponService.loadCustomerCoupons(this.PAGE_SIZE);\n        this.couponResult$ = this.couponService\n            .getCustomerCoupons(this.PAGE_SIZE)\n            .pipe(tap(coupons => (this.pagination = {\n            currentPage: coupons.pagination.page,\n            pageSize: coupons.pagination.count,\n            totalPages: coupons.pagination.totalPages,\n            totalResults: coupons.pagination.totalCount,\n            sort: this.sort,\n        })));\n        this.couponsLoading$ = this.couponService.getCustomerCouponsLoading();\n        this.couponSubscriptionLoading$ = combineLatest([\n            this.couponService.getSubscribeCustomerCouponResultLoading(),\n            this.couponService.getUnsubscribeCustomerCouponResultLoading(),\n        ]).pipe(map(([subscribing, unsubscribing]) => subscribing || unsubscribing));\n        this.sortLabels = this.myCouponsComponentService.getSortLabels();\n        this.subscriptions\n            .add(this.couponService\n            .getSubscribeCustomerCouponResultError()\n            .subscribe(error => {\n            this.subscriptionFail(error);\n        }))\n            .add(this.couponService\n            .getUnsubscribeCustomerCouponResultError()\n            .subscribe(error => {\n            this.subscriptionFail(error);\n        }));\n    }\n    subscriptionFail(error) {\n        if (error) {\n            this.couponService.loadCustomerCoupons(this.PAGE_SIZE);\n        }\n    }\n    sortChange(sort) {\n        this.sort = sort;\n        this.couponService.loadCustomerCoupons(this.PAGE_SIZE, this.pagination.currentPage, this.sortMapping[sort]);\n    }\n    pageChange(page) {\n        this.couponService.loadCustomerCoupons(this.PAGE_SIZE, page, this.sortMapping[this.sort]);\n    }\n    notificationChange({ couponId, notification, }) {\n        if (notification) {\n            this.couponService.subscribeCustomerCoupon(couponId);\n        }\n        else {\n            this.couponService.unsubscribeCustomerCoupon(couponId);\n        }\n    }\n    ngOnDestroy() {\n        this.subscriptions.unsubscribe();\n    }\n};\nMyCouponsComponent.ctorParameters = () => [\n    { type: CustomerCouponService },\n    { type: MyCouponsComponentService }\n];\nMyCouponsComponent = __decorate([\n    Component({\n        selector: 'cx-my-coupons',\n        template: \"<div class=\\\"cx-section\\\">\\n  <ng-container *ngIf=\\\"!(couponsLoading$ | async); else loading\\\">\\n    <ng-container *ngIf=\\\"couponResult$ | async as couponResult\\\">\\n      <div class=\\\"cx-my-coupons-header\\\">\\n        <h3>{{ 'myCoupons.myCoupons' | cxTranslate }}</h3>\\n      </div>\\n\\n      <ng-container\\n        *ngIf=\\\"couponResult.pagination.totalCount > 0; else noCoupons\\\"\\n      >\\n        <div class=\\\"cx-my-coupons-sort top row\\\">\\n          <div\\n            class=\\\"cx-my-coupons-form-group form-group col-sm-12 col-md-4 col-lg-4\\\"\\n          >\\n            <cx-sorting\\n              [sortOptions]=\\\"sortOptions\\\"\\n              [sortLabels]=\\\"sortLabels | async\\\"\\n              (sortListEvent)=\\\"sortChange($event)\\\"\\n              [selectedOption]=\\\"sort\\\"\\n            >\\n            </cx-sorting>\\n          </div>\\n          <div class=\\\"cx-my-coupons-pagination cx-mycoupon-thead-mobile\\\">\\n            <cx-pagination\\n              [pagination]=\\\"pagination\\\"\\n              (viewPageEvent)=\\\"pageChange($event)\\\"\\n            ></cx-pagination>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"row cx-coupon-deck\\\">\\n          <div\\n            *ngFor=\\\"let coupon of couponResult.coupons\\\"\\n            class=\\\"col-md-6 cx-coupon-card\\\"\\n          >\\n            <cx-coupon-card\\n              [coupon]=\\\"coupon\\\"\\n              [couponSubscriptionLoading$]=\\\"couponSubscriptionLoading$\\\"\\n              (notificationChanged)=\\\"notificationChange($event)\\\"\\n            ></cx-coupon-card>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"cx-my-coupons-sort bottom row\\\">\\n          <div\\n            class=\\\"cx-my-coupons-form-group form-group cx-mycoupon-thead-mobile col-sm-12 col-md-4 col-lg-4\\\"\\n          >\\n            <cx-sorting\\n              [sortOptions]=\\\"sortOptions\\\"\\n              [sortLabels]=\\\"sortLabels | async\\\"\\n              (sortListEvent)=\\\"sortChange($event)\\\"\\n              [selectedOption]=\\\"sort\\\"\\n              placeholder=\\\"{{ 'myCoupons.sortByMostRecent' | cxTranslate }}\\\"\\n            >\\n            </cx-sorting>\\n          </div>\\n          <div class=\\\"cx-my-coupons-pagination\\\">\\n            <cx-pagination\\n              [pagination]=\\\"pagination\\\"\\n              (viewPageEvent)=\\\"pageChange($event)\\\"\\n            ></cx-pagination>\\n          </div>\\n        </div>\\n        <div class=\\\"cx-my-coupons-notes\\\">\\n          <span>\\n            <cx-icon [type]=\\\"iconTypes.INFO\\\"></cx-icon>\\n            {{ 'myCoupons.notesPreffix' | cxTranslate\\n            }}<a [routerLink]=\\\"['/my-account/notification-preference']\\\">{{\\n              'myCoupons.notesLink' | cxTranslate\\n            }}</a\\n            >{{ 'myCoupons.notesSuffix' | cxTranslate }}</span\\n          >\\n        </div>\\n      </ng-container>\\n    </ng-container>\\n\\n    <ng-template #noCoupons>\\n      <section>\\n        <p class=\\\"cx-section-msg\\\">\\n          {{ 'myCoupons.noCouponsMessage' | cxTranslate }}\\n        </p>\\n      </section>\\n    </ng-template>\\n  </ng-container>\\n\\n  <ng-template #loading>\\n    <div class=\\\"col-md-12 cx-coupon-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </ng-template>\\n</div>\\n\"\n    })\n], MyCouponsComponent);\n\nlet CouponDialogComponent = class CouponDialogComponent {\n    constructor(modalService) {\n        this.modalService = modalService;\n        this.iconTypes = ICON_TYPE;\n    }\n    dismissModal(reason) {\n        this.modalService.dismissActiveModal(reason);\n    }\n};\nCouponDialogComponent.ctorParameters = () => [\n    { type: ModalService }\n];\n__decorate([\n    ViewChild('dialog', { read: ElementRef })\n], CouponDialogComponent.prototype, \"dialog\", void 0);\nCouponDialogComponent = __decorate([\n    Component({\n        selector: 'cx-coupon-dialog',\n        template: \"<div #dialog>\\n  <!-- Modal Header -->\\n\\n  <div class=\\\"cx-dialog-header modal-header\\\">\\n    <div class=\\\"cx-dialog-title modal-title\\\">\\n      {{ 'myCoupons.dialogTitle' | cxTranslate }}\\n    </div>\\n    <button\\n      type=\\\"button\\\"\\n      class=\\\"close\\\"\\n      aria-label=\\\"Close\\\"\\n      (click)=\\\"dismissModal('Cross click')\\\"\\n    >\\n      <span aria-hidden=\\\"true\\\">\\n        <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n      </span>\\n    </button>\\n  </div>\\n  <!-- Modal Body -->\\n  <div class=\\\"cx-dialog-body modal-body\\\">\\n    <div class=\\\"cx-dialog-row\\\">\\n      <div class=\\\"cx-dialog-item col-sm-12 col-md-12\\\">\\n        <div class=\\\"cx-coupon-card-head\\\">\\n          <span class=\\\"card-label-bold cx-coupon-card-id\\\">{{\\n            coupon?.couponId\\n          }}</span>\\n          <span>: {{ coupon?.name }}</span>\\n        </div>\\n        <div class=\\\"cx-coupon-description\\\">{{ coupon?.description }}</div>\\n\\n        <div class=\\\"cx-coupon-dialog-date\\\">\\n          <p>{{ 'myCoupons.effectiveTitle' | cxTranslate }}</p>\\n          <div class=\\\"cx-coupon-date\\\">\\n            {{ coupon?.startDate | cxDate: 'medium' }} -\\n            {{ coupon?.endDate | cxDate: 'medium' }}\\n          </div>\\n        </div>\\n\\n        <div class=\\\"cx-coupon-dialog-status\\\">\\n          <p>{{ 'myCoupons.status' | cxTranslate }}</p>\\n          <div class=\\\"cx-coupon-status {{ coupon?.status | lowercase }}\\\">\\n            {{ 'myCoupons.' + coupon?.status | cxTranslate }}\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], CouponDialogComponent);\n\nlet CouponCardComponent = class CouponCardComponent {\n    constructor(modalService, myCouponsComponentService) {\n        this.modalService = modalService;\n        this.myCouponsComponentService = myCouponsComponentService;\n        this.notificationChanged = new EventEmitter();\n    }\n    onSubscriptionChange() {\n        this.notificationChanged.emit({\n            couponId: this.coupon.couponId,\n            notification: !this.coupon.notificationOn,\n        });\n    }\n    readMore() {\n        let modalInstance;\n        this.modalRef = this.modalService.open(CouponDialogComponent, {\n            centered: true,\n            size: 'lg',\n        });\n        modalInstance = this.modalRef.componentInstance;\n        modalInstance.coupon = this.coupon;\n    }\n    findProducts() {\n        this.myCouponsComponentService.launchSearchPage(this.coupon);\n    }\n};\nCouponCardComponent.ctorParameters = () => [\n    { type: ModalService },\n    { type: MyCouponsComponentService }\n];\n__decorate([\n    Input()\n], CouponCardComponent.prototype, \"coupon\", void 0);\n__decorate([\n    Input()\n], CouponCardComponent.prototype, \"couponSubscriptionLoading$\", void 0);\n__decorate([\n    Output()\n], CouponCardComponent.prototype, \"notificationChanged\", void 0);\nCouponCardComponent = __decorate([\n    Component({\n        selector: 'cx-coupon-card',\n        template: \"<div class=\\\"card\\\">\\n  <div class=\\\"card-body cx-card-body\\\">\\n    <div class=\\\"cx-coupon-data\\\">\\n      <div class=\\\"cx-coupon-card-row top\\\">\\n        <div class=\\\"cx-coupon-card-head\\\">\\n          <span class=\\\"card-label-bold cx-coupon-card-id\\\">{{\\n            coupon?.couponId\\n          }}</span>\\n          <span>: {{ coupon?.name }}</span>\\n        </div>\\n\\n        <div class=\\\"cx-coupon-status {{ coupon?.status | lowercase }}\\\">\\n          {{ 'myCoupons.' + coupon?.status | cxTranslate }}\\n        </div>\\n      </div>\\n\\n      <div class=\\\"cx-coupon-card-date\\\">\\n        <p>{{ 'myCoupons.effectiveTitle' | cxTranslate }}</p>\\n        <div class=\\\"cx-coupon-date\\\">\\n          <div class=\\\"cx-coupon-date-start\\\">\\n            {{ coupon?.startDate | cxDate: 'medium' }} -&nbsp;\\n          </div>\\n          <div class=\\\"cx-coupon-date-end\\\">\\n            {{ coupon?.endDate | cxDate: 'medium' }}\\n          </div>\\n        </div>\\n      </div>\\n\\n      <a (click)=\\\"readMore()\\\" class=\\\"cx-card-read-more\\\">{{\\n        'myCoupons.readMore' | cxTranslate\\n      }}</a>\\n\\n      <div class=\\\"cx-coupon-card-row bottom\\\">\\n        <div class=\\\"cx-coupon-notification form-check\\\">\\n          <label>\\n            <input\\n              type=\\\"checkbox\\\"\\n              class=\\\"form-check-input\\\"\\n              [checked]=\\\"coupon?.notificationOn\\\"\\n              [class.disabled]=\\\"couponSubscriptionLoading$ | async\\\"\\n              [disabled]=\\\"couponSubscriptionLoading$ | async\\\"\\n              (change)=\\\"onSubscriptionChange()\\\"\\n            />\\n            <span class=\\\"form-check-label\\\">\\n              {{ 'myCoupons.notification' | cxTranslate }}\\n            </span>\\n          </label>\\n        </div>\\n\\n        <div class=\\\"cx-coupon-find-product col-lg-6 col-md-12 col-sm-6\\\">\\n          <button class=\\\"btn btn-block btn-action\\\" (click)=\\\"findProducts()\\\">\\n            {{ 'myCoupons.findProducts' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], CouponCardComponent);\n\nlet CouponClaimComponent = class CouponClaimComponent {\n    constructor(couponService, routingService, messageService) {\n        this.couponService = couponService;\n        this.routingService = routingService;\n        this.messageService = messageService;\n    }\n    ngOnInit() {\n        this.routingService\n            .getRouterState()\n            .subscribe(k => {\n            const couponCode = k.state.params.couponCode;\n            if (couponCode) {\n                this.couponService.claimCustomerCoupon(couponCode);\n                this.subscription = this.couponService\n                    .getClaimCustomerCouponResultSuccess()\n                    .subscribe(success => {\n                    if (success) {\n                        this.messageService.add({ key: 'myCoupons.claimCustomerCoupon' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n                    }\n                    this.routingService.go({ cxRoute: 'coupons' });\n                });\n            }\n            else {\n                this.routingService.go({ cxRoute: 'notFound' });\n            }\n        })\n            .unsubscribe();\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n};\nCouponClaimComponent.ctorParameters = () => [\n    { type: CustomerCouponService },\n    { type: RoutingService },\n    { type: GlobalMessageService }\n];\nCouponClaimComponent = __decorate([\n    Component({\n        template: \"\",\n        selector: 'cx-coupon-claim'\n    })\n], CouponClaimComponent);\n\nconst ɵ0$8 = { cxRoute: 'couponClaim' };\nlet MyCouponsModule = class MyCouponsModule {\n};\nMyCouponsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CardModule,\n            SpinnerModule,\n            I18nModule,\n            RouterModule,\n            UrlModule,\n            IconModule,\n            ListNavigationModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    MyCouponsComponent: {\n                        component: MyCouponsComponent,\n                        guards: [AuthGuard],\n                    },\n                    CouponClaimComponent: {\n                        component: CouponClaimComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [AuthGuard, CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$8,\n                },\n            ]),\n        ],\n        declarations: [\n            MyCouponsComponent,\n            CouponCardComponent,\n            CouponDialogComponent,\n            CouponClaimComponent,\n        ],\n        exports: [MyCouponsComponent, CouponClaimComponent],\n        entryComponents: [\n            MyCouponsComponent,\n            CouponDialogComponent,\n            CouponClaimComponent,\n        ],\n    })\n], MyCouponsModule);\n\nlet NotificationPreferenceComponent = class NotificationPreferenceComponent {\n    constructor(notificationPreferenceService) {\n        this.notificationPreferenceService = notificationPreferenceService;\n        this.preferences = [];\n    }\n    ngOnInit() {\n        this.notificationPreferenceService.resetNotificationPreferences();\n        this.preferences$ = this.notificationPreferenceService\n            .getPreferences()\n            .pipe(tap(preferences => (this.preferences = preferences)));\n        this.notificationPreferenceService.loadPreferences();\n        this.isLoading$ = combineLatest([\n            this.notificationPreferenceService.getPreferencesLoading(),\n            this.notificationPreferenceService.getUpdatePreferencesResultLoading(),\n        ]).pipe(map(([prefsLoading, updateLoading]) => prefsLoading || updateLoading));\n    }\n    updatePreference(preference) {\n        const updatedPreferences = [];\n        this.preferences.forEach(p => {\n            if (p.channel === preference.channel) {\n                updatedPreferences.push(Object.assign(Object.assign({}, p), { enabled: !p.enabled }));\n            }\n            else {\n                updatedPreferences.push(p);\n            }\n        });\n        this.notificationPreferenceService.updatePreferences(updatedPreferences);\n    }\n};\nNotificationPreferenceComponent.ctorParameters = () => [\n    { type: UserNotificationPreferenceService }\n];\nNotificationPreferenceComponent = __decorate([\n    Component({\n        selector: 'cx-notification-preference',\n        template: \"<ng-container *ngIf=\\\"preferences$ | async as preferences\\\">\\n  <div *ngIf=\\\"preferences.length > 0; else loading\\\">\\n    <div class=\\\"row d-flex justify-content-center\\\">\\n      <div class=\\\"col-md-8\\\">\\n        <div class=\\\"pref-header\\\">\\n          {{ 'notificationPreference.message' | cxTranslate }}\\n        </div>\\n        <div class=\\\"form-check cx-notification-channels\\\">\\n          <ng-container *ngFor=\\\"let preference of preferences\\\">\\n            <label *ngIf=\\\"preference.visible\\\" class=\\\"pref-channel\\\">\\n              <input\\n                class=\\\"form-check-input cx-np-checkbox\\\"\\n                role=\\\"checkbox\\\"\\n                type=\\\"checkbox\\\"\\n                [checked]=\\\"preference.enabled\\\"\\n                (change)=\\\"updatePreference(preference)\\\"\\n                [disabled]=\\\"isLoading$ | async\\\"\\n              />\\n              <span class=\\\"form-check-label\\\">\\n                {{\\n                  'notificationPreference.' + preference.channel | cxTranslate\\n                }}\\n                {{ preference.value }}\\n              </span>\\n            </label>\\n          </ng-container>\\n        </div>\\n        <label class=\\\"pref-note\\\"\\n          ><strong>{{ 'notificationPreference.note' | cxTranslate }}</strong\\n          >{{ 'notificationPreference.noteMessage' | cxTranslate }}\\n        </label>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <ng-template #loading>\\n    <div class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </ng-template>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], NotificationPreferenceComponent);\n\nlet NotificationPreferenceModule = class NotificationPreferenceModule {\n};\nNotificationPreferenceModule = __decorate([\n    NgModule({\n        declarations: [NotificationPreferenceComponent],\n        imports: [\n            CommonModule,\n            SpinnerModule,\n            I18nModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    NotificationPreferenceComponent: {\n                        component: NotificationPreferenceComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n        ],\n        exports: [NotificationPreferenceComponent],\n        entryComponents: [NotificationPreferenceComponent],\n    })\n], NotificationPreferenceModule);\n\nlet MyInterestsComponent = class MyInterestsComponent {\n    constructor(productInterestService, translationService, productService) {\n        this.productInterestService = productInterestService;\n        this.translationService = translationService;\n        this.productService = productService;\n        this.DEFAULT_PAGE_SIZE = 10;\n        this.sortMapping = {\n            byNameAsc: 'name:asc',\n            byNameDesc: 'name:desc',\n        };\n        this.sort = 'byNameAsc';\n        this.sortOptions = [\n            {\n                code: 'byNameAsc',\n                selected: false,\n            },\n            {\n                code: 'byNameDesc',\n                selected: false,\n            },\n        ];\n    }\n    ngOnInit() {\n        this.interests$ = this.productInterestService\n            .getAndLoadProductInterests(this.DEFAULT_PAGE_SIZE)\n            .pipe(tap(interests => (this.pagination = {\n            currentPage: interests.pagination.page,\n            pageSize: interests.pagination.count,\n            totalPages: interests.pagination.totalPages,\n            totalResults: interests.pagination.totalCount,\n            sort: 'byNameAsc',\n        })), map(interest => (Object.assign(Object.assign({}, interest), { results: interest.results\n                ? interest.results.map(result => (Object.assign(Object.assign({}, result), { product$: this.getProduct(result) })))\n                : interest.results }))));\n        this.getInterestsloading$ = this.productInterestService.getProdutInterestsLoading();\n        this.isRemoveDisabled$ = combineLatest([\n            this.getInterestsloading$,\n            this.productInterestService.getRemoveProdutInterestLoading(),\n        ]).pipe(map(([getLoading, removeLoading]) => getLoading || removeLoading));\n        this.sortLabels = this.getSortLabels();\n    }\n    getSortLabels() {\n        return combineLatest([\n            this.translationService.translate('myInterests.sorting.byNameAsc'),\n            this.translationService.translate('myInterests.sorting.byNameDesc'),\n        ]).pipe(map(([asc, desc]) => {\n            return {\n                byNameAsc: asc,\n                byNameDesc: desc,\n            };\n        }));\n    }\n    getProduct(interest) {\n        return this.productService.get(interest.product.code, ProductScope.DETAILS);\n    }\n    removeInterest(relation) {\n        this.productInterestService.removeProdutInterest({\n            product: relation.product,\n            productInterestEntry: relation.productInterestEntry,\n        });\n    }\n    sortChange(sort) {\n        this.sort = sort;\n        this.productInterestService.loadProductInterests(this.DEFAULT_PAGE_SIZE, 0, this.sortMapping[sort]);\n    }\n    pageChange(page) {\n        this.productInterestService.loadProductInterests(this.DEFAULT_PAGE_SIZE, page, this.sortMapping[this.sort]);\n    }\n    ngOnDestroy() {\n        this.productInterestService.clearProductInterests();\n        this.productInterestService.resetRemoveInterestState();\n    }\n};\nMyInterestsComponent.ctorParameters = () => [\n    { type: UserInterestsService },\n    { type: TranslationService },\n    { type: ProductService }\n];\nMyInterestsComponent = __decorate([\n    Component({\n        selector: 'cx-my-interests',\n        template: \"<div *ngIf=\\\"interests$ | async as interests\\\" class=\\\"container\\\">\\n  <div class=\\\"cx-product-interests-title h3\\\">\\n    <h3>{{ 'myInterests.header' | cxTranslate }}</h3>\\n  </div>\\n  <div\\n    class=\\\"cx-product-interests-body\\\"\\n    *ngIf=\\\"!(getInterestsloading$ | async); else loading\\\"\\n  >\\n    <ng-container *ngIf=\\\"interests.pagination.totalCount > 0; else noInterest\\\">\\n      <div class=\\\"cx-product-interests-sort top row\\\">\\n        <div\\n          class=\\\"cx-product-interests-form-group form-group col-sm-12 col-md-4 col-lg-4\\\"\\n        >\\n          <cx-sorting\\n            [sortOptions]=\\\"sortOptions\\\"\\n            [sortLabels]=\\\"sortLabels | async\\\"\\n            (sortListEvent)=\\\"sortChange($event)\\\"\\n            [selectedOption]=\\\"sort\\\"\\n            placeholder=\\\"{{ 'myInterests.sortByMostRecent' | cxTranslate }}\\\"\\n          >\\n          </cx-sorting>\\n        </div>\\n        <div\\n          class=\\\"cx-product-interests-pagination cx-product-interests-thead-mobile\\\"\\n        >\\n          <cx-pagination\\n            [pagination]=\\\"pagination\\\"\\n            (viewPageEvent)=\\\"pageChange($event)\\\"\\n          ></cx-pagination>\\n        </div>\\n      </div>\\n      <table class=\\\"table cx-product-interests-table\\\">\\n        <thead class=\\\"cx-product-interests-thead-mobile\\\">\\n          <th scope=\\\"col\\\">\\n            {{ 'myInterests.item' | cxTranslate }}\\n          </th>\\n          <th scope=\\\"col\\\"></th>\\n          <th scope=\\\"col\\\">\\n            {{ 'myInterests.price' | cxTranslate }}\\n          </th>\\n          <th scope=\\\"col\\\">\\n            {{ 'myInterests.notifications' | cxTranslate }}\\n          </th>\\n          <th scope=\\\"col\\\"></th>\\n        </thead>\\n        <tbody>\\n          <tr\\n            *ngFor=\\\"let interest of interests.results\\\"\\n            class=\\\"cx-product-interests-product-item\\\"\\n          >\\n            <ng-container *ngIf=\\\"interest.product$ | async as product\\\">\\n              <td>\\n                <div class=\\\"cx-product-interests-label\\\">\\n                  <a\\n                    class=\\\"cx-product-interests-product-image-link\\\"\\n                    [routerLink]=\\\"\\n                      { cxRoute: 'product', params: product } | cxUrl\\n                    \\\"\\n                  >\\n                    <cx-media\\n                      [container]=\\\"product.images?.PRIMARY\\\"\\n                      format=\\\"thumbnail\\\"\\n                    ></cx-media>\\n                  </a>\\n                </div>\\n              </td>\\n              <td>\\n                <div class=\\\"cx-info col-10\\\">\\n                  <div class=\\\"cx-info-container row \\\">\\n                    <div>\\n                      <div *ngIf=\\\"product.name\\\" class=\\\"cx-name\\\">\\n                        <a\\n                          class=\\\"cx-link cx-product-interests-product-code-link\\\"\\n                          [routerLink]=\\\"\\n                            { cxRoute: 'product', params: product } | cxUrl\\n                          \\\"\\n                        >\\n                          {{ product.name }}\\n                        </a>\\n                      </div>\\n                      <div *ngIf=\\\"product.code\\\" class=\\\"cx-code\\\">\\n                        <span>{{\\n                          'myInterests.productId'\\n                            | cxTranslate: { code: product.code }\\n                        }}</span>\\n                      </div>\\n\\n                      <ng-container\\n                        *ngFor=\\\"let baseOptions of product.baseOptions\\\"\\n                      >\\n                        <div\\n                          *ngFor=\\\"\\n                            let variant of baseOptions.selected\\n                              ?.variantOptionQualifiers\\n                          \\\"\\n                          class=\\\"cx-property\\\"\\n                        >\\n                          <div\\n                            class=\\\"cx-label cx-product-interests-variant-name\\\"\\n                          >\\n                            {{ variant.name }}\\n                          </div>\\n                          <div\\n                            class=\\\"cx-value cx-product-interests-variant-value\\\"\\n                          >\\n                            {{ variant.value }}\\n                          </div>\\n                        </div>\\n                      </ng-container>\\n                      <div\\n                        class=\\\"cx-property\\\"\\n                        *ngIf=\\\"product.stock.stockLevelStatus === 'outOfStock'\\\"\\n                      >\\n                        <div\\n                          class=\\\"cx-label cx-product-interests-product-stock\\\"\\n                        >\\n                          {{ 'myInterests.outOfStock' | cxTranslate }}\\n                        </div>\\n                      </div>\\n                    </div>\\n                  </div>\\n                </div>\\n              </td>\\n              <td>\\n                <div class=\\\"cx-product-interests-product-price\\\">\\n                  <div class=\\\"d-md-none cx-product-interests-label\\\">\\n                    {{ 'myInterests.price' | cxTranslate }}\\n                  </div>\\n                  <span>{{ product.price.formattedValue }}</span>\\n                </div>\\n              </td>\\n              <td>\\n                <div class=\\\"cx-product-interests-subscriptions\\\">\\n                  <div class=\\\"d-md-none cx-product-interests-label\\\">\\n                    {{ 'myInterests.notifications' | cxTranslate }}\\n                  </div>\\n                  <div\\n                    class=\\\"cx-product-interests-notification\\\"\\n                    *ngFor=\\\"let interestEntry of interest.productInterestEntry\\\"\\n                  >\\n                    <span class=\\\"cx-product-interests-type\\\">\\n                      {{\\n                        'myInterests.' + interestEntry.interestType\\n                          | cxTranslate\\n                      }}\\n                    </span>\\n                    <span class=\\\"cx-product-interests-expiration-date\\\">\\n                      {{\\n                        'myInterests.expirationDate'\\n                          | cxTranslate\\n                            : {\\n                                expirationDate:\\n                                  interestEntry.expirationDate | date\\n                              }\\n                      }}\\n                    </span>\\n                  </div>\\n                </div>\\n              </td>\\n              <td>\\n                <div class=\\\"cx-actions cx-product-interests-remove-button\\\">\\n                  <button\\n                    type=\\\"button\\\"\\n                    class=\\\"link cx-product-interests-remove-btn\\\"\\n                    [disabled]=\\\"isRemoveDisabled$ | async\\\"\\n                    (click)=\\\"removeInterest(interest)\\\"\\n                  >\\n                    {{ 'myInterests.remove' | cxTranslate }}\\n                  </button>\\n                </div>\\n              </td>\\n            </ng-container>\\n          </tr>\\n        </tbody>\\n      </table>\\n      <div class=\\\"cx-product-interests-sort bottom row\\\">\\n        <div\\n          class=\\\"cx-product-interests-form-group cx-product-interests-thead-mobile form-group col-sm-12 col-md-4 col-lg-4\\\"\\n        >\\n          <cx-sorting\\n            [sortOptions]=\\\"sortOptions\\\"\\n            [sortLabels]=\\\"sortLabels | async\\\"\\n            (sortListEvent)=\\\"sortChange($event)\\\"\\n            [selectedOption]=\\\"sort\\\"\\n            placeholder=\\\"{{ 'myInterests.sortByMostRecent' | cxTranslate }}\\\"\\n          >\\n          </cx-sorting>\\n        </div>\\n        <div class=\\\"cx-product-interests-pagination\\\">\\n          <cx-pagination\\n            [pagination]=\\\"pagination\\\"\\n            (viewPageEvent)=\\\"pageChange($event)\\\"\\n          ></cx-pagination>\\n        </div>\\n      </div>\\n    </ng-container>\\n  </div>\\n</div>\\n<ng-template #noInterest>\\n  <div class=\\\"cx-product-interests-message\\\">\\n    {{ 'myInterests.noInterests' | cxTranslate }}\\n  </div>\\n</ng-template>\\n<ng-template #loading>\\n  <div class=\\\"cx-spinner\\\">\\n    <cx-spinner></cx-spinner>\\n  </div>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], MyInterestsComponent);\n\nlet MyInterestsModule = class MyInterestsModule {\n};\nMyInterestsModule = __decorate([\n    NgModule({\n        declarations: [MyInterestsComponent],\n        imports: [\n            CommonModule,\n            I18nModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    MyInterestsComponent: {\n                        component: MyInterestsComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            RouterModule,\n            ListNavigationModule,\n            I18nModule,\n            UrlModule,\n            MediaModule,\n            SpinnerModule,\n        ],\n        exports: [MyInterestsComponent],\n        entryComponents: [MyInterestsComponent],\n    })\n], MyInterestsModule);\n\nlet BreadcrumbComponent = class BreadcrumbComponent {\n    constructor(component, pageMetaService, translation) {\n        this.component = component;\n        this.pageMetaService = pageMetaService;\n        this.translation = translation;\n    }\n    ngOnInit() {\n        this.setTitle();\n        this.setCrumbs();\n    }\n    setTitle() {\n        this.title$ = this.pageMetaService.getMeta().pipe(filter(Boolean), map((meta) => meta.heading || meta.title));\n    }\n    setCrumbs() {\n        this.crumbs$ = combineLatest([\n            this.pageMetaService.getMeta(),\n            this.translation.translate('common.home'),\n        ]).pipe(map(([meta, textHome]) => meta && meta.breadcrumbs\n            ? meta.breadcrumbs\n            : [{ label: textHome, link: '/' }]));\n    }\n};\nBreadcrumbComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: PageMetaService },\n    { type: TranslationService }\n];\nBreadcrumbComponent = __decorate([\n    Component({\n        selector: 'cx-breadcrumb',\n        template: \"<nav>\\n  <span *ngFor=\\\"let crumb of crumbs$ | async\\\">\\n    <a [routerLink]=\\\"crumb.link\\\" [innerHTML]=\\\"crumb.label\\\"></a>\\n  </span>\\n</nav>\\n<h1>{{ title$ | async }}</h1>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], BreadcrumbComponent);\n\nlet BreadcrumbModule = class BreadcrumbModule {\n};\nBreadcrumbModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    BreadcrumbComponent: {\n                        component: BreadcrumbComponent,\n                    },\n                },\n            }),\n            CmsPageTitleModule,\n        ],\n        declarations: [BreadcrumbComponent],\n        exports: [BreadcrumbComponent],\n        entryComponents: [BreadcrumbComponent],\n    })\n], BreadcrumbModule);\n\nlet NavigationService = class NavigationService {\n    constructor(cmsService, semanticPathService) {\n        this.cmsService = cmsService;\n        this.semanticPathService = semanticPathService;\n    }\n    createNavigation(data$) {\n        return combineLatest([data$, this.getNavigationNode(data$)]).pipe(map(([data, nav]) => {\n            return {\n                title: data.name,\n                children: [nav],\n            };\n        }));\n    }\n    /**\n     * returns an observable with the `NavigationNode` for the given `CmsNavigationComponent`.\n     * This function will load the navigation underlying entries and childs if they haven't been\n     * loaded so far.\n     */\n    getNavigationNode(data$) {\n        if (!data$) {\n            return of();\n        }\n        return data$.pipe(filter(data => !!data), switchMap(data => {\n            const navigation = data.navigationNode ? data.navigationNode : data;\n            return this.cmsService.getNavigationEntryItems(navigation.uid).pipe(tap(items => {\n                if (items === undefined) {\n                    this.loadNavigationEntryItems(navigation, true);\n                }\n                else {\n                    // we should check whether the existing node items are what expected\n                    const expectedItems = [];\n                    this.loadNavigationEntryItems(navigation, false, expectedItems);\n                    const existingItems = Object.keys(items).map(key => items[key].uid);\n                    const missingItems = expectedItems.filter(it => !existingItems.includes(it.id));\n                    if (missingItems.length > 0) {\n                        this.cmsService.loadNavigationItems(navigation.uid, missingItems);\n                    }\n                }\n            }), filter(Boolean), map(items => this.populateNavigationNode(navigation, items)));\n        }));\n    }\n    /**\n     * Loads all navigation entry items' type and id. Dispatch action to load all these items\n     * @param nodeData\n     * @param root\n     * @param itemsList\n     */\n    loadNavigationEntryItems(nodeData, root, itemsList = []) {\n        if (nodeData.entries && nodeData.entries.length > 0) {\n            nodeData.entries.forEach(entry => {\n                itemsList.push({\n                    superType: entry.itemSuperType,\n                    id: entry.itemId,\n                });\n            });\n        }\n        if (nodeData.children && nodeData.children.length > 0) {\n            nodeData.children.forEach(child => this.loadNavigationEntryItems(child, false, itemsList));\n        }\n        if (root) {\n            this.cmsService.loadNavigationItems(nodeData.uid, itemsList);\n        }\n    }\n    /**\n     * Create a new node tree for the view\n     * @param nodeData\n     * @param items\n     */\n    populateNavigationNode(nodeData, items) {\n        const node = {};\n        if (nodeData.title) {\n            // the node title will be populated by the first entry (if any)\n            // if there's no nodeData.title available\n            node.title = nodeData.title;\n        }\n        if (nodeData.entries && nodeData.entries.length > 0) {\n            this.populateLink(node, nodeData.entries[0], items);\n        }\n        if (nodeData.children && nodeData.children.length > 0) {\n            const children = nodeData.children\n                .map(child => this.populateNavigationNode(child, items))\n                .filter(Boolean);\n            if (children.length > 0) {\n                node.children = children;\n            }\n        }\n        // return null in case there are no children\n        return Object.keys(node).length === 0 ? null : node;\n    }\n    /**\n     * The node link is driven by the first entry.\n     */\n    populateLink(node, entry, items) {\n        const item = items[`${entry.itemId}_${entry.itemSuperType}`];\n        // now we only consider CMSLinkComponent\n        if (item && entry.itemType === 'CMSLinkComponent') {\n            if (!node.title) {\n                node.title = item.linkName;\n            }\n            const url = this.getLink(item);\n            // only populate the node link if we have a visible node\n            if (node.title && url) {\n                node.url = url;\n                // the backend provide boolean value for the target\n                // in case the link should be opened in a new window\n                node.target = !!item.target ? '_blank' : '';\n            }\n        }\n    }\n    /**\n     *\n     * Gets the URL or link to a related item (category)\n     */\n    getLink(item) {\n        if (item.url) {\n            return item.url;\n        }\n        else if (item.categoryCode) {\n            return this.semanticPathService.transform({\n                cxRoute: 'category',\n                params: {\n                    code: item.categoryCode,\n                    name: item.name,\n                },\n            });\n        }\n    }\n};\nNavigationService.ctorParameters = () => [\n    { type: CmsService },\n    { type: SemanticPathService }\n];\nNavigationService.ɵprov = ɵɵdefineInjectable({ factory: function NavigationService_Factory() { return new NavigationService(ɵɵinject(CmsService), ɵɵinject(SemanticPathService)); }, token: NavigationService, providedIn: \"root\" });\nNavigationService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], NavigationService);\n\nlet CategoryNavigationComponent = class CategoryNavigationComponent {\n    constructor(componentData, service) {\n        this.componentData = componentData;\n        this.service = service;\n        this.node$ = this.service.getNavigationNode(this.componentData.data$);\n        this.data$ = this.componentData.data$;\n    }\n};\nCategoryNavigationComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: NavigationService }\n];\nCategoryNavigationComponent = __decorate([\n    Component({\n        selector: 'cx-category-navigation',\n        template: \"<cx-navigation-ui\\n  *ngIf=\\\"data$ | async as data\\\"\\n  [node]=\\\"node$ | async\\\"\\n  [ngClass]=\\\"data.styleClass\\\"\\n  [wrapAfter]=\\\"data.wrapAfter\\\"\\n  [allowAlignToRight]=\\\"true\\\"\\n></cx-navigation-ui>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], CategoryNavigationComponent);\n\nlet NavigationUIComponent = class NavigationUIComponent {\n    constructor(router, renderer, elemRef) {\n        this.router = router;\n        this.renderer = renderer;\n        this.elemRef = elemRef;\n        this.allowAlignToRight = false;\n        /**\n         * the icon type that will be used for navigation nodes\n         * with children.\n         */\n        this.iconType = ICON_TYPE;\n        /**\n         * Indicates whether the navigation should support flyout.\n         * If flyout is set to true, the\n         * nested child navitation nodes will only appear on hover or focus.\n         */\n        this.flyout = true;\n        this.isOpen = false;\n        this.openNodes = [];\n        this.subscriptions = new Subscription();\n        this.resize = new EventEmitter();\n        this.subscriptions.add(this.router.events\n            .pipe(filter(event => event instanceof NavigationEnd))\n            .subscribe(() => this.clear()));\n        this.subscriptions.add(this.resize.pipe(debounceTime(50)).subscribe(() => {\n            this.alignWrappersToRightIfStickOut();\n        }));\n    }\n    onResize() {\n        this.resize.next();\n    }\n    toggleOpen(event) {\n        const node = event.currentTarget;\n        if (this.openNodes.includes(node)) {\n            this.openNodes = this.openNodes.filter(n => n !== node);\n            this.renderer.removeClass(node, 'is-open');\n        }\n        else {\n            this.openNodes.push(node);\n        }\n        this.updateClasses();\n        event.stopImmediatePropagation();\n        event.stopPropagation();\n    }\n    back() {\n        this.renderer.removeClass(this.openNodes[this.openNodes.length - 1], 'is-open');\n        this.openNodes.pop();\n        this.updateClasses();\n    }\n    clear() {\n        this.openNodes = [];\n        this.updateClasses();\n    }\n    onMouseEnter(event) {\n        this.alignWrapperToRightIfStickOut(event.currentTarget);\n        this.focusAfterPreviousClicked(event);\n    }\n    getDepth(node, depth = 0) {\n        if (node.children && node.children.length > 0) {\n            return Math.max(...node.children.map(n => this.getDepth(n, depth + 1)));\n        }\n        else {\n            return depth;\n        }\n    }\n    getColumnCount(length) {\n        return Math.round(length / (this.wrapAfter || length));\n    }\n    focusAfterPreviousClicked(event) {\n        const target = ((event.target || event.relatedTarget));\n        if (target.ownerDocument.activeElement.matches('nav[tabindex]') &&\n            target.parentElement.matches('.flyout')) {\n            target.focus();\n        }\n        return target.ownerDocument;\n    }\n    ngOnDestroy() {\n        if (this.subscriptions) {\n            this.subscriptions.unsubscribe();\n        }\n    }\n    alignWrapperToRightIfStickOut(node) {\n        if (this.allowAlignToRight) {\n            const wrapper = node.querySelector('.wrapper');\n            const navBar = this.elemRef.nativeElement;\n            if (wrapper) {\n                this.renderer.removeStyle(wrapper, 'margin-left');\n                if (wrapper.offsetLeft + wrapper.offsetWidth >\n                    navBar.offsetLeft + navBar.offsetWidth) {\n                    this.renderer.setStyle(wrapper, 'margin-left', `${node.offsetWidth - wrapper.offsetWidth}px`);\n                }\n            }\n        }\n    }\n    alignWrappersToRightIfStickOut() {\n        const navs = this.elemRef.nativeElement.childNodes;\n        Array.from(navs)\n            .filter(node => node.tagName === 'NAV')\n            .forEach(nav => this.alignWrapperToRightIfStickOut(nav));\n    }\n    updateClasses() {\n        this.openNodes.forEach((node, i) => {\n            if (i + 1 < this.openNodes.length) {\n                this.renderer.addClass(node, 'is-opened');\n                this.renderer.removeClass(node, 'is-open');\n            }\n            else {\n                this.renderer.removeClass(node, 'is-opened');\n                this.renderer.addClass(node, 'is-open');\n            }\n        });\n        this.isOpen = this.openNodes.length > 0;\n    }\n};\nNavigationUIComponent.ctorParameters = () => [\n    { type: Router },\n    { type: Renderer2 },\n    { type: ElementRef }\n];\n__decorate([\n    Input()\n], NavigationUIComponent.prototype, \"node\", void 0);\n__decorate([\n    Input()\n], NavigationUIComponent.prototype, \"wrapAfter\", void 0);\n__decorate([\n    Input()\n], NavigationUIComponent.prototype, \"allowAlignToRight\", void 0);\n__decorate([\n    Input(), HostBinding('class.flyout')\n], NavigationUIComponent.prototype, \"flyout\", void 0);\n__decorate([\n    Input(), HostBinding('class.is-open')\n], NavigationUIComponent.prototype, \"isOpen\", void 0);\n__decorate([\n    HostListener('window:resize')\n], NavigationUIComponent.prototype, \"onResize\", null);\nNavigationUIComponent = __decorate([\n    Component({\n        selector: 'cx-navigation-ui',\n        template: \"<div\\n  *ngIf=\\\"flyout && node?.children.length > 1\\\"\\n  class=\\\"back is-open\\\"\\n  (click)=\\\"back()\\\"\\n>\\n  <h5>\\n    <cx-icon [type]=\\\"iconType.CARET_LEFT\\\"></cx-icon>\\n    {{ 'common.back' | cxTranslate }}\\n  </h5>\\n</div>\\n\\n<ng-container *ngFor=\\\"let child of node?.children\\\">\\n  <ng-container *ngTemplateOutlet=\\\"nav; context: { node: child }\\\">\\n  </ng-container>\\n</ng-container>\\n\\n<!-- we generate links in a recursive manner -->\\n<ng-template #nav let-node=\\\"node\\\">\\n  <nav\\n    tabindex=\\\"0\\\"\\n    (click)=\\\"toggleOpen($event)\\\"\\n    (mouseenter)=\\\"onMouseEnter($event)\\\"\\n  >\\n    <cx-generic-link\\n      *ngIf=\\\"\\n        node.url && (!node.children || node.children?.length === 0);\\n        else heading\\n      \\\"\\n      [url]=\\\"node.url\\\"\\n      [target]=\\\"node.target\\\"\\n    >\\n      {{ node.title }}\\n      <cx-icon\\n        *ngIf=\\\"flyout && node.children?.length > 0\\\"\\n        [type]=\\\"iconType.CARET_DOWN\\\"\\n      ></cx-icon>\\n    </cx-generic-link>\\n\\n    <ng-template #heading>\\n      <h5 [attr.aria-label]=\\\"node.title\\\">\\n        {{ node.title }}\\n        <cx-icon\\n          *ngIf=\\\"flyout && node.children?.length > 0\\\"\\n          [type]=\\\"iconType.CARET_DOWN\\\"\\n        ></cx-icon>\\n      </h5>\\n    </ng-template>\\n\\n    <!-- we add a wrapper to allow for better layout handling in CSS -->\\n    <div class=\\\"wrapper\\\" *ngIf=\\\"node.children?.length > 0\\\">\\n      <cx-generic-link\\n        *ngIf=\\\"node.url\\\"\\n        [url]=\\\"node.url\\\"\\n        [target]=\\\"node.target\\\"\\n        class=\\\"all\\\"\\n      >\\n        {{ 'navigation.shopAll' | cxTranslate: { navNode: node.title } }}\\n      </cx-generic-link>\\n      <div\\n        class=\\\"childs\\\"\\n        [attr.depth]=\\\"getDepth(node)\\\"\\n        [attr.wrap-after]=\\\"node.children?.length > wrapAfter ? wrapAfter : null\\\"\\n        [attr.columns]=\\\"getColumnCount(node.children?.length)\\\"\\n      >\\n        <ng-container *ngFor=\\\"let child of node.children\\\">\\n          <ng-container *ngTemplateOutlet=\\\"nav; context: { node: child }\\\">\\n          </ng-container>\\n        </ng-container>\\n      </div>\\n    </div>\\n  </nav>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], NavigationUIComponent);\n\nlet NavigationComponent = class NavigationComponent {\n    constructor(componentData, service) {\n        this.componentData = componentData;\n        this.service = service;\n        this.node$ = this.service.createNavigation(this.componentData.data$);\n        this.styleClass$ = this.componentData.data$.pipe(map(d => d.styleClass));\n    }\n};\nNavigationComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: NavigationService }\n];\nNavigationComponent = __decorate([\n    Component({\n        selector: 'cx-navigation',\n        template: \"<cx-navigation-ui [node]=\\\"node$ | async\\\" [ngClass]=\\\"styleClass$ | async\\\">\\n</cx-navigation-ui>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], NavigationComponent);\n\nlet NavigationModule = class NavigationModule {\n};\nNavigationModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            IconModule,\n            GenericLinkModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    NavigationComponent: {\n                        component: NavigationComponent,\n                    },\n                },\n            }),\n            I18nModule,\n        ],\n        declarations: [NavigationComponent, NavigationUIComponent],\n        entryComponents: [NavigationComponent],\n        exports: [NavigationComponent, NavigationUIComponent],\n    })\n], NavigationModule);\n\nlet CategoryNavigationModule = class CategoryNavigationModule {\n};\nCategoryNavigationModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            NavigationModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CategoryNavigationComponent: {\n                        component: CategoryNavigationComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [CategoryNavigationComponent],\n        entryComponents: [CategoryNavigationComponent],\n        exports: [CategoryNavigationComponent],\n    })\n], CategoryNavigationModule);\n\nlet FooterNavigationComponent = class FooterNavigationComponent {\n    constructor(componentData, service, anonymousConsentsConfig) {\n        this.componentData = componentData;\n        this.service = service;\n        this.anonymousConsentsConfig = anonymousConsentsConfig;\n        this.node$ = this.service.getNavigationNode(this.componentData.data$);\n        this.styleClass$ = this.componentData.data$.pipe(map(d => d.styleClass));\n        // in order to preserve the backwards compatibility, this should render only if anonymous consents feature is disabled\n        this.data$ = this.componentData.data$.pipe(filter(_ => !isFeatureEnabled(this.anonymousConsentsConfig, ANONYMOUS_CONSENTS_FEATURE)));\n    }\n};\nFooterNavigationComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: NavigationService },\n    { type: AnonymousConsentsConfig }\n];\nFooterNavigationComponent = __decorate([\n    Component({\n        selector: 'cx-footer-navigation',\n        template: \"<cx-navigation-ui\\n  [node]=\\\"node$ | async\\\"\\n  [flyout]=\\\"false\\\"\\n  [ngClass]=\\\"styleClass$ | async\\\"\\n></cx-navigation-ui>\\n\\n<div class=\\\"notice\\\" *ngIf=\\\"data$ | async as data\\\">\\n  {{ data.notice }}\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], FooterNavigationComponent);\n\nlet FooterNavigationModule = class FooterNavigationModule {\n};\nFooterNavigationModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            NavigationModule,\n            GenericLinkModule,\n            I18nModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    FooterNavigationComponent: {\n                        component: FooterNavigationComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [FooterNavigationComponent],\n        entryComponents: [FooterNavigationComponent],\n        exports: [FooterNavigationComponent],\n    })\n], FooterNavigationModule);\n\nconst HAS_SEARCH_RESULT_CLASS = 'has-searchbox-results';\nlet SearchBoxComponentService = class SearchBoxComponentService {\n    constructor(searchService, routingService, translationService, winRef) {\n        this.searchService = searchService;\n        this.routingService = routingService;\n        this.translationService = translationService;\n        this.winRef = winRef;\n    }\n    /**\n     * Executes the search for products and suggestions,\n     * unless the configuration is setup to not search for\n     * products or suggestions.\n     */\n    search(query, config) {\n        if (!query || query === '') {\n            this.clearResults();\n            return;\n        }\n        if (config.minCharactersBeforeRequest &&\n            query.length < config.minCharactersBeforeRequest) {\n            return;\n        }\n        if (config.displayProducts) {\n            this.searchService.search(query, {\n                pageSize: config.maxProducts,\n            });\n        }\n        if (config.displaySuggestions) {\n            this.searchService.searchSuggestions(query, {\n                pageSize: config.maxSuggestions,\n            });\n        }\n    }\n    /**\n     * Returns an observable with the SearchResults. When there's any\n     * result, the body tag will get a classname, so that specific style\n     * rules can be applied.\n     */\n    getResults(config) {\n        return combineLatest([\n            this.getProductResults(config),\n            this.getProductSuggestions(config),\n            this.getSearchMessage(config),\n        ]).pipe(map(([productResults, suggestions, message]) => {\n            return {\n                products: productResults ? productResults.products : null,\n                suggestions,\n                message,\n            };\n        }), tap(results => this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, this.hasResults(results))));\n    }\n    /**\n     * Clears the searchbox results, so that old values are\n     * no longer emited upon next search.\n     */\n    clearResults() {\n        this.searchService.clearResults();\n        this.toggleBodyClass(HAS_SEARCH_RESULT_CLASS, false);\n    }\n    hasBodyClass(className) {\n        return this.winRef.document.body.classList.contains(className);\n    }\n    toggleBodyClass(className, add) {\n        if (add === undefined) {\n            this.winRef.document.body.classList.toggle(className);\n        }\n        else {\n            add\n                ? this.winRef.document.body.classList.add(className)\n                : this.winRef.document.body.classList.remove(className);\n        }\n    }\n    hasResults(results) {\n        return ((!!results.products && results.products.length > 0) ||\n            (!!results.suggestions && results.suggestions.length > 0) ||\n            !!results.message);\n    }\n    getProductResults(config) {\n        if (config.displayProducts) {\n            return this.searchService.getResults();\n        }\n        else {\n            return of({});\n        }\n    }\n    /**\n     * Loads suggestions from the backend. In case there's no suggestion\n     * available, we try to get an exact match suggestion.\n     */\n    getProductSuggestions(config) {\n        if (!config.displaySuggestions) {\n            return of([]);\n        }\n        else {\n            return this.searchService.getSuggestionResults().pipe(map(res => res.map(suggestion => suggestion.value)), switchMap(suggestions => {\n                if (suggestions.length === 0) {\n                    return this.getExactSuggestion(config).pipe(map(match => (match ? [match] : [])));\n                }\n                else {\n                    return of(suggestions);\n                }\n            }));\n        }\n    }\n    /**\n     * whenever there is at least 1 product, we simulate\n     * a suggestion to provide easy access to the search result page\n     */\n    getExactSuggestion(config) {\n        return this.getProductResults(config).pipe(switchMap(productResult => {\n            return productResult.products && productResult.products.length > 0\n                ? this.fetchTranslation('searchBox.help.exactMatch', {\n                    term: productResult.freeTextSearch,\n                })\n                : of(null);\n        }));\n    }\n    getSearchMessage(config) {\n        return combineLatest([\n            this.getProductResults(config),\n            this.getProductSuggestions(config),\n        ]).pipe(switchMap(([productResult, suggestions]) => {\n            if (productResult &&\n                productResult.products &&\n                productResult.products.length === 0 &&\n                (suggestions && suggestions.length === 0)) {\n                return this.fetchTranslation('searchBox.help.noMatch');\n            }\n            else {\n                return of(null);\n            }\n        }));\n    }\n    /**\n     * Navigates to the search result page with a given query\n     */\n    launchSearchPage(query) {\n        this.routingService.go({\n            cxRoute: 'search',\n            params: { query },\n        });\n    }\n    fetchTranslation(translationKey, options) {\n        return this.translationService.translate(translationKey, options);\n    }\n};\nSearchBoxComponentService.ctorParameters = () => [\n    { type: SearchboxService },\n    { type: RoutingService },\n    { type: TranslationService },\n    { type: WindowRef }\n];\nSearchBoxComponentService.ɵprov = ɵɵdefineInjectable({ factory: function SearchBoxComponentService_Factory() { return new SearchBoxComponentService(ɵɵinject(SearchboxService), ɵɵinject(RoutingService), ɵɵinject(TranslationService), ɵɵinject(WindowRef)); }, token: SearchBoxComponentService, providedIn: \"root\" });\nSearchBoxComponentService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], SearchBoxComponentService);\n\nconst DEFAULT_SEARCHBOX_CONFIG = {\n    minCharactersBeforeRequest: 1,\n    displayProducts: true,\n    displaySuggestions: true,\n    maxProducts: 5,\n    maxSuggestions: 5,\n    displayProductImages: true,\n};\nlet SearchBoxComponent = class SearchBoxComponent {\n    /**\n     * The component data is optional, so that this component\n     * can be reused without CMS integration.\n     */\n    constructor(searchBoxComponentService, componentData) {\n        this.searchBoxComponentService = searchBoxComponentService;\n        this.componentData = componentData;\n        this.iconTypes = ICON_TYPE;\n        /**\n         * In some occasions we need to ignore the close event,\n         * for example when we click inside the search result section.\n         */\n        this.ignoreCloseEvent = false;\n        this.results$ = this.config$.pipe(tap(c => (this.config = c)), switchMap(config => this.searchBoxComponentService.getResults(config)));\n    }\n    /**\n     * Sets the search box input field\n     */\n    set queryText(value) {\n        if (value) {\n            this.search(value);\n        }\n    }\n    /**\n     * Returns the backend configuration or default configuration for the searchbox.\n     */\n    get config$() {\n        if (this.componentData) {\n            return this.componentData.data$.pipe(\n            // Since the backend returns string values (i.e. displayProducts: \"true\") for\n            // boolean values, we replace them with boolean values.\n            map(c => {\n                return Object.assign(Object.assign({}, c), { displayProducts: c.displayProducts === 'true' || c.displayProducts === true, displayProductImages: c.displayProductImages === 'true' ||\n                        c.displayProductImages === true, displaySuggestions: c.displaySuggestions === 'true' ||\n                        c.displaySuggestions === true });\n            }));\n        }\n        else {\n            return of(DEFAULT_SEARCHBOX_CONFIG);\n        }\n    }\n    /**\n     * Closes the searchbox and opens the search result page.\n     */\n    search(query) {\n        this.searchBoxComponentService.search(query, this.config);\n        // force the searchbox to open\n        this.open();\n    }\n    /**\n     * Opens the typeahead searchbox\n     */\n    open() {\n        this.searchBoxComponentService.toggleBodyClass('searchbox-is-active', true);\n    }\n    /**\n     * Closes the typehead searchbox.\n     */\n    close(event) {\n        if (!this.ignoreCloseEvent) {\n            this.searchBoxComponentService.toggleBodyClass('searchbox-is-active', false);\n            if (event && event.target) {\n                event.target.blur();\n            }\n        }\n        this.ignoreCloseEvent = false;\n    }\n    /**\n     * Especially in mobile we do not want the search icon\n     * to focus the input again when it's already open.\n     * */\n    avoidReopen(event) {\n        if (this.searchBoxComponentService.hasBodyClass('searchbox-is-active')) {\n            this.close(event);\n            event.preventDefault();\n        }\n    }\n    /**\n     * Opens the PLP with the given query.\n     *\n     * TODO: if there's a single product match, we could open the PDP.\n     */\n    launchSearchResult(event, query) {\n        if (!query || query.trim().length === 0) {\n            return;\n        }\n        this.close(event);\n        this.searchBoxComponentService.launchSearchPage(query);\n    }\n    /**\n     * Disables closing the search result list.\n     */\n    disableClose() {\n        this.ignoreCloseEvent = true;\n    }\n    /**\n     * Clears the search box input field\n     */\n    clear(el) {\n        this.disableClose();\n        el.value = '';\n        this.searchBoxComponentService.clearResults();\n    }\n};\nSearchBoxComponent.ctorParameters = () => [\n    { type: SearchBoxComponentService },\n    { type: CmsComponentData, decorators: [{ type: Optional }] }\n];\n__decorate([\n    Input('queryText')\n], SearchBoxComponent.prototype, \"queryText\", null);\nSearchBoxComponent = __decorate([\n    Component({\n        selector: 'cx-searchbox',\n        template: \"<label class=\\\"searchbox\\\" [class.dirty]=\\\"!!searchInput.value\\\">\\n  <input\\n    #searchInput\\n    [placeholder]=\\\"'searchBox.placeholder' | cxTranslate\\\"\\n    aria-label=\\\"search\\\"\\n    (focus)=\\\"open()\\\"\\n    (input)=\\\"search(searchInput.value)\\\"\\n    (blur)=\\\"close($event)\\\"\\n    (keydown.escape)=\\\"close($event)\\\"\\n    (keydown.enter)=\\\"launchSearchResult($event, searchInput.value)\\\"\\n  />\\n\\n  <cx-icon\\n    [type]=\\\"iconTypes.RESET\\\"\\n    aria-label=\\\"reset\\\"\\n    (mousedown)=\\\"clear(searchInput)\\\"\\n    class=\\\"reset\\\"\\n  ></cx-icon>\\n\\n  <cx-icon\\n    [type]=\\\"iconTypes.SEARCH\\\"\\n    aria-label=\\\"search\\\"\\n    class=\\\"search\\\"\\n    (mousedown)=\\\"avoidReopen($event)\\\"\\n  ></cx-icon>\\n</label>\\n\\n<div *ngIf=\\\"results$ | async as result\\\" class=\\\"results\\\" (click)=\\\"close($event)\\\">\\n  <div\\n    *ngIf=\\\"result.message\\\"\\n    class=\\\"message\\\"\\n    [innerHTML]=\\\"result.message\\\"\\n  ></div>\\n\\n  <div class=\\\"suggestions\\\" (mousedown)=\\\"disableClose()\\\">\\n    <a\\n      *ngFor=\\\"let suggestion of result.suggestions\\\"\\n      [innerHTML]=\\\"suggestion | cxHighlight: searchInput.value\\\"\\n      [routerLink]=\\\"\\n        {\\n          cxRoute: 'search',\\n          params: { query: suggestion }\\n        } | cxUrl\\n      \\\"\\n    >\\n    </a>\\n  </div>\\n\\n  <div class=\\\"products\\\" (mousedown)=\\\"disableClose()\\\" *ngIf=\\\"result.products\\\">\\n    <a\\n      *ngFor=\\\"let product of result.products\\\"\\n      [routerLink]=\\\"\\n        {\\n          cxRoute: 'product',\\n          params: product\\n        } | cxUrl\\n      \\\"\\n      [class.has-media]=\\\"config.displayProductImages\\\"\\n    >\\n      <cx-media\\n        *ngIf=\\\"config.displayProductImages\\\"\\n        [container]=\\\"product.images?.PRIMARY\\\"\\n        format=\\\"thumbnail\\\"\\n        [alt]=\\\"product.summary\\\"\\n      ></cx-media>\\n      <h4 class=\\\"name\\\" [innerHTML]=\\\"product.nameHtml\\\"></h4>\\n      <span class=\\\"price\\\">{{ product.price?.formattedValue }}</span>\\n    </a>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    }),\n    __param(1, Optional())\n], SearchBoxComponent);\n\nlet HighlightPipe = class HighlightPipe {\n    transform(text, match) {\n        if (!match) {\n            return text;\n        }\n        return text.replace(match.trim(), `<span class=\"highlight\">${match.trim()}</span>`);\n    }\n};\nHighlightPipe = __decorate([\n    Pipe({ name: 'cxHighlight' })\n], HighlightPipe);\n\nlet SearchBoxModule = class SearchBoxModule {\n};\nSearchBoxModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            MediaModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    SearchBoxComponent: {\n                        component: SearchBoxComponent,\n                    },\n                },\n            }),\n            IconModule,\n            UrlModule,\n            I18nModule,\n        ],\n        declarations: [SearchBoxComponent, HighlightPipe],\n        entryComponents: [SearchBoxComponent],\n        exports: [SearchBoxComponent],\n    })\n], SearchBoxModule);\n\nlet OrderConfirmationItemsComponent = class OrderConfirmationItemsComponent {\n    constructor(checkoutService, promotionService) {\n        this.checkoutService = checkoutService;\n        this.promotionService = promotionService;\n        this.promotionLocation = PromotionLocation.Checkout;\n    }\n    ngOnInit() {\n        this.order$ = this.checkoutService.getOrderDetails();\n        this.orderPromotions$ = this.promotionService.getOrderPromotions(this.promotionLocation);\n    }\n    ngOnDestroy() {\n        this.checkoutService.clearCheckoutData();\n    }\n};\nOrderConfirmationItemsComponent.ctorParameters = () => [\n    { type: CheckoutService },\n    { type: PromotionService }\n];\nOrderConfirmationItemsComponent = __decorate([\n    Component({\n        selector: 'cx-order-confirmation-items',\n        template: \"<div class=\\\"cx-order-items container\\\" *ngIf=\\\"order$ | async as order\\\">\\n  <h4 class=\\\"cx-order-items-header\\\">\\n    {{ 'checkoutOrderConfirmation.orderItems' | cxTranslate }}\\n  </h4>\\n\\n  <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n    <ng-container *ngIf=\\\"orderPromotions$ | async as orderPromotions\\\">\\n      <cx-promotions [promotions]=\\\"orderPromotions\\\"></cx-promotions>\\n    </ng-container>\\n  </ng-container>\\n\\n  <cx-cart-item-list\\n    [items]=\\\"order.entries\\\"\\n    [readonly]=\\\"true\\\"\\n    [promotionLocation]=\\\"promotionLocation\\\"\\n  ></cx-cart-item-list>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], OrderConfirmationItemsComponent);\n\nlet OrderConfirmationOverviewComponent = class OrderConfirmationOverviewComponent {\n    constructor(checkoutService, translation) {\n        this.checkoutService = checkoutService;\n        this.translation = translation;\n    }\n    ngOnInit() {\n        this.order$ = this.checkoutService.getOrderDetails();\n    }\n    ngOnDestroy() {\n        this.checkoutService.clearCheckoutData();\n    }\n    getAddressCardContent(deliveryAddress) {\n        return this.translation.translate('addressCard.shipTo').pipe(filter(_ => Boolean(deliveryAddress)), map(textTitle => ({\n            title: textTitle,\n            textBold: `${deliveryAddress.firstName} ${deliveryAddress.lastName}`,\n            text: [\n                deliveryAddress.line1,\n                deliveryAddress.line2,\n                `${deliveryAddress.town}, ${deliveryAddress.country.isocode}, ${deliveryAddress.postalCode}`,\n                deliveryAddress.phone,\n            ],\n        })));\n    }\n    getDeliveryModeCardContent(deliveryMode) {\n        return this.translation.translate('checkoutShipping.shippingMethod').pipe(filter(_ => Boolean(deliveryMode)), map(textTitle => ({\n            title: textTitle,\n            textBold: deliveryMode.name,\n            text: [deliveryMode.description],\n        })));\n    }\n    getBillingAddressCardContent(billingAddress) {\n        return this.translation.translate('addressCard.billTo').pipe(filter(_ => Boolean(billingAddress)), map(textTitle => ({\n            title: textTitle,\n            textBold: `${billingAddress.firstName} ${billingAddress.lastName}`,\n            text: [\n                billingAddress.line1,\n                billingAddress.line2,\n                `${billingAddress.town}, ${billingAddress.country.isocode}, ${billingAddress.postalCode}`,\n                billingAddress.phone,\n            ],\n        })));\n    }\n    getPaymentInfoCardContent(payment) {\n        return combineLatest([\n            this.translation.translate('paymentForm.payment'),\n            this.translation.translate('paymentCard.expires', {\n                month: Boolean(payment) ? payment.expiryMonth : '',\n                year: Boolean(payment) ? payment.expiryYear : '',\n            }),\n        ]).pipe(filter(_ => Boolean(payment)), map(([textTitle, textExpires]) => ({\n            title: textTitle,\n            textBold: payment.accountHolderName,\n            text: [payment.cardNumber, textExpires],\n        })));\n    }\n};\nOrderConfirmationOverviewComponent.ctorParameters = () => [\n    { type: CheckoutService },\n    { type: TranslationService }\n];\nOrderConfirmationOverviewComponent = __decorate([\n    Component({\n        selector: 'cx-order-confirmation-overview',\n        template: \"<div class=\\\"cx-order-review-summary\\\" *ngIf=\\\"order$ | async as order\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-sm-12 col-md-4 col-lg-3\\\">\\n        <div class=\\\"summary-card\\\">\\n          <cx-card\\n            [content]=\\\"getAddressCardContent(order?.deliveryAddress) | async\\\"\\n          ></cx-card>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-sm-12 col-md-4 col-lg-3\\\">\\n        <div class=\\\"summary-card\\\">\\n          <cx-card\\n            [content]=\\\"\\n              getBillingAddressCardContent(order?.paymentInfo?.billingAddress)\\n                | async\\n            \\\"\\n          ></cx-card>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-sm-12 col-md-4 col-lg-3\\\">\\n        <div class=\\\"summary-card\\\">\\n          <cx-card\\n            [content]=\\\"getDeliveryModeCardContent(order?.deliveryMode) | async\\\"\\n          ></cx-card>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"col-sm-12 col-md-4 col-lg-3\\\">\\n        <div class=\\\"summary-card\\\">\\n          <cx-card\\n            [content]=\\\"getPaymentInfoCardContent(order?.paymentInfo) | async\\\"\\n          ></cx-card>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], OrderConfirmationOverviewComponent);\n\nlet OrderConfirmationThankYouMessageComponent = class OrderConfirmationThankYouMessageComponent {\n    constructor(checkoutService) {\n        this.checkoutService = checkoutService;\n        this.isGuestCustomer = false;\n    }\n    ngOnInit() {\n        this.order$ = this.checkoutService.getOrderDetails().pipe(tap(order => {\n            this.isGuestCustomer = order.guestCustomer;\n            this.orderGuid = order.guid;\n        }));\n    }\n    ngOnDestroy() {\n        this.checkoutService.clearCheckoutData();\n    }\n};\nOrderConfirmationThankYouMessageComponent.ctorParameters = () => [\n    { type: CheckoutService }\n];\nOrderConfirmationThankYouMessageComponent = __decorate([\n    Component({\n        selector: 'cx-order-confirmation-thank-you-message',\n        template: \"<ng-container *ngIf=\\\"order$ | async as order\\\">\\n  <div class=\\\"cx-page-header\\\">\\n    <h1 class=\\\"cx-page-title\\\">\\n      {{ 'checkoutOrderConfirmation.confirmationOfOrder' | cxTranslate }}\\n      {{ order.code }}\\n    </h1>\\n  </div>\\n\\n  <div class=\\\"cx-order-confirmation-message\\\">\\n    <h2>{{ 'checkoutOrderConfirmation.thankYou' | cxTranslate }}</h2>\\n    <p>\\n      {{ 'checkoutOrderConfirmation.invoiceHasBeenSentByEmail' | cxTranslate }}\\n    </p>\\n    <!-- <a href=\\\"#\\\" class=\\\"btn-link\\\">Print Page</a> -->\\n  </div>\\n\\n  <div *ngIf=\\\"isGuestCustomer\\\">\\n    <cx-guest-register-form\\n      [guid]=\\\"orderGuid\\\"\\n      [email]=\\\"order.paymentInfo.billingAddress.email\\\"\\n    ></cx-guest-register-form>\\n  </div>\\n\\n  <cx-add-to-home-screen-banner></cx-add-to-home-screen-banner>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], OrderConfirmationThankYouMessageComponent);\n\nlet OrderConfirmationTotalsComponent = class OrderConfirmationTotalsComponent {\n    constructor(checkoutService) {\n        this.checkoutService = checkoutService;\n    }\n    ngOnInit() {\n        this.order$ = this.checkoutService.getOrderDetails();\n    }\n    ngOnDestroy() {\n        this.checkoutService.clearCheckoutData();\n    }\n};\nOrderConfirmationTotalsComponent.ctorParameters = () => [\n    { type: CheckoutService }\n];\nOrderConfirmationTotalsComponent = __decorate([\n    Component({\n        selector: 'cx-order-confirmation-totals',\n        template: \"<div class=\\\"cx-order-summary container\\\" *ngIf=\\\"order$ | async as order\\\">\\n  <div class=\\\"row justify-content-end\\\">\\n    <div class=\\\"col-sm-12 col-md-6 col-lg-5 col-xl-4\\\">\\n      <cx-order-summary [cart]=\\\"order\\\"></cx-order-summary>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], OrderConfirmationTotalsComponent);\n\nlet GuestRegisterFormComponent = class GuestRegisterFormComponent {\n    constructor(userService, routingService, authService, fb) {\n        this.userService = userService;\n        this.routingService = routingService;\n        this.authService = authService;\n        this.fb = fb;\n        this.guestRegisterForm = this.fb.group({\n            password: [\n                '',\n                [Validators.required, CustomFormValidators.passwordValidator],\n            ],\n            passwordconf: ['', Validators.required],\n        }, { validator: CustomFormValidators.matchPassword });\n    }\n    submit() {\n        this.userService.registerGuest(this.guid, this.guestRegisterForm.value.password);\n        if (!this.subscription) {\n            this.subscription = this.authService.getUserToken().subscribe(token => {\n                if (token.access_token) {\n                    this.routingService.go({ cxRoute: 'home' });\n                }\n            });\n        }\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n};\nGuestRegisterFormComponent.ctorParameters = () => [\n    { type: UserService },\n    { type: RoutingService },\n    { type: AuthService },\n    { type: FormBuilder }\n];\n__decorate([\n    Input()\n], GuestRegisterFormComponent.prototype, \"guid\", void 0);\n__decorate([\n    Input()\n], GuestRegisterFormComponent.prototype, \"email\", void 0);\nGuestRegisterFormComponent = __decorate([\n    Component({\n        selector: 'cx-guest-register-form',\n        template: \"<div class=\\\"register-guest\\\">\\n  <div class=\\\"col-md-6 col-lg-4\\\">\\n    <h3>{{ 'checkoutOrderConfirmation.createAccount' | cxTranslate }}</h3>\\n    <p>\\n      {{\\n        'checkoutOrderConfirmation.createAccountForNext'\\n          | cxTranslate: { email: email }\\n      }}\\n    </p>\\n\\n    <form [formGroup]=\\\"guestRegisterForm\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'register.password.label' | cxTranslate\\n          }}</span>\\n          <input\\n            class=\\\"form-control\\\"\\n            [class.is-invalid]=\\\"\\n              guestRegisterForm.get('password').invalid &&\\n              guestRegisterForm.get('password').dirty\\n            \\\"\\n            type=\\\"password\\\"\\n            name=\\\"password\\\"\\n            placeholder=\\\"{{ 'register.password.placeholder' | cxTranslate }}\\\"\\n            formControlName=\\\"password\\\"\\n          />\\n          <div\\n            class=\\\"invalid-feedback\\\"\\n            *ngIf=\\\"\\n              guestRegisterForm.get('password').invalid &&\\n              guestRegisterForm.get('password').dirty\\n            \\\"\\n          >\\n            <span>{{ 'register.passwordMinRequirements' | cxTranslate }}</span>\\n          </div>\\n        </label>\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'register.confirmPassword.label' | cxTranslate\\n          }}</span>\\n          <input\\n            class=\\\"form-control\\\"\\n            [class.is-invalid]=\\\"\\n              guestRegisterForm.get('password').value !==\\n              guestRegisterForm.get('passwordconf').value\\n            \\\"\\n            type=\\\"password\\\"\\n            name=\\\"confirmpassword\\\"\\n            placeholder=\\\"{{\\n              'register.confirmPassword.placeholder' | cxTranslate\\n            }}\\\"\\n            formControlName=\\\"passwordconf\\\"\\n          />\\n          <div\\n            class=\\\"invalid-feedback\\\"\\n            *ngIf=\\\"\\n              guestRegisterForm.get('password').value !==\\n                guestRegisterForm.get('passwordconf').value &&\\n              guestRegisterForm.get('passwordconf').value\\n            \\\"\\n          >\\n            <span>{{ 'register.bothPasswordMustMatch' | cxTranslate }}</span>\\n          </div>\\n        </label>\\n      </div>\\n\\n      <button\\n        type=\\\"submit\\\"\\n        (click)=\\\"submit()\\\"\\n        [disabled]=\\\"guestRegisterForm.invalid\\\"\\n        class=\\\"btn btn-block btn-primary\\\"\\n      >\\n        {{ 'common.submit' | cxTranslate }}\\n      </button>\\n    </form>\\n  </div>\\n</div>\\n\"\n    })\n], GuestRegisterFormComponent);\n\nlet OrderConfirmationGuard = class OrderConfirmationGuard {\n    constructor(checkoutService, router, semanticPathService) {\n        this.checkoutService = checkoutService;\n        this.router = router;\n        this.semanticPathService = semanticPathService;\n    }\n    canActivate() {\n        return this.checkoutService.getOrderDetails().pipe(map(orderDetails => {\n            if (orderDetails && Object.keys(orderDetails).length !== 0) {\n                return true;\n            }\n            else {\n                return this.router.parseUrl(this.semanticPathService.get('orders'));\n            }\n        }));\n    }\n};\nOrderConfirmationGuard.ctorParameters = () => [\n    { type: CheckoutService },\n    { type: Router },\n    { type: SemanticPathService }\n];\nOrderConfirmationGuard.ɵprov = ɵɵdefineInjectable({ factory: function OrderConfirmationGuard_Factory() { return new OrderConfirmationGuard(ɵɵinject(CheckoutService), ɵɵinject(Router), ɵɵinject(SemanticPathService)); }, token: OrderConfirmationGuard, providedIn: \"root\" });\nOrderConfirmationGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], OrderConfirmationGuard);\n\nconst orderConfirmationComponents = [\n    OrderConfirmationItemsComponent,\n    OrderConfirmationOverviewComponent,\n    OrderConfirmationThankYouMessageComponent,\n    OrderConfirmationTotalsComponent,\n    GuestRegisterFormComponent,\n];\nlet OrderConfirmationModule = class OrderConfirmationModule {\n};\nOrderConfirmationModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CartSharedModule,\n            CardModule,\n            PwaModule,\n            PromotionsModule,\n            I18nModule,\n            ReactiveFormsModule,\n            FeaturesConfigModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    OrderConfirmationThankMessageComponent: {\n                        component: OrderConfirmationThankYouMessageComponent,\n                        guards: [OrderConfirmationGuard],\n                    },\n                    OrderConfirmationItemsComponent: {\n                        component: OrderConfirmationItemsComponent,\n                        guards: [OrderConfirmationGuard],\n                    },\n                    OrderConfirmationTotalsComponent: {\n                        component: OrderConfirmationTotalsComponent,\n                        guards: [OrderConfirmationGuard],\n                    },\n                    OrderConfirmationOverviewComponent: {\n                        component: OrderConfirmationOverviewComponent,\n                        guards: [OrderConfirmationGuard],\n                    },\n                },\n            }),\n        ],\n        declarations: [...orderConfirmationComponents],\n        exports: [...orderConfirmationComponents],\n        entryComponents: [...orderConfirmationComponents],\n    })\n], OrderConfirmationModule);\n\nlet ProductCarouselService = class ProductCarouselService {\n    constructor(productService, referenceService, semanticPathService) {\n        this.productService = productService;\n        this.referenceService = referenceService;\n        this.semanticPathService = semanticPathService;\n    }\n    /**\n     * Loads the product data and converts it `CarouselItem`.\n     */\n    loadProduct(code) {\n        return this.productService.get(code).pipe(filter(Boolean), map(product => this.convertProduct(product)));\n    }\n    getProductReferences(code, referenceType, displayTitle, displayProductPrices) {\n        return this.referenceService.get(code, referenceType).pipe(filter(Boolean), map((refs) => refs.map(ref => this.convertProduct(ref.target, displayTitle, displayProductPrices))));\n    }\n    /**\n     * Converts the product to a generic CarouselItem\n     */\n    convertProduct(source, displayTitle = true, displayProductPrices = true) {\n        const item = {};\n        if (displayTitle) {\n            item.title = source.name;\n        }\n        if (displayProductPrices && source.price && source.price.formattedValue) {\n            item.price = source.price.formattedValue;\n        }\n        if (source.images && source.images.PRIMARY) {\n            item.media = {\n                container: source.images.PRIMARY,\n                format: 'product',\n            };\n        }\n        item.route = this.semanticPathService.transform({\n            cxRoute: 'product',\n            params: source,\n        });\n        return item;\n    }\n};\nProductCarouselService.ctorParameters = () => [\n    { type: ProductService },\n    { type: ProductReferenceService },\n    { type: SemanticPathService }\n];\nProductCarouselService.ɵprov = ɵɵdefineInjectable({ factory: function ProductCarouselService_Factory() { return new ProductCarouselService(ɵɵinject(ProductService), ɵɵinject(ProductReferenceService), ɵɵinject(SemanticPathService)); }, token: ProductCarouselService, providedIn: \"root\" });\nProductCarouselService = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], ProductCarouselService);\n\nlet ProductCarouselComponent = class ProductCarouselComponent {\n    constructor(componentData, productService, features) {\n        this.componentData = componentData;\n        this.productService = productService;\n        this.features = features;\n        this.PRODUCT_SCOPE = this.features && this.features.isLevel('1.4') ? ProductScope.LIST : '';\n        this.componentData$ = this.componentData.data$.pipe(filter(Boolean));\n        /**\n         * returns an Obervable string for the title.\n         */\n        this.title$ = this.componentData$.pipe(map(data => data.title));\n        /**\n         * Obervable that holds an Array of Observables. This is done, so that\n         * the component UI could consider to lazy load the UI components when they're\n         * in the viewpoint.\n         */\n        this.items$ = this.componentData$.pipe(map(data => data.productCodes.trim().split(' ')), map(codes => codes.map(code => this.productService.get(code, this.PRODUCT_SCOPE))));\n    }\n};\nProductCarouselComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: ProductService },\n    { type: FeatureConfigService }\n];\nProductCarouselComponent = __decorate([\n    Component({\n        selector: 'cx-product-carousel',\n        template: \"<cx-carousel\\n  [items]=\\\"items$ | async\\\"\\n  [title]=\\\"title$ | async\\\"\\n  [template]=\\\"carouselItem\\\"\\n  itemWidth=\\\"285px\\\"\\n>\\n</cx-carousel>\\n\\n<ng-template #carouselItem let-item=\\\"item\\\">\\n  <a tabindex=\\\"0\\\" [routerLink]=\\\"{ cxRoute: 'product', params: item } | cxUrl\\\">\\n    <cx-media\\n      *ngIf=\\\"item.images?.PRIMARY\\\"\\n      [container]=\\\"item.images.PRIMARY\\\"\\n      format=\\\"product\\\"\\n    >\\n    </cx-media>\\n    <h4>{{ item.name }}</h4>\\n    <div class=\\\"price\\\">{{ item.price?.formattedValue }}</div>\\n  </a>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductCarouselComponent);\n\nlet ProductCarouselModule = class ProductCarouselModule {\n};\nProductCarouselModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CarouselModule,\n            MediaModule,\n            RouterModule,\n            UrlModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductCarouselComponent: {\n                        component: ProductCarouselComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ProductCarouselComponent],\n        entryComponents: [ProductCarouselComponent],\n        exports: [ProductCarouselComponent],\n    })\n], ProductCarouselModule);\n\nlet ProductReferencesComponent = class ProductReferencesComponent {\n    constructor(component, current, referenceService) {\n        this.component = component;\n        this.current = current;\n        this.referenceService = referenceService;\n        /**\n         * returns an Obervable string for the title\n         */\n        this.title$ = this.component.data$.pipe(map(d => d.title));\n        this.currentProductCode$ = this.current.getProduct().pipe(filter(Boolean), map((p) => p.code), distinctUntilChanged(), tap(() => this.referenceService.cleanReferences()));\n        /**\n         * Obervable with an Array of Observables. This is done, so that\n         * the component UI could consider to lazy load the UI components when they're\n         * in the viewpoint.\n         */\n        this.items$ = combineLatest([\n            this.currentProductCode$,\n            this.component.data$,\n        ]).pipe(switchMap(([code, data]) => this.getProductReferences(code, data.productReferenceTypes)));\n    }\n    getProductReferences(code, referenceType) {\n        return this.referenceService.get(code, referenceType).pipe(filter(Boolean), map((refs) => refs.map(ref => of(ref.target))));\n    }\n};\nProductReferencesComponent.ctorParameters = () => [\n    { type: CmsComponentData },\n    { type: CurrentProductService },\n    { type: ProductReferenceService }\n];\nProductReferencesComponent = __decorate([\n    Component({\n        selector: 'cx-product-references',\n        template: \"<cx-carousel\\n  [title]=\\\"title$ | async\\\"\\n  [items]=\\\"items$ | async\\\"\\n  [template]=\\\"carouselItem\\\"\\n>\\n</cx-carousel>\\n\\n<ng-template #carouselItem let-item=\\\"item\\\">\\n  <a tabindex=\\\"0\\\" [routerLink]=\\\"{ cxRoute: 'product', params: item } | cxUrl\\\">\\n    <cx-media\\n      *ngIf=\\\"item.images?.PRIMARY\\\"\\n      [container]=\\\"item.images.PRIMARY\\\"\\n      format=\\\"product\\\"\\n    >\\n    </cx-media>\\n    <h4>{{ item.name }}</h4>\\n    <div class=\\\"price\\\">{{ item.price?.formattedValue }}</div>\\n  </a>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductReferencesComponent);\n\nlet ProductReferencesModule = class ProductReferencesModule {\n};\nProductReferencesModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            CarouselModule,\n            MediaModule,\n            RouterModule,\n            UrlModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductReferencesComponent: {\n                        component: ProductReferencesComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ProductReferencesComponent],\n        entryComponents: [ProductReferencesComponent],\n        exports: [ProductReferencesComponent],\n    })\n], ProductReferencesModule);\n\nconst defaultScrollConfig = {\n    view: {\n        infiniteScroll: {\n            active: false,\n            productLimit: 0,\n            showMoreButton: false,\n        },\n    },\n};\n\nlet ProductImagesComponent = class ProductImagesComponent {\n    constructor(currentProductService) {\n        this.currentProductService = currentProductService;\n        this.mainMediaContainer = new BehaviorSubject(null);\n        this.product$ = this.currentProductService.getProduct().pipe(filter(Boolean), distinctUntilChanged(), tap((p) => this.mainMediaContainer.next(p.images ? p.images.PRIMARY : {})));\n        this.thumbs$ = this.product$.pipe(map(product => this.createThumbs(product)), \n        // TODO: deprecated, remove the below tap (issue:#6166)\n        tap(thumbs => {\n            this.isThumbsEmpty = thumbs.length === 0;\n        }));\n        this.mainImage$ = combineLatest([this.product$, this.mainMediaContainer]).pipe(map(([, container]) => container));\n    }\n    openImage(item) {\n        this.mainMediaContainer.next(item);\n    }\n    isActive(thumbnail) {\n        return this.mainMediaContainer.pipe(filter(Boolean), map((container) => {\n            return (container.zoom &&\n                container.zoom.url &&\n                thumbnail.zoom &&\n                thumbnail.zoom.url &&\n                container.zoom.url === thumbnail.zoom.url);\n        }));\n    }\n    /** find the index of the main media in the list of media */\n    getActive(thumbs) {\n        return this.mainMediaContainer.pipe(filter(Boolean), map((container) => {\n            const current = thumbs.find(t => t.media &&\n                container.zoom &&\n                t.media.container &&\n                t.media.container.zoom &&\n                t.media.container.zoom.url === container.zoom.url);\n            return thumbs.indexOf(current);\n        }));\n    }\n    /**\n     * Return an array of CarouselItems for the product thumbnails.\n     * In case there are less then 2 thumbs, we return null.\n     */\n    createThumbs(product) {\n        if (!product.images ||\n            !product.images.GALLERY ||\n            product.images.GALLERY.length < 2) {\n            return [];\n        }\n        return product.images.GALLERY.map(c => of({ container: c }));\n    }\n};\nProductImagesComponent.ctorParameters = () => [\n    { type: CurrentProductService }\n];\nProductImagesComponent = __decorate([\n    Component({\n        selector: 'cx-product-images',\n        template: \"<ng-container *ngIf=\\\"mainImage$ | async as main\\\">\\n  <cx-media [container]=\\\"main\\\" format=\\\"zoom\\\"> </cx-media>\\n</ng-container>\\n\\n<ng-container *ngIf=\\\"thumbs$ | async as thumbs\\\">\\n  <cx-carousel\\n    *ngIf=\\\"thumbs.length\\\"\\n    class=\\\"thumbs\\\"\\n    [items]=\\\"thumbs\\\"\\n    itemWidth=\\\"120px\\\"\\n    [hideIndicators]=\\\"false\\\"\\n    [template]=\\\"thumb\\\"\\n  ></cx-carousel>\\n</ng-container>\\n\\n<ng-template #thumb let-item=\\\"item\\\">\\n  <cx-media\\n    [container]=\\\"item.container\\\"\\n    tabindex=\\\"0\\\"\\n    format=\\\"thumbnail\\\"\\n    (focus)=\\\"openImage(item.container)\\\"\\n    [class.is-active]=\\\"isActive(item.container) | async\\\"\\n  >\\n  </cx-media>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductImagesComponent);\n\nlet ProductImagesModule = class ProductImagesModule {\n};\nProductImagesModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            MediaModule,\n            OutletModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductImagesComponent: {\n                        component: ProductImagesComponent,\n                    },\n                },\n            }),\n            CarouselModule,\n        ],\n        declarations: [ProductImagesComponent],\n        entryComponents: [ProductImagesComponent],\n        exports: [ProductImagesComponent],\n    })\n], ProductImagesModule);\n\nlet ProductIntroComponent = class ProductIntroComponent {\n    constructor(currentProductService, translationService, winRef) {\n        this.currentProductService = currentProductService;\n        this.translationService = translationService;\n        this.winRef = winRef;\n        this.reviewsTabAvailable = new BehaviorSubject(false);\n        this.product$ = this.currentProductService.getProduct();\n    }\n    ngAfterContentChecked() {\n        this.reviewsTabAvailable.next(!!this.getReviewsComponent());\n    }\n    // Scroll to views component on page and click \"Reviews\" tab\n    showReviews() {\n        // Use translated label for Reviews tab reference\n        this.translationService\n            .translate('TabPanelContainer.tabs.ProductReviewsTabComponent')\n            .subscribe(reviewsTabLabel => {\n            const tabsComponent = this.getTabsComponent();\n            const reviewsTab = this.getTabByLabel(reviewsTabLabel, tabsComponent);\n            const reviewsComponent = this.getReviewsComponent();\n            if (reviewsTab && reviewsComponent) {\n                this.clickTabIfInactive(reviewsTab);\n                setTimeout(() => reviewsComponent.scrollIntoView({ behavior: 'smooth' }), 0);\n            }\n        })\n            .unsubscribe();\n    }\n    // NOTE: Does not currently exists as its own component\n    // but part of tabs component. This is likely to change in refactor.\n    getReviewsComponent() {\n        return this.winRef.document.querySelector('cx-product-reviews');\n    }\n    // Get Tabs Component if exists on page\n    getTabsComponent() {\n        return this.winRef.document.querySelector('cx-tab-paragraph-container');\n    }\n    // Click to activate tab if not already active\n    clickTabIfInactive(tab) {\n        if (!tab.classList.contains('active') ||\n            tab.classList.contains('toggled')) {\n            tab.click();\n        }\n    }\n    // Get Tab by label if exists on page\n    getTabByLabel(label, tabsComponent) {\n        if (tabsComponent) {\n            // NOTE: Reads through h3 tags to click on correct tab\n            // There may be a better way of doing this now/after refactor\n            const h3Elements = tabsComponent.getElementsByTagName('h3');\n            // Look through h3 tab elements until finding tab with label\n            for (const h3Element of Array.from(h3Elements)) {\n                if (h3Element.innerHTML.includes(label)) {\n                    return h3Element;\n                }\n            }\n        }\n    }\n};\nProductIntroComponent.ctorParameters = () => [\n    { type: CurrentProductService },\n    { type: TranslationService },\n    { type: WindowRef }\n];\nProductIntroComponent = __decorate([\n    Component({\n        selector: 'cx-product-intro',\n        template: \"<ng-container *ngIf=\\\"product$ | async as product\\\">\\n  <div class=\\\"rating\\\" *ngIf=\\\"product.averageRating\\\">\\n    <cx-star-rating\\n      [rating]=\\\"product?.averageRating\\\"\\n      [disabled]=\\\"true\\\"\\n    ></cx-star-rating>\\n    <div class=\\\"count\\\">({{ product?.numberOfReviews }})</div>\\n    <a\\n      class=\\\"btn-link\\\"\\n      *ngIf=\\\"reviewsTabAvailable | async\\\"\\n      (click)=\\\"showReviews()\\\"\\n      >{{ 'productSummary.showReviews' | cxTranslate }}</a\\n    >\\n  </div>\\n  <div class=\\\"rating\\\" *ngIf=\\\"!product.averageRating\\\">\\n    {{ 'productDetails.noReviews' | cxTranslate }}\\n  </div>\\n  <div class=\\\"code\\\">\\n    {{ 'productSummary.id' | cxTranslate }} {{ product?.code }}\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductIntroComponent);\n\nlet ProductIntroModule = class ProductIntroModule {\n};\nProductIntroModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            I18nModule,\n            StarRatingModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductIntroComponent: {\n                        component: ProductIntroComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ProductIntroComponent],\n        exports: [ProductIntroComponent],\n        entryComponents: [ProductIntroComponent],\n    })\n], ProductIntroModule);\n\nlet ProductListComponentService = class ProductListComponentService {\n    constructor(productSearchService, routing, activatedRoute, currencyService, languageService, router) {\n        this.productSearchService = productSearchService;\n        this.routing = routing;\n        this.activatedRoute = activatedRoute;\n        this.currencyService = currencyService;\n        this.languageService = languageService;\n        this.router = router;\n        // TODO: make it configurable\n        this.defaultPageSize = 10;\n        this.RELEVANCE_ALLCATEGORIES = ':relevance:allCategories:';\n        this.searchResults$ = this.productSearchService\n            .getResults()\n            .pipe(filter(searchResult => Object.keys(searchResult).length > 0));\n        this.searchByRouting$ = combineLatest([\n            this.routing.getRouterState().pipe(distinctUntilChanged((x, y) => {\n                // router emits new value also when the anticipated `nextState` changes\n                // but we want to perform search only when current url changes\n                return x.state.url === y.state.url;\n            })),\n            // also trigger search on site context changes\n            this.languageService.getActive(),\n            this.currencyService.getActive(),\n        ]).pipe(pluck(0, 'state'), tap((state) => {\n            const criteria = this.getCriteriaFromRoute(state.params, state.queryParams);\n            this.search(criteria);\n        }));\n        /**\n         * This stream should be used only on the Product Listing Page.\n         *\n         * It not only emits search results, but also performs a search on every change\n         * of the route (i.e. route params or query params).\n         *\n         * When a user leaves the PLP route, the PLP component unsubscribes from this stream\n         * so no longer the search is performed on route change.\n         */\n        this.model$ = combineLatest([\n            this.searchResults$,\n            this.searchByRouting$,\n        ]).pipe(pluck(0), shareReplay({ bufferSize: 1, refCount: true }));\n    }\n    clearSearchResults() {\n        this.productSearchService.clearResults();\n    }\n    getCriteriaFromRoute(routeParams, queryParams) {\n        return {\n            query: queryParams.query || this.getQueryFromRouteParams(routeParams),\n            pageSize: queryParams.pageSize || this.defaultPageSize,\n            currentPage: queryParams.currentPage,\n            sortCode: queryParams.sortCode,\n        };\n    }\n    getQueryFromRouteParams({ brandCode, categoryCode, query, }) {\n        if (query) {\n            return query;\n        }\n        if (categoryCode) {\n            return this.RELEVANCE_ALLCATEGORIES + categoryCode;\n        }\n        if (brandCode) {\n            return this.RELEVANCE_ALLCATEGORIES + brandCode;\n        }\n    }\n    search(criteria) {\n        const query = criteria.query;\n        const searchConfig = this.getSearchConfig(criteria);\n        this.productSearchService.search(query, searchConfig);\n    }\n    getSearchConfig(criteria) {\n        const result = {\n            currentPage: criteria.currentPage,\n            pageSize: criteria.pageSize,\n            sortCode: criteria.sortCode,\n        };\n        // drop empty keys\n        Object.keys(result).forEach(key => !result[key] && delete result[key]);\n        return result;\n    }\n    setQuery(query) {\n        this.setQueryParams({ query, currentPage: undefined });\n    }\n    viewPage(pageNumber) {\n        this.setQueryParams({ currentPage: pageNumber });\n    }\n    /**\n     * Get items from a given page without using navigation\n     */\n    getPageItems(pageNumber) {\n        this.routing\n            .getRouterState()\n            .subscribe(route => {\n            const routeCriteria = this.getCriteriaFromRoute(route.state.params, route.state.queryParams);\n            const criteria = Object.assign(Object.assign({}, routeCriteria), { currentPage: pageNumber });\n            this.search(criteria);\n        })\n            .unsubscribe();\n    }\n    sort(sortCode) {\n        this.setQueryParams({ sortCode });\n    }\n    setQueryParams(queryParams) {\n        this.router.navigate([], {\n            queryParams,\n            queryParamsHandling: 'merge',\n            relativeTo: this.activatedRoute,\n        });\n    }\n};\nProductListComponentService.ctorParameters = () => [\n    { type: ProductSearchService },\n    { type: RoutingService },\n    { type: ActivatedRoute },\n    { type: CurrencyService },\n    { type: LanguageService },\n    { type: Router }\n];\nProductListComponentService.ɵprov = ɵɵdefineInjectable({ factory: function ProductListComponentService_Factory() { return new ProductListComponentService(ɵɵinject(ProductSearchService), ɵɵinject(RoutingService), ɵɵinject(ActivatedRoute), ɵɵinject(CurrencyService), ɵɵinject(LanguageService), ɵɵinject(Router)); }, token: ProductListComponentService, providedIn: \"root\" });\nProductListComponentService = __decorate([\n    Injectable({ providedIn: 'root' })\n], ProductListComponentService);\n\nvar ViewModes;\n(function (ViewModes) {\n    ViewModes[\"Grid\"] = \"grid\";\n    ViewModes[\"List\"] = \"list\";\n})(ViewModes || (ViewModes = {}));\nlet ProductViewComponent = class ProductViewComponent {\n    constructor() {\n        this.iconTypes = ICON_TYPE;\n        this.modeChange = new EventEmitter();\n    }\n    get buttonClass() {\n        const viewName = this.viewMode.toLowerCase();\n        return `cx-product-${viewName}`;\n    }\n    /**\n     *   Display icons inversely to allow users\n     *   to see the view they will navigate to\n     */\n    get viewMode() {\n        if (this.mode === 'list') {\n            return this.iconTypes.GRID;\n        }\n        else if (this.mode === 'grid') {\n            return this.iconTypes.LIST;\n        }\n    }\n    changeMode() {\n        const newMode = this.mode === ViewModes.Grid ? ViewModes.List : ViewModes.Grid;\n        this.modeChange.emit(newMode);\n    }\n};\n__decorate([\n    Input()\n], ProductViewComponent.prototype, \"mode\", void 0);\n__decorate([\n    Output()\n], ProductViewComponent.prototype, \"modeChange\", void 0);\nProductViewComponent = __decorate([\n    Component({\n        selector: 'cx-product-view',\n        template: \"<div class=\\\"cx-product-layout\\\" (click)=\\\"changeMode()\\\">\\n  <div [ngClass]=\\\"buttonClass\\\">\\n    <cx-icon\\n      *ngIf=\\\"viewMode === iconTypes.GRID\\\"\\n      [type]=\\\"iconTypes.GRID\\\"\\n    ></cx-icon>\\n    <cx-icon\\n      *ngIf=\\\"viewMode === iconTypes.LIST\\\"\\n      [type]=\\\"iconTypes.LIST\\\"\\n    ></cx-icon>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductViewComponent);\n\nlet ProductListComponent = class ProductListComponent {\n    constructor(pageLayoutService, productListComponentService, scrollConfig) {\n        this.pageLayoutService = pageLayoutService;\n        this.productListComponentService = productListComponentService;\n        this.scrollConfig = scrollConfig;\n        this.subscription = new Subscription();\n        this.model$ = this.productListComponentService\n            .model$;\n        this.viewMode$ = new BehaviorSubject(ViewModes.Grid);\n        this.ViewModes = ViewModes;\n    }\n    ngOnInit() {\n        this.isInfiniteScroll = this.scrollConfig.view.infiniteScroll.active;\n        this.productListComponentService.clearSearchResults();\n        this.subscription.add(this.pageLayoutService.templateName$.pipe(take(1)).subscribe(template => {\n            this.viewMode$.next(template === 'ProductGridPageTemplate'\n                ? ViewModes.Grid\n                : ViewModes.List);\n        }));\n    }\n    sortList(sortCode) {\n        this.productListComponentService.sort(sortCode);\n    }\n    setViewMode(mode) {\n        this.viewMode$.next(mode);\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n};\nProductListComponent.ctorParameters = () => [\n    { type: PageLayoutService },\n    { type: ProductListComponentService },\n    { type: ViewConfig }\n];\nProductListComponent = __decorate([\n    Component({\n        selector: 'cx-product-list',\n        template: \"<div class=\\\"cx-page\\\" *ngIf=\\\"model$ | async as model\\\">\\n  <section class=\\\"cx-page-section\\\">\\n    <div class=\\\"container\\\">\\n      <div class=\\\"row\\\">\\n        <div class=\\\"col-12 col-lg-12\\\" *ngIf=\\\"viewMode$ | async as viewMode\\\">\\n          <div class=\\\"cx-sorting top\\\">\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-12 col-lg-4 mr-auto\\\">\\n                <div class=\\\"form-group cx-sort-dropdown\\\">\\n                  <cx-sorting\\n                    [sortOptions]=\\\"model.sorts\\\"\\n                    (sortListEvent)=\\\"sortList($event)\\\"\\n                    [selectedOption]=\\\"model.pagination.sort\\\"\\n                    placeholder=\\\"{{\\n                      'productList.sortByRelevance' | cxTranslate\\n                    }}\\\"\\n                  ></cx-sorting>\\n                </div>\\n              </div>\\n              <div *ngIf=\\\"!isInfiniteScroll\\\" class=\\\"col-auto\\\">\\n                <div\\n                  class=\\\"cx-pagination\\\"\\n                  aria-label=\\\"product search pagination\\\"\\n                >\\n                  <cx-pagination\\n                    [pagination]=\\\"model.pagination\\\"\\n                    queryParam=\\\"currentPage\\\"\\n                    [defaultPage]=\\\"0\\\"\\n                  ></cx-pagination>\\n                </div>\\n              </div>\\n              <div class=\\\"col-auto ml-auto ml-lg-0\\\">\\n                <cx-product-view\\n                  (modeChange)=\\\"setViewMode($event)\\\"\\n                  [mode]=\\\"viewMode\\\"\\n                ></cx-product-view>\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\\\"cx-product-container\\\">\\n            <!-- Product list when using pagination -->\\n            <ng-container *ngIf=\\\"!isInfiniteScroll; else infiniteScroll\\\">\\n              <ng-container *ngIf=\\\"viewMode === ViewModes.Grid\\\">\\n                <div class=\\\"row\\\">\\n                  <cx-product-grid-item\\n                    *ngFor=\\\"let product of model?.products\\\"\\n                    [product]=\\\"product\\\"\\n                    class=\\\"col-12 col-sm-6 col-md-4\\\"\\n                  ></cx-product-grid-item>\\n                </div>\\n              </ng-container>\\n\\n              <ng-container *ngIf=\\\"viewMode === ViewModes.List\\\">\\n                <cx-product-list-item\\n                  *ngFor=\\\"let product of model?.products\\\"\\n                  [product]=\\\"product\\\"\\n                  class=\\\"cx-product-search-list\\\"\\n                ></cx-product-list-item>\\n              </ng-container>\\n            </ng-container>\\n\\n            <!-- Product list when using infinite scroll -->\\n            <ng-template #infiniteScroll>\\n              <cx-product-scroll\\n                [scrollConfig]=\\\"scrollConfig\\\"\\n                [model]=\\\"model\\\"\\n                [inputViewMode]=\\\"viewMode\\\"\\n              ></cx-product-scroll>\\n            </ng-template>\\n          </div>\\n          <div class=\\\"cx-sorting bottom\\\">\\n            <div class=\\\"row\\\">\\n              <div class=\\\"col-12 col-lg-4 mr-auto\\\">\\n                <div class=\\\"form-group cx-sort-dropdown\\\">\\n                  <cx-sorting\\n                    [sortOptions]=\\\"model.sorts\\\"\\n                    (sortListEvent)=\\\"sortList($event)\\\"\\n                    [selectedOption]=\\\"model.pagination.sort\\\"\\n                    placeholder=\\\"{{\\n                      'productList.sortByRelevance' | cxTranslate\\n                    }}\\\"\\n                  ></cx-sorting>\\n                </div>\\n              </div>\\n              <div\\n                *ngIf=\\\"!isInfiniteScroll\\\"\\n                class=\\\"col-auto\\\"\\n                aria-label=\\\"product search pagination\\\"\\n              >\\n                <div class=\\\"cx-pagination\\\">\\n                  <cx-pagination\\n                    [pagination]=\\\"model.pagination\\\"\\n                    queryParam=\\\"currentPage\\\"\\n                    [defaultPage]=\\\"0\\\"\\n                  ></cx-pagination>\\n                </div>\\n              </div>\\n              <div class=\\\"col-auto ml-auto ml-lg-0\\\">\\n                <cx-product-view\\n                  (modeChange)=\\\"setViewMode($event)\\\"\\n                  [mode]=\\\"viewMode\\\"\\n                ></cx-product-view>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </section>\\n</div>\\n\"\n    })\n], ProductListComponent);\n\nlet ProductScrollComponent = class ProductScrollComponent {\n    constructor(productListComponentService, ref) {\n        this.productListComponentService = productListComponentService;\n        this.ref = ref;\n        this.subscription = new Subscription();\n        this.ViewModes = ViewModes;\n        this.appendProducts = false;\n        this.resetList = false;\n        this.isMaxProducts = false;\n        this.isLastPage = false;\n        this.isEmpty = false;\n    }\n    set setConfig(inputConfig) {\n        this.setComponentConfigurations(inputConfig);\n    }\n    set setModel(inputModel) {\n        this.infiniteScrollOperations(inputModel);\n    }\n    set setViewMode(inputViewMode) {\n        this.inputViewMode = inputViewMode;\n        //If viewMode is already set (meaning it is not the first load)\n        //Reset the product list\n        if (this.viewMode) {\n            this.resetListOnViewModeChange();\n        }\n        else {\n            //If viewMode is not set (meaning it is the first load)\n            //Set the viewMode\n            this.viewMode = inputViewMode;\n        }\n    }\n    scrollPage(pageNumber) {\n        this.appendProducts = true;\n        this.ref.markForCheck();\n        this.productListComponentService.getPageItems(pageNumber);\n    }\n    loadNextPage(pageNumber) {\n        this.isMaxProducts = false;\n        this.scrollPage(pageNumber);\n    }\n    scrollToTop() {\n        window.scroll(0, 0);\n    }\n    setComponentConfigurations(scrollConfig) {\n        const isButton = scrollConfig.view.infiniteScroll.showMoreButton;\n        const configProductLimit = scrollConfig.view.infiniteScroll.productLimit;\n        //Display \"show more\" button every time when button configuration is true\n        //Otherwise, only display \"show more\" when the configuration product limit is reached\n        this.productLimit = isButton ? 1 : configProductLimit;\n    }\n    infiniteScrollOperations(inputModel) {\n        if (this.isSamePage(inputModel)) {\n            return;\n        }\n        if (this.appendProducts) {\n            this.model = Object.assign(Object.assign({}, inputModel), { products: this.model.products.concat(inputModel.products) });\n        }\n        else {\n            this.model = inputModel;\n            this.maxProducts = this.productLimit;\n        }\n        this.setConditions();\n        this.ref.markForCheck();\n    }\n    resetListOnViewModeChange() {\n        this.scrollToTop();\n        this.resetList = true;\n        this.productListComponentService.getPageItems(0);\n    }\n    //Set booleans after model has been retrieved\n    setConditions() {\n        this.isEmpty = !this.model.products || this.model.products.length === 0;\n        this.isLastPage =\n            this.model.pagination.currentPage ===\n                this.model.pagination.totalPages - 1;\n        this.isMaxProducts =\n            this.productLimit &&\n                this.productLimit !== 0 &&\n                this.model.products.length >= this.maxProducts;\n        //Add the productLimit to the current number of products to determine the next max number of products\n        if (this.isMaxProducts) {\n            this.maxProducts = this.model.products.length + this.productLimit;\n        }\n        //Only change viewMode once the new model is set\n        //This prevents flickering issues\n        if (this.viewMode !== this.inputViewMode) {\n            this.viewMode = this.inputViewMode;\n        }\n        this.resetList = false;\n        this.appendProducts = false;\n    }\n    /**\n     * @deprecated at release 2.0.\n     * If the new list is the same and it is not intended to reset the list then return true\n     * Return false otherwise.\n     */\n    isSamePage(inputModel) {\n        if (!this.resetList &&\n            this.model &&\n            this.model.breadcrumbs &&\n            inputModel.breadcrumbs &&\n            this.model.breadcrumbs.length > 0 &&\n            inputModel.breadcrumbs.length > 0) {\n            if (this.model.breadcrumbs.length === inputModel.breadcrumbs.length) {\n                for (let i = 0; i < this.model.breadcrumbs.length; i++) {\n                    if (this.model.breadcrumbs[i].facetCode ===\n                        inputModel.breadcrumbs[i].facetCode &&\n                        this.model.breadcrumbs[i].facetValueCode ===\n                            inputModel.breadcrumbs[i].facetValueCode &&\n                        this.model.breadcrumbs[i].removeQuery.query.value ===\n                            inputModel.breadcrumbs[i].removeQuery.query.value &&\n                        this.model.pagination.currentPage ===\n                            inputModel.pagination.currentPage) {\n                        return true;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n};\nProductScrollComponent.ctorParameters = () => [\n    { type: ProductListComponentService },\n    { type: ChangeDetectorRef }\n];\n__decorate([\n    Input('scrollConfig')\n], ProductScrollComponent.prototype, \"setConfig\", null);\n__decorate([\n    Input('model')\n], ProductScrollComponent.prototype, \"setModel\", null);\n__decorate([\n    Input('inputViewMode')\n], ProductScrollComponent.prototype, \"setViewMode\", null);\nProductScrollComponent = __decorate([\n    Component({\n        selector: 'cx-product-scroll',\n        template: \"<ng-container *ngIf=\\\"viewMode === ViewModes.Grid\\\">\\n  <div\\n    infiniteScroll\\n    [infiniteScrollDistance]=\\\"5\\\"\\n    [infiniteScrollThrottle]=\\\"50\\\"\\n    [infiniteScrollDisabled]=\\\"isMaxProducts || isLastPage || isEmpty\\\"\\n    (scrolled)=\\\"scrollPage(model?.pagination?.currentPage + 1)\\\"\\n  >\\n    <div class=\\\"row\\\">\\n      <cx-product-grid-item\\n        *ngFor=\\\"let product of model?.products\\\"\\n        [product]=\\\"product\\\"\\n        class=\\\"col-12 col-sm-6 col-md-4\\\"\\n      ></cx-product-grid-item>\\n    </div>\\n    <div\\n      [className]=\\\"\\n        !isLastPage && model?.pagination?.currentPage > 0\\n          ? 'cx-double-btn-container grid-btn-padding'\\n          : 'cx-single-btn-container grid-btn-padding'\\n      \\\"\\n    >\\n      <div\\n        *ngIf=\\\"\\n          (isMaxProducts || isLastPage) && model?.pagination?.currentPage > 0\\n        \\\"\\n        (click)=\\\"scrollToTop()\\\"\\n        class=\\\"btn btn-block btn-action\\\"\\n      >\\n        {{ 'productList.backToTopBtn' | cxTranslate }}\\n      </div>\\n      <div\\n        *ngIf=\\\"isMaxProducts && !isLastPage\\\"\\n        (click)=\\\"loadNextPage(model?.pagination?.currentPage + 1)\\\"\\n        class=\\\"btn btn-block btn-action align-btn\\\"\\n      >\\n        {{ 'productList.showMoreBtn' | cxTranslate }}\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"appendProducts\\\" class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </div>\\n</ng-container>\\n\\n<ng-container *ngIf=\\\"viewMode === ViewModes.List\\\">\\n  <div\\n    infiniteScroll\\n    [infiniteScrollDistance]=\\\"3\\\"\\n    [infiniteScrollThrottle]=\\\"50\\\"\\n    [infiniteScrollDisabled]=\\\"isMaxProducts || isLastPage || isEmpty\\\"\\n    (scrolled)=\\\"scrollPage(model?.pagination?.currentPage + 1)\\\"\\n  >\\n    <cx-product-list-item\\n      *ngFor=\\\"let product of model?.products\\\"\\n      [product]=\\\"product\\\"\\n      class=\\\"cx-product-search-list\\\"\\n    ></cx-product-list-item>\\n    <div\\n      [className]=\\\"\\n        !isLastPage && model?.pagination?.currentPage > 0\\n          ? 'cx-double-btn-container'\\n          : 'cx-single-btn-container'\\n      \\\"\\n    >\\n      <div\\n        *ngIf=\\\"\\n          (isMaxProducts || isLastPage) && model?.pagination?.currentPage > 0\\n        \\\"\\n        (click)=\\\"scrollToTop()\\\"\\n        class=\\\"btn btn-block btn-action\\\"\\n      >\\n        {{ 'productList.backToTopBtn' | cxTranslate }}\\n      </div>\\n      <div\\n        *ngIf=\\\"isMaxProducts && !isLastPage\\\"\\n        (click)=\\\"loadNextPage(model?.pagination?.currentPage + 1)\\\"\\n        class=\\\"btn btn-block btn-action align-btn\\\"\\n      >\\n        {{ 'productList.showMoreBtn' | cxTranslate }}\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"appendProducts\\\" class=\\\"cx-spinner\\\">\\n      <cx-spinner></cx-spinner>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], ProductScrollComponent);\n\nlet ProductFacetNavigationComponent = class ProductFacetNavigationComponent {\n    constructor(modalService, activatedRoute, productListComponentService) {\n        this.modalService = modalService;\n        this.activatedRoute = activatedRoute;\n        this.productListComponentService = productListComponentService;\n        this.iconTypes = ICON_TYPE;\n        this.collapsedFacets = new Set();\n        this.showAllPerFacetMap = new Map();\n        this.queryCodec = new HttpUrlEncodingCodec();\n    }\n    ngOnInit() {\n        this.sub = this.activatedRoute.params.subscribe(params => {\n            this.activeFacetValueCode = params.categoryCode || params.brandCode;\n        });\n        this.searchResult$ = this.productListComponentService.model$.pipe(tap(searchResult => {\n            if (searchResult.facets) {\n                searchResult.facets.forEach(el => {\n                    this.showAllPerFacetMap.set(el.name, false);\n                });\n            }\n        }));\n        this.visibleFacets$ = this.searchResult$.pipe(map(searchResult => {\n            return searchResult.facets\n                ? searchResult.facets.filter(facet => facet.visible)\n                : [];\n        }));\n    }\n    openFilterModal(content) {\n        this.modalService.open(content, { ariaLabelledBy: 'modal-basic-title' });\n    }\n    toggleValue(query) {\n        this.productListComponentService.setQuery(this.queryCodec.decodeValue(query));\n    }\n    showLess(facetName) {\n        this.updateShowAllPerFacetMap(facetName, false);\n    }\n    showMore(facetName) {\n        this.updateShowAllPerFacetMap(facetName, true);\n    }\n    updateShowAllPerFacetMap(facetName, showAll) {\n        this.showAllPerFacetMap.set(facetName, showAll);\n    }\n    isFacetCollapsed(facetName) {\n        return this.collapsedFacets.has(facetName);\n    }\n    toggleFacet(facetName) {\n        if (this.collapsedFacets.has(facetName)) {\n            this.collapsedFacets.delete(facetName);\n        }\n        else {\n            this.collapsedFacets.add(facetName);\n        }\n    }\n    getVisibleFacetValues(facet) {\n        return facet.values.slice(0, this.showAllPerFacetMap.get(facet.name)\n            ? facet.values.length\n            : facet.topValueCount);\n    }\n    ngOnDestroy() {\n        if (this.sub) {\n            this.sub.unsubscribe();\n        }\n    }\n};\nProductFacetNavigationComponent.ctorParameters = () => [\n    { type: ModalService },\n    { type: ActivatedRoute },\n    { type: ProductListComponentService }\n];\nProductFacetNavigationComponent = __decorate([\n    Component({\n        selector: 'cx-product-facet-navigation',\n        template: \"<ng-container *ngIf=\\\"searchResult$ | async as searchResult\\\">\\n  <div class=\\\"cx-search-facet\\\">\\n    <ng-container *ngIf=\\\"searchResult.breadcrumbs?.length\\\">\\n      <h4 class=\\\"cx-facet-filter-header\\\">\\n        {{ 'productList.filterBy.label' | cxTranslate }}\\n      </h4>\\n      <div class=\\\"cx-facet-filter-container\\\">\\n        <div\\n          *ngFor=\\\"let breadcrumb of searchResult.breadcrumbs\\\"\\n          [hidden]=\\\"breadcrumb.facetValueCode === activeFacetValueCode\\\"\\n          class=\\\"cx-facet-filter-pill\\\"\\n          role=\\\"filter\\\"\\n        >\\n          <span class=\\\"cx-facet-pill-value\\\">{{\\n            breadcrumb.facetValueName\\n          }}</span>\\n          <button\\n            type=\\\"button\\\"\\n            class=\\\"close\\\"\\n            aria-label=\\\"Close\\\"\\n            (click)=\\\"toggleValue(breadcrumb.removeQuery.query.value)\\\"\\n          >\\n            <span aria-hidden=\\\"true\\\">\\n              <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n            </span>\\n          </button>\\n        </div>\\n      </div>\\n    </ng-container>\\n\\n    <ng-container *ngIf=\\\"visibleFacets$ | async as visibleFacets\\\">\\n      <ng-container *ngFor=\\\"let facet of visibleFacets; let facetId = index\\\">\\n        <div class=\\\"cx-facet-group\\\">\\n          <div class=\\\"cx-facet-header\\\">\\n            <a\\n              class=\\\"cx-facet-header-link\\\"\\n              (click)=\\\"toggleFacet(facet.name)\\\"\\n              [attr.aria-expanded]=\\\"!isFacetCollapsed(facet.name)\\\"\\n              aria-controls=\\\"\\\"\\n            >\\n              {{ facet.name }}\\n              <cx-icon\\n                [type]=\\\"\\n                  isFacetCollapsed(facet.name)\\n                    ? iconTypes.EXPAND\\n                    : iconTypes.COLLAPSE\\n                \\\"\\n              ></cx-icon>\\n            </a>\\n          </div>\\n          <ng-container *ngIf=\\\"!isFacetCollapsed(facet.name)\\\">\\n            <ul class=\\\"cx-facet-list\\\">\\n              <li\\n                *ngFor=\\\"\\n                  let value of getVisibleFacetValues(facet);\\n                  index as facetValueId\\n                \\\"\\n              >\\n                <div class=\\\"form-check\\\">\\n                  <label class=\\\"form-checkbox cx-facet-label\\\">\\n                    <input\\n                      class=\\\"form-check-input cx-facet-checkbox\\\"\\n                      role=\\\"checkbox\\\"\\n                      type=\\\"checkbox\\\"\\n                      aria-checked=\\\"true\\\"\\n                      [checked]=\\\"value.selected\\\"\\n                      (change)=\\\"toggleValue(value.query.query.value)\\\"\\n                    />\\n                    <span class=\\\"cx-facet-text\\\"\\n                      >{{ value.name }} ({{ value.count }})</span\\n                    >\\n                  </label>\\n                </div>\\n              </li>\\n              <li\\n                class=\\\"cx-facet-toggle-btn\\\"\\n                (click)=\\\"showLess(facet.name)\\\"\\n                *ngIf=\\\"showAllPerFacetMap.get(facet.name)\\\"\\n              >\\n                {{ 'productList.showLess' | cxTranslate }}\\n              </li>\\n              <li\\n                class=\\\"cx-facet-toggle-btn\\\"\\n                (click)=\\\"showMore(facet.name)\\\"\\n                *ngIf=\\\"\\n                  !showAllPerFacetMap.get(facet.name) &&\\n                  facet.values.length > facet.topValueCount\\n                \\\"\\n              >\\n                {{ 'productList.showMore' | cxTranslate }}\\n              </li>\\n            </ul>\\n          </ng-container>\\n        </div>\\n      </ng-container>\\n    </ng-container>\\n  </div>\\n\\n  <div class=\\\"cx-facet-mobile\\\">\\n    <div class=\\\"container\\\">\\n      <button\\n        class=\\\"btn btn-action btn-block cx-facet-mobile-btn\\\"\\n        (click)=\\\"openFilterModal(content)\\\"\\n      >\\n        {{ 'productList.filterBy.action' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n\\n  <!-- START ONLY SHOW FILTER SECTION IN MOBILE WHEN THEY ARE SELECTED -->\\n  <div class=\\\"container\\\">\\n    <div class=\\\"cx-facet-mobile\\\" *ngIf=\\\"searchResult.breadcrumbs?.length\\\">\\n      <div class=\\\"cx-facet-filter-container\\\">\\n        <h4 class=\\\"cx-facet-filter-header\\\">\\n          {{ 'productList.appliedFilter' | cxTranslate }}\\n        </h4>\\n        <div\\n          class=\\\"cx-facet-filter-pill\\\"\\n          role=\\\"filter\\\"\\n          *ngFor=\\\"let breadcrumb of searchResult.breadcrumbs\\\"\\n        >\\n          <span class=\\\"cx-facet-pill-value\\\">\\n            {{ breadcrumb.facetValueName }}\\n          </span>\\n          <button\\n            type=\\\"button\\\"\\n            class=\\\"close\\\"\\n            aria-label=\\\"Close\\\"\\n            (click)=\\\"toggleValue(breadcrumb.removeQuery.query.value)\\\"\\n          >\\n            <span aria-hidden=\\\"true\\\">\\n              <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n            </span>\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n  <!-- END ONLY SHOW FILTER SECTION IN MOBILE WHEN THEY ARE SELECTED -->\\n\\n  <ng-template #content let-c=\\\"close\\\" let-d=\\\"dismiss\\\">\\n    <div class=\\\"modal-header\\\">\\n      <h4 class=\\\"cx-facet-modal-title\\\" id=\\\"modal-title\\\">\\n        {{ 'productList.filterBy.label' | cxTranslate }}\\n      </h4>\\n      <button\\n        type=\\\"button\\\"\\n        class=\\\"close\\\"\\n        aria-label=\\\"Close\\\"\\n        (click)=\\\"d('Cross click')\\\"\\n      >\\n        <span aria-hidden=\\\"true\\\">\\n          <cx-icon [type]=\\\"iconTypes.CLOSE\\\"></cx-icon>\\n        </span>\\n      </button>\\n    </div>\\n    <div class=\\\"modal-body cx-facet-modal-body\\\">\\n      <form>\\n        <div\\n          class=\\\"form-group\\\"\\n          *ngFor=\\\"let facet of searchResult.facets; index as facetId\\\"\\n        >\\n          <h4 class=\\\"cx-facet-modal-label\\\" for=\\\"megapixels\\\">\\n            {{ facet.name }}\\n          </h4>\\n          <div class=\\\"input-group\\\">\\n            <ul class=\\\"cx-facet-list\\\">\\n              <li *ngFor=\\\"let value of facet.values; index as facetValueId\\\">\\n                <div class=\\\"form-check\\\">\\n                  <label class=\\\"form-checkbox cx-facet-label\\\">\\n                    <input\\n                      class=\\\"form-check-input cx-facet-checkbox\\\"\\n                      role=\\\"checkbox\\\"\\n                      type=\\\"checkbox\\\"\\n                      aria-checked=\\\"true\\\"\\n                      [checked]=\\\"value.selected\\\"\\n                      (change)=\\\"toggleValue(value.query.query.value)\\\"\\n                    />\\n                    <span class=\\\"cx-facet-text\\\"\\n                      >{{ value.name }} ({{ value.count }})</span\\n                    >\\n                  </label>\\n                </div>\\n              </li>\\n            </ul>\\n          </div>\\n        </div>\\n      </form>\\n    </div>\\n  </ng-template>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductFacetNavigationComponent);\n\nlet ProductGridItemComponent = class ProductGridItemComponent {\n};\n__decorate([\n    Input()\n], ProductGridItemComponent.prototype, \"product\", void 0);\nProductGridItemComponent = __decorate([\n    Component({\n        selector: 'cx-product-grid-item',\n        template: \"<a\\n  [routerLink]=\\\"{ cxRoute: 'product', params: product } | cxUrl\\\"\\n  class=\\\"cx-product-image-container\\\"\\n>\\n  <cx-media\\n    class=\\\"cx-product-image\\\"\\n    [container]=\\\"product.images?.PRIMARY\\\"\\n    format=\\\"product\\\"\\n    [alt]=\\\"product.summary\\\"\\n  ></cx-media>\\n</a>\\n<a\\n  [routerLink]=\\\"{ cxRoute: 'product', params: product } | cxUrl\\\"\\n  class=\\\"cx-product-name\\\"\\n  [innerHTML]=\\\"product.nameHtml\\\"\\n></a>\\n\\n<div class=\\\"cx-product-rating\\\">\\n  <cx-star-rating\\n    *ngIf=\\\"product.averageRating\\\"\\n    [rating]=\\\"product?.averageRating\\\"\\n    [disabled]=\\\"true\\\"\\n  ></cx-star-rating>\\n  <div *ngIf=\\\"!product.averageRating\\\">\\n    {{ 'productDetails.noReviews' | cxTranslate }}\\n  </div>\\n</div>\\n<div class=\\\"cx-product-price-container\\\">\\n  <div class=\\\"cx-product-price\\\" aria-label=\\\"Product price\\\">\\n    {{ product.price?.formattedValue }}\\n  </div>\\n</div>\\n\\n<ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n  <div class=\\\"cx-variant-style-icons\\\" *ngIf=\\\"product.variantOptions\\\">\\n    <cx-variant-style-icons\\n      [variants]=\\\"product.variantOptions\\\"\\n    ></cx-variant-style-icons>\\n  </div>\\n</ng-container>\\n\\n<cx-add-to-cart\\n  *ngIf=\\\"product.stock?.stockLevelStatus !== 'outOfStock'\\\"\\n  [showQuantity]=\\\"false\\\"\\n  [product]=\\\"product\\\"\\n></cx-add-to-cart>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductGridItemComponent);\n\nlet ProductListItemComponent = class ProductListItemComponent {\n};\n__decorate([\n    Input()\n], ProductListItemComponent.prototype, \"product\", void 0);\nProductListItemComponent = __decorate([\n    Component({\n        selector: 'cx-product-list-item',\n        template: \"<div class=\\\"row\\\">\\n  <div class=\\\"col-12 col-md-4\\\">\\n    <a\\n      [routerLink]=\\\"{ cxRoute: 'product', params: product } | cxUrl\\\"\\n      class=\\\"cx-product-image-container\\\"\\n    >\\n      <cx-media\\n        class=\\\"cx-product-image\\\"\\n        [container]=\\\"product.images?.PRIMARY\\\"\\n        format=\\\"product\\\"\\n        [alt]=\\\"product.summary\\\"\\n      ></cx-media>\\n    </a>\\n  </div>\\n  <div class=\\\"col-12 col-md-8\\\">\\n    <a\\n      [routerLink]=\\\"{ cxRoute: 'product', params: product } | cxUrl\\\"\\n      class=\\\"cx-product-name\\\"\\n      [innerHtml]=\\\"product.nameHtml\\\"\\n    ></a>\\n    <cx-star-rating\\n      *ngIf=\\\"product.averageRating\\\"\\n      [rating]=\\\"product?.averageRating\\\"\\n      [disabled]=\\\"true\\\"\\n    ></cx-star-rating>\\n    <div *ngIf=\\\"!product.averageRating\\\" class=\\\"cx-product-no-review\\\">\\n      {{ 'productDetails.noReviews' | cxTranslate }}\\n    </div>\\n    <div class=\\\"cx-product-price\\\" aria-label=\\\"Product price\\\">\\n      {{ product.price?.formattedValue }}\\n    </div>\\n\\n    <ng-container *cxFeatureLevel=\\\"'1.5'\\\">\\n      <cx-variant-style-icons\\n        *ngIf=\\\"product.variantOptions\\\"\\n        [variants]=\\\"product.variantOptions\\\"\\n      ></cx-variant-style-icons>\\n    </ng-container>\\n\\n    <div class=\\\"row\\\">\\n      <div class=\\\"col-12 col-md-8\\\">\\n        <p class=\\\"cx-product-summary\\\" [innerHtml]=\\\"product.summary\\\">\\n          {{ product.summary }}\\n        </p>\\n      </div>\\n      <div class=\\\"col-12 col-md-4\\\">\\n        <cx-add-to-cart\\n          *ngIf=\\\"product.stock?.stockLevelStatus !== 'outOfStock'\\\"\\n          [showQuantity]=\\\"false\\\"\\n          [product]=\\\"product\\\"\\n        ></cx-add-to-cart>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductListItemComponent);\n\nlet ProductVariantsComponent = class ProductVariantsComponent {\n    constructor(currentProductService) {\n        this.currentProductService = currentProductService;\n        this.variants = [];\n        this.variantType = VariantType;\n    }\n    ngOnInit() {\n        this.product$ = this.currentProductService.getProduct().pipe(filter(product => !!(product && product.baseOptions)), distinctUntilChanged(), tap(product => {\n            product.baseOptions.forEach(option => {\n                if (option && option.variantType) {\n                    this.variants[option.variantType] = option;\n                }\n            });\n        }));\n    }\n};\nProductVariantsComponent.ctorParameters = () => [\n    { type: CurrentProductService }\n];\nProductVariantsComponent = __decorate([\n    Component({\n        selector: 'cx-product-variants',\n        template: \"<ng-container *ngIf=\\\"product$ | async as product\\\">\\n  <div class=\\\"variant-section\\\" *ngIf=\\\"product.baseOptions?.length\\\">\\n    <cx-variant-style-selector\\n      *ngIf=\\\"variants[variantType.STYLE]\\\"\\n      [variants]=\\\"variants[variantType.STYLE]\\\"\\n    ></cx-variant-style-selector>\\n    <cx-variant-size-selector\\n      *ngIf=\\\"variants[variantType.SIZE]\\\"\\n      [product]=\\\"product\\\"\\n      [variants]=\\\"variants[variantType.SIZE]\\\"\\n    ></cx-variant-size-selector>\\n    <cx-variant-color-selector\\n      *ngIf=\\\"variants[variantType.COLOR]\\\"\\n      [product]=\\\"product\\\"\\n      [variants]=\\\"variants[variantType.COLOR]\\\"\\n    ></cx-variant-color-selector>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductVariantsComponent);\n\nlet VariantStyleSelectorComponent = class VariantStyleSelectorComponent {\n    constructor(config, productService, routingService) {\n        this.config = config;\n        this.productService = productService;\n        this.routingService = routingService;\n        this.variantQualifier = VariantQualifier;\n    }\n    getVariantOptionValue(qualifiers) {\n        const obj = qualifiers.find(q => q.qualifier === VariantQualifier.STYLE);\n        return obj ? obj.value : '';\n    }\n    getVariantThumbnailUrl(variantOptionQualifiers) {\n        const qualifier = variantOptionQualifiers.find(item => item.image);\n        return qualifier\n            ? `${this.config.backend.occ.baseUrl}${qualifier.image.url}`\n            : '';\n    }\n    changeStyle(code) {\n        if (code) {\n            this.productService\n                .get(code, ProductScope.LIST)\n                .pipe(\n            // below call might looks redundant but in fact this data is going to be loaded anyways\n            // we're just calling it earlier and storing\n            filter(Boolean), take(1))\n                .subscribe((product) => {\n                this.routingService.go({\n                    cxRoute: 'product',\n                    params: product,\n                });\n            });\n        }\n        return null;\n    }\n};\nVariantStyleSelectorComponent.ctorParameters = () => [\n    { type: OccConfig },\n    { type: ProductService },\n    { type: RoutingService }\n];\n__decorate([\n    Input()\n], VariantStyleSelectorComponent.prototype, \"variants\", void 0);\nVariantStyleSelectorComponent = __decorate([\n    Component({\n        selector: 'cx-variant-style-selector',\n        template: \"<ng-container>\\n  <div class=\\\"variant-selector\\\">\\n    <div *ngIf=\\\"variants.selected\\\" class=\\\"variant-name\\\">\\n      {{ 'variant.style' | cxTranslate }}:\\n      <span class=\\\"style-name\\\">{{\\n        getVariantOptionValue(variants?.selected.variantOptionQualifiers)\\n      }}</span>\\n    </div>\\n    <ul class=\\\"variant-list\\\">\\n      <li\\n        *ngFor=\\\"let v of variants?.options\\\"\\n        [ngClass]=\\\"{\\n          'selected-variant': v.code === variants?.selected.code\\n        }\\\"\\n      >\\n        <img\\n          (click)=\\\"changeStyle(v.code)\\\"\\n          src=\\\"{{ getVariantThumbnailUrl(v.variantOptionQualifiers) }}\\\"\\n          title=\\\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\\\"\\n          alt=\\\"{{ getVariantOptionValue(v.variantOptionQualifiers) }}\\\"\\n        />\\n      </li>\\n    </ul>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], VariantStyleSelectorComponent);\n\nlet VariantStyleSelectorModule = class VariantStyleSelectorModule {\n};\nVariantStyleSelectorModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n        declarations: [VariantStyleSelectorComponent],\n        entryComponents: [VariantStyleSelectorComponent],\n        exports: [VariantStyleSelectorComponent],\n    })\n], VariantStyleSelectorModule);\n\nlet VariantSizeSelectorComponent = class VariantSizeSelectorComponent {\n    constructor(productService, routingService) {\n        this.productService = productService;\n        this.routingService = routingService;\n    }\n    changeSize(code) {\n        if (code) {\n            this.productService\n                .get(code, ProductScope.LIST)\n                .pipe(\n            // below call might looks redundant but in fact this data is going to be loaded anyways\n            // we're just calling it earlier and storing\n            filter(Boolean), take(1))\n                .subscribe((product) => {\n                this.routingService.go({\n                    cxRoute: 'product',\n                    params: product,\n                });\n            });\n        }\n        return null;\n    }\n    getVariantOptionValue(qualifiers) {\n        const obj = qualifiers.find(q => q.qualifier === VariantQualifier.SIZE);\n        return obj ? obj.value : '';\n    }\n};\nVariantSizeSelectorComponent.ctorParameters = () => [\n    { type: ProductService },\n    { type: RoutingService }\n];\n__decorate([\n    Input()\n], VariantSizeSelectorComponent.prototype, \"product\", void 0);\n__decorate([\n    Input()\n], VariantSizeSelectorComponent.prototype, \"variants\", void 0);\nVariantSizeSelectorComponent = __decorate([\n    Component({\n        selector: 'cx-variant-size-selector',\n        template: \"<ng-container>\\n  <div class=\\\"variant-selector\\\">\\n    <div class=\\\"variant-name\\\">{{ 'variant.size' | cxTranslate }}:</div>\\n    <select\\n      (change)=\\\"changeSize($event.target.value)\\\"\\n      class=\\\"form-control variant-select\\\"\\n    >\\n      <option\\n        *ngFor=\\\"let v of variants?.options\\\"\\n        value=\\\"{{ v.code }}\\\"\\n        [selected]=\\\"v.code === product?.code\\\"\\n        >{{ getVariantOptionValue(v.variantOptionQualifiers) }}</option\\n      >\\n    </select>\\n    <a\\n      href=\\\"#\\\"\\n      class=\\\"size-guide\\\"\\n      title=\\\"{{ 'variant.sizeGuideLabel' | cxTranslate }}\\\"\\n    >\\n      {{ 'variant.sizeGuideLabel' | cxTranslate }}\\n    </a>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], VariantSizeSelectorComponent);\n\nlet VariantSizeSelectorModule = class VariantSizeSelectorModule {\n};\nVariantSizeSelectorModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n        declarations: [VariantSizeSelectorComponent],\n        entryComponents: [VariantSizeSelectorComponent],\n        exports: [VariantSizeSelectorComponent],\n    })\n], VariantSizeSelectorModule);\n\nlet VariantColorSelectorComponent = class VariantColorSelectorComponent {\n    constructor(routingService) {\n        this.routingService = routingService;\n    }\n    changeColor(code, name) {\n        if (code) {\n            this.routingService.go({\n                cxRoute: 'product',\n                params: { code, name },\n            });\n        }\n        return null;\n    }\n    getVariantOptionValue(qualifiers) {\n        const obj = qualifiers.find(q => q.qualifier === VariantQualifier.COLOR);\n        return obj ? obj.value : '';\n    }\n};\nVariantColorSelectorComponent.ctorParameters = () => [\n    { type: RoutingService }\n];\n__decorate([\n    Input()\n], VariantColorSelectorComponent.prototype, \"product\", void 0);\n__decorate([\n    Input()\n], VariantColorSelectorComponent.prototype, \"variants\", void 0);\nVariantColorSelectorComponent = __decorate([\n    Component({\n        selector: 'cx-variant-color-selector',\n        template: \"<ng-container>\\n  <div class=\\\"variant-selector\\\">\\n    <div class=\\\"variant-name\\\">{{ 'variant.color' | cxTranslate }}:</div>\\n\\n    <select\\n      (change)=\\\"changeColor($event.target.value, product?.name)\\\"\\n      class=\\\"form-control variant-select\\\"\\n    >\\n      <option\\n        *ngFor=\\\"let v of variants?.options\\\"\\n        value=\\\"{{ v.code }}\\\"\\n        [selected]=\\\"v.code === product?.code\\\"\\n        >{{ getVariantOptionValue(v.variantOptionQualifiers) }}</option\\n      >\\n    </select>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], VariantColorSelectorComponent);\n\nlet VariantColorSelectorModule = class VariantColorSelectorModule {\n};\nVariantColorSelectorModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n        declarations: [VariantColorSelectorComponent],\n        entryComponents: [VariantColorSelectorComponent],\n        exports: [VariantColorSelectorComponent],\n    })\n], VariantColorSelectorModule);\n\nlet VariantStyleIconsComponent = class VariantStyleIconsComponent {\n    constructor(config) {\n        this.config = config;\n        this.variantNames = {};\n    }\n    ngOnInit() {\n        this.variants.forEach(variant => {\n            this.variantNames[variant.code] = this.getVariantName(variant.variantOptionQualifiers);\n        });\n    }\n    getVariantThumbnailUrl(variantOptionQualifiers) {\n        const thumbnail = variantOptionQualifiers.find(item => item.qualifier === VariantQualifier.THUMBNAIL);\n        return thumbnail\n            ? `${this.config.backend.occ.baseUrl}${thumbnail.image.url}`\n            : '';\n    }\n    getVariantName(variantOptionQualifiers) {\n        const rollupProperty = variantOptionQualifiers.find(item => item.qualifier === VariantQualifier.ROLLUP_PROPERTY);\n        const property = rollupProperty\n            ? variantOptionQualifiers.find(item => item.qualifier === rollupProperty.value)\n            : null;\n        return property ? property.value : '';\n    }\n};\nVariantStyleIconsComponent.ctorParameters = () => [\n    { type: OccConfig }\n];\n__decorate([\n    Input()\n], VariantStyleIconsComponent.prototype, \"variants\", void 0);\nVariantStyleIconsComponent = __decorate([\n    Component({\n        selector: 'cx-variant-style-icons',\n        template: \"<ul class=\\\"variant-list\\\">\\n  <li *ngFor=\\\"let v of variants\\\">\\n    <img\\n      [attr.src]=\\\"getVariantThumbnailUrl(v.variantOptionQualifiers)\\\"\\n      [attr.title]=\\\"variantNames[v.code]\\\"\\n      [attr.alt]=\\\"variantNames[v.code]\\\"\\n    />\\n  </li>\\n</ul>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush,\n        styles: [\"ul{padding:0;white-space:nowrap;overflow:hidden}ul li{display:inline}ul li img{width:50px}\"]\n    })\n], VariantStyleIconsComponent);\n\nlet VariantStyleIconsModule = class VariantStyleIconsModule {\n};\nVariantStyleIconsModule = __decorate([\n    NgModule({\n        imports: [CommonModule, RouterModule, UrlModule, I18nModule],\n        declarations: [VariantStyleIconsComponent],\n        entryComponents: [VariantStyleIconsComponent],\n        exports: [VariantStyleIconsComponent],\n    })\n], VariantStyleIconsModule);\n\nlet ProductVariantGuard = class ProductVariantGuard {\n    constructor(productService, routingService) {\n        this.productService = productService;\n        this.routingService = routingService;\n    }\n    canActivate() {\n        return this.routingService.getRouterState().pipe(map(state => state.nextState.params.productCode), switchMap((productCode) => {\n            // if open pdp from smartedit\n            if (!productCode) {\n                return of(true);\n            }\n            return this.productService.get(productCode, ProductScope.VARIANTS).pipe(filter(Boolean), map((product) => {\n                if (!product.purchasable) {\n                    const variant = this.findVariant(product.variantOptions);\n                    // below call might looks redundant but in fact this data is going to be loaded anyways\n                    // we're just calling it earlier and storing\n                    this.productService\n                        .get(variant.code, ProductScope.LIST)\n                        .pipe(filter(Boolean), take(1))\n                        .subscribe((_product) => {\n                        this.routingService.go({\n                            cxRoute: 'product',\n                            params: _product,\n                        });\n                    });\n                    return false;\n                }\n                else {\n                    return true;\n                }\n            }));\n        }));\n    }\n    findVariant(variants) {\n        const results = variants.filter(variant => {\n            return variant.stock && variant.stock.stockLevel ? variant : false;\n        });\n        return !results.length && variants.length ? variants[0] : results[0];\n    }\n};\nProductVariantGuard.ctorParameters = () => [\n    { type: ProductService },\n    { type: RoutingService }\n];\nProductVariantGuard.ɵprov = ɵɵdefineInjectable({ factory: function ProductVariantGuard_Factory() { return new ProductVariantGuard(ɵɵinject(ProductService), ɵɵinject(RoutingService)); }, token: ProductVariantGuard, providedIn: \"root\" });\nProductVariantGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], ProductVariantGuard);\n\nlet ProductVariantsModule = class ProductVariantsModule {\n};\nProductVariantsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            UrlModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductVariantSelectorComponent: {\n                        component: ProductVariantsComponent,\n                        guards: [ProductVariantGuard],\n                    },\n                },\n            }),\n            I18nModule,\n            VariantStyleSelectorModule,\n            VariantSizeSelectorModule,\n            VariantColorSelectorModule,\n            VariantStyleIconsModule,\n        ],\n        declarations: [ProductVariantsComponent],\n        entryComponents: [ProductVariantsComponent],\n        exports: [VariantStyleIconsComponent],\n    })\n], ProductVariantsModule);\n\nlet ProductListModule = class ProductListModule {\n};\nProductListModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig(defaultScrollConfig),\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    CMSProductListComponent: {\n                        component: ProductListComponent,\n                    },\n                    ProductGridComponent: {\n                        component: ProductListComponent,\n                    },\n                    SearchResultsListComponent: {\n                        component: ProductListComponent,\n                    },\n                    ProductRefinementComponent: {\n                        component: ProductFacetNavigationComponent,\n                    },\n                },\n            }),\n            RouterModule,\n            MediaModule,\n            AddToCartModule,\n            ItemCounterModule,\n            ListNavigationModule,\n            UrlModule,\n            I18nModule,\n            StarRatingModule,\n            IconModule,\n            SpinnerModule,\n            InfiniteScrollModule,\n            ViewConfigModule,\n            ProductVariantsModule,\n            FeaturesConfigModule,\n        ],\n        declarations: [\n            ProductListComponent,\n            ProductFacetNavigationComponent,\n            ProductListItemComponent,\n            ProductGridItemComponent,\n            ProductViewComponent,\n            ProductScrollComponent,\n        ],\n        exports: [\n            ProductListComponent,\n            ProductFacetNavigationComponent,\n            ProductListItemComponent,\n            ProductGridItemComponent,\n            ProductViewComponent,\n            ProductScrollComponent,\n        ],\n        entryComponents: [ProductListComponent, ProductFacetNavigationComponent],\n    })\n], ProductListModule);\n\nvar ProductDetailOutlets;\n(function (ProductDetailOutlets) {\n    ProductDetailOutlets[\"INTRO\"] = \"PDP.INTRO\";\n    ProductDetailOutlets[\"PRICE\"] = \"PDP.PRICE\";\n    ProductDetailOutlets[\"SHARE\"] = \"PDP.SHARE\";\n    ProductDetailOutlets[\"SUMMARY\"] = \"PDP.SUMMARY\";\n})(ProductDetailOutlets || (ProductDetailOutlets = {}));\n\nlet ProductSummaryComponent = class ProductSummaryComponent {\n    constructor(currentProductService) {\n        this.currentProductService = currentProductService;\n        this.outlets = ProductDetailOutlets;\n        this.product$ = this.currentProductService.getProduct();\n    }\n};\nProductSummaryComponent.ctorParameters = () => [\n    { type: CurrentProductService }\n];\nProductSummaryComponent = __decorate([\n    Component({\n        selector: 'cx-product-summary',\n        template: \"<ng-container *ngIf=\\\"product$ | async as product\\\">\\n  <ng-template\\n    [cxOutlet]=\\\"outlets.PRICE\\\"\\n    [cxOutletContext]=\\\"{ product: product }\\\"\\n  >\\n    <div class=\\\"price\\\" aria-label=\\\"new item price\\\">\\n      {{ product?.price?.formattedValue }}\\n    </div>\\n  </ng-template>\\n\\n  <ng-template\\n    [cxOutlet]=\\\"outlets.SUMMARY\\\"\\n    [cxOutletContext]=\\\"{ product: product }\\\"\\n  >\\n    <p [innerHTML]=\\\"product?.summary\\\" class=\\\"summary\\\"></p>\\n  </ng-template>\\n\\n  <!-- @TODO: Temp. Comment out share link while not in use by CMS -->\\n  <!-- <ng-container *cxOutlet=\\\"outlets.SHARE\\\">\\n        <div>\\n          <a href=\\\"#\\\" class=\\\"share btn-link\\\">\\n            {{ 'productSummary.share' | cxTranslate }}\\n          </a>\\n        </div>\\n      </ng-container> -->\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductSummaryComponent);\n\nlet ProductSummaryModule = class ProductSummaryModule {\n};\nProductSummaryModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            OutletModule,\n            I18nModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductSummaryComponent: {\n                        component: ProductSummaryComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ProductSummaryComponent],\n        entryComponents: [ProductSummaryComponent],\n        exports: [ProductSummaryComponent],\n    })\n], ProductSummaryModule);\n\nlet ProductAttributesComponent = class ProductAttributesComponent {\n    constructor(currentProductService) {\n        this.currentProductService = currentProductService;\n        this.product$ = this.currentProductService.getProduct(ProductScope.ATTRIBUTES);\n    }\n    // TODO deprecated since 1.4, remove\n    ngOnInit() { }\n};\nProductAttributesComponent.ctorParameters = () => [\n    { type: CurrentProductService }\n];\nProductAttributesComponent = __decorate([\n    Component({\n        selector: 'cx-product-attributes',\n        template: \"<ng-container *ngIf=\\\"product$ | async as product\\\">\\n  <div class=\\\"container\\\">\\n    <h2>{{ 'productDetails.specification' | cxTranslate }}</h2>\\n    <table *ngFor=\\\"let class of product?.classifications\\\">\\n      <th>\\n        <h3>{{ class.name }}</h3>\\n      </th>\\n      <tr *ngFor=\\\"let feature of class.features\\\">\\n        <td>{{ feature.name }}</td>\\n        <td>\\n          <ul>\\n            <li *ngFor=\\\"let featureValue of feature?.featureValues\\\">\\n              {{ featureValue?.value }}\\n            </li>\\n          </ul>\\n        </td>\\n      </tr>\\n    </table>\\n  </div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductAttributesComponent);\n\nlet ProductAttributesModule = class ProductAttributesModule {\n};\nProductAttributesModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            I18nModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductSpecsTabComponent: {\n                        component: ProductAttributesComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ProductAttributesComponent],\n        entryComponents: [ProductAttributesComponent],\n        exports: [ProductAttributesComponent],\n    })\n], ProductAttributesModule);\n\nlet ProductDetailsTabComponent = class ProductDetailsTabComponent {\n    constructor(currentProductService) {\n        this.currentProductService = currentProductService;\n    }\n    ngOnInit() {\n        this.product$ = this.currentProductService.getProduct();\n    }\n};\nProductDetailsTabComponent.ctorParameters = () => [\n    { type: CurrentProductService }\n];\nProductDetailsTabComponent = __decorate([\n    Component({\n        selector: 'cx-product-details-tab',\n        template: \"<ng-container *ngIf=\\\"product$ | async as product\\\">\\n  <div class=\\\"container\\\" [innerHTML]=\\\"product?.description\\\"></div>\\n</ng-container>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductDetailsTabComponent);\n\nlet ProductDetailsTabModule = class ProductDetailsTabModule {\n};\nProductDetailsTabModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductDetailsTabComponent: {\n                        component: ProductDetailsTabComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ProductDetailsTabComponent],\n        entryComponents: [ProductDetailsTabComponent],\n        exports: [ProductDetailsTabComponent],\n    })\n], ProductDetailsTabModule);\n\nlet ProductReviewsComponent = class ProductReviewsComponent {\n    constructor(reviewService, currentProductService, fb) {\n        this.reviewService = reviewService;\n        this.currentProductService = currentProductService;\n        this.fb = fb;\n        this.isWritingReview = false;\n        // TODO: configurable\n        this.initialMaxListItems = 5;\n        this.product$ = this.currentProductService.getProduct();\n        this.reviews$ = this.product$.pipe(filter(p => !!p), map(p => p.code), distinctUntilChanged(), switchMap(productCode => this.reviewService.getByProductCode(productCode)), tap(() => {\n            this.resetReviewForm();\n            this.maxListItems = this.initialMaxListItems;\n        }));\n    }\n    initiateWriteReview() {\n        this.isWritingReview = true;\n    }\n    cancelWriteReview() {\n        this.isWritingReview = false;\n        this.resetReviewForm();\n    }\n    setRating(rating) {\n        this.reviewForm.controls.rating.setValue(rating);\n    }\n    submitReview(product) {\n        const reviewFormControls = this.reviewForm.controls;\n        const review = {\n            headline: reviewFormControls.title.value,\n            comment: reviewFormControls.comment.value,\n            rating: reviewFormControls.rating.value,\n            alias: reviewFormControls.reviewerName.value,\n        };\n        this.reviewService.add(product.code, review);\n        this.isWritingReview = false;\n        this.resetReviewForm();\n    }\n    resetReviewForm() {\n        this.reviewForm = this.fb.group({\n            title: ['', Validators.required],\n            comment: ['', Validators.required],\n            rating: [0, [Validators.min(1), Validators.max(5)]],\n            reviewerName: '',\n        });\n    }\n};\nProductReviewsComponent.ctorParameters = () => [\n    { type: ProductReviewService },\n    { type: CurrentProductService },\n    { type: FormBuilder }\n];\nProductReviewsComponent = __decorate([\n    Component({\n        selector: 'cx-product-reviews',\n        template: \"<div class=\\\"container\\\" *ngIf=\\\"product$ | async as product\\\">\\n  <h2>\\n    {{ 'productDetails.reviews' | cxTranslate }} ({{ product.numberOfReviews }})\\n  </h2>\\n  <ng-container *ngIf=\\\"!isWritingReview; else writeReview\\\">\\n    <div class=\\\"header\\\">\\n      <h3>{{ 'productReview.overallRating' | cxTranslate }}</h3>\\n      <button class=\\\"btn btn-primary\\\" (click)=\\\"initiateWriteReview()\\\">\\n        {{ 'productReview.writeReview' | cxTranslate }}\\n      </button>\\n      <cx-star-rating\\n        *ngIf=\\\"product.averageRating\\\"\\n        class=\\\"rating\\\"\\n        [rating]=\\\"product.averageRating\\\"\\n        [disabled]=\\\"true\\\"\\n      ></cx-star-rating>\\n      <div class=\\\"rating\\\" *ngIf=\\\"!product.averageRating\\\">\\n        {{ 'productDetails.noReviews' | cxTranslate }}\\n      </div>\\n    </div>\\n\\n    <ng-container *ngIf=\\\"!isWritingReview; else writeReview\\\">\\n      <ng-container *ngIf=\\\"reviews$ | async as reviews\\\">\\n        <div\\n          class=\\\"review\\\"\\n          tabindex=\\\"0\\\"\\n          *ngFor=\\\"let review of reviews | slice: 0:maxListItems\\\"\\n        >\\n          <div class=\\\"title\\\">{{ review.headline }}</div>\\n          <cx-star-rating\\n            [rating]=\\\"review.rating\\\"\\n            [disabled]=\\\"true\\\"\\n          ></cx-star-rating>\\n          <div class=\\\"name\\\">\\n            {{ review.alias ? review.alias : review.principal?.name }}\\n          </div>\\n          <div class=\\\"date\\\">{{ review.date | cxDate }}</div>\\n          <div class=\\\"text\\\">{{ review.comment }}</div>\\n        </div>\\n        <div *ngIf=\\\"reviews.length > initialMaxListItems\\\">\\n          <button\\n            class=\\\"btn btn-primary\\\"\\n            (click)=\\\"maxListItems = reviews.length\\\"\\n            *ngIf=\\\"maxListItems === initialMaxListItems\\\"\\n          >\\n            {{ 'productReview.more' | cxTranslate }}\\n          </button>\\n          <button\\n            class=\\\"btn btn-primary\\\"\\n            (click)=\\\"maxListItems = initialMaxListItems\\\"\\n            *ngIf=\\\"maxListItems !== initialMaxListItems\\\"\\n          >\\n            {{ 'productReview.less' | cxTranslate }}\\n          </button>\\n        </div>\\n      </ng-container>\\n    </ng-container>\\n  </ng-container>\\n\\n  <ng-template #writeReview>\\n    <form [formGroup]=\\\"reviewForm\\\" (ngSubmit)=\\\"submitReview(product)\\\">\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'productReview.reviewTitle' | cxTranslate\\n          }}</span>\\n          <input type=\\\"text\\\" class=\\\"form-control\\\" formControlName=\\\"title\\\" />\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'productReview.writeYourComments' | cxTranslate\\n          }}</span>\\n          <textarea\\n            class=\\\"form-control\\\"\\n            rows=\\\"3\\\"\\n            formControlName=\\\"comment\\\"\\n          ></textarea>\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'productReview.rating' | cxTranslate\\n          }}</span>\\n          <cx-star-rating (change)=\\\"setRating($event)\\\"></cx-star-rating>\\n        </label>\\n      </div>\\n      <div class=\\\"form-group\\\">\\n        <label>\\n          <span class=\\\"label-content\\\">{{\\n            'productReview.reviewerName' | cxTranslate\\n          }}</span>\\n          <input\\n            type=\\\"text\\\"\\n            class=\\\"form-control\\\"\\n            formControlName=\\\"reviewerName\\\"\\n          />\\n        </label>\\n      </div>\\n      <div class=\\\"form-group row\\\">\\n        <div class=\\\"col-12 col-md-4\\\">\\n          <button\\n            type=\\\"submit\\\"\\n            class=\\\"btn btn-block btn-secondary\\\"\\n            (click)=\\\"cancelWriteReview()\\\"\\n          >\\n            {{ 'common.cancel' | cxTranslate }}\\n          </button>\\n        </div>\\n        <div class=\\\"col-12 col-md-4\\\">\\n          <button\\n            type=\\\"submit\\\"\\n            class=\\\"btn btn-block btn-primary\\\"\\n            [ngClass]=\\\"{ 'submit-btn': reviewForm.valid }\\\"\\n            [disabled]=\\\"!reviewForm.valid\\\"\\n          >\\n            {{ 'common.submit' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </form>\\n  </ng-template>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], ProductReviewsComponent);\n\nlet ProductReviewsModule = class ProductReviewsModule {\n};\nProductReviewsModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            FormsModule,\n            I18nModule,\n            StarRatingModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ProductReviewsTabComponent: {\n                        component: ProductReviewsComponent,\n                    },\n                },\n            }),\n        ],\n        declarations: [ProductReviewsComponent],\n        entryComponents: [ProductReviewsComponent],\n        exports: [ProductReviewsComponent],\n    })\n], ProductReviewsModule);\n\nlet ProductTabsModule = class ProductTabsModule {\n};\nProductTabsModule = __decorate([\n    NgModule({\n        imports: [\n            ProductAttributesModule,\n            ProductDetailsTabModule,\n            ProductReviewsModule,\n        ],\n    })\n], ProductTabsModule);\n\nlet StockNotificationDialogComponent = class StockNotificationDialogComponent {\n    constructor(modalService, interestsService) {\n        this.modalService = modalService;\n        this.interestsService = interestsService;\n        this.enabledPrefs = [];\n    }\n    close() {\n        this.modalService.dismissActiveModal();\n    }\n    ngOnDestroy() {\n        if (this.subscribeSuccess$) {\n            this.subscribeSuccess$\n                .subscribe(success => {\n                if (success) {\n                    this.interestsService.resetAddInterestState();\n                }\n            })\n                .unsubscribe();\n        }\n    }\n};\nStockNotificationDialogComponent.ctorParameters = () => [\n    { type: ModalService },\n    { type: UserInterestsService }\n];\nStockNotificationDialogComponent = __decorate([\n    Component({\n        selector: 'cx-stock-notification-dialog',\n        template: \"<div class=\\\"cx-dialog-header modal-header\\\">\\n  <div class=\\\"cx-dialog-title modal-title\\\">\\n    {{ 'stockNotification.subscriptionDialog.header' | cxTranslate }}\\n  </div>\\n  <button type=\\\"button\\\" class=\\\"close\\\" aria-label=\\\"Close\\\" (click)=\\\"close()\\\">\\n    <span aria-hidden=\\\"true\\\">&times;</span>\\n  </button>\\n</div>\\n\\n<ng-container *ngIf=\\\"subscribeSuccess$ | async; else loading\\\">\\n  <div class=\\\"cx-dialog-body modal-body\\\">\\n    <div class=\\\"container\\\">\\n      <p>\\n        {{\\n          'stockNotification.subscriptionDialog.notifiedPrefix' | cxTranslate\\n        }}\\n      </p>\\n      <p *ngFor=\\\"let preference of enabledPrefs\\\" class=\\\"channels\\\">\\n        <span>{{ preference.channel }}</span\\n        ><span *ngIf=\\\"preference.value\\\">{{ ': ' + preference.value }}</span>\\n      </p>\\n      <p>\\n        {{\\n          'stockNotification.subscriptionDialog.notifiedSuffix' | cxTranslate\\n        }}\\n      </p>\\n      <p>\\n        {{\\n          'stockNotification.subscriptionDialog.manageChannelsPrefix'\\n            | cxTranslate\\n        }}\\n        <a\\n          (click)=\\\"close()\\\"\\n          [routerLink]=\\\"['/my-account/notification-preference']\\\"\\n          class=\\\"link-prefs\\\"\\n        >\\n          {{\\n            'stockNotification.subscriptionDialog.manageChannelsLink'\\n              | cxTranslate\\n          }}</a\\n        >\\n        {{\\n          'stockNotification.subscriptionDialog.manageChannelsSuffix'\\n            | cxTranslate\\n        }}\\n      </p>\\n\\n      <p>\\n        {{\\n          'stockNotification.subscriptionDialog.manageSubscriptionsPrefix'\\n            | cxTranslate\\n        }}\\n        <a\\n          (click)=\\\"close()\\\"\\n          [routerLink]=\\\"['/my-account/my-interests']\\\"\\n          class=\\\"link-interests\\\"\\n        >\\n          {{\\n            'stockNotification.subscriptionDialog.manageSubscriptionsLink'\\n              | cxTranslate\\n          }}</a\\n        >\\n        {{\\n          'stockNotification.subscriptionDialog.manageSubscriptionsSuffix'\\n            | cxTranslate\\n        }}\\n      </p>\\n      <div class=\\\"row\\\">\\n        <div class=\\\"cx-dialog-actions col-sm-12 col-md-3 offset-md-9\\\">\\n          <button\\n            class=\\\"btn btn-primary btn-block btn-ok\\\"\\n            type=\\\"button\\\"\\n            (click)=\\\"close()\\\"\\n          >\\n            {{ 'stockNotification.subscriptionDialog.okBtn' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\\n<ng-template #loading>\\n  <div class=\\\"cx-dialog-body modal-body\\\">\\n    <p>\\n      {{ 'stockNotification.subscriptionDialog.subscribing' | cxTranslate }}\\n    </p>\\n    <div class=\\\"cx-dialog-row\\\">\\n      <div class=\\\"col-sm-12\\\">\\n        <cx-spinner></cx-spinner>\\n      </div>\\n    </div>\\n  </div>\\n</ng-template>\\n\"\n    })\n], StockNotificationDialogComponent);\n\nlet StockNotificationComponent = class StockNotificationComponent {\n    constructor(authService, currentProductService, globalMessageService, translationService, interestsService, modalService, notificationPrefService) {\n        this.authService = authService;\n        this.currentProductService = currentProductService;\n        this.globalMessageService = globalMessageService;\n        this.translationService = translationService;\n        this.interestsService = interestsService;\n        this.modalService = modalService;\n        this.notificationPrefService = notificationPrefService;\n        this.anonymous = true;\n        this.enabledPrefs = [];\n        this.subscriptions = new Subscription();\n    }\n    ngOnInit() {\n        this.outOfStock$ = combineLatest([\n            this.currentProductService.getProduct().pipe(filter(Boolean)),\n            this.authService.getOccUserId(),\n        ]).pipe(tap(([product, userId]) => {\n            this.productCode = product.code;\n            if (userId !== OCC_USER_ID_ANONYMOUS) {\n                this.anonymous = false;\n                this.notificationPrefService.loadPreferences();\n                this.interestsService.loadProductInterests(null, null, null, product.code, NotificationType.BACK_IN_STOCK);\n            }\n        }), map(([product]) => !!product.stock && product.stock.stockLevelStatus === 'outOfStock'));\n        this.hasProductInterests$ = this.interestsService\n            .getProductInterests()\n            .pipe(map(interests => !!interests.results && interests.results.length === 1));\n        this.subscribeSuccess$ = this.interestsService.getAddProductInterestSuccess();\n        this.isRemoveInterestLoading$ = this.interestsService.getRemoveProdutInterestLoading();\n        this.prefsEnabled$ = this.notificationPrefService\n            .getEnabledPreferences()\n            .pipe(tap(prefs => (this.enabledPrefs = prefs)), map(prefs => prefs.length > 0));\n        this.subscriptions.add(this.interestsService.getAddProductInterestError().subscribe(error => {\n            if (error) {\n                this.onInterestAddingError();\n            }\n        }));\n        this.subscriptions.add(this.interestsService\n            .getRemoveProdutInterestSuccess()\n            .subscribe(success => {\n            if (success) {\n                this.onInterestRemovingSuccess();\n            }\n        }));\n    }\n    subscribe() {\n        this.openDialog();\n        this.interestsService.addProductInterest(this.productCode, NotificationType.BACK_IN_STOCK);\n    }\n    unsubscribe() {\n        this.interestsService.removeProdutInterest({\n            product: {\n                code: this.productCode,\n            },\n            productInterestEntry: [\n                {\n                    interestType: NotificationType.BACK_IN_STOCK,\n                },\n            ],\n        }, true);\n    }\n    onInterestRemovingSuccess() {\n        this.subscriptions.add(this.translationService\n            .translate('stockNotification.unsubscribeSuccess')\n            .pipe(first())\n            .subscribe(text => this.globalMessageService.add(text, GlobalMessageType.MSG_TYPE_INFO)));\n        this.interestsService.resetRemoveInterestState();\n    }\n    onInterestAddingError() {\n        this.modalService.dismissActiveModal();\n        this.interestsService.resetAddInterestState();\n    }\n    openDialog() {\n        const modalInstance = this.modalService.open(StockNotificationDialogComponent, {\n            centered: true,\n            size: 'lg',\n        }).componentInstance;\n        modalInstance.subscribeSuccess$ = this.subscribeSuccess$;\n        modalInstance.enabledPrefs = this.enabledPrefs;\n    }\n    ngOnDestroy() {\n        this.subscriptions.unsubscribe();\n        this.interestsService.clearProductInterests();\n        this.notificationPrefService.clearPreferences();\n    }\n};\nStockNotificationComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: CurrentProductService },\n    { type: GlobalMessageService },\n    { type: TranslationService },\n    { type: UserInterestsService },\n    { type: ModalService },\n    { type: UserNotificationPreferenceService }\n];\nStockNotificationComponent = __decorate([\n    Component({\n        selector: 'cx-stock-notification',\n        template: \"<ng-container *ngIf=\\\"outOfStock$ | async\\\">\\n  <ng-container *ngIf=\\\"!(hasProductInterests$ | async); else stopNotify\\\">\\n    <ng-container *ngIf=\\\"prefsEnabled$ | async; else disableNotify\\\">\\n      <div class=\\\"stock-notification-notes\\\">\\n        <label>{{ 'stockNotification.getNotified' | cxTranslate }}</label>\\n      </div>\\n      <button\\n        class=\\\"btn btn-primary btn-block btn-notify\\\"\\n        type=\\\"button\\\"\\n        (click)=\\\"subscribe()\\\"\\n      >\\n        {{ 'stockNotification.notifyMe' | cxTranslate }}\\n      </button>\\n    </ng-container>\\n  </ng-container>\\n</ng-container>\\n\\n<ng-template #disableNotify>\\n  <div class=\\\"stock-notification-notes\\\">\\n    <label>\\n      <ng-container *ngIf=\\\"anonymous; else loggedIn\\\">\\n        <a [routerLink]=\\\"{ cxRoute: 'login' } | cxUrl\\\">\\n          {{ 'miniLogin.signInRegister' | cxTranslate }}</a\\n        >\\n        {{ 'stockNotification.getNotifySuffix' | cxTranslate }}<br />\\n      </ng-container>\\n      <ng-template #loggedIn>\\n        {{ 'stockNotification.getNotify' | cxTranslate }}<br />\\n        {{ 'stockNotification.activateChannelsPrefix' | cxTranslate\\n        }}<a [routerLink]=\\\"['/my-account/notification-preference']\\\">{{\\n          'stockNotification.channelsLink' | cxTranslate\\n        }}</a\\n        >{{ 'stockNotification.activateChannelsSuffix' | cxTranslate }}\\n      </ng-template>\\n    </label>\\n  </div>\\n  <button\\n    class=\\\"btn btn-primary btn-block btn-notify\\\"\\n    type=\\\"button\\\"\\n    disabled=\\\"true\\\"\\n  >\\n    {{ 'stockNotification.notifyMe' | cxTranslate }}\\n  </button>\\n</ng-template>\\n\\n<ng-template #stopNotify>\\n  <ng-container *ngIf=\\\"!(isRemoveInterestLoading$ | async); else loading\\\">\\n    <div class=\\\"stock-notification-notes\\\">\\n      <label>{{ 'stockNotification.notified' | cxTranslate }}</label>\\n    </div>\\n    <button\\n      class=\\\"btn btn-primary btn-block btn-stop-notify\\\"\\n      type=\\\"button\\\"\\n      (click)=\\\"unsubscribe()\\\"\\n    >\\n      {{ 'stockNotification.stopNotify' | cxTranslate }}\\n    </button>\\n  </ng-container>\\n</ng-template>\\n\\n<ng-template #loading>\\n  <div class=\\\"cx-dialog-body modal-body\\\">\\n    <div class=\\\"cx-dialog-row\\\">\\n      <div class=\\\"col-sm-12\\\">\\n        <cx-spinner></cx-spinner>\\n      </div>\\n    </div>\\n  </div>\\n</ng-template>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], StockNotificationComponent);\n\nlet StockNotificationModule = class StockNotificationModule {\n};\nStockNotificationModule = __decorate([\n    NgModule({\n        declarations: [StockNotificationComponent, StockNotificationDialogComponent],\n        imports: [\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    StockNotificationComponent: {\n                        component: StockNotificationComponent,\n                    },\n                },\n            }),\n            RouterModule,\n            I18nModule,\n            SpinnerModule,\n            UrlModule,\n        ],\n        entryComponents: [\n            StockNotificationComponent,\n            StockNotificationDialogComponent,\n        ],\n        exports: [StockNotificationComponent, StockNotificationDialogComponent],\n    })\n], StockNotificationModule);\n\nconst WEEK_DAYS_NUMBER = 7;\nlet ScheduleComponent = class ScheduleComponent {\n    constructor(storeDataService) {\n        this.storeDataService = storeDataService;\n        this.displayDays = null;\n    }\n    ngOnChanges(changes) {\n        if (changes.location && this.location) {\n            const initialDate = this.getInitialDate();\n            this.displayDays = [];\n            for (let i = 0; i < WEEK_DAYS_NUMBER; i++) {\n                const date = new Date(initialDate.valueOf());\n                date.setDate(date.getDate() + i);\n                this.displayDays.push(date);\n            }\n        }\n    }\n    /**\n     * Returns the store's opening time for the given date\n     * @param date date\n     */\n    getStoreOpeningTime(date) {\n        return this.storeDataService.getStoreOpeningTime(this.location, date);\n    }\n    /**\n     * Returns the store's closing time for the given date\n     * @param date date\n     */\n    getStoreClosingTime(date) {\n        return this.storeDataService.getStoreClosingTime(this.location, date);\n    }\n    /**\n     * return initial (first) date to be displayed in the schedule\n     */\n    getInitialDate() {\n        const currentDate = new Date();\n        currentDate.setDate(currentDate.getDate() - currentDate.getDay());\n        return currentDate;\n    }\n};\nScheduleComponent.ctorParameters = () => [\n    { type: StoreDataService }\n];\n__decorate([\n    Input()\n], ScheduleComponent.prototype, \"location\", void 0);\nScheduleComponent = __decorate([\n    Component({\n        selector: 'cx-schedule',\n        template: \"<ng-content></ng-content>\\n<div class=\\\"container cx-store-hours\\\" *ngIf=\\\"location.openingHours\\\">\\n  <div *ngFor=\\\"let day of displayDays\\\" class=\\\"row\\\">\\n    <div class=\\\"cx-days col-4\\\">{{ day | cxDate: 'EEE' }}</div>\\n    <div *ngIf=\\\"getStoreOpeningTime(day) !== 'closed'\\\" class=\\\"cx-hours col-8\\\">\\n      {{ getStoreOpeningTime(day) }} -\\n      {{ getStoreClosingTime(day) }}\\n    </div>\\n    <div\\n      *ngIf=\\\"getStoreOpeningTime(day) === 'closed'\\\"\\n      class=\\\"cx-hours col-8 closed\\\"\\n    >\\n      {{ 'storeFinder.closed' | cxTranslate }}\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], ScheduleComponent);\n\nlet StoreFinderGridComponent = class StoreFinderGridComponent {\n    constructor(storeFinderService, route, routingService) {\n        this.storeFinderService = storeFinderService;\n        this.route = route;\n        this.routingService = routingService;\n    }\n    ngOnInit() {\n        this.isLoading$ = this.storeFinderService.getViewAllStoresLoading();\n        this.locations$ = this.storeFinderService.getViewAllStoresEntities();\n        this.defaultLocation = {};\n        if (this.route.snapshot.params.country) {\n            this.storeFinderService.findStoresAction('', {\n                pageSize: -1,\n            }, undefined, this.route.snapshot.params.country);\n        }\n    }\n    viewStore(location) {\n        this.routingService.go([this.prepareRouteUrl(location)]);\n    }\n    prepareRouteUrl(location) {\n        const countryParam = this.route.snapshot.params.country\n            ? `country/${this.route.snapshot.params.country}/`\n            : '';\n        const regionParam = this.route.snapshot.params.region\n            ? `region/${this.route.snapshot.params.region}/`\n            : '';\n        return `store-finder/${countryParam}${regionParam}${location.name}`;\n    }\n    ngOnDestroy() { }\n};\nStoreFinderGridComponent.ctorParameters = () => [\n    { type: StoreFinderService },\n    { type: ActivatedRoute },\n    { type: RoutingService }\n];\nStoreFinderGridComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-grid',\n        template: \"<ng-container\\n  *ngIf=\\\"\\n    !(isLoading$ | async) && (locations$ | async) as locations;\\n    else loading\\n  \\\"\\n>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row\\\">\\n      <div\\n        class=\\\"col-sm-4 col-md-4 col-lg-3 item\\\"\\n        *ngFor=\\\"let location of locations?.stores\\\"\\n        (click)=\\\"viewStore(location)\\\"\\n      >\\n        <cx-store-finder-list-item\\n          [location]=\\\"location\\\"\\n        ></cx-store-finder-list-item>\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\\n<ng-template #loading>\\n  <div class=\\\"cx-spinner\\\"><cx-spinner></cx-spinner></div>\\n</ng-template>\\n\"\n    })\n], StoreFinderGridComponent);\n\nlet StoreFinderHeaderComponent = class StoreFinderHeaderComponent {\n};\nStoreFinderHeaderComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-header',\n        template: \"<ng-container>\\n  <cx-store-finder-search></cx-store-finder-search>\\n</ng-container>\\n\"\n    })\n], StoreFinderHeaderComponent);\n\n// tslint:disable:directive-class-suffix\nlet AbstractStoreItemComponent = class AbstractStoreItemComponent {\n    constructor(storeDataService) {\n        this.storeDataService = storeDataService;\n    }\n    getDirections(location) {\n        const google_map_url = 'https://www.google.com/maps/dir/Current+Location/';\n        const latitude = this.storeDataService.getStoreLatitude(location);\n        const longitude = this.storeDataService.getStoreLongitude(location);\n        return google_map_url + latitude + ',' + longitude;\n    }\n    getFormattedStoreAddress(addressParts) {\n        return addressParts.filter(Boolean).join(', ');\n    }\n};\nAbstractStoreItemComponent.ctorParameters = () => [\n    { type: StoreDataService }\n];\n__decorate([\n    Input()\n], AbstractStoreItemComponent.prototype, \"location\", void 0);\nAbstractStoreItemComponent = __decorate([\n    Directive()\n], AbstractStoreItemComponent);\n\nlet StoreFinderListItemComponent = class StoreFinderListItemComponent extends AbstractStoreItemComponent {\n    constructor(storeDataService) {\n        super(storeDataService);\n        this.storeDataService = storeDataService;\n        this.locationIndex = null;\n        this.storeItemClick = new EventEmitter();\n    }\n    handleStoreItemClick() {\n        if (this.locationIndex !== null) {\n            this.storeItemClick.emit(this.locationIndex);\n        }\n    }\n};\nStoreFinderListItemComponent.ctorParameters = () => [\n    { type: StoreDataService }\n];\n__decorate([\n    Input()\n], StoreFinderListItemComponent.prototype, \"locationIndex\", void 0);\n__decorate([\n    Input()\n], StoreFinderListItemComponent.prototype, \"listOrderLabel\", void 0);\n__decorate([\n    Input()\n], StoreFinderListItemComponent.prototype, \"displayDistance\", void 0);\n__decorate([\n    Output()\n], StoreFinderListItemComponent.prototype, \"storeItemClick\", void 0);\nStoreFinderListItemComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-list-item',\n        template: \"<ng-container>\\n  <div (click)=\\\"handleStoreItemClick()\\\">\\n    <div class=\\\"cx-store-list-order\\\">\\n      {{ listOrderLabel }}\\n    </div>\\n    <div class=\\\"cx-store-name\\\">\\n      {{ location.displayName || location.name }}\\n    </div>\\n    <div class=\\\"cx-store-address\\\" *ngIf=\\\"location.address\\\">\\n      <div class=\\\"cx-store-address-street\\\">\\n        {{ location.address.line1 }} {{ location.address.line2 }}\\n      </div>\\n      {{\\n        getFormattedStoreAddress([\\n          location.address.town,\\n          location.address.postalCode,\\n          location.address.country.isocode\\n        ])\\n      }}\\n      <div\\n        class=\\\"cx-store-distance\\\"\\n        *ngIf=\\\"location.formattedDistance && displayDistance\\\"\\n      >\\n        {{ location.formattedDistance }}\\n      </div>\\n    </div>\\n    <a\\n      href=\\\"{{ getDirections(location) }}\\\"\\n      target=\\\"_blank\\\"\\n      class=\\\"btn btn-sm btn-action btn-block cx-button\\\"\\n      (click)=\\\"$event.stopPropagation()\\\"\\n      >{{ 'storeFinder.getDirections' | cxTranslate }}</a\\n    >\\n  </div>\\n</ng-container>\\n\"\n    })\n], StoreFinderListItemComponent);\n\nlet StoreFinderMapComponent = class StoreFinderMapComponent {\n    constructor(googleMapRendererService) {\n        this.googleMapRendererService = googleMapRendererService;\n        this.selectedStoreItem = new EventEmitter();\n    }\n    ngOnChanges(changes) {\n        if (changes.locations && this.locations) {\n            this.renderMap();\n        }\n    }\n    /**\n     * Sets the center of the map to the given location\n     * @param latitude latitude of the new center\n     * @param longitude longitude of the new center\n     */\n    centerMap(latitude, longitude) {\n        this.googleMapRendererService.centerMap(latitude, longitude);\n    }\n    renderMap() {\n        this.googleMapRendererService.renderMap(this.mapElement.nativeElement, this.locations, markerIndex => {\n            this.selectStoreItemClickHandle(markerIndex);\n        });\n    }\n    selectStoreItemClickHandle(markerIndex) {\n        this.selectedStoreItem.emit(markerIndex);\n    }\n};\nStoreFinderMapComponent.ctorParameters = () => [\n    { type: GoogleMapRendererService }\n];\n__decorate([\n    ViewChild('mapElement', { static: true })\n], StoreFinderMapComponent.prototype, \"mapElement\", void 0);\n__decorate([\n    Input()\n], StoreFinderMapComponent.prototype, \"locations\", void 0);\n__decorate([\n    Output()\n], StoreFinderMapComponent.prototype, \"selectedStoreItem\", void 0);\nStoreFinderMapComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-map',\n        template: \"<div #mapElement class=\\\"cx-store-map\\\"></div>\\n\"\n    })\n], StoreFinderMapComponent);\n\nlet StoreFinderPaginationDetailsComponent = class StoreFinderPaginationDetailsComponent {\n    constructor() { }\n    getResultsPerPage() {\n        if (this.pagination.totalResults > this.pagination.pageSize) {\n            const firstItem = this.pagination.currentPage * this.pagination.pageSize + 1;\n            let resultsPerPage = (this.pagination.currentPage + 1) * this.pagination.pageSize;\n            if (resultsPerPage > this.pagination.totalResults) {\n                resultsPerPage = this.pagination.totalResults;\n            }\n            return `${firstItem} - ${resultsPerPage}`;\n        }\n        else {\n            return `1 - ${this.pagination.totalResults}`;\n        }\n    }\n};\n__decorate([\n    Input()\n], StoreFinderPaginationDetailsComponent.prototype, \"pagination\", void 0);\nStoreFinderPaginationDetailsComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-pagination-details',\n        template: \"<span class=\\\"cx-pagination-details\\\">\\n  {{ getResultsPerPage() }}\\n  {{\\n    'storeFinder.fromStoresFound'\\n      | cxTranslate: { count: pagination.totalResults }\\n  }}\\n</span>\\n\"\n    })\n], StoreFinderPaginationDetailsComponent);\n\nlet StoreFinderListComponent = class StoreFinderListComponent {\n    constructor(storeDataService, document) {\n        this.storeDataService = storeDataService;\n        this.document = document;\n        this.iconTypes = ICON_TYPE;\n        this.isDetailsModeVisible = false;\n    }\n    centerStoreOnMapByIndex(index, location) {\n        this.showStoreDetails(location);\n        this.selectedStoreIndex = index;\n        this.selectedStore = location;\n        this.storeMap.centerMap(this.storeDataService.getStoreLatitude(this.locations.stores[index]), this.storeDataService.getStoreLongitude(this.locations.stores[index]));\n    }\n    selectStoreItemList(index) {\n        this.selectedStoreIndex = index;\n        const storeListItem = this.document.getElementById('item-' + index);\n        storeListItem.scrollIntoView({\n            behavior: 'smooth',\n            block: 'center',\n        });\n    }\n    showStoreDetails(location) {\n        this.isDetailsModeVisible = true;\n        this.storeDetails = location;\n    }\n    hideStoreDetails() {\n        this.isDetailsModeVisible = false;\n        this.selectedStoreIndex = undefined;\n        this.selectedStore = undefined;\n        this.storeMap.renderMap();\n    }\n};\nStoreFinderListComponent.ctorParameters = () => [\n    { type: StoreDataService },\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }\n];\n__decorate([\n    Input()\n], StoreFinderListComponent.prototype, \"locations\", void 0);\n__decorate([\n    Input()\n], StoreFinderListComponent.prototype, \"useMylocation\", void 0);\n__decorate([\n    ViewChild('storeMap')\n], StoreFinderListComponent.prototype, \"storeMap\", void 0);\nStoreFinderListComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-list',\n        template: \"<ng-container *ngIf=\\\"locations\\\">\\n  <div class=\\\"container mb-2\\\">\\n    <div class=\\\"row\\\" *ngIf=\\\"locations?.pagination\\\">\\n      <div class=\\\"col-md-12\\\">\\n        <cx-store-finder-pagination-details\\n          [pagination]=\\\"locations.pagination\\\"\\n        ></cx-store-finder-pagination-details>\\n      </div>\\n      <div class=\\\"col-md-2 text-left cx-back-wrapper\\\">\\n        <button\\n          class=\\\"btn btn-block btn-action\\\"\\n          *ngIf=\\\"isDetailsModeVisible\\\"\\n          (click)=\\\"hideStoreDetails()\\\"\\n        >\\n          <cx-icon [type]=\\\"iconTypes.CARET_LEFT\\\"></cx-icon>\\n          {{ 'storeFinder.backToList' | cxTranslate }}\\n        </button>\\n      </div>\\n    </div>\\n    <div *ngIf=\\\"locations?.stores\\\" class=\\\"row cx-columns\\\">\\n      <div class=\\\"col-md-4 cx-address-col\\\">\\n        <div class=\\\"cx-store-details\\\" *ngIf=\\\"isDetailsModeVisible\\\">\\n          <cx-store-finder-store-description\\n            [location]=\\\"storeDetails\\\"\\n            [disableMap]=\\\"true\\\"\\n          ></cx-store-finder-store-description>\\n        </div>\\n        <ol class=\\\"cx-list\\\" *ngIf=\\\"!isDetailsModeVisible\\\">\\n          <li\\n            *ngFor=\\\"let location of locations?.stores; let i = index\\\"\\n            id=\\\"{{ 'item-' + i }}\\\"\\n            [ngClass]=\\\"{\\n              'cx-selected-item': selectedStoreIndex === i\\n            }\\\"\\n            class=\\\"cx-list-items\\\"\\n          >\\n            <cx-store-finder-list-item\\n              [location]=\\\"location\\\"\\n              [locationIndex]=\\\"i\\\"\\n              [displayDistance]=\\\"useMylocation\\\"\\n              (storeItemClick)=\\\"centerStoreOnMapByIndex($event, location)\\\"\\n              [listOrderLabel]=\\\"\\n                i +\\n                locations.pagination.currentPage *\\n                  locations.pagination.pageSize +\\n                1\\n              \\\"\\n            ></cx-store-finder-list-item>\\n          </li>\\n        </ol>\\n      </div>\\n      <div class=\\\"col-md-8 cx-map-col\\\">\\n        <cx-store-finder-map\\n          #storeMap\\n          [locations]=\\\"locations.stores\\\"\\n          (selectedStoreItem)=\\\"selectStoreItemList($event)\\\"\\n        ></cx-store-finder-map>\\n      </div>\\n    </div>\\n\\n    <!-- mobile tabs for column set only -->\\n\\n    <div *ngIf=\\\"locations?.stores\\\" class=\\\"cx-columns-mobile\\\">\\n      <ngb-tabset justify=\\\"center\\\">\\n        <ngb-tab>\\n          <ng-template ngbTabTitle>\\n            {{ 'storeFinder.listView' | cxTranslate }}\\n          </ng-template>\\n          <ng-template ngbTabContent>\\n            <div class=\\\"cx-address-col\\\">\\n              <div class=\\\"cx-store-details\\\" *ngIf=\\\"isDetailsModeVisible\\\">\\n                <cx-store-finder-store-description\\n                  [location]=\\\"storeDetails\\\"\\n                  [disableMap]=\\\"true\\\"\\n                ></cx-store-finder-store-description>\\n              </div>\\n              <ol class=\\\"cx-list\\\" *ngIf=\\\"!isDetailsModeVisible\\\">\\n                <li\\n                  *ngFor=\\\"let location of locations?.stores; let i = index\\\"\\n                  id=\\\"{{ 'item-' + i }}\\\"\\n                  [ngClass]=\\\"{\\n                    'cx-selected-item': selectedStoreIndex === i\\n                  }\\\"\\n                  class=\\\"cx-list-items\\\"\\n                >\\n                  <cx-store-finder-list-item\\n                    [location]=\\\"location\\\"\\n                    [locationIndex]=\\\"i\\\"\\n                    [displayDistance]=\\\"useMylocation\\\"\\n                    (storeItemClick)=\\\"centerStoreOnMapByIndex($event, location)\\\"\\n                    [listOrderLabel]=\\\"\\n                      i +\\n                      locations.pagination.currentPage *\\n                        locations.pagination.pageSize +\\n                      1\\n                    \\\"\\n                  ></cx-store-finder-list-item>\\n                </li>\\n              </ol>\\n            </div>\\n          </ng-template>\\n        </ngb-tab>\\n        <ngb-tab>\\n          <ng-template ngbTabTitle>\\n            {{ 'storeFinder.mapView' | cxTranslate }}\\n          </ng-template>\\n          <ng-template ngbTabContent>\\n            <div class=\\\"cx-map-col\\\">\\n              <cx-store-finder-map\\n                #storeMap\\n                [locations]=\\\"selectedStore ? [selectedStore] : locations.stores\\\"\\n                (selectedStoreItem)=\\\"selectStoreItemList($event)\\\"\\n              ></cx-store-finder-map>\\n            </div>\\n          </ng-template>\\n        </ngb-tab>\\n      </ngb-tabset>\\n    </div>\\n\\n    <!-- mobile tabs end -->\\n\\n    <div *ngIf=\\\"!locations?.stores\\\" class=\\\"row\\\">\\n      <div class=\\\"col-md-12 cx-not-found\\\">\\n        {{ 'storeFinder.noStoreFound' | cxTranslate }}\\n      </div>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    }),\n    __param(1, Inject(DOCUMENT))\n], StoreFinderListComponent);\n\nlet StoreFinderSearchResultComponent = class StoreFinderSearchResultComponent {\n    constructor(storeFinderService, route) {\n        this.storeFinderService = storeFinderService;\n        this.route = route;\n        this.countryCode = null;\n        this.searchConfig = {\n            currentPage: 0,\n        };\n    }\n    ngOnInit() {\n        this.subscription = this.route.queryParams.subscribe(params => this.initialize(params));\n    }\n    ngOnDestroy() {\n        if (this.subscription) {\n            this.subscription.unsubscribe();\n        }\n    }\n    viewPage(pageNumber) {\n        this.searchConfig = Object.assign(Object.assign({}, this.searchConfig), { currentPage: pageNumber });\n        this.storeFinderService.findStoresAction(this.searchQuery.queryText, this.searchConfig, this.geolocation, this.countryCode, this.useMyLocation);\n    }\n    initialize(params) {\n        this.searchQuery = this.parseParameters(params);\n        this.useMyLocation = params && params.useMyLocation ? true : false;\n        this.searchConfig = Object.assign(Object.assign({}, this.searchConfig), { currentPage: 0 });\n        this.storeFinderService.findStoresAction(this.searchQuery.queryText, this.searchConfig, this.geolocation, this.countryCode, this.useMyLocation);\n        this.isLoading$ = this.storeFinderService.getStoresLoading();\n        this.locations$ = this.storeFinderService.getFindStoresEntities();\n    }\n    parseParameters(queryParams) {\n        let searchQuery;\n        if (queryParams.query) {\n            searchQuery = { queryText: queryParams.query };\n        }\n        else {\n            searchQuery = { queryText: '' };\n        }\n        searchQuery.useMyLocation =\n            queryParams.useMyLocation != null &&\n                queryParams.useMyLocation.toUpperCase() === 'TRUE';\n        return searchQuery;\n    }\n};\nStoreFinderSearchResultComponent.ctorParameters = () => [\n    { type: StoreFinderService },\n    { type: ActivatedRoute }\n];\nStoreFinderSearchResultComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-search-result',\n        template: \"<div\\n  *ngIf=\\\"\\n    !(isLoading$ | async) && (locations$ | async) as locations;\\n    else loading\\n  \\\"\\n>\\n  <div *ngIf=\\\"locations?.stores.length\\\">\\n    <div class=\\\"cx-pagination\\\">\\n      <cx-pagination\\n        [pagination]=\\\"locations.pagination\\\"\\n        (viewPageEvent)=\\\"viewPage($event)\\\"\\n      ></cx-pagination>\\n    </div>\\n  </div>\\n  <cx-store-finder-list\\n    *ngIf=\\\"locations?.stores.length\\\"\\n    [locations]=\\\"locations\\\"\\n    [useMylocation]=\\\"useMyLocation\\\"\\n  ></cx-store-finder-list>\\n  <div class=\\\"container\\\" *ngIf=\\\"!locations?.stores.length\\\">\\n    <div class=\\\"row\\\">\\n      <span class=\\\"cx-no-stores\\\">{{\\n        'storeFinder.noStoresMessage' | cxTranslate\\n      }}</span>\\n    </div>\\n  </div>\\n</div>\\n<ng-template #loading>\\n  <div class=\\\"cx-spinner\\\">\\n    <cx-spinner></cx-spinner>\\n  </div>\\n</ng-template>\\n\"\n    })\n], StoreFinderSearchResultComponent);\n\nlet StoreFinderSearchComponent = class StoreFinderSearchComponent {\n    constructor(routingService) {\n        this.routingService = routingService;\n        this.searchBox = new FormControl();\n        this.iconTypes = ICON_TYPE;\n    }\n    findStores(address) {\n        this.routingService.go(['store-finder/find'], { query: address });\n    }\n    viewStoresWithMyLoc() {\n        this.routingService.go(['store-finder/find'], { useMyLocation: true });\n    }\n    onKey(event) {\n        if (this.searchBox.value &&\n            this.searchBox.value.length &&\n            event.key === 'Enter') {\n            this.findStores(this.searchBox.value);\n        }\n    }\n};\nStoreFinderSearchComponent.ctorParameters = () => [\n    { type: RoutingService }\n];\nStoreFinderSearchComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-search',\n        template: \"<div class=\\\"container\\\">\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-md-12 col-lg-7\\\">\\n      <div class=\\\"form-group search-wrapper\\\">\\n        <input\\n          #queryInput\\n          [formControl]=\\\"searchBox\\\"\\n          (keyup)=\\\"onKey($event)\\\"\\n          type=\\\"text\\\"\\n          class=\\\"form-control\\\"\\n          placeholder=\\\"{{ 'storeFinder.searchBox' | cxTranslate }}\\\"\\n          required\\n        />\\n        <cx-icon\\n          [type]=\\\"iconTypes.SEARCH\\\"\\n          aria-label=\\\"search\\\"\\n          class=\\\"search\\\"\\n          [routerLink]=\\\"['/store-finder/find']\\\"\\n          [queryParams]=\\\"{ query: queryInput.value }\\\"\\n          [ngClass]=\\\"{\\n            'disabled-action': !(queryInput.value && queryInput.value.length)\\n          }\\\"\\n        ></cx-icon>\\n      </div>\\n    </div>\\n    <div class=\\\"col-md-12 col-lg-5\\\">\\n      <div class=\\\"row cx-search-links mb-3\\\">\\n        <div class=\\\"col-6\\\">\\n          <button\\n            (click)=\\\"viewStoresWithMyLoc()\\\"\\n            class=\\\"btn btn-primary btn-block\\\"\\n          >\\n            {{ 'storeFinder.useMyLocation' | cxTranslate }}\\n          </button>\\n        </div>\\n        <div class=\\\"col-6\\\">\\n          <button\\n            [routerLink]=\\\"['/store-finder/view-all']\\\"\\n            class=\\\"btn btn-primary btn-block\\\"\\n          >\\n            {{ 'storeFinder.viewAllStores' | cxTranslate }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"\n    })\n], StoreFinderSearchComponent);\n\nlet StoreFinderStoreDescriptionComponent = class StoreFinderStoreDescriptionComponent extends AbstractStoreItemComponent {\n    constructor(storeDataService) {\n        super(storeDataService);\n        this.storeDataService = storeDataService;\n    }\n};\nStoreFinderStoreDescriptionComponent.ctorParameters = () => [\n    { type: StoreDataService }\n];\n__decorate([\n    Input()\n], StoreFinderStoreDescriptionComponent.prototype, \"location\", void 0);\n__decorate([\n    Input()\n], StoreFinderStoreDescriptionComponent.prototype, \"disableMap\", void 0);\nStoreFinderStoreDescriptionComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-store-description',\n        template: \"<ng-container *ngIf=\\\"location\\\">\\n  <div class=\\\"container\\\">\\n    <div class=\\\"row\\\">\\n      <article class=\\\"cx-store col-md-4\\\">\\n        <h2>{{ location.displayName || location.name }}</h2>\\n\\n        <p *ngIf=\\\"location.address\\\" class=\\\"cx-store-description-address\\\">\\n          {{ location.address.line1 }} {{ location.address.line2 }} <br />\\n          {{\\n            getFormattedStoreAddress([\\n              location.address.town,\\n              location.address.postalCode,\\n              location.address.country.isocode\\n            ])\\n          }}\\n        </p>\\n\\n        <section class=\\\"cx-contact\\\">\\n          <ul class=\\\"cx-list\\\">\\n            <li class=\\\"cx-item\\\">\\n              <a\\n                class=\\\"cx-link\\\"\\n                [href]=\\\"getDirections(location)\\\"\\n                target=\\\"_blank\\\"\\n                >{{ 'storeFinder.getDirections' | cxTranslate }}</a\\n              >\\n            </li>\\n            <li class=\\\"cx-item\\\" *ngIf=\\\"location.address?.phone\\\">\\n              {{ 'storeFinder.call' | cxTranslate }}\\n              {{ location.address?.phone }}\\n            </li>\\n          </ul>\\n        </section>\\n        <div class=\\\"cx-schedule\\\" *ngIf=\\\"location.openingHours\\\">\\n          <cx-schedule [location]=\\\"location\\\">\\n            <h3>{{ 'storeFinder.storeHours' | cxTranslate }}</h3>\\n          </cx-schedule>\\n        </div>\\n\\n        <div *ngIf=\\\"(location.features | json) != '{}'\\\" class=\\\"cx-features\\\">\\n          <div class=\\\"row \\\">\\n            <div class=\\\"col-lg-12\\\">\\n              <h3 class=\\\"cx-features-header\\\">\\n                {{ 'storeFinder.storeFeatures' | cxTranslate }}\\n              </h3>\\n            </div>\\n          </div>\\n\\n          <article class=\\\"row\\\">\\n            <div\\n              class=\\\"col-lg-12 cx-feature-item\\\"\\n              *ngFor=\\\"let feature of location.features?.entry\\\"\\n            >\\n              <div class=\\\"cx-feature-value\\\">{{ feature.value }}</div>\\n            </div>\\n          </article>\\n        </div>\\n      </article>\\n      <article class=\\\"cx-storeMap col-lg-8\\\" *ngIf=\\\"!disableMap\\\">\\n        <cx-store-finder-map [locations]=\\\"[location]\\\"></cx-store-finder-map>\\n      </article>\\n    </div>\\n  </div>\\n</ng-container>\\n\"\n    })\n], StoreFinderStoreDescriptionComponent);\n\nlet StoreFinderStoresCountComponent = class StoreFinderStoresCountComponent {\n    constructor(storeFinderService) {\n        this.storeFinderService = storeFinderService;\n    }\n    ngOnInit() {\n        this.storeFinderService.viewAllStores();\n        this.locations$ = this.storeFinderService.getViewAllStoresEntities();\n        this.isLoading$ = this.storeFinderService.getViewAllStoresLoading();\n    }\n};\nStoreFinderStoresCountComponent.ctorParameters = () => [\n    { type: StoreFinderService }\n];\nStoreFinderStoresCountComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-stores-count',\n        template: \"<ng-container\\n  *ngIf=\\\"\\n    !(isLoading$ | async) && (locations$ | async) as locations;\\n    else loading\\n  \\\"\\n>\\n  <div class=\\\"cx-count container\\\">\\n    <div class=\\\"row\\\" *ngIf=\\\"locations?.length\\\">\\n      <div\\n        *ngFor=\\\"let country of locations\\\"\\n        class=\\\"cx-set col-sm-6 col-md-4 col-lg-4 col-xl-3\\\"\\n      >\\n        <a [routerLink]=\\\"['../country', country.isoCode]\\\" class=\\\"btn-link\\\">\\n          <div class=\\\"cx-title\\\">\\n            <span\\n              [ngClass]=\\\"\\n                country?.storeCountDataList\\n                  ? 'country-header'\\n                  : 'country-header-link'\\n              \\\"\\n              class=\\\"cx-name\\\"\\n              >{{ country.name }}</span\\n            >\\n            <span\\n              [ngClass]=\\\"\\n                country?.storeCountDataList\\n                  ? 'country-header'\\n                  : 'country-header-link'\\n              \\\"\\n              *ngIf=\\\"!country?.storeCountDataList\\\"\\n              class=\\\"cx-country-count\\\"\\n              >({{ country.count }})</span\\n            >\\n          </div>\\n        </a>\\n      </div>\\n    </div>\\n    <div class=\\\"row\\\" *ngIf=\\\"!locations?.length\\\">\\n      <span class=\\\"cx-no-stores\\\">{{\\n        'storeFinder.noStoresMessage' | cxTranslate\\n      }}</span>\\n    </div>\\n  </div>\\n</ng-container>\\n<ng-template #loading>\\n  <div class=\\\"cx-count-spinner\\\"><cx-spinner></cx-spinner></div>\\n</ng-template>\\n\"\n    })\n], StoreFinderStoresCountComponent);\n\nlet StoreFinderComponent = class StoreFinderComponent {\n};\nStoreFinderComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder',\n        template: \"<ng-container>\\n  <div class=\\\"cx-store-finder-wrapper\\\">\\n    <cx-store-finder-header></cx-store-finder-header>\\n    <router-outlet></router-outlet>\\n  </div>\\n</ng-container>\\n\"\n    })\n], StoreFinderComponent);\n\nlet StoreFinderStoreComponent = class StoreFinderStoreComponent {\n    constructor(storeFinderService, route, routingService) {\n        this.storeFinderService = storeFinderService;\n        this.route = route;\n        this.routingService = routingService;\n        this.iconTypes = ICON_TYPE;\n    }\n    ngOnInit() {\n        if (!this.location) {\n            this.requestStoresData();\n            this.location$ = this.storeFinderService.getFindStoresEntities();\n            this.isLoading$ = this.storeFinderService.getStoresLoading();\n        }\n    }\n    requestStoresData() {\n        this.storeFinderService.viewStoreById(this.route.snapshot.params.store);\n    }\n    goBack() {\n        this.routingService.go([\n            `store-finder/country/${this.route.snapshot.params.country}`,\n        ]);\n    }\n};\nStoreFinderStoreComponent.ctorParameters = () => [\n    { type: StoreFinderService },\n    { type: ActivatedRoute },\n    { type: RoutingService }\n];\n__decorate([\n    Input()\n], StoreFinderStoreComponent.prototype, \"location\", void 0);\n__decorate([\n    Input()\n], StoreFinderStoreComponent.prototype, \"disableMap\", void 0);\nStoreFinderStoreComponent = __decorate([\n    Component({\n        selector: 'cx-store-finder-store',\n        template: \"<div\\n  class=\\\"container\\\"\\n  *ngIf=\\\"\\n    location || (!(isLoading$ | async) && (location$ | async)) as location;\\n    else loading\\n  \\\"\\n>\\n  <div class=\\\"row cx-store-actions\\\">\\n    <div class=\\\"col-md-4 col-sm-6 col-lg-2\\\">\\n      <button class=\\\"btn btn-block btn-action\\\" (click)=\\\"goBack()\\\">\\n        <cx-icon [type]=\\\"iconTypes.CARET_LEFT\\\"></cx-icon>\\n        {{ 'storeFinder.backToList' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n  <div class=\\\"row\\\">\\n    <div class=\\\"col-12 p-0\\\">\\n      <cx-store-finder-store-description\\n        [disableMap]=\\\"disableMap\\\"\\n        [location]=\\\"location\\\"\\n      ></cx-store-finder-store-description>\\n    </div>\\n  </div>\\n</div>\\n<ng-template #loading>\\n  <div class=\\\"cx-spinner\\\"><cx-spinner></cx-spinner></div>\\n</ng-template>\\n\"\n    })\n], StoreFinderStoreComponent);\n\nlet StoreFinderModule = class StoreFinderModule {\n};\nStoreFinderModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            ReactiveFormsModule,\n            RouterModule,\n            ListNavigationModule,\n            NgbTabsetModule,\n            SpinnerModule,\n            UrlModule,\n            StoreFinderCoreModule,\n            I18nModule,\n            IconModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    StoreFinderComponent: {\n                        component: StoreFinderComponent,\n                        childRoutes: [\n                            {\n                                path: 'find',\n                                component: StoreFinderSearchResultComponent,\n                            },\n                            {\n                                path: 'view-all',\n                                component: StoreFinderStoresCountComponent,\n                            },\n                            {\n                                path: 'country/:country',\n                                component: StoreFinderGridComponent,\n                            },\n                            {\n                                path: 'country/:country/region/:region',\n                                component: StoreFinderGridComponent,\n                            },\n                            {\n                                path: 'country/:country/region/:region/:store',\n                                component: StoreFinderStoreComponent,\n                            },\n                            {\n                                path: 'country/:country/:store',\n                                component: StoreFinderStoreComponent,\n                            },\n                        ],\n                    },\n                },\n                layoutSlots: {\n                    StoreFinderPageTemplate: {\n                        slots: ['MiddleContent', 'SideContent'],\n                    },\n                },\n            }),\n        ],\n        declarations: [\n            StoreFinderSearchComponent,\n            StoreFinderListComponent,\n            StoreFinderMapComponent,\n            StoreFinderListItemComponent,\n            StoreFinderStoresCountComponent,\n            StoreFinderGridComponent,\n            StoreFinderStoreDescriptionComponent,\n            ScheduleComponent,\n            StoreFinderHeaderComponent,\n            StoreFinderSearchResultComponent,\n            StoreFinderComponent,\n            StoreFinderPaginationDetailsComponent,\n            StoreFinderStoreComponent,\n        ],\n        exports: [\n            ScheduleComponent,\n            StoreFinderComponent,\n            StoreFinderGridComponent,\n            StoreFinderHeaderComponent,\n            StoreFinderListItemComponent,\n            StoreFinderMapComponent,\n            StoreFinderPaginationDetailsComponent,\n            StoreFinderSearchComponent,\n            StoreFinderSearchResultComponent,\n            StoreFinderListComponent,\n            StoreFinderStoreDescriptionComponent,\n            StoreFinderStoresCountComponent,\n            StoreFinderStoreComponent,\n        ],\n        entryComponents: [\n            StoreFinderComponent,\n            StoreFinderSearchResultComponent,\n            StoreFinderStoresCountComponent,\n            StoreFinderGridComponent,\n            StoreFinderStoreComponent,\n        ],\n    })\n], StoreFinderModule);\n\nlet CheckoutLoginComponent = class CheckoutLoginComponent {\n    constructor(formBuilder, cartService, authRedirectService) {\n        this.formBuilder = formBuilder;\n        this.cartService = cartService;\n        this.authRedirectService = authRedirectService;\n        this.form = this.formBuilder.group({\n            email: ['', [Validators.required, CustomFormValidators.emailValidator]],\n            emailConfirmation: ['', [Validators.required]],\n        }, { validator: this.emailsMatch });\n        this.submitClicked = false;\n    }\n    isNotValid(formControlName) {\n        return FormUtils.isNotValidField(this.form, formControlName, this.submitClicked);\n    }\n    isEmailConfirmInvalid() {\n        return (this.form.hasError('NotEqual') &&\n            (this.submitClicked ||\n                (this.form.get('emailConfirmation').touched &&\n                    this.form.get('emailConfirmation').dirty)));\n    }\n    onSubmit() {\n        this.submitClicked = true;\n        if (this.form.invalid) {\n            return;\n        }\n        const email = this.form.value.email;\n        this.cartService.addEmail(email);\n        if (!this.sub) {\n            this.sub = this.cartService.getAssignedUser().subscribe(_ => {\n                if (this.cartService.isGuestCart()) {\n                    this.authRedirectService.redirect();\n                }\n            });\n        }\n    }\n    ngOnDestroy() {\n        if (this.sub) {\n            this.sub.unsubscribe();\n        }\n    }\n    emailsMatch(abstractControl) {\n        return abstractControl.get('email').value !==\n            abstractControl.get('emailConfirmation').value\n            ? { NotEqual: true }\n            : null;\n    }\n};\nCheckoutLoginComponent.ctorParameters = () => [\n    { type: FormBuilder },\n    { type: CartService },\n    { type: AuthRedirectService }\n];\nCheckoutLoginComponent = __decorate([\n    Component({\n        selector: 'cx-checkout-login',\n        template: \"<form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'checkoutLogin.emailAddress.label' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"email\\\"\\n        name=\\\"email\\\"\\n        class=\\\"form-control\\\"\\n        formControlName=\\\"email\\\"\\n        placeholder=\\\"{{\\n          'checkoutLogin.emailAddress.placeholder' | cxTranslate\\n        }}\\\"\\n        [class.is-invalid]=\\\"isNotValid('email')\\\"\\n      />\\n      <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isNotValid('email')\\\">\\n        <span>{{ 'checkoutLogin.emailIsRequired' | cxTranslate }}</span>\\n      </div>\\n    </label>\\n  </div>\\n\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'checkoutLogin.confirmEmail.label' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"email\\\"\\n        name=\\\"emailConfirmation\\\"\\n        class=\\\"form-control\\\"\\n        formControlName=\\\"emailConfirmation\\\"\\n        placeholder=\\\"{{\\n          'checkoutLogin.confirmEmail.placeholder' | cxTranslate\\n        }}\\\"\\n        [class.is-invalid]=\\\"isEmailConfirmInvalid()\\\"\\n      />\\n      <div class=\\\"invalid-feedback\\\" *ngIf=\\\"isEmailConfirmInvalid()\\\">\\n        <span>{{ 'checkoutLogin.emailsMustMatch' | cxTranslate }}</span>\\n      </div>\\n    </label>\\n  </div>\\n\\n  <button type=\\\"submit\\\" class=\\\"btn btn-block btn-primary\\\">\\n    {{ 'checkoutLogin.continue' | cxTranslate }}\\n  </button>\\n</form>\\n\"\n    })\n], CheckoutLoginComponent);\n\nlet CheckoutLoginModule = class CheckoutLoginModule {\n};\nCheckoutLoginModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            I18nModule,\n            FormsModule,\n            ReactiveFormsModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    GuestCheckoutLoginComponent: {\n                        component: CheckoutLoginComponent,\n                        guards: [NotCheckoutAuthGuard],\n                    },\n                },\n            }),\n            FormsModule,\n            ReactiveFormsModule,\n        ],\n        declarations: [CheckoutLoginComponent],\n        exports: [CheckoutLoginComponent],\n        entryComponents: [CheckoutLoginComponent],\n    })\n], CheckoutLoginModule);\n\nlet LoginFormComponent = class LoginFormComponent {\n    constructor(auth, globalMessageService, fb, authRedirectService, winRef, activatedRoute, checkoutConfigService) {\n        this.auth = auth;\n        this.globalMessageService = globalMessageService;\n        this.fb = fb;\n        this.authRedirectService = authRedirectService;\n        this.winRef = winRef;\n        this.activatedRoute = activatedRoute;\n        this.checkoutConfigService = checkoutConfigService;\n        this.loginAsGuest = false;\n    }\n    ngOnInit() {\n        this.form = this.fb.group({\n            userId: ['', [Validators.required, CustomFormValidators.emailValidator]],\n            password: ['', Validators.required],\n        });\n        if (this.checkoutConfigService &&\n            this.checkoutConfigService.isGuestCheckout()) {\n            this.loginAsGuest = this.activatedRoute.snapshot.queryParams['forced'];\n        }\n        // TODO(issue:#4055) Deprecated since 1.1.0\n        if (this.winRef && this.winRef.nativeWindow) {\n            const routeState = this.winRef.nativeWindow.history &&\n                this.winRef.nativeWindow.history.state;\n            if (routeState && routeState['newUid'] && routeState['newUid'].length) {\n                this.prefillForm('userId', routeState['newUid']);\n            }\n        }\n    }\n    login() {\n        const { userId, password } = this.form.controls;\n        this.auth.authorize(userId.value.toLowerCase(), // backend accepts lowercase emails only\n        password.value);\n        if (!this.sub) {\n            this.sub = this.auth.getUserToken().subscribe(data => {\n                if (data && data.access_token) {\n                    this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n                    this.authRedirectService.redirect();\n                }\n            });\n        }\n    }\n    ngOnDestroy() {\n        if (this.sub) {\n            this.sub.unsubscribe();\n        }\n    }\n    prefillForm(field, value) {\n        this.form.patchValue({\n            [field]: value,\n        });\n        this.form.get(field).markAsTouched(); // this action will check field validity on load\n    }\n};\nLoginFormComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: GlobalMessageService },\n    { type: FormBuilder },\n    { type: AuthRedirectService },\n    { type: WindowRef },\n    { type: ActivatedRoute },\n    { type: CheckoutConfigService }\n];\nLoginFormComponent = __decorate([\n    Component({\n        selector: 'cx-login-form',\n        template: \"<form (submit)=\\\"login()\\\" [formGroup]=\\\"form\\\">\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'loginForm.emailAddress.label' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"email\\\"\\n        class=\\\"form-control\\\"\\n        [class.is-invalid]=\\\"\\n          form.controls['userId'].invalid &&\\n          (form.controls['userId'].touched || form.controls['userId'].dirty)\\n        \\\"\\n        formControlName=\\\"userId\\\"\\n        placeholder=\\\"{{ 'loginForm.emailAddress.placeholder' | cxTranslate }}\\\"\\n      />\\n    </label>\\n    <div\\n      class=\\\"invalid-feedback\\\"\\n      *ngIf=\\\"\\n        form.controls['userId'].invalid &&\\n        (form.controls['userId'].touched || form.controls['userId'].dirty)\\n      \\\"\\n    >\\n      <span>{{ 'loginForm.wrongEmailFormat' | cxTranslate }}</span>\\n    </div>\\n  </div>\\n  <div class=\\\"form-group\\\">\\n    <label>\\n      <span class=\\\"label-content\\\">{{\\n        'loginForm.password.label' | cxTranslate\\n      }}</span>\\n      <input\\n        type=\\\"password\\\"\\n        class=\\\"form-control\\\"\\n        placeholder=\\\"{{ 'loginForm.password.placeholder' | cxTranslate }}\\\"\\n        formControlName=\\\"password\\\"\\n      />\\n    </label>\\n  </div>\\n  <p>\\n    <a\\n      [routerLink]=\\\"{ cxRoute: 'forgotPassword' } | cxUrl\\\"\\n      aria-controls=\\\"reset-password\\\"\\n      class=\\\"btn-link\\\"\\n      >{{ 'loginForm.forgotPassword' | cxTranslate }}</a\\n    >\\n  </p>\\n\\n  <button\\n    type=\\\"submit\\\"\\n    class=\\\"btn btn-block btn-primary\\\"\\n    [disabled]=\\\"form.invalid\\\"\\n  >\\n    {{ 'loginForm.signIn' | cxTranslate }}\\n  </button>\\n</form>\\n\\n<div class=\\\"register\\\">\\n  <h3 class=\\\"cx-section-title cx-section-title-alt\\\">\\n    {{ 'loginForm.dontHaveAccount' | cxTranslate }}\\n  </h3>\\n\\n  <ng-container *ngIf=\\\"!loginAsGuest\\\">\\n    <a\\n      [routerLink]=\\\"{ cxRoute: 'register' } | cxUrl\\\"\\n      class=\\\"btn btn-block btn-secondary btn-register\\\"\\n      >{{ 'loginForm.register' | cxTranslate }}</a\\n    >\\n  </ng-container>\\n\\n  <ng-container *ngIf=\\\"loginAsGuest\\\">\\n    <a\\n      [routerLink]=\\\"{ cxRoute: 'checkoutLogin' } | cxUrl\\\"\\n      class=\\\"btn btn-block btn-secondary btn-guest\\\"\\n      >{{ 'loginForm.guestCheckout' | cxTranslate }}</a\\n    >\\n  </ng-container>\\n</div>\\n\"\n    })\n], LoginFormComponent);\n\nlet LoginFormModule = class LoginFormModule {\n};\nLoginFormModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            FormsModule,\n            ReactiveFormsModule,\n            RouterModule,\n            UrlModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    ReturningCustomerLoginComponent: {\n                        component: LoginFormComponent,\n                        guards: [NotAuthGuard],\n                    },\n                },\n            }),\n            I18nModule,\n        ],\n        declarations: [LoginFormComponent],\n        exports: [LoginFormComponent],\n        entryComponents: [LoginFormComponent],\n    })\n], LoginFormModule);\n\nlet LoginComponent = class LoginComponent {\n    constructor(auth, userService) {\n        this.auth = auth;\n        this.userService = userService;\n    }\n    ngOnInit() {\n        this.user$ = this.auth.isUserLoggedIn().pipe(switchMap(isUserLoggedIn => {\n            if (isUserLoggedIn) {\n                return this.userService.get();\n            }\n            else {\n                return of(undefined);\n            }\n        }));\n    }\n};\nLoginComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: UserService }\n];\nLoginComponent = __decorate([\n    Component({\n        selector: 'cx-login',\n        template: \"<ng-container *ngIf=\\\"user$ | async as user; else login\\\">\\n  <div class=\\\"cx-login-greet\\\">\\n    {{ 'miniLogin.userGreeting' | cxTranslate: { name: user.name } }}\\n  </div>\\n  <cx-page-slot position=\\\"HeaderLinks\\\"></cx-page-slot>\\n</ng-container>\\n\\n<ng-template #login>\\n  <a role=\\\"link\\\" [routerLink]=\\\"{ cxRoute: 'login' } | cxUrl\\\">{{\\n    'miniLogin.signInRegister' | cxTranslate\\n  }}</a>\\n</ng-template>\\n\"\n    })\n], LoginComponent);\n\nlet LoginModule = class LoginModule {\n};\nLoginModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            RouterModule,\n            UrlModule,\n            PageSlotModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    LoginComponent: {\n                        component: LoginComponent,\n                    },\n                },\n            }),\n            I18nModule,\n        ],\n        declarations: [LoginComponent],\n        entryComponents: [LoginComponent],\n        exports: [LoginComponent],\n    })\n], LoginModule);\n\nlet LogoutGuard = class LogoutGuard {\n    /**\n     * @deprecated since 1.4\n     * Check #5666 for more info\n     *\n     * TODO(issue:5666) Deprecated since 1.4\n     */\n    constructor(auth, cms, routing, semanticPathService, protectedRoutes, featureConfig) {\n        this.auth = auth;\n        this.cms = cms;\n        this.routing = routing;\n        this.semanticPathService = semanticPathService;\n        this.protectedRoutes = protectedRoutes;\n        this.featureConfig = featureConfig;\n    }\n    canActivate() {\n        this.logout();\n        return this.cms\n            .hasPage({\n            id: this.semanticPathService.get('logout'),\n            type: PageType.CONTENT_PAGE,\n        })\n            .pipe(tap(hasPage => {\n            if (!hasPage) {\n                this.redirect();\n            }\n        }));\n    }\n    redirect() {\n        // TODO(issue:5666) Deprecated since 1.4\n        const cxRoute = this.featureConfig.isLevel('1.4') &&\n            this.protectedRoutes &&\n            this.protectedRoutes.shouldProtect\n            ? 'login'\n            : 'home';\n        this.routing.go({ cxRoute });\n    }\n    logout() {\n        this.auth.logout();\n    }\n};\nLogoutGuard.ctorParameters = () => [\n    { type: AuthService },\n    { type: CmsService },\n    { type: RoutingService },\n    { type: SemanticPathService },\n    { type: ProtectedRoutesService },\n    { type: FeatureConfigService }\n];\nLogoutGuard.ɵprov = ɵɵdefineInjectable({ factory: function LogoutGuard_Factory() { return new LogoutGuard(ɵɵinject(AuthService), ɵɵinject(CmsService), ɵɵinject(RoutingService), ɵɵinject(SemanticPathService), ɵɵinject(ProtectedRoutesService), ɵɵinject(FeatureConfigService)); }, token: LogoutGuard, providedIn: \"root\" });\nLogoutGuard = __decorate([\n    Injectable({\n        providedIn: 'root',\n    })\n], LogoutGuard);\n\nconst ɵ0$9 = { cxRoute: 'logout' };\nlet LogoutModule = class LogoutModule {\n};\nLogoutModule = __decorate([\n    NgModule({\n        imports: [\n            PageLayoutModule,\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [LogoutGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$9,\n                },\n            ]),\n        ],\n    })\n], LogoutModule);\n\nlet RegisterComponent = class RegisterComponent {\n    constructor(auth, authRedirectService, userService, globalMessageService, fb, router, featureConfig, anonymousConsentsService, anonymousConsentsConfig) {\n        this.auth = auth;\n        this.authRedirectService = authRedirectService;\n        this.userService = userService;\n        this.globalMessageService = globalMessageService;\n        this.fb = fb;\n        this.router = router;\n        this.featureConfig = featureConfig;\n        this.anonymousConsentsService = anonymousConsentsService;\n        this.anonymousConsentsConfig = anonymousConsentsConfig;\n        this.subscription = new Subscription();\n        // TODO(issue:4237) Register flow\n        this.isNewRegisterFlowEnabled = this.featureConfig && this.featureConfig.isLevel('1.1');\n        this.isAnonymousConsentEnabled = this.featureConfig &&\n            this.featureConfig.isEnabled(ANONYMOUS_CONSENTS_FEATURE);\n        this.userRegistrationForm = this.fb.group({\n            titleCode: [''],\n            firstName: ['', Validators.required],\n            lastName: ['', Validators.required],\n            email: ['', [Validators.required, CustomFormValidators.emailValidator]],\n            password: [\n                '',\n                [Validators.required, CustomFormValidators.passwordValidator],\n            ],\n            passwordconf: ['', Validators.required],\n            newsletter: new FormControl({\n                value: false,\n                disabled: this.isAnonymousConsentEnabled\n                    ? this.isConsentRequired()\n                    : false,\n            }),\n            termsandconditions: [false, Validators.requiredTrue],\n        }, { validator: CustomFormValidators.matchPassword });\n    }\n    ngOnInit() {\n        this.titles$ = this.userService.getTitles().pipe(tap(titles => {\n            if (Object.keys(titles).length === 0) {\n                this.userService.loadTitles();\n            }\n        }), map(titles => {\n            return titles.sort(sortTitles);\n        }));\n        // TODO(issue:4237) Register flow\n        if (this.isNewRegisterFlowEnabled) {\n            this.loading$ = this.userService.getRegisterUserResultLoading();\n            this.registerUserProcessInit();\n        }\n        else {\n            if (this.auth && this.authRedirectService) {\n                this.subscription.add(this.userService\n                    .getRegisterUserResultSuccess()\n                    .subscribe((success) => {\n                    if (success) {\n                        const { uid, password } = this.collectDataFromRegisterForm(this.userRegistrationForm.value);\n                        this.auth.authorize(uid, password);\n                    }\n                }));\n                this.subscription.add(this.auth.getUserToken().subscribe(data => {\n                    if (data && data.access_token) {\n                        this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n                        this.authRedirectService.redirect();\n                    }\n                }));\n            }\n        }\n        // TODO: Workaround: allow server for decide is titleCode mandatory (if yes, provide personalized message)\n        this.subscription.add(this.globalMessageService\n            .get()\n            .pipe(filter(messages => !!Object.keys(messages).length))\n            .subscribe((globalMessageEntities) => {\n            const messages = globalMessageEntities &&\n                globalMessageEntities[GlobalMessageType.MSG_TYPE_ERROR];\n            if (messages &&\n                messages.some(message => message === 'This field is required.')) {\n                this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n                this.globalMessageService.add({ key: 'register.titleRequired' }, GlobalMessageType.MSG_TYPE_ERROR);\n            }\n        }));\n        if (this.isAnonymousConsentEnabled &&\n            Boolean(this.anonymousConsentsConfig) &&\n            Boolean(this.anonymousConsentsConfig.anonymousConsents) &&\n            Boolean(this.anonymousConsentsConfig.anonymousConsents.registerConsent)) {\n            this.anonymousConsent$ = combineLatest([\n                this.anonymousConsentsService.getConsent(this.anonymousConsentsConfig.anonymousConsents.registerConsent),\n                this.anonymousConsentsService.getTemplate(this.anonymousConsentsConfig.anonymousConsents.registerConsent),\n            ]).pipe(map(([consent, template]) => {\n                return {\n                    consent,\n                    template: template ? template.description : '',\n                };\n            }));\n            this.subscription.add(this.userRegistrationForm\n                .get('newsletter')\n                .valueChanges.subscribe(_ => {\n                this.toggleAnonymousConsent();\n            }));\n        }\n    }\n    submit() {\n        this.userService.register(this.collectDataFromRegisterForm(this.userRegistrationForm.value));\n    }\n    titleSelected(title) {\n        this.userRegistrationForm['controls'].titleCode.setValue(title.code);\n    }\n    collectDataFromRegisterForm(formData) {\n        const { firstName, lastName, email, password, titleCode } = formData;\n        return {\n            firstName,\n            lastName,\n            uid: email.toLowerCase(),\n            password,\n            titleCode,\n        };\n    }\n    isConsentGiven(consent) {\n        return this.anonymousConsentsService.isConsentGiven(consent);\n    }\n    isConsentRequired() {\n        if (Boolean(this.anonymousConsentsService) &&\n            Boolean(this.anonymousConsentsConfig.anonymousConsents) &&\n            Boolean(this.anonymousConsentsConfig.anonymousConsents.registerConsent) &&\n            Boolean(this.anonymousConsentsConfig.anonymousConsents.requiredConsents)) {\n            return this.anonymousConsentsConfig.anonymousConsents.requiredConsents.includes(this.anonymousConsentsConfig.anonymousConsents.registerConsent);\n        }\n        return false;\n    }\n    onRegisterUserSuccess(success) {\n        if (this.router && success) {\n            this.router.go('login');\n            this.globalMessageService.add({ key: 'register.postRegisterMessage' }, GlobalMessageType.MSG_TYPE_CONFIRMATION);\n        }\n    }\n    toggleAnonymousConsent() {\n        if (Boolean(this.userRegistrationForm.get('newsletter').value)) {\n            this.anonymousConsentsService.giveConsent(this.anonymousConsentsConfig.anonymousConsents.registerConsent);\n        }\n        else {\n            this.anonymousConsentsService.withdrawConsent(this.anonymousConsentsConfig.anonymousConsents.registerConsent);\n        }\n    }\n    registerUserProcessInit() {\n        this.userService.resetRegisterUserProcessState();\n        this.subscription.add(this.userService.getRegisterUserResultSuccess().subscribe(success => {\n            this.onRegisterUserSuccess(success);\n        }));\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n        this.userService.resetRegisterUserProcessState();\n    }\n};\nRegisterComponent.ctorParameters = () => [\n    { type: AuthService },\n    { type: AuthRedirectService },\n    { type: UserService },\n    { type: GlobalMessageService },\n    { type: FormBuilder },\n    { type: RoutingService },\n    { type: FeatureConfigService },\n    { type: AnonymousConsentsService },\n    { type: AnonymousConsentsConfig }\n];\nRegisterComponent = __decorate([\n    Component({\n        selector: 'cx-register',\n        template: \"<section\\n  class=\\\"cx-page-section container\\\"\\n  *ngIf=\\\"!(loading$ | async); else loading\\\"\\n>\\n  <div class=\\\"row justify-content-center\\\">\\n    <div class=\\\"col-md-6\\\">\\n      <div class=\\\"cx-section\\\">\\n        <form [formGroup]=\\\"userRegistrationForm\\\">\\n          <div class=\\\"form-group\\\">\\n            <label>\\n              <span class=\\\"label-content\\\">{{\\n                'register.title' | cxTranslate\\n              }}</span>\\n              <select formControlName=\\\"titleCode\\\" class=\\\"form-control\\\">\\n                <option selected value=\\\"\\\" disabled>{{\\n                  'register.selectTitle' | cxTranslate\\n                }}</option>\\n                <option\\n                  *ngFor=\\\"let title of titles$ | async\\\"\\n                  [value]=\\\"title.code\\\"\\n                  >{{ title.name }}</option\\n                >\\n              </select>\\n            </label>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <label>\\n              <span class=\\\"label-content\\\">{{\\n                'register.firstName.label' | cxTranslate\\n              }}</span>\\n              <input\\n                class=\\\"form-control\\\"\\n                type=\\\"text\\\"\\n                name=\\\"firstname\\\"\\n                placeholder=\\\"{{\\n                  'register.firstName.placeholder' | cxTranslate\\n                }}\\\"\\n                formControlName=\\\"firstName\\\"\\n              />\\n            </label>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <label>\\n              <span class=\\\"label-content\\\">{{\\n                'register.lastName.label' | cxTranslate\\n              }}</span>\\n              <input\\n                class=\\\"form-control\\\"\\n                type=\\\"text\\\"\\n                name=\\\"lastname\\\"\\n                placeholder=\\\"{{\\n                  'register.lastName.placeholder' | cxTranslate\\n                }}\\\"\\n                formControlName=\\\"lastName\\\"\\n              />\\n            </label>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <label>\\n              <span class=\\\"label-content\\\">{{\\n                'register.emailAddress.label' | cxTranslate\\n              }}</span>\\n              <input\\n                class=\\\"form-control\\\"\\n                [class.is-invalid]=\\\"\\n                  userRegistrationForm.get('email').errors &&\\n                  (userRegistrationForm.get('email').errors['email'] ||\\n                    userRegistrationForm.get('email').errors['InvalidEmail']) &&\\n                  userRegistrationForm.get('email').dirty\\n                \\\"\\n                type=\\\"email\\\"\\n                name=\\\"email\\\"\\n                placeholder=\\\"{{\\n                  'register.emailAddress.placeholder' | cxTranslate\\n                }}\\\"\\n                formControlName=\\\"email\\\"\\n              />\\n            </label>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <label>\\n              <span class=\\\"label-content\\\">{{\\n                'register.password.label' | cxTranslate\\n              }}</span>\\n              <input\\n                class=\\\"form-control\\\"\\n                [class.is-invalid]=\\\"\\n                  userRegistrationForm.get('password').invalid &&\\n                  userRegistrationForm.get('password').dirty\\n                \\\"\\n                type=\\\"password\\\"\\n                name=\\\"password\\\"\\n                placeholder=\\\"{{\\n                  'register.password.placeholder' | cxTranslate\\n                }}\\\"\\n                formControlName=\\\"password\\\"\\n              />\\n              <div\\n                class=\\\"invalid-feedback\\\"\\n                *ngIf=\\\"\\n                  userRegistrationForm.get('password').invalid &&\\n                  userRegistrationForm.get('password').dirty\\n                \\\"\\n              >\\n                <span>{{\\n                  'register.passwordMinRequirements' | cxTranslate\\n                }}</span>\\n              </div>\\n            </label>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <label>\\n              <span class=\\\"label-content\\\">{{\\n                'register.confirmPassword.label' | cxTranslate\\n              }}</span>\\n              <input\\n                class=\\\"form-control\\\"\\n                [class.is-invalid]=\\\"\\n                  userRegistrationForm.get('password').value !==\\n                  userRegistrationForm.get('passwordconf').value\\n                \\\"\\n                type=\\\"password\\\"\\n                name=\\\"confirmpassword\\\"\\n                placeholder=\\\"{{\\n                  'register.confirmPassword.placeholder' | cxTranslate\\n                }}\\\"\\n                formControlName=\\\"passwordconf\\\"\\n              />\\n              <div\\n                class=\\\"invalid-feedback\\\"\\n                *ngIf=\\\"\\n                  userRegistrationForm.get('password').value !==\\n                    userRegistrationForm.get('passwordconf').value &&\\n                  userRegistrationForm.get('passwordconf').value\\n                \\\"\\n              >\\n                <span>{{\\n                  'register.bothPasswordMustMatch' | cxTranslate\\n                }}</span>\\n              </div>\\n            </label>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <div class=\\\"form-check\\\">\\n              <ng-container\\n                *ngIf=\\\"isAnonymousConsentEnabled; else hardcodedNewsletter\\\"\\n              >\\n                <label *ngIf=\\\"anonymousConsent$ | async as anonymousConsent\\\">\\n                  <input\\n                    type=\\\"checkbox\\\"\\n                    name=\\\"newsletter\\\"\\n                    class=\\\"form-check-input\\\"\\n                    formControlName=\\\"newsletter\\\"\\n                    [checked]=\\\"isConsentGiven(anonymousConsent.consent)\\\"\\n                  />\\n                  <span class=\\\"form-check-label\\\">\\n                    {{ anonymousConsent.template }}\\n                  </span>\\n                </label>\\n              </ng-container>\\n              <ng-template #hardcodedNewsletter\\n                ><label>\\n                  <input\\n                    type=\\\"checkbox\\\"\\n                    name=\\\"newsletter\\\"\\n                    class=\\\"form-check-input\\\"\\n                    formControlName=\\\"newsletter\\\"\\n                  />\\n                  <span class=\\\"form-check-label\\\">\\n                    {{ 'register.emailMarketing' | cxTranslate }}\\n                  </span>\\n                </label>\\n              </ng-template>\\n            </div>\\n          </div>\\n\\n          <div class=\\\"form-group\\\">\\n            <div class=\\\"form-check\\\">\\n              <label>\\n                <input\\n                  type=\\\"checkbox\\\"\\n                  name=\\\"termsandconditions\\\"\\n                  formControlName=\\\"termsandconditions\\\"\\n                />\\n                <span class=\\\"form-check-label\\\">\\n                  {{ 'register.confirmThatRead' | cxTranslate }}\\n                  <a\\n                    [routerLink]=\\\"{ cxRoute: 'termsAndConditions' } | cxUrl\\\"\\n                    target=\\\"_blank\\\"\\n                  >\\n                    {{ 'register.termsAndConditions' | cxTranslate }}\\n                  </a>\\n                </span>\\n              </label>\\n            </div>\\n          </div>\\n          <button\\n            type=\\\"submit\\\"\\n            (click)=\\\"submit()\\\"\\n            [disabled]=\\\"userRegistrationForm.invalid\\\"\\n            class=\\\"btn btn-block btn-primary\\\"\\n          >\\n            {{ 'register.register' | cxTranslate }}\\n          </button>\\n          <a\\n            class=\\\"cx-login-link btn-link\\\"\\n            [routerLink]=\\\"{ cxRoute: 'login' } | cxUrl\\\"\\n            >{{ 'register.signIn' | cxTranslate }}</a\\n          >\\n        </form>\\n      </div>\\n    </div>\\n  </div>\\n</section>\\n\\n<ng-template #loading>\\n  <div class=\\\"cx-spinner\\\"><cx-spinner></cx-spinner></div>\\n</ng-template>\\n\"\n    })\n], RegisterComponent);\n\nlet RegisterComponentModule = class RegisterComponentModule {\n};\nRegisterComponentModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            LoginModule,\n            ReactiveFormsModule,\n            RouterModule,\n            UrlModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    RegisterCustomerComponent: {\n                        component: RegisterComponent,\n                        guards: [NotAuthGuard],\n                    },\n                },\n            }),\n            I18nModule,\n            SpinnerModule,\n        ],\n        declarations: [RegisterComponent],\n        exports: [RegisterComponent],\n        entryComponents: [RegisterComponent],\n    })\n], RegisterComponentModule);\n\nlet UserComponentModule = class UserComponentModule {\n};\nUserComponentModule = __decorate([\n    NgModule({\n        imports: [\n            CommonModule,\n            LoginModule,\n            LoginFormModule,\n            LogoutModule,\n            CheckoutLoginModule,\n            ReactiveFormsModule,\n            RouterModule,\n            UrlModule,\n            RegisterComponentModule,\n        ],\n    })\n], UserComponentModule);\n\nlet WishListItemComponent = class WishListItemComponent {\n    constructor() {\n        this.isLoading = false;\n        this.remove = new EventEmitter();\n    }\n    removeEntry(item) {\n        this.remove.emit(item);\n    }\n};\n__decorate([\n    Input()\n], WishListItemComponent.prototype, \"isLoading\", void 0);\n__decorate([\n    Input()\n], WishListItemComponent.prototype, \"cartEntry\", void 0);\n__decorate([\n    Output()\n], WishListItemComponent.prototype, \"remove\", void 0);\nWishListItemComponent = __decorate([\n    Component({\n        selector: 'cx-wish-list-item',\n        template: \"<div class=\\\"row\\\">\\n  <!-- Item Image -->\\n  <div class=\\\"cx-image-container col-2\\\">\\n    <a [routerLink]=\\\"{ cxRoute: 'product', params: cartEntry.product } | cxUrl\\\">\\n      <cx-media\\n        [container]=\\\"cartEntry.product.images?.PRIMARY\\\"\\n        format=\\\"thumbnail\\\"\\n      ></cx-media>\\n    </a>\\n  </div>\\n  <!-- Item Information -->\\n  <div class=\\\"cx-info col-10\\\">\\n    <div class=\\\"cx-info-container row \\\">\\n      <!-- Item Description -->\\n      <div class=\\\"col-md-5 col-lg-5 col-xl-5\\\">\\n        <div *ngIf=\\\"cartEntry.product.name\\\" class=\\\"cx-name\\\">\\n          <a\\n            class=\\\"cx-link\\\"\\n            [routerLink]=\\\"\\n              { cxRoute: 'product', params: cartEntry.product } | cxUrl\\n            \\\"\\n            >{{ cartEntry.product.name }}</a\\n          >\\n        </div>\\n        <div *ngIf=\\\"cartEntry.product.code\\\" class=\\\"cx-code\\\">\\n          {{ 'cartItems.id' | cxTranslate }} {{ cartEntry.product.code }}\\n        </div>\\n        <!-- Variants -->\\n        <ng-container *ngIf=\\\"cartEntry.product.baseOptions?.length\\\">\\n          <div\\n            *ngFor=\\\"\\n              let variant of cartEntry.product.baseOptions[0]?.selected\\n                ?.variantOptionQualifiers\\n            \\\"\\n            class=\\\"cx-property\\\"\\n          >\\n            <div class=\\\"cx-label\\\" *ngIf=\\\"variant.name && variant.value\\\">\\n              {{ variant.name }}: {{ variant.value }}\\n            </div>\\n          </div>\\n        </ng-container>\\n      </div>\\n      <!-- Item Price -->\\n      <div\\n        *ngIf=\\\"cartEntry.basePrice\\\"\\n        class=\\\"cx-price col-md-3 col-lg-4 col-xl-4\\\"\\n      >\\n        <div class=\\\"cx-label d-block d-md-none d-lg-none d-xl-none\\\">\\n          {{ 'cartItems.itemPrice' | cxTranslate }}\\n        </div>\\n        <div *ngIf=\\\"cartEntry.basePrice\\\" class=\\\"cx-value\\\">\\n          {{ cartEntry.basePrice?.formattedValue }}\\n        </div>\\n      </div>\\n      <!-- Total -->\\n      <div class=\\\"col-sm-8 col-md-4 col-lg-3 col-xl-3 cx-add-to-cart\\\">\\n        <cx-add-to-cart\\n          *ngIf=\\\"\\n            cartEntry.product.stock.stockLevelStatus !== 'outOfStock';\\n            else outOfStock\\n          \\\"\\n          [showQuantity]=\\\"false\\\"\\n          [product]=\\\"cartEntry.product\\\"\\n        ></cx-add-to-cart>\\n        <ng-template #outOfStock>\\n          <span class=\\\"cx-out-of-stock\\\">\\n            {{ 'addToCart.outOfStock' | cxTranslate }}\\n          </span>\\n        </ng-template>\\n      </div>\\n    </div>\\n    <div class=\\\"cx-return-button col-12\\\">\\n      <button\\n        class=\\\"btn btn-link\\\"\\n        (click)=\\\"removeEntry(cartEntry)\\\"\\n        [disabled]=\\\"isLoading\\\"\\n      >\\n        {{ 'common.remove' | cxTranslate }}\\n      </button>\\n    </div>\\n  </div>\\n</div>\\n\",\n        changeDetection: ChangeDetectionStrategy.OnPush\n    })\n], WishListItemComponent);\n\nlet WishListComponent = class WishListComponent {\n    constructor(wishListService) {\n        this.wishListService = wishListService;\n        this.wishList$ = this.wishListService.getWishList();\n        this.loading$ = this.wishListService.getWishListLoading();\n    }\n    removeEntry(item) {\n        this.wishListService.removeEntry(item);\n    }\n};\nWishListComponent.ctorParameters = () => [\n    { type: WishListService }\n];\nWishListComponent = __decorate([\n    Component({\n        selector: 'cx-wish-list',\n        template: \"<ng-container *ngIf=\\\"wishList$ | async as wishList\\\">\\n  <ng-container *ngIf=\\\"wishList?.entries?.length > 0; else emptyWishList\\\">\\n    <div class=\\\"d-none d-md-block d-lg-block d-xl-block\\\">\\n      <div class=\\\"cx-item-list-header row\\\">\\n        <div class=\\\"cx-item-list-desc col-md-7 col-lg-6 col-xl-6\\\">\\n          {{ 'cartItems.description' | cxTranslate }}\\n        </div>\\n        <div class=\\\"cx-item-list-price col-md-3 col-lg-4 col-xl-4\\\">\\n          {{ 'cartItems.itemPrice' | cxTranslate }}\\n        </div>\\n        <div class=\\\"cx-item-list-total col-md-2 col-lg-2 col-xl-2\\\">\\n          {{ 'cartItems.total' | cxTranslate }}\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"cx-item-list-row\\\" *ngFor=\\\"let entry of wishList?.entries\\\">\\n      <cx-wish-list-item\\n        [cartEntry]=\\\"entry\\\"\\n        [isLoading]=\\\"loading$ | async\\\"\\n        class=\\\"cx-wish-list-items\\\"\\n        (remove)=\\\"removeEntry($event)\\\"\\n      ></cx-wish-list-item>\\n    </div>\\n  </ng-container>\\n</ng-container>\\n\\n<ng-template #emptyWishList>\\n  <h2>{{ 'wishlist.empty' | cxTranslate }}</h2>\\n</ng-template>\\n\"\n    })\n], WishListComponent);\n\nlet WishListModule = class WishListModule {\n};\nWishListModule = __decorate([\n    NgModule({\n        imports: [\n            AddToCartModule,\n            CommonModule,\n            ConfigModule.withConfig({\n                cmsComponents: {\n                    WishListComponent: {\n                        component: WishListComponent,\n                        guards: [AuthGuard],\n                    },\n                },\n            }),\n            I18nModule,\n            MediaModule,\n            RouterModule,\n            StarRatingModule,\n            UrlModule,\n            ItemCounterModule,\n        ],\n        declarations: [WishListComponent, WishListItemComponent],\n        entryComponents: [WishListComponent],\n        exports: [WishListComponent, WishListItemComponent],\n    })\n], WishListModule);\n\nlet CmsLibModule = class CmsLibModule {\n};\nCmsLibModule = __decorate([\n    NgModule({\n        imports: [\n            AnonymousConsentManagementBannerModule,\n            AsmModule,\n            HamburgerMenuModule,\n            CmsParagraphModule,\n            LinkModule,\n            BannerModule,\n            CategoryNavigationModule,\n            NavigationModule,\n            FooterNavigationModule,\n            BreadcrumbModule,\n            SearchBoxModule,\n            SiteContextSelectorModule,\n            QualtricsModule,\n            AddressBookModule,\n            OrderHistoryModule,\n            OrderCancellationModule,\n            OrderReturnModule,\n            ReturnRequestListModule,\n            ReturnRequestDetailModule,\n            ProductListModule,\n            ProductTabsModule,\n            ProductCarouselModule,\n            ProductReferencesModule,\n            OrderDetailsModule,\n            PaymentMethodsModule,\n            UpdateEmailModule,\n            UpdatePasswordModule,\n            UpdateProfileModule,\n            ConsentManagementModule,\n            CloseAccountModule,\n            CartComponentModule,\n            TabParagraphContainerModule,\n            OrderConfirmationModule,\n            StoreFinderModule,\n            ProductImagesModule,\n            ProductSummaryModule,\n            ProductVariantsModule,\n            ProductIntroModule,\n            CheckoutComponentModule,\n            ForgotPasswordModule,\n            ResetPasswordModule,\n            BannerCarouselModule,\n            UserComponentModule,\n            MyCouponsModule,\n            WishListModule,\n            NotificationPreferenceModule,\n            MyInterestsModule,\n            StockNotificationModule,\n        ],\n    })\n], CmsLibModule);\n\n/**\n * Matches the pattern '[ ** / ] marker / :paramName'\n *\n * @param marker phrase that indicates the start of the match\n * @param paramName name of the parameter present after the marker\n * @param precedingParamName name of the parameter for every preceding url segment\n *        i.e. `param` will result in `param0`, `param1`, ...\n */\nfunction suffixUrlMatcher(segments, _segmentGroup, route) {\n    const config = route.data.cxSuffixUrlMatcher;\n    const { marker, paramName } = config;\n    const precedingParamName = config.precedingParamName || 'param';\n    const markerIndex = findLastIndex(segments, ({ path }) => path === marker);\n    const isMarkerLastSegment = markerIndex === segments.length - 1;\n    if (markerIndex === -1 || isMarkerLastSegment) {\n        return null;\n    }\n    const paramIndex = markerIndex + 1;\n    const posParams = {\n        [paramName]: segments[paramIndex],\n    };\n    for (let i = 0; i < markerIndex; i++) {\n        posParams[`${precedingParamName}${i}`] = segments[i];\n    }\n    return { consumed: segments.slice(0, paramIndex + 1), posParams };\n}\nfunction findLastIndex(elements, predicate) {\n    for (let index = elements.length - 1; index >= 0; index--) {\n        if (predicate(elements[index])) {\n            return index;\n        }\n    }\n    return -1;\n}\n\nconst ɵ0$a = { cxRoute: 'product' }, ɵ1$1 = {\n    cxSuffixUrlMatcher: {\n        marker: 'p',\n        paramName: 'productCode',\n    },\n};\nlet ProductDetailsPageModule = class ProductDetailsPageModule {\n};\nProductDetailsPageModule = __decorate([\n    NgModule({\n        imports: [\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$a,\n                },\n                {\n                    matcher: suffixUrlMatcher,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ1$1,\n                },\n            ]),\n        ],\n    })\n], ProductDetailsPageModule);\n\nconst ɵ0$b = { cxRoute: 'category' }, ɵ1$2 = { pageLabel: 'search', cxRoute: 'search' }, ɵ2 = { cxRoute: 'brand' }, ɵ3 = {\n    cxSuffixUrlMatcher: {\n        marker: 'c',\n        paramName: 'categoryCode',\n    },\n};\nlet ProductListingPageModule = class ProductListingPageModule {\n};\nProductListingPageModule = __decorate([\n    NgModule({\n        imports: [\n            RouterModule.forChild([\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ0$b,\n                },\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ1$2,\n                },\n                {\n                    path: null,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ2,\n                },\n                {\n                    matcher: suffixUrlMatcher,\n                    canActivate: [CmsPageGuard],\n                    component: PageLayoutComponent,\n                    data: ɵ3,\n                },\n            ]),\n        ],\n    })\n], ProductListingPageModule);\n\nconst b2cLayoutConfig = {\n    // deferredLoading: {\n    //   strategy: DeferLoadingStrategy.DEFER,\n    //   intersectionMargin: '50px',\n    // },\n    layoutSlots: {\n        header: {\n            md: {\n                slots: [\n                    'PreHeader',\n                    'SiteContext',\n                    'SiteLinks',\n                    'SiteLogo',\n                    'SearchBox',\n                    'SiteLogin',\n                    'MiniCart',\n                    'NavigationBar',\n                ],\n            },\n            xs: {\n                slots: ['PreHeader', 'SiteLogo', 'SearchBox', 'MiniCart'],\n            },\n        },\n        navigation: {\n            md: { slots: [] },\n            xs: {\n                slots: ['SiteLogin', 'NavigationBar', 'SiteContext', 'SiteLinks'],\n            },\n        },\n        footer: {\n            slots: ['Footer'],\n        },\n        LandingPage2Template: {\n            pageFold: 'Section2B',\n            slots: [\n                'Section1',\n                'Section2A',\n                'Section2B',\n                'Section2C',\n                'Section3',\n                'Section4',\n                'Section5',\n            ],\n        },\n        ContentPage1Template: {\n            slots: ['Section2A', 'Section2B'],\n        },\n        CategoryPageTemplate: {\n            pageFold: 'Section2',\n            slots: ['Section1', 'Section2', 'Section3'],\n        },\n        ProductListPageTemplate: {\n            slots: ['ProductLeftRefinements', 'ProductListSlot'],\n        },\n        ProductGridPageTemplate: {\n            slots: ['ProductLeftRefinements', 'ProductGridSlot'],\n        },\n        SearchResultsListPageTemplate: {\n            slots: [\n                'Section2',\n                'ProductLeftRefinements',\n                'SearchResultsListSlot',\n                'Section4',\n            ],\n        },\n        SearchResultsGridPageTemplate: {\n            slots: [\n                'Section2',\n                'ProductLeftRefinements',\n                'SearchResultsGridSlot',\n                'Section4',\n            ],\n        },\n        ProductDetailsPageTemplate: {\n            md: {\n                pageFold: 'UpSelling',\n            },\n            xs: {\n                pageFold: 'Summary',\n            },\n            slots: [\n                'Summary',\n                'UpSelling',\n                'CrossSelling',\n                'Tabs',\n                'PlaceholderContentSlot',\n            ],\n        },\n        CartPageTemplate: {\n            slots: ['TopContent', 'CenterRightContentSlot', 'EmptyCartMiddleContent'],\n        },\n        AccountPageTemplate: {\n            slots: ['BodyContent', 'SideContent'],\n        },\n        LoginPageTemplate: {\n            slots: ['LeftContentSlot', 'RightContentSlot'],\n        },\n        ErrorPageTemplate: {\n            slots: ['TopContent', 'MiddleContent', 'BottomContent'],\n        },\n        OrderConfirmationPageTemplate: {\n            slots: ['BodyContent', 'SideContent'],\n        },\n        MultiStepCheckoutSummaryPageTemplate: {\n            slots: ['TopContent', 'BodyContent', 'SideContent', 'BottomContent'],\n        },\n        CheckoutLoginPageTemplate: {\n            slots: ['RightContentSlot'],\n        },\n    },\n};\n\nconst headerComponents = {\n    HamburgerMenuComponent: {\n        typeCode: 'HamburgerMenuComponent',\n        flexType: 'HamburgerMenuComponent',\n    },\n    LoginComponent: {\n        typeCode: 'LoginComponent',\n        flexType: 'LoginComponent',\n        uid: 'LoginComponent',\n    },\n};\nconst defaultPageHeaderConfig = {\n    PreHeader: {\n        componentIds: ['HamburgerMenuComponent'],\n    },\n    SiteLogin: {\n        componentIds: ['LoginComponent'],\n    },\n};\n\nfunction defaultCmsContentConfig() {\n    return {\n        cmsStructure: {\n            components: Object.assign({}, headerComponents),\n            slots: Object.assign({}, defaultPageHeaderConfig),\n            pages: [],\n        },\n    };\n}\n\nconst defaultStorefrontRoutesConfig = {\n    home: { paths: [''] },\n    notFound: { paths: ['not-found'] },\n    cart: { paths: ['cart'] },\n    // semantic links for login related pages\n    login: { paths: ['login'], protected: false },\n    register: { paths: ['login/register'], protected: false },\n    forgotPassword: { paths: ['login/forgot-password'], protected: false },\n    resetPassword: { paths: ['login/pw/change'], protected: false },\n    logout: { paths: ['logout'] },\n    checkoutLogin: { paths: ['checkout-login'] },\n    checkout: { paths: ['checkout'] },\n    checkoutShippingAddress: { paths: ['checkout/shipping-address'] },\n    checkoutDeliveryMode: { paths: ['checkout/delivery-mode'] },\n    checkoutPaymentDetails: { paths: ['checkout/payment-details'] },\n    checkoutReviewOrder: { paths: ['checkout/review-order'] },\n    orderConfirmation: { paths: ['order-confirmation'] },\n    // plp routes\n    search: { paths: ['search/:query'] },\n    category: {\n        paths: ['category/:categoryCode'],\n        paramsMapping: { categoryCode: 'code' },\n    },\n    brand: { paths: ['Brands/:brandName/c/:brandCode'] },\n    // pdp routes\n    product: {\n        paths: ['product/:productCode/:name'],\n        paramsMapping: { productCode: 'code' },\n    },\n    termsAndConditions: { paths: ['terms-and-conditions'] },\n    orders: {\n        paths: ['my-account/orders'],\n    },\n    orderDetails: {\n        paths: ['my-account/order/:orderCode'],\n        paramsMapping: { orderCode: 'code' },\n    },\n    orderGuest: {\n        paths: ['guest/order/:orderCode'],\n        paramsMapping: { orderCode: 'code' },\n    },\n    orderReturn: {\n        paths: ['my-account/order/return/:orderCode'],\n        paramsMapping: { orderCode: 'code' },\n    },\n    orderReturnConfirmation: {\n        paths: ['my-account/order/return/confirmation/:orderCode'],\n        paramsMapping: { orderCode: 'code' },\n    },\n    orderCancel: {\n        paths: ['my-account/order/cancel/:orderCode'],\n        paramsMapping: { orderCode: 'code' },\n    },\n    orderCancelConfirmation: {\n        paths: ['my-account/order/cancel/confirmation/:orderCode'],\n        paramsMapping: { orderCode: 'code' },\n    },\n    returnRequestDetails: {\n        paths: ['my-account/return-request/:returnCode'],\n        paramsMapping: { returnCode: 'rma' },\n    },\n    coupons: { paths: ['my-account/coupons'] },\n    couponClaim: {\n        paths: ['my-account/coupon/claim/:couponCode'],\n        paramsMapping: { couponCode: 'code' },\n    },\n};\nconst defaultRoutingConfig = {\n    routing: {\n        routes: defaultStorefrontRoutesConfig,\n    },\n};\n\nvar RoutingModule_1;\nlet RoutingModule = RoutingModule_1 = class RoutingModule {\n    static forRoot() {\n        return {\n            ngModule: RoutingModule_1,\n            providers: [provideConfig(defaultRoutingConfig)],\n        };\n    }\n};\nRoutingModule = RoutingModule_1 = __decorate([\n    NgModule({\n        imports: [RoutingModule$1.forRoot(), CmsRouteModule],\n    })\n], RoutingModule);\n\nlet StorefrontFoundationModule = class StorefrontFoundationModule {\n};\nStorefrontFoundationModule = __decorate([\n    NgModule({\n        imports: [\n            StateModule.forRoot(),\n            AuthModule.forRoot(),\n            AnonymousConsentsModule$1.forRoot(),\n            ConfigModule.forRoot(),\n            ConfigInitializerModule.forRoot(),\n            RoutingModule.forRoot(),\n            I18nModule.forRoot(),\n            CmsModule.forRoot(),\n            GlobalMessageModule.forRoot(),\n            ProcessModule.forRoot(),\n            CartModule.forRoot(),\n            CheckoutModule.forRoot(),\n            UserModule.forRoot(),\n            ProductModule.forRoot(),\n            ViewConfigModule.forRoot(),\n            FeaturesConfigModule.forRoot('1.0'),\n            LayoutModule,\n        ],\n        exports: [LayoutModule],\n        providers: [...provideConfigFromMetaTags()],\n    })\n], StorefrontFoundationModule);\n\nvar StorefrontModule_1;\nlet StorefrontModule = StorefrontModule_1 = class StorefrontModule {\n    static withConfig(config) {\n        return {\n            ngModule: StorefrontModule_1,\n            providers: [provideConfig(config)],\n        };\n    }\n};\nStorefrontModule = StorefrontModule_1 = __decorate([\n    NgModule({\n        imports: [\n            RouterModule.forRoot([], {\n                scrollPositionRestoration: 'enabled',\n                anchorScrolling: 'enabled',\n            }),\n            StoreModule.forRoot({}, {\n                runtimeChecks: {\n                    strictStateImmutability: true,\n                    strictStateSerializability: true,\n                    strictActionImmutability: true,\n                    strictActionSerializability: true,\n                },\n            }),\n            EffectsModule.forRoot([]),\n            // ASM module must be imported before the `AuthModule (which is imported in `StorefrontFoundationModule`)\n            // since we might have conflicting interceptor logic. See #5461.\n            AsmModule,\n            StorefrontFoundationModule,\n            MainModule,\n            SiteContextModule.forRoot(),\n            SmartEditModule.forRoot(),\n            PersonalizationModule.forRoot(),\n            // opt-in explicitly\n            OccModule.forRoot(),\n            ProductDetailsPageModule,\n            ProductListingPageModule,\n            ExternalRoutesModule.forRoot(),\n        ],\n        exports: [MainModule, StorefrontFoundationModule],\n    })\n], StorefrontModule);\n\nvar B2cStorefrontModule_1;\nlet B2cStorefrontModule = B2cStorefrontModule_1 = class B2cStorefrontModule {\n    static withConfig(config) {\n        return {\n            ngModule: B2cStorefrontModule_1,\n            providers: [provideConfig(config)],\n        };\n    }\n};\nB2cStorefrontModule = B2cStorefrontModule_1 = __decorate([\n    NgModule({\n        imports: [\n            StorefrontModule.withConfig({\n                pwa: {\n                    enabled: true,\n                    addToHomeScreen: true,\n                },\n            }),\n            ConfigModule.withConfig(b2cLayoutConfig),\n            ConfigModule.withConfigFactory(defaultCmsContentConfig),\n            // the cms lib module contains all components that added in the bundle\n            CmsLibModule,\n        ],\n        exports: [StorefrontModule],\n    })\n], B2cStorefrontModule);\n\n/*\n * Public API Surface of storefrontlib\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AVOID_STACKED_OUTLETS, AbstractStoreItemComponent, AddToCartComponent, AddToCartModule, AddToHomeScreenBannerComponent, AddToHomeScreenBtnComponent, AddToHomeScreenComponent, AddToWishListComponent, AddToWishListModule, AddedToCartDialogComponent, AddressBookComponent, AddressBookComponentService, AddressBookModule, AddressCardComponent, AddressFormComponent, AddressFormModule, AmendOrderActionsComponent, AmendOrderActionsModule, AmendOrderItemsModule, AmendOrderType, AnonymousConsentManagementBannerComponent, AnonymousConsentManagementBannerModule, AnonymousConsentOpenDialogComponent, AppliedCouponsComponent, AsmModule, AutoFocusDirective, B2cStorefrontModule, BREAKPOINT, BannerCarouselComponent, BannerCarouselModule, BannerComponent, BannerModule, BillingAddressFormComponent, BillingAddressFormModule, BreadcrumbComponent, BreadcrumbModule, BreadcrumbSchemaBuilder, BreakpointService, CancelOrReturnItemsComponent, CancelOrderComponent, CancelOrderConfirmationComponent, CancelOrderConfirmationModule, CancelOrderModule, CardComponent, CardModule, CarouselComponent, CarouselModule, CarouselService, CartComponentModule, CartCouponComponent, CartCouponModule, CartDetailsComponent, CartDetailsModule, CartItemComponent, CartItemListComponent, CartNotEmptyGuard, CartPageLayoutHandler, CartSharedModule, CartTotalsComponent, CartTotalsModule, CategoryNavigationComponent, CategoryNavigationModule, CheckoutAuthGuard, CheckoutComponentModule, CheckoutConfig, CheckoutConfigService, CheckoutDetailsLoadedGuard, CheckoutDetailsService, CheckoutGuard, CheckoutLoginComponent, CheckoutLoginModule, CheckoutOrchestratorComponent, CheckoutOrchestratorModule, CheckoutOrderSummaryComponent, CheckoutOrderSummaryModule, CheckoutProgressComponent, CheckoutProgressMobileBottomComponent, CheckoutProgressMobileBottomModule, CheckoutProgressMobileTopComponent, CheckoutProgressMobileTopModule, CheckoutProgressModule, CheckoutStepType, CloseAccountComponent, CloseAccountModalComponent, CloseAccountModule, CmsComponentData, CmsLibModule, CmsPageGuard, CmsParagraphModule, CmsRouteModule, ComponentWrapperDirective, ConsentManagementComponent, ConsentManagementFormComponent, ConsentManagementModule, ConsignmentTrackingComponent, CouponCardComponent, CouponClaimComponent, CouponDialogComponent, CurrentProductService, CustomFormValidators, DeliveryModeComponent, DeliveryModeModule, DeliveryModePreferences, DeliveryModeSetGuard, FooterNavigationComponent, FooterNavigationModule, ForgotPasswordComponent, ForgotPasswordModule, FormUtils, GenericLinkComponent, GenericLinkModule, GlobalMessageComponent, GlobalMessageComponentModule, GuestRegisterFormComponent, HamburgerMenuComponent, HamburgerMenuModule, HamburgerMenuService, HighlightPipe, ICON_TYPE, IconComponent, IconConfig, IconLoaderService, IconModule, IconResourceType, ItemCounterComponent, ItemCounterModule, JSONLD_PRODUCT_BUILDER, JsonLdBaseProductBuilder, JsonLdBuilderModule, JsonLdDirective, JsonLdProductOfferBuilder, JsonLdProductReviewBuilder, JsonLdScriptFactory, LanguageCurrencyComponent, LayoutConfig, LayoutModule, LinkComponent, LinkModule, ListNavigationModule, LoginComponent, LoginFormComponent, LoginFormModule, LoginModule, LogoutGuard, LogoutModule, MainModule, MediaComponent, MediaModule, MediaService, MiniCartComponent, MiniCartModule, ModalRef, ModalService, MyCouponsComponent, MyCouponsModule, MyInterestsComponent, MyInterestsModule, NavigationComponent, NavigationModule, NavigationService, NavigationUIComponent, NotCheckoutAuthGuard, NotificationPreferenceComponent, NotificationPreferenceModule, OrderAmendService, OrderCancellationGuard, OrderCancellationModule, OrderCancellationService, OrderConfirmationGuard, OrderConfirmationItemsComponent, OrderConfirmationModule, OrderConfirmationOverviewComponent, OrderConfirmationThankYouMessageComponent, OrderConfirmationTotalsComponent, OrderConsignedEntriesComponent, OrderDetailActionsComponent, OrderDetailHeadlineComponent, OrderDetailItemsComponent, OrderDetailShippingComponent, OrderDetailTotalsComponent, OrderDetailsModule, OrderDetailsService, OrderHistoryComponent, OrderHistoryModule, OrderModule, OrderReturnGuard, OrderReturnModule, OrderReturnRequestListComponent, OrderReturnService, OrderSummaryComponent, OutletDirective, OutletModule, OutletPosition, OutletRefDirective, OutletRefModule, OutletService, PAGE_LAYOUT_HANDLER, PWAModuleConfig, PageComponentModule, PageLayoutComponent, PageLayoutModule, PageLayoutService, PageSlotComponent, PageSlotModule, PaginationBuilder, PaginationComponent, PaginationConfig, PaginationItemType, PaginationModule, PaginationNavigationPosition, ParagraphComponent, PaymentDetailsSetGuard, PaymentFormComponent, PaymentFormModule, PaymentMethodComponent, PaymentMethodModule, PaymentMethodsComponent, PaymentMethodsModule, PlaceOrderComponent, PlaceOrderModule, ProductAttributesComponent, ProductAttributesModule, ProductCarouselComponent, ProductCarouselModule, ProductCarouselService, ProductDetailOutlets, ProductDetailsPageModule, ProductDetailsTabComponent, ProductDetailsTabModule, ProductFacetNavigationComponent, ProductGridItemComponent, ProductImagesComponent, ProductImagesModule, ProductIntroComponent, ProductIntroModule, ProductListComponent, ProductListComponentService, ProductListItemComponent, ProductListModule, ProductListingPageModule, ProductReferencesComponent, ProductReferencesModule, ProductReviewsComponent, ProductReviewsModule, ProductSchemaBuilder, ProductScrollComponent, ProductSummaryComponent, ProductSummaryModule, ProductTabsModule, ProductVariantGuard, ProductVariantsComponent, ProductVariantsModule, ProductViewComponent, PromotionService, PromotionsComponent, PromotionsModule, PwaModule, QualtricsComponent, QualtricsConfig, QualtricsLoaderService, QualtricsModule, RegisterComponent, RegisterComponentModule, ResetPasswordFormComponent, ResetPasswordModule, ReturnOrderComponent, ReturnOrderConfirmationComponent, ReturnOrderConfirmationModule, ReturnOrderModule, ReturnRequestDetailModule, ReturnRequestItemsComponent, ReturnRequestListModule, ReturnRequestOverviewComponent, ReturnRequestTotalsComponent, ReviewSubmitComponent, ReviewSubmitModule, SCHEMA_BUILDER, SaveForLaterComponent, SaveForLaterModule, ScheduleComponent, SearchBoxComponent, SearchBoxComponentService, SearchBoxModule, SeoMetaService, SeoModule, ShippingAddressComponent, ShippingAddressModule, ShippingAddressSetGuard, SiteContextComponentService, SiteContextSelectorComponent, SiteContextSelectorModule, SiteContextType, SortingComponent, SpinnerComponent, SpinnerModule, StarRatingComponent, StarRatingModule, StockNotificationComponent, StockNotificationDialogComponent, StockNotificationModule, StoreFinderComponent, StoreFinderGridComponent, StoreFinderHeaderComponent, StoreFinderListComponent, StoreFinderListItemComponent, StoreFinderMapComponent, StoreFinderModule, StoreFinderPaginationDetailsComponent, StoreFinderSearchComponent, StoreFinderSearchResultComponent, StoreFinderStoreComponent, StoreFinderStoreDescriptionComponent, StoreFinderStoresCountComponent, StorefrontComponent, StorefrontFoundationModule, StorefrontModule, StructuredDataModule, SuggestedAddressDialogComponent, TabParagraphContainerComponent, TabParagraphContainerModule, TrackingEventsComponent, USE_STACKED_OUTLETS, UpdateEmailComponent, UpdateEmailFormComponent, UpdateEmailModule, UpdatePasswordComponent, UpdatePasswordFormComponent, UpdatePasswordModule, UpdateProfileComponent, UpdateProfileFormComponent, UpdateProfileModule, UserComponentModule, VariantColorSelectorComponent, VariantColorSelectorModule, VariantSizeSelectorComponent, VariantSizeSelectorModule, VariantStyleIconsComponent, VariantStyleIconsModule, VariantStyleSelectorComponent, VariantStyleSelectorModule, ViewConfig, ViewConfigModule, ViewModes, WishListComponent, WishListItemComponent, WishListModule, b2cLayoutConfig, defaultCmsContentConfig, defaultPWAModuleConfig, defaultPageHeaderConfig, defaultPaginationConfig, defaultScrollConfig, fontawesomeIconConfig, getStructuredDataFactory, headerComponents, initSeoService, pwaConfigurationFactory, pwaFactory, sortTitles, titleScores, ɵ0$1 as ɵ0, ɵ1, ɵ2, ɵ3, AsmLoaderModule as ɵa, asmFactory as ɵb, SkipLinkComponent as ɵba, SkipLinkService as ɵbb, SkipLinkDirective as ɵbc, MyCouponsComponentService as ɵbd, suffixUrlMatcher as ɵbe, addCmsRoute as ɵbf, htmlLangProvider as ɵbg, setHtmlLangAttribute as ɵbh, AnonymousConsentsModule as ɵbi, AnonymousConsentDialogComponent as ɵbj, RoutingModule as ɵbk, defaultStorefrontRoutesConfig as ɵbl, defaultRoutingConfig as ɵbm, ComponentMapperService as ɵc, AsmEnablerService as ɵd, AsmMainUiComponent as ɵe, AsmComponentService as ɵf, CSAgentLoginFormComponent as ɵg, CustomerSelectionComponent as ɵh, AsmSessionTimerComponent as ɵi, FormatTimerPipe as ɵj, CustomerEmulationComponent as ɵk, AutoFocusDirectiveModule as ɵl, defaultCheckoutConfig as ɵm, ExpressCheckoutService as ɵn, defaultQualtricsConfig as ɵo, CmsRoutesService as ɵp, CmsMappingService as ɵq, CmsI18nService as ɵr, CmsGuardsService as ɵs, ReturnRequestService as ɵt, AddToHomeScreenService as ɵu, SkipLinkModule as ɵv, skipLinkFactory as ɵw, defaultSkipLinkConfig as ɵx, SkipLinkConfig as ɵy, SkipLinkScrollPosition as ɵz, DeferLoaderService as θDeferLoaderService, IntersectionService as θIntersectionService };\n"]}